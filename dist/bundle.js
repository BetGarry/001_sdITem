/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={9521:(e,t,i)=>{"use strict";function r(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function n(e){return Math.min(1,Math.max(0,e))}function a(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function s(e){return e<=1?"".concat(100*Number(e),"%"):e}function o(e){return 1===e.length?"0"+e:String(e)}function l(e,t,i){return{r:255*r(e,255),g:255*r(t,255),b:255*r(i,255)}}function c(e,t,i){e=r(e,255),t=r(t,255),i=r(i,255);var n=Math.max(e,t,i),a=Math.min(e,t,i),s=0,o=0,l=(n+a)/2;if(n===a)o=0,s=0;else{var c=n-a;switch(o=l>.5?c/(2-n-a):c/(n+a),n){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4}s/=6}return{h:s,s:o,l}}function u(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*i*(t-e):i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function h(e,t,i){var n,a,s;if(e=r(e,360),t=r(t,100),i=r(i,100),0===t)a=i,s=i,n=i;else{var o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;n=u(l,o,e+1/3),a=u(l,o,e),s=u(l,o,e-1/3)}return{r:255*n,g:255*a,b:255*s}}function d(e,t,i){e=r(e,255),t=r(t,255),i=r(i,255);var n=Math.max(e,t,i),a=Math.min(e,t,i),s=0,o=n,l=n-a,c=0===n?0:l/n;if(n===a)s=0;else{switch(n){case e:s=(t-i)/l+(t<i?6:0);break;case t:s=(i-e)/l+2;break;case i:s=(e-t)/l+4}s/=6}return{h:s,s:c,v:o}}function f(e,t,i){e=6*r(e,360),t=r(t,100),i=r(i,100);var n=Math.floor(e),a=e-n,s=i*(1-t),o=i*(1-a*t),l=i*(1-(1-a)*t),c=n%6;return{r:255*[i,o,s,s,l,i][c],g:255*[l,i,i,o,s,s][c],b:255*[s,s,l,i,i,o][c]}}function p(e,t,i,r){var n=[o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16))];return r&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function m(e,t,i,r,n){var a=[o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16)),o(b(r))];return n&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function g(e,t,i,r){return[o(b(r)),o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16))].join("")}function b(e){return Math.round(255*parseFloat(e)).toString(16)}function v(e){return _(e)/255}function _(e){return parseInt(e,16)}function y(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}i.r(t),i.d(t,{TinyColor:()=>P,bounds:()=>B,convertDecimalToHex:()=>b,convertHexToDecimal:()=>v,default:()=>j,fromRatio:()=>I,hslToRgb:()=>h,hsvToRgb:()=>f,inputToRGB:()=>E,isReadable:()=>O,isValidCSSUnit:()=>R,legacyRandom:()=>L,mostReadable:()=>D,names:()=>A,numberInputToObject:()=>y,parseIntFromHex:()=>_,random:()=>U,readability:()=>k,rgbToHex:()=>p,rgbToHsl:()=>c,rgbToHsv:()=>d,rgbToRgb:()=>l,rgbaToArgbHex:()=>g,rgbaToHex:()=>m,stringInputToObject:()=>M,tinycolor:()=>C,toMsFilter:()=>N});var A={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function E(e){var t={r:0,g:0,b:0},i=1,r=null,n=null,o=null,c=!1,u=!1;return"string"==typeof e&&(e=M(e)),"object"==typeof e&&(R(e.r)&&R(e.g)&&R(e.b)?(t=l(e.r,e.g,e.b),c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):R(e.h)&&R(e.s)&&R(e.v)?(r=s(e.s),n=s(e.v),t=f(e.h,r,n),c=!0,u="hsv"):R(e.h)&&R(e.s)&&R(e.l)&&(r=s(e.s),o=s(e.l),t=h(e.h,r,o),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=a(i),{ok:c,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var w="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),S="[\\s|\\(]+(".concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")\\s*\\)?"),T="[\\s|\\(]+(".concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")\\s*\\)?"),x={CSS_UNIT:new RegExp(w),rgb:new RegExp("rgb"+S),rgba:new RegExp("rgba"+T),hsl:new RegExp("hsl"+S),hsla:new RegExp("hsla"+T),hsv:new RegExp("hsv"+S),hsva:new RegExp("hsva"+T),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function M(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(A[e])e=A[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var i=x.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=x.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=x.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=x.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=x.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=x.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=x.hex8.exec(e))?{r:_(i[1]),g:_(i[2]),b:_(i[3]),a:v(i[4]),format:t?"name":"hex8"}:(i=x.hex6.exec(e))?{r:_(i[1]),g:_(i[2]),b:_(i[3]),format:t?"name":"hex"}:(i=x.hex4.exec(e))?{r:_(i[1]+i[1]),g:_(i[2]+i[2]),b:_(i[3]+i[3]),a:v(i[4]+i[4]),format:t?"name":"hex8"}:!!(i=x.hex3.exec(e))&&{r:_(i[1]+i[1]),g:_(i[2]+i[2]),b:_(i[3]+i[3]),format:t?"name":"hex"}}function R(e){return Boolean(x.CSS_UNIT.exec(String(e)))}var P=function(){function e(t,i){var r;if(void 0===t&&(t=""),void 0===i&&(i={}),t instanceof e)return t;"number"==typeof t&&(t=y(t)),this.originalInput=t;var n=E(t);this.originalInput=t,this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=i.format)&&void 0!==r?r:n.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=n.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,i=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=a(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=d(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=d(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=c(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=c(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),p(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),m(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*r(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*r(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+p(this.r,this.g,this.b,!1),t=0,i=Object.entries(A);t<i.length;t++){var r=i[t],n=r[0];if(e===r[1])return n}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var i=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=n(i.l),new e(i)},e.prototype.brighten=function(t){void 0===t&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-t/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-t/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-t/100*255))),new e(i)},e.prototype.darken=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=n(i.l),new e(i)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=n(i.s),new e(i)},e.prototype.saturate=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=n(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),r=(i.h+t)%360;return i.h=r<0?360+r:r,new e(i)},e.prototype.mix=function(t,i){void 0===i&&(i=50);var r=this.toRgb(),n=new e(t).toRgb(),a=i/100;return new e({r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a})},e.prototype.analogous=function(t,i){void 0===t&&(t=6),void 0===i&&(i=30);var r=this.toHsl(),n=360/i,a=[this];for(r.h=(r.h-(n*t>>1)+720)%360;--t;)r.h=(r.h+n)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var i=this.toHsv(),r=i.h,n=i.s,a=i.v,s=[],o=1/t;t--;)s.push(new e({h:r,s:n,v:a})),a=(a+o)%1;return s},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),r=new e(t).toRgb(),n=i.a+r.a*(1-i.a);return new e({r:(i.r*i.a+r.r*r.a*(1-i.a))/n,g:(i.g*i.a+r.g*r.a*(1-i.a))/n,b:(i.b*i.a+r.b*r.a*(1-i.a))/n,a:n})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),r=i.h,n=[this],a=360/t,s=1;s<t;s++)n.push(new e({h:(r+s*a)%360,s:i.s,l:i.l}));return n},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function C(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),new P(e,t)}function k(e,t){var i=new P(e),r=new P(t);return(Math.max(i.getLuminance(),r.getLuminance())+.05)/(Math.min(i.getLuminance(),r.getLuminance())+.05)}function O(e,t,i){var r,n;void 0===i&&(i={level:"AA",size:"small"});var a=k(e,t);switch((null!==(r=i.level)&&void 0!==r?r:"AA")+(null!==(n=i.size)&&void 0!==n?n:"small")){case"AAsmall":case"AAAlarge":return a>=4.5;case"AAlarge":return a>=3;case"AAAsmall":return a>=7;default:return!1}}function D(e,t,i){void 0===i&&(i={includeFallbackColors:!1,level:"AA",size:"small"});for(var r=null,n=0,a=i.includeFallbackColors,s=i.level,o=i.size,l=0,c=t;l<c.length;l++){var u=c[l],h=k(e,u);h>n&&(n=h,r=new P(u))}return O(e,r,{level:s,size:o})||!a?r:(i.includeFallbackColors=!1,D(e,["#fff","#000"],i))}function N(e,t){var i=new P(e),r="#"+g(i.r,i.g,i.b,i.a),n=r,a=i.gradientType?"GradientType = 1, ":"";if(t){var s=new P(t);n="#"+g(s.r,s.g,s.b,s.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(a,"startColorstr=").concat(r,",endColorstr=").concat(n,")")}function I(e,t){var i={r:s(e.r),g:s(e.g),b:s(e.b)};return void 0!==e.a&&(i.a=Number(e.a)),new P(i,t)}function L(){return new P({r:Math.random(),g:Math.random(),b:Math.random()})}function U(e){if(void 0===e&&(e={}),void 0!==e.count&&null!==e.count){var t=e.count,i=[];for(e.count=void 0;t>i.length;)e.count=null,e.seed&&(e.seed+=1),i.push(U(e));return e.count=t,i}var r=function(e,t){var i=F(function(e){var t=parseInt(e,10);if(!Number.isNaN(t)&&t<360&&t>0)return[t,t];if("string"==typeof e){var i=B.find((function(t){return t.name===e}));if(i){var r=G(i);if(r.hueRange)return r.hueRange}var n=new P(e);if(n.isValid){var a=n.toHsv().h;return[a,a]}}return[0,360]}(e),t);return i<0&&(i=360+i),i}(e.hue,e.seed),n=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return F([0,100],t.seed);var i=V(e).saturationRange,r=i[0],n=i[1];switch(t.luminosity){case"bright":r=55;break;case"dark":r=n-10;break;case"light":n=55}return F([r,n],t.seed)}(r,e),a=function(e,t,i){var r=function(e,t){for(var i=V(e).lowerBounds,r=0;r<i.length-1;r++){var n=i[r][0],a=i[r][1],s=i[r+1][0],o=i[r+1][1];if(t>=n&&t<=s){var l=(o-a)/(s-n);return l*t+(a-l*n)}}return 0}(e,t),n=100;switch(i.luminosity){case"dark":n=r+20;break;case"light":r=(n+r)/2;break;case"random":r=0,n=100}return F([r,n],i.seed)}(r,n,e),s={h:r,s:n,v:a};return void 0!==e.alpha&&(s.a=e.alpha),new P(s)}function V(e){e>=334&&e<=360&&(e-=360);for(var t=0,i=B;t<i.length;t++){var r=G(i[t]);if(r.hueRange&&e>=r.hueRange[0]&&e<=r.hueRange[1])return r}throw Error("Color not found")}function F(e,t){if(void 0===t)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var i=e[1]||1,r=e[0]||0,n=(t=(9301*t+49297)%233280)/233280;return Math.floor(r+n*(i-r))}function G(e){var t=e.lowerBounds[0][0],i=e.lowerBounds[e.lowerBounds.length-1][0],r=e.lowerBounds[e.lowerBounds.length-1][1],n=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[t,i],brightnessRange:[r,n]}}var B=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}];const j=C},6920:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsModelStatus=void 0,(i=t.ShapeDiverCommonsModelStatus||(t.ShapeDiverCommonsModelStatus={})).UNKNOWN="unknown",i.NOT_UPLOADED="not_uploaded",i.UPLOADED="uploaded",i.PENDING="pending",i.CONFIRMED="confirmed",i.DENIED="denied",i.DELETED="deleted"},973:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsModelComputationStatus=void 0,(i=t.ShapeDiverCommonsModelComputationStatus||(t.ShapeDiverCommonsModelComputationStatus={})).SUCCESS="success",i.TIMEOUT="timeout",i.CHECK_CONFIRMED="checkconfirmed",i.CHECK_DENIED="checkdenied",i.CHECK_PENDING="checkpending",i.MAX_COMBINED_ASSET_SIZE_EXCEEDED="maxcombinedassetsizeexceeded",i.MAX_DB_SIZE_PER_OUTPUT_EXCEEDED="maxdbsizeperoutputexceeded",i.MAX_PARTS_PER_OUTPUT_EXCEEDED="maxpartsperoutputexceeded",i.MAX_ASSET_PARTS_PER_OUTPUT_EXCEEDED="maxassetpartsperoutputexceeded",i.MAX_TRANSFORMATIONS_PER_OUTPUT_EXCEEDED="maxtransformationsperoutputexceeded",i.MAX_PARTS_EXCEEDED="maxpartsexceeded",i.MAX_ASSET_PARTS_EXCEEDED="maxassetpartsexceeded",i.RECOVERABLE_ERROR="recoverableerror",i.UNRECOVERABLE_ERROR="unrecoverableerror",i.NO_OUTPUT_DATA_FOR_DEFAULT_PARAMETER_VALUES="nooutputdatafordefaultparametervalues",i.MODEL_WITHOUT_GEOMETRY_OUTPUT="modelwithoutgeometryoutput",i.UNKNOWN="unknown"},2594:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsTicketType=void 0,(i=t.ShapeDiverCommonsTicketType||(t.ShapeDiverCommonsTicketType={})).BACKEND="backend",i.NONE=""},8225:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(3674),t),n(i(4601),t),n(i(5007),t),n(i(8382),t),n(i(9257),t),n(i(7127),t),n(i(2230),t),n(i(5307),t),n(i(999),t),n(i(2799),t),n(i(6707),t),n(i(5912),t),n(i(1898),t),n(i(9138),t),n(i(4625),t)},3674:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestQueryModelComputationStatus=t.ShapeDiverRequestQueryModelStatus=t.ShapeDiverRequestModelComputationQueryType=t.ShapeDiverRequestModelComputationQueryStatus=t.ShapeDiverRequestModelComputationQueryOrder=t.ShapeDiverRequestGltfUploadQueryConversion=t.ShapeDiverRequestLogMessageLevel=t.ShapeDiverRequestTicketType=void 0;const r=i(6920),n=i(973),a=i(2594);var s,o,l,c,u;t.ShapeDiverRequestTicketType=Object.assign({},a.ShapeDiverCommonsTicketType),(u=t.ShapeDiverRequestLogMessageLevel||(t.ShapeDiverRequestLogMessageLevel={}))[u.INFO=0]="INFO",u[u.WARNING=1]="WARNING",u[u.ERROR=2]="ERROR",(c=t.ShapeDiverRequestGltfUploadQueryConversion||(t.ShapeDiverRequestGltfUploadQueryConversion={})).NONE="none",c.SCENE="scene",c.USDZ="usdz",(l=t.ShapeDiverRequestModelComputationQueryOrder||(t.ShapeDiverRequestModelComputationQueryOrder={})).ASC="asc",l.DESC="desc",(o=t.ShapeDiverRequestModelComputationQueryStatus||(t.ShapeDiverRequestModelComputationQueryStatus={})).SUCCESS="success",o.TIMEOUT="timeout",o.OTHER="other",o.ALL="*",(s=t.ShapeDiverRequestModelComputationQueryType||(t.ShapeDiverRequestModelComputationQueryType={})).COMPUTATION="computation",s.EXPORT="export",s.ALL="*",t.ShapeDiverRequestQueryModelStatus=Object.assign({},r.ShapeDiverCommonsModelStatus),t.ShapeDiverRequestQueryModelComputationStatus=Object.assign({},n.ShapeDiverCommonsModelComputationStatus)},4601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5007:(e,t)=>{"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestModelTrustlevel=t.ShapeDiverRequestModelFiletype=void 0,(r=t.ShapeDiverRequestModelFiletype||(t.ShapeDiverRequestModelFiletype={})).GRASSHOPPER_BINARY="gh",r.GRASSHOPPER_XML="ghx",(i=t.ShapeDiverRequestModelTrustlevel||(t.ShapeDiverRequestModelTrustlevel={})).UNDEFINED="",i.NONE="none",i.FULL="full"},8382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestSdtfUploadPartType=void 0,(t.ShapeDiverRequestSdtfUploadPartType||(t.ShapeDiverRequestSdtfUploadPartType={})).MODEL_SDTF="model/vnd.sdtf"},9257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5307:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseErrorType=void 0,(i=t.ShapeDiverResponseErrorType||(t.ShapeDiverResponseErrorType={})).ASSERTION_ERROR="SdAssertionError",i.CACHE_ERROR_GENERIC="SdCacheErrorGeneric",i.CONNECTOR_ERROR="SdConnectorError",i.DATABASE_ERROR_FILTER_INVALID="SdDatabaseErrorFilterInvalid",i.DATABASE_ERROR_GENERIC="SdDatabaseErrorGeneric",i.DATABASE_ERROR_SELECTOR_INVALID="SdDatabaseErrorSelectorInvalid",i.DATABASE_ERROR_SELECTOR_NOT_UNIQUE="SdDatabaseErrorSelectorNotUnique",i.EMAILING_ERROR="SdEmailingError",i.ERROR_ENTITY_NOT_FOUND="SdErrorEntityNotFound",i.ERROR_FORBIDDEN="SdErrorForbidden",i.ERROR_GENERIC_CLIENT="SdErrorGenericClient",i.ERROR_GENERIC_INTERNAL="SdErrorGenericInternal",i.ERROR_UNAUTHORIZED="SdErrorUnauthorized",i.ILLEGAL_ARGUMENT_ERROR="SdIllegalArgumentError",i.JWT_VALIDATION_ERROR="SdJwtValidationError",i.MODEL_VALIDATION_ERROR="SdModelValidationError",i.NOT_ACCEPTABLE="SdNotAcceptable",i.NOT_FOUND_ERROR="SdNotFoundError",i.PARAMETER_VALIDATION_ERROR="SdParameterValidationError",i.RATE_LIMIT_ERROR_GENERIC="SdRateLimitErrorGeneric",i.REQUEST_TIMEOUT="SdRequestTimeout",i.REQUEST_VALIDATION_ERROR="SdRequestValidationError",i.RESOURCE_GONE_ERROR="SdResourceGoneError",i.SESSION_GONE_ERROR="SdSessionGoneError",i.SESSION_VALIDATION_ERROR="SdSessionValidationError",i.STORAGE_ERROR_GENERIC="SdStorageErrorGeneric",i.TEXTURE_URL_ERROR="SdTextureUrlError",i.TICKET_VALIDATION_ERROR="SdTicketValidationError",i.TOKEN_MISSING_ERROR="SdTokenMissingError",i.TRANSFORM_CONTENT_ARRAY_ERROR="SdTransformContentArrayError",i.UNCONFIRMED_MODEL_ERROR="SdUnconfirmedModelError",i.UNKNOWN=""},999:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseExportDefinitionType=void 0,(i=t.ShapeDiverResponseExportDefinitionType||(t.ShapeDiverResponseExportDefinitionType={})).UNKNOWN="unknown",i.DOWNLOAD="download",i.EMAIL="email",i.SHAPEWAYS="shapeways"},2799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6707:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseModelCleanupProcessType=t.ShapeDiverResponseTicketType=t.ShapeDiverResponseParameterStructure=t.ShapeDiverResponseModelStatus=void 0;const r=i(6920),n=i(2594);var a,s;t.ShapeDiverResponseModelStatus=Object.assign({},r.ShapeDiverCommonsModelStatus),(s=t.ShapeDiverResponseParameterStructure||(t.ShapeDiverResponseParameterStructure={})).ITEM="item",s.LIST="list",s.TREE="tree",t.ShapeDiverResponseTicketType=Object.assign({},n.ShapeDiverCommonsTicketType),(a=t.ShapeDiverResponseModelCleanupProcessType||(t.ShapeDiverResponseModelCleanupProcessType={})).DELETE_EXPORT_VERSION="delete_export_version",a.DELETE_MODEL_TEXTURE="delete_model_texture",a.DELETE_OUTPUT_VERSION="delete_output_version"},5912:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseModelComputationStatus=void 0;const r=i(973);t.ShapeDiverResponseModelComputationStatus=Object.assign({},r.ShapeDiverCommonsModelComputationStatus)},1898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1347:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseShapeDiverSdk=void 0;const r=i(309),n=i(6855);t.BaseShapeDiverSdk=class{constructor(e){this.sdkConfig=new n.SdkConfigInternal(e),this.sdkApi=new r.ShapeDiverSdkApi(this.sdkConfig)}setConfigurationValue(e,t){this.sdkConfig.setConfigValue(e,t)}get configuration(){return this.sdkConfig.toConfig()}}},1976:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverError=void 0;class i extends Error{constructor(e){super(e)}}t.ShapeDiverError=i,t.ShapeDiverRequestError=class extends i{constructor(e,t){super(t),this.desc=e}},t.ShapeDiverResponseError=class extends i{constructor(e,t,i,r,n){super(e),this.status=t,this.error=i,this.desc=r,this.headers=n}}},309:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdkApi=t.ShapeDiverSdkApiResponseType=void 0;const a=n(i(7218)),s=i(1976),o=i(1948);var l,c;!function(e){e.DELETE="DELETE",e.GET="GET",e.HEAD="HEAD",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT"}(l||(l={})),function(e){e.JSON="json",e.DATA="arraybuffer",e.TEXT="text"}(c=t.ShapeDiverSdkApiResponseType||(t.ShapeDiverSdkApiResponseType={}));class u{constructor(e){this.config=e}buildRequestConfig(e,t,i){const r={method:e,headers:{},responseType:t.responseType,data:void 0};return t.disableCustomHeaders||(r.headers=Object.assign({},this.config.headers)),t.disableAuthorization?(delete r.headers.Authorization,delete r.headers.authorization):this.config.jwt&&(r.headers.Authorization="Bearer "+this.config.jwt),t.contentType&&(r.headers["Content-Type"]=t.contentType,r.data=i),t.accept&&(r.headers.Accept=t.accept),r}buildUrl(e){if("string"!=typeof e)throw new s.ShapeDiverError("No URL or URI was specified");return e.startsWith("http")?e:e.startsWith("/")?`${this.config.baseUrl}/${e.substring(1)}`:`${this.config.baseUrl}/${e}`}static processError(e,t){var i,n,a;return r(this,void 0,void 0,(function*(){if(e.response){const r=e.response;let o;throw o=t===c.DATA?this.convertErrorResponseData(r.data):r.data,new s.ShapeDiverResponseError(o.message||o.desc||(null!==(i=o.error)&&void 0!==i?i:""),r.status,null!==(n=o.error)&&void 0!==n?n:"",null!==(a=o.desc)&&void 0!==a?a:"",r.headers)}throw e.request?new s.ShapeDiverRequestError("Could not send request.","The request was made but no response was received"):new s.ShapeDiverError(e.message)}))}static convertErrorResponseData(e){let t;if("undefined"==typeof window)t=Buffer.from(e).toString();else{if(!window.TextDecoder)throw new s.ShapeDiverError("Received an unknown error object");t=new TextDecoder("utf-8").decode(new Uint8Array(e))}try{return JSON.parse(t)}catch(e){return{message:t}}}static parseResponse(e,t){switch(t){case c.TEXT:case c.JSON:return e;case c.DATA:return e instanceof ArrayBuffer?e:Uint8Array.from(e).buffer;default:(0,o.sdAssertUnreachable)(t)}}head(e,t={}){return r(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},t),{responseType:c.JSON}),r=this.buildRequestConfig(l.HEAD,i,void 0);try{const t=yield(0,a.default)(this.buildUrl(e),r);return[t.headers,t.status]}catch(e){return yield u.processError(e,i.responseType)}}))}get(e,t={contentType:"application/json",responseType:c.JSON}){return r(this,void 0,void 0,(function*(){const i=this.buildRequestConfig(l.GET,t,void 0);try{const r=yield(0,a.default)(this.buildUrl(e),i);return[r.headers,u.parseResponse(r.data,t.responseType)]}catch(e){return yield u.processError(e,t.responseType)}}))}post(e,t={},i={contentType:"application/json",responseType:c.JSON}){return r(this,void 0,void 0,(function*(){const r=this.buildRequestConfig(l.POST,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),r);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}put(e,t={},i={contentType:"application/json",responseType:c.JSON}){return r(this,void 0,void 0,(function*(){const r=this.buildRequestConfig(l.PUT,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),r);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}patch(e,t={},i={contentType:"application/json",responseType:c.JSON}){return r(this,void 0,void 0,(function*(){const r=this.buildRequestConfig(l.PATCH,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),r);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}delete(e,t={contentType:"application/json",responseType:c.JSON}){return r(this,void 0,void 0,(function*(){const i=this.buildRequestConfig(l.DELETE,t,{});try{const r=yield(0,a.default)(this.buildUrl(e),i);return[r.headers,u.parseResponse(r.data,t.responseType)]}catch(e){return yield u.processError(e,t.responseType)}}))}}t.ShapeDiverSdkApi=u},6855:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdkConfigInternal=t.ShapeDiverSdkConfigType=void 0;const r=i(1976);var n;!function(e){e.BASE_URL="BASE_URL",e.JWT_TOKEN="JWT_TOKEN",e.REQUEST_HEADERS="REQUEST_HEADERS"}(n=t.ShapeDiverSdkConfigType||(t.ShapeDiverSdkConfigType={}));class a{constructor(e){this._baseUrl=e,this._headers={},this._jwt=""}get baseUrl(){return this._baseUrl}get headers(){return this._headers}get jwt(){return this._jwt}toConfig(){return{baseUrl:this._baseUrl,headers:this._headers,jwt:this._jwt}}setConfigValue(e,t){switch(e){case n.BASE_URL:this._baseUrl=a.validateValue(e,t,"string");break;case n.JWT_TOKEN:this._jwt=a.validateValue(e,t,"string");break;case n.REQUEST_HEADERS:this._headers=a.validateValue(e,t,"string_map");break;default:throw new r.ShapeDiverError(`Invalid config-type ${e}`)}}static validateValue(e,t,i){switch(i){case"string":if("string"!=typeof t)throw new r.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string`);break;case"string_map":if("object"!=typeof t||!Object.values(t).every((e=>"string"==typeof e)))throw new r.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string-map`)}return t}}t.SdkConfigInternal=a},2170:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverSdkApi=t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverError=t.BaseShapeDiverSdk=t.BaseResourceApi=void 0;const r=i(309);Object.defineProperty(t,"ShapeDiverSdkApi",{enumerable:!0,get:function(){return r.ShapeDiverSdkApi}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return r.ShapeDiverSdkApiResponseType}});const n=i(1347);Object.defineProperty(t,"BaseShapeDiverSdk",{enumerable:!0,get:function(){return n.BaseShapeDiverSdk}});const a=i(6855);Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return a.ShapeDiverSdkConfigType}});const s=i(7711);Object.defineProperty(t,"BaseResourceApi",{enumerable:!0,get:function(){return s.BaseResourceApi}});const o=i(1976);Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return o.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return o.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return o.ShapeDiverResponseError}})},7711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseResourceApi=void 0,t.BaseResourceApi=class{constructor(e){this.commonPath="/api/v2",this.api=e}buildAnalyticsUri(){return`${this.commonPath}/analytics`}buildArSceneUri(){return`${this.commonPath}/ar-scene`}buildAuthGroupUri(){return`${this.commonPath}/auth_group`}buildTicketUri(e){return`${this.commonPath}/ticket/${e}`}buildSessionUri(e){return`${this.commonPath}/session/${e}`}buildModelUri(e){return`${this.commonPath}/model/${e}`}buildSystemUri(){return`${this.commonPath}/system`}}},1948:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sdAssertUnreachable=void 0;const r=i(1976);t.sdAssertUnreachable=function(e){throw new r.ShapeDiverError("Reached unreachable block")}},5437:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseError=void 0;const r=i(8225),n=i(2170);class a extends n.ShapeDiverError{constructor(e){super(e.message),this.status=e.status,this.desc=e.desc,this.error=Object.values(r.ShapeDiverResponseErrorType).includes(e.error)?e.error:r.ShapeDiverResponseErrorType.UNKNOWN}}t.ShapeDiverResponseError=a},675:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdk=t.create=void 0;const r=i(2170),n=i(2665),a=i(3439),s=i(3508),o=i(192),l=i(3342),c=i(2163),u=i(8112),h=i(2632),d=i(8913),f=i(1819),p=i(6489),m=i(6184),g=i(9801);t.create=function(e,t){return new b(e,t)};class b extends r.BaseShapeDiverSdk{constructor(e,t){super(e),t&&this.setConfigurationValue(r.ShapeDiverSdkConfigType.JWT_TOKEN,t),this._analytics=new n.ShapeDiverAnalyticsApi(this.sdkApi),this._arScene=new a.ShapeDiverArSceneApi(this.sdkApi),this._asset=new s.ShapeDiverAssetApi(this.sdkApi),this._export=new o.ShapeDiverExportApi(this.sdkApi),this._file=new l.ShapeDiverFileApi(this.sdkApi),this._gltf=new c.ShapeDiverGltfApi(this.sdkApi),this._model=new u.ShapeDiverModelApi(this.sdkApi),this._output=new h.ShapeDiverOutputApi(this.sdkApi),this._sdtf=new d.ShapeDiverSdtfApi(this.sdkApi),this._session=new f.ShapeDiverSessionApi(this.sdkApi),this._system=new p.ShapeDiverSystemApi(this.sdkApi),this._texture=new m.ShapeDiverTextureApi(this.sdkApi),this._utils=new g.ShapeDiverUtilsApi(this.sdkApi)}get analytics(){return this._analytics}get arScene(){return this._arScene}get asset(){return this._asset}get export(){return this._export}get file(){return this._file}get gltf(){return this._gltf}get model(){return this._model}get output(){return this._output}get sdtf(){return this._sdtf}get session(){return this._session}get system(){return this._system}get texture(){return this._texture}get utils(){return this._utils}}t.ShapeDiverSdk=b},7849:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdk=t.create=t.ShapeDiverResponseError=t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverRequestError=t.ShapeDiverError=void 0,n(i(8225),t);var a=i(2170);Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return a.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return a.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return a.ShapeDiverSdkApiResponseType}}),Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return a.ShapeDiverSdkConfigType}});var s=i(5437);Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return s.ShapeDiverResponseError}});var o=i(675);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return o.create}}),Object.defineProperty(t,"ShapeDiverSdk",{enumerable:!0,get:function(){return o.ShapeDiverSdk}})},2665:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverAnalyticsApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}modelSessionStatistics(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildAnalyticsUri()+"/session/model",e))[1]}))))}))}}t.ShapeDiverAnalyticsApi=s},3439:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverArSceneApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}exists(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){try{const[t,i]=yield this.api.head(`${this.buildArSceneUri()}/${e}`,{disableAuthorization:!0});return 200===i}catch(e){if(e instanceof n.ShapeDiverResponseError&&404===e.status)return!1;throw e}}))))}))}getGltf(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var t;const[i,r]=yield this.api.get(`${this.buildArSceneUri()}/${e}/gltf`,{responseType:n.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0});return[r,null!==(t=i["Content-Type"])&&void 0!==t?t:i["content-type"]]}))))}))}getUsdz(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var t;const[i,r]=yield this.api.get(`${this.buildArSceneUri()}/${e}/usdz`,{responseType:n.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0});return[r,null!==(t=i["Content-Type"])&&void 0!==t?t:i["content-type"]]}))))}))}}t.ShapeDiverArSceneApi=s},3508:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverAssetApi=void 0;const n=i(2170),a=i(5008),s=/.+\/session\/.+\/export\/.+/,o=/.+\/session\/.+\/output\/.+/,l=/.+\/session\/.+\/texture\/.+/,c=/.+\/cdn-asset-(exports|outputs|textures)\/.+/,u=/.+\/cdn-asset-exports\/.+/,h=/.+\/cdn-asset-outputs\/.+/,d=/.+\/cdn-asset-textures\/.+/;class f extends n.BaseResourceApi{constructor(e){super(e)}getExport(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var i;const[r,a]=yield this.api.get(`${this.buildSessionUri(e)}/export/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=r["Content-Type"])&&void 0!==i?i:r["content-type"]]}))))}))}getOutput(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var i;const[r,a]=yield this.api.get(`${this.buildSessionUri(e)}/output/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=r["Content-Type"])&&void 0!==i?i:r["content-type"]]}))))}))}getSdtfJsonContent(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/output/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.JSON,accept:"model/vnd.sdtf+json"}))[1]}))))}))}getTexture(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var i;const[r,a]=yield this.api.get(`${this.buildSessionUri(e)}/texture/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=r["Content-Type"])&&void 0!==i?i:r["content-type"]]}))))}))}getGltf(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/gltf/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}getUsdz(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/usdz/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}downloadImage(e,t){return r(this,void 0,void 0,(function*(){let i;return i=l.test(t)||d.test(t)?t:`${this.buildSessionUri(e)}/image?url=${(0,a.encodeBase64)(t)}`,yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var e;const[r,a]=yield this.api.get(i,{responseType:n.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:c.test(t)});return[a,null!==(e=r["Content-Type"])&&void 0!==e?e:r["content-type"]]}))))}))}getAsset(e){return r(this,void 0,void 0,(function*(){let t;if(s.test(e)||u.test(e))t="export";else if(o.test(e)||h.test(e))t="output";else{if(!l.test(e)&&!d.test(e))throw new n.ShapeDiverError("Cannot fetch asset: Invalid URL (only ShapeDiver asset URLs are allowed).");t="texture"}return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){var i;const[r,a]=yield this.api.get(e,{responseType:n.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:c.test(e)});return[a,null!==(i=r["Content-Type"])&&void 0!==i?i:r["content-type"],t]}))))}))}}t.ShapeDiverAssetApi=f},192:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverExportApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}compute(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export",t))[1]}))))}))}getCache(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export/cache",t))[1]}))))}))}updateDefinitions(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/export",t))[1]}))))}))}listVersions(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/export/"+t+"/list"))[1]}))))}))}}t.ShapeDiverExportApi=s},3342:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverFileApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}list(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${t}/list`))[1]}))))}))}get(e,t,i){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${t}/${i}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}delete(e,t,i){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/file/${t}/${i}`))[1]}))))}))}requestUpload(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/file/upload",t))[1]}))))}))}}t.ShapeDiverFileApi=s},2163:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverGltfApi=void 0;const n=i(8225),a=i(2170),s=i(5008);class o extends a.BaseResourceApi{constructor(e){super(e)}upload(e,t,i,o=n.ShapeDiverRequestGltfUploadQueryConversion.NONE){return r(this,void 0,void 0,(function*(){return yield(0,s.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(`${this.buildSessionUri(e)}/gltf?conversion=${o}`,t,{contentType:i,responseType:a.ShapeDiverSdkApiResponseType.JSON}))[1]}))))}))}}t.ShapeDiverGltfApi=o},8112:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverModelApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}get(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)))[1]}))))}))}create(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.commonPath,e))[1]}))))}))}update(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildModelUri(e),t))[1]}))))}))}delete(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.delete(this.buildModelUri(e)))[1]}))))}))}list(){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.commonPath}/list`))[1]}))))}))}getConfig(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/config"))[1]}))))}))}createConfig(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/config",t))[1]}))))}))}updateConfig(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/config",t))[1]}))))}))}getFile(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/file/download",{contentType:"application/json",responseType:n.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}setDefaultParams(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter/defval",t))[1]}))))}))}updateParameterDefinitions(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter",t))[1]}))))}))}queryComputations(e,t,i,n,s,o,l,c,u){return r(this,void 0,void 0,(function*(){const h=[];return void 0!==t&&h.push("timestamp_from="+t),void 0!==i&&h.push("timestamp_to="+i),void 0!==n&&h.push("limit="+n),void 0!==s&&h.push("strict_limit="+s),void 0!==o&&h.push("order="+o),void 0!==l&&h.push("status="+l),void 0!==c&&h.push("type="+c),void 0!==u&&h.push("offset="+u),yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/computations?"+h.join("&")))[1]}))))}))}enqueueCleanupExports(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/export?untilLastSeen="+t))[1]}))))}))}enqueueCleanupOutputs(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/output?untilLastSeen="+t))[1]}))))}))}enqueueCleanupTextures(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/texture?untilLastSeen="+t))[1]}))))}))}getCleanupStatus(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/cleanup/status"))[1]}))))}))}}t.ShapeDiverModelApi=s},2632:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverOutputApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}customize(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output",t))[1]}))))}))}getCache(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output/cache",t))[1]}))))}))}updateDefinitions(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/output",t))[1]}))))}))}listVersions(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/output/"+t+"/list"))[1]}))))}))}}t.ShapeDiverOutputApi=s},8913:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdtfApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}list(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${t}/list`))[1]}))))}))}get(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${t}`,{responseType:n.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}delete(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/sdtf/${t}`))[1]}))))}))}requestUpload(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/sdtf/upload",t))[1]}))))}))}}t.ShapeDiverSdtfApi=s},1819:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSessionApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}ticket(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/ticket",t))[1]}))))}))}init(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildTicketUri(e),t))[1]}))))}))}default(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/default"))[1]}))))}))}close(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/close"))[1]}))))}))}}t.ShapeDiverSessionApi=s},6489:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSystemApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}log(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/log/message",t))[1]}))))}))}pruneModel(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSystemUri()}/model/${e}`))[1]}))))}))}decryptTicket(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildTicketUri(e)))[1]}))))}))}authGroup(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildAuthGroupUri(),e))[1]}))))}))}getMinionInfo(){return r(this,void 0,void 0,(function*(){return(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSystemUri()}/minions/info`))[1]}))))}))}getWorkerInfo(){return r(this,void 0,void 0,(function*(){return(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSystemUri()}/workers/info`))[1]}))))}))}}t.ShapeDiverSystemApi=s},6184:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverTextureApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}listModelTextures(e){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/texture/list"))[1]}))))}))}}t.ShapeDiverTextureApi=s},9801:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverUtilsApi=void 0;const n=i(2170),a=i(5008);class s extends n.BaseResourceApi{constructor(e){super(e)}upload(e,t,i){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return this.api.put(e,t,{contentType:i,responseType:n.ShapeDiverSdkApiResponseType.JSON,disableAuthorization:!0,disableCustomHeaders:!0})}))))}))}download(e,t){return r(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return this.api.get(e,{contentType:"application/json",responseType:t,disableAuthorization:!0,disableCustomHeaders:!0})}))))}))}submitAndWaitForCustomization(e,t,i,n=-1){return r(this,void 0,void 0,(function*(){const o=Date.now(),l=yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return e.output.customize(t,i)})))),c=Date.now()-o;return n=n<0?n:Math.max(0,n-c),s.waitForCustomizationResult(e,t,l,n)}))}submitAndWaitForExport(e,t,i,n=-1){return r(this,void 0,void 0,(function*(){const o=Date.now(),l=yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return e.export.compute(t,i)})))),c=Date.now()-o;return n=n<0?n:Math.max(0,n-c),s.waitForExportResult(e,t,l,i.exports.id,n)}))}static waitForCustomizationResult(e,t,i,o=-1){return r(this,void 0,void 0,(function*(){if(!i.outputs)return i;const l={};Object.keys(i.outputs).forEach((e=>l[e]=i.outputs[e].version));let c=s.getMaxOutputDelay(i);const u=Date.now();for(;c>0;){if(o>=0){const e=Date.now()-u;if(e>=o)throw new n.ShapeDiverError(`Maximum wait time of ${o} ms reached`);e+c>o&&(c=o-e)}yield(0,a.sleep)(c),i=yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return e.output.getCache(t,l)})))),c=s.getMaxOutputDelay(i)}return i}))}static waitForExportResult(e,t,i,o,l=-1){return r(this,void 0,void 0,(function*(){if(!i.exports)throw new n.ShapeDiverError("The given DTO does not contain any exports");const c={[o]:i.exports[o].version};if(!i.exports)throw new n.ShapeDiverError(`Could not find any export with the id '${o}'`);let u=s.getExportDelay(i,o);const h=Date.now();for(;u>0;){if(l>=0){const e=Date.now()-h;if(e>=l)throw new n.ShapeDiverError(`Maximum wait time of ${l} ms reached`);e+u>l&&(u=l-e)}yield(0,a.sleep)(u),i=yield(0,a.sendRequest)((()=>r(this,void 0,void 0,(function*(){return e.export.getCache(t,c)})))),u=s.getExportDelay(i,o)}return i}))}static getMaxOutputDelay(e){return Math.max(...Object.values(e.outputs).map((e=>e)).map((e=>{var t;return null!==(t=e.delay)&&void 0!==t?t:-1})))}static getExportDelay(e,t){var i;return null!==(i=e.exports[t].delay)&&void 0!==i?i:-1}}t.ShapeDiverUtilsApi=s},5008:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.sleep=t.sendRequest=void 0;const n=i(2170),a=i(5437);function s(e){return new Promise((t=>setTimeout(t,e)))}t.sendRequest=function(e){var t;return r(this,void 0,void 0,(function*(){let i=0;for(;i<5;)try{return yield e()}catch(e){if(i++,e instanceof n.ShapeDiverResponseError){if(429===e.status){const i=null!==(t=e.headers["retry-after"])&&void 0!==t?t:60;yield s(1e3*Number(i));continue}if(502===e.status){yield s(1e3);continue}throw new a.ShapeDiverResponseError(e)}throw e}throw new n.ShapeDiverError("Could not send request: Retry-limit reached")}))},t.sleep=s,t.encodeBase64=function(e){try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}}},8343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfError=void 0;class i extends Error{constructor(e){super(e)}}t.SdtfError=i},7079:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(6932),t),n(i(2464),t),n(i(5091),t),n(i(3266),t),n(i(710),t),n(i(1816),t),n(i(3102),t),n(i(9294),t),n(i(6424),t),n(i(2332),t),n(i(8291),t),n(i(797),t),n(i(9928),t),n(i(4133),t),n(i(3730),t),n(i(6209),t),n(i(539),t),n(i(3183),t),n(i(435),t),n(i(6617),t),n(i(8425),t),n(i(5727),t),n(i(3810),t),n(i(6216),t),n(i(6434),t),n(i(6214),t),n(i(1348),t),n(i(7616),t),n(i(4221),t),n(i(6215),t),n(i(5299),t),n(i(530),t),n(i(2115),t),n(i(3297),t),n(i(6894),t),n(i(438),t),n(i(5308),t),n(i(1128),t),n(i(9311),t),n(i(7343),t),n(i(1019),t),n(i(6057),t),n(i(4556),t),n(i(8343),t)},6932:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2464:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3266:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6424:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4221:(e,t)=>{"use strict";var i,r,n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfTypeHintName=t.SdtfRhinoTypeHintName=t.SdtfGrasshopperTypeHintName=t.SdtfGeometryTypeHintName=t.SdtfPrimitiveTypeHintName=void 0,function(e){e.BOOLEAN="boolean",e.CHAR="char",e.COLOR="color",e.DATA="data",e.DECIMAL="decimal",e.DOUBLE="double",e.GUID="guid",e.IMAGE="image",e.INT8="int8",e.INT16="int16",e.INT32="int32",e.INT64="int64",e.JSON="json",e.SINGLE="single",e.STRING="string",e.UINT8="uint8",e.UINT16="uint16",e.UINT32="uint32",e.UINT64="uint64"}(i=t.SdtfPrimitiveTypeHintName||(t.SdtfPrimitiveTypeHintName={})),function(e){e.GEOMETRY_ARC="geometry.arc",e.GEOMETRY_BOUNDING_BOX="geometry.boundingbox",e.GEOMETRY_BOX="geometry.box",e.GEOMETRY_CIRCLE="geometry.circle",e.GEOMETRY_COMPLEX="geometry.complex",e.GEOMETRY_CONE="geometry.cone",e.GEOMETRY_CYLINDER="geometry.cylinder",e.GEOMETRY_ELLIPSE="geometry.ellipse",e.GEOMETRY_INTERVAL="geometry.interval",e.GEOMETRY_INTERVAL2="geometry.interval2",e.GEOMETRY_LINE="geometry.line",e.GEOMETRY_MATRIX="geometry.matrix",e.GEOMETRY_PLANE="geometry.plane",e.GEOMETRY_POINT="geometry.point",e.GEOMETRY_POINT2D="geometry.point2d",e.GEOMETRY_POINT3D="geometry.point3d",e.GEOMETRY_POINT4D="geometry.point4d",e.GEOMETRY_POLYLINE="geometry.polyline",e.GEOMETRY_RAY="geometry.ray",e.GEOMETRY_RECTANGLE="geometry.rectangle",e.GEOMETRY_SPHERE="geometry.sphere",e.GEOMETRY_TORUS="geometry.torus",e.GEOMETRY_TRANSFORM="geometry.transform",e.GEOMETRY_TRANSFORM_LIST="geometry.transformlist",e.GEOMETRY_VECTOR="geometry.vector",e.GEOMETRY_VECTOR2D="geometry.vector2d",e.GEOMETRY_VECTOR3D="geometry.vector3d",e.GEOMETRY_VECTOR4D="geometry.vector4d"}(r=t.SdtfGeometryTypeHintName||(t.SdtfGeometryTypeHintName={})),function(e){e.GRASSHOPPER_PATH="grasshopper.path"}(n=t.SdtfGrasshopperTypeHintName||(t.SdtfGrasshopperTypeHintName={})),function(e){e.RHINO_ARC_CURVE="rhino.arccurve",e.RHINO_BREP="rhino.brep",e.RHINO_CURVE="rhino.curve",e.RHINO_EXTRUSION="rhino.extrusion",e.RHINO_LINE_CURVE="rhino.linecurve",e.RHINO_MESH="rhino.mesh",e.RHINO_NURBS_CURVE="rhino.nurbscurve",e.RHINO_NURBS_SURFACE="rhino.nurbssurface",e.RHINO_PLANE_SURFACE="rhino.planesurface",e.RHINO_POINT="rhino.point",e.RHINO_POLY_CURVE="rhino.polycurve",e.RHINO_POLYLINE_CURVE="rhino.polylinecurve",e.RHINO_REV_SURFACE="rhino.revsurface",e.RHINO_SUBD="rhino.subd",e.RHINO_SURFACE="rhino.surface"}(a=t.SdtfRhinoTypeHintName||(t.SdtfRhinoTypeHintName={})),t.SdtfTypeHintName=Object.assign(Object.assign(Object.assign(Object.assign({},i),r),n),a)},3183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6434:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6215:(e,t)=>{"use strict";function i(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}function r(e){return i(e)&&"number"==typeof e}function n(e){return r(e)&&Number.isInteger(Number(e))}function a(e){return n(e)&&Number(e)>=0}function s(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNil=t.isBinaryData=t.isDataObject=t.isUintArray=t.isIntArray=t.isNumberArray=t.isNonEmptyString=t.isUint=t.isInt=t.isNumber=t.isNumeric=void 0,t.isNumeric=i,t.isNumber=r,t.isInt=n,t.isUint=a,t.isNonEmptyString=function(e){return"string"==typeof e&&""!==e},t.isNumberArray=function(e){return Array.isArray(e)&&e.every((e=>r(e)))},t.isIntArray=function(e){return Array.isArray(e)&&e.every((e=>n(e)))},t.isUintArray=function(e){return Array.isArray(e)&&e.every((e=>a(e)))},t.isDataObject=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&!s(e)},t.isBinaryData=s,t.isNil=function(e){return null==e}},5299:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryDeepCopy=t.enumValues=t.enumKeys=t.sdAssertUnreachable=void 0;const r=i(8343);function n(e){return Object.keys(e).filter((e=>Number.isNaN(+e)))}t.sdAssertUnreachable=function(e){throw new r.SdtfError("Reached unreachable block.")},t.enumKeys=n,t.enumValues=function(e){return n(e).map((t=>e[t]))},t.tryDeepCopy=function(e){try{return structuredClone(e)}catch(t){return e}}},4556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2350:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeGuard=void 0;const r=i(7079);t.SdtfGeometryTypeGuard=class{static assertArc(e){if(!this.isArc(e))throw new r.SdtfError("Assertion error: Value is not a geometry arc type.")}static isArc(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius&&"number"==typeof e.angle}static assertBoundingBox(e){if(!this.isBoundingBox(e))throw new r.SdtfError("Assertion error: Value is not a geometry bounding box type.")}static isBoundingBox(e){return(0,r.isDataObject)(e)&&this.isPoint3d(e.min)&&this.isPoint3d(e.max)}static assertBox(e){if(!this.isBox(e))throw new r.SdtfError("Assertion error: Value is not a geometry box type.")}static isBox(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&Array.isArray(e.extents)&&3===e.extents.length&&e.extents.every((e=>(0,r.isNumberArray)(e)&&2===e.length))}static assertCircle(e){if(!this.isCircle(e))throw new r.SdtfError("Assertion error: Value is not a geometry circle type.")}static isCircle(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius}static assertComplex(e){if(!this.isComplex(e))throw new r.SdtfError("Assertion error: Value is not a geometry complex type.")}static isComplex(e){return(0,r.isNumberArray)(e)&&2===e.length}static assertCone(e){if(!this.isCone(e))throw new r.SdtfError("Assertion error: Value is not a geometry cone type.")}static isCone(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius&&"number"==typeof e.height}static assertCylinder(e){if(!this.isCylinder(e))throw new r.SdtfError("Assertion error: Value is not a geometry cylinder type.")}static isCylinder(e){return(0,r.isDataObject)(e)&&this.isCircle(e.baseCircle)&&"number"==typeof e.height}static assertEllipse(e){if(!this.isEllipse(e))throw new r.SdtfError("Assertion error: Value is not a geometry ellipse type.")}static isEllipse(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.r1&&"number"==typeof e.r2}static assertInterval(e){if(!this.isInterval(e))throw new r.SdtfError("Assertion error: Value is not a geometry interval type.")}static isInterval(e){return(0,r.isNumberArray)(e)&&2===e.length}static assertInterval2(e){if(!this.isInterval2(e))throw new r.SdtfError("Assertion error: Value is not a geometry interval2 type.")}static isInterval2(e){return(0,r.isDataObject)(e)&&this.isInterval(e.u)&&this.isInterval(e.v)}static assertLine(e){if(!this.isLine(e))throw new r.SdtfError("Assertion error: Value is not a geometry line type.")}static isLine(e){return Array.isArray(e)&&2===e.length&&this.isPoint3d(e[0])&&this.isPoint3d(e[1])}static assertMatrix(e){if(!this.isMatrix(e))throw new r.SdtfError("Assertion error: Value is not a geometry matrix type.")}static isMatrix(e){if(!Array.isArray(e))return!1;const t=e[0].length;return e.every((e=>(0,r.isNumberArray)(e)&&e.length===t))}static assertPlane(e){if(!this.isPlane(e))throw new r.SdtfError("Assertion error: Value is not a geometry plane type.")}static isPlane(e){return Array.isArray(e)&&3===e.length&&this.isPoint3d(e[0])&&this.isVector3d(e[1])&&this.isVector3d(e[2])}static assertPoint(e){if(!this.isPoint(e))throw new r.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint(e){return(0,r.isNumberArray)(e)&&(2===e.length||3===e.length||4===e.length)}static assertPoint2d(e){if(!this.isPoint2d(e))throw new r.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint2d(e){return(0,r.isNumberArray)(e)&&2===e.length}static assertPoint3d(e){if(!this.isPoint3d(e))throw new r.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint3d(e){return(0,r.isNumberArray)(e)&&3===e.length}static assertPoint4d(e){if(!this.isPoint4d(e))throw new r.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint4d(e){return(0,r.isNumberArray)(e)&&4===e.length}static assertPolyline(e){if(!this.isPolyline(e))throw new r.SdtfError("Assertion error: Value is not a geometry polyline type.")}static isPolyline(e){return Array.isArray(e)&&e.every((e=>this.isPoint3d(e)))}static assertRay(e){if(!this.isRay(e))throw new r.SdtfError("Assertion error: Value is not a geometry ray type.")}static isRay(e){return Array.isArray(e)&&2===e.length&&this.isPoint3d(e[0])&&this.isVector3d(e[1])}static assertRectangle(e){if(!this.isRectangle(e))throw new r.SdtfError("Assertion error: Value is not a geometry rectangle type.")}static isRectangle(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&this.isInterval(e.x)&&this.isInterval(e.y)}static assertSphere(e){if(!this.isSphere(e))throw new r.SdtfError("Assertion error: Value is not a geometry sphere type.")}static isSphere(e){return(0,r.isDataObject)(e)&&this.isPoint3d(e.center)&&"number"==typeof e.radius}static assertTorus(e){if(!this.isTorus(e))throw new r.SdtfError("Assertion error: Value is not a geometry torus type.")}static isTorus(e){return(0,r.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.majorRadius&&"number"==typeof e.minorRadius}static assertTransform(e){if(!this.isTransform(e))throw new r.SdtfError("Assertion error: Value is not a geometry transform type.")}static isTransform(e){return Array.isArray(e)&&4===e.length&&e.every((e=>(0,r.isNumberArray)(e)&&4===e.length))}static assertTransformList(e){if(!this.isTransformList(e))throw new r.SdtfError("Assertion error: Value is not a geometry transform-list type.")}static isTransformList(e){return Array.isArray(e)&&e.every((e=>this.isTransform(e)))}static assertVector(e){if(!this.isVector(e))throw new r.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector(e){return(0,r.isNumberArray)(e)&&(2===e.length||3===e.length||4===e.length)}static assertVector2d(e){if(!this.isVector2d(e))throw new r.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector2d(e){return(0,r.isNumberArray)(e)&&2===e.length}static assertVector3d(e){if(!this.isVector3d(e))throw new r.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector3d(e){return(0,r.isNumberArray)(e)&&3===e.length}static assertVector4d(e){if(!this.isVector4d(e))throw new r.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector4d(e){return(0,r.isNumberArray)(e)&&4===e.length}}},8814:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeIntegration=void 0;const n=i(7079),a=i(1753),s=i(5716);t.SdtfGeometryTypeIntegration=class{isTypeHintSupported(e){return(0,n.enumValues)(n.SdtfGeometryTypeHintName).includes(e)}init(){return r(this,void 0,void 0,(function*(){}))}getReader(){return new a.SdtfGeometryTypeReader}getWriter(e){return new s.SdtfGeometryTypeWriter(e)}}},1753:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeReader=void 0;const n=i(7079),a=i(5400);t.SdtfGeometryTypeReader=class{constructor(){this.validator=new a.SdtfGeometryTypeValidator}readComponent(e){var t;return r(this,void 0,void 0,(function*(){const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;if(!this.validator.validateComponent(i,e.value,e.accessor))throw new n.SdtfError(`Cannot read value of type '${i}': Invalid component.`);switch(i){case n.SdtfGeometryTypeHintName.GEOMETRY_ARC:case n.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case n.SdtfGeometryTypeHintName.GEOMETRY_BOX:case n.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case n.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case n.SdtfGeometryTypeHintName.GEOMETRY_CONE:case n.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case n.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case n.SdtfGeometryTypeHintName.GEOMETRY_LINE:case n.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case n.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case n.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case n.SdtfGeometryTypeHintName.GEOMETRY_RAY:case n.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case n.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case n.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return e.value;default:(0,n.sdAssertUnreachable)(i)}}))}}},5400:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeValidator=void 0;const r=i(7079),n=i(2350);t.SdtfGeometryTypeValidator=class{validateComponent(e,t,i){switch(e){case r.SdtfGeometryTypeHintName.GEOMETRY_ARC:return n.SdtfGeometryTypeGuard.isArc(t);case r.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:return n.SdtfGeometryTypeGuard.isBoundingBox(t);case r.SdtfGeometryTypeHintName.GEOMETRY_BOX:return n.SdtfGeometryTypeGuard.isBox(t);case r.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:return n.SdtfGeometryTypeGuard.isCircle(t);case r.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:return n.SdtfGeometryTypeGuard.isComplex(t);case r.SdtfGeometryTypeHintName.GEOMETRY_CONE:return n.SdtfGeometryTypeGuard.isCone(t);case r.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:return n.SdtfGeometryTypeGuard.isCylinder(t);case r.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:return n.SdtfGeometryTypeGuard.isEllipse(t);case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:return n.SdtfGeometryTypeGuard.isInterval(t);case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:return n.SdtfGeometryTypeGuard.isInterval2(t);case r.SdtfGeometryTypeHintName.GEOMETRY_LINE:return n.SdtfGeometryTypeGuard.isLine(t);case r.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:return n.SdtfGeometryTypeGuard.isMatrix(t);case r.SdtfGeometryTypeHintName.GEOMETRY_PLANE:return n.SdtfGeometryTypeGuard.isPlane(t);case r.SdtfGeometryTypeHintName.GEOMETRY_POINT:return n.SdtfGeometryTypeGuard.isPoint(t);case r.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:return n.SdtfGeometryTypeGuard.isPoint2d(t);case r.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:return n.SdtfGeometryTypeGuard.isPoint3d(t);case r.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:return n.SdtfGeometryTypeGuard.isPoint4d(t);case r.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:return n.SdtfGeometryTypeGuard.isPolyline(t);case r.SdtfGeometryTypeHintName.GEOMETRY_RAY:return n.SdtfGeometryTypeGuard.isRay(t);case r.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:return n.SdtfGeometryTypeGuard.isRectangle(t);case r.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:return n.SdtfGeometryTypeGuard.isSphere(t);case r.SdtfGeometryTypeHintName.GEOMETRY_TORUS:return n.SdtfGeometryTypeGuard.isTorus(t);case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:return n.SdtfGeometryTypeGuard.isTransform(t);case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:return n.SdtfGeometryTypeGuard.isTransformList(t);case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:return n.SdtfGeometryTypeGuard.isVector(t);case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:return n.SdtfGeometryTypeGuard.isVector2d(t);case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:return n.SdtfGeometryTypeGuard.isVector3d(t);case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return n.SdtfGeometryTypeGuard.isVector4d(t);default:(0,r.sdAssertUnreachable)(e)}}}},5716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeWriter=void 0;const r=i(7079),n=i(5400);t.SdtfGeometryTypeWriter=class{constructor(e){this.factory=e,this.validator=new n.SdtfGeometryTypeValidator}writeComponent(e){var t;const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;switch(i){case r.SdtfGeometryTypeHintName.GEOMETRY_ARC:case r.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case r.SdtfGeometryTypeHintName.GEOMETRY_BOX:case r.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case r.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case r.SdtfGeometryTypeHintName.GEOMETRY_CONE:case r.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case r.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case r.SdtfGeometryTypeHintName.GEOMETRY_LINE:case r.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case r.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case r.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case r.SdtfGeometryTypeHintName.GEOMETRY_RAY:case r.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case r.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case r.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:delete e.accessor;break;default:(0,r.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new r.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}},8701:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(318),t),n(i(2350),t),n(i(8814),t)},7439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8542:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeGuard=void 0;const r=i(7079);t.SdtfPrimitiveTypeGuard=class{static assertBoolean(e){if(!this.isBoolean(e))throw new r.SdtfError("Assertion error: Value is not a primitive boolean type.")}static isBoolean(e){return"boolean"==typeof e}static isBooleanType(e){return e===r.SdtfPrimitiveTypeHintName.BOOLEAN}static assertString(e){if(!this.isString(e))throw new r.SdtfError("Assertion error: Value is not a primitive string type.")}static isString(e){return"string"==typeof e}static isStringType(e){return[r.SdtfPrimitiveTypeHintName.CHAR,r.SdtfPrimitiveTypeHintName.GUID,r.SdtfPrimitiveTypeHintName.STRING].includes(e)}static assertNumber(e){if(!this.isNumber(e))throw new r.SdtfError("Assertion error: Value is not a primitive number type.")}static isNumber(e){return(0,r.isNumber)(e)}static isNumberType(e){return[r.SdtfPrimitiveTypeHintName.DECIMAL,r.SdtfPrimitiveTypeHintName.DOUBLE,r.SdtfPrimitiveTypeHintName.SINGLE,r.SdtfPrimitiveTypeHintName.INT8,r.SdtfPrimitiveTypeHintName.INT16,r.SdtfPrimitiveTypeHintName.INT32,r.SdtfPrimitiveTypeHintName.INT64,r.SdtfPrimitiveTypeHintName.UINT8,r.SdtfPrimitiveTypeHintName.UINT16,r.SdtfPrimitiveTypeHintName.UINT32,r.SdtfPrimitiveTypeHintName.UINT64].includes(e)}static assertColor(e){if(!this.isColor(e))throw new r.SdtfError("Assertion error: Value is not a primitive color type.")}static isColor(e){return(0,r.isNumberArray)(e)&&4===e.length}static isColorType(e){return e===r.SdtfPrimitiveTypeHintName.COLOR}static assertDataView(e){if(!this.isDataView(e))throw new r.SdtfError("Assertion error: Value is not a primitive data type.")}static isDataView(e){return ArrayBuffer.isView(e)}static isDataViewType(e){return[r.SdtfPrimitiveTypeHintName.DATA,r.SdtfPrimitiveTypeHintName.IMAGE].includes(e)}static assertJson(e){if(!this.isJson(e))throw new r.SdtfError("Assertion error: Value is not a primitive json type.")}static isJson(e){return(0,r.isDataObject)(e)||Array.isArray(e)}static isJsonType(e){return e===r.SdtfPrimitiveTypeHintName.JSON}}},487:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeIntegration=void 0;const n=i(7079),a=i(8642),s=i(9564);t.SdtfPrimitiveTypeIntegration=class{isTypeHintSupported(e){return(0,n.enumValues)(n.SdtfPrimitiveTypeHintName).includes(e)}init(){return r(this,void 0,void 0,(function*(){}))}getReader(){return new a.SdtfPrimitiveTypeReader}getWriter(e){return new s.SdtfPrimitiveTypeWriter(e)}}},8642:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeReader=void 0;const n=i(7079),a=i(8383);t.SdtfPrimitiveTypeReader=class{constructor(){this.validator=new a.SdtfPrimitiveTypeValidator}readComponent(e){var t,i;return r(this,void 0,void 0,(function*(){const r=null===(t=e.typeHint)||void 0===t?void 0:t.name;if(!this.validator.validateComponent(r,e.value,e.accessor))throw new n.SdtfError(`Cannot read value of type '${r}': Invalid component.`);switch(r){case n.SdtfPrimitiveTypeHintName.BOOLEAN:case n.SdtfPrimitiveTypeHintName.CHAR:case n.SdtfPrimitiveTypeHintName.DECIMAL:case n.SdtfPrimitiveTypeHintName.DOUBLE:case n.SdtfPrimitiveTypeHintName.GUID:case n.SdtfPrimitiveTypeHintName.INT8:case n.SdtfPrimitiveTypeHintName.INT16:case n.SdtfPrimitiveTypeHintName.INT32:case n.SdtfPrimitiveTypeHintName.INT64:case n.SdtfPrimitiveTypeHintName.JSON:case n.SdtfPrimitiveTypeHintName.SINGLE:case n.SdtfPrimitiveTypeHintName.STRING:case n.SdtfPrimitiveTypeHintName.UINT8:case n.SdtfPrimitiveTypeHintName.UINT16:case n.SdtfPrimitiveTypeHintName.UINT32:case n.SdtfPrimitiveTypeHintName.UINT64:return e.value;case n.SdtfPrimitiveTypeHintName.COLOR:return this.mapColor(e.value);case n.SdtfPrimitiveTypeHintName.DATA:case n.SdtfPrimitiveTypeHintName.IMAGE:return this.mapGenericData(yield null===(i=e.accessor)||void 0===i?void 0:i.getContent());default:(0,n.sdAssertUnreachable)(r)}}))}mapColor(e){let t;t=Array.isArray(e)?e:e.split(",").map((e=>Number(e)));let i=[...t];return 3===i.length&&(i=[...t,1]),i}mapGenericData(e){return null==e?void 0:e.data}}},8383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeValidator=void 0;const r=i(7079),n=i(3776),a=i(8542),s=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,o=new n.Decimal(340282347e30),l=new n.Decimal(-340282347e30);class c{validateComponent(e,t,i){switch(e){case r.SdtfPrimitiveTypeHintName.BOOLEAN:return a.SdtfPrimitiveTypeGuard.isBoolean(t);case r.SdtfPrimitiveTypeHintName.CHAR:return c.validateCharType(t);case r.SdtfPrimitiveTypeHintName.COLOR:return c.validateColorType(t);case r.SdtfPrimitiveTypeHintName.DATA:return!!i&&void 0===t;case r.SdtfPrimitiveTypeHintName.DECIMAL:case r.SdtfPrimitiveTypeHintName.DOUBLE:return a.SdtfPrimitiveTypeGuard.isNumber(t);case r.SdtfPrimitiveTypeHintName.GUID:return c.validateGuidType(t);case r.SdtfPrimitiveTypeHintName.IMAGE:return!!i&&void 0===t;case r.SdtfPrimitiveTypeHintName.INT8:return c.validateInt8Type(t);case r.SdtfPrimitiveTypeHintName.INT16:return c.validateInt16Type(t);case r.SdtfPrimitiveTypeHintName.INT32:return c.validateInt32Type(t);case r.SdtfPrimitiveTypeHintName.INT64:return c.validateInt64Type(t);case r.SdtfPrimitiveTypeHintName.JSON:return a.SdtfPrimitiveTypeGuard.isJson(t);case r.SdtfPrimitiveTypeHintName.SINGLE:return c.validateSingleType(t);case r.SdtfPrimitiveTypeHintName.STRING:return a.SdtfPrimitiveTypeGuard.isString(t);case r.SdtfPrimitiveTypeHintName.UINT8:return c.validateUint8Type(t);case r.SdtfPrimitiveTypeHintName.UINT16:return c.validateUint16Type(t);case r.SdtfPrimitiveTypeHintName.UINT32:return c.validateUint32Type(t);case r.SdtfPrimitiveTypeHintName.UINT64:return c.validateUint64Type(t);default:(0,r.sdAssertUnreachable)(e)}}static validateCharType(e){return a.SdtfPrimitiveTypeGuard.isString(e)&&1===e.length}static validateColorType(e){if((0,r.isNumberArray)(e)&&e.length>=3&&e.length<=4)return!0;if("string"!=typeof e)return!1;const t=e.split(",");return(3===t.length||4===t.length)&&t.every((e=>(0,r.isNumeric)(e)))}static validateGuidType(e){return a.SdtfPrimitiveTypeGuard.isString(e)&&s.test(e)}static validateInt8Type(e){return(0,r.isInt)(e)&&e>=-128&&e<=127}static validateInt16Type(e){return(0,r.isInt)(e)&&e>=-32768&&e<=32767}static validateInt32Type(e){return(0,r.isInt)(e)&&e>=-2147483648&&e<=2147483647}static validateInt64Type(e){return(0,r.isInt)(e)&&e>=-0x8000000000000000&&e<=0x8000000000000000}static validateSingleType(e){if(!(0,r.isNumber)(e))return!1;const t=new n.Decimal(e);return t.precision()<=9&&t.comparedTo(l)>=0&&t.comparedTo(o)<=0}static validateUint8Type(e){return(0,r.isUint)(e)&&e<=255}static validateUint16Type(e){return(0,r.isUint)(e)&&e<=65535}static validateUint32Type(e){return(0,r.isUint)(e)&&e<=4294967295}static validateUint64Type(e){return(0,r.isUint)(e)}}t.SdtfPrimitiveTypeValidator=c},9564:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeWriter=void 0;const r=i(7079),n=i(8383);t.SdtfPrimitiveTypeWriter=class{constructor(e){this.factory=e,this.validator=new n.SdtfPrimitiveTypeValidator}writeComponent(e){var t;const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;switch(i){case r.SdtfPrimitiveTypeHintName.BOOLEAN:case r.SdtfPrimitiveTypeHintName.CHAR:case r.SdtfPrimitiveTypeHintName.COLOR:case r.SdtfPrimitiveTypeHintName.DECIMAL:case r.SdtfPrimitiveTypeHintName.DOUBLE:case r.SdtfPrimitiveTypeHintName.GUID:case r.SdtfPrimitiveTypeHintName.INT8:case r.SdtfPrimitiveTypeHintName.INT16:case r.SdtfPrimitiveTypeHintName.INT32:case r.SdtfPrimitiveTypeHintName.INT64:case r.SdtfPrimitiveTypeHintName.JSON:case r.SdtfPrimitiveTypeHintName.SINGLE:case r.SdtfPrimitiveTypeHintName.STRING:case r.SdtfPrimitiveTypeHintName.UINT8:case r.SdtfPrimitiveTypeHintName.UINT16:case r.SdtfPrimitiveTypeHintName.UINT32:case r.SdtfPrimitiveTypeHintName.UINT64:delete e.accessor;break;case r.SdtfPrimitiveTypeHintName.DATA:case r.SdtfPrimitiveTypeHintName.IMAGE:delete e.value;break;default:(0,r.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new r.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}},9116:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(7439),t),n(i(8542),t),n(i(487),t)},6327:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfConfig=void 0;const r=i(8701),n=i(9116);t.SdtfConfig=class{constructor(e){this.integrations=[new n.SdtfPrimitiveTypeIntegration,new r.SdtfGeometryTypeIntegration],void 0!==(null==e?void 0:e.integrations)&&(this.integrations=e.integrations),this.authToken=null==e?void 0:e.authToken}}},9929:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfSdk=t.create=void 0;const n=i(7079),a=i(7494),s=i(4186),o=i(6327),l=i(782);t.create=function(e){return r(this,void 0,void 0,(function*(){const t=new c(e);return yield t.init(),t}))};class c{constructor(e){this.config=new o.SdtfConfig(e)}createParser(){return new s.SdtfParser(this.config)}createConstructor(){return new l.SdtfConstructor(this.config.integrations)}createFormatter(){return new a.SdtfFormatter(this.config.integrations)}init(){return r(this,void 0,void 0,(function*(){const e=[];this.config.integrations.forEach((t=>e.push(t.init()))),(yield Promise.allSettled(e)).forEach((e=>{if("rejected"===e.status){const t=e.reason;throw new n.SdtfError(`Could not initialize all integrations: ${t}`)}}))}))}}t.SdtfSdk=c},2377:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBinarySdtf=void 0;const r=i(7079),n=i(9565);t.SdtfBinarySdtf=class{constructor(){this.binaryHeaderLength=20}constructBinarySdtf(e){var t;const i=null!==(t=e.binaryBody)&&void 0!==t?t:new ArrayBuffer(0),r=this.createJsonContent(e),n=this.createHeader(r.byteLength,i.byteLength);return new Uint8Array([...new Uint8Array(n),...new Uint8Array(r),...new Uint8Array(i)]).buffer}parseBinarySdtf(e){const t=new DataView(e,0,this.binaryHeaderLength),[i,r]=this.readHeader(t);return[new DataView(e,this.binaryHeaderLength,i),new DataView(e,this.binaryHeaderLength+i,r-this.binaryHeaderLength-i)]}readHeader(e){e instanceof ArrayBuffer&&(e=new DataView(e));const t=String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3));if("sdtf"!==t)throw new r.SdtfError(`Invalid identifier: Unknown file type for sdTF identifier '${t}'.`);const i=e.getUint32(4,!0);if(1!==i)throw new r.SdtfError(`Invalid version: Unsupported sdTF version '${i}'.`);const n=e.getUint32(8,!0),a=e.getUint32(12,!0),s=e.getUint32(16,!0);if(0!==s)throw new r.SdtfError(`Invalid content: Unsupported sdTF content format '${s}'.`);return[a,n]}createHeader(e,t){const i=new Uint8Array(20),r=new DataView(i.buffer,0,i.byteLength),n="sdtf";r.setUint8(0,n.codePointAt(0)),r.setUint8(1,n.codePointAt(1)),r.setUint8(2,n.codePointAt(2)),r.setUint8(3,n.codePointAt(3)),r.setUint32(4,1,!0);const a=this.binaryHeaderLength+e+t;return r.setUint32(8,a,!0),r.setUint32(12,e,!0),r.setUint32(16,0,!0),r.buffer}readJsonContent(e){e instanceof ArrayBuffer&&(e=new DataView(e));try{return JSON.parse((new TextDecoder).decode(e))}catch(e){throw new r.SdtfError(`Invalid content: Cannot parse sdTF JSON content. ${e.message}`)}}createJsonContent(e){const t=(0,n.toJsonContent)(e);try{return(new TextEncoder).encode(JSON.stringify(t,void 0,0))}catch(e){throw new r.SdtfError(`Invalid content: Cannot create sdTF JSON content. ${e.message}`)}}}},8650:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBinaryBufferCache=void 0;const n=i(7079);t.SdtfBinaryBufferCache=class{constructor(){this.cacheIdFullBuffer="full",this.cache={}}calcCacheKey(e=""){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return new Uint32Array([t])[0].toString(36)}calcCacheId(e,t){return`${e};${t}`}loadFromCache(e,t,i){const r=this.cache[e];if(!r)return;const n=this.calcCacheId(t,i);if(r[n])return r[n];if(r[this.cacheIdFullBuffer]){const e=r[this.cacheIdFullBuffer];return new DataView(e.buffer,e.byteOffset+t,i)}}storeInCache(e,t,i){var r;const n=null!==(r=this.cache[e])&&void 0!==r?r:{};n[t]=i,this.cache[e]=n}setBinaryBody(e){e&&(this.cache[this.calcCacheKey()]={[this.cacheIdFullBuffer]:e})}getBuffer(e,t,i){var n;return r(this,void 0,void 0,(function*(){const r=this.calcCacheKey(e);return null!==(n=this.loadFromCache(r,t,i))&&void 0!==n?n:yield this.acquireBuffer(e,i,t)}))}acquireBuffer(e,t,i){return r(this,void 0,void 0,(function*(){throw new n.SdtfError("Resolution of external buffers is not supported in this mode. Please use 'ISdtfParser.readFromFile()' or 'ISdtfParser.readFromUrl()' to instantiate the sdTF asset and to enable this functionality.")}))}}},4086:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFileBufferCache=void 0;const n=i(7079),a=i(4593),s=i(8650);class o extends s.SdtfBinaryBufferCache{constructor(e){super(),this.fileUtils=new a.SdtfFileUtils;const t=e.lastIndexOf("/");this.basePath=e.substring(0,t)}acquireBuffer(e,t,i){return r(this,void 0,void 0,(function*(){let r;try{r=yield this.fileUtils.readFile(`${this.basePath}/${e}`)}catch(e){throw new n.SdtfError(`Cannot read buffer: ${e.message}`)}return this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(r)),new DataView(r,t,i)}))}}t.SdtfFileBufferCache=o},7516:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfHttpBufferCache=void 0;const n=i(8650);class a extends n.SdtfBinaryBufferCache{constructor(e){super(),this.httpClient=e}acquireBuffer(e,t,i){return r(this,void 0,void 0,(function*(){const[r,n]=yield this.httpClient.getBinaryBuffer(e,t,i);return n?this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(n)):this.storeInCache(this.calcCacheKey(e),this.calcCacheId(t,i),r),r}))}}t.SdtfHttpBufferCache=a},7494:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFormatter=void 0;const r=i(7215),n=i(9565),a=i(4061),s=i(9549);t.SdtfFormatter=class{constructor(e){this.factory=new a.SdtfComponentFactoryWrapper,this.postProcessor=new s.SdtfWriteableComponentPostProcessor(e)}prettifyReadableAsset(e){const t=(0,r.readableComponentListFromAsset)(e),i=this.factory.createFromReadable(t);return this.prettifyAsset(i)}prettifyWriteableAsset(e){const t=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(t);return this.prettifyAsset(i)}prettifyAsset(e){const t=(0,n.toJsonContent)(e);return JSON.stringify(t,void 0,2)}}},3751:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfHttpClient=void 0;const a=i(7079),s=n(i(7218)),o=i(2377);t.SdtfHttpClient=class{constructor(e,t){this.binarySdtfParser=new o.SdtfBinarySdtf,this.jsonContentUrl=e,this.basicHttpHeader={},t&&(this.basicHttpHeader.authorization="Bearer "+t)}calcUrl(e){if(!e)return this.jsonContentUrl;const t=this.jsonContentUrl.lastIndexOf("/");return`${this.jsonContentUrl.substring(0,t)}/${e}`}getJsonContent(){return r(this,void 0,void 0,(function*(){try{const{data:e,partial:t}=yield this.fetch(this.jsonContentUrl,0,this.binarySdtfParser.binaryHeaderLength);if(t){const[t,i]=this.binarySdtfParser.readHeader(e),r=yield this.fetch(this.jsonContentUrl,20,t);return[new DataView(r.data),void 0]}return this.binarySdtfParser.parseBinarySdtf(e)}catch(e){throw new a.SdtfError(`Could not fetch sdTF JSON content: ${e.message}`)}}))}getBinaryBuffer(e,t,i){return r(this,void 0,void 0,(function*(){try{const{data:r,partial:n}=yield this.fetch(this.calcUrl(e),t,i);return n?[new DataView(r),void 0]:[new DataView(r,t,i),r]}catch(e){throw new a.SdtfError(`Could not fetch sdTF binary buffer: ${e.message}`)}}))}fetch(e,t,i){var n,o;return r(this,void 0,void 0,(function*(){let r;try{r=yield s.default.head(e,{headers:this.basicHttpHeader})}catch(e){throw new a.SdtfError(e.message)}if(r.status>299)throw new a.SdtfError(`Received HTTP status ${r.status}.`);const l=!!(null!==(n=r.headers["Content-Encoding"])&&void 0!==n?n:r.headers["content-encoding"]),c=null!==(o=r.headers["Accept-Ranges"])&&void 0!==o?o:r.headers["accept-ranges"],u=!l&&"bytes"===c,h=u?yield this.fetchPartially(e,t,i):yield this.fetchFully(e);return{data:h instanceof ArrayBuffer?h:Uint8Array.from(h).buffer,partial:u}}))}fetchPartially(e,t,i){return r(this,void 0,void 0,(function*(){let r;try{r=yield s.default.get(e,{headers:Object.assign(Object.assign({},this.basicHttpHeader),{range:`bytes=${t}-${t+i-1}`}),responseType:"arraybuffer"})}catch(e){throw new a.SdtfError(e.message)}if(416===r.status)throw new a.SdtfError("Invalid range requested.");if(206!==r.status)throw new a.SdtfError(`Received HTTP status ${r.status}.`);return r.data}))}fetchFully(e){return r(this,void 0,void 0,(function*(){let t;try{t=yield s.default.get(e,{headers:this.basicHttpHeader,responseType:"arraybuffer"})}catch(e){throw new a.SdtfError(e.message)}if(200!==t.status)throw new a.SdtfError(`Received HTTP status ${t.status}.`);return t.data}))}}},4767:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfSdk=t.create=void 0,n(i(7079),t);var a=i(9929);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return a.create}}),Object.defineProperty(t,"SdtfSdk",{enumerable:!0,get:function(){return a.SdtfSdk}}),n(i(2173),t)},7215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readableComponentListFromAsset=void 0,t.readableComponentListFromAsset=function(e){return{accessors:e.accessors,asset:e,attributes:e.attributes,buffers:e.buffers,bufferViews:e.bufferViews,chunks:e.chunks,items:e.items,nodes:e.nodes,typeHints:e.typeHints,fileInfo:e.fileInfo}}},6899:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfDataParser=void 0,t.SdtfDataParser=class{constructor(e){this.integrations=e}parseContent(e){return i(this,void 0,void 0,(function*(){const t=this.integrations.find((t=>{var i,r;return t.isTypeHintSupported(null!==(r=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==r?r:"")}));return t?t.getReader().readComponent(e):void 0===e.value&&e.accessor?e.accessor.getContent():e.value}))}}},4186:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfParser=void 0;const n=i(7079),a=i(3818),s=i(2377),o=i(8650),l=i(4086),c=i(7516),u=i(3751),h=i(4061),d=i(4593),f=i(7835),p=i(6899),m=i(3482);t.SdtfParser=class{constructor(e){this.config=e,this.binarySdtfParser=new s.SdtfBinarySdtf,this.componentFactory=new h.SdtfComponentFactoryWrapper,this.fileUtils=new d.SdtfFileUtils}readFromFile(e){return r(this,void 0,void 0,(function*(){if(a.isBrowser)throw new n.SdtfError("Reading from file is only supported in Node.js.");let t,i;try{t=this.fileUtils.toAbsolutePath(e),i=yield this.fileUtils.readFile(t)}catch(e){throw new n.SdtfError(`Cannot read sdTF-file: ${e.message}`)}const[r,s]=this.binarySdtfParser.parseBinarySdtf(i),o=this.binarySdtfParser.readJsonContent(r),c=new l.SdtfFileBufferCache(t);return c.setBinaryBody(s),this.createSdtfAsset(o,c)}))}readFromUrl(e){return r(this,void 0,void 0,(function*(){const t=new u.SdtfHttpClient(e,this.config.authToken),[i,r]=yield t.getJsonContent(),n=this.binarySdtfParser.readJsonContent(i),a=new c.SdtfHttpBufferCache(t);return a.setBinaryBody(r),this.createSdtfAsset(n,a)}))}readFromBuffer(e){const[t,i]=this.binarySdtfParser.parseBinarySdtf(e),r=this.binarySdtfParser.readJsonContent(t),n=new o.SdtfBinaryBufferCache;return n.setBinaryBody(i),this.createSdtfAsset(r,n)}createSdtfAsset(e,t){const i=this.componentFactory.createFromJson(e),r=new m.SdtfReadableComponentFactory(t,new p.SdtfDataParser(this.config.integrations));return this.buildReadableAsset(i,r)}buildReadableAsset(e,t){const i=t.createFileInfo(e.fileInfo),r=new f.SdtfReadableAsset(i);return r.typeHints=e.typeHints.map((e=>t.createTypeHint(e))),r.buffers=e.buffers.map((e=>t.createBuffer(e))),r.bufferViews=e.bufferViews.map((e=>t.createBufferView(e,r.buffers))),r.accessors=e.accessors.map((e=>t.createAccessor(e,r.bufferViews))),r.attributes=e.attributes.map((e=>t.createAttributes(e,r.accessors,r.typeHints))),r.items=e.items.map((e=>t.createDataItem(e,r.accessors,r.attributes,r.typeHints))),r.nodes=e.nodes.map((e=>t.createNode(e,r.attributes,r.items,r.typeHints))),r.chunks=e.chunks.map((e=>t.createChunk(e,r.attributes,r.items,r.typeHints))),t.setChunkReferences(r.chunks,e.chunks,r.nodes),t.setNodeReferences(r.nodes,e.nodes),r}}},3482:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableComponentFactory=void 0;const r=i(1177),n=i(5002),a=i(240),s=i(6843),o=i(3756),l=i(9917),c=i(939),u=i(7182);t.SdtfReadableComponentFactory=class{constructor(e,t){this.bufferCache=e,this.dataParser=t}createAccessor(e,t){const i=new r.SdtfReadableAccessor(t[e.bufferView]);return i.bufferView=t[e.bufferView],i.id=e.id,i.additionalProperties=e.additionalProperties,i}createAttributes(e,t,i){const r=new n.SdtfReadableAttributes;return Object.entries(e.entries).forEach((([e,a])=>{const s=new n.SdtfReadableAttribute(this.dataParser);void 0!==a.accessor&&(s.accessor=t[a.accessor]),void 0!==a.typeHint&&(s.typeHint=i[a.typeHint]),s.value=a.value,r.entries[e]=s})),r}createBuffer(e){const t=new a.SdtfReadableBuffer(e.byteLength,this.bufferCache);return t.uri=e.uri,t.additionalProperties=e.additionalProperties,t}createBufferView(e,t){const i=new s.SdtfReadableBufferView(t[e.buffer],e.byteLength,e.byteOffset,e.contentType);return i.contentEncoding=e.contentEncoding,i.name=e.name,i.additionalProperties=e.additionalProperties,i}createChunk(e,t,i,r){return this.createNode(e,t,i,r)}createDataItem(e,t,i,r){const n=new o.SdtfReadableDataItem(this.dataParser);return void 0!==e.accessor&&(n.accessor=t[e.accessor]),void 0!==e.attributes&&(n.attributes=i[e.attributes]),void 0!==e.typeHint&&(n.typeHint=r[e.typeHint]),n.value=e.value,n.additionalProperties=e.additionalProperties,n}createFileInfo(e){const t=new l.SdtfReadableFileInfo(e.version);return t.copyright=e.copyright,t.generator=e.generator,t.version=e.version,t.additionalProperties=e.additionalProperties,t}createNode(e,t,i,r){const n=new c.SdtfReadableNode;return void 0!==e.attributes&&(n.attributes=t[e.attributes]),n.items=e.items.map((e=>i[e])),n.name=e.name,void 0!==e.typeHint&&(n.typeHint=r[e.typeHint]),n.additionalProperties=e.additionalProperties,n}createTypeHint(e){const t=new u.SdtfReadableTypeHint(e.name);return t.additionalProperties=e.additionalProperties,t}setChunkReferences(e,t,i){t.forEach(((t,r)=>{e[r].nodes=t.nodes.map((e=>i[e]))}))}setNodeReferences(e,t){t.forEach(((t,i)=>{e[i].nodes=t.nodes.map((t=>e[t]))}))}}},5825:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBaseReadableComponent=void 0;const r=i(9078);t.SdtfBaseReadableComponent=class{constructor(){this.componentId=(0,r.createComponentId)()}toDataObject(){return(0,r.userComponentToDataObject)(this)}}},1177:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAccessor=void 0;const n=i(5825);class a extends n.SdtfBaseReadableComponent{constructor(e){super(),this.bufferView=e,this.additionalProperties={}}getContent(){return r(this,void 0,void 0,(function*(){return{id:this.id,data:yield this.bufferView.getContent()}}))}}t.SdtfReadableAccessor=a},7835:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAsset=void 0;const r=i(5825);class n extends r.SdtfBaseReadableComponent{constructor(e){super(),this.fileInfo=e,this.accessors=[],this.attributes=[],this.buffers=[],this.bufferViews=[],this.chunks=[],this.items=[],this.nodes=[],this.typeHints=[],this.additionalProperties={}}}t.SdtfReadableAsset=n},5002:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAttribute=t.SdtfReadableAttributes=void 0;const n=i(9078),a=i(5825);class s extends a.SdtfBaseReadableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){const e={};return Object.entries(this.entries).forEach((([t,i])=>e[t]=i.toDataObject())),e}}t.SdtfReadableAttributes=s,t.SdtfReadableAttribute=class{constructor(e){this.dataParser=e}toDataObject(){const e=(0,n.userComponentToDataObject)(this);return delete e.dataParser,e}getContent(){return r(this,void 0,void 0,(function*(){return this.dataParser.parseContent(this)}))}}},240:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableBuffer=void 0;const n=i(7079),a=i(5825);class s extends a.SdtfBaseReadableComponent{constructor(e,t){super(),this.byteLength=e,this.bufferCache=t,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.bufferCache,e}getContent(e,t){return r(this,void 0,void 0,(function*(){if(e+t>this.byteLength)throw new n.SdtfError("Unable to get content of buffer: Requested content is out of range.");return this.bufferCache.getBuffer(this.uri,e,t)}))}}t.SdtfReadableBuffer=s},6843:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableBufferView=void 0;const n=i(5825);class a extends n.SdtfBaseReadableComponent{constructor(e,t,i,r){super(),this.buffer=e,this.byteLength=t,this.byteOffset=i,this.contentType=r,this.additionalProperties={}}getContent(){return r(this,void 0,void 0,(function*(){return this.buffer.getContent(this.byteOffset,this.byteLength)}))}}t.SdtfReadableBufferView=a},3756:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableDataItem=void 0;const n=i(5825);class a extends n.SdtfBaseReadableComponent{constructor(e){super(),this.dataParser=e,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.dataParser,e}getContent(){return r(this,void 0,void 0,(function*(){return this.dataParser.parseContent(this)}))}}t.SdtfReadableDataItem=a},9917:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableFileInfo=void 0;const r=i(5825);class n extends r.SdtfBaseReadableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}}t.SdtfReadableFileInfo=n},939:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableNode=void 0;const r=i(5825);class n extends r.SdtfBaseReadableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}}t.SdtfReadableNode=n},7182:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableTypeHint=void 0;const r=i(5825);class n extends r.SdtfBaseReadableComponent{constructor(e){super(),this.name=e,this.additionalProperties={}}}t.SdtfReadableTypeHint=n},9565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toJsonContent=void 0,t.toJsonContent=function(e){const t=e.asset.toJson();return t.asset=e.fileInfo.toJson(),t.chunks=e.chunks.map((e=>e.toJson())),t.nodes=e.nodes.map((e=>e.toJson())),t.items=e.items.map((e=>e.toJson())),t.attributes=e.attributes.map((e=>e.toJson())),t.typeHints=e.typeHints.map((e=>e.toJson())),t.accessors=e.accessors.map((e=>e.toJson())),t.bufferViews=e.bufferViews.map((e=>e.toJson())),t.buffers=e.buffers.map((e=>e.toJson())),t}},5257:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentFactory=void 0;const r=i(7079),n=i(1743),a=i(8437),s=i(1570),o=i(4043),l=i(6980),c=i(8336),u=i(5272),h=i(1304),d=i(4796);t.SdtfComponentFactory=class{constructor(){this.propertyNameAccessors="accessors",this.propertyNameAttributes="attributes",this.propertyNameBufferViews="bufferViews",this.propertyNameBuffers="buffers",this.propertyNameChunks="chunks",this.propertyNameDataItems="items",this.propertyNameFileInfo="asset",this.propertyNameFileInfoAlternative="fileInfo",this.propertyNameNodes="nodes",this.propertyNameTypeHints="typeHints"}createAccessor(e){const t=new n.SdtfPartialAccessor;return(0,r.isNumber)(e.bufferView)&&(t.bufferView=e.bufferView),"string"==typeof e.id&&(t.id=e.id),Object.entries(e).filter((([e,t])=>"bufferView"!==e&&"id"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createAsset(e){const t=new a.SdtfPartialAsset;return t.fileInfo=0,Object.entries(e).filter((([e,t])=>e!==this.propertyNameAccessors&&e!==this.propertyNameAttributes&&e!==this.propertyNameBufferViews&&e!==this.propertyNameBuffers&&e!==this.propertyNameChunks&&e!==this.propertyNameDataItems&&e!==this.propertyNameFileInfo&&e!==this.propertyNameFileInfoAlternative&&e!==this.propertyNameNodes&&e!==this.propertyNameTypeHints)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createAttributes(e){const t=new s.SdtfPartialAttributes;return Object.entries(e).forEach((([e,i],n)=>{if(!(0,r.isDataObject)(i))throw new r.SdtfError(`Invalid attribute data: Item [${n}] must be an object.`);const a=new s.SdtfAttribute;"number"==typeof i.accessor&&(a.accessor=i.accessor),"number"==typeof i.typeHint&&(a.typeHint=i.typeHint),a.value=i.value,t.entries[e]=a})),t}createBuffer(e){const t=new o.SdtfPartialBuffer;return(0,r.isNumber)(e.byteLength)&&(t.byteLength=e.byteLength),"string"==typeof e.uri&&(t.uri=e.uri),Object.entries(e).filter((([e,t])=>"byteLength"!==e&&"uri"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createBufferView(e){const t=new l.SdtfPartialBufferView;return(0,r.isNumber)(e.buffer)&&(t.buffer=e.buffer),(0,r.isNumber)(e.byteLength)&&(t.byteLength=e.byteLength),(0,r.isNumber)(e.byteOffset)&&(t.byteOffset=e.byteOffset),"string"==typeof e.contentEncoding&&(t.contentEncoding=e.contentEncoding),"string"==typeof e.contentType&&(t.contentType=e.contentType),"string"==typeof e.name&&(t.name=e.name),Object.entries(e).filter((([e,t])=>"buffer"!==e&&"byteLength"!==e&&"byteOffset"!==e&&"contentEncoding"!==e&&"contentType"!==e&&"name"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createChunk(e){return this.createNode(e)}createDataItem(e){const t=new c.SdtfPartialDataItem;return(0,r.isNumber)(e.accessor)&&(t.accessor=e.accessor),(0,r.isNumber)(e.attributes)&&(t.attributes=e.attributes),(0,r.isNumber)(e.typeHint)&&(t.typeHint=e.typeHint),t.value=e.value,Object.entries(e).filter((([e,t])=>"accessor"!==e&&"attributes"!==e&&"typeHint"!==e&&"value"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createFileInfo(e){const t=new u.SdtfPartialFileInfo;return"string"==typeof e.copyright&&(t.copyright=e.copyright),"string"==typeof e.generator&&(t.generator=e.generator),"string"==typeof e.version&&(t.version=e.version),Object.entries(e).filter((([e,t])=>"copyright"!==e&&"generator"!==e&&"version"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createNode(e){const t=new h.SdtfPartialNode;return(0,r.isNumber)(e.attributes)&&(t.attributes=e.attributes),(0,r.isNumberArray)(e.items)&&(t.items=e.items),"string"==typeof e.name&&(t.name=e.name),(0,r.isNumberArray)(e.nodes)&&(t.nodes=e.nodes),(0,r.isNumber)(e.typeHint)&&(t.typeHint=e.typeHint),Object.entries(e).filter((([e,t])=>"attributes"!==e&&"items"!==e&&"name"!==e&&"nodes"!==e&&"typeHint"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createTypeHint(e){const t=new d.SdtfPartialTypeHint;return"string"==typeof e.name&&(t.name=e.name),Object.entries(e).filter((([e,t])=>"name"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}}},4061:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentFactoryWrapper=void 0;const r=i(7079),n=i(1839),a=i(5257);t.SdtfComponentFactoryWrapper=class{constructor(){this.factory=new a.SdtfComponentFactory}createFromJson(e){const t=this.factory;return this.createComponentList({accessors:this.buildFromArray(e,t.propertyNameAccessors,t.createAccessor.bind(t)),asset:this.buildFromObject(e,"",t.createAsset.bind(t)),attributes:this.buildFromArray(e,t.propertyNameAttributes,t.createAttributes.bind(t)),buffers:this.buildFromArray(e,t.propertyNameBuffers,t.createBuffer.bind(t)),bufferViews:this.buildFromArray(e,t.propertyNameBufferViews,t.createBufferView.bind(t)),chunks:this.buildFromArray(e,t.propertyNameChunks,t.createChunk.bind(t)),items:this.buildFromArray(e,t.propertyNameDataItems,t.createDataItem.bind(t)),fileInfo:this.buildFromObject(e,t.propertyNameFileInfo,t.createFileInfo.bind(t)),nodes:this.buildFromArray(e,t.propertyNameNodes,t.createNode.bind(t)),typeHints:this.buildFromArray(e,t.propertyNameTypeHints,t.createTypeHint.bind(t))})}createFromReadable(e){const t=this.factory,i={accessors:e.accessors.map((e=>t.createAccessor(e.toDataObject()))),asset:t.createAsset(e.asset.toDataObject()),attributes:e.attributes.map((e=>t.createAttributes(e.toDataObject()))),buffers:e.buffers.map((e=>t.createBuffer(e.toDataObject()))),bufferViews:e.bufferViews.map((e=>t.createBufferView(e.toDataObject()))),chunks:e.chunks.map((e=>t.createChunk(e.toDataObject()))),items:e.items.map((e=>t.createDataItem(e.toDataObject()))),fileInfo:t.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map((e=>t.createNode(e.toDataObject()))),typeHints:e.typeHints.map((e=>t.createTypeHint(e.toDataObject())))};return this.mapHierarchyRepresentation(i,e),this.createComponentList(i)}createFromWriteable(e){var t;const i=this.factory,r={accessors:e.accessors.map((e=>i.createAccessor(e.toDataObject()))),asset:i.createAsset(e.asset.toDataObject()),attributes:e.attributes.map((e=>i.createAttributes(e.toDataObject()))),buffers:e.buffers.map((e=>i.createBuffer(e.toDataObject()))),bufferViews:e.bufferViews.map((e=>i.createBufferView(e.toDataObject()))),chunks:e.chunks.map((e=>i.createChunk(e.toDataObject()))),items:e.items.map((e=>i.createDataItem(e.toDataObject()))),fileInfo:i.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map((e=>i.createNode(e.toDataObject()))),typeHints:e.typeHints.map((e=>i.createTypeHint(e.toDataObject()))),binaryBody:null===(t=e.buffers.find((e=>!e.uri)))||void 0===t?void 0:t.data};return this.mapHierarchyRepresentation(r,e),this.createComponentList(r)}createComponentList(e){const t=new n.SdtfComponentValidator(e),i=e.asset;t.validateAsset(i);const r=e.fileInfo;t.validateFileInfo(r);const a=e.buffers.map((e=>(t.validateBuffer(e),e))),s=e.bufferViews.map((e=>(t.validateBufferView(e),e))),o=e.accessors.map((e=>(t.validateAccessor(e),e))),l=e.typeHints.map((e=>(t.validateTypeHint(e),e)));return{accessors:o,asset:i,attributes:e.attributes.map((e=>(t.validateAttributes(e),e))),buffers:a,bufferViews:s,chunks:e.chunks.map((e=>(t.validateChunk(e),e))),items:e.items.map((e=>(t.validateDataItem(e),e))),nodes:e.nodes.map((e=>(t.validateNode(e),e))),typeHints:l,fileInfo:r,binaryBody:e.binaryBody}}buildFromObject(e,t,i){const n=t?e[t]:e;if(!(0,r.isDataObject)(n))throw new r.SdtfError(`Invalid item at ${t}: Item must be an object.`);return i(n)}buildFromArray(e,t,i){const n=e[t];if(void 0===n)return[];if(!Array.isArray(n))throw new r.SdtfError(`Invalid content property: '${t}' must be an array.`);return n.map(((e,n)=>{if(!(0,r.isDataObject)(e))throw new r.SdtfError(`Invalid item at ${t}[${n}]: Item must be an object.`);return i(e)}))}mapHierarchyRepresentation(e,t){const i=(e,t)=>t?e.findIndex((e=>e.componentId===t)):-1;e.asset.fileInfo=0,e.accessors.forEach(((e,r)=>{var n;const a=t.accessors[r];e.bufferView=i(t.bufferViews,null===(n=null==a?void 0:a.bufferView)||void 0===n?void 0:n.componentId)})),e.attributes.forEach(((e,r)=>{e.entries&&Object.entries(e.entries).forEach((([e,n])=>{var a,s;const o=t.attributes[r].entries[e];o.accessor&&(n.accessor=i(t.accessors,null===(a=null==o?void 0:o.accessor)||void 0===a?void 0:a.componentId)),o.typeHint&&(n.typeHint=i(t.typeHints,null===(s=null==o?void 0:o.typeHint)||void 0===s?void 0:s.componentId))}))})),e.bufferViews.forEach(((e,r)=>{var n;const a=t.bufferViews[r];e.buffer=i(t.buffers,null===(n=null==a?void 0:a.buffer)||void 0===n?void 0:n.componentId)})),e.chunks.forEach(((e,r)=>{var n,a;const s=t.chunks[r];s.attributes&&(e.attributes=i(t.attributes,null===(n=null==s?void 0:s.attributes)||void 0===n?void 0:n.componentId)),e.items=s.items.map((e=>i(t.items,null==e?void 0:e.componentId))),e.nodes=s.nodes.map((e=>i(t.nodes,null==e?void 0:e.componentId))),s.typeHint&&(e.typeHint=i(t.typeHints,null===(a=null==s?void 0:s.typeHint)||void 0===a?void 0:a.componentId))})),e.items.forEach(((e,r)=>{var n,a,s;const o=t.items[r];o.accessor&&(e.accessor=i(t.accessors,null===(n=null==o?void 0:o.accessor)||void 0===n?void 0:n.componentId)),o.attributes&&(e.attributes=i(t.attributes,null===(a=null==o?void 0:o.attributes)||void 0===a?void 0:a.componentId)),o.typeHint&&(e.typeHint=i(t.typeHints,null===(s=null==o?void 0:o.typeHint)||void 0===s?void 0:s.componentId))})),e.nodes.forEach(((e,r)=>{var n,a;const s=t.nodes[r];s.attributes&&(e.attributes=i(t.attributes,null===(n=null==s?void 0:s.attributes)||void 0===n?void 0:n.componentId)),e.items=s.items.map((e=>i(t.items,null==e?void 0:e.componentId))),e.nodes=s.nodes.map((e=>i(t.nodes,null==e?void 0:e.componentId))),s.typeHint&&(e.typeHint=i(t.typeHints,null===(a=null==s?void 0:s.typeHint)||void 0===a?void 0:a.componentId))}))}}},5452:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBasePartialComponent=void 0;const r=i(9078);t.SdtfBasePartialComponent=class{constructor(){this.componentId=(0,r.createComponentId)()}}},1743:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialAccessor=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.bufferView?e.bufferView=this.bufferView:delete e.bufferView,void 0!==this.id?e.id=this.id:delete e.id,e}}t.SdtfPartialAccessor=n},8437:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialAsset=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){return Object.assign({},this.additionalProperties)}}t.SdtfPartialAsset=n},1570:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfAttribute=t.SdtfPartialAttributes=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.entries={}}toJson(){const e={};return Object.entries(this.entries).forEach((([t,i])=>{e[t]=i.toJson()})),e}}t.SdtfPartialAttributes=n;class a extends r.SdtfBasePartialComponent{toJson(){const e={};return void 0!==this.accessor&&(e.accessor=this.accessor),void 0!==this.typeHint&&(e.typeHint=this.typeHint),void 0!==this.value&&(e.value=this.value),e}}t.SdtfAttribute=a},4043:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialBuffer=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.byteLength?e.byteLength=this.byteLength:delete e.byteLength,void 0!==this.uri&&(e.uri=this.uri),delete e.uri,e}}t.SdtfPartialBuffer=n},6980:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialBufferView=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.buffer?e.buffer=this.buffer:delete e.buffer,void 0!==this.byteLength?e.byteLength=this.byteLength:delete e.byteLength,void 0!==this.byteOffset?e.byteOffset=this.byteOffset:delete e.byteOffset,void 0!==this.contentEncoding?e.contentEncoding=this.contentEncoding:delete e.contentEncoding,void 0!==this.contentType?e.contentType=this.contentType:delete e.contentType,void 0!==this.name?e.name=this.name:delete e.name,e}}t.SdtfPartialBufferView=n},8336:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialDataItem=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.accessor?e.accessor=this.accessor:delete e.accessor,void 0!==this.attributes?e.attributes=this.attributes:delete e.attributes,void 0!==this.typeHint?e.typeHint=this.typeHint:delete e.typeHint,void 0!==this.value?e.value=this.value:delete e.value,e}}t.SdtfPartialDataItem=n},5272:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialFileInfo=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.copyright?e.copyright=this.copyright:delete e.copyright,void 0!==this.generator?e.generator=this.generator:delete e.generator,void 0!==this.version?e.version=this.version:delete e.version,e}}t.SdtfPartialFileInfo=n},1304:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialNode=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.attributes?e.attributes=this.attributes:delete e.attributes,this.items.length>0?e.items=this.items:delete e.items,void 0!==this.name?e.name=this.name:delete e.name,this.nodes.length>0?e.nodes=this.nodes:delete e.nodes,void 0!==this.typeHint?e.typeHint=this.typeHint:delete e.typeHint,e}}t.SdtfPartialNode=n},4796:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialTypeHint=void 0;const r=i(5452);class n extends r.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.name?e.name=this.name:delete e.name,e}}t.SdtfPartialTypeHint=n},4593:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFileUtils=void 0;const r=i(7079),n=i(5138),a=i(2165);t.SdtfFileUtils=class{toAbsolutePath(e){try{return n.resolve(e)}catch(t){throw new r.SdtfError(`Could not resolve path '${e}': ${t.message}`)}}readFile(e){if(!a.existsSync(e))throw new r.SdtfError(`Cannot find file at location '${e}'.`);return new Promise(((t,i)=>{a.readFile(e,((e,r)=>{e&&i(e);const n=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);t(n)}))}))}}},9078:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createComponentId=t.userComponentToDataObject=void 0;const r=i(7079);t.userComponentToDataObject=function(e){const t=Object.keys(e).filter((e=>"additionalProperties"===e)),i=(0,r.isDataObject)(t)?t:{};return Object.entries(e).filter((([e,t])=>"componentId"!==e&&"additionalProperties"!==e&&"data"!==e)).forEach((([e,t])=>i[e]=t)),i},t.createComponentId=function(){return Math.random().toString(36).substring(2,9)}},1839:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentValidator=void 0;const r=i(7079);t.SdtfComponentValidator=class{constructor(e){this.componentList=e}validateAccessor(e){if(!(0,r.isUint)(e.bufferView))throw new r.SdtfError("Invalid accessor: Required property 'bufferView' must be an unsigned integer.");if(e.bufferView>=this.componentList.bufferViews.length)throw new r.SdtfError("Invalid accessor: Buffer view index is out of range.")}validateAsset(e){if(!(0,r.isUint)(e.fileInfo))throw new r.SdtfError("Invalid asset: Required property 'fileInfo' must be an unsigned integer.");if(0!==e.fileInfo)throw new r.SdtfError("Invalid asset: Type hint index is out of range.")}validateAttributes(e){if(!e.entries)throw new r.SdtfError("Invalid attributes: Required property 'entries' must be a string-keyed object.");Object.values(e.entries).forEach((e=>{if(!(0,r.isUint)(e.typeHint))throw new r.SdtfError("Invalid attribute: Required property 'typeHint' must be an unsigned integer.");if(e.accessor&&!(0,r.isUint)(e.accessor))throw new r.SdtfError("Invalid attribute: Optional property 'accessor' must be an unsigned integer.");if(e.accessor&&e.accessor>=this.componentList.accessors.length)throw new r.SdtfError("Invalid attribute: Accessor index is out of range.");if(e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new r.SdtfError("Invalid attribute: Type hint index is out of range.")}))}validateBuffer(e){if(!(0,r.isUint)(e.byteLength))throw new r.SdtfError("Invalid buffer: Required property 'byteLength' must be an unsigned integer.")}validateBufferView(e){if(!(0,r.isUint)(e.buffer))throw new r.SdtfError("Invalid buffer view: Required property 'buffer' must be an unsigned integer.");if(!(0,r.isUint)(e.byteLength))throw new r.SdtfError("Invalid buffer view: Required property 'byteLength' must be an unsigned integer.");if(!(0,r.isUint)(e.byteOffset))throw new r.SdtfError("Invalid buffer view: Required property 'byteOffset' must be an unsigned integer.");if(!(0,r.isNonEmptyString)(e.contentType))throw new r.SdtfError("Invalid buffer view: Required property 'contentType' must be a non-empty string.");if(e.buffer>=this.componentList.buffers.length)throw new r.SdtfError("Invalid buffer view: Buffer index is out of range.")}validateChunk(e){try{this.validateChunkOrNode(e)}catch(e){throw new r.SdtfError(`Invalid chunk: ${e.message}`)}if("string"!=typeof e.name)throw new r.SdtfError("Invalid chunk: Required property 'name' must be a string.")}validateDataItem(e){if(!(0,r.isUint)(e.typeHint))throw new r.SdtfError("Invalid item: Required property 'typeHint' must be an unsigned integer.");if(e.accessor&&!(0,r.isUint)(e.accessor))throw new r.SdtfError("Invalid item: Optional property 'accessor' must be an unsigned integer.");if(e.attributes&&!(0,r.isUint)(e.attributes))throw new r.SdtfError("Invalid item: Optional property 'attributes' must be an unsigned integer.");if(e.accessor&&e.accessor>=this.componentList.accessors.length)throw new r.SdtfError("Invalid item: Accessor index is out of range.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new r.SdtfError("Invalid item: Attributes index is out of range.");if(e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new r.SdtfError("Invalid item: Type hint index is out of range.")}validateFileInfo(e){if(!(0,r.isNonEmptyString)(e.version))throw new r.SdtfError("Invalid file info: Required property 'version' must be a non-empty string.")}validateNode(e){try{this.validateChunkOrNode(e)}catch(e){throw new r.SdtfError(`Invalid node: ${e.message}`)}}validateTypeHint(e){if(!(0,r.isNonEmptyString)(e.name))throw new r.SdtfError("Invalid type hint: Required property 'name' must be a non-empty string.")}validateChunkOrNode(e){if(e.attributes&&!(0,r.isUint)(e.attributes))throw new r.SdtfError("Optional property 'attributes' must be an unsigned integer.");if(!(0,r.isUintArray)(e.items))throw new r.SdtfError("Required property 'items' must be an array of unsigned integers.");if(!(0,r.isUintArray)(e.nodes))throw new r.SdtfError("Required property 'nodes' must be an array of unsigned integers.");if(e.typeHint&&!(0,r.isUint)(e.typeHint))throw new r.SdtfError("Optional property 'typeHint' must be an unsigned integer.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new r.SdtfError("Attributes index is out of range.");if(e.items.forEach((e=>{if(e>=this.componentList.items.length)throw new r.SdtfError(`Node index '${e}' is out of range.`)})),e.nodes.forEach((e=>{if(e>=this.componentList.nodes.length)throw new r.SdtfError(`Node index '${e}' is out of range.`)})),e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new r.SdtfError("Type hint index is out of range.");if(!e.nodes.every((t=>this.componentList.nodes[t].componentId!==e.componentId)))throw new r.SdtfError("Node is referencing itself in the 'nodes' property.")}}},3648:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeableComponentListFromAsset=void 0,t.writeableComponentListFromAsset=function(e){const t=(e,t)=>{e&&-1===t.findIndex((t=>t.componentId===e.componentId))&&t.push(e)},i={accessors:[],asset:e,attributes:[],buffers:[],bufferViews:[],chunks:e.chunks,items:[],nodes:[],typeHints:[],fileInfo:e.fileInfo};return i.chunks.forEach((e=>{t(e.attributes,i.attributes),e.items.forEach((e=>t(e,i.items))),e.nodes.forEach((e=>t(e,i.nodes))),t(e.typeHint,i.typeHints)})),i.nodes.forEach((e=>{t(e.attributes,i.attributes),e.items.forEach((e=>t(e,i.items))),e.nodes.forEach((e=>t(e,i.nodes))),t(e.typeHint,i.typeHints)})),i.items.forEach((e=>{t(e.accessor,i.accessors),t(e.attributes,i.attributes),t(e.typeHint,i.typeHints)})),i.attributes.forEach((e=>{Object.values(e.entries).forEach((e=>{t(e.accessor,i.accessors),t(e.typeHint,i.typeHints)}))})),i.accessors.forEach((e=>t(e.bufferView,i.bufferViews))),i.bufferViews.forEach((e=>t(e.buffer,i.buffers))),i}},782:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfConstructor=void 0;const r=i(2377),n=i(4061),a=i(9827),s=i(9549),o=i(6991);t.SdtfConstructor=class{constructor(e){this.binarySdtf=new r.SdtfBinarySdtf,this.factory=new n.SdtfComponentFactoryWrapper,this.postProcessor=new s.SdtfWriteableComponentPostProcessor(e)}createBinarySdtf(e){const t=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(t);return this.binarySdtf.constructBinarySdtf(i)}getFactory(){return new a.SdtfWriteableComponentFactory}getWriter(){return new o.SdtfWriter(this.getFactory())}}},9827:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableComponentFactory=void 0;const r=i(7079),n=i(3344),a=i(5314),s=i(6877),o=i(7709),l=i(5875),c=i(1415),u=i(8712),h=i(3299),d=i(683),f=i(9607);t.SdtfWriteableComponentFactory=class{constructor(){this.ASSET_VERSION="1.0",this.ASSET_GENERATOR="ShapeDiverSdtfWriter"}createAccessor(e){const t=new n.SdtfWriteableAccessor;return e&&(t.bufferView=this.createBufferView(e)),t}createAsset(){const e=new h.SdtfWriteableFileInfo(this.ASSET_VERSION);return e.generator=this.ASSET_GENERATOR,new a.SdtfWriteableAsset(e)}createAttribute(e,t){const i=new s.SdtfWriteableAttribute;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),void 0!==t&&(i.typeHint=this.createTypeHint(t)),i}createAttributes(e){const t=new s.SdtfWriteableAttributes;return Object.entries(null!=e?e:{}).forEach((([e,i])=>t.entries[e]=this.createAttribute(...i))),t}createBuffer(e){const t=new o.SdtfWriteableBuffer;return t.data=e,t}createBufferView(e){const t=new l.SdtfWriteableBufferView;return e&&(t.buffer=this.createBuffer(e.data),t.contentType=e.contentType),t}createChunk(e){const t=new c.SdtfWriteableChunk;return t.name=e,t}createDataItem(e,t){const i=new u.SdtfWriteableDataItem;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),void 0!==t&&(i.typeHint=this.createTypeHint(t)),i}createNode(){return new d.SdtfWriteableNode}createTypeHint(e){const t=new f.SdtfWriteableTypeHint;return t.name=e,t}isBufferContent(e){return!!((0,r.isDataObject)(e)&&e.data&&e.contentType)}}},9549:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableComponentPostProcessor=void 0;const r=i(5314),n=i(7709),a=i(3648),s=i(9827);t.SdtfWriteableComponentPostProcessor=class{constructor(e){this.integrations=e,this.factory=new s.SdtfWriteableComponentFactory}optimize(e){const t=r.SdtfWriteableAsset.clone(e);let i=(0,a.writeableComponentListFromAsset)(t);return this.processDataComponents(i.attributes.flatMap((e=>Object.values(e.entries)))),this.processDataComponents(i.items),this.postProcessDataComponents([...i.attributes.flatMap((e=>Object.values(e.entries))),...i.items]),i=(0,a.writeableComponentListFromAsset)(t),this.complementTypeHints(i),this.removeDuplicatedTypeHints(i),this.resolveBuffers(i),i}processDataComponents(e){e.forEach((e=>{const t=this.integrations.find((t=>{var i,r;return t.isTypeHintSupported(null!==(r=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==r?r:"")}));t&&t.getWriter(this.factory).writeComponent(e)}))}postProcessDataComponents(e){this.integrations.forEach((t=>{const i=e.filter((e=>{var i,r;return t.isTypeHintSupported(null!==(r=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==r?r:"")}));0!==i.length&&t.getWriter(this.factory).postProcessComponents(i)}))}complementTypeHints(e){const t=(t,i)=>{var r,n;if(void 0!==(null===(r=t.typeHint)||void 0===r?void 0:r.name))return;if(0===i.length)return;let a=null===(n=i[0].typeHint)||void 0===n?void 0:n.name;void 0!==a&&i.every((e=>{var t;return(null===(t=e.typeHint)||void 0===t?void 0:t.name)===a}))&&(t.typeHint=this.factory.createTypeHint(a),e.typeHints.push(t.typeHint))};e.nodes.forEach((e=>t(e,e.items))),e.chunks.forEach((e=>t(e,e.nodes)))}removeDuplicatedTypeHints(e){const t=[];e.typeHints.forEach((e=>{t.find(this.areTypeHintsSimilar.bind(this,e))||t.push(e)}));const i=e=>{e.typeHint&&!t.find((t=>t.componentId===e.typeHint.componentId))&&(e.typeHint=t.find((t=>this.areTypeHintsSimilar(t,e.typeHint))))};e.attributes.forEach((e=>Object.values(e.entries).forEach((e=>i(e))))),e.chunks.forEach((e=>i(e))),e.items.forEach((e=>i(e))),e.nodes.forEach((e=>i(e))),e.typeHints=Object.values(t)}areTypeHintsSimilar(e,t){var i,r;const n=Object.entries(null!==(i=e.additionalProperties)&&void 0!==i?i:{}),a=Object.entries(null!==(r=t.additionalProperties)&&void 0!==r?r:{});if(e.name!==t.name||n.length!==a.length)return!1;for(let e=0;e<n.length;e++){const[i,r]=n[e];if(t.additionalProperties[i]!==r)return!1}return!0}resolveBuffers(e){const t={};e.bufferViews.forEach((e=>{var i;if(!e.buffer)return;const r=null!==(i=e.buffer.uri)&&void 0!==i?i:"";t[r]||(t[r]=[]),t[r].push(e)}));const i=[];Object.entries(t).forEach((([e,t])=>{const[r,n]=this.mergeBuffers(e,t.map((e=>e.buffer)));t.forEach(((e,t)=>{var i;e.byteOffset=n[t],e.byteLength=null!==(i=e.buffer.data.byteLength)&&void 0!==i?i:0,e.buffer=r})),i.push(r)})),e.buffers=i}mergeBuffers(e,t){const i=new n.SdtfWriteableBuffer;i.uri=e,i.additionalProperties={},Object.assign(i.additionalProperties,...t.map((e=>e.additionalProperties)));const[r,a]=this.mergeBufferData(t);return i.byteLength=r.byteLength,i.data=r,[i,a]}mergeBufferData(e){var t,i;const r=e=>{const t=e%4;return 0===t?e:e+4-t};let n=[0],a=null!==(i=null===(t=e[0].data)||void 0===t?void 0:t.byteLength)&&void 0!==i?i:0;if(e.length>0){a=r(a);for(let t=1;t<e.length;t++){let i=0;const s=e[t].data;s&&(i=t===e.length-1?s.byteLength:r(s.byteLength)),n.push(n[t-1]+a),a=i}}const s=new Uint8Array(n[n.length-1]+a);return e.forEach(((e,t)=>{const i=e.data?new Uint8Array(e.data):new Uint8Array(0);s.set(i,n[t])})),[s,n]}}},6991:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriter=void 0;const r=i(383);t.SdtfWriter=class{constructor(e){this.factory=e}createSimpleDataSdtf(e,t){const i=this.factory.createChunk(e);t.forEach((e=>{const t=this.factory.createDataItem(e.content,e.typeHint);e.attributes&&(t.attributes=this.factory.createAttributes((e=>{const t={};return e.forEach((e=>t[e.name]=[e.content,e.typeHint])),t})(e.attributes))),i.items.push(t)}));const r=this.factory.createAsset();return r.chunks.push(i),r}createGrasshopperSdtfBuilder(){return new r.SdtfGrasshopperSdtfBuilder(this.factory)}}},2173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGrasshopperSdtfBuilder=void 0;const r=i(7079);t.SdtfGrasshopperSdtfBuilder=class{constructor(e){this.factory=e,this.asset=e.createAsset()}addChunkForListData(e,t,i){this.addChunkForTreeData(e,{branches:[t],paths:[[0]]},i)}addChunkForTreeData(e,t,i){const n=this.factory.createChunk(e);if(this.asset.chunks.push(n),i&&(n.attributes=i),t.branches.length!==t.paths.length)throw new r.SdtfError("Invalid tree parameter: 'branches' and 'paths' of the grasshopper structure must have the same number of elements.");if(!t.paths.every((e=>(0,r.isIntArray)(e))))throw new r.SdtfError("Invalid tree parameter: 'paths' of the grasshopper structure must only consist of integer values.");if(!t.branches.every((e=>e.every((e=>{var t;return!!(null===(t=e.typeHint)||void 0===t?void 0:t.name)})))))throw new r.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must contain a type hint.");let a;for(let e=0;e<t.branches.length;e++){const i=t.branches[e],s=t.paths[e],o=this.factory.createNode();o.name="["+s.join(",")+"]",i.forEach((e=>{if(a||(a=e.typeHint.name),a!==e.typeHint.name)throw new r.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must have the same type hint.");o.items.push(e)})),n.nodes.push(o)}}build(){return this.asset}}},7830:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBaseWriteableComponent=void 0;const r=i(9078);t.SdtfBaseWriteableComponent=class{constructor(){this.componentId=(0,r.createComponentId)()}toDataObject(){return(0,r.userComponentToDataObject)(this)}}},3344:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAccessor=void 0;const r=i(7830),n=i(5875);class a extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new a;return e.bufferView&&(t.bufferView=n.SdtfWriteableBufferView.clone(e.bufferView)),t.id=e.id,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableAccessor=a},5314:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAsset=void 0;const r=i(7830),n=i(1415),a=i(3299);class s extends r.SdtfBaseWriteableComponent{constructor(e){super(),this.fileInfo=e,this.chunks=[],this.additionalProperties={}}static clone(e){const t=a.SdtfWriteableFileInfo.clone(e.fileInfo),i=new s(t);return i.chunks=e.chunks.map((e=>n.SdtfWriteableChunk.clone(e))),i.additionalProperties=Object.assign({},e.additionalProperties),i}}t.SdtfWriteableAsset=s},6877:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAttribute=t.SdtfWriteableAttributes=void 0;const r=i(7079),n=i(7830),a=i(3344),s=i(9607);class o extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){return this.entries}static clone(e){const t=new o;return t.entries={},Object.entries(e.entries).forEach((([e,i])=>t.entries[e]=l.clone(i))),t}}t.SdtfWriteableAttributes=o;class l{static clone(e){const t=new l;return e.accessor&&(t.accessor=a.SdtfWriteableAccessor.clone(e.accessor)),e.typeHint&&(t.typeHint=s.SdtfWriteableTypeHint.clone(e.typeHint)),t.value=(0,r.tryDeepCopy)(e.value),t}}t.SdtfWriteableAttribute=l},7709:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableBuffer=void 0;const r=i(7830);class n extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new n;return t.byteLength=e.byteLength,t.data=e.data,t.uri=e.uri,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableBuffer=n},5875:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableBufferView=void 0;const r=i(7830),n=i(7709);class a extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new a;return e.buffer&&(t.buffer=n.SdtfWriteableBuffer.clone(e.buffer)),t.byteLength=e.byteLength,t.byteOffset=e.byteOffset,t.contentEncoding=e.contentEncoding,t.contentType=e.contentType,t.name=e.name,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableBufferView=a},1415:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableChunk=void 0;const r=i(683);class n extends r.SdtfWriteableNode{static clone(e){return r.SdtfWriteableNode.clone(e)}}t.SdtfWriteableChunk=n},8712:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableDataItem=void 0;const r=i(7079),n=i(7830),a=i(3344),s=i(6877),o=i(9607);class l extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new l;return e.accessor&&(t.accessor=a.SdtfWriteableAccessor.clone(e.accessor)),e.attributes&&(t.attributes=s.SdtfWriteableAttributes.clone(e.attributes)),e.typeHint&&(t.typeHint=o.SdtfWriteableTypeHint.clone(e.typeHint)),t.value=(0,r.tryDeepCopy)(e.value),t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableDataItem=l},3299:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableFileInfo=void 0;const r=i(7830);class n extends r.SdtfBaseWriteableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}static clone(e){const t=new n(e.version);return t.copyright=e.copyright,t.generator=e.generator,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableFileInfo=n},683:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableNode=void 0;const r=i(7830),n=i(6877),a=i(8712),s=i(9607);class o extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}static clone(e){const t=new o;return e.attributes&&(t.attributes=n.SdtfWriteableAttributes.clone(e.attributes)),t.items=e.items.map((e=>a.SdtfWriteableDataItem.clone(e))),t.name=e.name,t.nodes=e.nodes.map((e=>this.clone(e))),e.typeHint&&(t.typeHint=s.SdtfWriteableTypeHint.clone(e.typeHint)),t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableNode=o},9607:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableTypeHint=void 0;const r=i(7830);class n extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new n;return t.name=e.name,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableTypeHint=n},7797:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DataEngine=void 0;const n=i(7038),a=i(6538),s=i(4320),o=i(3705),l=i(2556),c=i(3858),u=i(8877),h=i(9780),d=i(887);t.DataEngine=class{constructor(){this._geometryEngine=a.GeometryEngine.instance,this._htmlElementAnchorEngine=h.HTMLElementAnchorEngine.instance,this._eventEngine=u.EventEngine.instance,this._materialEngine=s.MaterialEngine.instance,this._sdtfEngine=o.SDTFEngine.instance,this._tag3dEngine=l.Tag3dEngine.instance,this._uuidGenerator=u.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,t,i){return r(this,void 0,void 0,(function*(){if(!e||e&&!e.format)throw new u.ShapeDiverViewerDataProcessingError("DataEngine cannot load content.");let r;i=i||this._uuidGenerator.create(),"glb"===e.format||"gltf"===e.format?r=yield this._geometryEngine.loadContent(e,i):"material"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:n.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:0,status:"Loading material content."}),r=yield this._materialEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:n.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:1,status:"MATERIAL content loaded."})):"tag2d"===e.format||"anchor"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:n.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),r=yield this._htmlElementAnchorEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:n.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):"tag3d"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:n.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),r=yield this._tag3dEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:n.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):"sdtf"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:n.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:0,status:"Loading sdTF content."}),r=yield this._sdtfEngine.loadContent(e,t),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:n.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:1,status:"SdTF content loaded."})):(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:n.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:0,status:"Loading custom content."}),r=new c.TreeNode("custom"),r.data.push(new n.CustomData(Object.assign({},e))),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:n.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:1,status:"Custom content loaded."}));const a=new c.TreeNode("transformation");if(e.transformations&&Array.isArray(e.transformations))for(let t=0;t<e.transformations.length;t++){const i=e.transformations[t];if(Array.isArray(i)&&16===i.length){const e=r.clone();e.transformations=[{id:"content_"+t,matrix:d.mat4.fromValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}].concat(r.transformations),a.updateVersion(),a.addChild(e)}}else a.addChild(r);return a}))}}},5254:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataEngine=void 0;const r=i(7797);Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return r.DataEngine}})},1183:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryEngine=void 0;const n=i(8877),a=i(8517),s=i(2549);t.GeometryEngine=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=n.HttpClient.instance,this._loadingQueue=[],this._logger=n.Logger.instance,this._performanceEvaluator=n.PerformanceEvaluator.instance,this._loadingQueueLength=1/0}static get instance(){return this._instance||(this._instance=new this)}get parallelGlTFProcessing(){return this._loadingQueueLength}set parallelGlTFProcessing(e){this._loadingQueueLength=e}loadContent(e,t){return r(this,void 0,void 0,(function*(){if(!e||e&&!e.href)throw new n.ShapeDiverViewerDataProcessingError("GeometryEngine cannot load content.");for(;this._loadingQueueLength<=this._loadingQueue.length;)yield new Promise((e=>setTimeout(e,10)));const i=e.href,o=new Promise(((o,l)=>r(this,void 0,void 0,(function*(){let r,c,u,h,d,f="2.0";if("glb"===e.format||"gltf"===e.format){this._performanceEvaluator.startSection("gltfProcessing."+i),this._performanceEvaluator.startSection("loadGltf."+i);const e=yield this._httpClient.get(i,{responseType:"arraybuffer"});this._performanceEvaluator.endSection("loadGltf."+i);const t=(new TextDecoder).decode(new Uint8Array(e.data,0,4));if("glTF"===t){c=e.data;const i=new DataView(c,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(h={magic:t,version:i.getUint32(4,!0),length:i.getUint32(8,!0),contentLength:i.getUint32(12,!0),contentFormat:i.getUint32(16,!0)},"glTF"!=h.magic)throw new n.ShapeDiverViewerDataProcessingError("Invalid data: glTF magic wrong.");const a=new DataView(c,this.BINARY_EXTENSION_HEADER_LENGTH,h.contentLength),s=(new TextDecoder).decode(a);if(r=JSON.parse(s),r&&r.asset&&r.asset.version){const e=(r.asset.version+"").endsWith(".0")?r.asset.version:r.asset.version+".0";if(h.version+".0"!==e)throw new n.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: glTF header version ("+h.version+") is not the same as asset version ("+e+").");f=h.version+".0"}else f=h.version+".0"}else{if(r=JSON.parse((new TextDecoder).decode(e.data)),r&&r.asset&&r.asset.version){if("2.0"!==r.asset.version)throw new n.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: Only gltf v2 is supported in a non-binary format.")}else this._logger.warn("GeometryEngine.loadContent: No version specified in asset, trying to load as v2."),f="2.0";const t=e=>{const t=e.includes("/")?"/":"\\",i=e.split(t);return i.pop(),i.join(t)};u=t(i),!u&&window&&window.location&&window.location.href&&(u=t(window.location.href))}}d="1.0"===f?(new a.GLTFLoader).load(r,c,h,u,t):(new s.GLTFLoader).load(r,c,h,u,t),d.catch((e=>{l(e)})),o(d)}))));this._loadingQueue.push(o);const l=yield o;return this._loadingQueue.splice(this._loadingQueue.indexOf(o),1),this._performanceEvaluator.endSection("gltfProcessing."+i),l}))}}},8517:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=void 0;const n=i(3858),a=i(8877),s=i(4465),o=i(887),l=i(7038),c=i(8306);t.GLTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=a.HttpClient.instance,this._uuidGenerator=a.UuidGenerator.instance,this._logger=a.Logger.instance,this._implementedExtensions=["KHR_materials_common"],this._globalTransformation=o.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._eventEngine=a.EventEngine.instance,this._performanceEvaluator=a.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._eventId="",this._numberOfNodes=0,this._numberOfConvertedNodes=0,this._progressTimer=0}load(e,t,i,n,s){return r(this,void 0,void 0,(function*(){this._eventId=s||this._uuidGenerator.create();const r={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 1.0 loading."};let o;this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_START,r),this._numberOfConvertedNodes=0,this._numberOfNodes=e.nodes?Object.values(e.nodes).length:0,this._progressTimer=performance.now(),this._baseUri=n,t&&i&&(this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+i.contentLength,i.length)),this._content=e,t&&i&&(o=yield(new c.SDGTFLoader).load(t,i.length));const u={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.25,status:"Loaded SDgTF content."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,u),this.validateVersionAndExtensions();const h=yield this.loadScene();o&&h.addChild(o);const d={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_END,d),h}))}loadWithUrl(e){return r(this,void 0,void 0,(function*(){let t;this._performanceEvaluator.startSection("gltfProcessing."+e),this._performanceEvaluator.startSection("loadGltf."+e),t=(yield this._httpClient.get(e,{responseType:"arraybuffer"})).data,this._performanceEvaluator.endSection("loadGltf."+e);const i=new DataView(t,0,this.BINARY_EXTENSION_HEADER_LENGTH),r={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3)),version:i.getUint32(4,!0),length:i.getUint32(8,!0),contentLength:i.getUint32(12,!0),contentFormat:i.getUint32(16,!0)};if("glTF"!=r.magic)throw new a.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: glTF magic wrong.");const n=new DataView(t,this.BINARY_EXTENSION_HEADER_LENGTH,r.contentLength),s=(new TextDecoder).decode(n);this._content=JSON.parse(s),this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+r.contentLength,r.length);const o=yield(new c.SDGTFLoader).load(t,r.length);this.validateVersionAndExtensions();const l=yield this.loadScene();return l.addChild(o),this._performanceEvaluator.endSection("gltfProcessing."+e),l}))}validateVersionAndExtensions(){if(this._content.extensionsUsed){const e=[];for(let t=0;t<this._content.extensionsUsed.length;t++)this._implementedExtensions.includes(this._content.extensionsUsed[t])||e.push(this._content.extensionsUsed[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");e.forEach(((i,r)=>{t+='"'+i+'"'+(r===e.length-1?"":r===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+t)}}}loadAccessor(e){var t,i;return r(this,void 0,void 0,(function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const r=this._content.accessors[e],n=yield this.loadBufferView(r.bufferView),a=s.ACCESSORTYPE_V1[r.type];5124===r.componentType&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const o=s.ACCESSORCOMPONENTTYPE_V1[r.componentType],c=o.BYTES_PER_ELEMENT,u=c*a,h=r.byteOffset||0,d=r.byteStride,f=this._content.bufferViews[r.bufferView]?this._content.bufferViews[r.bufferView].target:void 0,p=this._content.asset&&"ShapeDiverGltfV1Writer"===(null===(t=this._content.asset)||void 0===t?void 0:t.generator)&&r.min||[],m=this._content.asset&&"ShapeDiverGltfV1Writer"===(null===(i=this._content.asset)||void 0===i?void 0:i.generator)&&r.max||[];return new l.AttributeData(new o(n),a,u,h,c,!1,r.count,p,m,d,f)}))}loadBuffer(e){return r(this,void 0,void 0,(function*(){if(!this._content.buffers[e])throw new Error("Buffer not available.");const t=this._content.buffers[e];if("binary_glTF"===e)return this._body;if("arraybuffer"===t.type)return(yield this._httpClient.get(t.uri,{responseType:"arraybuffer"})).data;if(!this._body)throw new Error("Buffer not available.");return this._body}))}loadBufferView(e){return r(this,void 0,void 0,(function*(){if(!this._content.bufferViews[e])throw new Error("Buffer View not available.");const t=this._content.bufferViews[e],i=yield this.loadBuffer(t.buffer),r=void 0!==t.byteLength?t.byteLength:0;return i.slice(t.byteOffset,t.byteOffset+r)}))}loadMaterial(e){return r(this,void 0,void 0,(function*(){if(!this._content.materials[e])throw new Error("Material not available.");const t=this._content.materials[e],i=new l.MaterialStandardData;if(void 0!==t.name&&(i.name=t.name),t.extensions&&t.extensions.KHR_materials_common){const e=t.extensions.KHR_materials_common.technique;e&&"BLINN"!==e&&this._logger.warn("The technique "+e+" is not supported. Trying to load the material either way.");const r=t.extensions.KHR_materials_common.values;if(r.hasOwnProperty("doubleSided")&&(i.side=r.doubleSided?l.MATERIAL_SIDE.DOUBLE:l.MATERIAL_SIDE.FRONT),i.color="#d3d3d3",r.hasOwnProperty("diffuse")&&Array.isArray(r.diffuse)){const e=r.diffuse.map((e=>255*e));i.color=e,i.opacity=Math.max(0,Math.min(r.diffuse[3],1))}else r.hasOwnProperty("diffuse")&&this._logger.warn("GLTFLoader.loadMaterial: The value diffuse was set for a material, but is not supported in that type.");if(!r.hasOwnProperty("diffuse")&&r.hasOwnProperty("ambient")){const e=r.ambient.map((e=>255*e));i.color=e}r.hasOwnProperty("emission")&&Array.isArray(r.emission)?i.emissiveness=r.emission:r.hasOwnProperty("emission")&&this._logger.warn("GLTFLoader.loadMaterial: The value emission was set for a material, but is not supported in that type."),r.hasOwnProperty("shininess")&&(i.metalness=Math.min(1,r.shininess),i.roughness=1-Math.min(1,r.shininess)),r.hasOwnProperty("transparency")&&(i.opacity=Math.max(0,Math.min(r.transparency,1))),r.hasOwnProperty("transparency")||!r.hasOwnProperty("transparent")||"true"!==r.transparency&&!0!==r.transparency||(i.opacity=0),r.hasOwnProperty("_roughness")&&(i.roughness=Math.min(1,Math.max(0,r.roughness))),r.hasOwnProperty("_metalness")&&(i.metalness=Math.min(1,Math.max(0,r.metalness)))}return i}))}loadMesh(e){return r(this,void 0,void 0,(function*(){if(!this._content.meshes[e])throw new Error("Mesh not available.");const t=this._content.meshes[e],i=new n.TreeNode(e);if(!t.primitives)return new n.TreeNode("primitive");for(let e=0,r=t.primitives.length;e<r;e++){const r=new n.TreeNode("primitive_"+e);i.addChild(r);let a=t.primitives[e];const s={};for(let e in a.attributes){let t=e;if(/\d/.test(t)&&!t.includes("_")){const e=t.search(/\d/);t=t.substring(0,e)+"_"+t.substring(e,t.length)}else"TEXCOORD"===t||"COLOR"===t||"JOINTS"===t||"WEIGHTS"===t?t+="_0":"UV"===t&&(t="TEXCOORD_0");s[t]=yield this.loadAccessor(a.attributes[e]),t.startsWith("COLOR")&&(s[t]=new l.AttributeData(s[t].array,s[t].itemSize,s[t].itemBytes,s[t].byteOffset,s[t].elementBytes,!0,s[t].count,[],[],s[t].byteStride,s[t].target))}let o;a.material&&(o=yield this.loadMaterial(a.material));const c=new l.GeometryData(new l.PrimitiveData(s,yield this.loadAccessor(a.indices)),l.PRIMITIVE_MODE.TRIANGLES,o);r.data.push(c)}return i}))}loadNode(e){return r(this,void 0,void 0,(function*(){if(!this._content.nodes[e])throw new Error("Node not available.");const t=this._content.nodes[e],i=new n.TreeNode(e);if(t.matrix)i.addTransformation({id:this._uuidGenerator.create(),matrix:o.mat4.fromValues(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5],t.matrix[6],t.matrix[7],t.matrix[8],t.matrix[9],t.matrix[10],t.matrix[11],t.matrix[12],t.matrix[13],t.matrix[14],t.matrix[15])});else if(t.translation||t.scale||t.rotation){const e=t.translation?o.mat4.fromTranslation(o.mat4.create(),o.vec3.fromValues(t.translation[0],t.translation[1],t.translation[2])):o.mat4.create(),r=t.scale?o.mat4.fromScaling(o.mat4.create(),o.vec3.fromValues(t.scale[0],t.scale[1],t.scale[2])):o.mat4.create(),n=t.rotation?o.mat4.fromQuat(o.mat4.create(),o.vec4.fromValues(t.rotation[0],t.rotation[1],t.rotation[2],t.rotation[3])):o.mat4.create(),a=o.mat4.mul(o.mat4.create(),o.mat4.mul(o.mat4.create(),e,r),n);i.addTransformation({id:this._uuidGenerator.create(),matrix:a})}if(t.meshes)for(let e=0,r=t.meshes.length;e<r;e++)i.addChild(yield this.loadMesh(t.meshes[e]));if(t.children)for(let e=0,r=t.children.length;e<r;e++)i.addChild(yield this.loadNode(t.children[e]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.25,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return i}))}loadScene(){var e,t;return r(this,void 0,void 0,(function*(){if(!this._content.scene)throw new Error("No scene.");if(!this._content.scenes[this._content.scene])throw new Error("Scene not available.");const i=this._content.scenes[this._content.scene],r=new n.TreeNode(this._content.scene);if(this._content.asset&&"ShapeDiverGltfWriter"!==(null===(e=this._content.asset)||void 0===e?void 0:e.generator)&&"ShapeDiverGltfV1Writer"!==(null===(t=this._content.asset)||void 0===t?void 0:t.generator)&&r.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),i.nodes)for(let e=0,t=i.nodes.length;e<t;e++)r.addChild(yield this.loadNode(i.nodes[e]));return r}))}}},8306:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SDGTFLoader=void 0;const n=i(3858),a=i(8877),s=i(4465),o=i(7038),l=i(887);t.SDGTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._logger=a.Logger.instance}load(e,t){return r(this,void 0,void 0,(function*(){if(!(t<e.byteLength))return new n.TreeNode;{const i=new DataView(e,t,this.BINARY_EXTENSION_HEADER_LENGTH+1),r={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3))+String.fromCharCode(i.getUint8(4)),version:i.getUint32(5,!0),length:i.getUint32(9,!0),contentLength:i.getUint32(13,!0),contentFormat:i.getUint32(17,!0)};if("sdgTF"!=r.magic)throw new a.ShapeDiverViewerDataProcessingError("SDGTFLoader.load: Invalid data: sdgTF magic wrong.");const n=new DataView(e,t+this.BINARY_EXTENSION_HEADER_LENGTH+1,r.contentLength),s=(new TextDecoder).decode(n);this._content=JSON.parse(s),this._body=e.slice(t+this.BINARY_EXTENSION_HEADER_LENGTH+1+r.contentLength,t+r.length)}return yield this.loadScene()}))}convertToIndicesArray(e){const t=Math.max(0,...e);return t<255?new Uint8Array(e):t<65535?new Uint16Array(e):new Uint32Array(e)}loadAccessor(e){return r(this,void 0,void 0,(function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const t=this._content.accessors[e],i=this._body,r=s.ACCESSORTYPE_V1[t.type],n=s.ACCESSORCOMPONENTTYPE_V1[t.componentType],a=n.BYTES_PER_ELEMENT,l=a*r,c=t.byteOffset||0;return new o.AttributeData(new n(i,c,r*t.count),r,l,c,a,!1,t.count)}))}loadArcs(){return r(this,void 0,void 0,(function*(){if(!this._content.arcs)throw new Error("Arcs not available.");const e=this._content.arcs,t=new n.TreeNode("arcs"),i=yield this.loadAccessor(e.attributes.ARCS),r=i.array.length/i.itemSize;for(let e=0;e<r;++e){const r=new n.TreeNode("arc_"+e),a=12*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=l.vec3.fromValues(i.array[a+6],i.array[a+7],i.array[a+8]),h=i.array[a+9],d=i.array[a+10],f=i.array[a+11],p=l.vec3.cross(l.vec3.create(),c,u);if(h<=0){this._logger.warn("SDGTFLoader.loadArcs: Arc radius is <= 0.");continue}const m=[],g=e=>{const t=2*Math.PI;let i=f-d;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=t;for(;i>t;)i-=t;i=i<Number.EPSILON?r?0:t:i;const n=d+e*i;let a=h*Math.cos(n),s=h*Math.sin(n);m.push(a,s,0)},b=Math.max(3,Math.round((f-d)/2*Math.PI*50));for(let e=0;e<=b;e++)g(e/b);const v=new Float32Array(m),_={};_.POSITION=new o.AttributeData(v,3,0,0,0,!1,v.length/3);const y=new o.GeometryData(new o.PrimitiveData(_,null),o.PRIMITIVE_MODE.LINE_STRIP);r.data.push(y),r.addTransformation({id:"arc_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(s[0],s[1],s[2]))});const A=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(c[0],u[0],p[0],0,c[1],u[1],p[1],0,c[2],u[2],p[2],0,0,0,0,1));r.addTransformation({id:"arc_"+e+"_rotation",matrix:A}),t.addChild(r)}return t}))}loadBeziercurve(e){return r(this,void 0,void 0,(function*(){if(!this._content.beziercurves[e])throw new Error("Beziercurve not available.");const t=this._content.beziercurves[e],i=new n.TreeNode(e),r=yield this.loadAccessor(t.attributes.CONTROLPOINTS),a=[];for(let e=0;e<r.array.length;e+=3)a.push(l.vec4.fromValues(r.array[e],r.array[e+1],r.array[e+2],1));const s=yield this.loadAccessor(t.attributes.KNOTS),c=[s.array[0]];for(let e=0;e<s.array.length;e++)c.push(s.array[e]);c.push(s.array[s.array.length-1]);const u=t.degree,h=[],d=e=>{let t=(e=>{const t=(e=>{const t=c.length-u-1;if(e>=c[t])return t-1;if(e<=c[u])return u;let i=u,r=t,n=Math.floor((i+r)/2);for(;e<c[n]||e>=c[n+1];)e<c[n]?r=n:i=n,n=Math.floor((i+r)/2);return n})(e),i=((e,t)=>{const i=[],r=[],n=[];i[0]=1;for(let a=1;a<=u;++a){r[a]=t-c[e+1-a],n[a]=c[e+a]-t;let s=0;for(let e=0;e<a;++e){const t=n[e+1],o=r[a-e],l=i[e]/(t+o);i[e]=s+t*l,s=o*l}i[a]=s}return i})(t,e),r=l.vec4.create();for(let e=0;e<=u;++e){const n=a[t-u+e],s=i[e],o=n[3]*s;l.vec4.add(r,r,l.vec4.fromValues(n[0]*o,n[1]*o,n[2]*o,n[3]*s))}return r})(c[0]+e*(c[c.length-1]-c[0]));1!==t[3]&&(t=l.vec4.divide(l.vec4.create(),t,l.vec4.fromValues(t[3],t[3],t[3],t[3]))),h.push(t[0],t[1],t[2])};let f=0;for(let e=1;e<a.length;e++)f+=l.vec3.distance(l.vec3.fromValues(a[e-1][0],a[e-1][1],a[e-1][2]),l.vec3.fromValues(a[e][0],a[e][1],a[e][2]));const p=Math.min(100,Math.max(25,Math.floor(f/.1)));for(let e=0;e<=p;e++)d(e/p);const m=new Float32Array(h),g={};g.POSITION=new o.AttributeData(m,3,0,0,0,!1,m.length/3);const b=new o.GeometryData(new o.PrimitiveData(g,null),o.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(b),i}))}loadCircles(){return r(this,void 0,void 0,(function*(){if(!this._content.circles)throw new Error("Circles not available.");const e=this._content.circles,t=new n.TreeNode("circles"),i=yield this.loadAccessor(e.attributes.CIRCLES),r=i.array.length/i.itemSize;for(let e=0;e<r;e++){const r=new n.TreeNode("circle_"+e),a=10*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=l.vec3.fromValues(i.array[a+6],i.array[a+7],i.array[a+8]),h=i.array[a+9],d=l.vec3.cross(l.vec3.create(),c,u);if(h<=0){this._logger.warn("SDGTFLoader.loadCircles: Circle radius is <= 0.");continue}const f=[],p=e=>{const t=2*Math.PI;let i=2*Math.PI-0;const r=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=t;for(;i>t;)i-=t;i=i<Number.EPSILON?r?0:t:i;const n=0+e*i;let a=h*Math.cos(n),s=h*Math.sin(n);f.push(a,s,0)},m=50;for(let e=0;e<=m;e++)p(e/m);const g=new Float32Array(f),b={};b.POSITION=new o.AttributeData(g,3,0,0,0,!1,g.length/3);const v=new o.GeometryData(new o.PrimitiveData(b,null),o.PRIMITIVE_MODE.LINE_STRIP);r.data.push(v),r.addTransformation({id:"circle_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(s[0],s[1],s[2]))});const _=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(c[0],u[0],d[0],0,c[1],u[1],d[1],0,c[2],u[2],d[2],0,0,0,0,1));r.addTransformation({id:"circle_"+e+"_rotation",matrix:_}),t.addChild(r)}return t}))}loadCylinders(){return r(this,void 0,void 0,(function*(){if(!this._content.cylinders)throw new Error("Cylinders not available.");const e=this._content.cylinders,t=new n.TreeNode("cylinders"),i=yield this.loadAccessor(e.attributes.CYLINDERS),r=i.array.length/i.itemSize;for(let e=0;e<r;e++){const r=new n.TreeNode("cylinder_"+e),a=7*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=i.array[a+6],h=l.vec3.sub(l.vec3.create(),s,c);let d;d=Math.abs(l.vec3.dot(h,l.vec3.fromValues(1,0,0)))<Math.abs(l.vec3.dot(h,l.vec3.fromValues(0,1,0)))?l.vec3.cross(l.vec3.create(),h,l.vec3.fromValues(1,0,0)):l.vec3.cross(l.vec3.create(),h,l.vec3.fromValues(0,1,0));const f=l.vec3.cross(l.vec3.create(),h,d);if(l.vec3.normalize(h,h),l.vec3.normalize(d,d),l.vec3.normalize(f,f),u<=0){this._logger.warn("SDGTFLoader.loadCylinders: Cylinder radius is <= 0.");continue}const p=[],m=[],g=[],b=[],v=l.vec3.distance(s,c),_=v/2,y=0,A=2*Math.PI;let E=0;const w=[],S=1,T=50,x=l.vec3.create(),M=l.vec3.create();let R=0;const P=0;for(let e=0;e<=S;e++){const t=[],i=e/S,r=u;for(let e=0;e<=T;e++){const n=e/T,a=n*A+y,s=Math.sin(a),o=Math.cos(a);M[0]=r*s,M[1]=-i*v+_,M[2]=r*o,m.push(M[0],M[1],M[2]),l.vec3.normalize(x,l.vec3.fromValues(s,P,o)),g.push(x[0],x[1],x[2]),b.push(n,1-i),t.push(E++)}w.push(t)}for(let e=0;e<T;e++)for(let t=0;t<S;t++){const i=w[t][e],r=w[t+1][e],n=w[t+1][e+1],a=w[t][e+1];p.push(i,r,a),p.push(r,n,a),R+=6}const C={};C.POSITION=new o.AttributeData(new Float32Array(m),3,0,0,0,!1,m.length/3),C.NORMAL=new o.AttributeData(new Float32Array(g),3,0,0,0,!1,g.length/3),C.TEXCOORD_0=new o.AttributeData(new Float32Array(b),2,0,0,0,!1,b.length/2);const k=new o.GeometryData(new o.PrimitiveData(C,new o.AttributeData(this.convertToIndicesArray(p),1,0,0,0,!1,p.length)),o.PRIMITIVE_MODE.TRIANGLES);r.data.push(k),r.addTransformation({id:"cylinder_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),c)});const O=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(d[0],f[0],h[0],0,d[1],f[1],h[1],0,d[2],f[2],h[2],0,0,0,0,1));r.addTransformation({id:"cylinder_"+e+"_rotation",matrix:O}),r.addTransformation({id:"cylinder_"+e+"_rotation2",matrix:l.mat4.rotateX(l.mat4.create(),l.mat4.create(),.5*Math.PI)}),r.addTransformation({id:"cylinder_"+e+"_translation2",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(0,0,.5*l.vec3.distance(s,c)))}),t.addChild(r)}return t}))}loadSpheres(){return r(this,void 0,void 0,(function*(){if(!this._content.spheres)throw new Error("Spheres not available.");const e=this._content.spheres,t=new n.TreeNode("spheres"),i=yield this.loadAccessor(e.attributes.SPHERES),r=i.array.length/i.itemSize;for(let e=0;e<r;e++){const r=new n.TreeNode("sphere_"+e),a=4*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=i.array[a+3];if(c<=0){this._logger.warn("SDGTFLoader.loadSpheres: Sphere radius is <= 0.");continue}const u=[],h=[],d=[],f=[],p=[],m=15,g=15,b=0,v=2*Math.PI,_=0,y=Math.PI,A=Math.min(_+y,Math.PI);let E=0;for(let e=0;e<=m;e++){const t=[],i=e/m;let r=0;0==e&&0==_?r=.5/g:e==m&&A==Math.PI&&(r=-.5/g);for(let e=0;e<=g;e++){const n=e/g,a=l.vec3.fromValues(-c*Math.cos(b+n*v)*Math.sin(_+i*y),c*Math.cos(_+i*y),c*Math.sin(b+n*v)*Math.sin(_+i*y));h.push(a[0],a[1],a[2]);const s=l.vec3.normalize(l.vec3.create(),a);d.push(s[0],s[1],s[2]),f.push(n+r,1-i),t.push(E++)}p.push(t)}for(let e=0;e<m;e++)for(let t=0;t<g;t++){const i=p[e][t+1],r=p[e][t],n=p[e+1][t],a=p[e+1][t+1];(0!==e||_>0)&&u.push(i,r,a),(e!==m-1||A<Math.PI)&&u.push(r,n,a)}const w={};w.POSITION=new o.AttributeData(new Float32Array(h),3,0,0,0,!1,h.length/3),w.NORMAL=new o.AttributeData(new Float32Array(d),3,0,0,0,!1,d.length/3),w.TEXCOORD_0=new o.AttributeData(new Float32Array(f),2,0,0,0,!1,f.length/2);const S=new o.GeometryData(new o.PrimitiveData(w,new o.AttributeData(this.convertToIndicesArray(u),1,0,0,0,!1,u.length)),o.PRIMITIVE_MODE.TRIANGLES);r.data.push(S),r.addTransformation({id:"sphere_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),s)}),t.addChild(r)}return t}))}loadPoint(e){return r(this,void 0,void 0,(function*(){if(!this._content.points[e])throw new Error("Point not available.");const t=this._content.points[e],i=new n.TreeNode(e),r={},a=yield this.loadAccessor(t.attributes.POINTS);r.POSITION=new o.AttributeData(a.array,3,a.itemBytes,a.byteOffset,a.elementBytes,a.normalized,a.count);const s=new o.GeometryData(new o.PrimitiveData(r,null),o.PRIMITIVE_MODE.POINTS);return i.data.push(s),i}))}loadPolyline(e){return r(this,void 0,void 0,(function*(){if(!this._content.polylines[e])throw new Error("Polyline not available.");const t=this._content.polylines[e],i=new n.TreeNode(e),r={},a=yield this.loadAccessor(t.attributes.VERTICES);r.POSITION=new o.AttributeData(a.array,3,a.itemBytes,a.byteOffset,a.elementBytes,a.normalized,a.count);const s=new o.GeometryData(new o.PrimitiveData(r,null),o.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(s),i}))}loadSurfacepatch(e){return r(this,void 0,void 0,(function*(){if(!this._content.surfacepatches[e])throw new Error("Surfacepatch not available.");const t=this._content.surfacepatches[e],i=new n.TreeNode(e),r=t.controlPointCountU,a=t.controlPointCountV,s=yield this.loadAccessor(t.attributes.CONTROLPOINTS),c=[];let u=0;for(let e=0;e<r;e++){let e=[];for(let t=0;t<a;t++)e.push(l.vec4.fromValues(s.array[3*u],s.array[3*u+1],s.array[3*u+2],1)),u++;c.push(e)}const h=yield this.loadAccessor(t.attributes.KNOTSU),d=[h.array[0]];for(let e=0;e<h.array.length;e++)d.push(h.array[e]);d.push(h.array[h.array.length-1]);const f=yield this.loadAccessor(t.attributes.KNOTSV),p=[f.array[0]];for(let e=0;e<f.array.length;e++)p.push(f.array[e]);p.push(f.array[f.array.length-1]);const m=t.degreeU,g=t.degreeV,b=(e,t,i)=>{const r=e.length-t-1;if(i>=e[r])return r-1;if(i<=e[t])return t;let n=t,a=r,s=Math.floor((n+a)/2);for(;i<e[s]||i>=e[s+1];)i<e[s]?a=s:n=s,s=Math.floor((n+a)/2);return s},v=(e,t,i,r)=>{const n=[],a=[],s=[];n[0]=1;for(let o=1;o<=t;++o){a[o]=r-e[i+1-o],s[o]=e[i+o]-r;let t=0;for(let e=0;e<o;++e){const i=s[e+1],r=a[o-e],l=n[e]/(i+r);n[e]=t+i*l,t=r*l}n[o]=t}return n},_=15,y=[],A=[];for(let e=0;e<=_;e++){const t=e/_;for(let e=0;e<=_;e++){const i=(E=e/_,w=t,((e,t)=>{const i=b(d,m,e),r=b(p,g,t),n=v(d,m,i,e),a=v(p,g,r,t),s=[];for(let e=0;e<=g;++e){s[e]=l.vec4.create();for(let t=0;t<=m;++t){const a=l.vec4.clone(c[i-m+t][r-g+e]),o=a[3];a[0]*=o,a[1]*=o,a[2]*=o,l.vec4.add(s[e],s[e],l.vec4.multiply(l.vec4.create(),a,l.vec4.fromValues(n[t],n[t],n[t],n[t])))}}const o=l.vec4.create();for(let e=0;e<=g;++e)l.vec4.add(o,o,l.vec4.multiply(l.vec4.create(),s[e],l.vec4.fromValues(a[e],a[e],a[e],a[e])));return l.vec4.divide(o,o,l.vec4.fromValues(o[3],o[3],o[3],o[3])),l.vec3.fromValues(o[0],o[1],o[2])})(d[0]+E*(d[d.length-1]-d[0]),p[0]+w*(p[p.length-1]-p[0])));A.push(i[0],i[1],i[2])}}var E,w;for(let e=0;e<_;e++)for(let t=0;t<_;t++){const i=16*e+t,r=16*e+t+1,n=16*(e+1)+t,a=16*(e+1)+t+1;y.push(n,r,i),y.push(r,n,a)}const S={};S.POSITION=new o.AttributeData(new Float32Array(A),3,0,0,0,!1,A.length/3),S.NORMAL=new o.AttributeData(new Float32Array([0,0,0,0,0,0,0,0,0,0]),3,0,0,0,!1,A.length/3);const T=new o.GeometryData(new o.PrimitiveData(S,new o.AttributeData(this.convertToIndicesArray(y),1,0,0,0,!1,y.length)),o.PRIMITIVE_MODE.TRIANGLES);return i.data.push(T),i}))}loadScene(){return r(this,void 0,void 0,(function*(){const e=new n.TreeNode("sdgtf_content");if(this._content.arcs&&e.addChild(yield this.loadArcs()),this._content.beziercurves)for(let t in this._content.beziercurves)e.addChild(yield this.loadBeziercurve(t));if(this._content.circles&&e.addChild(yield this.loadCircles()),this._content.cylinders&&e.addChild(yield this.loadCylinders()),this._content.points)for(let t in this._content.points)e.addChild(yield this.loadPoint(t));if(this._content.polylines)for(let t in this._content.polylines)e.addChild(yield this.loadPolyline(t));if(this._content.spheres&&e.addChild(yield this.loadSpheres()),this._content.surfacepatches)for(let t in this._content.surfacepatches)e.addChild(yield this.loadSurfacepatch(t));return e}))}}},2549:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=t.GLTF_EXTENSIONS=void 0;const n=i(3858),a=i(8877),s=i(887),o=i(7038),l=i(1990),c=i(3490),u=i(8103),h=i(9056),d=i(9649),f=i(5458),p=i(3883),m=i(206);var g;!function(e){e.KHR_BINARY_GLTF="KHR_binary_glTF",e.KHR_DRACO_MESH_COMPRESSION="KHR_draco_mesh_compression",e.KHR_LIGHTS_PUNCTUAL="KHR_lights_punctual",e.KHR_MATERIALS_CLEARCOAT="KHR_materials_clearcoat",e.KHR_MATERIALS_IOR="KHR_materials_ior",e.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",e.KHR_MATERIALS_SHEEN="KHR_materials_sheen",e.KHR_MATERIALS_SPECULAR="KHR_materials_specular",e.KHR_MATERIALS_TRANSMISSION="KHR_materials_transmission",e.KHR_MATERIALS_UNLIT="KHR_materials_unlit",e.KHR_MATERIALS_VARIANTS="KHR_materials_variants",e.KHR_MATERIALS_VOLUME="KHR_materials_volume",e.KHR_MESH_QUANTIZATION="KHR_mesh_quantization",e.KHR_TEXTURE_TRANSFORM="KHR_texture_transform",e.SHAPEDIVER_MATERIALS_PRESET="SHAPEDIVER_materials_preset"}(g=t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={}));const b=i(688);t.GLTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._eventEngine=a.EventEngine.instance,this._globalTransformation=s.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._httpClient=a.HttpClient.instance,this._logger=a.Logger.instance,this._performanceEvaluator=a.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._uuidGenerator=a.UuidGenerator.instance,this._eventId="",this._nodes={},this._numberOfNodes=0,this._numberOfConvertedNodes=0,this._progressTimer=0}load(e,t,i,n,l){var c,v;return r(this,void 0,void 0,(function*(){this._eventId=l||this._uuidGenerator.create();const r={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 2.0 loading."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_START,r),this._numberOfConvertedNodes=0,this._numberOfNodes=e.nodes?e.nodes.length:0,this._progressTimer=performance.now(),this._baseUri=n,t&&i&&(this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+i.contentLength+8,i.length)),this._content=e,this.validateVersionAndExtensions();const _=yield new b;this._bufferLoader=new u.BufferLoader(this._content,this._body,this._baseUri),yield this._bufferLoader.load(),this._bufferViewLoader=new h.BufferViewLoader(this._content,this._bufferLoader),this._bufferViewLoader.load(),this._accessorLoader=new d.AccessorLoader(this._content,this._bufferViewLoader),this._accessorLoader.load(),this._textureLoader=new f.TextureLoader(this._content,this._bufferViewLoader,this._baseUri),yield this._textureLoader.load(),this._materialLoader=new p.MaterialLoader(this._content,this._textureLoader),yield this._materialLoader.load(),this._geometryLoader=new m.GeometryLoader(this._content,this._accessorLoader,this._bufferViewLoader,this._materialLoader,_);const y={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.1,status:"Initial logic of glTF loading."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,y);const A=yield this.loadScene();if(this._content.extensions&&this._content.extensions[g.KHR_MATERIALS_VARIANTS]){const e=this._content.extensions[g.KHR_MATERIALS_VARIANTS].variants;for(let t=0;t<e.length;t++)this._geometryLoader.materialVariantsData.variants.push(e[t].name);this._geometryLoader.materialVariantsData.variantIndex=0,A.data.push(this._geometryLoader.materialVariantsData)}if(void 0!==this._content.skins&&void 0!==this._content.nodes)for(let e=0;e<(null===(c=this._content.nodes)||void 0===c?void 0:c.length);e++)if(void 0!==this._content.nodes[e].skin){const t=this.loadSkin(this._content.nodes[e].skin),i=this._nodes[e],r=[],n=[];for(let e=0;e<t.joints.length;e++){this._nodes[t.joints[e]].data.push(new o.BoneData),r.push(this._nodes[t.joints[e]]);let i=s.mat4.create();if(void 0!==t.inverseBindMatrices){const r=t.inverseBindMatrices.array;i=s.mat4.fromValues(r[16*e+0],r[16*e+1],r[16*e+2],r[16*e+3],r[16*e+4],r[16*e+5],r[16*e+6],r[16*e+7],r[16*e+8],r[16*e+9],r[16*e+10],r[16*e+11],r[16*e+12],r[16*e+13],r[16*e+14],r[16*e+15])}n.push(i)}i.skinNode=!0,i.bones=r,i.boneInverses=n}if(this._content.animations)for(let e=0;e<(null===(v=this._content.animations)||void 0===v?void 0:v.length);e++)A.data.push(this.loadAnimation(e));const E={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_END,E),A}))}loadWithUrl(e){return r(this,void 0,void 0,(function*(){let t,i,r,n,s;this._performanceEvaluator.startSection("gltfProcessing."+e),this._performanceEvaluator.startSection("loadGltf."+e),t=yield this._httpClient.get(e,{responseType:"arraybuffer"}),this._performanceEvaluator.endSection("loadGltf."+e);const o=(new TextDecoder).decode(new Uint8Array(t.data,0,4));if("glTF"===o||t.headers["content-type"]&&("model/gltf-binary"===t.headers["content-type"]||"application/octet-stream"===t.headers["content-type"]||"model/gltf.binary"===t.headers["content-type"])){r=t.data;const e=new DataView(r,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(s={magic:o,version:e.getUint32(4,!0),length:e.getUint32(8,!0),contentLength:e.getUint32(12,!0),contentFormat:e.getUint32(16,!0)},"glTF"!=s.magic)throw new a.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: sdgTF magic wrong.");const n=new DataView(r,this.BINARY_EXTENSION_HEADER_LENGTH,s.contentLength),l=(new TextDecoder).decode(n);i=JSON.parse(l),this._body=r.slice(this.BINARY_EXTENSION_HEADER_LENGTH+s.contentLength+8,s.length)}else{i=JSON.parse((new TextDecoder).decode(t.data));const r=e=>{const t=e.includes("/")?"/":"\\",i=e.split(t);return i.pop(),i.join(t)};n=r(e),!n&&window&&window.location&&window.location.href&&(n=r(window.location.href))}return yield this.load(i,r,s,n)}))}loadAnimation(e){if(!this._content.animations)throw new Error("Animations not available.");if(!this._content.animations[e])throw new Error("Animations not available.");const t=this._content.animations[e],i=[];let r=1/0,n=-1/0;for(let e=0;e<t.channels.length;e++){const a=t.channels[e],s=t.samplers[a.sampler],o=a.target,l=o.path,c=this._nodes[o.node];if(void 0===c)throw new Error("Animation node not available.");const u=this._accessorLoader.getAccessor(s.input);r=Math.min(r,u.min[0]),n=Math.max(n,u.max[0]);const h=this._accessorLoader.getAccessor(s.output);let d=s.interpolation;"CUBICSPLINE"===d&&(this._logger.warn("Animation with CUBICSPLINE interpolation is currently not supported. Assigning linear interpolation instead."),d="linear"),i.push({node:c,times:u.array,values:h.array,path:l,interpolation:null==d?void 0:d.toLowerCase()})}return new o.AnimationData(t.name||"gltf_animation_"+e,i,r,n-r)}loadCamera(e){if(!this._content.cameras)throw new Error("Cameras not available.");if(!this._content.cameras[e])throw new Error("Cameras not available.");const t=this._content.cameras[e],i=new n.TreeNode(t.name||"camera_"+e);let r;if("perspective"===t.type){const e=t.perspective;r=new l.PerspectiveCamera(i.id),i.data.push(r),r.fov=e.yfov*(180/Math.PI),r.aspect=e.aspectRatio||1,r.near=e.znear||1,r.far=e.zfar||2e6}else{const e=t.orthographic;r=new l.OrthographicCamera(i.id),i.data.push(r),r.left=-e.xmag,r.right=e.xmag,r.top=-e.ymag,r.bottom=e.ymag,r.near=e.znear||1,r.far=e.zfar||2e6}return r.useNodeData=!0,r.node=i,i}loadLights(e){if(!this._content.extensions||!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL]||!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights)throw new Error(`Extension ${g.KHR_LIGHTS_PUNCTUAL} not available.`);if(!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights[e])throw new Error("Light not available.");const t=this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights[e],i=new n.TreeNode(t.name||"light_"+e);let r="#ffffffff";void 0!==t.color&&(r=[255*t.color[0],255*t.color[1],255*t.color[2]]);const a=void 0!==t.range?t.range:0;let s;if("directional"===t.type){s=new c.DirectionalLight({color:r}),i.data.push(s);const e=s;void 0!==t.intensity&&(e.intensity=t.intensity)}else if("point"===t.type){s=new c.PointLight({color:r}),i.data.push(s);const e=s;e.distance=a,e.decay=2,void 0!==t.intensity&&(s.intensity=t.intensity),e.position=[0,0,0]}else{if("spot"!==t.type)throw new Error("Unexpected light type: "+t.type);{s=new c.SpotLight({color:r}),i.data.push(s),t.spot=t.spot||{},t.spot.innerConeAngle=void 0!==t.spot.innerConeAngle?t.spot.innerConeAngle:0,t.spot.outerConeAngle=void 0!==t.spot.outerConeAngle?t.spot.outerConeAngle:Math.PI/4;const e=s;e.distance=a,e.angle=t.spot.outerConeAngle,e.penumbra=1-t.spot.innerConeAngle/t.spot.outerConeAngle,e.decay=2,void 0!==t.intensity&&(s.intensity=t.intensity),e.position=[0,0,0],e.target=[0,0,-1]}}return s.useNodeData=!0,i}loadNode(e){return r(this,void 0,void 0,(function*(){if(!this._content.nodes)throw new Error("Nodes not available.");if(!this._content.nodes[e])throw new Error("Node not available.");const t=this._content.nodes[e],i=new n.TreeNode(t.name||"node_"+e);if(this._nodes[e]=i,t.matrix)i.addTransformation({id:"gltf_matrix",matrix:s.mat4.fromValues(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5],t.matrix[6],t.matrix[7],t.matrix[8],t.matrix[9],t.matrix[10],t.matrix[11],t.matrix[12],t.matrix[13],t.matrix[14],t.matrix[15])}),i.addTransformation({id:"gltf_matrix_translation",matrix:s.mat4.create()}),i.addTransformation({id:"gltf_matrix_rotation",matrix:s.mat4.create()}),i.addTransformation({id:"gltf_matrix_scale",matrix:s.mat4.create()});else if(t.translation||t.scale||t.rotation){const e=t.translation?s.mat4.fromTranslation(s.mat4.create(),s.vec3.fromValues(t.translation[0],t.translation[1],t.translation[2])):s.mat4.create(),r=t.scale?s.mat4.fromScaling(s.mat4.create(),s.vec3.fromValues(t.scale[0],t.scale[1],t.scale[2])):s.mat4.create(),n=t.rotation?s.mat4.fromQuat(s.mat4.create(),s.vec4.fromValues(t.rotation[0],t.rotation[1],t.rotation[2],t.rotation[3])):s.mat4.create();i.addTransformation({id:"gltf_matrix_translation",matrix:e}),i.addTransformation({id:"gltf_matrix_rotation",matrix:n}),i.addTransformation({id:"gltf_matrix_scale",matrix:r})}if(void 0!==t.mesh&&i.addChild(this._geometryLoader.loadMesh(t.mesh,t.weights)),void 0!==t.camera&&i.addChild(this.loadCamera(t.camera)),t.extensions&&t.extensions[g.KHR_LIGHTS_PUNCTUAL]&&i.addChild(this.loadLights(t.extensions[g.KHR_LIGHTS_PUNCTUAL].light)),t.children)for(let e=0,r=t.children.length;e<r;e++)i.addChild(yield this.loadNode(t.children[e]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.1,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return i}))}loadScene(){return r(this,void 0,void 0,(function*(){if(!this._content.scenes)throw new Error("Scenes not available.");const e=this._content.scene||0;if(!this._content.scenes[e])throw new Error("Scene not available.");const t=this._content.scenes[e],i=new n.TreeNode(t.name||"scene_"+e);if(i.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),t.nodes)for(let e=0,r=t.nodes.length;e<r;e++)i.addChild(yield this.loadNode(t.nodes[e]));return i}))}loadSkin(e){if(!this._content.skins)throw new Error("Skins not available.");if(!this._content.skins[e])throw new Error("Skin not available.");const t=this._content.skins[e],i={joints:t.joints,inverseBindMatrices:null};return void 0===t.inverseBindMatrices||(i.inverseBindMatrices=this._accessorLoader.getAccessor(t.inverseBindMatrices)),i}validateVersionAndExtensions(){if(!this._content.asset)throw new Error("Asset not available.");const e=this._content.asset;if(!e.version)throw new Error("Asset does not have a version.");if(!(e.minVersion?e.minVersion:e.version).startsWith("2"))throw new Error("Version of the glTF not supported.");if(this._content.extensionsUsed){const e=[];for(let t=0;t<this._content.extensionsUsed.length;t++)Object.values(g).includes(this._content.extensionsUsed[t])||e.push(this._content.extensionsUsed[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");e.forEach(((i,r)=>{t+='"'+i+'"'+(r===e.length-1?"":r===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+t)}}if(this._content.extensionsRequired){const e=[];for(let t=0;t<this._content.extensionsRequired.length;t++)Object.values(g).includes(this._content.extensionsRequired[t])||e.push(this._content.extensionsRequired[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");throw e.forEach(((i,r)=>{t+='"'+i+'"'+(r===e.length-1?"":r===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but required. Aborting glTF loading.",new Error(t)}}}}},688:(e,t,i)=>{"use strict";var r,n=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,n,a=void 0!==(e=e||{})?e:{},s=Object.assign;a.ready=new Promise((function(e,i){t=e,n=i}));var o=!1,l=!1;a.onRuntimeInitialized=function(){o=!0,l&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.onModuleParsed=function(){l=!0,o&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.isVersionSupported=function(e){if("string"!=typeof e)return!1;const t=e.split(".");return!(t.length<2||t.length>3)&&(1==t[0]&&t[1]>=0&&t[1]<=5||!(0!=t[0]||t[1]>10))};var c,u,h,d,f,p,m=s({},a),g=[],b="object"==typeof window,v="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";_?(y=v?i(7356).dirname(y)+"/":"//",p=()=>{f||(d=i(6125),f=i(7356))},c=function(e,t){var i=oe(e);return i?t?i:i.toString():(p(),e=f.normalize(e),d.readFileSync(e,t?null:"utf8"))},h=e=>{var t=c(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=(e,t,i)=>{var r=oe(e);r&&t(r),p(),e=f.normalize(e),d.readFile(e,(function(e,r){e?i(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),g=process.argv.slice(2),a.inspect=function(){return"[Emscripten Module object]"}):(b||v)&&(v?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),r&&(y=r),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",c=e=>{try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){var i=oe(e);if(i)return function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];r>255&&(ae&&M(!1,"Character code "+r+" ("+String.fromCharCode(r)+")  at offset "+i+" not in 0x00-0xFF."),r&=255),t.push(String.fromCharCode(r))}return t.join("")}(i);throw t}},v&&(h=e=>{try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){var i=oe(e);if(i)return i;throw t}}),u=(e,t,i)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{if(200==r.status||0==r.status&&r.response)t(r.response);else{var n=oe(e);n?t(n.buffer):i()}},r.onerror=i,r.send(null)});var A,E=a.print||console.log.bind(console),w=a.printErr||console.warn.bind(console);s(a,m),m=null,a.arguments&&(g=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(A=a.wasmBinary),a.noExitRuntime;var S,T={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(e){},Instance:function(e,t){this.exports=function(e){for(var t,i=new Uint8Array(123),r=25;r>=0;--r)i[48+r]=52+r,i[65+r]=r,i[97+r]=26+r;function n(e,t,r){for(var n,a,s=0,o=t,l=r.length,c=t+(3*l>>2)-("="==r[l-2])-("="==r[l-1]);s<l;s+=4)n=i[r.charCodeAt(s+1)],a=i[r.charCodeAt(s+2)],e[o++]=i[r.charCodeAt(s)]<<2|n>>4,o<c&&(e[o++]=n<<4|a>>2),o<c&&(e[o++]=a<<6|i[r.charCodeAt(s+3)])}i[43]=62,i[47]=63;var a=new ArrayBuffer(16),s=new Int32Array(a),o=new Float32Array(a);function l(e){o[2]=e}function c(e){return s[e]}return new Float64Array(a),function(e){var i=e.a,r=i.buffer;i.grow=function(e){e|=0;var n=0|Pn(),s=n+e|0;if(n<s&&s<65536){var o=new ArrayBuffer(b(s,65536));new Int8Array(o).set(a),a=new Int8Array(o),u=new Int16Array(o),h=new Int32Array(o),d=new Uint8Array(o),f=new Uint16Array(o),p=new Uint32Array(o),m=new Float32Array(o),g=new Float64Array(o),r=o,i.buffer=r,t=d}return n};var a=new Int8Array(r),u=new Int16Array(r),h=new Int32Array(r),d=new Uint8Array(r),f=new Uint16Array(r),p=new Uint32Array(r),m=new Float32Array(r),g=new Float64Array(r),b=Math.imul,v=Math.fround,_=Math.abs,y=Math.clz32,A=Math.min,E=Math.max,w=Math.floor,S=Math.ceil,T=(Math.trunc,Math.sqrt),x=e.abort,M=e.b,R=e.c,P=e.d,C=e.e,k=e.f,O=e.g,D=e.h,N=e.i,I=5260320,L=0;function U(e,t,i){var r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0;I=r=I-672|0,s=h[t+12>>2],n=h[t+20>>2],n=(E=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n;e:{t:{i:if(!(E>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s)||(n=a+h[t>>2]|0,h[e>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(E=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,T=a,h[t+16>>2]=a,h[t+20>>2]=n,p[e>>2]>31||(a=h[t+12>>2],n=s,n=(s=E+8|0)>>>0<8?n+1|0:n,s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=T+h[t>>2]|0,h[e+4>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(E=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,T=a,h[t+16>>2]=a,h[t+20>>2]=n,a=h[t+12>>2],n=s,n=(s=E+8|0)>>>0<8?n+1|0:n,s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=T+h[t>>2]|0,h[e+12>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(E=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,A=a,h[t+16>>2]=a,h[t+20>>2]=n,n=h[e+20>>2],(0|(T=h[e+12>>2]))!=(0|n)&&n||(a=h[t+12>>2],n=s,n=(s=E+8|0)>>>0<8?n+1|0:n,s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))))))))if(n=A+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+16>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,s>>>0>=7)h[r>>2]=s,Gt(1857,r);else{h[r+664>>2]=i;r:if(T){n:if(E=h[i>>2],!(T>>>0<=(h[i+8>>2]-E|0)/12>>>0)){if(!(T>>>0<357913942))break t;if(a=h[i+4>>2],T=(n=mr(s=b(T,12)))+s|0,n=s=n+b((a-E|0)/12|0,12)|0,(0|a)!=(0|E))for(n=s;a=a-12|0,h[(n=n-12|0)>>2]=h[a>>2],h[n+4>>2]=h[a+4>>2],h[n+8>>2]=h[a+8>>2],(0|a)!=(0|E););if(h[i+8>>2]=T,h[i+4>>2]=s,h[i>>2]=n,!E)break n;be(E)}n:switch(h[e+16>>2]){case 0:if(l=Ze(r+8|0,3),E=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(a=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(a>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=o+h[t>>2]|0,h[l>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(o=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,u=o,h[t+16>>2]=o,h[t+20>>2]=n,!(p[l>>2]>32)&&(o=h[t+12>>2],n=s,n=(s=a+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|o)|(0|n)>(0|o))&&(n=u+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[l+4>>2]=s,n=h[t+20>>2],n=(o=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,s&&(h[l+8>>2]=0,Tt(l+16|0,t)&&Tt(l+36|0,t)&&Tt(l+56|0,t)&&Tt(l+76|0,t)))))){if(T=h[l+4>>2],s=0,t=0,I=a=I-48|0,o=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;s=mr(n=o<<2),h[a+8>>2]=s,t=n+s|0,h[a+16>>2]=t,xt(s,0,n),h[a+12>>2]=t}if(n=h[l+120>>2],(u=h[n>>2])&&(h[n+4>>2]=u,be(u),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,o=h[l+12>>2],s=h[a+8>>2],t=h[a+12>>2]),h[n+4>>2]=t,h[n>>2]=s,h[n+8>>2]=h[a+16>>2],s=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;c=mr(t=o<<2),h[a+8>>2]=c,s=t+c|0,h[a+16>>2]=s,xt(c,0,t),h[a+12>>2]=s}t=h[l+132>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[a+8>>2],s=h[a+12>>2]),h[t+4>>2]=s,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,Qe(a+8|0),n=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,o=(t=h[a+28>>2])+1|0,h[a+28>>2]=o;a:if(!(t>>>0>o>>>0))for(;;){if(A=h[a+12>>2],s=h[a+24>>2],t=h[A+((n=((t=s+(u=o-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,f=h[t+8>>2],c=h[t+4>>2],n=h[t>>2],h[a+28>>2]=u,1+(((u=(t=h[a+16>>2])-A|0)?b(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[a+16>>2]=h[a+16>>2]-4),s=0,n>>>0>T>>>0)break a;if((c=(0|c)==((t=h[l+12>>2])-1|0)?0:c+1|0)>>>0>=t>>>0)break a;A=(o=b(f,12))+h[l+132>>2]|0,u=o+h[l+120>>2]|0;s:{o:if(g=c<<2,_=h[l>>2]-h[g+h[A>>2]>>2]|0){l:{c:{u:{h:{if(n>>>0<=2){if(t=h[l+108>>2],h[t>>2]=c,s=1,(o=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;(0|(s=(t=h[l+120>>2])+(A=b(m=f+1|0,12))|0))!=(0|u)&&(Bt(s,h[u>>2],h[u+4>>2]),t=h[l+120>>2]),t=g+h[t+A>>2]|0,h[t>>2]=h[t>>2]+(1<<_-1);d:if((0|(t=31^y(n)))<=(0|(_=32-(s=h[l+32>>2])|0))){if((0|(u=h[l+28>>2]))==h[l+20>>2]){s=0;break d}if(_=h[u>>2],v=t+s|0,h[l+32>>2]=v,s=_<<s>>>32-t|0,32!=(0|v))break d;h[l+32>>2]=0,h[l+28>>2]=u+4}else(0|(v=(u=h[l+28>>2])+4|0))!=h[l+20>>2]?(w=h[u>>2],h[l+28>>2]=v,_=t-_|0,h[l+32>>2]=_,s=h[u+4>>2]>>>32-_|w<<s>>>32-t):s=0;if((0|(s=n-(t=(n>>>1|0)-s|0)|0))!=(0|t)){if((0|(n=h[l+88>>2]))==h[l+80>>2])break u;u=h[n>>2],v=(_=h[l+92>>2])+1|0,h[l+92>>2]=v,u&=-2147483648>>>_;d:{if(32==(0|v)){if(h[l+92>>2]=0,h[l+88>>2]=n+4,u)break d;break u}if(!u)break u}n=s}else n=t;s=t;break c}for(;c=(o-1|0)==(0|c)?0:c+1|0,h[t+(s<<2)>>2]=c,(s=s+1|0)>>>0<(o=h[l+12>>2])>>>0;);break l}n=t}if(t=h[l+132>>2],u=h[(o=t+o|0)>>2],h[(g=u+g|0)>>2]=h[g>>2]+1,Bt(t+A|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?b(u>>2,341)-1|0:0))?(Qe(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!n)break o;o=h[a+28>>2]+h[a+24>>2]|0,s=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-s|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,s=h[a+12>>2]),t=h[s+((t=(o>>>0)/341|0)<<2)>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=c,h[t>>2]=n,o=h[a+28>>2]+1|0,h[a+28>>2]=o;break s}if(c=0,n)for(;;){if(s=h[l+96>>2],o){for(g=h[l+40>>2],w=h[l+108>>2],P=h[u>>2],k=h[A>>2],o=0;;){h[(h[(_=w+(o<<2)|0)>>2]<<2)+s>>2]=0,f=h[_>>2]<<2;l:if(t=h[l>>2]-h[f+k>>2]|0)if(f=s+f|0,(0|(S=32-(m=h[l+52>>2])|0))>=(0|t)){if((0|(v=h[l+48>>2]))==(0|g)){h[f>>2]=0;break l}if(h[f>>2]=h[v>>2]<<m>>>32-t,t=t+h[l+52>>2]|0,h[l+52>>2]=t,32!=(0|t))break l;h[l+52>>2]=0,h[l+48>>2]=v+4}else(0|(M=(v=h[l+48>>2])+4|0))!=(0|g)?(C=h[v>>2],h[l+48>>2]=M,S=t-S|0,h[l+52>>2]=S,h[f>>2]=h[v+4>>2]>>>32-S|C<<m>>>32-t):h[f>>2]=0;if(t=h[_>>2]<<2,h[(f=t+s|0)>>2]=h[f>>2]|h[t+P>>2],!((o=o+1|0)>>>0<p[l+12>>2]))break}s=h[l+96>>2]}if(h[a+32>>2]=h[s>>2],h[a+36>>2]=h[s+4>>2],h[a+40>>2]=h[s+8>>2],Ct(h[E>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|n)==(0|(c=c+1|0)))break o;o=h[l+12>>2]}}else{if(!n)break o;for(;;){if(t=h[u>>2],A=h[t+8>>2],g=h[t+4>>2],_=h[t>>2],t=h[E>>2],(o=h[t+4>>2])>>>0<(m=h[t+8>>2])>>>0)h[o+8>>2]=A,h[o+4>>2]=g,h[o>>2]=_,h[t+4>>2]=o+12;else{if((c=1+(v=(o-(f=h[t>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(c,12)),h[8+(c=R+v|0)>>2]=A,h[c+4>>2]=g,h[c>>2]=_,A=c+12|0,(0|o)!=(0|f))for(;o=o-12|0,h[(c=c-12|0)>>2]=h[o>>2],h[c+4>>2]=h[o+4>>2],h[c+8>>2]=h[o+8>>2],(0|o)!=(0|f););h[t+8>>2]=m+v,h[t+4>>2]=A,h[t>>2]=c,f&&be(f)}if(h[l+8>>2]=h[l+8>>2]+1,(0|n)==(0|(s=s+1|0)))break}}o=h[a+28>>2]}if(!o)break}if(h[a+28>>2]=0,(c=(o=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(o=h[a+16>>2])-t|0)>>>0>8;);switch(s=170,(c>>>2|0)-1|0){case 1:s=341;case 0:h[a+24>>2]=s}if((0|t)!=(0|o)){for(;be(h[t>>2]),(0|o)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(n=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&be(t),I=a+48|0}Yt(l);break r;case 1:if(l=Ze(r+8|0,3),T=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(a=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(a>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=o+h[t>>2]|0,h[l>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(o=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,f=o,h[t+16>>2]=o,h[t+20>>2]=n,!(p[l>>2]>32)&&(o=h[t+12>>2],n=s,n=(s=a+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|o)|(0|n)>(0|o))&&(n=f+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[l+4>>2]=s,n=h[t+20>>2],n=(o=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,s&&(h[l+8>>2]=0,Tt(l+16|0,t)&&Tt(l+36|0,t)&&Tt(l+56|0,t)&&Tt(l+76|0,t)))))){if(A=h[l+4>>2],s=0,I=a=I-48|0,o=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;u=mr(t=o<<2),h[a+8>>2]=u,s=t+u|0,h[a+16>>2]=s,xt(u,0,t),h[a+12>>2]=s}if(t=h[l+120>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,u=h[a+8>>2],o=h[l+12>>2],s=h[a+12>>2]),h[t+4>>2]=s,h[t>>2]=u,h[t+8>>2]=h[a+16>>2],u=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;c=mr(t=o<<2),h[a+8>>2]=c,u=t+c|0,h[a+16>>2]=u,xt(c,0,t),h[a+12>>2]=u}t=h[l+132>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,u=h[a+12>>2],c=h[a+8>>2]),h[t+4>>2]=u,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,Qe(a+8|0),n=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,o=(t=h[a+28>>2])+1|0,h[a+28>>2]=o;a:if(!(t>>>0>o>>>0))for(;;){if(u=h[a+12>>2],s=h[a+24>>2],t=h[u+((n=((t=s+(c=o-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,E=h[t+8>>2],n=h[t+4>>2],t=h[t>>2],h[a+28>>2]=c,1+(((u=(c=h[a+16>>2])-u|0)?b(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(be(h[c-4>>2]),h[a+16>>2]=h[a+16>>2]-4),t>>>0>A>>>0)break a;if(s=0,(c=(0|n)==((o=h[l+12>>2])-1|0)?0:n+1|0)>>>0>=o>>>0)break a;f=(n=h[l+120>>2])+(o=b(E,12))|0;s:{o:if(u=c<<2,v=o+h[l+132>>2]|0,g=h[l>>2]-h[u+h[v>>2]>>2]|0){l:{c:{u:{h:{if(t>>>0<=2){if(n=h[l+108>>2],h[n>>2]=c,u=1,(o=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;Bt((s=n)+(n=o+12|0)|0,h[f>>2],h[f+4>>2]),n=u+h[n+h[l+120>>2]>>2]|0,h[n>>2]=h[n>>2]+(1<<g-1);d:if((0|(n=31^y(t)))<=(0|(g=32-(s=h[l+32>>2])|0))){if((0|(f=h[l+28>>2]))==h[l+20>>2]){s=0;break d}if(g=h[f>>2],_=n+s|0,h[l+32>>2]=_,s=g<<s>>>32-n|0,32!=(0|_))break d;h[l+32>>2]=0,h[l+28>>2]=f+4}else(0|(_=(f=h[l+28>>2])+4|0))!=h[l+20>>2]?(m=h[f>>2],h[l+28>>2]=_,g=n-g|0,h[l+32>>2]=g,s=h[f+4>>2]>>>32-g|m<<s>>>32-n):s=0;if(f=E+1|0,(0|(s=(n=t)-(t=(t>>>1|0)-s|0)|0))!=(0|t)){if((0|(n=h[l+88>>2]))==h[l+80>>2])break u;g=h[n>>2],m=(_=h[l+92>>2])+1|0,h[l+92>>2]=m,g&=-2147483648>>>_;d:{if(32==(0|m)){if(h[l+92>>2]=0,h[l+88>>2]=n+4,g)break d;break u}if(!g)break u}n=s}else n=t;s=t;break c}for(;c=(o-1|0)==(0|c)?0:c+1|0,h[n+(u<<2)>>2]=c,(o=h[l+12>>2])>>>0>(u=u+1|0)>>>0;);break l}n=t}if(R=u,t=h[l+132>>2],u=h[(o=t+o|0)>>2],h[(g=R+u|0)>>2]=h[g>>2]+1,Bt(t+b(f,12)|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!n)break o;o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=n,o=h[a+28>>2]+1|0,h[a+28>>2]=o;break s}if(c=0,t)for(;;){if(u=h[l+96>>2],o){for(E=h[l+40>>2],w=h[l+108>>2],P=h[f>>2],k=h[v>>2],o=0;;){h[(h[(g=w+(o<<2)|0)>>2]<<2)+u>>2]=0,s=h[g>>2]<<2;l:if(n=h[l>>2]-h[s+k>>2]|0)if(s=s+u|0,(0|(S=32-(_=h[l+52>>2])|0))>=(0|n)){if((0|(m=h[l+48>>2]))==(0|E)){h[s>>2]=0;break l}if(h[s>>2]=h[m>>2]<<_>>>32-n,n=n+h[l+52>>2]|0,h[l+52>>2]=n,32!=(0|n))break l;h[l+52>>2]=0,h[l+48>>2]=m+4}else(0|(M=(m=h[l+48>>2])+4|0))!=(0|E)?(C=h[m>>2],h[l+48>>2]=M,S=n-S|0,h[l+52>>2]=S,h[s>>2]=h[m+4>>2]>>>32-S|C<<_>>>32-n):h[s>>2]=0;if(n=h[g>>2]<<2,h[(s=n+u|0)>>2]=h[s>>2]|h[n+P>>2],!((o=o+1|0)>>>0<p[l+12>>2]))break}u=h[l+96>>2]}if(h[a+32>>2]=h[u>>2],h[a+36>>2]=h[u+4>>2],h[a+40>>2]=h[u+8>>2],Ct(h[T>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(c=c+1|0)))break o;o=h[l+12>>2]}}else{if(!t)break o;for(;;){if(n=h[f>>2],E=h[n+8>>2],g=h[n+4>>2],_=h[n>>2],n=h[T>>2],(o=h[n+4>>2])>>>0<(m=h[n+8>>2])>>>0)h[o+8>>2]=E,h[o+4>>2]=g,h[o>>2]=_,h[n+4>>2]=o+12;else{if((c=1+(v=(o-(u=h[n>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-u|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(c,12)),h[8+(c=R+v|0)>>2]=E,h[c+4>>2]=g,h[c>>2]=_,E=c+12|0,(0|o)!=(0|u))for(;o=o-12|0,h[(c=c-12|0)>>2]=h[o>>2],h[c+4>>2]=h[o+4>>2],h[c+8>>2]=h[o+8>>2],(0|o)!=(0|u););h[n+8>>2]=m+v,h[n+4>>2]=E,h[n>>2]=c,u&&be(u)}if(h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(s=s+1|0)))break}}o=h[a+28>>2]}if(!o)break}if(h[a+28>>2]=0,(c=(o=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(o=h[a+16>>2])-t|0)>>>0>8;);switch(u=170,(c>>>2|0)-1|0){case 1:u=341;case 0:h[a+24>>2]=u}if((0|t)!=(0|o)){for(;be(h[t>>2]),(0|o)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(n=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&be(t),I=a+48|0}Yt(l);break r;case 2:if(c=Xe(r+8|0,3),E=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(a=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(a>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=o+h[t>>2]|0,h[c>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(o=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,l=o,h[t+16>>2]=l,h[t+20>>2]=n,!(p[c>>2]>32)&&(o=h[t+12>>2],n=s,n=(s=a+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|o)|(0|n)>(0|o))&&(n=l+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[c+4>>2]=s,n=h[t+20>>2],n=(o=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,s&&(h[c+8>>2]=0,ze(c+16|0,t)&&Tt(c+32|0,t)&&Tt(c+52|0,t)&&Tt(c+72|0,t)))))){if(T=h[c+4>>2],s=0,t=0,I=o=I-48|0,a=h[c+12>>2],h[o+16>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,a){if(a>>>0>=1073741824)break e;s=mr(n=a<<2),h[o+8>>2]=s,t=n+s|0,h[o+16>>2]=t,xt(s,0,n),h[o+12>>2]=t}if(n=h[c+116>>2],(l=h[n>>2])&&(h[n+4>>2]=l,be(l),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,a=h[c+12>>2],s=h[o+8>>2],t=h[o+12>>2]),h[n+4>>2]=t,h[n>>2]=s,h[n+8>>2]=h[o+16>>2],s=0,h[o+16>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,a){if(a>>>0>=1073741824)break e;f=mr(t=a<<2),h[o+8>>2]=f,s=t+f|0,h[o+16>>2]=s,xt(f,0,t),h[o+12>>2]=s}t=h[c+128>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,f=h[o+8>>2],s=h[o+12>>2]),h[t+4>>2]=s,h[t>>2]=f,h[t+8>>2]=h[o+16>>2],h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,Qe(o+8|0),n=((t=h[o+24>>2]+h[o+28>>2]|0)>>>0)/341|0,t=h[h[o+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,a=(t=h[o+28>>2])+1|0,h[o+28>>2]=a;a:if(!(t>>>0>a>>>0))for(w=c+16|0;;){if(A=h[o+12>>2],s=h[o+24>>2],t=h[A+((n=((t=s+(f=a-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,u=h[t+8>>2],l=h[t+4>>2],n=h[t>>2],h[o+28>>2]=f,1+(((f=(t=h[o+16>>2])-A|0)?b(f>>2,341)-1|0:0)-(a+s|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[o+16>>2]=h[o+16>>2]-4),s=0,n>>>0>T>>>0)break a;if((f=(0|l)==((t=h[c+12>>2])-1|0)?0:l+1|0)>>>0>=t>>>0)break a;A=(a=b(u,12))+h[c+128>>2]|0,l=a+h[c+116>>2]|0;s:if(g=f<<2,_=h[c>>2]-h[g+h[A>>2]>>2]|0){o:{l:{c:{u:{if(n>>>0<=2){if(t=h[c+104>>2],h[t>>2]=f,s=1,(a=h[c+12>>2])>>>0>1)break u;break o}if(p[c+8>>2]>p[c+4>>2])break a;if((0|(s=(t=h[c+116>>2])+(A=b(m=u+1|0,12))|0))!=(0|l)&&(Bt(s,h[l>>2],h[l+4>>2]),t=h[c+116>>2]),t=g+h[t+A>>2]|0,h[t>>2]=h[t>>2]+(1<<_-1),h[o+32>>2]=0,mi(w,31^y(n),o+32|0),(0|(s=n-(t=(n>>>1|0)-h[o+32>>2]|0)|0))!=(0|t)){if((0|(n=h[c+84>>2]))==h[c+76>>2])break c;l=h[n>>2],v=(_=h[c+88>>2])+1|0,h[c+88>>2]=v,l&=-2147483648>>>_;h:{if(32==(0|v)){if(h[c+88>>2]=0,h[c+84>>2]=n+4,l)break h;break c}if(!l)break c}n=s}else n=t;s=t;break l}for(;f=(a-1|0)==(0|f)?0:f+1|0,h[t+(s<<2)>>2]=f,(a=h[c+12>>2])>>>0>(s=s+1|0)>>>0;);break o}n=t}if(t=h[c+128>>2],l=h[(a=t+a|0)>>2],h[(g=l+g|0)>>2]=h[g>>2]+1,Bt(t+A|0,l,h[a+4>>2]),s&&(a=h[o+28>>2]+h[o+24>>2]|0,t=h[o+12>>2],(0|a)==(0|((l=h[o+16>>2]-t|0)?b(l>>2,341)-1|0:0))?(Qe(o+8|0),a=h[o+24>>2]+h[o+28>>2]|0,R=h[o+12>>2]):R=t,t=h[R+((t=(a>>>0)/341|0)<<2)>>2]+b(a-b(t,341)|0,12)|0,h[t+8>>2]=u,h[t+4>>2]=f,h[t>>2]=s,h[o+28>>2]=h[o+28>>2]+1),!n)break s;a=h[o+28>>2]+h[o+24>>2]|0,s=h[o+12>>2],(0|a)==(0|((t=h[o+16>>2]-s|0)?b(t>>2,341)-1|0:0))&&(Qe(o+8|0),a=h[o+24>>2]+h[o+28>>2]|0,s=h[o+12>>2]),t=h[s+((t=(a>>>0)/341|0)<<2)>>2]+b(a-b(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=f,h[t>>2]=n,h[o+28>>2]=h[o+28>>2]+1;break s}if(f=0,n)for(;;){if(s=h[c+92>>2],a){for(g=h[c+36>>2],P=h[c+104>>2],k=h[l>>2],S=h[A>>2],a=0;;){h[(h[(_=P+(a<<2)|0)>>2]<<2)+s>>2]=0,u=h[_>>2]<<2;o:if(t=h[c>>2]-h[u+S>>2]|0)if(u=s+u|0,(0|(M=32-(m=h[c+48>>2])|0))>=(0|t)){if((0|(v=h[c+44>>2]))==(0|g)){h[u>>2]=0;break o}if(h[u>>2]=h[v>>2]<<m>>>32-t,t=t+h[c+48>>2]|0,h[c+48>>2]=t,32!=(0|t))break o;h[c+48>>2]=0,h[c+44>>2]=v+4}else(0|(C=(v=h[c+44>>2])+4|0))!=(0|g)?(R=h[v>>2],h[c+44>>2]=C,M=t-M|0,h[c+48>>2]=M,h[u>>2]=h[v+4>>2]>>>32-M|R<<m>>>32-t):h[u>>2]=0;if(t=h[_>>2]<<2,h[(u=t+s|0)>>2]=h[u>>2]|h[t+k>>2],!((a=a+1|0)>>>0<p[c+12>>2]))break}s=h[c+92>>2]}if(h[o+32>>2]=h[s>>2],h[o+36>>2]=h[s+4>>2],h[o+40>>2]=h[s+8>>2],Ct(h[E>>2],o+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(f=f+1|0)))break s;a=h[c+12>>2]}}else{if(!n)break s;for(;;){if(t=h[l>>2],A=h[t+8>>2],g=h[t+4>>2],_=h[t>>2],t=h[E>>2],(a=h[t+4>>2])>>>0<(m=h[t+8>>2])>>>0)h[a+8>>2]=A,h[a+4>>2]=g,h[a>>2]=_,h[t+4>>2]=a+12;else{if((f=1+(v=(a-(u=h[t>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(P=(m=(m-u|0)/12|0)<<1,(f=m>>>0<178956970?f>>>0>P>>>0?f:P:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(f,12)),h[8+(f=R+v|0)>>2]=A,h[f+4>>2]=g,h[f>>2]=_,A=f+12|0,(0|a)!=(0|u))for(;a=a-12|0,h[(f=f-12|0)>>2]=h[a>>2],h[f+4>>2]=h[a+4>>2],h[f+8>>2]=h[a+8>>2],(0|a)!=(0|u););h[t+8>>2]=m+v,h[t+4>>2]=A,h[t>>2]=f,u&&be(u)}if(h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(s=s+1|0)))break}}if(!(a=h[o+28>>2]))break}if(h[o+28>>2]=0,(f=(a=h[o+16>>2])-(t=h[o+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[o+12>>2]+4|0,h[o+12>>2]=t,(f=(a=h[o+16>>2])-t|0)>>>0>8;);switch(s=170,(f>>>2|0)-1|0){case 1:s=341;case 0:h[o+24>>2]=s}if((0|t)!=(0|a)){for(;be(h[t>>2]),(0|a)!=(0|(t=t+4|0)););(0|(t=h[o+16>>2]))!=(0|(n=h[o+12>>2]))&&(h[o+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[o+8>>2])&&be(t),I=o+48|0}Zt(c);break r;case 3:if(u=Xe(r+8|0,3),T=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(l=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(l>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=a+h[t>>2]|0,h[u>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(l=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,f=a,h[t+16>>2]=a,h[t+20>>2]=n,!(p[u>>2]>32)&&(a=h[t+12>>2],n=s,n=(s=l+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))&&(n=f+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[u+4>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,s&&(h[u+8>>2]=0,ze(u+16|0,t)&&Tt(u+32|0,t)&&Tt(u+52|0,t)&&Tt(u+72|0,t)))))){if(A=h[u+4>>2],s=0,I=l=I-48|0,a=h[u+12>>2],h[l+16>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,a){if(a>>>0>=1073741824)break e;o=mr(t=a<<2),h[l+8>>2]=o,s=t+o|0,h[l+16>>2]=s,xt(o,0,t),h[l+12>>2]=s}if(t=h[u+116>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,o=h[l+8>>2],a=h[u+12>>2],s=h[l+12>>2]),h[t+4>>2]=s,h[t>>2]=o,h[t+8>>2]=h[l+16>>2],o=0,h[l+16>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,a){if(a>>>0>=1073741824)break e;c=mr(t=a<<2),h[l+8>>2]=c,o=t+c|0,h[l+16>>2]=o,xt(c,0,t),h[l+12>>2]=o}t=h[u+128>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[l+8>>2],o=h[l+12>>2]),h[t+4>>2]=o,h[t>>2]=c,h[t+8>>2]=h[l+16>>2],h[l+24>>2]=0,h[l+28>>2]=0,h[l+16>>2]=0,h[l+20>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,Qe(l+8|0),n=((t=h[l+24>>2]+h[l+28>>2]|0)>>>0)/341|0,t=h[h[l+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,a=(t=h[l+28>>2])+1|0,h[l+28>>2]=a;a:if(!(t>>>0>a>>>0))for(v=u+16|0;;){if(c=h[l+12>>2],s=h[l+24>>2],t=h[c+((n=((t=s+(o=a-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,f=h[t+8>>2],n=h[t+4>>2],t=h[t>>2],h[l+28>>2]=o,1+(((c=(o=h[l+16>>2])-c|0)?b(c>>2,341)-1|0:0)-(a+s|0)|0)>>>0>=682&&(be(h[o-4>>2]),h[l+16>>2]=h[l+16>>2]-4),t>>>0>A>>>0)break a;if(s=0,(c=(0|n)==((o=h[u+12>>2])-1|0)?0:n+1|0)>>>0>=o>>>0)break a;E=(n=h[u+116>>2])+(o=b(f,12))|0;s:if(a=c<<2,w=o+h[u+128>>2]|0,g=h[u>>2]-h[a+h[w>>2]>>2]|0){o:{l:{c:{u:{if(t>>>0<=2){if(n=h[u+104>>2],h[n>>2]=c,o=1,(a=h[u+12>>2])>>>0>1)break u;break o}if(p[u+8>>2]>p[u+4>>2])break a;if(Bt((s=n)+(n=o+12|0)|0,h[E>>2],h[E+4>>2]),n=a+h[n+h[u+116>>2]>>2]|0,h[n>>2]=h[n>>2]+(1<<g-1),h[l+32>>2]=0,mi(v,31^y(t),l+32|0),E=f+1|0,(0|(s=(n=t)-(t=(t>>>1|0)-h[l+32>>2]|0)|0))!=(0|t)){if((0|(n=h[u+84>>2]))==h[u+76>>2])break c;g=h[n>>2],m=(_=h[u+88>>2])+1|0,h[u+88>>2]=m,g&=-2147483648>>>_;h:{if(32==(0|m)){if(h[u+88>>2]=0,h[u+84>>2]=n+4,g)break h;break c}if(!g)break c}n=s}else n=t;s=t;break l}for(;c=(a-1|0)==(0|c)?0:c+1|0,h[n+(o<<2)>>2]=c,(a=h[u+12>>2])>>>0>(o=o+1|0)>>>0;);break o}n=t}if(R=a,t=h[u+128>>2],a=h[(o=t+o|0)>>2],h[(g=R+a|0)>>2]=h[g>>2]+1,Bt(t+b(E,12)|0,a,h[o+4>>2]),s&&(a=h[l+28>>2]+h[l+24>>2]|0,o=h[l+12>>2],(0|a)==(0|((t=h[l+16>>2]-o|0)?b(t>>2,341)-1|0:0))&&(Qe(l+8|0),a=h[l+24>>2]+h[l+28>>2]|0,o=h[l+12>>2]),t=h[o+((t=(a>>>0)/341|0)<<2)>>2]+b(a-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=s,h[l+28>>2]=h[l+28>>2]+1),!n)break s;a=h[l+28>>2]+h[l+24>>2]|0,o=h[l+12>>2],(0|a)==(0|((t=h[l+16>>2]-o|0)?b(t>>2,341)-1|0:0))&&(Qe(l+8|0),a=h[l+24>>2]+h[l+28>>2]|0,o=h[l+12>>2]),t=h[o+((t=(a>>>0)/341|0)<<2)>>2]+b(a-b(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=n,h[l+28>>2]=h[l+28>>2]+1;break s}if(f=0,t)for(;;){if(o=h[u+92>>2],a){for(c=h[u+36>>2],P=h[u+104>>2],k=h[E>>2],S=h[w>>2],a=0;;){h[(h[(g=P+(a<<2)|0)>>2]<<2)+o>>2]=0,s=h[g>>2]<<2;o:if(n=h[u>>2]-h[s+S>>2]|0)if(s=o+s|0,(0|(M=32-(_=h[u+48>>2])|0))>=(0|n)){if((0|(m=h[u+44>>2]))==(0|c)){h[s>>2]=0;break o}if(h[s>>2]=h[m>>2]<<_>>>32-n,n=n+h[u+48>>2]|0,h[u+48>>2]=n,32!=(0|n))break o;h[u+48>>2]=0,h[u+44>>2]=m+4}else(0|(C=(m=h[u+44>>2])+4|0))!=(0|c)?(R=h[m>>2],h[u+44>>2]=C,M=n-M|0,h[u+48>>2]=M,h[s>>2]=h[m+4>>2]>>>32-M|R<<_>>>32-n):h[s>>2]=0;if(n=h[g>>2]<<2,h[(s=n+o|0)>>2]=h[s>>2]|h[n+k>>2],!((a=a+1|0)>>>0<p[u+12>>2]))break}o=h[u+92>>2]}if(h[l+32>>2]=h[o>>2],h[l+36>>2]=h[o+4>>2],h[l+40>>2]=h[o+8>>2],Ct(h[T>>2],l+32|0),h[u+8>>2]=h[u+8>>2]+1,(0|t)==(0|(f=f+1|0)))break s;a=h[u+12>>2]}}else{if(!t)break s;for(;;){if(n=h[E>>2],f=h[n+8>>2],g=h[n+4>>2],_=h[n>>2],n=h[T>>2],(a=h[n+4>>2])>>>0<(m=h[n+8>>2])>>>0)h[a+8>>2]=f,h[a+4>>2]=g,h[a>>2]=_,h[n+4>>2]=a+12;else{if((c=1+(w=(a-(o=h[n>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(P=(m=(m-o|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>P>>>0?c:P:357913941)>>>0>=357913942)break t;if(R=b(w,12),w=mr(m=b(c,12)),h[8+(c=R+w|0)>>2]=f,h[c+4>>2]=g,h[c>>2]=_,f=c+12|0,(0|a)!=(0|o))for(;a=a-12|0,h[(c=c-12|0)>>2]=h[a>>2],h[c+4>>2]=h[a+4>>2],h[c+8>>2]=h[a+8>>2],(0|a)!=(0|o););h[n+8>>2]=m+w,h[n+4>>2]=f,h[n>>2]=c,o&&be(o)}if(h[u+8>>2]=h[u+8>>2]+1,(0|t)==(0|(s=s+1|0)))break}}if(!(a=h[l+28>>2]))break}if(h[l+28>>2]=0,(c=(a=h[l+16>>2])-(t=h[l+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[l+12>>2]+4|0,h[l+12>>2]=t,(c=(a=h[l+16>>2])-t|0)>>>0>8;);switch(o=170,(c>>>2|0)-1|0){case 1:o=341;case 0:h[l+24>>2]=o}if((0|t)!=(0|a)){for(;be(h[t>>2]),(0|a)!=(0|(t=t+4|0)););(0|(t=h[l+16>>2]))!=(0|(n=h[l+12>>2]))&&(h[l+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[l+8>>2])&&be(t),I=l+48|0}Zt(u);break r;case 4:if(c=J(r+8|0,3),E=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(u=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(u>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=a+h[t>>2]|0,h[c>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(u=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,f=a,h[t+16>>2]=a,h[t+20>>2]=n,!(p[c>>2]>32)&&(a=h[t+12>>2],n=s,n=(s=u+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))&&(n=f+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[c+4>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,s&&(h[c+8>>2]=0,st(c+16|0,t)&&Tt(c+544|0,t)&&Tt(c+564|0,t)&&Tt(c+584|0,t)))))){if(T=h[c+4>>2],n=0,I=a=I-48|0,s=h[c+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=mr(t=s<<2),h[a+8>>2]=o,n=t+o|0,h[a+16>>2]=n,xt(o,0,t),h[a+12>>2]=n}if(t=h[c+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,be(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[c+12>>2],o=h[a+8>>2],n=h[a+12>>2]),h[t+4>>2]=n,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;l=mr(t=s<<2),h[a+8>>2]=l,o=t+l|0,h[a+16>>2]=o,xt(l,0,t),h[a+12>>2]=o}t=h[c+640>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,l=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=l,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,Qe(a+8|0),n=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;a:if(!(t>>>0>s>>>0))for(;;){if(A=h[a+12>>2],l=h[a+24>>2],t=h[A+((n=((t=l+(u=s-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,f=h[t+8>>2],o=h[t+4>>2],n=h[t>>2],h[a+28>>2]=u,1+(((u=(t=h[a+16>>2])-A|0)?b(u>>2,341)-1|0:0)-(s+l|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[a+16>>2]=h[a+16>>2]-4),n>>>0>T>>>0)break a;if((l=(0|o)==((t=h[c+12>>2])-1|0)?0:o+1|0)>>>0>=t>>>0)break a;g=(A=b(f,12))+h[c+640>>2]|0,u=A+h[c+628>>2]|0;s:{o:if(_=l<<2,s=h[c>>2]-h[_+h[g>>2]>>2]|0){l:{c:{u:{h:{if(n>>>0<=2){if(t=h[c+616>>2],h[t>>2]=l,o=1,(s=h[c+12>>2])>>>0>1)break h;break l}if(p[c+8>>2]>p[c+4>>2])break a;if((0|(o=(t=h[c+628>>2])+(g=b(m=f+1|0,12))|0))!=(0|u)&&(Bt(o,h[u>>2],h[u+4>>2]),t=h[c+628>>2]),t=_+h[t+g>>2]|0,h[t>>2]=h[t>>2]+(1<<s-1),o=0,s=0,t=31^y(n))for(;o=Gi(16+(c+(s<<4)|0)|0)|o<<1,(0|t)!=(0|(s=s+1|0)););if((0|(s=n-(t=(n>>>1|0)-o|0)|0))!=(0|t)){if((0|(n=h[c+596>>2]))==h[c+588>>2])break u;o=h[n>>2],v=(u=h[c+600>>2])+1|0,h[c+600>>2]=v,o&=-2147483648>>>u;d:{if(32==(0|v)){if(h[c+600>>2]=0,h[c+596>>2]=n+4,o)break d;break u}if(!o)break u}n=s}else n=t;s=t;break c}for(;l=(s-1|0)==(0|l)?0:l+1|0,h[t+(o<<2)>>2]=l,(s=h[c+12>>2])>>>0>(o=o+1|0)>>>0;);break l}n=t}if(t=h[c+640>>2],u=h[(o=t+A|0)>>2],h[(A=u+_|0)>>2]=h[A>>2]+1,Bt(t+g|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?b(u>>2,341)-1|0:0))?(Qe(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=l,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!n)break o;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+b(s-b(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=l,h[t>>2]=n,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break s}if(t=0,n)for(;;){if(o=h[c+604>>2],s){for(A=h[c+548>>2],w=h[c+616>>2],P=h[u>>2],k=h[g>>2],s=0;;){h[(h[(_=w+(s<<2)|0)>>2]<<2)+o>>2]=0,f=h[_>>2]<<2;l:if(l=h[c>>2]-h[f+k>>2]|0)if(f=o+f|0,(0|(S=32-(m=h[c+560>>2])|0))>=(0|l)){if((0|(v=h[c+556>>2]))==(0|A)){h[f>>2]=0;break l}if(h[f>>2]=h[v>>2]<<m>>>32-l,l=l+h[c+560>>2]|0,h[c+560>>2]=l,32!=(0|l))break l;h[c+560>>2]=0,h[c+556>>2]=v+4}else(0|(M=(v=h[c+556>>2])+4|0))!=(0|A)?(C=h[v>>2],h[c+556>>2]=M,S=l-S|0,h[c+560>>2]=S,h[f>>2]=h[v+4>>2]>>>32-S|C<<m>>>32-l):h[f>>2]=0;if(l=h[_>>2]<<2,h[(f=l+o|0)>>2]=h[f>>2]|h[l+P>>2],!((s=s+1|0)>>>0<p[c+12>>2]))break}o=h[c+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[E>>2],a+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(t=t+1|0)))break o;s=h[c+12>>2]}}else{if(t=0,!n)break o;for(;;){if(s=h[u>>2],A=h[s+8>>2],g=h[s+4>>2],_=h[s>>2],o=h[E>>2],(s=h[o+4>>2])>>>0<(m=h[o+8>>2])>>>0)h[s+8>>2]=A,h[s+4>>2]=g,h[s>>2]=_,h[o+4>>2]=s+12;else{if((l=1+(v=(s-(f=h[o>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(l=m>>>0<178956970?l>>>0>w>>>0?l:w:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(l,12)),h[8+(l=R+v|0)>>2]=A,h[l+4>>2]=g,h[l>>2]=_,A=l+12|0,(0|s)!=(0|f))for(;s=s-12|0,h[(l=l-12|0)>>2]=h[s>>2],h[l+4>>2]=h[s+4>>2],h[l+8>>2]=h[s+8>>2],(0|s)!=(0|f););h[o+8>>2]=m+v,h[o+4>>2]=A,h[o>>2]=l,f&&be(f)}if(h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(t=t+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(l=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(l=(s=h[a+16>>2])-t|0)>>>0>8;);switch(n=170,(l>>>2|0)-1|0){case 1:n=341;case 0:h[a+24>>2]=n}if((0|t)!=(0|s)){for(;be(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(n=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&be(t),I=a+48|0}qt(c);break r;case 5:if(l=J(r+8|0,3),T=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(u=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(u>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=a+h[t>>2]|0,h[l>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(u=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,f=a,h[t+16>>2]=a,h[t+20>>2]=n,!(p[l>>2]>32)&&(a=h[t+12>>2],n=s,n=(s=u+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))&&(n=f+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[l+4>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,s&&(h[l+8>>2]=0,st(l+16|0,t)&&Tt(l+544|0,t)&&Tt(l+564|0,t)&&Tt(l+584|0,t)))))){if(A=h[l+4>>2],n=0,I=a=I-48|0,s=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=mr(t=s<<2),h[a+8>>2]=o,n=t+o|0,h[a+16>>2]=n,xt(o,0,t),h[a+12>>2]=n}if(t=h[l+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,be(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[l+12>>2],o=h[a+8>>2],n=h[a+12>>2]),h[t+4>>2]=n,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;c=mr(t=s<<2),h[a+8>>2]=c,o=t+c|0,h[a+16>>2]=o,xt(c,0,t),h[a+12>>2]=o}t=h[l+640>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,Qe(a+8|0),n=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;a:if(!(t>>>0>s>>>0))for(;;){if(u=h[a+12>>2],o=h[a+24>>2],t=h[u+((n=((t=o+(c=s-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(n,341)|0,12)|0,E=h[t+8>>2],n=h[t+4>>2],t=h[t>>2],h[a+28>>2]=c,1+(((u=(c=h[a+16>>2])-u|0)?b(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(be(h[c-4>>2]),h[a+16>>2]=h[a+16>>2]-4),t>>>0>A>>>0)break a;if((c=(0|n)==((s=h[l+12>>2])-1|0)?0:n+1|0)>>>0>=s>>>0)break a;f=(n=h[l+628>>2])+(u=b(E,12))|0;s:{o:if(g=c<<2,v=u+h[l+640>>2]|0,s=h[l>>2]-h[g+h[v>>2]>>2]|0){l:{c:{u:{h:{if(t>>>0<=2){if(n=h[l+616>>2],h[n>>2]=c,o=1,(s=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;if(Bt((o=n)+(n=u+12|0)|0,h[f>>2],h[f+4>>2]),n=g+h[n+h[l+628>>2]>>2]|0,h[n>>2]=h[n>>2]+(1<<s-1),o=0,s=0,n=31^y(t))for(;o=Gi(16+(l+(s<<4)|0)|0)|o<<1,(0|n)!=(0|(s=s+1|0)););if(f=E+1|0,(0|(s=(n=t)-(t=(t>>>1|0)-o|0)|0))!=(0|t)){if((0|(n=h[l+596>>2]))==h[l+588>>2])break u;o=h[n>>2],m=(_=h[l+600>>2])+1|0,h[l+600>>2]=m,o&=-2147483648>>>_;d:{if(32==(0|m)){if(h[l+600>>2]=0,h[l+596>>2]=n+4,o)break d;break u}if(!o)break u}n=s}else n=t;s=t;break c}for(;c=(s-1|0)==(0|c)?0:c+1|0,h[n+(o<<2)>>2]=c,(s=h[l+12>>2])>>>0>(o=o+1|0)>>>0;);break l}n=t}if(t=h[l+640>>2],u=h[(o=t+u|0)>>2],h[(g=u+g|0)>>2]=h[g>>2]+1,Bt(t+b(f,12)|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!n)break o;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+b(s-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=n,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break s}if(u=0,t)for(;;){if(o=h[l+604>>2],s){for(E=h[l+548>>2],w=h[l+616>>2],P=h[f>>2],k=h[v>>2],s=0;;){h[(h[(g=w+(s<<2)|0)>>2]<<2)+o>>2]=0,c=h[g>>2]<<2;l:if(n=h[l>>2]-h[c+k>>2]|0)if(c=o+c|0,(0|(S=32-(_=h[l+560>>2])|0))>=(0|n)){if((0|(m=h[l+556>>2]))==(0|E)){h[c>>2]=0;break l}if(h[c>>2]=h[m>>2]<<_>>>32-n,n=n+h[l+560>>2]|0,h[l+560>>2]=n,32!=(0|n))break l;h[l+560>>2]=0,h[l+556>>2]=m+4}else(0|(M=(m=h[l+556>>2])+4|0))!=(0|E)?(C=h[m>>2],h[l+556>>2]=M,S=n-S|0,h[l+560>>2]=S,h[c>>2]=h[m+4>>2]>>>32-S|C<<_>>>32-n):h[c>>2]=0;if(n=h[g>>2]<<2,h[(c=n+o|0)>>2]=h[c>>2]|h[n+P>>2],!((s=s+1|0)>>>0<p[l+12>>2]))break}o=h[l+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[T>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(u=u+1|0)))break o;s=h[l+12>>2]}}else{if(u=0,!t)break o;for(;;){if(n=h[f>>2],E=h[n+8>>2],g=h[n+4>>2],_=h[n>>2],n=h[T>>2],(s=h[n+4>>2])>>>0<(m=h[n+8>>2])>>>0)h[s+8>>2]=E,h[s+4>>2]=g,h[s>>2]=_,h[n+4>>2]=s+12;else{if((c=1+(v=(s-(o=h[n>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-o|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(c,12)),h[8+(c=R+v|0)>>2]=E,h[c+4>>2]=g,h[c>>2]=_,E=c+12|0,(0|o)!=(0|s))for(;s=s-12|0,h[(c=c-12|0)>>2]=h[s>>2],h[c+4>>2]=h[s+4>>2],h[c+8>>2]=h[s+8>>2],(0|o)!=(0|s););h[n+8>>2]=m+v,h[n+4>>2]=E,h[n>>2]=c,o&&be(o)}if(h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(u=u+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(c=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(s=h[a+16>>2])-t|0)>>>0>8;);switch(o=170,(c>>>2|0)-1|0){case 1:o=341;case 0:h[a+24>>2]=o}if((0|t)!=(0|s)){for(;be(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(n=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&be(t),I=a+48|0}qt(l);break r;case 6:break n;default:break i}if(c=J(r+8|0,3),E=r+664|0,s=h[t+12>>2],n=h[t+20>>2],n=(u=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(u>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s))&&(n=a+h[t>>2]|0,h[c>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,s=n=h[t+20>>2],n=(a=(u=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,f=a,h[t+16>>2]=a,h[t+20>>2]=n,!(p[c>>2]>32)&&(a=h[t+12>>2],n=s,n=(s=u+8|0)>>>0<8?n+1|0:n,!(s>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))&&(n=f+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[c+4>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,s&&(h[c+8>>2]=0,st(c+16|0,t)&&Tt(c+544|0,t)&&Tt(c+564|0,t)&&Tt(c+584|0,t)))))){if(T=h[c+4>>2],n=0,I=a=I-48|0,s=h[c+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=mr(t=s<<2),h[a+8>>2]=o,n=t+o|0,h[a+16>>2]=n,xt(o,0,t),h[a+12>>2]=n}if(t=h[c+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,be(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[c+12>>2],o=h[a+8>>2],n=h[a+12>>2]),h[t+4>>2]=n,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;l=mr(t=s<<2),h[a+8>>2]=l,o=t+l|0,h[a+16>>2]=o,xt(l,0,t),h[a+12>>2]=o}t=h[c+640>>2],(n=h[t>>2])&&(h[t+4>>2]=n,be(n),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,l=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=l,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,Qe(a+8|0),n=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(n<<2)>>2]+b(t-b(n,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;n:if(!(t>>>0>s>>>0))for(;;){if(u=h[a+12>>2],t=h[a+24>>2],n=h[u+((l=((n=t+(o=s-1|0)|0)>>>0)/341|0)<<2)>>2]+b(n-b(l,341)|0,12)|0,f=h[n+8>>2],n=h[n>>2],h[a+28>>2]=o,1+(((l=(o=h[a+16>>2])-u|0)?b(l>>2,341)-1|0:0)-(t+s|0)|0)>>>0>=682&&(be(h[o-4>>2]),h[a+16>>2]=h[a+16>>2]-4),n>>>0>T>>>0)break n;if(t=h[c+628>>2],(l=ft(c,n,g=(A=b(f,12))+h[c+640>>2]|0))>>>0>=p[c+12>>2])break n;u=t+A|0;a:{s:if(_=l<<2,s=h[c>>2]-h[_+h[g>>2]>>2]|0){o:{l:{c:{u:{if(n>>>0<=2){if(t=h[c+616>>2],h[t>>2]=l,o=1,(s=h[c+12>>2])>>>0>1)break u;break o}if(p[c+8>>2]>p[c+4>>2])break n;if((0|(o=(t=h[c+628>>2])+(g=b(m=f+1|0,12))|0))!=(0|u)&&(Bt(o,h[u>>2],h[u+4>>2]),t=h[c+628>>2]),t=_+h[t+g>>2]|0,h[t>>2]=h[t>>2]+(1<<s-1),o=0,s=0,t=31^y(n))for(;o=Gi(16+(c+(s<<4)|0)|0)|o<<1,(0|t)!=(0|(s=s+1|0)););if((0|(s=n-(t=(n>>>1|0)-o|0)|0))!=(0|t)){if((0|(n=h[c+596>>2]))==h[c+588>>2])break c;o=h[n>>2],v=(u=h[c+600>>2])+1|0,h[c+600>>2]=v,o&=-2147483648>>>u;h:{if(32==(0|v)){if(h[c+600>>2]=0,h[c+596>>2]=n+4,o)break h;break c}if(!o)break c}n=s}else n=t;s=t;break l}for(;l=(s-1|0)==(0|l)?0:l+1|0,h[t+(o<<2)>>2]=l,(s=h[c+12>>2])>>>0>(o=o+1|0)>>>0;);break o}n=t}if(t=h[c+640>>2],u=h[(o=t+A|0)>>2],h[(A=u+_|0)>>2]=h[A>>2]+1,Bt(t+g|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?b(u>>2,341)-1|0:0))?(Qe(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+b(o-b(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=l,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!n)break s;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?b(t>>2,341)-1|0:0))&&(Qe(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+b(s-b(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=l,h[t>>2]=n,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break a}if(t=0,n)for(;;){if(o=h[c+604>>2],s){for(A=h[c+548>>2],w=h[c+616>>2],P=h[u>>2],k=h[g>>2],s=0;;){h[(h[(_=w+(s<<2)|0)>>2]<<2)+o>>2]=0,f=h[_>>2]<<2;o:if(l=h[c>>2]-h[f+k>>2]|0)if(f=o+f|0,(0|(S=32-(m=h[c+560>>2])|0))>=(0|l)){if((0|(v=h[c+556>>2]))==(0|A)){h[f>>2]=0;break o}if(h[f>>2]=h[v>>2]<<m>>>32-l,l=l+h[c+560>>2]|0,h[c+560>>2]=l,32!=(0|l))break o;h[c+560>>2]=0,h[c+556>>2]=v+4}else(0|(M=(v=h[c+556>>2])+4|0))!=(0|A)?(C=h[v>>2],h[c+556>>2]=M,S=l-S|0,h[c+560>>2]=S,h[f>>2]=h[v+4>>2]>>>32-S|C<<m>>>32-l):h[f>>2]=0;if(l=h[_>>2]<<2,h[(f=l+o|0)>>2]=h[f>>2]|h[l+P>>2],!((s=s+1|0)>>>0<p[c+12>>2]))break}o=h[c+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[E>>2],a+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(t=t+1|0)))break s;s=h[c+12>>2]}}else{if(t=0,!n)break s;for(;;){if(s=h[u>>2],A=h[s+8>>2],g=h[s+4>>2],_=h[s>>2],o=h[E>>2],(s=h[o+4>>2])>>>0<(m=h[o+8>>2])>>>0)h[s+8>>2]=A,h[s+4>>2]=g,h[s>>2]=_,h[o+4>>2]=s+12;else{if((l=1+(v=(s-(f=h[o>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(l=m>>>0<178956970?l>>>0>w>>>0?l:w:357913941)>>>0>=357913942)break t;if(R=b(v,12),v=mr(m=b(l,12)),h[8+(l=R+v|0)>>2]=A,h[l+4>>2]=g,h[l>>2]=_,A=l+12|0,(0|s)!=(0|f))for(;s=s-12|0,h[(l=l-12|0)>>2]=h[s>>2],h[l+4>>2]=h[s+4>>2],h[l+8>>2]=h[s+8>>2],(0|s)!=(0|f););h[o+8>>2]=m+v,h[o+4>>2]=A,h[o>>2]=l,f&&be(f)}if(h[c+8>>2]=h[c+8>>2]+1,(0|n)==(0|(t=t+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(l=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;be(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(l=(s=h[a+16>>2])-t|0)>>>0>8;);switch(n=170,(l>>>2|0)-1|0){case 1:n=341;case 0:h[a+24>>2]=n}if((0|t)!=(0|s)){for(;be(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(n=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-n|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&be(t),I=a+48|0}qt(c)}o=h[e+12>>2]==((h[i+4>>2]-h[i>>2]|0)/12|0)}return I=r+672|0,o}Zi(1336),x()}bn(),x()}function V(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,x=0,M=0,R=0,P=0;if(!e)return 1;e:if(!((0|(n=h[i+20>>2]))>=(0|(o=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|o))){o=d[s+h[i>>2]|0],n=(s=s+1|0)?n:n+1|0,h[i+16>>2]=s,h[i+20>>2]=n;t:switch(0|o){case 0:m=e,l=t,s=r,e=0,r=0,I=y=I+-64|0,h[y+56>>2]=0,h[y+48>>2]=0,h[y+52>>2]=0,h[y+40>>2]=0,h[y+44>>2]=0,h[y+32>>2]=0,h[y+36>>2]=0,h[y+24>>2]=0,h[y+28>>2]=0,h[y+16>>2]=0,h[y+20>>2]=0,h[y+8>>2]=0,h[y+12>>2]=0;i:if(Re(y+8|0,i)&&!(!He(y+8|0,i)|(h[y+20>>2]?0:m))){if(Ut(i,0,0),m)for(A=l<<2,E=h[y+36>>2],S=h[y+48>>2],T=h[y+24>>2];;){r:if(!((v=h[y+56>>2])>>>0>16383))for(e=h[y+52>>2];;){if((0|e)<=0)break r;if(e=e-1|0,h[y+52>>2]=e,v=d[e+S|0]|v<<8,h[y+56>>2]=v,!(v>>>0<16384))break}if(t=E+((_=h[((e=4095&v)<<2)+T>>2])<<3)|0,h[y+56>>2]=(b(h[t>>2],v>>>12|0)+e|0)-h[t+4>>2],!((0|l)<=0)){if(e=0,!d[i+36|0]|_>>>0>32)break i;if(_){for(R=-2&_,P=1&_,o=r+l|0,t=h[i+32>>2];;){if(c=h[i+28>>2],u=h[i+24>>2],v=0,e=t,n=0,w=0,1!=(0|_))for(;(g=u+(e>>>3|0)|0)>>>0>=c>>>0?g=0:(g=d[0|g],t=e+1|0,h[i+32>>2]=t,g=g>>>(7&e)&1,e=t),g=g<<v|n,n=0,(x=u+(e>>>3|0)|0)>>>0<c>>>0&&(n=d[0|x],t=e+1|0,h[i+32>>2]=t,n=n>>>(7&e)&1,e=t),x=1|v,v=v+2|0,n=g|n<<x,(0|R)!=(0|(w=w+2|0)););if(g=s+(r<<2)|0,P&&((w=c)>>>0>(c=u+(e>>>3|0)|0)>>>0?(c=d[0|c],t=e+1|0,h[i+32>>2]=t,e=c>>>(7&e)&1):e=0,n|=e<<v),h[g>>2]=n,(0|o)==(0|(r=r+1|0)))break}r=o}else xt(s+(r<<2)|0,0,A),r=r+l|0}if(!(m>>>0>(M=l+M|0)>>>0))break}a[i+36|0]=0,t=h[i+20>>2],n=0,e=(r=(7&(n=(e=h[i+32>>2]+7|0)>>>0<7?1:n))<<29|e>>>3)+h[i+16>>2]|0,n=(n>>>3|0)+t|0,h[i+16>>2]=e,h[i+20>>2]=e>>>0<r>>>0?n+1|0:n,e=1}return(t=h[y+36>>2])&&(h[y+40>>2]=t,be(t)),(t=h[y+24>>2])&&(h[y+28>>2]=t,be(t)),(t=h[y+8>>2])&&(h[y+12>>2]=t,be(t)),I=y- -64|0,e;case 1:break t;default:break e}t=0;t:if(!((0|(n=h[i+20>>2]))>=(0|(o=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|o))){o=d[s+h[i>>2]|0],n=(s=s+1|0)?n:n+1|0,h[i+16>>2]=s,h[i+20>>2]=n;i:switch(o-1|0){case 8:o=e,y=r,I=s=I+-64|0,h[s+56>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,_=s+8|0;r:{n:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],n=h[i+20>>2],(0|e)<=(0|(n=(r=(t=h[i+16>>2])+4|0)>>>0<4?n+1|0:n))&r>>>0>p[i+8>>2]|(0|e)<(0|n))break n;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[_+12>>2]=u,n=h[i+20>>2],n=(e=h[i+16>>2]+4|0)>>>0<4?n+1|0:n,h[i+16>>2]=e,h[i+20>>2]=n}else{if(!yi(1,_+12|0,i))break n;u=h[_+12>>2]}if(t=h[_>>2],(e=h[_+4>>2]-t>>2)>>>0<u>>>0?(ei(_,u-e|0),u=h[_+12>>2]):e>>>0<=u>>>0||(h[_+4>>2]=t+(u<<2)),r=1,!u)break r;for(E=h[i+8>>2],g=h[i+12>>2],S=h[_>>2],t=0;;){if(r=0,(0|g)<=(0|(n=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|n)>(0|g))break r;r=h[i>>2],A=d[r+e|0],n=(e=e+1|0)?n:n+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=n,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(r=0,(e=e+t|0)>>>0>=u>>>0)break r;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|n)>=(0|g)&l>>>0>=E>>>0|(0|n)>(0|g))break n;if(u=d[r+l|0],n=(l=l+1|0)?n:n+1|0,h[i+16>>2]=l,h[i+20>>2]=n,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[_+12>>2])>>>0))break}if(l=_+16|0,A=h[_>>2],t=h[_+16>>2],(e=h[_+20>>2]-t|0)>>>0<=32767?ei(l,8192-(e>>>2|0)|0):32768!=(0|e)&&(h[_+20>>2]=t+32768),t=h[(e=_+28|0)>>2],(r=h[_+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-r|0),t=h[e>>2];else if(r>>>0>u>>>0&&(h[_+32>>2]=(u<<3)+t),!u)break n;for(c=0,r=0;;){if(_=h[(n=A+(c<<2)|0)>>2],e=r,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=_,(r=(n=h[n>>2])+e|0)>>>0>8192)break n;if(!(e>>>0>=r>>>0)){if(_=h[l>>2],g=0,E=7&n)for(;h[_+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(n-1>>>0<=6))for(;h[(n=_+(e<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|r)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=8192==(0|r)}r=m}if(!(!r|(h[s+20>>2]?0:o))){r=0,I=_=I-16|0;r:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],n=h[i+20>>2],n=(l=(m=h[i+16>>2])+8|0)>>>0<8?n+1|0:n,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|n)|(0|e)<(0|n))break r;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=n}else{if(!hi(1,_+8|0,i))break r;l=h[i+16>>2],n=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[_+8>>2],m=h[_+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+n|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(n=n+m|0,n=(t=e+l|0)>>>0<e>>>0?n+1|0:n,h[i+16>>2]=t,h[i+20>>2]=n,(0|e)<=0))){t=l+h[i>>2]|0,h[s+48>>2]=t;n:if((l=d[0|(n=(i=e-1|0)+t|0)])>>>0<=63)h[s+52>>2]=i,e=63&d[0|n];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break r;h[s+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break n;case 1:if(e>>>0<3)break r;h[s+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break n}h[s+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+32768|0,h[s+56>>2]=e,r=e>>>0<8388608}}if(I=_+16|0,r)if(o)for(t=h[s+36>>2],i=h[s+48>>2],r=h[s+24>>2],e=h[s+56>>2];;){r:if(!(e>>>0>32767))for(v=h[s+52>>2];;){if((0|v)<=0)break r;if(v=v-1|0,h[s+52>>2]=v,e=d[i+v|0]|e<<8,h[s+56>>2]=e,!(e>>>0<32768))break}if(l=h[r+((n=8191&e)<<2)>>2],e=(b(h[(v=t+(l<<3)|0)>>2],e>>>13|0)+n|0)-h[v+4>>2]|0,h[s+56>>2]=e,h[y+(w<<2)>>2]=l,v=1,(0|o)==(0|(w=w+1|0)))break}else v=1}(e=h[s+36>>2])&&(h[s+40>>2]=e,be(e)),(e=h[s+24>>2])&&(h[s+28>>2]=e,be(e)),(e=h[s+8>>2])&&(h[s+12>>2]=e,be(e)),I=s- -64|0,t=v;break t;case 9:y=e,_=r,I=o=I+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,s=o+8|0;r:{n:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],n=h[i+20>>2],(0|e)<=(0|(n=(r=(t=h[i+16>>2])+4|0)>>>0<4?n+1|0:n))&r>>>0>p[i+8>>2]|(0|e)<(0|n))break n;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[s+12>>2]=u,n=h[i+20>>2],n=(e=h[i+16>>2]+4|0)>>>0<4?n+1|0:n,h[i+16>>2]=e,h[i+20>>2]=n}else{if(!yi(1,s+12|0,i))break n;u=h[s+12>>2]}if(t=h[s>>2],(e=h[s+4>>2]-t>>2)>>>0<u>>>0?(ei(s,u-e|0),u=h[s+12>>2]):e>>>0<=u>>>0||(h[s+4>>2]=t+(u<<2)),r=1,!u)break r;for(E=h[i+8>>2],g=h[i+12>>2],S=h[s>>2],t=0;;){if(r=0,(0|g)<=(0|(n=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|n)>(0|g))break r;r=h[i>>2],A=d[r+e|0],n=(e=e+1|0)?n:n+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=n,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(r=0,(e=e+t|0)>>>0>=u>>>0)break r;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|n)>=(0|g)&l>>>0>=E>>>0|(0|n)>(0|g))break n;if(u=d[r+l|0],n=(l=l+1|0)?n:n+1|0,h[i+16>>2]=l,h[i+20>>2]=n,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[s+12>>2])>>>0))break}if(l=s+16|0,A=h[s>>2],t=h[s+16>>2],(e=h[s+20>>2]-t|0)>>>0<=131071?ei(l,32768-(e>>>2|0)|0):131072!=(0|e)&&(h[s+20>>2]=t+131072),t=h[(e=s+28|0)>>2],(r=h[s+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-r|0),t=h[e>>2];else if(r>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+t),!u)break n;for(c=0,r=0;;){if(s=h[(n=A+(c<<2)|0)>>2],e=r,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(r=(n=h[n>>2])+e|0)>>>0>32768)break n;if(!(e>>>0>=r>>>0)){if(s=h[l>>2],g=0,E=7&n)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(n-1>>>0<=6))for(;h[(n=s+(e<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|r)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=32768==(0|r)}r=m}if(!(!r|(h[o+20>>2]?0:y))){r=0,I=u=I-16|0;r:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],n=h[i+20>>2],n=(l=(m=h[i+16>>2])+8|0)>>>0<8?n+1|0:n,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|n)|(0|e)<(0|n))break r;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=n}else{if(!hi(1,u+8|0,i))break r;l=h[i+16>>2],n=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[u+8>>2],m=h[u+12>>2]}if(s=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+n|0)|0))==(0|m)&e>>>0>s>>>0|t>>>0<m>>>0||(s=n+m|0,s=(t=e+l|0)>>>0<e>>>0?s+1|0:s,h[i+16>>2]=t,h[i+20>>2]=s,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;n:if((l=d[0|(n=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|n];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break r;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break n;case 1:if(e>>>0<3)break r;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break n}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+131072|0,h[o+56>>2]=e,r=e>>>0<33554432}}if(I=u+16|0,r)if(y)for(t=h[o+36>>2],i=h[o+48>>2],r=h[o+24>>2],e=h[o+56>>2];;){r:if(!(e>>>0>131071))for(v=h[o+52>>2];;){if((0|v)<=0)break r;if(v=v-1|0,h[o+52>>2]=v,e=d[i+v|0]|e<<8,h[o+56>>2]=e,!(e>>>0<131072))break}if(l=h[r+((n=32767&e)<<2)>>2],e=(b(h[(v=t+(l<<3)|0)>>2],e>>>15|0)+n|0)-h[v+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,v=1,(0|y)==(0|(w=w+1|0)))break}else v=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,be(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,be(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,be(e)),I=o- -64|0,t=v;break t;case 10:y=e,_=r,I=o=I+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,g=o+8|0;r:{n:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],n=h[i+20>>2],(0|e)<=(0|(n=(r=(t=h[i+16>>2])+4|0)>>>0<4?n+1|0:n))&r>>>0>p[i+8>>2]|(0|e)<(0|n))break n;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[g+12>>2]=u,n=h[i+20>>2],n=(e=h[i+16>>2]+4|0)>>>0<4?n+1|0:n,h[i+16>>2]=e,h[i+20>>2]=n}else{if(!yi(1,g+12|0,i))break n;u=h[g+12>>2]}if(t=h[g>>2],(e=h[g+4>>2]-t>>2)>>>0<u>>>0?(ei(g,u-e|0),u=h[g+12>>2]):e>>>0<=u>>>0||(h[g+4>>2]=t+(u<<2)),r=1,!u)break r;for(E=h[i+8>>2],A=h[i+12>>2],S=h[g>>2],t=0;;){if(r=0,(0|A)<=(0|(n=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|n)>(0|A))break r;r=h[i>>2],s=d[r+e|0],n=(e=e+1|0)?n:n+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=n,e=s>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&s)){case 0:break s;case 3:break l;default:break o}if(r=0,(e=e+t|0)>>>0>=u>>>0)break r;xt(S+(t<<2)|0,0,4+(252&s)|0),t=e;break a}for(;;){if((0|n)>=(0|A)&l>>>0>=E>>>0|(0|n)>(0|A))break n;if(u=d[r+l|0],s=n,s=(n=l+1|0)?s:s+1|0,l=n,h[i+16>>2]=n,n=s,h[i+20>>2]=n,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[g+12>>2])>>>0))break}if(l=g+16|0,A=h[g>>2],t=h[g+16>>2],(e=h[g+20>>2]-t|0)>>>0<=262143?ei(l,65536-(e>>>2|0)|0):262144!=(0|e)&&(h[g+20>>2]=t+262144),t=h[(e=g+28|0)>>2],(r=h[g+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-r|0),t=h[e>>2];else if(r>>>0>u>>>0&&(h[g+32>>2]=(u<<3)+t),!u)break n;for(c=0,r=0;;){if(s=h[(n=A+(c<<2)|0)>>2],e=r,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(r=(n=h[n>>2])+e|0)>>>0>65536)break n;if(!(e>>>0>=r>>>0)){if(s=h[l>>2],g=0,E=7&n)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(n-1>>>0<=6))for(;h[(n=s+(e<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|r)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=65536==(0|r)}r=m}if(!(!r|(h[o+20>>2]?0:y))){r=0,I=s=I-16|0;r:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],n=h[i+20>>2],n=(l=(m=h[i+16>>2])+8|0)>>>0<8?n+1|0:n,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|n)|(0|e)<(0|n))break r;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=n}else{if(!hi(1,s+8|0,i))break r;l=h[i+16>>2],n=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[s+8>>2],m=h[s+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+n|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(n=n+m|0,n=(t=e+l|0)>>>0<e>>>0?n+1|0:n,h[i+16>>2]=t,h[i+20>>2]=n,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;n:if((l=d[0|(n=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|n];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break r;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break n;case 1:if(e>>>0<3)break r;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break n}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+262144|0,h[o+56>>2]=e,r=e>>>0<67108864}}if(I=s+16|0,r)if(y)for(t=h[o+36>>2],i=h[o+48>>2],r=h[o+24>>2],e=h[o+56>>2];;){r:if(!(e>>>0>262143))for(v=h[o+52>>2];;){if((0|v)<=0)break r;if(v=v-1|0,h[o+52>>2]=v,e=d[i+v|0]|e<<8,h[o+56>>2]=e,!(e>>>0<262144))break}if(l=h[r+((n=65535&e)<<2)>>2],e=(b(h[(v=t+(l<<3)|0)>>2],e>>>16|0)+n|0)-h[v+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,v=1,(0|y)==(0|(w=w+1|0)))break}else v=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,be(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,be(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,be(e)),I=o- -64|0,t=v;break t;case 11:o=e,y=r,I=s=I+-64|0,h[s+56>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,_=s+8|0;r:{n:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],n=h[i+20>>2],(0|e)<=(0|(n=(r=(t=h[i+16>>2])+4|0)>>>0<4?n+1|0:n))&r>>>0>p[i+8>>2]|(0|e)<(0|n))break n;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[_+12>>2]=u,n=h[i+20>>2],n=(e=h[i+16>>2]+4|0)>>>0<4?n+1|0:n,h[i+16>>2]=e,h[i+20>>2]=n}else{if(!yi(1,_+12|0,i))break n;u=h[_+12>>2]}if(t=h[_>>2],(e=h[_+4>>2]-t>>2)>>>0<u>>>0?(ei(_,u-e|0),u=h[_+12>>2]):e>>>0<=u>>>0||(h[_+4>>2]=t+(u<<2)),r=1,!u)break r;for(E=h[i+8>>2],g=h[i+12>>2],S=h[_>>2],t=0;;){if(r=0,(0|g)<=(0|(n=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|n)>(0|g))break r;r=h[i>>2],A=d[r+e|0],n=(e=e+1|0)?n:n+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=n,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(r=0,(e=e+t|0)>>>0>=u>>>0)break r;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|n)>=(0|g)&l>>>0>=E>>>0|(0|n)>(0|g))break n;if(u=d[r+l|0],n=(l=l+1|0)?n:n+1|0,h[i+16>>2]=l,h[i+20>>2]=n,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[_+12>>2])>>>0))break}if(l=_+16|0,A=h[_>>2],t=h[_+16>>2],(e=h[_+20>>2]-t|0)>>>0<=1048575?ei(l,262144-(e>>>2|0)|0):1048576!=(0|e)&&(h[_+20>>2]=t- -1048576),t=h[(e=_+28|0)>>2],(r=h[_+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-r|0),t=h[e>>2];else if(r>>>0>u>>>0&&(h[_+32>>2]=(u<<3)+t),!u)break n;for(c=0,r=0;;){if(_=h[(n=A+(c<<2)|0)>>2],e=r,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=_,(r=(n=h[n>>2])+e|0)>>>0>262144)break n;if(!(e>>>0>=r>>>0)){if(_=h[l>>2],g=0,E=7&n)for(;h[_+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(n-1>>>0<=6))for(;h[(n=_+(e<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|r)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=262144==(0|r)}r=m}if(!(!r|(h[s+20>>2]?0:o))){r=0,I=_=I-16|0;r:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],n=h[i+20>>2],n=(l=(m=h[i+16>>2])+8|0)>>>0<8?n+1|0:n,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|n)|(0|e)<(0|n))break r;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=n}else{if(!hi(1,_+8|0,i))break r;l=h[i+16>>2],n=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[_+8>>2],m=h[_+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+n|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(n=n+m|0,n=(t=e+l|0)>>>0<e>>>0?n+1|0:n,h[i+16>>2]=t,h[i+20>>2]=n,(0|e)<=0))){t=l+h[i>>2]|0,h[s+48>>2]=t;n:if((l=d[0|(n=(i=e-1|0)+t|0)])>>>0<=63)h[s+52>>2]=i,e=63&d[0|n];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break r;h[s+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break n;case 1:if(e>>>0<3)break r;h[s+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break n}h[s+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e- -1048576|0,h[s+56>>2]=e,r=e>>>0<268435456}}if(I=_+16|0,r)if(o)for(t=h[s+36>>2],i=h[s+48>>2],r=h[s+24>>2],e=h[s+56>>2];;){r:if(!(e>>>0>1048575))for(v=h[s+52>>2];;){if((0|v)<=0)break r;if(v=v-1|0,h[s+52>>2]=v,e=d[i+v|0]|e<<8,h[s+56>>2]=e,!(e>>>0<1048576))break}if(l=h[r+((n=262143&e)<<2)>>2],e=(b(h[(v=t+(l<<3)|0)>>2],e>>>18|0)+n|0)-h[v+4>>2]|0,h[s+56>>2]=e,h[y+(w<<2)>>2]=l,v=1,(0|o)==(0|(w=w+1|0)))break}else v=1}(e=h[s+36>>2])&&(h[s+40>>2]=e,be(e)),(e=h[s+24>>2])&&(h[s+28>>2]=e,be(e)),(e=h[s+8>>2])&&(h[s+12>>2]=e,be(e)),I=s- -64|0,t=v;break t;case 12:y=e,_=r,I=o=I+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,s=o+8|0;r:{n:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],n=h[i+20>>2],(0|e)<=(0|(n=(r=(t=h[i+16>>2])+4|0)>>>0<4?n+1|0:n))&r>>>0>p[i+8>>2]|(0|e)<(0|n))break n;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[s+12>>2]=u,n=h[i+20>>2],n=(e=h[i+16>>2]+4|0)>>>0<4?n+1|0:n,h[i+16>>2]=e,h[i+20>>2]=n}else{if(!yi(1,s+12|0,i))break n;u=h[s+12>>2]}if(t=h[s>>2],(e=h[s+4>>2]-t>>2)>>>0<u>>>0?(ei(s,u-e|0),u=h[s+12>>2]):e>>>0<=u>>>0||(h[s+4>>2]=t+(u<<2)),r=1,!u)break r;for(E=h[i+8>>2],g=h[i+12>>2],S=h[s>>2],t=0;;){if(r=0,(0|g)<=(0|(n=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|n)>(0|g))break r;r=h[i>>2],A=d[r+e|0],n=(e=e+1|0)?n:n+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=n,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(r=0,(e=e+t|0)>>>0>=u>>>0)break r;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|n)>=(0|g)&l>>>0>=E>>>0|(0|n)>(0|g))break n;if(u=d[r+l|0],n=(l=l+1|0)?n:n+1|0,h[i+16>>2]=l,h[i+20>>2]=n,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[s+12>>2])>>>0))break}if(l=s+16|0,A=h[s>>2],t=h[s+16>>2],(e=h[s+20>>2]-t|0)>>>0<=2097151?ei(l,524288-(e>>>2|0)|0):2097152!=(0|e)&&(h[s+20>>2]=t+2097152),t=h[(e=s+28|0)>>2],(r=h[s+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-r|0),t=h[e>>2];else if(r>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+t),!u)break n;for(c=0,r=0;;){if(s=h[(n=A+(c<<2)|0)>>2],e=r,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(r=(n=h[n>>2])+e|0)>>>0>524288)break n;if(!(e>>>0>=r>>>0)){if(s=h[l>>2],g=0,E=7&n)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(n-1>>>0<=6))for(;h[(n=s+(e<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|r)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=524288==(0|r)}r=m}if(!(!r|(h[o+20>>2]?0:y))){r=0,I=u=I-16|0;r:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],n=h[i+20>>2],n=(l=(m=h[i+16>>2])+8|0)>>>0<8?n+1|0:n,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|n)|(0|e)<(0|n))break r;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=n}else{if(!hi(1,u+8|0,i))break r;l=h[i+16>>2],n=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[u+8>>2],m=h[u+12>>2]}if(s=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+n|0)|0))==(0|m)&e>>>0>s>>>0|t>>>0<m>>>0||(s=n+m|0,s=(t=e+l|0)>>>0<e>>>0?s+1|0:s,h[i+16>>2]=t,h[i+20>>2]=s,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;n:if((l=d[0|(n=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|n];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break r;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break n;case 1:if(e>>>0<3)break r;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break n}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+2097152|0,h[o+56>>2]=e,r=e>>>0<536870912}}if(I=u+16|0,r)if(y)for(t=h[o+36>>2],i=h[o+48>>2],r=h[o+24>>2],e=h[o+56>>2];;){r:if(!(e>>>0>2097151))for(v=h[o+52>>2];;){if((0|v)<=0)break r;if(v=v-1|0,h[o+52>>2]=v,e=d[i+v|0]|e<<8,h[o+56>>2]=e,!(e>>>0<2097152))break}if(l=h[r+((n=524287&e)<<2)>>2],e=(b(h[(v=t+(l<<3)|0)>>2],e>>>19|0)+n|0)-h[v+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,v=1,(0|y)==(0|(w=w+1|0)))break}else v=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,be(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,be(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,be(e)),I=o- -64|0,t=v;break t;case 17:t=oe(e,i,r);break t;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:if(I=n=I+-64|0,h[n+56>>2]=0,h[n+48>>2]=0,h[n+52>>2]=0,h[n+40>>2]=0,h[n+44>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,!(!Re(n+8|0,i)|(h[n+20>>2]?0:e))&&He(n+8|0,i))if(e)for(v=h[n+36>>2],m=h[n+48>>2],s=h[n+24>>2],i=h[n+56>>2];;){r:if(!(i>>>0>16383))for(t=h[n+52>>2];;){if((0|t)<=0)break r;if(t=t-1|0,h[n+52>>2]=t,i=d[t+m|0]|i<<8,h[n+56>>2]=i,!(i>>>0<16384))break}if(o=h[s+((t=4095&i)<<2)>>2],i=(b(h[(y=v+(o<<3)|0)>>2],i>>>12|0)+t|0)-h[y+4>>2]|0,h[n+56>>2]=i,h[(l<<2)+r>>2]=o,t=1,(0|(l=l+1|0))==(0|e))break}else t=1;(e=h[n+36>>2])&&(h[n+40>>2]=e,be(e)),(e=h[n+24>>2])&&(h[n+28>>2]=e,be(e)),(e=h[n+8>>2])&&(h[n+12>>2]=e,be(e)),I=n- -64|0;break t;case 13:case 14:case 15:case 16:break i;default:break t}t=oe(e,i,r)}l=t}return l}function F(e){var t,i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0;I=t=I-16|0;e:{t:{i:{r:{n:{a:{s:{o:{l:{c:{u:{if((e|=0)>>>0<=244){if(3&(i=(a=h[4233])>>>(r=(l=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(s=h[16980+(i=(n=r+(1&(-1^i))|0)<<3)>>2])+8|0,(0|(r=h[s+8>>2]))!=(0|(i=i+16972|0))?(h[r+12>>2]=i,h[i+8>>2]=r):(m=16932,g=Dr(n)&a,h[m>>2]=g),i=n<<3,h[s+4>>2]=3|i,h[4+(i=i+s|0)>>2]=1|h[i+4>>2];break e}if((f=h[4235])>>>0>=l>>>0)break u;if(i){r=e=(i=(0-(e=(0-(e=2<<r)|e)&i<<r)&e)-1|0)>>>12&16,r|=e=(i=i>>>e|0)>>>5&8,r|=e=(i=i>>>e|0)>>>2&4,o=h[16980+(e=(r=((r|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)|0)<<3)>>2],(0|(i=h[o+8>>2]))!=(0|(e=e+16972|0))?(h[i+12>>2]=e,h[e+8>>2]=i):(a=Dr(r)&a,h[4233]=a),e=o+8|0,h[o+4>>2]=3|l,s=(i=r<<3)-l|0,h[4+(n=o+l|0)>>2]=1|s,h[i+o>>2]=s,f&&(r=16972+((i=f>>>3|0)<<3)|0,o=h[4238],(i=1<<i)&a?i=h[r+8>>2]:(h[4233]=i|a,i=r),h[r+8>>2]=o,h[i+12>>2]=o,h[o+12>>2]=r,h[o+8>>2]=i),h[4238]=n,h[4235]=s;break e}if(!(u=h[4234]))break u;for(r=e=(i=(u&0-u)-1|0)>>>12&16,r|=e=(i=i>>>e|0)>>>5&8,r|=e=(i=i>>>e|0)>>>2&4,i=h[17236+(((r|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)<<2)>>2],n=(-8&h[i+4>>2])-l|0,r=i;(e=h[r+16>>2])||(e=h[r+20>>2]);)n=(s=(r=(-8&h[e+4>>2])-l|0)>>>0<n>>>0)?r:n,i=s?e:i,r=e;if(c=h[i+24>>2],(0|(s=h[i+12>>2]))!=(0|i)){e=h[i+8>>2],h[e+12>>2]=s,h[s+8>>2]=e;break t}if(!(e=h[(r=i+20|0)>>2])){if(!(e=h[i+16>>2]))break c;r=i+16|0}for(;o=r,s=e,(e=h[(r=e+20|0)>>2])||(r=s+16|0,e=h[s+16>>2]););h[o>>2]=0;break t}if(l=-1,!(e>>>0>4294967231)&&(l=-8&(e=e+11|0),u=h[4234])){n=0-l|0,a=0,l>>>0<256||(a=31,l>>>0>16777215||(e=e>>>8|0,e<<=o=e+1048320>>>16&8,a=28+((e=((e<<=r=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|r|o)|0)<<1|l>>>e+21&1)|0));h:{d:{if(r=h[17236+(a<<2)>>2])for(e=0,i=l<<(31==(0|a)?0:25-(a>>>1|0)|0);;){if(!((o=(-8&h[r+4>>2])-l|0)>>>0>=n>>>0||(s=r,n=o))){n=0,e=r;break d}if(o=h[r+20>>2],r=h[16+((i>>>29&4)+r|0)>>2],e=o?(0|o)==(0|r)?e:o:e,i<<=1,!r)break}else e=0;if(!(e|s)){if(s=0,!(e=(0-(e=2<<a)|e)&u))break u;r=e=(i=(e&0-e)-1|0)>>>12&16,r|=e=(i=i>>>e|0)>>>5&8,r|=e=(i=i>>>e|0)>>>2&4,e=h[17236+(((r|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)<<2)>>2]}if(!e)break h}for(;n=(r=(i=(-8&h[e+4>>2])-l|0)>>>0<n>>>0)?i:n,s=r?e:s,e=(i=h[e+16>>2])||h[e+20>>2];);}if(!(!s|h[4235]-l>>>0<=n>>>0)){if(a=h[s+24>>2],(0|s)!=(0|(i=h[s+12>>2]))){e=h[s+8>>2],h[e+12>>2]=i,h[i+8>>2]=e;break i}if(!(e=h[(r=s+20|0)>>2])){if(!(e=h[s+16>>2]))break l;r=s+16|0}for(;o=r,i=e,(e=h[(r=e+20|0)>>2])||(r=i+16|0,e=h[i+16>>2]););h[o>>2]=0;break i}}}if((r=h[4235])>>>0>=l>>>0){n=h[4238],(i=r-l|0)>>>0>=16?(h[4235]=i,e=n+l|0,h[4238]=e,h[e+4>>2]=1|i,h[r+n>>2]=i,h[n+4>>2]=3|l):(h[4238]=0,h[4235]=0,h[n+4>>2]=3|r,h[4+(e=r+n|0)>>2]=1|h[e+4>>2]),e=n+8|0;break e}if((c=h[4236])>>>0>l>>>0){i=c-l|0,h[4236]=i,e=(r=h[4239])+l|0,h[4239]=e,h[e+4>>2]=1|i,h[r+4>>2]=3|l,e=r+8|0;break e}if(e=0,u=l+47|0,h[4351]?r=h[4353]:(h[4354]=-1,h[4355]=-1,h[4352]=4096,h[4353]=4096,h[4351]=t+12&-16^1431655768,h[4356]=0,h[4344]=0,r=4096),(r=(o=u+r|0)&(s=0-r|0))>>>0<=l>>>0)break e;if((n=h[4343])&&n>>>0<(a=(i=h[4341])+r|0)>>>0|i>>>0>=a>>>0)break e;if(4&d[17376])break a;u:{h:{if(n=h[4239])for(e=17380;;){if((i=h[e>>2])>>>0<=n>>>0&n>>>0<i+h[e+4>>2]>>>0)break h;if(!(e=h[e+8>>2]))break}if(-1==(0|(i=rr(0))))break s;if(a=r,(e=(n=h[4352])-1|0)&i&&(a=(r-i|0)+(e+i&0-n)|0),a>>>0<=l>>>0|a>>>0>2147483646)break s;if((n=h[4343])&&n>>>0<(s=(e=h[4341])+a|0)>>>0|e>>>0>=s>>>0)break s;if((0|i)!=(0|(e=rr(a))))break u;break n}if((a=s&o-c)>>>0>2147483646)break s;if((0|(i=rr(a)))==(h[e>>2]+h[e+4>>2]|0))break o;e=i}if(!(-1==(0|e)|l+48>>>0<=a>>>0)){if((i=(i=h[4353])+(u-a|0)&0-i)>>>0>2147483646){i=e;break n}if(-1!=(0|rr(i))){a=i+a|0,i=e;break n}rr(0-a|0);break s}if(i=e,-1!=(0|e))break n;break s}s=0;break t}i=0;break i}if(-1!=(0|i))break n}h[4344]=4|h[4344]}if(r>>>0>2147483646)break r;if(-1==(0|(i=rr(r)))|-1==(0|(e=rr(0)))|e>>>0<=i>>>0)break r;if((a=e-i|0)>>>0<=l+40>>>0)break r}e=h[4341]+a|0,h[4341]=e,e>>>0>p[4342]&&(h[4342]=e);n:{a:{s:{if(o=h[4239]){for(e=17380;;){if(((n=h[e>>2])+(r=h[e+4>>2])|0)==(0|i))break s;if(!(e=h[e+8>>2]))break}break a}for((e=h[4237])>>>0<=i>>>0&&e||(h[4237]=i),e=0,h[4346]=a,h[4345]=i,h[4241]=-1,h[4242]=h[4351],h[4348]=0;r=16972+(n=e<<3)|0,h[n+16980>>2]=r,h[n+16984>>2]=r,32!=(0|(e=e+1|0)););r=(n=a-40|0)-(e=i+8&7?-8-i&7:0)|0,h[4236]=r,e=e+i|0,h[4239]=e,h[e+4>>2]=1|r,h[4+(i+n|0)>>2]=40,h[4240]=h[4355];break n}if(!(8&d[e+12|0]|n>>>0>o>>>0|i>>>0<=o>>>0)){h[e+4>>2]=r+a,r=(e=o+8&7?-8-o&7:0)+o|0,h[4239]=r,e=(i=h[4236]+a|0)-e|0,h[4236]=e,h[r+4>>2]=1|e,h[4+(i+o|0)>>2]=40,h[4240]=h[4355];break n}}p[4237]>i>>>0&&(h[4237]=i),r=i+a|0,e=17380;a:{s:{o:{l:{c:{u:{for(;;){if((0|r)!=h[e>>2]){if(e=h[e+8>>2])continue;break u}break}if(!(8&d[e+12|0]))break c}for(e=17380;;){if((r=h[e>>2])>>>0<=o>>>0&&(s=r+h[e+4>>2]|0)>>>0>o>>>0)break l;e=h[e+8>>2]}}if(h[e>>2]=i,h[e+4>>2]=h[e+4>>2]+a,h[4+(u=(i+8&7?-8-i&7:0)+i|0)>>2]=3|l,r=(a=r+(r+8&7?-8-r&7:0)|0)-(c=l+u|0)|0,(0|a)==(0|o)){h[4239]=c,e=h[4236]+r|0,h[4236]=e,h[c+4>>2]=1|e;break s}if(h[4238]==(0|a)){h[4238]=c,e=h[4235]+r|0,h[4235]=e,h[c+4>>2]=1|e,h[e+c>>2]=e;break s}if(1==(3&(e=h[a+4>>2]))){o=-8&e;c:if(e>>>0<=255){if(n=h[a+8>>2],e=e>>>3|0,(0|(i=h[a+12>>2]))==(0|n)){m=16932,g=h[4233]&Dr(e),h[m>>2]=g;break c}h[n+12>>2]=i,h[i+8>>2]=n}else{if(l=h[a+24>>2],(0|a)==(0|(i=h[a+12>>2])))if((n=h[(e=a+20|0)>>2])||(n=h[(e=a+16|0)>>2])){for(;s=e,(n=h[(e=(i=n)+20|0)>>2])||(e=i+16|0,n=h[i+16>>2]););h[s>>2]=0}else i=0;else e=h[a+8>>2],h[e+12>>2]=i,h[i+8>>2]=e;if(l){n=h[a+28>>2];u:{if(h[(e=17236+(n<<2)|0)>>2]==(0|a)){if(h[e>>2]=i,i)break u;m=16936,g=h[4234]&Dr(n),h[m>>2]=g;break c}if(h[l+(h[l+16>>2]==(0|a)?16:20)>>2]=i,!i)break c}h[i+24>>2]=l,(e=h[a+16>>2])&&(h[i+16>>2]=e,h[e+24>>2]=i),(e=h[a+20>>2])&&(h[i+20>>2]=e,h[e+24>>2]=i)}}a=a+o|0,r=r+o|0}if(h[a+4>>2]=-2&h[a+4>>2],h[c+4>>2]=1|r,h[r+c>>2]=r,r>>>0<=255){i=16972+((e=r>>>3|0)<<3)|0,(r=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|r,e=i),h[i+8>>2]=c,h[e+12>>2]=c,h[c+12>>2]=i,h[c+8>>2]=e;break s}if(e=31,r>>>0<=16777215&&(e=r>>>8|0,e<<=s=e+1048320>>>16&8,e=28+((e=((e<<=n=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|n|s)|0)<<1|r>>>e+21&1)|0),h[c+28>>2]=e,h[c+16>>2]=0,h[c+20>>2]=0,s=17236+(e<<2)|0,(n=h[4234])&(i=1<<e)){for(e=r<<(31==(0|e)?0:25-(e>>>1|0)|0),i=h[s>>2];;){if(n=i,(-8&h[i+4>>2])==(0|r))break o;if(i=e>>>29|0,e<<=1,!(i=h[16+(s=n+(4&i)|0)>>2]))break}h[s+16>>2]=c,h[c+24>>2]=n}else h[4234]=i|n,h[s>>2]=c,h[c+24>>2]=s;h[c+12>>2]=c,h[c+8>>2]=c;break s}for(r=(n=a-40|0)-(e=i+8&7?-8-i&7:0)|0,h[4236]=r,e=e+i|0,h[4239]=e,h[e+4>>2]=1|r,h[4+(i+n|0)>>2]=40,h[4240]=h[4355],h[(r=(e=(s+(s-39&7?39-s&7:0)|0)-47|0)>>>0<o+16>>>0?o:e)+4>>2]=27,e=h[4348],h[r+16>>2]=h[4347],h[r+20>>2]=e,e=h[4346],h[r+8>>2]=h[4345],h[r+12>>2]=e,h[4347]=r+8,h[4346]=a,h[4345]=i,h[4348]=0,e=r+24|0;h[e+4>>2]=7,i=e+8|0,e=e+4|0,i>>>0<s>>>0;);if((0|r)==(0|o))break n;if(h[r+4>>2]=-2&h[r+4>>2],s=r-o|0,h[o+4>>2]=1|s,h[r>>2]=s,s>>>0<=255){i=16972+((e=s>>>3|0)<<3)|0,(r=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|r,e=i),h[i+8>>2]=o,h[e+12>>2]=o,h[o+12>>2]=i,h[o+8>>2]=e;break n}if(e=31,h[o+16>>2]=0,h[o+20>>2]=0,s>>>0<=16777215&&(e=s>>>8|0,e<<=n=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|r|n)|0)<<1|s>>>e+21&1)|0),h[o+28>>2]=e,n=17236+(e<<2)|0,(r=h[4234])&(i=1<<e)){for(e=s<<(31==(0|e)?0:25-(e>>>1|0)|0),i=h[n>>2];;){if(r=i,(0|s)==(-8&h[i+4>>2]))break a;if(i=e>>>29|0,e<<=1,!(i=h[16+(n=r+(4&i)|0)>>2]))break}h[n+16>>2]=o,h[o+24>>2]=r}else h[4234]=i|r,h[n>>2]=o,h[o+24>>2]=n;h[o+12>>2]=o,h[o+8>>2]=o;break n}e=h[n+8>>2],h[e+12>>2]=c,h[n+8>>2]=c,h[c+24>>2]=0,h[c+12>>2]=n,h[c+8>>2]=e}e=u+8|0;break e}e=h[r+8>>2],h[e+12>>2]=o,h[r+8>>2]=o,h[o+24>>2]=0,h[o+12>>2]=r,h[o+8>>2]=e}if(!((e=h[4236])>>>0<=l>>>0)){i=e-l|0,h[4236]=i,e=(r=h[4239])+l|0,h[4239]=e,h[e+4>>2]=1|i,h[r+4>>2]=3|l,e=r+8|0;break e}}h[4190]=48,e=0;break e}i:if(a){r=h[s+28>>2];r:{if(h[(e=17236+(r<<2)|0)>>2]==(0|s)){if(h[e>>2]=i,i)break r;u=Dr(r)&u,h[4234]=u;break i}if(h[a+(h[a+16>>2]==(0|s)?16:20)>>2]=i,!i)break i}h[i+24>>2]=a,(e=h[s+16>>2])&&(h[i+16>>2]=e,h[e+24>>2]=i),(e=h[s+20>>2])&&(h[i+20>>2]=e,h[e+24>>2]=i)}i:if(n>>>0<=15)e=n+l|0,h[s+4>>2]=3|e,h[4+(e=e+s|0)>>2]=1|h[e+4>>2];else if(h[s+4>>2]=3|l,h[4+(a=s+l|0)>>2]=1|n,h[n+a>>2]=n,n>>>0<=255)i=16972+((e=n>>>3|0)<<3)|0,(r=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|r,e=i),h[i+8>>2]=a,h[e+12>>2]=a,h[a+12>>2]=i,h[a+8>>2]=e;else{e=31,n>>>0<=16777215&&(e=n>>>8|0,e<<=o=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|r|o)|0)<<1|n>>>e+21&1)|0),h[a+28>>2]=e,h[a+16>>2]=0,h[a+20>>2]=0,i=17236+(e<<2)|0;r:{if((r=1<<e)&u){for(e=n<<(31==(0|e)?0:25-(e>>>1|0)|0),l=h[i>>2];;){if((-8&h[(i=l)+4>>2])==(0|n))break r;if(r=e>>>29|0,e<<=1,!(l=h[16+(r=(4&r)+i|0)>>2]))break}h[r+16>>2]=a}else h[4234]=r|u,h[i>>2]=a;h[a+24>>2]=i,h[a+12>>2]=a,h[a+8>>2]=a;break i}e=h[i+8>>2],h[e+12>>2]=a,h[i+8>>2]=a,h[a+24>>2]=0,h[a+12>>2]=i,h[a+8>>2]=e}e=s+8|0;break e}t:if(c){r=h[i+28>>2];i:{if(h[(e=17236+(r<<2)|0)>>2]==(0|i)){if(h[e>>2]=s,s)break i;m=16936,g=Dr(r)&u,h[m>>2]=g;break t}if(h[c+(h[c+16>>2]==(0|i)?16:20)>>2]=s,!s)break t}h[s+24>>2]=c,(e=h[i+16>>2])&&(h[s+16>>2]=e,h[e+24>>2]=s),(e=h[i+20>>2])&&(h[s+20>>2]=e,h[e+24>>2]=s)}n>>>0<=15?(e=n+l|0,h[i+4>>2]=3|e,h[4+(e=e+i|0)>>2]=1|h[e+4>>2]):(h[i+4>>2]=3|l,h[4+(s=i+l|0)>>2]=1|n,h[n+s>>2]=n,f&&(r=16972+((e=f>>>3|0)<<3)|0,o=h[4238],(e=1<<e)&a?e=h[r+8>>2]:(h[4233]=e|a,e=r),h[r+8>>2]=o,h[e+12>>2]=o,h[o+12>>2]=r,h[o+8>>2]=e),h[4238]=s,h[4235]=n),e=i+8|0}return I=t+16|0,0|e}function G(e,t){var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0;I=i=I-48|0,r=mr(8),h[r+4>>2]=t,h[r>>2]=0,t=r+8|0,h[i+40>>2]=t,h[i+36>>2]=t,h[i+32>>2]=r;e:{t:{i:{r:{for(;;){if(f=h[4+(t=t-8|0)>>2],l=h[t>>2],h[i+36>>2]=t,l){h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,r=1,t=h[e>>2],s=h[t+8>>2];n:if(!((0|(c=h[t+12>>2]))<=(0|(n=h[t+20>>2]))&(o=h[t+16>>2])>>>0>=s>>>0|(0|n)>(0|c))){if(s=d[o+h[t>>2]|0],n=(o=o+1|0)?n:n+1|0,h[t+16>>2]=o,h[t+20>>2]=n,it(i+16|0,s),s){if(n=h[e>>2],g=pr(i+16|0),o=h[n+20>>2],t=s,b=(u=h[n+16>>2])+s|0,c=h[n+12>>2],o=s>>>0>b>>>0?o+1|0:o,b>>>0>p[n+8>>2]&(0|c)<=(0|o)|(0|o)>(0|c))break n;We(g,u+h[n>>2]|0,s),r=h[n+20>>2],r=(s=t+h[n+16>>2]|0)>>>0<t>>>0?r+1|0:r,h[n+16>>2]=s,h[n+20>>2]=r}f=mr(24),h[(t=f)+4>>2]=0,h[t+8>>2]=0,h[(t=t+16|0)>>2]=0,h[t+4>>2]=0,h[f>>2]=f+4,h[f+12>>2]=t,I=s=I-32|0;a:if((0|(m=Lt(o=l+12|0,r=i+16|0)))!=(0|(_=l+16|0)))f&&(nr(f+12|0,h[f+16>>2]),fr(f,h[f+4>>2]),be(f));else{h[s+16>>2]=r;s:{o:{if(t=h[o+4>>2])for(c=(l=(n=d[r+11|0])<<24>>24<0)?h[r>>2]:r,l=l?h[r+4>>2]:n,r=o+4|0;;){l:{c:{u:{h:{d:{f:if(u=(g=(n=(b=(n=d[t+27|0])<<24>>24<0)?h[t+20>>2]:n)>>>0<l>>>0)?n:l){if(v=t+16|0,!(v=xi(c,b=b?h[v>>2]:v,u))){if(n>>>0>l>>>0)break f;break d}if((0|v)>=0)break d}else if(n>>>0<=l>>>0)break h;if(n=h[t>>2])break l;break o}if(n=xi(b,c,u))break u}if(g)break c;break s}if((0|n)>=0)break s}if(r=t+4|0,!(n=h[t+4>>2]))break s;t=r}r=t,t=n}t=o+4|0}r=t}if((n=h[r>>2])?t=0:(c=(n=mr(32))+16|0,l=h[s+16>>2],a[l+11|0]>=0?(b=h[l+4>>2],h[c>>2]=h[l>>2],h[c+4>>2]=b,h[c+8>>2]=h[l+8>>2]):Vi(c,h[l>>2],h[l+4>>2]),h[n+8>>2]=t,h[n>>2]=0,h[n+4>>2]=0,h[n+28>>2]=0,h[r>>2]=n,(t=h[h[o>>2]>>2])?(h[o>>2]=t,t=h[r>>2]):t=n,Je(h[o+4>>2],t),h[o+8>>2]=h[o+8>>2]+1,t=1),a[s+28|0]=t,h[s+24>>2]=n,r=h[s+24>>2],t=h[r+28>>2],h[r+28>>2]=f,!t)break a;nr(t+12|0,h[t+16>>2]),fr(t,h[t+4>>2]),be(t)}I=s+32|0,r=(0|m)!=(0|_)}if(a[i+27|0]<0&&be(h[i+16>>2]),r)break t}if(!f)break t;if(h[i+16>>2]=0,!Ti(1,i+16|0,h[e>>2]))break t;if(t=0,A=h[i+16>>2])for(;;){b=0,I=u=I-32|0,h[u+24>>2]=0,h[u+16>>2]=0,h[u+20>>2]=0,r=h[e>>2],s=h[r+8>>2];n:{a:{s:if(!((0|(o=h[r+12>>2]))<=(0|(n=h[r+20>>2]))&(l=h[r+16>>2])>>>0>=s>>>0|(0|n)>(0|o))){if(o=d[l+h[r>>2]|0],s=r,r=n,r=(n=l+1|0)?r:r+1|0,h[s+16>>2]=n,h[s+20>>2]=r,it(u+16|0,o),o){if(s=h[e>>2],g=pr(u+16|0),n=h[s+20>>2],c=(m=h[s+16>>2])+(r=o)|0,l=h[s+12>>2],n=r>>>0>c>>>0?n+1|0:n,c>>>0>p[s+8>>2]&(0|l)<=(0|n)|(0|n)>(0|l))break s;We(g,m+h[s>>2]|0,o),n=h[s+20>>2],n=(o=r+h[s+16>>2]|0)>>>0<r>>>0?n+1|0:n,h[s+16>>2]=o,h[s+20>>2]=n}if(h[u+12>>2]=0,Ti(1,u+12|0,h[e>>2])&&(r=h[u+12>>2])){if(h[u+8>>2]=0,h[u>>2]=0,h[u+4>>2]=0,(0|r)<0)break a;if(n=mr(r),h[u>>2]=n,s=r+n|0,h[u+8>>2]=s,g=xt(n,0,r),h[u+4>>2]=s,s=h[e>>2],b=h[s+8>>2],l=h[s+12>>2],o=h[s+20>>2],b=(0|(o=(c=r+(m=h[s+16>>2])|0)>>>0<r>>>0?o+1|0:o))<=(0|l)&c>>>0<=b>>>0|(0|o)<(0|l)){if(We(g,m+h[s>>2]|0,r),n=r,o=r+h[s+16>>2]|0,r=h[s+20>>2],h[s+16>>2]=o,h[s+20>>2]=n>>>0>o>>>0?r+1|0:r,I=l=I-48|0,(0|(n=Lt(f,u+16|0)))!=(f+4|0)){o:if(s=h[n+4>>2])for(;o=s,s=h[s>>2];);else{if(o=h[n+8>>2],h[o>>2]==(0|n))break o;for(r=n+8|0;r=(s=h[r>>2])+8|0,o=h[s+8>>2],(0|s)!=h[o>>2];);}h[f>>2]==(0|n)&&(h[f>>2]=o),h[f+8>>2]=h[f+8>>2]-1,o=h[f+4>>2],c=n;o:{l:{if(s=h[n>>2]){if(!(r=h[c+4>>2]))break l;for(;n=r,r=h[r>>2];);}if(!(s=h[n+4>>2])){s=0,g=1;break o}}h[s+8>>2]=h[n+8>>2],g=0}m=h[n+8>>2];o:if((0|n)!=(0|(r=h[m>>2])))h[m+4>>2]=s;else{if(h[m>>2]=s,(0|n)==(0|o)){r=0,o=s;break o}r=h[m+4>>2]}v=!d[n+12|0],(0|n)!=(0|c)&&(m=h[c+8>>2],h[n+8>>2]=m,h[m+(((0|c)!=h[h[c+8>>2]>>2])<<2)>>2]=n,m=h[c>>2],h[n>>2]=m,h[m+8>>2]=n,m=h[c+4>>2],h[n+4>>2]=m,m&&(h[m+8>>2]=n),a[n+12|0]=d[c+12|0],o=(0|o)==(0|c)?n:o);o:if(!(v|!o)){if(g)for(;;){s=d[r+12|0];l:{if(n=h[r+8>>2],h[n>>2]!=(0|r)){s||(a[r+12|0]=1,a[n+12|0]=0,s=h[n+4>>2],g=h[s>>2],h[n+4>>2]=g,g&&(h[g+8>>2]=n),h[s+8>>2]=h[n+8>>2],g=h[n+8>>2],h[(((0|n)!=h[g>>2])<<2)+g>>2]=s,h[s>>2]=n,h[n+8>>2]=s,n=r,o=(0|(r=h[r>>2]))==(0|o)?n:o,r=h[r+4>>2]);c:{u:{n=h[r>>2];h:{if(d[n+12|0]||!n){if(s=h[r+4>>2],!d[s+12|0]&&s)break h;if(a[r+12|0]=0,(0|o)!=(0|(r=h[r+8>>2]))){if(d[r+12|0])break l}else r=o;a[r+12|0]=1;break o}if(!(s=h[r+4>>2]))break u}if(!d[s+12|0]){n=r;break c}}a[n+12|0]=1,a[r+12|0]=0,s=h[n+4>>2],h[r>>2]=s,s&&(h[s+8>>2]=r),h[n+8>>2]=h[r+8>>2],s=h[r+8>>2],h[((h[s>>2]!=(0|r))<<2)+s>>2]=n,h[n+4>>2]=r,h[r+8>>2]=n,s=r}r=h[n+8>>2],a[n+12|0]=d[r+12|0],a[r+12|0]=1,a[s+12|0]=1,n=h[r+4>>2],s=h[n>>2],h[r+4>>2]=s,s&&(h[s+8>>2]=r),h[n+8>>2]=h[r+8>>2],s=h[r+8>>2],h[(((0|r)!=h[s>>2])<<2)+s>>2]=n,h[n>>2]=r,h[r+8>>2]=n;break o}s||(a[r+12|0]=1,a[n+12|0]=0,s=h[r+4>>2],h[n>>2]=s,s&&(h[s+8>>2]=n),h[r+8>>2]=h[n+8>>2],s=h[n+8>>2],h[(((0|n)!=h[s>>2])<<2)+s>>2]=r,h[r+4>>2]=n,h[n+8>>2]=r,o=(0|n)==(0|o)?r:o,r=h[n>>2]);c:if(!(s=h[r>>2])|d[s+12|0]){if(n=h[r+4>>2],d[n+12|0]||!n){if(a[r+12|0]=0,(0|(r=h[r+8>>2]))!=(0|o)&&d[r+12|0])break l;a[r+12|0]=1;break o}if(s){if(!d[s+12|0]){n=r;break c}n=h[r+4>>2]}a[n+12|0]=1,a[r+12|0]=0,s=h[n>>2],h[r+4>>2]=s,s&&(h[s+8>>2]=r),h[n+8>>2]=h[r+8>>2],s=h[r+8>>2],h[((h[s>>2]!=(0|r))<<2)+s>>2]=n,h[n>>2]=r,h[r+8>>2]=n,s=r}else n=r;r=h[n+8>>2],a[n+12|0]=d[r+12|0],a[r+12|0]=1,a[s+12|0]=1,n=h[r>>2],s=h[n+4>>2],h[r>>2]=s,s&&(h[s+8>>2]=r),h[n+8>>2]=h[r+8>>2],s=h[r+8>>2],h[(((0|r)!=h[s>>2])<<2)+s>>2]=n,h[n+4>>2]=r,h[r+8>>2]=n;break o}n=r,r=h[r+8>>2],r=h[(((0|n)==h[r>>2])<<2)+r>>2]}a[s+12|0]=1}(r=h[c+28>>2])&&(h[c+32>>2]=r,be(r)),a[c+27|0]<0&&be(h[c+16>>2]),be(c)}h[l>>2]=0,h[l+4>>2]=0,h[l+8>>2]=0,ai(l,r=h[u+4>>2]-h[u>>2]|0),We(h[l>>2],h[u>>2],r),a[u+27|0]>=0?(h[l+24>>2]=h[u+24>>2],r=h[u+20>>2],h[l+16>>2]=h[u+16>>2],h[l+20>>2]=r):Vi(l+16|0,h[u+16>>2],h[u+20>>2]),h[l+36>>2]=0,h[l+28>>2]=0,h[l+32>>2]=0,ai(l+28|0,h[l+4>>2]-h[l>>2]|0),r=h[l>>2],We(h[l+28>>2],r,h[l+4>>2]-r|0),n=o=l+16|0;o:{l:{if(r=h[f+4>>2])for(g=(c=(s=d[n+11|0])<<24>>24<0)?h[n>>2]:n,c=c?h[n+4>>2]:s,n=f+4|0;;){c:{u:{h:{d:{f:{p:if(v=(_=(s=(m=(s=d[r+27|0])<<24>>24<0)?h[r+20>>2]:s)>>>0<c>>>0)?s:c){if(y=r+16|0,!(y=xi(g,m=m?h[y>>2]:y,v))){if(s>>>0>c>>>0)break p;break f}if((0|y)>=0)break f}else if(s>>>0<=c>>>0)break d;if(s=h[r>>2])break c;break l}if(s=xi(m,g,v))break h}if(_)break u;break o}if((0|s)>=0)break o}if(n=r+4|0,!(s=h[r+4>>2]))break o;r=n}n=r,r=s}r=f+4|0}n=r}if((s=h[n>>2])?r=0:(s=mr(40),h[s+24>>2]=h[o+8>>2],c=h[o+4>>2],h[s+16>>2]=h[o>>2],h[s+20>>2]=c,h[o>>2]=0,h[o+4>>2]=0,h[o+8>>2]=0,h[s+36>>2]=0,h[(c=s+28|0)>>2]=0,h[c+4>>2]=0,ai(c,h[o+16>>2]-h[o+12>>2]|0),We(g=h[c>>2],c=h[o+12>>2],h[o+16>>2]-c|0),h[s+8>>2]=r,h[s>>2]=0,h[s+4>>2]=0,h[n>>2]=s,(r=h[h[f>>2]>>2])?(h[f>>2]=r,r=h[n>>2]):r=s,Je(h[f+4>>2],r),h[f+8>>2]=h[f+8>>2]+1,r=1),a[l+44|0]=r,h[l+40>>2]=s,(r=h[l+28>>2])&&(h[l+32>>2]=r,be(r)),a[l+27|0]<0&&be(h[l+16>>2]),(r=h[l>>2])&&(h[l+4>>2]=r,be(r)),I=l+48|0,!(n=h[u>>2]))break s}h[u+4>>2]=n,be(n)}}a[u+27|0]<0&&be(h[u+16>>2]),I=u+32|0;break n}bn(),x()}if(!b)break t;if((0|A)==(0|(t=t+1|0)))break}if(h[i+12>>2]=0,!Ti(1,i+12|0,h[e>>2]))break t;if(t=h[e>>2],(s=(r=h[t+8>>2])-(n=h[t+16>>2])|0)>>>0<(o=h[i+12>>2])>>>0&(0|(t=h[t+12>>2]-(h[t+20>>2]+(r>>>0<n>>>0)|0)|0))<=0|(0|t)<0)break t;if(r=0,t=h[i+36>>2],o)for(;;){if((s=h[i+40>>2])>>>0>t>>>0)h[t+4>>2]=0,h[t>>2]=f,t=t+8|0,h[i+36>>2]=t;else{if((t=1+(c=(l=t-(n=h[i+32>>2])|0)>>3)|0)>>>0>=536870912)break r;if(b=(s=s-n|0)>>2,(t=s>>>0<2147483640?t>>>0>b>>>0?t:b:536870911)>>>0>=536870912)break i;g=c<<3,s=mr(c=t<<3),h[4+(t=g+s|0)>>2]=0,h[t>>2]=f,t=t+8|0,(0|l)>0&&We(s,n,l),h[i+40>>2]=s+c,h[i+36>>2]=t,h[i+32>>2]=s,n&&be(n)}if((0|o)==(0|(r=r+1|0)))break}if(h[i+32>>2]==(0|t))break}e=1;break e}bn(),x()}Zi(1336),x()}t=h[i+32>>2],e=0}return t&&be(t),I=i+48|0,e}function B(e,t,i,r,n){var s,o=0,l=0,c=0,f=0,m=0,g=0,b=0,v=0,_=0,y=0;I=s=I-32|0,h[t+32>>2]=r,h[t+40>>2]=i,h[t+4>>2]=n,ue(e,r,s+16|0);e:if(!h[e>>2])if(c=e+4|0,a[e+15|0]<0&&be(h[c>>2]),r=d[s+23|0],(0|Rn[h[h[t>>2]+8>>2]](t))==(0|r))if(i=d[s+21|0],a[t+36|0]=i,n=d[s+22|0],a[t+37|0]=n,(i-3&255)>>>0<=253)t=mr(32),i=d[1571]|d[1572]<<8|d[1573]<<16|d[1574]<<24,r=d[1567]|d[1568]<<8|d[1569]<<16|d[1570]<<24,a[t+14|0]=r,a[t+15|0]=r>>>8,a[t+16|0]=r>>>16,a[t+17|0]=r>>>24,a[t+18|0]=i,a[t+19|0]=i>>>8,a[t+20|0]=i>>>16,a[t+21|0]=i>>>24,i=d[1565]|d[1566]<<8|d[1567]<<16|d[1568]<<24,r=d[1561]|d[1562]<<8|d[1563]<<16|d[1564]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1557]|d[1558]<<8|d[1559]<<16|d[1560]<<24,r=d[1553]|d[1554]<<8|d[1555]<<16|d[1556]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+22|0]=0,h[e>>2]=-5,Vi(c,t,22),be(t);else if(2!=(0|i)|n>>>0<=(r?2:3)>>>0){if(i=n|i<<8,u[h[t+32>>2]+38>>1]=i,!((65535&i)>>>0<259|u[s+26>>1]>=0)){I=f=I-16|0,n=mr(36),h[(i=n)+4>>2]=0,h[i+8>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,h[(i=i+16|0)>>2]=0,h[i+4>>2]=0,h[n>>2]=n+4,h[n+32>>2]=0,h[n+12>>2]=i,h[f>>2]=0,r=h[t+32>>2],I=m=I-16|0,i=0;t:if(n&&(h[f>>2]=r,h[m+12>>2]=0,i=0,Ti(1,m+12|0,r))){if(v=h[m+12>>2])for(;;){i:{if(Ti(1,m+8|0,h[f>>2])){if(i=mr(28),h[i+4>>2]=0,h[i+8>>2]=0,h[(r=i+16|0)>>2]=0,h[r+4>>2]=0,h[i>>2]=i+4,h[i+12>>2]=r,h[i+24>>2]=h[m+8>>2],G(f,i))break i;nr(i+12|0,h[i+16>>2]),fr(i,h[i+4>>2]),be(i)}i=0;break t}if(I=o=I-16|0,h[o+8>>2]=i,i){if((r=h[n+28>>2])>>>0<p[n+32>>2])h[o+8>>2]=0,h[r>>2]=i,h[n+28>>2]=r+4;else{r=0;i:{r:{n:{if(l=h[n+24>>2],(i=1+(b=h[n+28>>2]-l>>2)|0)>>>0<1073741824){if(g=(l=h[n+32>>2]-l|0)>>1,i=l>>>0<2147483644?i>>>0>g>>>0?i:g:1073741823){if(i>>>0>=1073741824)break n;r=mr(i<<2)}if(g=h[o+8>>2],h[o+8>>2]=0,h[(l=(b<<2)+r|0)>>2]=g,b=(i<<2)+r|0,g=l+4|0,(0|(r=h[n+28>>2]))==(0|(i=h[n+24>>2])))break r;for(;y=h[(r=r-4|0)>>2],h[r>>2]=0,h[(l=l-4|0)>>2]=y,(0|i)!=(0|r););if(h[n+32>>2]=b,r=h[n+28>>2],h[n+28>>2]=g,i=h[n+24>>2],h[n+24>>2]=l,(0|i)==(0|r))break i;for(;l=h[(r=r-4|0)>>2],h[r>>2]=0,l&&(nr(l+12|0,h[l+16>>2]),fr(l,h[l+4>>2]),be(l)),(0|i)!=(0|r););break i}bn(),x()}Zi(1336),x()}h[n+32>>2]=b,h[n+28>>2]=g,h[n+24>>2]=l}i&&be(i)}i=h[o+8>>2],h[o+8>>2]=0,i&&(nr(i+12|0,h[i+16>>2]),fr(i,h[i+4>>2]),be(i))}else h[o+8>>2]=0;if(I=o+16|0,(0|v)==(0|(_=_+1|0)))break}i=G(f,n)}if(I=m+16|0,i?(r=h[t+4>>2],i=h[r+4>>2],h[r+4>>2]=n,i&&Mi(i),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0):(i=mr(32),r=d[1723]|d[1724]<<8,a[i+24|0]=r,a[i+25|0]=r>>>8,r=d[1719]|d[1720]<<8|d[1721]<<16|d[1722]<<24,o=d[1715]|d[1716]<<8|d[1717]<<16|d[1718]<<24,a[i+16|0]=o,a[i+17|0]=o>>>8,a[i+18|0]=o>>>16,a[i+19|0]=o>>>24,a[i+20|0]=r,a[i+21|0]=r>>>8,a[i+22|0]=r>>>16,a[i+23|0]=r>>>24,r=d[1711]|d[1712]<<8|d[1713]<<16|d[1714]<<24,o=d[1707]|d[1708]<<8|d[1709]<<16|d[1710]<<24,a[i+8|0]=o,a[i+9|0]=o>>>8,a[i+10|0]=o>>>16,a[i+11|0]=o>>>24,a[i+12|0]=r,a[i+13|0]=r>>>8,a[i+14|0]=r>>>16,a[i+15|0]=r>>>24,r=d[1703]|d[1704]<<8|d[1705]<<16|d[1706]<<24,o=d[1699]|d[1700]<<8|d[1701]<<16|d[1702]<<24,a[0|i]=o,a[i+1|0]=o>>>8,a[i+2|0]=o>>>16,a[i+3|0]=o>>>24,a[i+4|0]=r,a[i+5|0]=r>>>8,a[i+6|0]=r>>>16,a[i+7|0]=r>>>24,a[i+26|0]=0,h[e>>2]=-1,Vi(e+4|0,i,26),be(i),h[f+8>>2]=0,Mi(n)),I=f+16|0,h[e>>2])break e;a[c+11|0]>=0||be(h[c>>2])}if(0|Rn[h[h[t>>2]+12>>2]](t))if(0|Rn[h[h[t>>2]+20>>2]](t))if(0|Rn[h[h[t>>2]+24>>2]](t))h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0;else{if(t=Wi(s,1461),h[e>>2]=-1,a[t+11|0]>=0){e=h[s+4>>2],h[c>>2]=h[s>>2],h[c+4>>2]=e,h[c+8>>2]=h[s+8>>2];break e}if(Vi(c,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break e;be(h[t>>2])}else{if(t=Wi(s,1726),h[e>>2]=-1,a[t+11|0]>=0){e=h[s+4>>2],h[c>>2]=h[s>>2],h[c+4>>2]=e,h[c+8>>2]=h[s+8>>2];break e}if(Vi(c,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break e;be(h[t>>2])}else t=mr(48),a[t+32|0]=d[1528],i=d[1524]|d[1525]<<8|d[1526]<<16|d[1527]<<24,r=d[1520]|d[1521]<<8|d[1522]<<16|d[1523]<<24,a[t+24|0]=r,a[t+25|0]=r>>>8,a[t+26|0]=r>>>16,a[t+27|0]=r>>>24,a[t+28|0]=i,a[t+29|0]=i>>>8,a[t+30|0]=i>>>16,a[t+31|0]=i>>>24,i=d[1516]|d[1517]<<8|d[1518]<<16|d[1519]<<24,r=d[1512]|d[1513]<<8|d[1514]<<16|d[1515]<<24,a[t+16|0]=r,a[t+17|0]=r>>>8,a[t+18|0]=r>>>16,a[t+19|0]=r>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1508]|d[1509]<<8|d[1510]<<16|d[1511]<<24,r=d[1504]|d[1505]<<8|d[1506]<<16|d[1507]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1500]|d[1501]<<8|d[1502]<<16|d[1503]<<24,r=d[1496]|d[1497]<<8|d[1498]<<16|d[1499]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+33|0]=0,h[e>>2]=-1,Vi(c,t,33),be(t)}else t=mr(32),i=d[1548]|d[1549]<<8|d[1550]<<16|d[1551]<<24,r=d[1544]|d[1545]<<8|d[1546]<<16|d[1547]<<24,a[t+14|0]=r,a[t+15|0]=r>>>8,a[t+16|0]=r>>>16,a[t+17|0]=r>>>24,a[t+18|0]=i,a[t+19|0]=i>>>8,a[t+20|0]=i>>>16,a[t+21|0]=i>>>24,i=d[1542]|d[1543]<<8|d[1544]<<16|d[1545]<<24,r=d[1538]|d[1539]<<8|d[1540]<<16|d[1541]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1534]|d[1535]<<8|d[1536]<<16|d[1537]<<24,r=d[1530]|d[1531]<<8|d[1532]<<16|d[1533]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+22|0]=0,h[e>>2]=-5,Vi(c,t,22),be(t);else t=mr(64),i=d[1458]|d[1459]<<8,a[t+48|0]=i,a[t+49|0]=i>>>8,i=d[1454]|d[1455]<<8|d[1456]<<16|d[1457]<<24,r=d[1450]|d[1451]<<8|d[1452]<<16|d[1453]<<24,a[t+40|0]=r,a[t+41|0]=r>>>8,a[t+42|0]=r>>>16,a[t+43|0]=r>>>24,a[t+44|0]=i,a[t+45|0]=i>>>8,a[t+46|0]=i>>>16,a[t+47|0]=i>>>24,i=d[1446]|d[1447]<<8|d[1448]<<16|d[1449]<<24,r=d[1442]|d[1443]<<8|d[1444]<<16|d[1445]<<24,a[t+32|0]=r,a[t+33|0]=r>>>8,a[t+34|0]=r>>>16,a[t+35|0]=r>>>24,a[t+36|0]=i,a[t+37|0]=i>>>8,a[t+38|0]=i>>>16,a[t+39|0]=i>>>24,i=d[1438]|d[1439]<<8|d[1440]<<16|d[1441]<<24,r=d[1434]|d[1435]<<8|d[1436]<<16|d[1437]<<24,a[t+24|0]=r,a[t+25|0]=r>>>8,a[t+26|0]=r>>>16,a[t+27|0]=r>>>24,a[t+28|0]=i,a[t+29|0]=i>>>8,a[t+30|0]=i>>>16,a[t+31|0]=i>>>24,i=d[1430]|d[1431]<<8|d[1432]<<16|d[1433]<<24,r=d[1426]|d[1427]<<8|d[1428]<<16|d[1429]<<24,a[t+16|0]=r,a[t+17|0]=r>>>8,a[t+18|0]=r>>>16,a[t+19|0]=r>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1422]|d[1423]<<8|d[1424]<<16|d[1425]<<24,r=d[1418]|d[1419]<<8|d[1420]<<16|d[1421]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1414]|d[1415]<<8|d[1416]<<16|d[1417]<<24,r=d[1410]|d[1411]<<8|d[1412]<<16|d[1413]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+50|0]=0,h[e>>2]=-1,Vi(c,t,50),be(t);I=s+32|0}function j(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(a=h[t+12>>2],r=h[t+20>>2],r=(n=(l=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(n>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=l+h[t>>2]|0,h[e>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,a=r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,c=l,h[t+16>>2]=l,h[t+20>>2]=r,p[e>>2]>32||(l=h[t+12>>2],r=a,r=(a=n+8|0)>>>0<8?r+1|0:r,a>>>0>p[t+8>>2]&(0|r)>=(0|l)|(0|r)>(0|l))))){if(r=c+h[t>>2]|0,o=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=o,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,!o)return 1;if(o=0,h[e+8>>2]=0,Tt(e+16|0,t)&&Tt(e+36|0,t)&&Tt(e+56|0,t)&&Tt(e+76|0,t)){E=h[e+4>>2],l=i,t=0,i=0,I=n=I-32|0,a=e,e=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=mr(r=e<<2),h[n+8>>2]=t,i=t+r|0,h[n+16>>2]=i,xt(t,0,r),h[n+12>>2]=i}r=h[a+120>>2],(o=h[r>>2])&&(h[r+4>>2]=o,be(o),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=h[n+12>>2],t=h[n+8>>2],e=h[a+12>>2]),h[r+4>>2]=i,h[r>>2]=t,h[r+8>>2]=h[n+16>>2],t=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=mr(e<<=2),h[n+8>>2]=s,t=e+s|0,h[n+16>>2]=t,xt(s,0,e),h[n+12>>2]=t}e=h[a+132>>2],(i=h[e>>2])&&(h[e+4>>2]=i,be(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=E,r=1,e=(t=h[n+28>>2])+1|0,h[n+28>>2]=e;r:if(!(e>>>0<t>>>0)){for(;;){if(u=h[n+12>>2],r=h[n+24>>2],i=h[u+((i=((t=r+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(i,341)|0,12)|0,t=h[i+8>>2],o=h[i+4>>2],c=h[i>>2],h[n+28>>2]=s,1+(((s=(i=h[n+16>>2])-u|0)?b(s>>2,341)-1|0:0)-(e+r|0)|0)>>>0>=682&&(be(h[i-4>>2]),h[n+16>>2]=h[n+16>>2]-4),r=0,c>>>0>E>>>0)break r;if((s=(0|o)==((e=h[a+12>>2])-1|0)?0:o+1|0)>>>0>=e>>>0)break r;m=(f=b(t,12))+h[a+132>>2]|0,u=f+h[a+120>>2]|0;n:{a:{if(v=s<<2,!(i=h[a>>2]-h[v+h[m>>2]>>2]|0)){if(!c)break a;if(m=0,(0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=c+h[l+28>>2],h[a+8>>2]=e+c;break a}for(;;){o=0;s:if((0|e)!=(0|s))for(;;){if(r=b(o,20)+e|0,i=h[u>>2]+(h[r+4>>2]<<2)|0,f=h[r>>2],!((s=h[r+12>>2])>>>0>3))if(t=h[l+12>>2],h[r+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[r+12>>2])|0,(e=e+1|0)>>>0<p[r+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(m=m+1|0)))break a;e=h[l+16>>2],s=h[l+20>>2]}}s:{o:{l:{c:{if(c>>>0<=2){if(i=h[a+108>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break r;(0|(r=(e=h[a+120>>2])+(m=b(g=t+1|0,12))|0))!=(0|u)&&(Bt(r,h[u>>2],h[u+4>>2]),e=h[a+120>>2]),e=v+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1);u:if((0|(e=31^y(c)))<=(0|(o=32-(i=h[a+32>>2])|0))){if((0|(o=h[a+28>>2]))==h[a+20>>2]){r=0;break u}if(r=h[o>>2],u=e+i|0,h[a+32>>2]=u,r=r<<i>>>32-e|0,32!=(0|u))break u;h[a+32>>2]=0,h[a+28>>2]=o+4}else(0|(u=(r=h[a+28>>2])+4|0))!=h[a+20>>2]?(A=h[r>>2],h[a+28>>2]=u,o=e-o|0,h[a+32>>2]=o,r=h[r+4>>2]>>>32-o|A<<i>>>32-e):r=0;if((0|(r=c-(e=(c>>>1|0)-r|0)|0))!=(0|e)){if((0|(i=h[a+88>>2]))==h[a+80>>2])break l;o=h[i>>2],u=(c=h[a+92>>2])+1|0,h[a+92>>2]=u,o&=-2147483648>>>c;u:{if(32==(0|u)){if(h[a+92>>2]=0,h[a+88>>2]=i+4,o)break u;break l}if(!o)break l}}else r=e;o=r,r=e;break o}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break s}o=e}if(e=h[a+132>>2],c=h[(i=e+f|0)>>2],h[(u=c+v|0)>>2]=h[u>>2]+1,Bt(e+m|0,c,h[i+4>>2]),r&&(e=h[n+28>>2]+h[n+24>>2]|0,i=h[n+12>>2],(0|e)==(0|((c=h[n+16>>2]-i|0)?b(c>>2,341)-1|0:0))&&(Qe(n+8|0),i=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(c=i)+((i=(e>>>0)/341|0)<<2)>>2]+b(e-b(i,341)|0,12)|0,h[e+8>>2]=t,h[e+4>>2]=s,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!o)break a;e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((i=h[n+16>>2]-t|0)?b(i>>2,341)-1|0:0))&&(Qe(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=o,e=h[n+28>>2]+1|0,h[n+28>>2]=e;break n}if(v=0,c)for(;;){if(e)for(o=h[a+40>>2],r=h[a+96>>2],A=h[a+108>>2],S=h[u>>2],T=h[m>>2],e=0;;){h[r+(h[(s=A+(e<<2)|0)>>2]<<2)>>2]=0,i=h[s>>2]<<2;s:if(t=h[a>>2]-h[i+T>>2]|0)if(i=i+r|0,(0|(_=32-(f=h[a+52>>2])|0))>=(0|t)){if((0|(g=h[a+48>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[g>>2]<<f>>>32-t,t=t+h[a+52>>2]|0,h[a+52>>2]=t,32!=(0|t))break s;h[a+52>>2]=0,h[a+48>>2]=g+4}else(0|o)!=(0|(w=(g=h[a+48>>2])+4|0))?(M=h[g>>2],h[a+48>>2]=w,_=t-_|0,h[a+52>>2]=_,h[i>>2]=h[g+4>>2]>>>32-_|M<<f>>>32-t):h[i>>2]=0;if(t=h[s>>2]<<2,h[(i=t+r|0)>>2]=h[i>>2]|h[t+S>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;s:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(r=b(o,20)+e|0,i=h[a+96>>2]+(h[r+4>>2]<<2)|0,f=h[r>>2],!((s=h[r+12>>2])>>>0>3))if(t=h[l+12>>2],h[r+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[r+12>>2])|0,(e=e+1|0)>>>0<p[r+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(v=v+1|0)))break a;e=h[a+12>>2]}}e=h[n+28>>2]}if(!e)break}r=1}if(h[n+28>>2]=0,(t=(s=h[n+16>>2])-(e=h[n+12>>2])|0)>>>0>=9)for(;be(h[e>>2]),e=h[n+12>>2]+4|0,h[n+12>>2]=e,(t=(s=h[n+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[n+24>>2]=i}if((0|e)!=(0|s)){for(;be(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[n+16>>2]))!=(0|(t=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}o=r}}return o}function z(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(a=h[t+12>>2],r=h[t+20>>2],r=(n=(l=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(n>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=l+h[t>>2]|0,h[e>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,a=r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,u=l,h[t+16>>2]=l,h[t+20>>2]=r,p[e>>2]>32||(l=h[t+12>>2],r=a,r=(a=n+8|0)>>>0<8?r+1|0:r,a>>>0>p[t+8>>2]&(0|r)>=(0|l)|(0|r)>(0|l))))){if(r=u+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,!s)return 1;if(s=0,h[e+8>>2]=0,Tt(e+16|0,t)&&Tt(e+36|0,t)&&Tt(e+56|0,t)&&Tt(e+76|0,t)){_=h[e+4>>2],l=i,t=0,i=0,I=n=I-32|0,a=e,e=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=mr(r=e<<2),h[n+8>>2]=t,i=t+r|0,h[n+16>>2]=i,xt(t,0,r),h[n+12>>2]=i}r=h[a+120>>2],(s=h[r>>2])&&(h[r+4>>2]=s,be(s),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=h[n+12>>2],t=h[n+8>>2],e=h[a+12>>2]),h[r+4>>2]=i,h[r>>2]=t,h[r+8>>2]=h[n+16>>2],t=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;o=mr(e<<=2),h[n+8>>2]=o,t=e+o|0,h[n+16>>2]=t,xt(o,0,e),h[n+12>>2]=t}e=h[a+132>>2],(i=h[e>>2])&&(h[e+4>>2]=i,be(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,o=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=o,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,r=1,e=(t=h[n+28>>2])+1|0,h[n+28>>2]=e;r:if(!(e>>>0<t>>>0)){for(;;){if(c=h[n+12>>2],r=h[n+24>>2],t=h[c+((i=((t=r+(o=e-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(i,341)|0,12)|0,i=h[t+8>>2],s=h[t+4>>2],u=h[t>>2],h[n+28>>2]=o,1+(((o=(t=h[n+16>>2])-c|0)?b(o>>2,341)-1|0:0)-(e+r|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[n+16>>2]=h[n+16>>2]-4),u>>>0>_>>>0){r=0;break r}if(r=0,(o=(0|s)==((e=h[a+12>>2])-1|0)?0:s+1|0)>>>0>=e>>>0)break r;m=(e=h[a+120>>2])+(t=b(i,12))|0;n:{a:{if(c=o<<2,A=t+h[a+132>>2]|0,!(s=h[a>>2]-h[c+h[A>>2]>>2]|0)){if(!u)break a;if((0|(e=h[l+16>>2]))==(0|(o=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=u+h[l+28>>2],h[a+8>>2]=e+u;break a}for(;;){s=0;s:if((0|e)!=(0|o))for(;;){if(c=b(s,20)+e|0,i=h[m>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((o=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,o))+(o=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),s=s+1|0,e=h[l+16>>2],!(s>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(r=r+1|0)))break a;e=h[l+16>>2],o=h[l+20>>2]}}s:{o:{l:{c:{if(u>>>0<=2){if(i=h[a+108>>2],h[i>>2]=o,t=1,(e=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break r;Bt((r=e)+(e=t+12|0)|0,h[m>>2],h[m+4>>2]),e=c+h[e+h[a+120>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<s-1);u:if((0|(e=31^y(u)))<=(0|(f=32-(r=h[a+32>>2])|0))){if((0|(s=h[a+28>>2]))==h[a+20>>2]){r=0;break u}if(f=h[s>>2],m=e+r|0,h[a+32>>2]=m,r=f<<r>>>32-e|0,32!=(0|m))break u;h[a+32>>2]=0,h[a+28>>2]=s+4}else(0|(m=(s=h[a+28>>2])+4|0))!=h[a+20>>2]?(g=h[s>>2],h[a+28>>2]=m,f=e-f|0,h[a+32>>2]=f,r=h[s+4>>2]>>>32-f|g<<r>>>32-e):r=0;if(f=i+1|0,(0|(r=u-(e=(u>>>1|0)-r|0)|0))!=(0|e)){if((0|(s=h[a+88>>2]))==h[a+80>>2])break l;u=h[s>>2],g=(m=h[a+92>>2])+1|0,h[a+92>>2]=g,u&=-2147483648>>>m;u:{if(32==(0|g)){if(h[a+92>>2]=0,h[a+88>>2]=s+4,u)break u;break l}if(!u)break l}}else r=e;s=r,r=e;break o}for(;o=(e-1|0)==(0|o)?0:o+1|0,h[i+(t<<2)>>2]=o,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break s}s=e}if(e=h[a+132>>2],u=h[(t=e+t|0)>>2],h[(c=u+c|0)>>2]=h[c>>2]+1,Bt(e+b(f,12)|0,u,h[t+4>>2]),r&&(e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((u=h[n+16>>2]-t|0)?b(u>>2,341)-1|0:0))&&(Qe(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(u=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=o,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!s)break a;e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((i=h[n+16>>2]-t|0)?b(i>>2,341)-1|0:0))&&(Qe(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=o,h[e>>2]=s,e=h[n+28>>2]+1|0,h[n+28>>2]=e;break n}if(u)for(;;){if(e)for(o=h[a+40>>2],s=h[a+96>>2],w=h[a+108>>2],S=h[m>>2],T=h[A>>2],e=0;;){h[s+(h[(c=(e<<2)+w|0)>>2]<<2)>>2]=0,i=h[c>>2]<<2;s:if(t=h[a>>2]-h[i+T>>2]|0)if(i=i+s|0,(0|(v=32-(f=h[a+52>>2])|0))>=(0|t)){if((0|(g=h[a+48>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[g>>2]<<f>>>32-t,t=t+h[a+52>>2]|0,h[a+52>>2]=t,32!=(0|t))break s;h[a+52>>2]=0,h[a+48>>2]=g+4}else(0|o)!=(0|(E=(g=h[a+48>>2])+4|0))?(M=h[g>>2],h[a+48>>2]=E,v=t-v|0,h[a+52>>2]=v,h[i>>2]=h[g+4>>2]>>>32-v|M<<f>>>32-t):h[i>>2]=0;if(t=h[c>>2]<<2,h[(i=t+s|0)>>2]=h[i>>2]|h[t+S>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}s=0;s:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(c=b(s,20)+e|0,i=h[a+96>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((o=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,o))+(o=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),s=s+1|0,e=h[l+16>>2],!(s>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(r=r+1|0)))break a;e=h[a+12>>2]}}e=h[n+28>>2]}if(!e)break}r=1}if(h[n+28>>2]=0,(t=(o=h[n+16>>2])-(e=h[n+12>>2])|0)>>>0>=9)for(;be(h[e>>2]),e=h[n+12>>2]+4|0,h[n+12>>2]=e,(t=(o=h[n+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[n+24>>2]=i}if((0|e)!=(0|o)){for(;be(h[e>>2]),(0|o)!=(0|(e=e+4|0)););(0|(e=h[n+16>>2]))!=(0|(t=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}s=r}}return s}function H(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0;if(a=h[t+12>>2],r=h[t+20>>2],r=(n=(l=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(n>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=l+h[t>>2]|0,h[e>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,a=r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,c=l,h[t+16>>2]=l,h[t+20>>2]=r,p[e>>2]>32||(l=h[t+12>>2],r=a,r=(a=n+8|0)>>>0<8?r+1|0:r,a>>>0>p[t+8>>2]&(0|r)>=(0|l)|(0|r)>(0|l))))){if(r=c+h[t>>2]|0,o=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=o,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,!o)return 1;if(o=0,h[e+8>>2]=0,ze(e+16|0,t)&&Tt(e+32|0,t)&&Tt(e+52|0,t)&&Tt(e+72|0,t)){A=h[e+4>>2],l=i,t=0,i=0,I=n=I-32|0,a=e,e=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=mr(r=e<<2),h[n+8>>2]=t,i=t+r|0,h[n+16>>2]=i,xt(t,0,r),h[n+12>>2]=i}r=h[a+116>>2],(o=h[r>>2])&&(h[r+4>>2]=o,be(o),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=h[n+12>>2],t=h[n+8>>2],e=h[a+12>>2]),h[r+4>>2]=i,h[r>>2]=t,h[r+8>>2]=h[n+16>>2],t=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=mr(e<<=2),h[n+8>>2]=s,t=e+s|0,h[n+16>>2]=t,xt(s,0,e),h[n+12>>2]=t}e=h[a+128>>2],(i=h[e>>2])&&(h[e+4>>2]=i,be(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,r=1,e=(t=h[n+28>>2])+1|0,h[n+28>>2]=e;r:if(!(e>>>0<t>>>0)){for(w=a+16|0;;){if(f=h[n+12>>2],r=h[n+24>>2],i=h[f+((i=((t=r+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(i,341)|0,12)|0,t=h[i+8>>2],o=h[i+4>>2],c=h[i>>2],h[n+28>>2]=s,1+(((s=(i=h[n+16>>2])-f|0)?b(s>>2,341)-1|0:0)-(e+r|0)|0)>>>0>=682&&(be(h[i-4>>2]),h[n+16>>2]=h[n+16>>2]-4),r=0,c>>>0>A>>>0)break r;if((s=((e=h[a+12>>2])-1|0)==(0|o)?0:o+1|0)>>>0>=e>>>0)break r;m=(i=b(t,12))+h[a+128>>2]|0,f=i+h[a+116>>2]|0;n:{if(u=s<<2,!(o=h[a>>2]-h[u+h[m>>2]>>2]|0)){if(!c)break n;if(m=0,(0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=c+h[l+28>>2],h[a+8>>2]=e+c;break n}for(;;){o=0;a:if((0|e)!=(0|s))for(;;){if(r=b(o,20)+e|0,i=h[f>>2]+(h[r+4>>2]<<2)|0,u=h[r>>2],!((s=h[r+12>>2])>>>0>3))if(t=h[l+12>>2],h[r+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[r+12>>2])|0,(e=e+1|0)>>>0<p[r+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[u+84|0]?e:h[h[u+68>>2]+(e<<2)>>2])>>>0>=p[u+80>>2])break a;if(t=e,e=h[u+40>>2],We(h[h[u>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(m=m+1|0)))break n;e=h[l+16>>2],s=h[l+20>>2]}}a:{s:{o:{l:{if(c>>>0<=2){if(i=h[a+104>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break l;break a}if(p[a+8>>2]>p[a+4>>2])break r;if((0|(r=(e=h[a+116>>2])+(m=b(v=t+1|0,12))|0))!=(0|f)&&(Bt(r,h[f>>2],h[f+4>>2]),e=h[a+116>>2]),e=u+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<o-1),h[n+4>>2]=0,mi(w,31^y(c),n+4|0),(0|(r=c-(e=(c>>>1|0)-h[n+4>>2]|0)|0))!=(0|e)){if((0|(o=h[a+84>>2]))==h[a+76>>2])break o;c=h[o>>2],g=(f=h[a+88>>2])+1|0,h[a+88>>2]=g,c&=-2147483648>>>f;c:{if(32==(0|g)){if(h[a+88>>2]=0,h[a+84>>2]=o+4,c)break c;break o}if(!c)break o}}else r=e;o=r,r=e;break s}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break a}o=e}if(e=h[a+128>>2],c=h[(i=e+i|0)>>2],h[(f=c+u|0)>>2]=h[f>>2]+1,Bt(e+m|0,c,h[i+4>>2]),r&&(e=h[n+28>>2]+h[n+24>>2]|0,i=h[n+12>>2],(0|e)==(0|((c=h[n+16>>2]-i|0)?b(c>>2,341)-1|0:0))&&(Qe(n+8|0),i=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(c=i)+((i=(e>>>0)/341|0)<<2)>>2]+b(e-b(i,341)|0,12)|0,h[e+8>>2]=t,h[e+4>>2]=s,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!o)break n;e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((i=h[n+16>>2]-t|0)?b(i>>2,341)-1|0:0))&&(Qe(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=v,h[e+4>>2]=s,h[e>>2]=o,h[n+28>>2]=h[n+28>>2]+1;break n}if(v=0,c)for(;;){if(e)for(o=h[a+36>>2],r=h[a+92>>2],S=h[a+104>>2],T=h[f>>2],M=h[m>>2],e=0;;){h[r+(h[(s=(e<<2)+S|0)>>2]<<2)>>2]=0,i=h[s>>2]<<2;a:if(t=h[a>>2]-h[i+M>>2]|0)if(i=i+r|0,(0|(_=32-(u=h[a+48>>2])|0))>=(0|t)){if((0|(g=h[a+44>>2]))==(0|o)){h[i>>2]=0;break a}if(h[i>>2]=h[g>>2]<<u>>>32-t,t=t+h[a+48>>2]|0,h[a+48>>2]=t,32!=(0|t))break a;h[a+48>>2]=0,h[a+44>>2]=g+4}else(0|o)!=(0|(E=(g=h[a+44>>2])+4|0))?(R=h[g>>2],h[a+44>>2]=E,_=t-_|0,h[a+48>>2]=_,h[i>>2]=h[g+4>>2]>>>32-_|R<<u>>>32-t):h[i>>2]=0;if(t=h[s>>2]<<2,h[(i=t+r|0)>>2]=h[i>>2]|h[t+T>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;a:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(r=b(o,20)+e|0,i=h[a+92>>2]+(h[r+4>>2]<<2)|0,u=h[r>>2],!((s=h[r+12>>2])>>>0>3))if(t=h[l+12>>2],h[r+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[r+12>>2])|0,(e=e+1|0)>>>0<p[r+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[u+84|0]?e:h[h[u+68>>2]+(e<<2)>>2])>>>0>=p[u+80>>2])break a;if(t=e,e=h[u+40>>2],We(h[h[u>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(v=v+1|0)))break n;e=h[a+12>>2]}}if(!(e=h[n+28>>2]))break}r=1}if(h[n+28>>2]=0,(t=(s=h[n+16>>2])-(e=h[n+12>>2])|0)>>>0>=9)for(;be(h[e>>2]),e=h[n+12>>2]+4|0,h[n+12>>2]=e,(t=(s=h[n+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[n+24>>2]=i}if((0|e)!=(0|s)){for(;be(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[n+16>>2]))!=(0|(t=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}o=r}}return o}function W(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(o=h[t+12>>2],a=h[t+20>>2],a=(s=(n=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,!(s>>>0>p[t+8>>2]&(0|a)>=(0|o)|(0|a)>(0|o)||(a=n+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,o=a=h[t+20>>2],a=(n=(s=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,l=n,h[t+16>>2]=n,h[t+20>>2]=a,p[e>>2]>32||(a=o,(0|(n=h[t+12>>2]))<=(0|(a=(o=s+8|0)>>>0<8?a+1|0:a))&o>>>0>p[t+8>>2]|(0|n)<(0|a))))){if(r=l+h[t>>2]|0,a=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=a,r=h[t+20>>2],r=(o=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,!a)return 1;if(r=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){A=h[e+4>>2],o=i,i=0,t=0,I=n=I-32|0,a=e,r=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(r){if(r>>>0>=1073741824)break t;i=mr(e=r<<2),h[n+8>>2]=i,t=e+i|0,h[n+16>>2]=t,xt(i,0,e),h[n+12>>2]=t}e=h[a+628>>2],(s=h[e>>2])&&(h[e+4>>2]=s,be(s),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=h[a+12>>2],i=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=i,h[e+8>>2]=h[n+16>>2],i=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,s=0;i:{if(r){if(r>>>0>=1073741824)break i;s=mr(e=r<<2),h[n+8>>2]=s,i=e+s|0,h[n+16>>2]=i,xt(s,0,e),h[n+12>>2]=i}e=h[a+640>>2],(t=h[e>>2])&&(h[e+4>>2]=t,be(t),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[n+8>>2],i=h[n+12>>2]),h[e+4>>2]=i,h[e>>2]=s,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,t=1,r=(e=h[n+28>>2])+1|0,h[n+28>>2]=r;r:if(!(e>>>0>r>>>0)){for(;;){if(f=h[n+12>>2],t=h[n+24>>2],e=h[f+((i=((e=t+(s=r-1|0)|0)>>>0)/341|0)<<2)>>2]+b(e-b(i,341)|0,12)|0,c=h[e+8>>2],i=h[e+4>>2],l=h[e>>2],h[n+28>>2]=s,1+(((s=(e=h[n+16>>2])-f|0)?b(s>>2,341)-1|0:0)-(t+r|0)|0)>>>0>=682&&(be(h[e-4>>2]),h[n+16>>2]=h[n+16>>2]-4),t=0,l>>>0>A>>>0)break r;if((s=((e=h[a+12>>2])-1|0)==(0|i)?0:i+1|0)>>>0>=e>>>0)break r;m=(u=b(c,12))+h[a+640>>2]|0,f=u+h[a+628>>2]|0;n:{a:if(v=s<<2,i=h[a>>2]-h[v+h[m>>2]>>2]|0){s:{o:{l:{c:{if(l>>>0<=2){if(e=h[a+616>>2],h[e>>2]=s,i=1,(r=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break r;if((0|(t=(e=h[a+628>>2])+(m=b(g=c+1|0,12))|0))!=(0|f)&&(Bt(t,h[f>>2],h[f+4>>2]),e=h[a+628>>2]),e=v+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1),i=0,r=0,e=31^y(l))for(;i=Gi(16+((r<<4)+a|0)|0)|i<<1,(0|e)!=(0|(r=r+1|0)););if((0|(r=l-(e=(l>>>1|0)-i|0)|0))!=(0|e)){if((0|(t=h[a+596>>2]))==h[a+588>>2])break l;i=h[t>>2],f=(l=h[a+600>>2])+1|0,h[a+600>>2]=f,i&=-2147483648>>>l;u:{if(32==(0|f)){if(h[a+600>>2]=0,h[a+596>>2]=t+4,i)break u;break l}if(!i)break l}t=r}else t=e;r=e;break o}for(;s=(r-1|0)==(0|s)?0:s+1|0,h[e+(i<<2)>>2]=s,(i=i+1|0)>>>0<(r=h[a+12>>2])>>>0;);break s}t=e}if(e=h[a+640>>2],l=h[(i=e+u|0)>>2],h[(f=l+v|0)>>2]=h[f>>2]+1,Bt(e+m|0,l,h[i+4>>2]),r&&(i=h[n+28>>2]+h[n+24>>2]|0,e=h[n+12>>2],(0|i)==(0|((l=h[n+16>>2]-e|0)?b(l>>2,341)-1|0:0))?(Qe(n+8|0),i=h[n+24>>2]+h[n+28>>2]|0,l=h[n+12>>2]):l=e,e=h[l+((e=(i>>>0)/341|0)<<2)>>2]+b(i-b(e,341)|0,12)|0,h[e+8>>2]=c,h[e+4>>2]=s,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!t)break a;r=h[n+28>>2]+h[n+24>>2]|0,i=h[n+12>>2],(0|r)==(0|((e=h[n+16>>2]-i|0)?b(e>>2,341)-1|0:0))&&(Qe(n+8|0),r=h[n+24>>2]+h[n+28>>2]|0,i=h[n+12>>2]),e=h[i+((e=(r>>>0)/341|0)<<2)>>2]+b(r-b(e,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=t,r=h[n+28>>2]+1|0,h[n+28>>2]=r;break n}if(v=0,l)for(;;){if(r)for(s=h[a+548>>2],i=h[a+604>>2],w=h[a+616>>2],S=h[f>>2],T=h[m>>2],r=0;;){h[i+(h[(c=(r<<2)+w|0)>>2]<<2)>>2]=0,t=h[c>>2]<<2;s:if(e=h[a>>2]-h[t+T>>2]|0)if(t=t+i|0,(0|(_=32-(u=h[a+560>>2])|0))>=(0|e)){if((0|(g=h[a+556>>2]))==(0|s)){h[t>>2]=0;break s}if(h[t>>2]=h[g>>2]<<u>>>32-e,e=e+h[a+560>>2]|0,h[a+560>>2]=e,32!=(0|e))break s;h[a+560>>2]=0,h[a+556>>2]=g+4}else(0|s)!=(0|(E=(g=h[a+556>>2])+4|0))?(M=h[g>>2],h[a+556>>2]=E,_=e-_|0,h[a+560>>2]=_,h[t>>2]=h[g+4>>2]>>>32-_|M<<u>>>32-e):h[t>>2]=0;if(e=h[c>>2]<<2,h[(t=e+i|0)>>2]=h[t>>2]|h[e+S>>2],!((r=r+1|0)>>>0<p[a+12>>2]))break}e=0;s:if((0|(r=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=b(e,20)+r|0,t=h[a+604>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(r=0;i=(i=We(i,(r<<2)+t|0,s))+(s=h[c+12>>2])|0,(r=r+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(r=h[o+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+b(i,r)|0,t,i),e=e+1|0,r=h[o+16>>2],!(e>>>0<(h[o+20>>2]-r|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(v=v+1|0)))break a;r=h[a+12>>2]}}else{if(m=0,!l)break a;for(;;){e=0;s:if((0|(r=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=b(e,20)+r|0,t=h[f>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(r=0;i=(i=We(i,(r<<2)+t|0,s))+(s=h[c+12>>2])|0,(r=r+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(r=h[o+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+b(i,r)|0,t,i),e=e+1|0,r=h[o+16>>2],!(e>>>0<(h[o+20>>2]-r|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(m=m+1|0)))break}}r=h[n+28>>2]}if(!r)break}t=1}if(h[n+28>>2]=0,(i=(s=h[n+16>>2])-(r=h[n+12>>2])|0)>>>0>=9)for(;be(h[r>>2]),r=h[n+12>>2]+4|0,h[n+12>>2]=r,(i=(s=h[n+16>>2])-r|0)>>>0>8;);switch(e=170,(i>>>2|0)-1|0){case 1:e=341;case 0:h[n+24>>2]=e}if((0|r)!=(0|s)){for(;be(h[r>>2]),(0|s)!=(0|(r=r+4|0)););(0|(e=h[n+16>>2]))!=(0|(i=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-i|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}r=t}}return r}function $(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0;if(a=h[t+12>>2],n=h[t+20>>2],n=(r=(l=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(r>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=l+h[t>>2]|0,h[e>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a=n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,u=l,h[t+16>>2]=l,h[t+20>>2]=n,p[e>>2]>32||(l=h[t+12>>2],n=a,n=(a=r+8|0)>>>0<8?n+1|0:n,a>>>0>p[t+8>>2]&(0|n)>=(0|l)|(0|n)>(0|l))))){if(n=u+h[t>>2]|0,o=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=o,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,!o)return 1;if(o=0,h[e+8>>2]=0,ze(e+16|0,t)&&Tt(e+32|0,t)&&Tt(e+52|0,t)&&Tt(e+72|0,t)){_=h[e+4>>2],l=i,t=0,i=0,I=r=I-32|0,a=e,e=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=mr(n=e<<2),h[r+8>>2]=t,i=t+n|0,h[r+16>>2]=i,xt(t,0,n),h[r+12>>2]=i}n=h[a+116>>2],(o=h[n>>2])&&(h[n+4>>2]=o,be(o),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=h[r+12>>2],t=h[r+8>>2],e=h[a+12>>2]),h[n+4>>2]=i,h[n>>2]=t,h[n+8>>2]=h[r+16>>2],t=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=mr(e<<=2),h[r+8>>2]=s,t=e+s|0,h[r+16>>2]=t,xt(s,0,e),h[r+12>>2]=t}e=h[a+128>>2],(i=h[e>>2])&&(h[e+4>>2]=i,be(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,Qe(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,n=1,e=(t=h[r+28>>2])+1|0,h[r+28>>2]=e;r:if(!(e>>>0<t>>>0)){for(w=a+16|0;;){if(c=h[r+12>>2],n=h[r+24>>2],t=h[c+((i=((t=n+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+b(t-b(i,341)|0,12)|0,i=h[t+8>>2],o=h[t+4>>2],u=h[t>>2],h[r+28>>2]=s,1+(((s=(t=h[r+16>>2])-c|0)?b(s>>2,341)-1|0:0)-(e+n|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[r+16>>2]=h[r+16>>2]-4),u>>>0>_>>>0){n=0;break r}if(n=0,(s=(0|o)==((e=h[a+12>>2])-1|0)?0:o+1|0)>>>0>=e>>>0)break r;g=(e=h[a+116>>2])+(t=b(i,12))|0;n:{if(c=s<<2,A=t+h[a+128>>2]|0,!(o=h[a>>2]-h[c+h[A>>2]>>2]|0)){if(!u)break n;if((0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=u+h[l+28>>2],h[a+8>>2]=e+u;break n}for(;;){o=0;a:if((0|e)!=(0|s))for(;;){if(c=b(o,20)+e|0,i=h[g>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break a;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(n=n+1|0)))break n;e=h[l+16>>2],s=h[l+20>>2]}}a:{s:{o:{l:{if(u>>>0<=2){if(i=h[a+104>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break l;break a}if(p[a+8>>2]>p[a+4>>2])break r;if(Bt((n=e)+(e=t+12|0)|0,h[g>>2],h[g+4>>2]),e=c+h[e+h[a+116>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<o-1),h[r+4>>2]=0,mi(w,31^y(u),r+4|0),f=i+1|0,(0|(n=u-(e=(u>>>1|0)-h[r+4>>2]|0)|0))!=(0|e)){if((0|(o=h[a+84>>2]))==h[a+76>>2])break o;u=h[o>>2],m=(g=h[a+88>>2])+1|0,h[a+88>>2]=m,u&=-2147483648>>>g;c:{if(32==(0|m)){if(h[a+88>>2]=0,h[a+84>>2]=o+4,u)break c;break o}if(!u)break o}}else n=e;o=n,n=e;break s}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break a}o=e}if(e=h[a+128>>2],u=h[(t=e+t|0)>>2],h[(c=u+c|0)>>2]=h[c>>2]+1,Bt(e+b(f,12)|0,u,h[t+4>>2]),n&&(e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((u=h[r+16>>2]-t|0)?b(u>>2,341)-1|0:0))&&(Qe(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(u=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=s,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!o)break n;e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((i=h[r+16>>2]-t|0)?b(i>>2,341)-1|0:0))&&(Qe(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=s,h[e>>2]=o,h[r+28>>2]=h[r+28>>2]+1;break n}if(u)for(;;){if(e)for(s=h[a+36>>2],o=h[a+92>>2],S=h[a+104>>2],T=h[g>>2],M=h[A>>2],e=0;;){h[o+(h[(c=(e<<2)+S|0)>>2]<<2)>>2]=0,i=h[c>>2]<<2;a:if(t=h[a>>2]-h[i+M>>2]|0)if(i=i+o|0,(0|(v=32-(f=h[a+48>>2])|0))>=(0|t)){if((0|(m=h[a+44>>2]))==(0|s)){h[i>>2]=0;break a}if(h[i>>2]=h[m>>2]<<f>>>32-t,t=t+h[a+48>>2]|0,h[a+48>>2]=t,32!=(0|t))break a;h[a+48>>2]=0,h[a+44>>2]=m+4}else(0|s)!=(0|(E=(m=h[a+44>>2])+4|0))?(R=h[m>>2],h[a+44>>2]=E,v=t-v|0,h[a+48>>2]=v,h[i>>2]=h[m+4>>2]>>>32-v|R<<f>>>32-t):h[i>>2]=0;if(t=h[c>>2]<<2,h[(i=t+o|0)>>2]=h[i>>2]|h[t+T>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;a:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(c=b(o,20)+e|0,i=h[a+92>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break a;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+b(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(n=n+1|0)))break n;e=h[a+12>>2]}}if(!(e=h[r+28>>2]))break}n=1}if(h[r+28>>2]=0,(t=(s=h[r+16>>2])-(e=h[r+12>>2])|0)>>>0>=9)for(;be(h[e>>2]),e=h[r+12>>2]+4|0,h[r+12>>2]=e,(t=(s=h[r+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[r+24>>2]=i}if((0|e)!=(0|s)){for(;be(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[r+16>>2]))!=(0|(t=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&be(e),I=r+32|0;break e}bn(),x()}bn(),x()}o=n}}return o}function Y(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(s=h[t+12>>2],a=h[t+20>>2],!((0|s)<=(0|(a=(n=(l=h[t+16>>2])+4|0)>>>0<4?a+1|0:a))&n>>>0>p[t+8>>2]|(0|s)<(0|a)||(a=l+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,s=a=h[t+20>>2],a=(l=(n=h[t+16>>2])+4|0)>>>0<4?s+1|0:s,c=l,h[t+16>>2]=l,h[t+20>>2]=a,p[e>>2]>32||(l=h[t+12>>2],a=s,a=(s=n+8|0)>>>0<8?a+1|0:a,s>>>0>p[t+8>>2]&(0|a)>=(0|l)|(0|a)>(0|l))))){if(r=c+h[t>>2]|0,a=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=a,r=h[t+20>>2],r=(s=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=s,h[t+20>>2]=r,!a)return 1;if(r=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){_=h[e+4>>2],l=i,t=0,i=0,I=n=I-32|0,s=e,r=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(r){if(r>>>0>=1073741824)break t;t=mr(e=r<<2),h[n+8>>2]=t,i=e+t|0,h[n+16>>2]=i,xt(t,0,e),h[n+12>>2]=i}e=h[s+628>>2],(a=h[e>>2])&&(h[e+4>>2]=a,be(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=h[s+12>>2],i=h[n+12>>2],t=h[n+8>>2]),h[e+4>>2]=i,h[e>>2]=t,h[e+8>>2]=h[n+16>>2],t=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;i:{if(r){if(r>>>0>=1073741824)break i;o=mr(e=r<<2),h[n+8>>2]=o,t=e+o|0,h[n+16>>2]=t,xt(o,0,e),h[n+12>>2]=t}e=h[s+640>>2],(i=h[e>>2])&&(h[e+4>>2]=i,be(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,o=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=o,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,i=1,r=(e=h[n+28>>2])+1|0,h[n+28>>2]=r;r:if(!(e>>>0>r>>>0)){for(;;){if(o=h[n+12>>2],i=h[n+24>>2],e=h[o+((t=((e=i+(a=r-1|0)|0)>>>0)/341|0)<<2)>>2]+b(e-b(t,341)|0,12)|0,f=h[e+8>>2],t=h[e+4>>2],c=h[e>>2],h[n+28>>2]=a,1+(((a=(e=h[n+16>>2])-o|0)?b(a>>2,341)-1|0:0)-(i+r|0)|0)>>>0>=682&&(be(h[e-4>>2]),h[n+16>>2]=h[n+16>>2]-4),c>>>0>_>>>0){i=0;break r}if(i=0,(o=(0|t)==((e=h[s+12>>2])-1|0)?0:t+1|0)>>>0>=e>>>0)break r;g=(e=h[s+628>>2])+(u=b(f,12))|0;n:{a:if(m=o<<2,A=u+h[s+640>>2]|0,t=h[s>>2]-h[m+h[A>>2]>>2]|0){s:{o:{l:{c:{if(c>>>0<=2){if(e=h[s+616>>2],h[e>>2]=o,t=1,(r=h[s+12>>2])>>>0>1)break c;break s}if(p[s+8>>2]>p[s+4>>2])break r;if(Bt((i=e)+(e=u+12|0)|0,h[g>>2],h[g+4>>2]),e=m+h[e+h[s+628>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<t-1),t=0,r=0,e=31^y(c))for(;t=Gi(16+((r<<4)+s|0)|0)|t<<1,(0|e)!=(0|(r=r+1|0)););if(i=f+1|0,(0|(r=c-(e=(c>>>1|0)-t|0)|0))!=(0|e)){if((0|(t=h[s+596>>2]))==h[s+588>>2])break l;a=h[t>>2],g=(c=h[s+600>>2])+1|0,h[s+600>>2]=g,a&=-2147483648>>>c;u:{if(32==(0|g)){if(h[s+600>>2]=0,h[s+596>>2]=t+4,a)break u;break l}if(!a)break l}}else r=e;a=r,r=e;break o}for(;o=(r-1|0)==(0|o)?0:o+1|0,h[e+(t<<2)>>2]=o,(t=t+1|0)>>>0<(r=h[s+12>>2])>>>0;);break s}a=e}if(e=h[s+640>>2],c=h[(t=e+u|0)>>2],h[(u=c+m|0)>>2]=h[u>>2]+1,Bt(e+b(i,12)|0,c,h[t+4>>2]),r&&(t=h[n+28>>2]+h[n+24>>2]|0,e=h[n+12>>2],(0|t)==(0|((c=h[n+16>>2]-e|0)?b(c>>2,341)-1|0:0))?(Qe(n+8|0),t=h[n+24>>2]+h[n+28>>2]|0,c=h[n+12>>2]):c=e,e=h[c+((e=(t>>>0)/341|0)<<2)>>2]+b(t-b(e,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=o,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!a)break a;r=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|r)==(0|((e=h[n+16>>2]-t|0)?b(e>>2,341)-1|0:0))&&(Qe(n+8|0),r=h[n+24>>2]+h[n+28>>2]|0,t=h[n+12>>2]),e=h[t+((e=(r>>>0)/341|0)<<2)>>2]+b(r-b(e,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=o,h[e>>2]=a,r=h[n+28>>2]+1|0,h[n+28>>2]=r;break n}if(e=0,c)for(;;){if(r)for(o=h[s+548>>2],a=h[s+604>>2],w=h[s+616>>2],S=h[g>>2],T=h[A>>2],r=0;;){h[a+(h[(f=(r<<2)+w|0)>>2]<<2)>>2]=0,i=h[f>>2]<<2;s:if(t=h[s>>2]-h[i+T>>2]|0)if(i=i+a|0,(0|(v=32-(u=h[s+560>>2])|0))>=(0|t)){if((0|(m=h[s+556>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[m>>2]<<u>>>32-t,t=t+h[s+560>>2]|0,h[s+560>>2]=t,32!=(0|t))break s;h[s+560>>2]=0,h[s+556>>2]=m+4}else(0|o)!=(0|(E=(m=h[s+556>>2])+4|0))?(M=h[m>>2],h[s+556>>2]=E,v=t-v|0,h[s+560>>2]=v,h[i>>2]=h[m+4>>2]>>>32-v|M<<u>>>32-t):h[i>>2]=0;if(t=h[f>>2]<<2,h[(i=t+a|0)>>2]=h[i>>2]|h[t+S>>2],!((r=r+1|0)>>>0<p[s+12>>2]))break}a=0;s:if((0|(r=h[l+16>>2]))!=h[l+20>>2])for(;;){if(f=b(a,20)+r|0,i=h[s+604>>2]+(h[f+4>>2]<<2)|0,u=h[f>>2],!((o=h[f+12>>2])>>>0>3))if(t=h[l+12>>2],h[f+16>>2]){for(r=0;t=(t=We(t,(r<<2)+i|0,o))+(o=h[f+12>>2])|0,(r=r+1|0)>>>0<p[f+16>>2];);i=h[l+12>>2]}else i=t;if(r=h[l+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(t=h[u+40>>2],We(h[h[u>>2]>>2]+b(t,r)|0,i,t),a=a+1|0,r=h[l+16>>2],!(a>>>0<(h[l+20>>2]-r|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[s+8>>2]=h[s+8>>2]+1,(0|c)==(0|(e=e+1|0)))break a;r=h[s+12>>2]}}else{if(e=0,!c)break a;for(;;){a=0;s:if((0|(r=h[l+16>>2]))!=h[l+20>>2])for(;;){if(f=b(a,20)+r|0,i=h[g>>2]+(h[f+4>>2]<<2)|0,u=h[f>>2],!((o=h[f+12>>2])>>>0>3))if(t=h[l+12>>2],h[f+16>>2]){for(r=0;t=(t=We(t,(r<<2)+i|0,o))+(o=h[f+12>>2])|0,(r=r+1|0)>>>0<p[f+16>>2];);i=h[l+12>>2]}else i=t;if(r=h[l+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(t=h[u+40>>2],We(h[h[u>>2]>>2]+b(t,r)|0,i,t),a=a+1|0,r=h[l+16>>2],!(a>>>0<(h[l+20>>2]-r|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[s+8>>2]=h[s+8>>2]+1,(0|c)==(0|(e=e+1|0)))break}}r=h[n+28>>2]}if(!r)break}i=1}if(h[n+28>>2]=0,(t=(o=h[n+16>>2])-(r=h[n+12>>2])|0)>>>0>=9)for(;be(h[r>>2]),r=h[n+12>>2]+4|0,h[n+12>>2]=r,(t=(o=h[n+16>>2])-r|0)>>>0>8;);switch(e=170,(t>>>2|0)-1|0){case 1:e=341;case 0:h[n+24>>2]=e}if((0|r)!=(0|o)){for(;be(h[r>>2]),(0|o)!=(0|(r=r+4|0)););(0|(e=h[n+16>>2]))!=(0|(t=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}r=i}}return r}function X(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(o=h[t+12>>2],a=h[t+20>>2],a=(s=(n=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,!(s>>>0>p[t+8>>2]&(0|a)>=(0|o)|(0|a)>(0|o)||(a=n+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,o=a=h[t+20>>2],a=(n=(s=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,l=n,h[t+16>>2]=n,h[t+20>>2]=a,p[e>>2]>32||(a=o,(0|(n=h[t+12>>2]))<=(0|(a=(o=s+8|0)>>>0<8?a+1|0:a))&o>>>0>p[t+8>>2]|(0|n)<(0|a))))){if(r=l+h[t>>2]|0,a=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=a,r=h[t+20>>2],r=(o=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,!a)return 1;if(r=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){A=h[e+4>>2],o=i,i=0,t=0,I=n=I-32|0,a=e,r=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(r){if(r>>>0>=1073741824)break t;i=mr(e=r<<2),h[n+8>>2]=i,t=e+i|0,h[n+16>>2]=t,xt(i,0,e),h[n+12>>2]=t}e=h[a+628>>2],(s=h[e>>2])&&(h[e+4>>2]=s,be(s),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=h[a+12>>2],i=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=i,h[e+8>>2]=h[n+16>>2],i=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,s=0;i:{if(r){if(r>>>0>=1073741824)break i;s=mr(e=r<<2),h[n+8>>2]=s,i=e+s|0,h[n+16>>2]=i,xt(s,0,e),h[n+12>>2]=i}e=h[a+640>>2],(t=h[e>>2])&&(h[e+4>>2]=t,be(t),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[n+8>>2],i=h[n+12>>2]),h[e+4>>2]=i,h[e>>2]=s,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,Qe(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+b(e-b(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,t=1,r=(e=h[n+28>>2])+1|0,h[n+28>>2]=r;r:if(!(e>>>0>r>>>0)){for(;;){if(f=h[n+12>>2],e=h[n+24>>2],i=h[f+((s=((i=e+(t=r-1|0)|0)>>>0)/341|0)<<2)>>2]+b(i-b(s,341)|0,12)|0,c=h[i+8>>2],l=h[i>>2],h[n+28>>2]=t,1+(((i=(t=h[n+16>>2])-f|0)?b(i>>2,341)-1|0:0)-(e+r|0)|0)>>>0>=682&&(be(h[t-4>>2]),h[n+16>>2]=h[n+16>>2]-4),t=0,l>>>0>A>>>0)break r;if(e=h[a+628>>2],(s=ft(a,l,m=(u=b(c,12))+h[a+640>>2]|0))>>>0>=p[a+12>>2])break r;f=e+u|0;n:{a:if(v=s<<2,i=h[a>>2]-h[v+h[m>>2]>>2]|0){s:{o:{l:{c:{if(l>>>0<=2){if(e=h[a+616>>2],h[e>>2]=s,i=1,(r=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break r;if((0|(t=(e=h[a+628>>2])+(m=b(g=c+1|0,12))|0))!=(0|f)&&(Bt(t,h[f>>2],h[f+4>>2]),e=h[a+628>>2]),e=v+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1),i=0,r=0,e=31^y(l))for(;i=Gi(16+((r<<4)+a|0)|0)|i<<1,(0|e)!=(0|(r=r+1|0)););if((0|(r=l-(e=(l>>>1|0)-i|0)|0))!=(0|e)){if((0|(t=h[a+596>>2]))==h[a+588>>2])break l;i=h[t>>2],f=(l=h[a+600>>2])+1|0,h[a+600>>2]=f,i&=-2147483648>>>l;u:{if(32==(0|f)){if(h[a+600>>2]=0,h[a+596>>2]=t+4,i)break u;break l}if(!i)break l}t=r}else t=e;r=e;break o}for(;s=(r-1|0)==(0|s)?0:s+1|0,h[e+(i<<2)>>2]=s,(i=i+1|0)>>>0<(r=h[a+12>>2])>>>0;);break s}t=e}if(e=h[a+640>>2],l=h[(i=e+u|0)>>2],h[(f=l+v|0)>>2]=h[f>>2]+1,Bt(e+m|0,l,h[i+4>>2]),r&&(i=h[n+28>>2]+h[n+24>>2]|0,e=h[n+12>>2],(0|i)==(0|((l=h[n+16>>2]-e|0)?b(l>>2,341)-1|0:0))?(Qe(n+8|0),i=h[n+24>>2]+h[n+28>>2]|0,l=h[n+12>>2]):l=e,e=h[l+((e=(i>>>0)/341|0)<<2)>>2]+b(i-b(e,341)|0,12)|0,h[e+8>>2]=c,h[e+4>>2]=s,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!t)break a;r=h[n+28>>2]+h[n+24>>2]|0,i=h[n+12>>2],(0|r)==(0|((e=h[n+16>>2]-i|0)?b(e>>2,341)-1|0:0))&&(Qe(n+8|0),r=h[n+24>>2]+h[n+28>>2]|0,i=h[n+12>>2]),e=h[i+((e=(r>>>0)/341|0)<<2)>>2]+b(r-b(e,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=t,r=h[n+28>>2]+1|0,h[n+28>>2]=r;break n}if(v=0,l)for(;;){if(r)for(s=h[a+548>>2],i=h[a+604>>2],w=h[a+616>>2],S=h[f>>2],T=h[m>>2],r=0;;){h[i+(h[(c=(r<<2)+w|0)>>2]<<2)>>2]=0,t=h[c>>2]<<2;s:if(e=h[a>>2]-h[t+T>>2]|0)if(t=t+i|0,(0|(_=32-(u=h[a+560>>2])|0))>=(0|e)){if((0|(g=h[a+556>>2]))==(0|s)){h[t>>2]=0;break s}if(h[t>>2]=h[g>>2]<<u>>>32-e,e=e+h[a+560>>2]|0,h[a+560>>2]=e,32!=(0|e))break s;h[a+560>>2]=0,h[a+556>>2]=g+4}else(0|s)!=(0|(E=(g=h[a+556>>2])+4|0))?(M=h[g>>2],h[a+556>>2]=E,_=e-_|0,h[a+560>>2]=_,h[t>>2]=h[g+4>>2]>>>32-_|M<<u>>>32-e):h[t>>2]=0;if(e=h[c>>2]<<2,h[(t=e+i|0)>>2]=h[t>>2]|h[e+S>>2],!((r=r+1|0)>>>0<p[a+12>>2]))break}e=0;s:if((0|(r=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=b(e,20)+r|0,t=h[a+604>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(r=0;i=(i=We(i,(r<<2)+t|0,s))+(s=h[c+12>>2])|0,(r=r+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(r=h[o+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+b(i,r)|0,t,i),e=e+1|0,r=h[o+16>>2],!(e>>>0<(h[o+20>>2]-r|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(v=v+1|0)))break a;r=h[a+12>>2]}}else{if(m=0,!l)break a;for(;;){e=0;s:if((0|(r=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=b(e,20)+r|0,t=h[f>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(r=0;i=(i=We(i,(r<<2)+t|0,s))+(s=h[c+12>>2])|0,(r=r+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(r=h[o+28>>2],(r=d[u+84|0]?r:h[h[u+68>>2]+(r<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+b(i,r)|0,t,i),e=e+1|0,r=h[o+16>>2],!(e>>>0<(h[o+20>>2]-r|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(m=m+1|0)))break}}r=h[n+28>>2]}if(!r)break}t=1}if(h[n+28>>2]=0,(i=(s=h[n+16>>2])-(r=h[n+12>>2])|0)>>>0>=9)for(;be(h[r>>2]),r=h[n+12>>2]+4|0,h[n+12>>2]=r,(i=(s=h[n+16>>2])-r|0)>>>0>8;);switch(e=170,(i>>>2|0)-1|0){case 1:e=341;case 0:h[n+24>>2]=e}if((0|r)!=(0|s)){for(;be(h[r>>2]),(0|s)!=(0|(r=r+4|0)););(0|(e=h[n+16>>2]))!=(0|(i=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-i|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&be(e),I=n+32|0;break e}bn(),x()}bn(),x()}r=t}}return r}function q(e,t,i,r,n){var s,o,l,c=0,f=0,p=0,m=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,x=0,M=0,R=0,P=0,C=0,k=0;I=s=I-80|0,h[s+76>>2]=t,l=s+55|0,o=s+56|0,t=0;e:{t:{i:{r:{n:for(;;){if((2147483647-A|0)<(0|t))break r;A=t+A|0;a:{s:{o:{if(_=h[s+76>>2],v=d[0|(t=_)])for(;;){l:{c:if(c=255&v){if(37!=(0|c))break l;for(v=t;;){if(37!=d[t+1|0])break c;if(c=t+2|0,h[s+76>>2]=c,v=v+1|0,f=d[t+2|0],t=c,37!=(0|f))break}}else v=t;if((0|(t=v-_|0))>(0|(R=2147483647-A|0)))break r;if(e&&$r(e,_,t),t)continue n;S=-1,c=1,t=h[s+76>>2],a[t+1|0]-48>>>0>=10|36!=d[t+2|0]||(S=a[t+1|0]-48|0,T=1,c=3),t=c+t|0,h[s+76>>2]=t,E=0;c:if((f=(m=a[0|t])-32|0)>>>0>31)c=t;else if(c=t,75913&(p=1<<f))for(;;){if(c=t+1|0,h[s+76>>2]=c,E|=p,(f=(m=a[t+1|0])-32|0)>>>0>=32)break c;if(t=c,!(75913&(p=1<<f)))break}c:if(42!=(0|m)){if((0|(w=zi(s+76|0)))<0)break r;t=h[s+76>>2]}else{if(a[c+1|0]-48>>>0>=10||(t=h[s+76>>2],36!=d[t+2|0])){if(T)break o;T=0,w=0,e&&(t=h[i>>2],h[i>>2]=t+4,w=h[t>>2]),t=h[s+76>>2]+1|0}else h[((a[t+1|0]<<2)+n|0)-192>>2]=10,w=h[((a[t+1|0]<<3)+r|0)-384>>2],T=1,t=t+3|0;if(h[s+76>>2]=t,(0|w)>=0)break c;w=0-w|0,E|=8192}if(c=0,p=-1,f=0,46==d[0|t])if(42!=d[t+1|0])h[s+76>>2]=t+1,p=zi(s+76|0),t=h[s+76>>2],f=1;else{if(a[t+2|0]-48>>>0>=10||(t=h[s+76>>2],36!=d[t+3|0])){if(T)break o;e?(t=h[i>>2],h[i>>2]=t+4,p=h[t>>2]):p=0,t=h[s+76>>2]+2|0}else h[((a[t+2|0]<<2)+n|0)-192>>2]=10,p=h[((a[t+2|0]<<3)+r|0)-384>>2],t=t+4|0;h[s+76>>2]=t,f=(-1^p)>>>31|0}for(x=f;;){if(y=c,v=28,a[0|t]-123>>>0<4294967238)break i;if(m=t+1|0,h[s+76>>2]=m,c=a[0|t],t=m,!((c=d[13743+(c+b(y,58)|0)|0])-1>>>0<8))break}c:{u:{if(27!=(0|c)){if(!c)break i;if((0|S)>=0){h[(S<<2)+n>>2]=c,c=h[4+(t=(S<<3)+r|0)>>2],h[s+64>>2]=h[t>>2],h[s+68>>2]=c;break u}if(!e)break a;wt(s- -64|0,c,i),m=h[s+76>>2];break c}if((0|S)>=0)break i}if(t=0,!e)continue n}f=-65537&E,c=8192&E?f:E,E=0,S=1244,v=o;c:{u:{h:{d:{f:{p:{m:{g:{b:{v:{_:{y:{A:{E:{w:{switch(t=a[m-1|0],(t=y&&3==(15&t)?-33&t:t)-88|0){case 11:break c;case 9:case 13:case 14:case 15:break u;case 27:break m;case 12:case 17:break v;case 23:break _;case 0:case 32:break y;case 24:break A;case 22:break E;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break s}switch(t-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break s}if(83==(0|t))break p;break s}m=h[s+64>>2],f=h[s+68>>2],S=1244;break b}t=0;E:switch(255&y){case 0:case 1:case 6:h[h[s+64>>2]>>2]=A;continue n;case 2:c=h[s+64>>2],h[c>>2]=A,h[c+4>>2]=A>>31;continue n;case 3:u[h[s+64>>2]>>1]=A;continue n;case 4:a[h[s+64>>2]]=A;continue n;case 7:break E;default:continue n}c=h[s+64>>2],h[c>>2]=A,h[c+4>>2]=A>>31;continue n}p=p>>>0>8?p:8,c|=8,t=120}if(y=o,M=32&t,(m=h[s+64>>2])|(f=h[s+68>>2]))for(;a[0|(y=y-1|0)]=M|d[14272+(15&m)|0],P=!f&m>>>0>15|0!=(0|f),_=f,f=f>>>4|0,m=(15&_)<<28|m>>>4,P;);if(_=y,!(h[s+64>>2]|h[s+68>>2])|!(8&c))break g;S=1244+(t>>>4|0)|0,E=2;break g}if(t=o,(m=h[s+64>>2])|(f=h[s+68>>2]))for(;a[0|(t=t-1|0)]=7&m|48,y=!f&m>>>0>7|0!=(0|f),_=f,f=f>>>3|0,m=(7&_)<<29|m>>>3,y;);if(_=t,!(8&c))break g;p=(0|(t=o-_|0))<(0|p)?p:t+1|0;break g}f=t=h[s+68>>2],m=h[s+64>>2],(0|t)<0?(f=0-((0!=(0|m))+f|0)|0,m=0-m|0,h[s+64>>2]=m,h[s+68>>2]=f,E=1,S=1244):2048&c?(E=1,S=1245):S=(E=1&c)?1246:1244}if(_=o,f)for(;C=_=_-1|0,k=m-Xi(y=qe(m,f,10,0),t=L,10,0)|48,a[0|C]=k,M=f>>>0>9,m=y,f=t,M;);else y=m;if(y)for(;t=(y>>>0)/10|0,a[0|(_=_-1|0)]=y-b(t,10)|48,f=y>>>0>9,y=t,f;);}if((0|p)<0&&x)break r;if(c=x?-65537&c:c,!(p|0!=((f=h[s+64>>2])|(t=h[s+68>>2])))){v=_=o,p=0;break s}p=(0|(t=!(t|f)+(o-_|0)|0))<(0|p)?p:t;break s}v=0!=(0|(c=m=(0|p)<0?2147483647:p));m:{g:{b:{v:if(!(!(3&(t=_=(t=h[s+64>>2])||1758))|!c))for(;;){if(!d[0|t])break b;if(v=0!=(0|(c=c-1|0)),!(3&(t=t+1|0)))break v;if(!c)break}if(!v)break g}b:if(!(!d[0|t]|c>>>0<4))for(;;){if((-1^(v=h[t>>2]))&v-16843009&-2139062144)break b;if(t=t+4|0,!((c=c-4|0)>>>0>3))break}if(c)for(;;){if(!d[0|t])break m;if(t=t+1|0,!(c=c-1|0))break}}t=0}if(v=(t=t?t-_|0:m)+_|0,(0|p)>=0){c=f,p=t;break s}if(c=f,p=t,d[0|v])break r;break s}if(p){v=h[s+64>>2];break d}t=0,Ji(e,32,w,0,c);break h}h[s+12>>2]=0,h[s+8>>2]=h[s+64>>2],v=s+8|0,h[s+64>>2]=v,p=-1}t=0;d:{for(;;){if(!(f=h[v>>2]))break d;if(!((_=(0|(f=Kt(s+4|0,f)))<0)|f>>>0>p-t>>>0)){if(v=v+4|0,p>>>0>(t=t+f|0)>>>0)continue;break d}break}if(_)break t}if(v=61,(0|t)<0)break i;if(Ji(e,32,w,t,c),t)for(p=0,v=h[s+64>>2];;){if(!(f=h[v>>2]))break h;if((p=(f=Kt(s+4|0,f))+p|0)>>>0>t>>>0)break h;if($r(e,s+4|0,f),v=v+4|0,!(t>>>0>p>>>0))break}else t=0}Ji(e,32,w,t,8192^c),t=(0|t)<(0|w)?w:t;continue n}if((0|p)<0&&x)break r;if(v=61,(0|(t=0|Rn[0](e,g[s+64>>3],w,p,c,t)))>=0)continue n;break i}a[s+55|0]=h[s+64>>2],p=1,_=l,c=f;break s}c=t+1|0,h[s+76>>2]=c,v=d[t+1|0],t=c}if(e)break e;if(!T)break a;for(t=1;;){if(e=h[(t<<2)+n>>2]){if(wt((t<<3)+r|0,e,i),A=1,10!=(0|(t=t+1|0)))continue;break e}break}if(A=1,t>>>0>=10)break e;for(;;){if(h[(t<<2)+n>>2])break o;if(10==(0|(t=t+1|0)))break}break e}v=28;break i}if((0|(y=(0|p)<(0|(m=v-_|0))?m:p))>(2147483647-E|0))break r;if(v=61,(0|R)<(0|(t=(0|(f=y+E|0))>(0|w)?f:w)))break i;Ji(e,32,t,f,c),$r(e,S,E),Ji(e,48,t,f,65536^c),Ji(e,48,y,m,0),$r(e,_,m),Ji(e,32,t,f,8192^c);continue}break}A=0;break e}v=61}h[4190]=v}A=-1}return I=s+80|0,A}function Z(e,t,i,r){var n=0,s=0,o=0,l=0,c=0;e:{t:if(r){i:{r:switch(h[e+28>>2]-1|0){case 0:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=a[0|t],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(a[0|t])/v(127),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 1:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=d[0|t],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(d[0|t])/v(255),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 2:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=u[t>>1],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(u[t>>1])/v(32767),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 3:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=f[t>>1],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(f[t>>1])/v(65535),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 4:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=h[t>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(h[t>>2])*v(4.656612873077393e-10),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 5:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=p[t>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(p[t>>2])*v(2.3283064365386963e-10),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 6:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=+p[t>>2]+4294967296*+h[t+4>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(+p[t>>2]+4294967296*+h[t+4>>2])*v(10842021724855044e-35),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 7:c=1;n:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(n=h[e>>2],l=h[n>>2],s=t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,n=(o=h[n+4>>2])-l|0,!d[e+32|0]){if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=+p[t>>2]+4294967296*+p[t+4>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|n)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+r>>2]=v(+p[t>>2]+4294967296*+p[t+4>>2])*v(5.421010862427522e-20),(0|(s=s+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break n;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|i)>(0|n))break i;break t;case 8:if(c=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,o=h[n+4>>2];;){if(t>>>0>=o>>>0)break e;if(m[(s<<2)+r>>2]=m[t>>2],t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 9:if(c=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,o=h[n+4>>2];;){if(t>>>0>=o>>>0)break e;if(m[(s<<2)+r>>2]=g[t>>3],t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 10:break r;default:break t}if(c=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(o=h[e>>2],t=(n=h[o>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0;;){if(p[o+4>>2]<=t>>>0)break e;if(m[(s<<2)+r>>2]=d[0|t]?v(1):v(0),t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break t}xt((n<<2)+r|0,0,i-n<<2)}return c}return 0}function J(e,t){var i,r,n=0,s=0,o=0;I=i=I-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[(s=e+16|0)>>2]=0,h[s+4>>2]=0,a[s+5|0]=0,a[s+6|0]=0,a[s+7|0]=0,a[s+8|0]=0,a[s+9|0]=0,a[s+10|0]=0,a[s+11|0]=0,a[s+12|0]=0,h[(n=s+16|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+32|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+48|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s- -64|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+80|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+96|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+112|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+128|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+144|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+160|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+176|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+192|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+208|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+224|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+240|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+256|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+272|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+288|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+304|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+320|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+336|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+352|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+368|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+384|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+400|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+416|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+432|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+448|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+464|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(n=s+480|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[(s=s+496|0)>>2]=0,h[s+4>>2]=0,a[s+5|0]=0,a[s+6|0]=0,a[s+7|0]=0,a[s+8|0]=0,a[s+9|0]=0,a[s+10|0]=0,a[s+11|0]=0,a[s+12|0]=0,h[e+528>>2]=0,h[e+532>>2]=0,a[e+533|0]=0,a[e+534|0]=0,a[e+535|0]=0,a[e+536|0]=0,a[e+537|0]=0,a[e+538|0]=0,a[e+539|0]=0,a[e+540|0]=0,h[e+544>>2]=0,h[e+548>>2]=0,h[e+560>>2]=0,h[e+552>>2]=0,h[e+556>>2]=0,h[e+564>>2]=0,h[e+568>>2]=0,h[e+580>>2]=0,h[e+572>>2]=0,h[e+576>>2]=0,h[e+584>>2]=0,h[e+588>>2]=0,h[e+600>>2]=0,h[e+592>>2]=0,h[e+596>>2]=0,h[e+612>>2]=0,h[e+604>>2]=0,h[e+608>>2]=0,r=e+628|0;e:{t:{if(t){if(t>>>0<1073741824)break t;bn(),x()}h[e+616>>2]=0,h[e+620>>2]=0,h[e+624>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,s=1;break e}n=mr(s=t<<2),h[e+604>>2]=n,o=n+s|0,h[e+612>>2]=o,xt(n,0,s),h[e+624>>2]=0,h[e+616>>2]=0,h[e+620>>2]=0,h[e+608>>2]=o,n=mr(s),h[e+616>>2]=n,o=n+s|0,h[e+624>>2]=o,xt(n,0,s),h[e+620>>2]=o,n=mr(s),h[i>>2]=n,o=n+s|0,h[i+8>>2]=o,xt(n,0,s),h[i+4>>2]=o,s=t<<5|1}return Vt(r,s,i),(n=h[i>>2])&&(h[i+4>>2]=n,be(n)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(n=mr(t<<=2),h[i>>2]=n,o=t+n|0,h[i+8>>2]=o,xt(n,0,t),h[i+4>>2]=o),Vt(e+640|0,s,i),(t=h[i>>2])&&(h[i+4>>2]=t,be(t)),I=i+16|0,e}function K(e,t){t|=0;var i,r,n,s=0,o=0,l=0,c=0,u=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0;I=i=I-96|0,n=h[4+(e|=0)>>2],l=h[n+32>>2],u=v=h[l+8>>2];e:if(!((0|(o=y=h[l+12>>2]))<=(0|(s=h[l+20>>2]))&(r=h[l+16>>2])>>>0>=u>>>0|(0|s)>(0|o)||(c=h[l>>2],A=d[c+r|0],o=(u=r+1|0)?s:s+1|0,h[l+16>>2]=u,h[l+20>>2]=o,(0|o)>=(0|y)&u>>>0>=v>>>0|(0|o)>(0|y)))){_=d[c+u|0],o=(u=r+2|0)>>>0<2?s+1|0:s,g=u,h[l+16>>2]=u,h[l+20>>2]=o;t:{if((0|(m=A<<24>>24))>=0){if(u=h[e+216>>2],A>>>0>=(h[e+220>>2]-u|0)/144>>>0)break e;if(u=u+b(A,144)|0,h[u>>2]<0)break t;break e}if(h[e+212>>2]>=0)break e;u=e+212|0}h[u>>2]=t;t:{i:{r:{if((65535&((u=f[n+36>>1])<<8|u>>>8))>>>0>=258){if((0|o)>=(0|y)&g>>>0>=v>>>0|(0|o)>(0|y))break e;if(u=d[c+g|0],s=(o=r+3|0)>>>0<3?s+1|0:s,h[l+16>>2]=o,h[l+20>>2]=s,s=u>>>0>1)break e;if(s=s?0:u,!_)break r;if(s)break e;break i}if(_)break i;s=0}if((0|m)<0?l=e+184|0:(l=h[e+216>>2]+b(A,144)|0,a[l+100|0]=0,l=l+104|0),1!=(0|s)?(I=o=I+-64|0,c=h[h[e+4>>2]+44>>2],s=mr(80),h[s>>2]=12672,h[s+4>>2]=0,h[s+76>>2]=0,h[s+72>>2]=l,h[s+68>>2]=c,h[s+8>>2]=12836,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s- -64>>2]=0,h[(u=_=s+56|0)>>2]=0,h[u+4>>2]=0,v=h[e+8>>2],h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[(u=g=o+24|0)>>2]=0,h[u+4>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o>>2]=12836,h[o+4>>2]=v,m=h[v>>2],u=h[v+4>>2],a[o+63|0]=0,Pt(y=g,(u-m>>2>>>0)/3|0,g=o+63|0),u=h[o+4>>2],m=h[u+28>>2],u=h[u+24>>2],a[o+63|0]=0,Pt(o+36|0,m-u>>2,g),h[o+20>>2]=s,h[o+16>>2]=c,h[o+12>>2]=l,h[o+8>>2]=v,mt(s+8|0,o),kt(_,h[o+48>>2],h[o+52>>2]),h[o>>2]=12836,(l=h[o+48>>2])&&(h[o+52>>2]=l,be(l)),h[o>>2]=12652,(l=h[o+36>>2])&&be(l),(l=h[o+24>>2])&&be(l),I=o- -64|0):(I=c=I-112|0,g=h[h[e+4>>2]+44>>2],s=mr(120),h[s>>2]=12204,h[s+4>>2]=0,h[s+116>>2]=0,h[s+112>>2]=l,h[s+108>>2]=g,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+56>>2]=0,h[s+60>>2]=0,h[s+8>>2]=12416,h[(o=s- -64|0)>>2]=0,h[o+4>>2]=0,h[s+72>>2]=0,h[s+76>>2]=0,h[s+80>>2]=0,h[s+84>>2]=0,h[s+88>>2]=0,h[s+104>>2]=0,h[s+96>>2]=0,h[s+100>>2]=0,_=h[e+8>>2],h[c+48>>2]=0,h[c+52>>2]=0,h[c+40>>2]=0,h[c+44>>2]=0,h[(o=m=c+32|0)>>2]=0,h[o+4>>2]=0,h[c+24>>2]=0,h[c+28>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,h[(o=c- -64|0)>>2]=0,h[o+4>>2]=0,h[c+72>>2]=0,h[c+76>>2]=0,h[c+80>>2]=0,h[c+84>>2]=0,h[c+88>>2]=0,h[c+104>>2]=0,h[c+56>>2]=0,h[c+60>>2]=0,h[c+8>>2]=12416,h[c+96>>2]=0,h[c+100>>2]=0,h[c+12>>2]=_,u=h[_>>2],o=h[_+4>>2],a[c+111|0]=0,Pt(v=m,(o-u>>2>>>0)/3|0,m=c+111|0),o=h[c+12>>2],u=h[o+28>>2],o=h[o+24>>2],a[c+111|0]=0,Pt(c+44|0,u-o>>2,m),h[c+28>>2]=s,h[c+24>>2]=g,h[c+20>>2]=l,h[c+16>>2]=_,mt(l=s+8|0,o=c+8|0),(0|o)!=(0|l)?(kt(s+56|0,h[o+48>>2],h[o+52>>2]),kt(s+68|0,h[o+60>>2],h[o- -64>>2]),kt(s+80|0,h[o+72>>2],h[o+76>>2]),h[s+92>>2]=h[o+84>>2],Bt(s+96|0,h[o+88>>2],h[o+92>>2])):h[s+92>>2]=h[o+84>>2],h[c+8>>2]=12416,(l=h[c+96>>2])&&(h[c+100>>2]=l,be(l)),(l=h[c+80>>2])&&(h[c+84>>2]=l,be(l)),(l=h[c+68>>2])&&(h[c+72>>2]=l,be(l)),(l=h[c+56>>2])&&(h[c+60>>2]=l,be(l)),h[c+8>>2]=12652,(l=h[c+44>>2])&&be(l),(l=h[c+32>>2])&&be(l),I=c+112|0),!s)break e;break t}if((0|m)<0)break e;u=h[n+44>>2],l=h[e+216>>2],s=mr(80),h[s+76>>2]=0,h[s+68>>2]=u,h[s+8>>2]=11900,h[s>>2]=12964,h[s+4>>2]=0,p=104+(o=l+b(A,144)|0)|0,h[s+72>>2]=p,h[s- -64>>2]=0,h[s+56>>2]=0,h[s+60>>2]=0,h[s+52>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[i+24>>2]=u,h[i+68>>2]=0,h[i+72>>2]=0,h[i+60>>2]=0,h[i+64>>2]=0,h[i+52>>2]=0,h[i+56>>2]=0,h[i+44>>2]=0,h[i+48>>2]=0,h[i+84>>2]=0,h[i+88>>2]=0,h[i+76>>2]=0,h[i+80>>2]=0,h[i+28>>2]=s,l=h[i+28>>2],h[i+8>>2]=h[i+24>>2],h[i+12>>2]=l,o=o+4|0,h[i+16>>2]=o,h[i+20>>2]=p,h[i+36>>2]=0,h[i+40>>2]=0,h[i+32>>2]=11900,l=h[i+20>>2],h[i>>2]=h[i+16>>2],h[i+4>>2]=l,pi(p=i+32|0,o,i),mt(l=s+8|0,p),(0|l)!=(0|p)&&kt(s+56|0,h[p+48>>2],h[p+52>>2]),cr(p)}s=Bi(mr(64),s),m=h[e+4>>2],e=s;t:{i:{if((0|(s=t))>=0){if(o=m+8|0,!((0|(u=(t=h[m+12>>2])-(l=h[m+8>>2])>>2))>(0|s)))if(p=s+1|0,s>>>0>=u>>>0)St(o,p-u|0);else if(!(u>>>0<=p>>>0)){if((0|(l=l+(p<<2)|0))!=(0|t))for(;p=h[(t=t-4|0)>>2],h[t>>2]=0,p&&Rn[h[h[p>>2]+4>>2]](p),(0|t)!=(0|l););h[m+12>>2]=l}if(l=h[o>>2]+(s<<2)|0,t=h[l>>2],h[l>>2]=e,t)break i;break t}if(t=e,!e)break t}Rn[h[h[t>>2]+4>>2]](t)}p=(-1^s)>>>31|0}return I=i+96|0,0|p}function Q(e){var t,i=0,r=0,n=0,a=0,s=0;if(I=t=I-16|0,h[t+12>>2]=e,e>>>0<=211)n=h[Li(14288,14480,t+12|0)>>2];else{for(e>>>0>=4294967292&&(Tn(),x()),n=b(a=(e>>>0)/210|0,210),h[t+8>>2]=e-n,s=Li(14480,14672,t+8|0)-14480>>2;;){n=h[14480+(s<<2)>>2]+n|0,e=5;e:{for(;;){t:if(47!=(0|e)){if((i=h[14288+(e<<2)>>2])>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if(e=e+1|0,(0|b(i,r))!=(0|n))continue}else for(e=211;;){if((i=(n>>>0)/(e>>>0)|0)>>>0<e>>>0)break e;if((0|b(e,i))==(0|n))break t;if((i=e+10|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+12|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+16|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+18|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+22|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+28|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+30|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+36|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+40|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+42|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+46|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+52|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+58|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+60|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+66|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+70|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+72|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+78|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+82|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+88|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+96|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+100|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+102|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+106|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+108|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+112|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+120|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+126|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+130|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+136|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+138|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+142|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+148|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+150|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+156|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+162|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+166|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+168|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+172|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+178|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+180|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+186|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+190|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+192|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+196|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+198|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if((0|b(i,r))==(0|n))break t;if((i=e+208|0)>>>0>(r=(n>>>0)/(i>>>0)|0)>>>0)break e;if(e=e+210|0,(0|b(i,r))==(0|n))break}break}s=(e=48==(0|(n=s+1|0)))?0:n,n=b(a=e+a|0,210);continue}break}h[t+12>>2]=n}return I=t+16|0,n}function ee(e,t){var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,_=0,y=0,A=0;I=i=I-16|0;e:{t:{i:{if(d[h[e+4>>2]+36|0]<=1){if(m=-1,r=h[t+20>>2],r=(n=(s=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(0|(g=h[t+12>>2]))<=(0|r)&n>>>0>p[t+8>>2]|(0|r)>(0|g))break i;s=s+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[i+12>>2]=s,h[t+16>>2]=n,h[t+20>>2]=r}else{if(m=-1,!Si(1,i+12|0,t))break i;s=h[i+12>>2]}r:{n:{a:{s:{o:{l:if(s){if(r=h[e+8>>2],(h[r+4>>2]-h[r>>2]>>2>>>0)/3>>>0<s>>>0)break i;if((65535&((r=f[h[e+4>>2]+36>>1])<<8|r>>>8))>>>0>=258){g=0;c:{u:{for(;;){if(!Si(1,i+8|0,t))break i;if(r=h[i+8>>2],!Si(1,i+8|0,t))break i;if((o=r+o|0)>>>0<(r=h[i+8>>2])>>>0)break i;if(c=o-r|0,(0|(l=h[e+40>>2]))==h[e+44>>2]){if((u=1+(l=(0|(n=l-(r=h[e+36>>2])|0))/12|0)|0)>>>0>=357913942)break u;if(v=l<<1,(u=l>>>0<178956970?u>>>0>v>>>0?u:v:357913941)>>>0>=357913942)break c;l=(v=mr(u=b(u,12)))+b(l,12)|0,h[l+4>>2]=o,h[l>>2]=c,c=l+b((0|n)/-12|0,12)|0,l=l+12|0,(0|n)>0&&We(c,r,n),h[e+44>>2]=u+v,h[e+40>>2]=l,h[e+36>>2]=c,r&&be(r)}else h[l+4>>2]=o,h[l>>2]=c,h[e+40>>2]=l+12;if((0|(g=g+1|0))==(0|s))break}for(m=0,Ut(t,0,0),n=s>>>0>1?s:1;;){r=d[t+36|0];h:{d:{if((65535&((o=f[h[e+4>>2]+36>>1])<<8|o>>>8))>>>0<=513){if(!r)break h;if(l=0,(s=(o=(r=h[t+32>>2])>>>3|0)+(g=h[t+24>>2])|0)>>>0>=(c=h[t+28>>2])>>>0?s=r:(l=d[0|s],s=r+1|0,h[t+32>>2]=s,o=s>>>3|0,l=l>>>(7&r)&1),c>>>0>o+g>>>0)break d;break h}if(!r)break h;if(l=0,s=h[t+32>>2],(r=h[t+24>>2]+(s>>>3|0)|0)>>>0>=p[t+28>>2])break h;l=d[0|r]>>>(7&s)&1}h[t+32>>2]=s+1}if(r=h[e+36>>2]+b(m,12)|0,a[r+8|0]=254&d[r+8|0]|1&l,(0|n)==(0|(m=m+1|0)))break}a[t+36|0]=0,r=h[t+20>>2],o=0,n=(o=(s=h[t+32>>2]+7|0)>>>0<7?1:o)>>>3|0,o=(s=(7&o)<<29|s>>>3)+h[t+16>>2]|0,r=r+n|0,h[t+16>>2]=o,h[t+20>>2]=s>>>0>o>>>0?r+1|0:r;break l}bn(),x()}break e}for(g=0;;){if(n=h[t+12>>2],o=r=h[t+20>>2],r=(u=(c=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,v=u,(_=h[t+8>>2])>>>0<u>>>0&(0|r)>=(0|n)|(0|r)>(0|n))break i;if(y=h[t>>2],A=d[0|(u=y+c|0)]|d[u+1|0]<<8|d[u+2|0]<<16|d[u+3|0]<<24,h[t+16>>2]=v,h[t+20>>2]=r,r=o,(u=c+8|0)>>>0>_>>>0&(0|(r=u>>>0<8?r+1|0:r))>=(0|n)|(0|r)>(0|n))break i;if(v=d[0|(v=v+y|0)]|d[v+1|0]<<8|d[v+2|0]<<16|d[v+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=r,(0|r)>=(0|n)&u>>>0>=_>>>0|(0|r)>(0|n))break i;if(r=d[u+y|0],o=(n=c+9|0)>>>0<9?o+1|0:o,h[t+16>>2]=n,h[t+20>>2]=o,l=1&r|-2&l,(0|(r=h[e+40>>2]))==h[e+44>>2]){if((c=1+(r=(0|(n=r-(o=h[e+36>>2])|0))/12|0)|0)>>>0>=357913942)break o;if(u=r<<1,(c=r>>>0<178956970?c>>>0>u>>>0?c:u:357913941)>>>0>=357913942)break e;r=(_=mr(u=b(c,12)))+b(r,12)|0,a[r+8|0]=l,h[r+4>>2]=v,h[r>>2]=A,c=r+b((0|n)/-12|0,12)|0,(0|n)>0&&We(c,o,n),h[e+44>>2]=u+_,h[e+40>>2]=r+12,h[e+36>>2]=c,o&&be(o)}else a[r+8|0]=l,h[r+4>>2]=v,h[r>>2]=A,h[e+40>>2]=r+12;if((0|(g=g+1|0))==(0|s))break}}if(h[i+8>>2]=0,(r=65535&((r=f[h[e+4>>2]+36>>1])<<8|r>>>8))>>>0<=511){if(m=-1,r=h[t+20>>2],r=(s=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(0|(n=h[t+12>>2]))<=(0|r)&s>>>0>p[t+8>>2]|(0|r)>(0|n))break i;o=o+h[t>>2]|0,o=d[0|o]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=s,h[t+20>>2]=r}else{if(512!=(0|r))break r;if(m=-1,!Si(1,i+8|0,t))break i;o=h[i+8>>2]}if(!o)break r;if((65535&((r=f[h[e+4>>2]+36>>1])<<8|r>>>8))>>>0<258)break n;for(l=0,m=0;;){if(!Si(1,i+4|0,t))break a;if(m=h[i+4>>2]+m|0,(0|(r=h[e+52>>2]))==h[e+56>>2]){if((r=1+(c=(s=r-(n=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break s;if(g=s>>1,g=s>>>0<2147483644?r>>>0>g>>>0?r:g:1073741823){if(g>>>0>=1073741824)break e;r=mr(g<<2)}else r=0;h[(c=r+(c<<2)|0)>>2]=m,(0|s)>0&&We(r,n,s),h[e+56>>2]=r+(g<<2),h[e+52>>2]=c+4,h[e+48>>2]=r,n&&be(n)}else h[r>>2]=m,h[e+52>>2]=r+4;if((0|o)==(0|(l=l+1|0)))break}break r}bn(),x()}bn(),x()}m=-1;break i}for(s=0;;){if(r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(0|(m=h[t+12>>2]))<=(0|r)&l>>>0>p[t+8>>2]|(0|r)>(0|m)){m=-1;break i}if(n=n+h[t>>2]|0,g=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r,(0|(r=h[e+52>>2]))==h[e+56>>2]){if((r=1+(c=(n=r-(l=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(m=n>>1,m=n>>>0<2147483644?r>>>0>m>>>0?r:m:1073741823){if(m>>>0>=1073741824)break e;r=mr(m<<2)}else r=0;h[(c=r+(c<<2)|0)>>2]=g,(0|n)>0&&We(r,l,n),h[e+56>>2]=r+(m<<2),h[e+52>>2]=c+4,h[e+48>>2]=r,l&&be(l)}else h[r>>2]=g,h[e+52>>2]=r+4;if((0|o)==(0|(s=s+1|0)))break}}m=h[t+16>>2]}return I=i+16|0,m}bn(),x()}Zi(1336),x()}function te(e,t,i,r){var n=0,s=0,o=0,l=0,c=v(0),u=0;e:if(r){t:{i:switch(h[e+28>>2]-1|0){case 0:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(a[t+r|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 1:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((0|(n=a[0|s]))<0)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 2:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(((n=f[s>>1])-128&65535)>>>0<65280)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 3:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=f[s>>1])>>>0>127)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 4:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=h[s>>2])-128>>>0<4294967040)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 5:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=h[s>>2])>>>0>127)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 6:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(l=h[s>>2],-1==(0|(n=h[s+4>>2]-(l>>>0<128)|0))&l-128>>>0<4294967040|-1!=(0|n))break e;if(a[t+r|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 7:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(!(n=h[s+4>>2])&(l=h[s>>2])>>>0>127|n)break e;if(a[t+r|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 8:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(l=t+r|0,c=m[s>>2],n=v(_(c))<v(2147483648)?~~c:-2147483648,a[0|l]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 9:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(l=t+r|0,u=g[s>>3],n=_(u)<2147483648?~~u:-2147483648,a[0|l]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 10:break i;default:break e}i:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(a[t+r|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break i;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)<=(0|n))break e}xt(r+n|0,0,i-n|0)}return o}function ie(e,t,i,r){var n=0,s=0,o=0,l=0,c=v(0),u=0;e:if(r){t:{i:switch(h[e+28>>2]-1|0){case 0:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((0|(n=a[0|s]))<0)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 1:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(a[t+r|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 2:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=f[s>>1])>>>0>255)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 3:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=f[s>>1])>>>0>255)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 4:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=h[s>>2])>>>0>255)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 5:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if((n=h[s>>2])>>>0>255)break e;if(a[t+r|0]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 6:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(!(n=h[s+4>>2])&(l=h[s>>2])>>>0>255|n)break e;if(a[t+r|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 7:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(!(n=h[s+4>>2])&(l=h[s>>2])>>>0>255|n)break e;if(a[t+r|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 8:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(l=t+r|0,n=(c=m[s>>2])<v(4294967296)&c>=v(0)?~~c>>>0:0,a[0|l]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 9:r:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(l=t+r|0,n=(u=g[s>>3])<4294967296&u>=0?~~u>>>0:0,a[0|l]=n,(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break r;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|n))break t;break e;case 10:break i;default:break e}i:if(!((0|((0|i)<(0|(n=a[e+24|0]))?i:n))<=0)){if(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],n=h[s>>2],(0|t)>=(h[s+4>>2]-n|0))break e;for(s=t+n|0,t=0;;){if(a[t+r|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(n=a[e+24|0]))?i:n)))break i;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)<=(0|n))break e}xt(r+n|0,0,i-n|0)}return o}function re(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;e:{t:{i:{r:{n:if(h[e+92>>2]!=h[e+88>>2]){if((0|(i=h[e+52>>2]))==h[e+56>>2]){if((n=1+(a=(l=i-(r=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(i=l>>1,n=l>>>0<2147483644?i>>>0<n>>>0?n:i:1073741823){if(n>>>0>=1073741824)break e;i=mr(n<<2)}else i=0;h[(a=i+(a<<2)|0)>>2]=t,(0|l)>0&&We(i,r,l),h[e+56>>2]=i+(n<<2),h[e+52>>2]=a+4,h[e+48>>2]=i,r&&be(r)}else h[i>>2]=t,h[e+52>>2]=i+4;h[e+84>>2]=0,a=-1,i=-1;a:if(-1!=(0|t)){if(n=h[e+4>>2],-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(a=h[h[n>>2]+(i<<2)>>2]),(t>>>0)%3|0)r=t-1|0;else if(i=-1,-1==(0|(r=t+2|0)))break a;i=h[h[n>>2]+(r<<2)>>2]}if(o=i>>>3&536870908,n=h[e+36>>2],(l=h[(s=n+(a>>>3&536870908)|0)>>2])&(r=1<<a)||(h[s>>2]=r|l,tt(s=e+8|0,a,r=-1!=(0|t)?((n=t+1|0)>>>0)%3|0?n:t-2|0:-1),n=h[e+36>>2]),(n=h[(r=n+o|0)>>2])&(a=1<<i)||(h[r>>2]=n|a,a=-1,-1!=(0|t)&&(a=t-1|0,(t>>>0)%3|0||(a=t+2|0)),tt(r=e+8|0,i,a)),a=-1,a=-1!=(0|t)?h[h[h[e+4>>2]>>2]+(t<<2)>>2]:a,r=h[e+36>>2]+(a>>>3&536870908)|0,(n=h[r>>2])&(i=1<<a)||(h[r>>2]=i|n,tt(e+8|0,a,t)),!((0|(r=h[e+84>>2]))>2))for(;;){if(a=b(r,12)+e|0,(0|(t=h[a+52>>2]))==h[a+48>>2]){if(3!=(0|(r=r+1|0)))continue;break n}if(t=h[(i=t-4|0)>>2],h[a+52>>2]=i,h[e+84>>2]=r,-1==(0|t))break n;a=h[e+24>>2];a:if(!(h[a+((i=(t>>>0)/3|0)>>>3&268435452)>>2]>>>i&1)){s:{for(;;){h[(i=((u=(t>>>0)/3|0)>>>3&268435452)+a|0)>>2]=h[i>>2]|1<<u,a=-1;o:{l:{c:{u:{h:{d:{f:{p:{if(a=-1!=(0|t)?h[h[h[e+4>>2]>>2]+(t<<2)>>2]:a,r=h[e+36>>2]+(a>>>3&536870908)|0,!((n=h[r>>2])&(i=1<<a))){if(h[r>>2]=i|n,l=h[(h[h[e+16>>2]+96>>2]+b(u,12)|0)+((t>>>0)%3<<2)>>2],c=h[h[e+20>>2]+4>>2],(0|(i=h[c+4>>2]))==h[c+8>>2]){if((r=1+(n=(o=i-(s=h[c>>2])|0)>>2)|0)>>>0>=1073741824)break p;if(i=o>>1,r=o>>>0<2147483644?i>>>0<r>>>0?r:i:1073741823){if(r>>>0>=1073741824)break e;i=mr(r<<2)}else i=0;h[(n=i+(n<<2)|0)>>2]=l,(0|o)>0&&We(i,s,o),h[c+8>>2]=i+(r<<2),h[c+4>>2]=n+4,h[c>>2]=i,s&&be(s)}else h[i>>2]=l,h[c+4>>2]=i+4;if(o=h[e+12>>2],(0|(i=h[o+4>>2]))==h[o+8>>2]){if((r=1+(n=(s=i-(l=h[o>>2])|0)>>2)|0)>>>0>=1073741824)break f;if(i=s>>1,r=s>>>0<2147483644?i>>>0<r>>>0?r:i:1073741823){if(r>>>0>=1073741824)break e;i=mr(r<<2)}else i=0;h[(n=i+(n<<2)|0)>>2]=t,(0|s)>0&&We(i,l,s),h[o+8>>2]=i+(r<<2),h[o+4>>2]=n+4,h[o>>2]=i,l&&be(l)}else h[i>>2]=t,h[o+4>>2]=i+4;i=h[e+12>>2],h[h[i+12>>2]+(a<<2)>>2]=h[i+24>>2],h[i+24>>2]=h[i+24>>2]+1}if(-1==(0|t))break s;o=h[e+4>>2],a=-1,-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(a=h[h[o+12>>2]+(i<<2)>>2]);m:{if((0|b(u,3))==(0|t)){if(n=t+2|0,t=-1,-1==(0|n))break m}else n=t-1|0;t=h[h[o+12>>2]+(n<<2)>>2]}if(s=-1==(0|t),l=(t>>>0)/3|0,n=(a>>>0)/3|0,!(i=-1==(0|a))){if(i=i?-1:n,i=h[h[e+24>>2]+(i>>>3&536870908)>>2]&1<<i,s)break d;r=0!=(0|i);break h}if(r=1,!s)break h;break s}bn(),x()}bn(),x()}if(!i)break u;break s}if(i=s?-1:l,!(h[h[e+24>>2]+(i>>>3&536870908)>>2]>>>i&1)){if(n=0,i=h[h[o>>2]+(t<<2)>>2],h[h[e+36>>2]+(i>>>3&536870908)>>2]>>>i&1||(i=h[e+88>>2]+(i<<2)|0,n=h[i>>2],h[i>>2]=n+1,n=(0|n)<=0?2:1),h[e+84>>2]>=(0|n)&&r)break l;if(c=b(n,12)+e|0,(0|(i=h[c+52>>2]))==h[c+56>>2]){if((s=1+(l=(u=i-(o=h[c+48>>2])|0)>>2)|0)>>>0>=1073741824)break r;if(i=u>>1,s=u>>>0<2147483644?i>>>0<s>>>0?s:i:1073741823){if(s>>>0>=1073741824)break e;i=mr(s<<2)}else i=0;h[(l=i+(l<<2)|0)>>2]=t,(0|u)>0&&We(i,o,u),h[c+48>>2]=i,h[c+52>>2]=l+4,h[c+56>>2]=i+(s<<2),o&&be(o)}else h[i>>2]=t,h[c+52>>2]=i+4;h[e+84>>2]<=(0|n)||(h[e+84>>2]=n)}if(r)break s;if(t=-1,-1==(0|a))break c}t=h[h[h[e+4>>2]>>2]+(a<<2)>>2]}if(n=0,h[h[e+36>>2]+(t>>>3&536870908)>>2]>>>t&1||(t=h[e+88>>2]+(t<<2)|0,i=h[t>>2],h[t>>2]=i+1,n=(0|i)<=0?2:1),h[e+84>>2]<(0|n))break o;t=a}a=h[e+24>>2];continue}break}if(o=b(n,12)+e|0,(0|(t=h[o+52>>2]))==h[o+56>>2]){if((r=1+(i=(s=t-(l=h[o+48>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(t=s>>1,r=s>>>0<2147483644?t>>>0<r>>>0?r:t:1073741823){if(r>>>0>=1073741824)break e;t=mr(r<<2)}else t=0;h[(i=t+(i<<2)|0)>>2]=a,(0|s)>0&&We(t,l,s),h[o+48>>2]=t,h[o+52>>2]=i+4,h[o+56>>2]=t+(r<<2),l&&be(l)}else h[t>>2]=a,h[o+52>>2]=t+4;if((0|n)>=(0|(r=h[e+84>>2])))break a;h[e+84>>2]=n,r=n;break a}r=h[e+84>>2]}if(!((0|r)<3))break}}return 1}bn(),x()}bn(),x()}bn(),x()}Zi(1336),x()}function ne(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0;if(I=i=I-48|0,r=h[h[e+4>>2]+44>>2],n=h[e+8>>2],s=h[n>>2],n=h[n+4>>2],h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,n=(n-s>>2>>>0)/3|0,c=h[r+96>>2],n>>>0>(s=(h[r+100>>2]-c|0)/12|0)>>>0?De(r+96|0,n-s|0,i+32|0):n>>>0>=s>>>0||(h[r+100>>2]=c+b(n,12)),h[e+216>>2]!=h[e+220>>2]){h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,u=h[e+8>>2],t=h[u>>2],r=h[u+4>>2],h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0;e:{t:{i:{r:{n:{a:{s:{if(t=r-t|0){if((0|t)<0)break s;p=mr(t),h[i>>2]=p,r=(t=t>>2<<2)+p|0,h[i+8>>2]=r,xt(p,0,t),h[i+4>>2]=r}if(r=h[u+24>>2],(h[u+28>>2]-r|0)<=0){n=0,t=0;break t}for(n=0,s=0,t=0;;){o:if(-1!=(0|(c=h[(m<<2)+r>>2]))){l:if(!(h[h[e+120>>2]+(m>>>3&536870908)>>2]>>>m&1)&&(v=h[e+216>>2],r=h[e+220>>2]-v|0))for(_=(r=(0|r)/144|0)>>>0>1?r:1,d=0,y=0!=(0|(r=(c>>>0)%3|0))|-1!=(0|(o=c+2|0)),A=r?c-1|0:o;;){if(l=c<<2,a=v+b(d,144)|0,r=h[l+h[h[a+68>>2]>>2]>>2],h[h[a+16>>2]+(r>>>3&536870908)>>2]>>>r&1&&(r=-1,y&&(r=-1,-1!=(0|(o=h[h[u+12>>2]+(A<<2)>>2]))&&(r=o-1|0,(o>>>0)%3|0||(r=o+2|0))),(0|c)!=(0|r)))for(a=h[a+32>>2],o=h[a+l>>2];;){if(f=0,-1==(0|r))break e;if(h[a+(r<<2)>>2]!=(0|o)){c=r;break l}c:{if((r>>>0)%3|0)l=r-1|0;else if(f=-1,-1==(0|(l=r+2|0)))break c;f=-1,-1!=(0|(r=h[h[u+12>>2]+(l<<2)>>2]))&&(f=r-1|0,(r>>>0)%3|0||(f=r+2|0))}if((0|c)==(0|(r=f)))break}if((0|_)==(0|(d=d+1|0)))break}if(o=(r=t-s|0)>>2,h[(c<<2)+p>>2]=o,t>>>0<g>>>0)h[t>>2]=c,t=t+4|0,h[i+20>>2]=t;else{if((t=o+1|0)>>>0>=1073741824)break a;if(a=(n=g-s|0)>>1,t=n>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(t>>>0>=1073741824)break n;n=mr(t<<2)}else n=0;h[(o=n+(o<<2)|0)>>2]=c,g=(t<<2)+n|0,t=o+4|0,(0|r)>0&&We(n,s,r),h[i+24>>2]=g,h[i+20>>2]=t,h[i+16>>2]=n,s&&(be(s),u=h[e+8>>2]),s=n}if(-1!=(0|c)){if((c>>>0)%3|0)r=c-1|0;else if(-1==(0|(r=c+2|0)))break o;if(-1!=(0|(r=h[h[u+12>>2]+(r<<2)>>2]))&&-1!=(0|(r=r+((r>>>0)%3|0?-1:2)|0))&&(0|r)!=(0|(a=c)))for(;;){o=r;l:{c:if(l=h[e+216>>2],r=h[e+220>>2]-l|0){for(d=(r=(0|r)/144|0)>>>0>1?r:1,r=0;;){if(v=h[32+(l+b(r,144)|0)>>2],h[v+(_=o<<2)>>2]==h[v+(a<<2)>>2]){if((0|d)!=(0|(r=r+1|0)))continue;break c}break}if(a=(r=t-n|0)>>2,h[p+_>>2]=a,t>>>0<g>>>0){h[t>>2]=o,t=t+4|0,h[i+20>>2]=t,s=n;break l}if((t=a+1|0)>>>0>=1073741824)break r;if(l=(s=g-n|0)>>1,t=s>>>0<2147483644?t>>>0>l>>>0?t:l:1073741823){if(t>>>0>=1073741824)break i;s=mr(t<<2)}else s=0;if(h[(a=s+(a<<2)|0)>>2]=o,g=(t<<2)+s|0,t=a+4|0,(0|r)>0&&We(s,n,r),h[i+24>>2]=g,h[i+20>>2]=t,h[i+16>>2]=s,!n){n=s;break l}be(n),u=h[e+8>>2],n=s;break l}h[(o<<2)+p>>2]=h[(a<<2)+p>>2]}if(-1==(0|o))break o;if((o>>>0)%3|0)r=o-1|0;else if(-1==(0|(r=o+2|0)))break o;if(-1==(0|(r=h[h[u+12>>2]+(r<<2)>>2])))break o;if(-1==(0|(r=r+((r>>>0)%3|0?-1:2)|0)))break o;if(a=o,(0|r)==(0|c))break}}}if(m=m+1|0,r=h[u+24>>2],!((0|m)<h[u+28>>2]-r>>2))break}break t}bn(),x()}bn(),x()}Zi(1336),x()}bn(),x()}Zi(1336),x()}if(m=h[e+4>>2],l=h[m+44>>2],(0|(d=h[l+100>>2]))!=h[l+96>>2])for(r=0;s=r+1|0,o=b(r,12),a=h[8+(c=o+p|0)>>2],u=h[c+4>>2],c=h[c>>2],(f=r)>>>0>=(d=(d-(r=h[l+96>>2])|0)/12|0)>>>0&&(h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,De(l+96|0,s-d|0,i+32|0),m=h[e+4>>2],r=h[l+96>>2]),h[8+(r=r+o|0)>>2]=a,h[r+4>>2]=u,h[r>>2]=c,r=s,l=h[m+44>>2],r>>>0<((d=h[l+100>>2])-h[l+96>>2]|0)/12>>>0;);h[h[m+4>>2]+80>>2]=t-n>>2,f=1}r=f,p&&be(p),n&&(h[i+20>>2]=n,be(n))}else{if(u=h[e+4>>2],l=h[u+44>>2],(0|(n=h[l+100>>2]))!=h[l+96>>2])for(r=0;;){o=h[e+8>>2];e:{if(-1!=(0|(a=b(r,3))))if(d=-1,c=h[h[o>>2]+(a<<2)>>2],-1!=(0|(s=a+1|0))){if(d=h[h[o>>2]+(s<<2)>>2],s=-1,-1==(0|(a=a+2|0)))break e}else a=0;else d=h[4+(h[o>>2]+(a<<2)|0)>>2],c=-1,a=1;s=h[h[o>>2]+(a<<2)>>2]}if(o=s,s=r+1|0,(a=((a=n)-(n=h[l+96>>2])|0)/12|0)>>>0<=r>>>0&&(h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,De(l+96|0,s-a|0,i+32|0),u=h[e+4>>2],n=h[l+96>>2]),r=b(r,12)+n|0,h[r+8>>2]=o,h[r+4>>2]=d,h[r>>2]=c,r=s,l=h[u+44>>2],!(r>>>0<((n=h[l+100>>2])-h[l+96>>2]|0)/12>>>0))break}h[h[u+4>>2]+80>>2]=t,r=1}return I=i+48|0,r}function ae(e,t,i,r){var n=0,s=0,o=0,l=0,c=v(0),p=0,b=0;e:if(r){t:{i:switch(h[e+28>>2]-1|0){case 0:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(n=(s<<3)+r|0,o=a[0|t],h[n>>2]=o,h[n+4>>2]=o>>31,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 1:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(n=(s<<3)+r|0)>>2]=d[0|t],h[n+4>>2]=0,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 2:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(n=(s<<3)+r|0,o=u[t>>1],h[n>>2]=o,h[n+4>>2]=o>>31,t=t+2|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 3:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(n=(s<<3)+r|0)>>2]=f[t>>1],h[n+4>>2]=0,t=t+2|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 4:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(n=(s<<3)+r|0,o=h[t>>2],h[n>>2]=o,h[n+4>>2]=o>>31,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 5:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(n=(s<<3)+r|0)>>2]=h[t>>2],h[n+4>>2]=0,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 6:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(o=h[t+4>>2],h[(n=(s<<3)+r|0)>>2]=h[t>>2],h[n+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 7:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(n=h[t>>2],(0|(o=h[t+4>>2]))<0)break e;if(h[(b=(s<<3)+r|0)>>2]=n,h[b+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 8:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,b=h[n+4>>2];;){if(t>>>0>=b>>>0)break e;if(n=(s<<3)+r|0,c=m[t>>2],v(_(c))<v(0x8000000000000000)?(o=v(_(c))>=v(1)?~~(c>v(0)?v(A(v(w(v(c*v(2.3283064365386963e-10)))),v(4294967296))):v(S(v(v(c-v(~~c>>>0>>>0))*v(2.3283064365386963e-10)))))>>>0:0,l=~~c>>>0):(o=-2147483648,l=0),h[n>>2]=l,h[n+4>>2]=o,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 9:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,b=h[n+4>>2];;){if(t>>>0>=b>>>0)break e;if(n=(s<<3)+r|0,p=g[t>>3],_(p)<0x8000000000000000?(o=_(p)>=1?~~(p>0?A(w(2.3283064365386963e-10*p),4294967295):S(2.3283064365386963e-10*(p-+(~~p>>>0>>>0))))>>>0:0,l=~~p>>>0):(o=-2147483648,l=0),h[n>>2]=l,h[n+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break t;break e;case 10:break i;default:break e}if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(o=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[n+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(n=(s<<3)+r|0)>>2]=d[0|t],h[n+4>>2]=0,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break e}xt((n<<3)+r|0,0,i-n<<3)}}function se(e,t,i){t|=0,i|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0;I=r=I-96|0,s=h[16+(e|=0)>>2],a[r+92|0]=1,h[r+88>>2]=t,h[r+84>>2]=t,h[r+80>>2]=s,m=h[e+20>>2],n=h[m>>2];e:{t:{if((s=h[h[s+28>>2]+(t<<2)>>2])>>>0<h[m+4>>2]-n>>2>>>0){if(n=h[h[e+8>>2]+(h[n+(s<<2)>>2]<<2)>>2],s=h[e+4>>2],d[s+84|0]||(n=h[h[s+68>>2]+(n<<2)>>2]),h[r+72>>2]=0,h[r+76>>2]=0,h[(m=r- -64|0)>>2]=0,h[m+4>>2]=0,h[r+56>>2]=0,h[r+60>>2]=0,ae(s,n,a[s+24|0],r+56|0),n=((s=t+1|0)>>>0)%3|0,t>>>0<=s>>>0)for(m=n?s:t-2|0,l=((t>>>0)%3|0?-1:2)+t|0;;){if(n=m,s=l,h[e+28>>2]&&(n=((s=t+1|0)>>>0)%3|0?s:t-2|0,s=t-1|0,(t>>>0)%3|0||(s=t+2|0)),f=h[e+20>>2],t=h[f>>2],(n=h[h[h[e+16>>2]+28>>2]+(n<<2)>>2])>>>0>=h[f+4>>2]-t>>2>>>0)break t;if(n=h[h[e+8>>2]+(h[t+(n<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(n=h[h[t+68>>2]+(n<<2)>>2]),h[r+48>>2]=0,h[r+52>>2]=0,h[r+40>>2]=0,h[r+44>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,ae(t,n,a[t+24|0],r+32|0),n=h[e+20>>2],t=h[n>>2],(s=h[h[h[e+16>>2]+28>>2]+(s<<2)>>2])>>>0>=h[n+4>>2]-t>>2>>>0)break e;n=h[h[e+8>>2]+(h[t+(s<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(n=h[h[t+68>>2]+(n<<2)>>2]),h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,ae(t,n,a[t+24|0],r+8|0),n=(s=h[r+8>>2])-(t=h[r+56>>2])|0,f=h[r+60>>2],g=h[r+12>>2]-(f+(t>>>0>s>>>0)|0)|0,A=(c=h[r+40>>2])-(s=h[r+64>>2])|0,E=h[r+68>>2],w=Xi(n,g,A,c=h[r+44>>2]-(E+(s>>>0>c>>>0)|0)|0),o=o-(L+(u>>>0<w>>>0)|0)|0,T=S=u-w|0,s=Xi(w=(u=h[r+16>>2])-s|0,E=h[r+20>>2]-((s>>>0>u>>>0)+E|0)|0,S=(u=h[r+32>>2])-t|0,f=h[r+36>>2]-((t>>>0>u>>>0)+f|0)|0),t=L+o|0,o=t=s>>>0>(u=T+s|0)>>>0?t+1|0:t,T=b,v=g,g=(t=h[r+48>>2])-(s=h[r+72>>2])|0,b=h[r+76>>2],v=Xi(n,v,g,M=h[r+52>>2]-(b+(t>>>0<s>>>0)|0)|0),t=L+p|0,t=(n=T+v|0)>>>0<v>>>0?t+1|0:t,b=n-(p=Xi(v=(p=h[r+24>>2])-s|0,s=h[r+28>>2]-((s>>>0>p>>>0)+b|0)|0,S,f))|0,p=t-(L+(n>>>0<p>>>0)|0)|0,n=_-(t=Xi(w,E,g,M))|0,t=y-(L+(t>>>0>_>>>0)|0)|0,y=Xi(v,s,A,c),t=L+t|0,y=t=(_=y+n|0)>>>0<y>>>0?t+1|0:t,t=h[r+88>>2],s=h[r+80>>2];i:if(d[r+92|0]){r:{if(-1==(0|t)||-1==(0|(t=((n=t+1|0)>>>0)%3|0?n:t-2|0))|h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||-1==(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2])))h[r+88>>2]=-1;else if(t=((n=t+1|0)>>>0)%3|0?n:t-2|0,h[r+88>>2]=t,-1!=(0|t))break r;n=-1;n:if(-1!=(0|(t=h[r+84>>2]))){if((t>>>0)%3|0)t=t-1|0;else if(n=-1,-1==(0|(t=t+2|0)))break n;n=-1,h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||(n=-1,-1!=(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2]))&&(n=t-1|0,(t>>>0)%3|0||(n=t+2|0)))}a[r+92|0]=0,h[r+88>>2]=n;break i}if((0|t)!=h[r+84>>2])break i;h[r+88>>2]=-1}else{n=-1;r:if(-1!=(0|t)){if((t>>>0)%3|0)t=t-1|0;else if(n=-1,-1==(0|(t=t+2|0)))break r;n=-1,h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||(n=-1,-1!=(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2]))&&(n=t-1|0,(t>>>0)%3|0||(n=t+2|0)))}h[r+88>>2]=n}if(-1==(0|(t=h[r+88>>2])))break}n=(t=y>>31)+_|0,s=t,t=t+y|0,f=n^s,l=s^(n>>>0<s>>>0?t+1|0:t),g=-1,n=2147483647,c=t=p>>31,s=t+b|0,t=t+p|0,t=s>>>0<c>>>0?t+1|0:t,s^=c,c=t^=c,A=-1^s,t^=2147483647,m=o;i:{if(h[e+28>>2]){if(!((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)&&(t=l+c|0,s=t=(e=s+f|0)>>>0<s>>>0?t+1|0:t,l=o,o=(t=o>>31)+u|0,c=l,l=t,t=c+t|0,t=o>>>0<l>>>0?t+1|0:t,o^=l,!((0|(l=2147483647^(t^=l)))==(0|s)&(-1^o)>>>0<e>>>0|s>>>0>l>>>0)&&(t=t+s|0,g=e=e+o|0,n=t=e>>>0<o>>>0?t+1|0:t,!t&e>>>0<536870913)))break i;t=n>>>29|0,e=(536870911&n)<<3|g>>>29}else{if((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)break i;if(t=l+c|0,t=(e=s+f|0)>>>0<s>>>0?t+1|0:t,s=e,e=t,n=(t=o>>31)+u|0,l=o,o=t,t=l+t|0,l=n^o,o^=t=n>>>0<o>>>0?t+1|0:t,t=n=l+s|0,(o=!(0&(e=(0|(o^=2147483647))==(0|e)&(-1^l)>>>0<s>>>0|e>>>0>o>>>0)))&(0|(e=e?-1:t))<=536870912|(0|e)<536870912)break i;t=0,e=e>>>29|0}u=$i(u,m,e,t),b=$i(b,p,e,t),_=$i(_,y,e,t)}return h[i+8>>2]=u,h[i+4>>2]=b,h[i>>2]=_,void(I=r+96|0)}Sn(),x()}Sn(),x()}Sn(),x()}function oe(e,t,i){var r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0;I=r=I+-64|0,h[r+56>>2]=0,h[r+48>>2]=0,h[r+52>>2]=0,h[r+40>>2]=0,h[r+44>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,s=r+8|0;e:{t:if(n=f[t+38>>1]){if(n>>>0<=511){if(a=h[t+12>>2],n=h[t+20>>2],n=(l=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,l>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a))break t;n=o+h[t>>2]|0,u=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[s+12>>2]=u,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n}else{if(!yi(1,s+12|0,t))break t;u=h[s+12>>2]}if(a=h[s>>2],(n=h[s+4>>2]-a>>2)>>>0<u>>>0?(ei(s,u-n|0),u=h[s+12>>2]):n>>>0<=u>>>0||(h[s+4>>2]=a+(u<<2)),n=1,!u)break e;for(A=h[t+8>>2],g=h[t+12>>2],y=h[s>>2],o=0;;){if(n=0,(0|g)<=(0|(a=h[t+20>>2]))&A>>>0<=(l=h[t+16>>2])>>>0|(0|a)>(0|g))break e;w=h[t>>2],v=d[w+l|0],n=a,n=(a=l+1|0)?n:n+1|0,l=a,h[t+16>>2]=a,h[t+20>>2]=n,a=v>>>2|0,c=0;i:{r:{n:{a:switch(0|(S=3&v)){case 0:break r;case 3:break a;default:break n}if(n=0,(a=a+o|0)>>>0>=u>>>0)break e;xt(y+(o<<2)|0,0,4+(252&v)|0),o=a;break i}for(;;){if((0|n)>=(0|g)&l>>>0>=A>>>0|(0|n)>(0|g))break t;if(u=d[l+w|0],n=(l=l+1|0)?n:n+1|0,h[t+16>>2]=l,h[t+20>>2]=n,a|=u<<(c<<3|6),(0|S)==(0|(c=c+1|0)))break}}h[y+(o<<2)>>2]=a}if(!((u=h[s+12>>2])>>>0>(o=o+1|0)>>>0))break}if(l=s+16|0,A=h[s>>2],a=h[s+16>>2],(n=h[s+20>>2]-a|0)>>>0<=4194303?ei(l,1048576-(n>>>2|0)|0):4194304!=(0|n)&&(h[s+20>>2]=a+4194304),o=h[(n=s+28|0)>>2],(a=h[s+32>>2]-o>>3)>>>0<u>>>0)ti(n,u-a|0),o=h[n>>2];else if(a>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+o),!u)break t;for(c=0,s=0;;){if(g=h[(n=(c<<2)+A|0)>>2],a=s,h[4+(v=(c<<3)+o|0)>>2]=a,h[v>>2]=g,(s=(n=h[n>>2])+a|0)>>>0>1048576)break t;if(!(a>>>0>=s>>>0)){if(g=h[l>>2],v=0,y=7&n)for(;h[g+(a<<2)>>2]=c,a=a+1|0,(0|y)!=(0|(v=v+1|0)););if(!(n-1>>>0<=6))for(;h[(n=g+(a<<2)|0)>>2]=c,h[n+28>>2]=c,h[n+24>>2]=c,h[n+20>>2]=c,h[n+16>>2]=c,h[n+12>>2]=c,h[n+8>>2]=c,h[n+4>>2]=c,(0|s)!=(0|(a=a+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=1048576==(0|s)}n=m}if(!(!n|(h[r+20>>2]?0:e))){s=0,I=c=I-16|0;e:{if(f[t+38>>1]<=511){if(u=a=h[t+12>>2],n=h[t+20>>2],n=(l=(m=h[t+16>>2])+8|0)>>>0<8?n+1|0:n,(o=h[t+8>>2])>>>0<l>>>0&(0|n)>=(0|a)|(0|n)>(0|a))break e;m=m+h[t>>2]|0,a=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n}else{if(!hi(1,c+8|0,t))break e;l=h[t+16>>2],n=h[t+20>>2],o=h[t+8>>2],u=h[t+12>>2],a=h[c+8>>2],m=h[c+12>>2]}if(g=o-l|0,!((0|(o=u-(n+(l>>>0>o>>>0)|0)|0))==(0|m)&a>>>0>g>>>0|o>>>0<m>>>0||(n=n+m|0,n=(o=a+l|0)>>>0<a>>>0?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,(0|a)<=0))){t=l+h[t>>2]|0,h[r+48>>2]=t;t:if((l=d[0|(o=(n=a-1|0)+t|0)])>>>0<=63)h[r+52>>2]=n,t=63&d[0|o];else{switch((l>>>6|0)-1|0){case 0:if(a>>>0<2)break e;h[r+52>>2]=a-2,t=d[1+(t=(t+a|0)-2|0)|0]<<8&16128|d[0|t];break t;case 1:if(a>>>0<3)break e;h[r+52>>2]=a-3,t=d[2+(t=(t+a|0)-3|0)|0]<<16&4128768|d[t+1|0]<<8|d[0|t];break t}h[r+52>>2]=a-4,t=d[2+(t=(t+a|0)-4|0)|0]<<16|d[t+3|0]<<24&1056964608|d[t+1|0]<<8|d[0|t]}t=t+4194304|0,h[r+56>>2]=t,s=t>>>0<1073741824}}if(I=c+16|0,s)if(e)for(n=h[r+36>>2],a=h[r+48>>2],o=h[r+24>>2],t=h[r+56>>2];;){e:if(!(t>>>0>4194303))for(_=h[r+52>>2];;){if((0|_)<=0)break e;if(_=_-1|0,h[r+52>>2]=_,t=d[a+_|0]|t<<8,h[r+56>>2]=t,!(t>>>0<4194304))break}if(s=h[o+((l=1048575&t)<<2)>>2],t=(b(h[(m=n+(s<<3)|0)>>2],t>>>20|0)+l|0)-h[m+4>>2]|0,h[r+56>>2]=t,h[(E<<2)+i>>2]=s,_=1,(0|(E=E+1|0))==(0|e))break}else _=1}return(e=h[r+36>>2])&&(h[r+40>>2]=e,be(e)),(e=h[r+24>>2])&&(h[r+28>>2]=e,be(e)),(e=h[r+8>>2])&&(h[r+12>>2]=e,be(e)),I=r- -64|0,_}function le(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,p=v(0),b=0;e:{t:if(r){i:{r:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 3:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(n=u[t>>1]))<0)break t;if(u[(o<<1)+r>>1]=n,t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if(l=1,(0|i)>(0|n))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((n=h[t>>2])-32768>>>0<4294901760)break e;if(u[(o<<1)+r>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((n=h[t>>2])>>>0>32767)break e;if(u[(o<<1)+r>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=h[t>>2],-1==(0|(n=h[t+4>>2]-(c>>>0<32768)|0))&c-32768>>>0<4294901760|-1!=(0|n))break e;if(u[(o<<1)+r>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(n=h[t+4>>2])&(c=h[t>>2])>>>0>32767|n)break e;if(u[(o<<1)+r>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+r|0,p=m[t>>2],n=v(_(p))<v(2147483648)?~~p:-2147483648,u[c>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+r|0,b=g[t>>3],n=_(b)<2147483648?~~b:-2147483648,u[c>>1]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 10:break r;default:break t}if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break t}xt((n<<1)+r|0,0,i-n<<1)}return l}return 0}function ce(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,p=v(0),b=0;e:{t:if(r){i:{r:switch(h[e+28>>2]-1|0){case 0:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(n=a[0|t]))<0)break t;if(u[(o<<1)+r>>1]=255&n,t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if(l=1,(0|i)>(0|n))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 2:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(n=u[t>>1]))<0)break t;if(u[(o<<1)+r>>1]=n,t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if(l=1,(0|i)>(0|n))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((n=h[t>>2])>>>0>65535)break e;if(u[(o<<1)+r>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((n=h[t>>2])>>>0>65535)break e;if(u[(o<<1)+r>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(n=h[t+4>>2])&(c=h[t>>2])>>>0>65535|n)break e;if(u[(o<<1)+r>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(n=h[t+4>>2])&(c=h[t>>2])>>>0>65535|n)break e;if(u[(o<<1)+r>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+r|0,n=(p=m[t>>2])<v(4294967296)&p>=v(0)?~~p>>>0:0,u[c>>1]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+r|0,n=(b=g[t>>3])<4294967296&b>=0?~~b>>>0:0,u[c>>1]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 10:break r;default:break t}if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+r>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break t}xt((n<<1)+r|0,0,i-n<<1)}return l}return 0}function ue(e,t,i){var r,n=0,s=0,o=0,l=0,c=0;I=r=I-48|0,n=f[6693]|f[6694]<<16,s=f[6691]|f[6692]<<16,u[r+38>>1]=s,u[r+40>>1]=s>>>16,u[r+42>>1]=n,u[r+44>>1]=n>>>16,n=h[3345],h[r+32>>2]=h[3344],h[r+36>>2]=n,n=h[3343],h[r+24>>2]=h[3342],h[r+28>>2]=n,n=h[3341],h[r+16>>2]=h[3340],h[r+20>>2]=n,s=h[t+12>>2],n=h[t+20>>2],n=(l=(o=h[t+16>>2])+5|0)>>>0<5?n+1|0:n;e:{t:if(l>>>0>p[t+8>>2]&(0|n)>=(0|s)|(0|n)>(0|s)){if((t=Pi(r+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=mr(n=t+16&-16),h[r+8>>2]=-2147483648|n,h[r>>2]=i,h[r+4>>2]=t;else if(a[r+11|0]=t,i=r,!t)break i;We(i,r+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[r+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}Vi(t=e,e=h[r>>2],h[r+4>>2]),be(e)}else if(n=o+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a[0|i]=s,a[i+1|0]=s>>>8,a[i+2|0]=s>>>16,a[i+3|0]=s>>>24,a[i+4|0]=d[n+4|0],n=h[t+20>>2],n=(s=h[t+16>>2]+5|0)>>>0<5?n+1|0:n,h[t+16>>2]=s,h[t+20>>2]=n,xi(i,1404,5))t=mr(32),a[t+16|0]=d[1640],i=d[1636]|d[1637]<<8|d[1638]<<16|d[1639]<<24,n=d[1632]|d[1633]<<8|d[1634]<<16|d[1635]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1628]|d[1629]<<8|d[1630]<<16|d[1631]<<24,n=d[1624]|d[1625]<<8|d[1626]<<16|d[1627]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+17|0]=0,h[e>>2]=-1,Vi(e+4|0,t,17),be(t);else if((0|(o=h[t+12>>2]))<=(0|n)&p[t+8>>2]<=s>>>0|(0|n)>(0|o)){if((t=Pi(r+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=mr(n=t+16&-16),h[r+8>>2]=-2147483648|n,h[r>>2]=i,h[r+4>>2]=t;else if(a[r+11|0]=t,i=r,!t)break i;We(i,r+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[r+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}Vi(t=e,e=h[r>>2],h[r+4>>2]),be(e)}else if(a[i+5|0]=d[s+h[t>>2]|0],n=h[t+20>>2],n=(s=h[t+16>>2]+1|0)?n:n+1|0,h[t+16>>2]=s,h[t+20>>2]=n,(0|(o=h[t+12>>2]))<=(0|n)&p[t+8>>2]<=s>>>0|(0|n)>(0|o)){if((t=Pi(r+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=mr(n=t+16&-16),h[r+8>>2]=-2147483648|n,h[r>>2]=i,h[r+4>>2]=t;else if(a[r+11|0]=t,i=r,!t)break i;We(i,r+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[r+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}Vi(t=e,e=h[r>>2],h[r+4>>2]),be(e)}else if(a[i+6|0]=d[s+h[t>>2]|0],n=h[t+20>>2],n=(s=h[t+16>>2]+1|0)?n:n+1|0,h[t+16>>2]=s,h[t+20>>2]=n,(0|(o=h[t+12>>2]))<=(0|n)&p[t+8>>2]<=s>>>0|(0|n)>(0|o)){if((t=Pi(r+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=mr(n=t+16&-16),h[r+8>>2]=-2147483648|n,h[r>>2]=i,h[r+4>>2]=t;else if(a[r+11|0]=t,i=r,!t)break i;We(i,r+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[r+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}Vi(t=e,e=h[r>>2],h[r+4>>2]),be(e)}else if(a[i+7|0]=d[s+h[t>>2]|0],n=h[t+20>>2],n=(s=h[t+16>>2]+1|0)?n:n+1|0,h[t+16>>2]=s,h[t+20>>2]=n,(0|(o=h[t+12>>2]))<=(0|n)&p[t+8>>2]<=s>>>0|(0|n)>(0|o)){if(t=Wi(r,r+16|0),h[e>>2]=-2,e=e+4|0,a[t+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}if(Vi(e,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break t;be(h[t>>2])}else if(a[i+8|0]=d[s+h[t>>2]|0],s=n=h[t+20>>2],n=(o=(c=h[t+16>>2])+1|0)?n:n+1|0,h[t+16>>2]=o,h[t+20>>2]=n,l=h[t+12>>2],n=s,n=(s=c+3|0)>>>0<3?n+1|0:n,s>>>0>p[t+8>>2]&(0|n)>=(0|l)|(0|n)>(0|l)){if(t=Wi(r,r+16|0),h[e>>2]=-2,e=e+4|0,a[t+11|0]>=0){t=h[r+4>>2],h[e>>2]=h[r>>2],h[e+4>>2]=t,h[e+8>>2]=h[r+8>>2];break t}if(Vi(e,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break t;be(h[t>>2])}else s=i,i=o+h[t>>2]|0,u[s+10>>1]=d[0|i]|d[i+1|0]<<8,n=h[t+20>>2],n=(i=h[t+16>>2]+2|0)>>>0<2?n+1|0:n,h[t+16>>2]=i,h[t+20>>2]=n,h[e+8>>2]=0,h[e+12>>2]=0,h[e>>2]=0,h[e+4>>2]=0;return void(I=r+48|0)}mn(),x()}function he(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,p=v(0),b=0;e:{t:if(r){i:{r:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=u[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 5:if((0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(n=h[t>>2]))<0)break t;if(h[(o<<2)+r>>2]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if(l=1,(0|i)>(0|n))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(n=h[t>>2],-1!=(h[t+4>>2]-(n>>>0<2147483648)|0))break e;if(h[(o<<2)+r>>2]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(n=h[t+4>>2])&(c=h[t>>2])>>>0>2147483647|n)break e;if(h[(o<<2)+r>>2]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+r|0,p=m[t>>2],n=v(_(p))<v(2147483648)?~~p:-2147483648,h[c>>2]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+r|0,b=g[t>>3],n=_(b)<2147483648?~~b:-2147483648,h[c>>2]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 10:break r;default:break t}if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break t}xt((n<<2)+r|0,0,i-n<<2)}return l}return 0}function de(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,p=v(0),b=0;e:{t:if(r){i:{r:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=u[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(n=h[t>>2],h[t+4>>2])break e;if(h[(o<<2)+r>>2]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(n=h[t>>2],h[t+4>>2])break e;if(h[(o<<2)+r>>2]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+r|0,n=(p=m[t>>2])<v(4294967296)&p>=v(0)?~~p>>>0:0,h[c>>2]=n,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+r|0,n=(b=g[t>>3])<4294967296&b>=0?~~b>>>0:0,h[c>>2]=n,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)>(0|n))break i;break t;case 10:break r;default:break t}if(l=1,(0|((0|i)<(0|(n=a[e+24|0]))?i:n))>0)for(n=h[e>>2],t=(s=h[n>>2])+(t=h[e+48>>2]+Xi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[n+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+r>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(n=a[e+24|0]))?i:n))))break}if((0|i)<=(0|n))break t}xt((n<<2)+r|0,0,i-n<<2)}return l}return 0}function fe(e,t,i,r){var n,s=0,o=0,l=0,c=0,u=0,f=0;if(I=n=I-80|0,s=h[i+36>>2],h[n+72>>2]=h[i+32>>2],h[n+76>>2]=s,o=h[i+28>>2],h[(s=n- -64|0)>>2]=h[i+24>>2],h[s+4>>2]=o,s=h[i+20>>2],h[n+56>>2]=h[i+16>>2],h[n+60>>2]=s,s=h[i+12>>2],h[n+48>>2]=h[i+8>>2],h[n+52>>2]=s,s=h[i+4>>2],h[n+40>>2]=h[i>>2],h[n+44>>2]=s,ue(e,n+40|0,n+24|0),!h[e>>2])if(u=e+4|0,a[e+15|0]<0&&be(h[u>>2]),d[n+31|0])t=mr(32),i=d[1665]|d[1666]<<8|d[1667]<<16|d[1668]<<24,a[t+23|0]=i,a[t+24|0]=i>>>8,a[t+25|0]=i>>>16,a[t+26|0]=i>>>24,i=d[1662]|d[1663]<<8|d[1664]<<16|d[1665]<<24,r=d[1658]|d[1659]<<8|d[1660]<<16|d[1661]<<24,a[t+16|0]=r,a[t+17|0]=r>>>8,a[t+18|0]=r>>>16,a[t+19|0]=r>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1654]|d[1655]<<8|d[1656]<<16|d[1657]<<24,r=d[1650]|d[1651]<<8|d[1652]<<16|d[1653]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1646]|d[1647]<<8|d[1648]<<16|d[1649]<<24,r=d[1642]|d[1643]<<8|d[1644]<<16|d[1645]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+27|0]=0,h[e>>2]=-1,Vi(u,t,27),be(t);else{I=c=I-16|0;e:{switch(a[n+32|0]){case 0:s=mr(44),h[s>>2]=0,h[s+4>>2]=0,h[s+40>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,o=ar(s),h[s>>2]=13528,h[n+8>>2]=0,h[n+12>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+16>>2]=o;break e;case 1:s=mr(44),h[s>>2]=0,h[s+4>>2]=0,h[s+40>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,o=ar(s),h[s>>2]=13436,h[n+8>>2]=0,h[n+12>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+16>>2]=o;break e}o=mr(32),s=d[1694]|d[1695]<<8|d[1696]<<16|d[1697]<<24,a[o+24|0]=s,a[o+25|0]=s>>>8,a[o+26|0]=s>>>16,a[o+27|0]=s>>>24,s=d[1690]|d[1691]<<8|d[1692]<<16|d[1693]<<24,l=d[1686]|d[1687]<<8|d[1688]<<16|d[1689]<<24,a[o+16|0]=l,a[o+17|0]=l>>>8,a[o+18|0]=l>>>16,a[o+19|0]=l>>>24,a[o+20|0]=s,a[o+21|0]=s>>>8,a[o+22|0]=s>>>16,a[o+23|0]=s>>>24,s=d[1682]|d[1683]<<8|d[1684]<<16|d[1685]<<24,l=d[1678]|d[1679]<<8|d[1680]<<16|d[1681]<<24,a[o+8|0]=l,a[o+9|0]=l>>>8,a[o+10|0]=l>>>16,a[o+11|0]=l>>>24,a[o+12|0]=s,a[o+13|0]=s>>>8,a[o+14|0]=s>>>16,a[o+15|0]=s>>>24,s=d[1674]|d[1675]<<8|d[1676]<<16|d[1677]<<24,l=d[1670]|d[1671]<<8|d[1672]<<16|d[1673]<<24,a[0|o]=l,a[o+1|0]=l>>>8,a[o+2|0]=l>>>16,a[o+3|0]=l>>>24,a[o+4|0]=s,a[o+5|0]=s>>>8,a[o+6|0]=s>>>16,a[o+7|0]=s>>>24,a[o+28|0]=0,h[c>>2]=-1,Vi(s=4|c,o,28),f=a[c+15|0],h[n>>2]=h[c>>2],l=n+4|0,(0|f)>=0?(f=h[s+4>>2],h[l>>2]=h[s>>2],h[l+4>>2]=f,h[l+8>>2]=h[s+8>>2]):Vi(l,h[c+4>>2],h[c+8>>2]),h[n+16>>2]=0,a[c+15|0]<0&&be(h[c+4>>2]),be(o)}I=c+16|0;e:if(s=h[n>>2]){if(h[e>>2]=s,a[n+15|0]>=0){t=h[4+(e=4|n)>>2],h[u>>2]=h[e>>2],h[u+4>>2]=t,h[u+8>>2]=h[e+8>>2];break e}Vi(u,h[n+4>>2],h[n+8>>2])}else s=h[n+16>>2],h[n+16>>2]=0,B(e,s,t,i,r),h[e>>2]||(a[u+11|0]<0&&be(h[u>>2]),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0),Rn[h[h[s>>2]+4>>2]](s);e=h[n+16>>2],h[n+16>>2]=0,e&&Rn[h[h[e>>2]+4>>2]](e),a[n+15|0]>=0||be(h[n+4>>2])}I=n+80|0}function pe(e,t){var i=0,r=0,n=0,s=0,o=0,l=0;if((s=((i=h[e+4>>2])-(r=h[e>>2])|0)/144|0)>>>0<t>>>0)if(r=e,(o=t-s|0)>>>0<=((i=h[e+8>>2])-(e=h[e+4>>2])|0)/144>>>0){if(o){for(t=b(o,144)+e|0;h[e>>2]=-1,gi(e+4|0),h[e+104>>2]=0,h[e+108>>2]=0,a[e+100|0]=1,h[e+112>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,h[e+124>>2]=0,h[e+128>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,h[e+140>>2]=0,(0|t)!=(0|(e=e+144|0)););e=t}h[r+4>>2]=e}else{e:{t:{i:{if((l=(s=((t=e)-(e=h[r>>2])|0)/144|0)+o|0)>>>0<29826162){if(e=(t=(i-e|0)/144|0)<<1,n=t>>>0<14913080?e>>>0<l>>>0?l:e:29826161){if(n>>>0>=29826162)break i;i=mr(b(n,144))}else i=0;for(l=(t=i+b(s,144)|0)+b(o,144)|0,e=t;h[e>>2]=-1,gi(e+4|0),h[e+104>>2]=0,h[e+108>>2]=0,a[e+100|0]=1,h[e+112>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,h[e+124>>2]=0,h[e+128>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,h[e+140>>2]=0,(0|l)!=(0|(e=e+144|0)););if(s=i+b(n,144)|0,(0|(e=h[r+4>>2]))==(0|(n=h[r>>2])))break t;for(;e=e-144|0,h[(t=t-144|0)>>2]=h[e>>2],h[t+4>>2]=h[e+4>>2],h[t+8>>2]=h[e+8>>2],h[t+12>>2]=h[e+12>>2],h[e+12>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[t+16>>2]=h[e+16>>2],h[t+20>>2]=h[e+20>>2],h[t+24>>2]=h[e+24>>2],h[e+24>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,i=d[e+28|0],h[t+40>>2]=0,h[t+32>>2]=0,h[t+36>>2]=0,a[t+28|0]=i,h[t+32>>2]=h[e+32>>2],h[t+36>>2]=h[e+36>>2],h[t+40>>2]=h[e+40>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[t+52>>2]=0,h[t+44>>2]=0,h[t+48>>2]=0,h[t+44>>2]=h[e+44>>2],h[t+48>>2]=h[e+48>>2],h[t+52>>2]=h[e+52>>2],h[e+52>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[(i=t- -64|0)>>2]=0,h[t+56>>2]=0,h[t+60>>2]=0,h[t+56>>2]=h[e+56>>2],h[t+60>>2]=h[e+60>>2],o=i,i=e- -64|0,h[o>>2]=h[i>>2],h[i>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[t+68>>2]=h[e+68>>2],i=h[e+72>>2],h[t+84>>2]=0,h[t+76>>2]=0,h[t+80>>2]=0,h[t+72>>2]=i,h[t+76>>2]=h[e+76>>2],h[t+80>>2]=h[e+80>>2],h[t+84>>2]=h[e+84>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[t+96>>2]=0,h[t+88>>2]=0,h[t+92>>2]=0,h[t+88>>2]=h[e+88>>2],h[t+92>>2]=h[e+92>>2],h[t+96>>2]=h[e+96>>2],h[e+96>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,i=d[e+100|0],h[t+112>>2]=0,h[t+104>>2]=0,h[t+108>>2]=0,a[t+100|0]=i,h[t+104>>2]=h[e+104>>2],h[t+108>>2]=h[e+108>>2],h[t+112>>2]=h[e+112>>2],h[e+112>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0,h[t+124>>2]=0,h[t+116>>2]=0,h[t+120>>2]=0,h[t+116>>2]=h[e+116>>2],h[t+120>>2]=h[e+120>>2],h[t+124>>2]=h[e+124>>2],h[e+124>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,i=h[e+128>>2],h[t+140>>2]=0,h[t+132>>2]=0,h[t+136>>2]=0,h[t+128>>2]=i,h[t+132>>2]=h[e+132>>2],h[t+136>>2]=h[e+136>>2],h[t+140>>2]=h[e+140>>2],h[e+140>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,(0|e)!=(0|n););if(h[r+8>>2]=s,e=h[r+4>>2],h[r+4>>2]=l,n=h[r>>2],h[r>>2]=t,(0|e)==(0|n))break e;for(;(t=h[e-12>>2])&&(h[e-8>>2]=t,be(t)),(t=h[e-28>>2])&&(h[e-24>>2]=t,be(t)),(t=h[e-40>>2])&&(h[e-36>>2]=t,be(t)),Ii(e-140|0),(0|n)!=(0|(e=e-144|0)););break e}bn(),x()}Zi(1336),x()}h[r+8>>2]=s,h[r+4>>2]=l,h[r>>2]=t}n&&be(n)}else if(t>>>0<s>>>0){if((0|(r=r+b(t,144)|0))!=(0|i))for(;(t=h[i-12>>2])&&(h[i-8>>2]=t,be(t)),(t=h[i-28>>2])&&(h[i-24>>2]=t,be(t)),(t=h[i-40>>2])&&(h[i-36>>2]=t,be(t)),Ii(i-140|0),(0|r)!=(0|(i=i-144|0)););h[e+4>>2]=r}}function me(e,t,i){t|=0,i|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0;if(I=r=I-96|0,n=h[16+(e|=0)>>2],a[r+92|0]=1,h[r+88>>2]=t,h[r+84>>2]=t,h[r+80>>2]=n,-1!=(0|t)&&(m=h[e+20>>2],s=h[m>>2],!((n=h[h[n>>2]+(t<<2)>>2])>>>0>=h[m+4>>2]-s>>2>>>0))){n=h[h[e+8>>2]+(h[s+(n<<2)>>2]<<2)>>2],s=h[e+4>>2],d[s+84|0]||(n=h[h[s+68>>2]+(n<<2)>>2]),h[r+72>>2]=0,h[r+76>>2]=0,h[(m=r- -64|0)>>2]=0,h[m+4>>2]=0,h[r+56>>2]=0,h[r+60>>2]=0,ae(s,n,a[s+24|0],r+56|0),m=((n=t+1|0)>>>0)%3|0?n:t-2|0,l=((t>>>0)%3|0?-1:2)+t|0;e:{t:{for(;;){if(s=m,n=l,h[e+28>>2]&&(s=((n=t+1|0)>>>0)%3|0?n:t-2|0,n=t-1|0,(t>>>0)%3|0||(n=t+2|0)),-1==(0|s))break e;if(f=h[e+20>>2],t=h[f>>2],(s=h[h[h[e+16>>2]>>2]+(s<<2)>>2])>>>0>=h[f+4>>2]-t>>2>>>0)break e;if(s=h[h[e+8>>2]+(h[(s<<2)+t>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(s=h[h[t+68>>2]+(s<<2)>>2]),h[r+48>>2]=0,h[r+52>>2]=0,h[r+40>>2]=0,h[r+44>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,ae(t,s,a[t+24|0],r+32|0),-1==(0|n))break t;if(s=h[e+20>>2],t=h[s>>2],(n=h[h[h[e+16>>2]>>2]+(n<<2)>>2])>>>0>=h[s+4>>2]-t>>2>>>0)break t;if(s=h[h[e+8>>2]+(h[t+(n<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(s=h[h[t+68>>2]+(s<<2)>>2]),h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,ae(t,s,a[t+24|0],r+8|0),s=(n=h[r+8>>2])-(t=h[r+56>>2])|0,f=h[r+60>>2],g=h[r+12>>2]-(f+(t>>>0>n>>>0)|0)|0,A=(c=h[r+40>>2])-(n=h[r+64>>2])|0,E=h[r+68>>2],w=Xi(s,g,A,c=h[r+44>>2]-(E+(n>>>0>c>>>0)|0)|0),o=o-(L+(u>>>0<w>>>0)|0)|0,T=S=u-w|0,n=Xi(w=(u=h[r+16>>2])-n|0,E=h[r+20>>2]-((n>>>0>u>>>0)+E|0)|0,S=(u=h[r+32>>2])-t|0,f=h[r+36>>2]-((t>>>0>u>>>0)+f|0)|0),t=L+o|0,o=t=n>>>0>(u=T+n|0)>>>0?t+1|0:t,T=b,v=g,g=(t=h[r+48>>2])-(n=h[r+72>>2])|0,b=h[r+76>>2],v=Xi(s,v,g,M=h[r+52>>2]-(b+(t>>>0<n>>>0)|0)|0),t=L+p|0,t=(s=T+v|0)>>>0<v>>>0?t+1|0:t,b=s-(p=Xi(v=(p=h[r+24>>2])-n|0,n=h[r+28>>2]-((n>>>0>p>>>0)+b|0)|0,S,f))|0,p=t-(L+(s>>>0<p>>>0)|0)|0,s=_-(t=Xi(w,E,g,M))|0,t=y-(L+(t>>>0>_>>>0)|0)|0,y=Xi(v,n,A,c),t=L+t|0,y=t=(_=y+s|0)>>>0<y>>>0?t+1|0:t,_t(r+80|0),-1==(0|(t=h[r+88>>2])))break}s=(t=y>>31)+_|0,n=t,t=t+y|0,f=s^n,l=n^(s>>>0<n>>>0?t+1|0:t),g=-1,s=2147483647,c=t=p>>31,n=t+b|0,t=t+p|0,t=n>>>0<c>>>0?t+1|0:t,n^=c,c=t^=c,A=-1^n,t^=2147483647,m=o;i:{if(h[e+28>>2]){if(!((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)&&(t=l+c|0,n=t=(e=n+f|0)>>>0<n>>>0?t+1|0:t,l=o,o=(t=o>>31)+u|0,c=l,l=t,t=c+t|0,t=o>>>0<l>>>0?t+1|0:t,o^=l,!((0|(l=2147483647^(t^=l)))==(0|n)&(-1^o)>>>0<e>>>0|n>>>0>l>>>0)&&(t=t+n|0,g=e=e+o|0,s=t=e>>>0<o>>>0?t+1|0:t,!t&e>>>0<536870913)))break i;t=s>>>29|0,e=(536870911&s)<<3|g>>>29}else{if((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)break i;if(t=l+c|0,t=(e=n+f|0)>>>0<n>>>0?t+1|0:t,n=e,e=t,s=(t=o>>31)+u|0,l=o,o=t,t=l+t|0,l=s^o,o^=t=s>>>0<o>>>0?t+1|0:t,t=s=l+n|0,(o=!(0&(e=(0|(o^=2147483647))==(0|e)&(-1^l)>>>0<n>>>0|e>>>0>o>>>0)))&(0|(e=e?-1:t))<=536870912|(0|e)<536870912)break i;t=0,e=e>>>29|0}u=$i(u,m,e,t),b=$i(b,p,e,t),_=$i(_,y,e,t)}return h[i+8>>2]=u,h[i+4>>2]=b,h[i>>2]=_,void(I=r+96|0)}Sn(),x()}Sn(),x()}Sn(),x()}function ge(e,t){e|=0;var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0;if(!((0|(t|=0))<0||(r=h[e+12>>2])-(i=h[e+8>>2])>>2>>>0<=t>>>0)){a=h[(n=i+(t<<2)|0)>>2],l=h[a+60>>2],s=h[a+56>>2];e:{if((0|(i=n+4|0))!=(0|r)){for(;o=h[i>>2],h[i>>2]=0,h[n>>2]=o,a&&Hi(a),n=n+4|0,(0|(i=i+4|0))!=(0|r);)a=h[n>>2];if((0|n)==(0|(r=h[e+12>>2])))break e}for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Hi(i),(0|r)!=(0|n););}h[e+12>>2]=n;e:if(!(!(a=h[e+4>>2])|(0|l)<0)&&(0|(r=h[a+24>>2]))!=(0|(i=h[a+28>>2])))for(;;){if((0|l)==h[h[r>>2]+24>>2]){t:{if((0|(n=r+4|0))!=(0|(l=h[a+28>>2]))){for(;o=h[n>>2],h[n>>2]=0,i=h[r>>2],h[r>>2]=o,i&&(nr(i+12|0,h[i+16>>2]),fr(i,h[i+4>>2]),be(i)),r=r+4|0,(0|l)!=(0|(n=n+4|0)););if((0|(n=h[a+28>>2]))==(0|r))break t}for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&(nr(i+12|0,h[i+16>>2]),fr(i,h[i+4>>2]),be(i)),(0|r)!=(0|n););}h[a+28>>2]=r;break e}if((0|i)==(0|(r=r+4|0)))break}e:if(!((0|s)>4)){t:if(n=b(s,12)+e|0,(0|(r=h[n+20>>2]))!=(0|(i=h[n+24>>2]))){for(;;){if(h[r>>2]==(0|t))break t;if((0|i)==(0|(r=r+4|0)))break}break e}(0|r)!=(0|i)&&((i=i-(a=r+4|0)|0)&&At(r,a,i),h[n+24>>2]=r+i)}if(n=h[e+20>>2],i=h[e+24>>2]-n|0){if(l=1&(a=(r=i>>2)>>>0>1?r:1),r=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=r<<2)+n|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=n+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),r=r+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(r=n+(r<<2)|0)>>2]))<=(0|t)||(h[r>>2]=i-1))}if(n=h[e+32>>2],i=h[e+36>>2]-n|0){if(l=1&(a=(r=i>>2)>>>0>1?r:1),r=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=r<<2)+n|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=n+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),r=r+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(r=n+(r<<2)|0)>>2]))<=(0|t)||(h[r>>2]=i-1))}if(n=h[e+44>>2],i=h[e+48>>2]-n|0){if(l=1&(a=(r=i>>2)>>>0>1?r:1),r=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=r<<2)+n|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=n+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),r=r+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(r=n+(r<<2)|0)>>2]))<=(0|t)||(h[r>>2]=i-1))}if(n=h[e+56>>2],i=h[e+60>>2]-n|0){if(l=1&(a=(r=i>>2)>>>0>1?r:1),r=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=r<<2)+n|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=n+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),r=r+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(r=n+(r<<2)|0)>>2]))<=(0|t)||(h[r>>2]=i-1))}if(i=(i=h[e+72>>2])-(e=h[e+68>>2])|0){if(a=1&(n=(r=i>>2)>>>0>1?r:1),r=0,i>>>0>=8)for(n&=-2,i=0;(0|(o=h[(s=(l=r<<2)+e|0)>>2]))>(0|t)&&(h[s>>2]=o-1),(0|(s=h[(l=e+(4|l)|0)>>2]))>(0|t)&&(h[l>>2]=s-1),r=r+2|0,(0|n)!=(0|(i=i+2|0)););a&&((0|(i=t))>=(0|(t=h[(e=e+(r<<2)|0)>>2]))||(h[e>>2]=t-1))}}}function be(e){var t=0,i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0;e:if(e|=0){a=(r=e-8|0)+(e=-8&(t=h[e-4>>2]))|0;t:if(!(1&t)){if(!(3&t))break e;if((r=r-(t=h[r>>2])|0)>>>0<p[4237])break e;if(e=e+t|0,h[4238]==(0|r)){if(3==(3&(t=h[a+4>>2])))return h[4235]=e,h[a+4>>2]=-2&t,h[r+4>>2]=1|e,void(h[e+r>>2]=e)}else{if(t>>>0<=255){if(n=h[r+8>>2],t=t>>>3|0,(0|(i=h[r+12>>2]))==(0|n)){l=16932,c=h[4233]&Dr(t),h[l>>2]=c;break t}h[n+12>>2]=i,h[i+8>>2]=n;break t}if(o=h[r+24>>2],(0|r)==(0|(t=h[r+12>>2])))if((i=h[(n=r+20|0)>>2])||(i=h[(n=r+16|0)>>2])){for(;s=n,(i=h[(n=(t=i)+20|0)>>2])||(n=t+16|0,i=h[t+16>>2]););h[s>>2]=0}else t=0;else i=h[r+8>>2],h[i+12>>2]=t,h[t+8>>2]=i;if(!o)break t;n=h[r+28>>2];i:{if(h[(i=17236+(n<<2)|0)>>2]==(0|r)){if(h[i>>2]=t,t)break i;l=16936,c=h[4234]&Dr(n),h[l>>2]=c;break t}if(h[o+(h[o+16>>2]==(0|r)?16:20)>>2]=t,!t)break t}if(h[t+24>>2]=o,(i=h[r+16>>2])&&(h[t+16>>2]=i,h[i+24>>2]=t),!(i=h[r+20>>2]))break t;h[t+20>>2]=i,h[i+24>>2]=t}}if(!(r>>>0>=a>>>0)&&1&(t=h[a+4>>2])){t:{if(!(2&t)){if(h[4239]==(0|a)){if(h[4239]=r,e=h[4236]+e|0,h[4236]=e,h[r+4>>2]=1|e,h[4238]!=(0|r))break e;return h[4235]=0,void(h[4238]=0)}if(h[4238]==(0|a))return h[4238]=r,e=h[4235]+e|0,h[4235]=e,h[r+4>>2]=1|e,void(h[e+r>>2]=e);e=(-8&t)+e|0;i:if(t>>>0<=255){if(n=h[a+8>>2],t=t>>>3|0,(0|(i=h[a+12>>2]))==(0|n)){l=16932,c=h[4233]&Dr(t),h[l>>2]=c;break i}h[n+12>>2]=i,h[i+8>>2]=n}else{if(o=h[a+24>>2],(0|a)==(0|(t=h[a+12>>2])))if((i=h[(n=a+20|0)>>2])||(i=h[(n=a+16|0)>>2])){for(;s=n,(i=h[(n=(t=i)+20|0)>>2])||(n=t+16|0,i=h[t+16>>2]););h[s>>2]=0}else t=0;else i=h[a+8>>2],h[i+12>>2]=t,h[t+8>>2]=i;if(o){n=h[a+28>>2];r:{if(h[(i=17236+(n<<2)|0)>>2]==(0|a)){if(h[i>>2]=t,t)break r;l=16936,c=h[4234]&Dr(n),h[l>>2]=c;break i}if(h[o+(h[o+16>>2]==(0|a)?16:20)>>2]=t,!t)break i}h[t+24>>2]=o,(i=h[a+16>>2])&&(h[t+16>>2]=i,h[i+24>>2]=t),(i=h[a+20>>2])&&(h[t+20>>2]=i,h[i+24>>2]=t)}}if(h[r+4>>2]=1|e,h[e+r>>2]=e,h[4238]!=(0|r))break t;return void(h[4235]=e)}h[a+4>>2]=-2&t,h[r+4>>2]=1|e,h[e+r>>2]=e}if(e>>>0<=255)return t=16972+((e=e>>>3|0)<<3)|0,(i=h[4233])&(e=1<<e)?e=h[t+8>>2]:(h[4233]=e|i,e=t),h[t+8>>2]=r,h[e+12>>2]=r,h[r+12>>2]=t,void(h[r+8>>2]=e);n=31,h[r+16>>2]=0,h[r+20>>2]=0,e>>>0<=16777215&&(t=e>>>8|0,t<<=s=t+1048320>>>16&8,n=28+((t=((t<<=n=t+520192>>>16&4)<<(i=t+245760>>>16&2)>>>15|0)-(i|n|s)|0)<<1|e>>>t+21&1)|0),h[r+28>>2]=n,s=17236+(n<<2)|0;t:{i:{if((i=h[4234])&(t=1<<n)){for(n=e<<(31==(0|n)?0:25-(n>>>1|0)|0),t=h[s>>2];;){if(i=t,(-8&h[t+4>>2])==(0|e))break i;if(t=n>>>29|0,n<<=1,!(t=h[16+(s=i+(4&t)|0)>>2]))break}h[s+16>>2]=r,h[r+24>>2]=i}else h[4234]=t|i,h[s>>2]=r,h[r+24>>2]=s;h[r+12>>2]=r,h[r+8>>2]=r;break t}e=h[i+8>>2],h[e+12>>2]=r,h[i+8>>2]=r,h[r+24>>2]=0,h[r+12>>2]=i,h[r+8>>2]=e}e=h[4241]-1|0,h[4241]=e||-1}}}function ve(e,t,i,r){var n,s=0,o=0,l=0,c=0,u=0,d=v(0),f=0,g=0,b=v(0);n=h[i>>2];e:{t:if(o=h[t+4>>2]){i:{if((l=Cr(o))>>>0>=2){if((s=n)>>>0>=o>>>0&&(s=(n>>>0)%(o>>>0)|0),!(i=h[h[t>>2]+(s<<2)>>2]))break t;if(l>>>0<=1)break i;for(;;){if(!(i=h[i>>2]))break t;if((0|(l=h[i+4>>2]))!=(0|n)&&(o>>>0<=l>>>0&&(l=(l>>>0)%(o>>>0)|0),(0|s)!=(0|l)))break t;if(h[i+8>>2]==(0|n))break}t=0;break e}if(s=o-1&n,!(i=h[h[t>>2]+(s<<2)>>2]))break t}for(l=o-1|0;;){if(!(i=h[i>>2]))break t;if((0|(c=h[i+4>>2]))!=(0|n)&(l&c)!=(0|s))break t;if(h[i+8>>2]==(0|n))break}t=0;break e}if(i=mr(16),r=h[h[r>>2]>>2],h[i+12>>2]=0,h[i+8>>2]=r,h[i+4>>2]=n,h[i>>2]=0,b=v(h[t+12>>2]+1>>>0),d=m[t+16>>2],b>v(d*v(o>>>0))||!o){l=0!=(o-1&o)|o>>>0<3|o<<1,s=2,1!=(0|(r=(r=(d=v(S(v(b/d))))<v(4294967296)&d>=v(0)?~~d>>>0:0)>>>0>l>>>0?r:l))&&(r&r-1?(s=Q(r),o=h[t+4>>2]):s=r);t:{if(s>>>0<=o>>>0){if(s>>>0>=o>>>0)break t;if(l=o>>>0<3,r=(d=v(S(v(v(p[t+12>>2])/m[t+16>>2]))))<v(4294967296)&d>=v(0)?~~d>>>0:0,(s=(r=l||Cr(o)>>>0>1?Q(r):r>>>0<2?r:1<<32-y(r-1|0))>>>0>s>>>0?r:s)>>>0>=o>>>0)break t}o=0,c=s;i:{r:{n:{a:{if(s){if(c>>>0>=1073741824)break a;if(s=mr(c<<2),r=h[t>>2],h[t>>2]=s,r&&be(r),h[t+4>>2]=c,s=0,c-1>>>0>=3)for(l=-4&c;h[(r=s<<2)+h[t>>2]>>2]=0,h[h[t>>2]+(4|r)>>2]=0,h[h[t>>2]+(8|r)>>2]=0,h[h[t>>2]+(12|r)>>2]=0,s=s+4|0,(0|l)!=(0|(o=o+4|0)););if(r=3&c)for(;h[h[t>>2]+(s<<2)>>2]=0,s=s+1|0,(0|r)!=(0|(u=u+1|0)););if(!(o=h[t+8>>2]))break i;if(r=t+8|0,l=h[o+4>>2],(s=Cr(c))>>>0<2)break n;if(l=l>>>0>=c>>>0?(l>>>0)%(c>>>0)|0:l,h[h[t>>2]+(l<<2)>>2]=r,!(r=h[o>>2]))break i;if(s>>>0<=1)break r;for(;;){if(c>>>0<=(u=h[r+4>>2])>>>0&&(u=(u>>>0)%(c>>>0)|0),(0|l)!=(0|u))if(s=r,g=(f=u<<2)+h[t>>2]|0,h[g>>2]){for(;u=s,s=h[s>>2],h[r+8>>2]==h[s+8>>2]&&s;);h[o>>2]=s,h[u>>2]=h[h[f+h[t>>2]>>2]>>2],h[h[f+h[t>>2]>>2]>>2]=r}else h[g>>2]=o,o=r,l=u;else o=r;if(!(r=h[o>>2]))break}break i}r=h[t>>2],h[t>>2]=0,r&&be(r),h[t+4>>2]=0;break i}Zi(1336),x()}if(l&=c-1,h[h[t>>2]+(l<<2)>>2]=r,!(r=h[o>>2]))break i}for(f=c-1|0;;){if((0|(c=f&h[r+4>>2]))!=(0|l))if(s=r,g=(u=c<<2)+h[t>>2]|0,h[g>>2]){for(;c=s,s=h[s>>2],h[r+8>>2]==h[s+8>>2]&&s;);h[o>>2]=s,h[c>>2]=h[h[u+h[t>>2]>>2]>>2],h[h[u+h[t>>2]>>2]>>2]=r}else h[g>>2]=o,o=r,l=c;else o=r;if(!(r=h[o>>2]))break}}}s=(r=(o=h[t+4>>2])-1|0)&o?o>>>0>n>>>0?n:(n>>>0)%(o>>>0)|0:r&n}s=h[t>>2]+(s<<2)|0;t:if(r=h[s>>2])h[i>>2]=h[r>>2],h[r>>2]=i;else{if(h[i>>2]=h[t+8>>2],h[t+8>>2]=i,h[s>>2]=t+8,!(r=h[i>>2]))break t;r=h[r+4>>2],(s=o-1|0)&o?r>>>0<o>>>0||(r=(r>>>0)%(o>>>0)|0):r&=s,h[h[t>>2]+(r<<2)>>2]=i}h[t+12>>2]=h[t+12>>2]+1,t=1}a[e+4|0]=t,h[e>>2]=i}function _e(e){var t=0,i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;h[e+56>>2]=h[e+52>>2],h[e+44>>2]=h[e+40>>2];e:{t:{i:{if(n=h[e+64>>2],(0|(i=h[n+24>>2]))!=h[n+28>>2])for(;;){r=t;r:if(-1!=(0|(l=h[(c<<2)+i>>2]))){if((0|(t=h[e+56>>2]))==h[e+60>>2]){if((t=1+(s=(i=t-(n=h[e+52>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(a=i>>1,a=i>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break e;t=mr(a<<2)}else t=0;h[(s=t+(s<<2)|0)>>2]=r,(0|i)>0&&We(t,n,i),h[e+60>>2]=t+(a<<2),h[e+56>>2]=s+4,h[e+52>>2]=t,n&&be(n)}else h[t>>2]=r,h[e+56>>2]=t+4;n:if(h[h[e+12>>2]+(c>>>3&536870908)>>2]>>>c&1&&-1!=(0|(t=((t=l+1|0)>>>0)%3|0?t:l-2|0))&&(n=h[e>>2],!(h[n+(t>>>3&536870908)>>2]>>>t&1)&&-1!=(0|(t=h[h[h[e+64>>2]+12>>2]+(t<<2)>>2]))&&-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))))for(a=h[e+64>>2];;){if(l=i,-1==(0|(t=((t=i+1|0)>>>0)%3|0?t:i-2|0))|h[n+(t>>>3&536870908)>>2]>>>t&1)break n;if(-1==(0|(t=h[h[a+12>>2]+(t<<2)>>2])))break n;if(-1==(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0)))break}if(h[h[e+28>>2]+(l<<2)>>2]=r,(0|(t=h[e+44>>2]))==h[e+48>>2]){if((t=1+(s=(i=t-(n=h[e+40>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(a=i>>1,a=i>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break e;t=mr(a<<2)}else t=0;h[(s=t+(s<<2)|0)>>2]=l,(0|i)>0&&We(t,n,i),h[e+48>>2]=t+(a<<2),h[e+44>>2]=s+4,h[e+40>>2]=t,n&&be(n)}else h[t>>2]=l,h[e+44>>2]=t+4;if(t=r+1|0,n=h[e+64>>2],(l>>>0)%3|0)i=l-1|0;else if(-1==(0|(i=l+2|0)))break r;if(-1!=(0|(i=h[h[n+12>>2]+(i<<2)>>2]))&&!(-1==(0|(i=i+((i>>>0)%3|0?-1:2)|0))|(0|i)==(0|l)))for(;;){if(n=((n=i+1|0)>>>0)%3|0?n:i-2|0,h[h[e>>2]+(n>>>3&536870908)>>2]>>>n&1){if((0|(r=h[e+56>>2]))==h[e+60>>2]){if((r=1+(o=(n=r-(a=h[e+52>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(s=n>>1,s=n>>>0<2147483644?r>>>0>s>>>0?r:s:1073741823){if(s>>>0>=1073741824)break e;r=mr(s<<2)}else r=0;h[(o=r+(o<<2)|0)>>2]=t,(0|n)>0&&We(r,a,n),h[e+60>>2]=r+(s<<2),h[e+56>>2]=o+4,h[e+52>>2]=r,a&&be(a)}else h[r>>2]=t,h[e+56>>2]=r+4;if(n=t+1|0,(0|(r=h[e+44>>2]))==h[e+48>>2]){if((r=1+(u=(a=r-(s=h[e+40>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(o=a>>1,o=a>>>0<2147483644?r>>>0>o>>>0?r:o:1073741823){if(o>>>0>=1073741824)break e;r=mr(o<<2)}else r=0;h[(u=r+(u<<2)|0)>>2]=i,(0|a)>0&&We(r,s,a),h[e+48>>2]=r+(o<<2),h[e+44>>2]=u+4,h[e+40>>2]=r,s&&be(s)}else h[r>>2]=i,h[e+44>>2]=r+4;r=t,t=n}if(h[h[e+28>>2]+(i<<2)>>2]=r,n=h[e+64>>2],(i>>>0)%3|0)i=i-1|0;else if(-1==(0|(i=i+2|0)))break r;if(-1==(0|(i=h[h[n+12>>2]+(i<<2)>>2])))break r;if(-1==(0|(i=i+((i>>>0)%3|0?-1:2)|0)))break r;if((0|i)==(0|l))break}}if(c=c+1|0,i=h[n+24>>2],!(c>>>0<h[n+28>>2]-i>>2>>>0))break}return}bn(),x()}bn(),x()}Zi(1336),x()}function ye(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;if(-1==(0|t))return 1;if(i=(t>>>0)/3|0,!(h[h[e+24>>2]+(i>>>3&268435452)>>2]>>>i&1)){if(r=h[e+48>>2],h[e+52>>2]=r,(0|r)==h[e+56>>2]?(n=mr(4),h[n>>2]=t,a=n+4|0,h[e+56>>2]=a,h[e+52>>2]=a,h[e+48>>2]=n,r&&be(r)):(h[r>>2]=t,h[e+52>>2]=r+4),a=h[h[e+4>>2]+28>>2],-1==(0|(r=h[a+((n=((r=t+1|0)>>>0)%3|0?r:t-2|0)<<2)>>2])))return 0;if(s=(t-b(i,3)|0?-1:2)+t|0,-1==(0|(i=h[a+(s<<2)>>2])))return 0;if(t=h[e+36>>2],(o=h[(a=t+(r>>>3&536870908)|0)>>2])&(l=1<<r)||(h[a>>2]=o|l,tt(e+8|0,r,n),t=h[e+36>>2]),(r=h[(t=(i>>>3&536870908)+t|0)>>2])&(n=1<<i)||(h[t>>2]=r|n,tt(e+8|0,i,s)),(0|(i=h[e+52>>2]))==h[e+48>>2])return 1;for(u=e+8|0;;){r=((t=h[(i=i-4|0)>>2])>>>0)/3|0;e:{t:if(-1!=(0|t)&&(n=h[e+24>>2]+(r>>>3&268435452)|0,!((a=h[n>>2])&(r=1<<r)))){if(h[n>>2]=r|a,n=h[e+4>>2],-1==(0|(r=h[h[n+28>>2]+(t<<2)>>2])))return 0;for(;;){i=t;i:{if(a=h[e+36>>2]+(r>>>3&536870908)|0,!((s=h[a>>2])&(o=1<<r)))if(-1==(0|(t=h[h[n+40>>2]+(r<<2)>>2]))||-1==(0|(t=((l=t+1|0)>>>0)%3|0?l:t-2|0))|h[h[n>>2]+(t>>>3&536870908)>>2]>>>t&1||-1==(0|(t=h[h[h[n+64>>2]+12>>2]+(t<<2)>>2])))h[a>>2]=s|o,tt(u,r,i);else if(h[a>>2]=s|o,tt(u,r,i),-1!=(0|(((r=t+1|0)>>>0)%3|0?r:t-2|0))){t=-1,n=h[e+4>>2],-1!=(0|i)&&(-1==(0|(r=((r=i+1|0)>>>0)%3|0?r:i-2|0))|h[h[n>>2]+(r>>>3&536870908)>>2]>>>r&1||(t=h[h[h[n+64>>2]+12>>2]+(r<<2)>>2])),o=1<<(r=(t>>>0)/3|0),i=h[e+24>>2],a=h[i+((l=r>>>5|0)<<2)>>2];break i}r:{if(-1!=(0|i)){r=-1,t=((t=i+1|0)>>>0)%3|0?t:i-2|0,n=h[e+4>>2],-1==(0|t)|h[h[n>>2]+(t>>>3&536870908)>>2]>>>t&1||(r=h[h[h[n+64>>2]+12>>2]+(t<<2)>>2]);n:{if((i>>>0)%3|0)i=i-1|0;else if(t=-1,-1==(0|(i=i+2|0)))break n;t=-1,h[h[n>>2]+(i>>>3&536870908)>>2]>>>i&1||(t=h[h[h[n+64>>2]+12>>2]+(i<<2)>>2])}if(s=(c=-1==(0|t))?-1:(t>>>0)/3|0,a=(r>>>0)/3|0,!((o=-1==(0|r))||(i=h[e+24>>2],(a=h[i+((l=(o=o?-1:a)>>>5|0)<<2)>>2])&(o=1<<o))))break r;if(!(c||(o=1<<s,i=h[e+24>>2],o&(a=h[i+((l=s>>>5|0)<<2)>>2]))))break i}i=h[e+52>>2]-4|0,h[e+52>>2]=i;break e}if(c)t=r;else if(h[(s>>>3&536870908)+i>>2]>>>s&1)t=r;else{if(i=h[e+52>>2],h[i-4>>2]=t,(0|i)!=h[e+56>>2]){h[i>>2]=r,i=i+4|0;break t}r:{if((t=1+(i=(n=i-(a=h[e+48>>2])|0)>>2)|0)>>>0<1073741824){if(s=n>>1,s=n>>>0<2147483644?t>>>0>s>>>0?t:s:1073741823){if(s>>>0>=1073741824)break r;t=mr(s<<2)}else t=0;if(h[(i=t+(i<<2)|0)>>2]=r,i=i+4|0,(0|n)>0&&We(t,a,n),h[e+56>>2]=t+(s<<2),h[e+52>>2]=i,h[e+48>>2]=t,!a)break e;be(a),i=h[e+52>>2];break e}bn(),x()}Zi(1336),x()}}if(h[(l<<2)+i>>2]=a|o,-1==(0|(r=h[h[n+28>>2]+(t<<2)>>2])))break}return 0}h[e+52>>2]=i}if(h[e+48>>2]==(0|i))break}}return 1}function Ae(e,t,i,r){var n,s=0,o=0,l=0,c=0,u=0,f=0;if(I=n=I-80|0,s=h[i+36>>2],h[n+72>>2]=h[i+32>>2],h[n+76>>2]=s,o=h[i+28>>2],h[(s=n- -64|0)>>2]=h[i+24>>2],h[s+4>>2]=o,s=h[i+20>>2],h[n+56>>2]=h[i+16>>2],h[n+60>>2]=s,s=h[i+12>>2],h[n+48>>2]=h[i+8>>2],h[n+52>>2]=s,s=h[i+4>>2],h[n+40>>2]=h[i>>2],h[n+44>>2]=s,ue(e,n+40|0,n+24|0),!h[e>>2])if(u=e+4|0,a[e+15|0]<0&&be(h[u>>2]),1==d[n+31|0]){I=c=I-16|0;e:{switch(d[n+32|0]){case 0:Wr(s=mr(48)),h[s>>2]=13144,h[n+8>>2]=0,h[n+12>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+16>>2]=s;break e;case 1:Wr(s=mr(52)),h[s+48>>2]=0,h[s>>2]=11304,h[n+8>>2]=0,h[n+12>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+16>>2]=s;break e}o=mr(32),s=d[1694]|d[1695]<<8|d[1696]<<16|d[1697]<<24,a[o+24|0]=s,a[o+25|0]=s>>>8,a[o+26|0]=s>>>16,a[o+27|0]=s>>>24,s=d[1690]|d[1691]<<8|d[1692]<<16|d[1693]<<24,l=d[1686]|d[1687]<<8|d[1688]<<16|d[1689]<<24,a[o+16|0]=l,a[o+17|0]=l>>>8,a[o+18|0]=l>>>16,a[o+19|0]=l>>>24,a[o+20|0]=s,a[o+21|0]=s>>>8,a[o+22|0]=s>>>16,a[o+23|0]=s>>>24,s=d[1682]|d[1683]<<8|d[1684]<<16|d[1685]<<24,l=d[1678]|d[1679]<<8|d[1680]<<16|d[1681]<<24,a[o+8|0]=l,a[o+9|0]=l>>>8,a[o+10|0]=l>>>16,a[o+11|0]=l>>>24,a[o+12|0]=s,a[o+13|0]=s>>>8,a[o+14|0]=s>>>16,a[o+15|0]=s>>>24,s=d[1674]|d[1675]<<8|d[1676]<<16|d[1677]<<24,l=d[1670]|d[1671]<<8|d[1672]<<16|d[1673]<<24,a[0|o]=l,a[o+1|0]=l>>>8,a[o+2|0]=l>>>16,a[o+3|0]=l>>>24,a[o+4|0]=s,a[o+5|0]=s>>>8,a[o+6|0]=s>>>16,a[o+7|0]=s>>>24,a[o+28|0]=0,h[c>>2]=-1,Vi(s=4|c,o,28),f=a[c+15|0],h[n>>2]=h[c>>2],l=n+4|0,(0|f)>=0?(f=h[s+4>>2],h[l>>2]=h[s>>2],h[l+4>>2]=f,h[l+8>>2]=h[s+8>>2]):Vi(l,h[c+4>>2],h[c+8>>2]),h[n+16>>2]=0,a[c+15|0]<0&&be(h[c+4>>2]),be(o)}I=c+16|0;e:if(s=h[n>>2]){if(h[e>>2]=s,a[n+15|0]>=0){t=h[4+(e=4|n)>>2],h[u>>2]=h[e>>2],h[u+4>>2]=t,h[u+8>>2]=h[e+8>>2];break e}Vi(u,h[n+4>>2],h[n+8>>2])}else s=h[n+16>>2],h[n+16>>2]=0,h[s+44>>2]=r,B(e,s,t,i,r),h[e>>2]||(a[u+11|0]<0&&be(h[u>>2]),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0),Rn[h[h[s>>2]+4>>2]](s);e=h[n+16>>2],h[n+16>>2]=0,e&&Rn[h[h[e>>2]+4>>2]](e),a[n+15|0]>=0||be(h[n+4>>2])}else t=mr(32),i=d[1592]|d[1593]<<8|d[1594]<<16|d[1595]<<24,a[t+16|0]=i,a[t+17|0]=i>>>8,a[t+18|0]=i>>>16,a[t+19|0]=i>>>24,i=d[1588]|d[1589]<<8|d[1590]<<16|d[1591]<<24,r=d[1584]|d[1585]<<8|d[1586]<<16|d[1587]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1580]|d[1581]<<8|d[1582]<<16|d[1583]<<24,r=d[1576]|d[1577]<<8|d[1578]<<16|d[1579]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+20|0]=0,h[e>>2]=-1,Vi(u,t,20),be(t);I=n+80|0}function Ee(e,t,i){var r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0;r=b(t,12)+e|0,h[r+12>>2]=h[r+8>>2],u=-1==(0|i)?-1:(i>>>0)/3|0,p=1,c=i;e:{t:{i:{for(;;){r:{if(m=1&a){if(-1==(0|c))break r;if(-1==(0|Mt(e,((c>>>0)%3|0?-1:2)+c|0)))break e;if(-1==(0|(n=((i=c+1|0)>>>0)%3|0?i:c-2|0)))break e;if(-1==(0|(i=((i=n+1|0)>>>0)%3|0?i:n-2|0)))break e;if(-1==(0|(n=h[h[h[e+4>>2]+12>>2]+(i<<2)>>2])))break e;if(-1==(0|(i=((i=n+1|0)>>>0)%3|0?i:n-2|0)))break e;u=(i>>>0)/3|0}if(o=1<<u,f=h[e+56>>2]+(u>>>3&536870908)|0,!(o&(d=h[f>>2]))){for(a=0;;){if(h[f>>2]=o|d,(0|(n=h[r+12>>2]))==h[r+16>>2]){if((s=1+(l=(o=n-(d=h[r+8>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(n=o>>1,s=o>>>0<2147483644?n>>>0<s>>>0?s:n:1073741823){if(s>>>0>=1073741824)break t;n=mr(s<<2)}else n=0;h[(l=n+(l<<2)|0)>>2]=u,(0|o)>0&&We(n,d,o),h[r+8>>2]=n,h[r+12>>2]=l+4,h[r+16>>2]=n+(s<<2),d&&be(d)}else h[n>>2]=u,h[r+12>>2]=n+4;l=a+1|0;n:{a:{if(a)if(1&l){if(-1==(0|i)){i=-1;break n}i=((n=i+1|0)>>>0)%3|0?n:i-2|0}else{if(c=m?i:c,-1==(0|i)){i=-1;break n}if((i>>>0)%3|0){a=i-1|0;break a}i=i+2|0}if(n=i,i=-1,a=n,-1==(0|n))break n}if(i=h[h[h[e+4>>2]+12>>2]+(a<<2)>>2],f=-1,d=-1,(0|(s=((n=a+1|0)>>>0)%3|0?n:a-2|0))>=0&&(n=(s>>>0)/3|0,d=h[(h[h[e>>2]+96>>2]+b(n,12)|0)+(s-b(n,3)<<2)>>2]),-1!=(0|i)?(o=0,(0|(s=((i>>>0)%3|0?-1:2)+i|0))<0||(n=(s>>>0)/3|0,f=h[(h[h[e>>2]+96>>2]+b(n,12)|0)+(s-b(n,3)<<2)>>2])):o=1,(0|d)==(0|f)){a:{s:{o:{l:{if((0|(a=((a>>>0)%3|0?-1:2)+a|0))>=0){if(n=(a>>>0)/3|0,f=h[(h[h[e>>2]+96>>2]+b(n,12)|0)+(a-b(n,3)<<2)>>2],a=-1,!o)break l;break o}if(f=-1,o)break s}(0|(a=((n=i+1|0)>>>0)%3|0?n:i-2|0))<0?a=-1:(n=(a>>>0)/3|0,a=h[(h[h[e>>2]+96>>2]+b(n,12)|0)+(a-b(n,3)<<2)>>2])}if((0|a)!=(0|f)){i=-1;break n}if(-1!=(0|i))break a;i=-1;break n}if(-1==(0|i)){i=-1;break n}}if(a=l,u=(i>>>0)/3|0,f=h[e+56>>2]+(u>>>3&268435452)|0,!((d=h[f>>2])&(o=1<<u)))continue}else i=-1}break}!m|!(1&l)||(s=h[r+12>>2]-4|0,l=h[s>>2],a=h[e+56>>2]+(l>>>3&536870908)|0,n=h[a>>2],g=a,v=Dr(l)&n,h[g>>2]=v,h[r+12>>2]=s)}if(a=1,n=p,p=0,n)continue;break e}break}c=-1,Mt(e,-1);break e}bn(),x()}Zi(1336),x()}if(h[44+((t<<2)+e|0)>>2]=c,s=h[r+8>>2],t=h[r+12>>2]-s|0){if(c=h[e+56>>2],l=1&(e=(e=t>>2)>>>0>1?e:1),i=0,t>>>0>=8)for(p=-2&e,u=0;n=h[(a=i<<2)+s>>2],e=h[(t=c+(n>>>3&536870908)|0)>>2],g=t,v=Dr(n)&e,h[g>>2]=v,n=h[s+(4|a)>>2],e=h[(t=c+(n>>>3&536870908)|0)>>2],g=t,v=Dr(n)&e,h[g>>2]=v,i=i+2|0,(0|p)!=(0|(u=u+2|0)););l&&(i=h[s+(i<<2)>>2],e=h[(t=c+(i>>>3&536870908)|0)>>2],g=t,v=Dr(i)&e,h[g>>2]=v)}}function we(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0;if(-1==(0|t))return 1;if(r=(t>>>0)/3|0,!(h[h[e+24>>2]+(r>>>3&268435452)>>2]>>>r&1)){if(i=h[e+48>>2],h[e+52>>2]=i,(0|i)==h[e+56>>2]?(n=mr(4),h[n>>2]=t,a=n+4|0,h[e+56>>2]=a,h[e+52>>2]=a,h[e+48>>2]=n,i&&be(i)):(h[i>>2]=t,h[e+52>>2]=i+4),n=-1,a=h[e+4>>2],-1!=(0|(s=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(n=h[h[a>>2]+(s<<2)>>2]),o=t-b(r,3)|0)i=t-1|0;else if(-1==(0|(i=t+2|0)))return 0;if(-1==(0|n))return 0;if(-1==(0|(r=h[h[a>>2]+(i<<2)>>2])))return 0;if(i=h[e+36>>2],(l=h[(a=i+(n>>>3&536870908)|0)>>2])&(c=1<<n)||(h[a>>2]=l|c,tt(e+8|0,n,s),i=h[e+36>>2]),(n=h[(i=(r>>>3&536870908)+i|0)>>2])&(a=1<<r)||(h[i>>2]=n|a,tt(e+8|0,r,(o?-1:2)+t|0)),(0|(i=h[e+52>>2]))==h[e+48>>2])return 1;for(c=e+8|0;;){r=((t=h[(i=i-4|0)>>2])>>>0)/3|0;e:{t:if(-1!=(0|t)&&(n=h[e+24>>2]+(r>>>3&268435452)|0,!((a=h[n>>2])&(r=1<<r)))){for(h[n>>2]=r|a;;){if(r=h[e+4>>2],-1==(0|(i=h[h[r>>2]+(t<<2)>>2])))return 0;i:{if(n=h[e+36>>2]+(i>>>3&536870908)|0,!((a=h[n>>2])&(s=1<<i)))if(-1!=(0|(o=h[h[r+24>>2]+(i<<2)>>2]))&&-1!=(0|(o=((l=o+1|0)>>>0)%3|0?l:o-2|0))&&-1!=(0|(r=h[h[r+12>>2]+(o<<2)>>2]))){if(h[n>>2]=a|s,tt(c,i,t),-1!=(0|(((i=r+1|0)>>>0)%3|0?i:r-2|0))){r=t-2|0,i=t+1|0,t=-1,-1!=(0|(i=(i>>>0)%3|0?i:r))&&(t=h[h[h[e+4>>2]+12>>2]+(i<<2)>>2]),s=1<<(i=(t>>>0)/3|0),n=h[e+24>>2],r=h[n+((o=i>>>5|0)<<2)>>2];break i}}else h[n>>2]=a|s,tt(c,i,t);i=-1,a=h[e+4>>2],-1!=(0|(r=((r=t+1|0)>>>0)%3|0?r:t-2|0))&&(i=h[h[a+12>>2]+(r<<2)>>2]);r:{if((t>>>0)%3|0)n=t-1|0;else if(n=t+2|0,t=-1,-1==(0|n))break r;t=h[h[a+12>>2]+(n<<2)>>2]}if(a=(l=-1==(0|t))?-1:(t>>>0)/3|0,r=(i>>>0)/3|0,(s=-1==(0|i))||(n=h[e+24>>2],(r=h[n+((o=(s=s?-1:r)>>>5|0)<<2)>>2])&(s=1<<s))){if(!(l||(s=1<<a,n=h[e+24>>2],s&(r=h[n+((o=a>>>5|0)<<2)>>2]))))break i;i=h[e+52>>2]-4|0,h[e+52>>2]=i;break e}if(l)t=i;else if(h[(a>>>3&536870908)+n>>2]>>>a&1)t=i;else{if(r=h[e+52>>2],h[r-4>>2]=t,(0|r)!=h[e+56>>2]){h[r>>2]=i,i=r+4|0;break t}r:{if((t=1+(s=(r=r-(n=h[e+48>>2])|0)>>2)|0)>>>0<1073741824){if(a=r>>1,a=r>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break r;t=mr(a<<2)}else t=0;if(h[(s=t+(s<<2)|0)>>2]=i,i=s+4|0,(0|r)>0&&We(t,n,r),h[e+56>>2]=t+(a<<2),h[e+52>>2]=i,h[e+48>>2]=t,!n)break e;be(n),i=h[e+52>>2];break e}bn(),x()}Zi(1336),x()}}if(h[(o<<2)+n>>2]=r|s,-1==(0|t))break}return 0}h[e+52>>2]=i}if(h[e+48>>2]==(0|i))break}}return 1}function Se(e,t){e|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;I=i=I-32|0;e:{if(f[38+(t|=0)>>1]<=513){if((0|(r=h[t+20>>2]))>=(0|(c=h[t+12>>2]))&(n=h[t+16>>2])>>>0>=p[t+8>>2]|(0|r)>(0|c))break e;if(c=d[n+h[t>>2]|0],r=(n=n+1|0)?r:r+1|0,h[t+16>>2]=n,h[t+20>>2]=r,c)break e}t:if(Ai(1,i+28|0,t))i:{if(n=h[i+28>>2]){if(nt(e+60|0,n),h[(r=i+8|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,!ze(r,t))break i;for(;c=1<<s,o=Gi(r),l=h[e+60>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|n)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(n=h[i+28>>2]){if(s=0,nt(e+72|0,n),h[(r=i+8|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,!ze(r,t))break i;for(;c=1<<s,o=Gi(r),l=h[e+72>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|n)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(n=h[i+28>>2]){if(s=0,nt(e+84|0,n),h[(r=i+8|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,!ze(r,t))break i;for(;c=1<<s,o=Gi(r),l=h[e+84>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|n)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(n=h[i+28>>2]){if(s=0,nt(e+96|0,n),h[(r=i+8|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,!ze(r,t))break i;for(;c=1<<s,o=Gi(r),l=h[e+96>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|n)!=(0|(s=s+1|0)););}if(s=0,c=n=h[t+12>>2],l=r=h[t+20>>2],r=(u=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(m=h[t+8>>2])>>>0<u>>>0&(0|r)>=(0|n)|(0|r)>(0|n))break e;if(g=h[t>>2],n=d[0|(n=g+o|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=r,r=l,o=l=o+8|0,l=r=l>>>0<8?r+1|0:r,o>>>0>m>>>0&(0|r)>=(0|c)|(0|r)>(0|c))break e;if(r=d[0|(r=u+g|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=l,(0|r)<(0|n))break e;if(h[e+16>>2]=r,h[e+12>>2]=n,!(t=(r>>31)-((n>>31)+(r>>>0<n>>>0)|0)|0)&(r=r-n|0)>>>0>2147483646|t)break e;if(s=1,t=r+1|0,h[e+20>>2]=t,r=t>>>1|0,h[e+24>>2]=r,h[e+28>>2]=0-r,1&t)break e;h[e+24>>2]=r-1;break e}s=0}return I=i+32|0,0|s}function Te(e,t,i){t|=0,i|=0;var r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0;e:if(!((0|(g=0|Rn[h[h[(e|=0)>>2]+44>>2]](e)))<=0)&&(n=h[t+4>>2]-h[t>>2]>>2,I=o=I+-64|0,r=tr(o),s=b(h[3408],g),dr(r,h[h[e+8>>2]+56>>2],g<<24>>24,5,0,s,s>>31),r=It(s=mr(96),r),a[r+84|0]=1,h[r+72>>2]=h[r+68>>2],Dt(r,n),h[r+60>>2]=h[h[e+8>>2]+60>>2],r=h[e+16>>2],h[e+16>>2]=s,r&&Hi(r),I=o- -64|0,o=h[e+16>>2],h[o+80>>2]&&(c=h[h[o>>2]>>2])&&!((0|(l=h[i+12>>2]))<=(0|(r=h[i+20>>2]))&(u=h[i+8>>2])>>>0<=(s=h[i+16>>2])>>>0|(0|r)>(0|l)))){f=b(n,g),c=c+h[o+48>>2]|0,p=h[i>>2],m=d[p+s|0],n=(o=s+1|0)?r:r+1|0,h[i+16>>2]=o,h[i+20>>2]=n;t:{i:{r:{if(m){if(V(f,g,i,c))break r;break e}if((0|n)>=(0|l)&o>>>0>=u>>>0|(0|n)>(0|l))break e;o=d[o+p|0],r=(n=s+2|0)>>>0<2?r+1|0:r,h[i+16>>2]=n,h[i+20>>2]=r,r=h[h[e+16>>2]+64>>2],r=h[r+4>>2]-h[r>>2]|0;n:{if((0|o)==h[3408]){if((n=r)>>>0<(r=f<<2)>>>0)break e;if(l=h[i+8>>2],o=h[i+12>>2],n=h[i+20>>2],(0|(n=(s=r+(u=h[i+16>>2])|0)>>>0<r>>>0?n+1|0:n))<=(0|o)&s>>>0<=l>>>0|(0|n)<(0|o))break n;break e}if(r>>>0<b(o,f)>>>0)break e;if(l=h[i+12>>2],n=h[i+20>>2],(s=p=h[i+8>>2])-(u=h[i+16>>2])>>>0<Xi(r=o,0,f,0)>>>0&(0|(s=l-(n+(s>>>0<u>>>0)|0)|0))<=(0|(m=L))|(0|s)<(0|m))break e;if(s=1,!f)break i;if(s=0,(m=p)>>>0<(p=r+u|0)>>>0&(0|(n=p>>>0<r>>>0?n+1|0:n))>=(0|l)|(0|n)>(0|l))break t;for(;;){if(We(c+(v<<2)|0,u+h[i>>2]|0,o),n=h[i+20>>2],n=(l=r+h[i+16>>2]|0)>>>0<r>>>0?n+1|0:n,u=l,h[i+16>>2]=l,h[i+20>>2]=n,(0|f)==(0|(v=v+1|0)))break r;if(m=h[i+8>>2],!((0|(n=(p=r+u|0)>>>0<r>>>0?n+1|0:n))<=(0|(l=h[i+12>>2]))&p>>>0<=m>>>0|(0|n)<(0|l)))break}break t}We(c,u+h[i>>2]|0,r),n=r,o=r+h[i+16>>2]|0,r=h[i+20>>2],h[i+16>>2]=o,h[i+20>>2]=n>>>0>o>>>0?r+1|0:r}if(s=1,f&&!((r=h[e+20>>2])&&(s=0,0|Rn[h[h[r>>2]+32>>2]](r)))){if(r=0,s=0,!((0|f)<=0)){if(1!=(0|f))for(l=-2&f;o=h[(n=r<<2)+c>>2],h[n+c>>2]=0-(1&o)^o>>>1,n=h[(o=4|n)+c>>2],h[o+c>>2]=0-(1&n)^n>>>1,r=r+2|0,(0|l)!=(0|(s=s+2|0)););1&f&&(r=h[(n=r<<2)+c>>2],h[n+c>>2]=0-(1&r)^r>>>1)}s=0}}if(r=h[e+20>>2]){if(!(0|Rn[h[h[r>>2]+40>>2]](r,i)))break e;if(!(s||(s=0,e=h[e+20>>2],0|Rn[h[h[e>>2]+44>>2]](e,c,c,f,g,h[t>>2]))))break t}s=1}return 0|s}return 0}function xe(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;I=i=I-32|0;e:{if(!(h[e+8>>2]<<5>>>0>=t>>>0)){if(h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,(0|t)<0)break e;r=mr((t=1+(t-1>>>5|0)|0)<<2),h[i+24>>2]=t,h[i+20>>2]=0,h[i+16>>2]=r,t=h[e>>2],h[i+12>>2]=0,h[i+8>>2]=t,r=h[e+4>>2],h[i+4>>2]=31&r,h[i>>2]=t+(r>>>3&536870908),I=s=I-32|0,o=(t=((c=h[i+4>>2])-(a=h[i+12>>2])|0)+((u=h[i>>2])-(l=h[i+8>>2])<<3)|0)+(n=h[i+20>>2])|0,h[i+20>>2]=o,!n|(o-1^n-1)>>>0>31?(r=h[i+16>>2],o>>>0<=32?h[r>>2]=0:h[(o-1>>>3&536870908)+r>>2]=0):r=h[i+16>>2],r=(n>>>3&536870908)+r|0;t:if((0|(n&=31))!=(0|a)){if(h[s+28>>2]=a,h[s+24>>2]=l,h[s+20>>2]=c,h[s+16>>2]=u,h[s+12>>2]=n,h[s+8>>2]=r,t=h[s+28>>2],r=h[s+24>>2],(0|(l=(h[s+20>>2]-t|0)+(h[s+16>>2]-r<<3)|0))<=0)t=h[s+12>>2];else{if(t?(o=(n=(0|l)<(0|(u=32-t|0))?l:u)>>>0>(c=32-(a=h[s+12>>2])|0)>>>0?c:n,d=h[s+8>>2],f=h[d>>2]&(-1<<a&-1>>>c-o^-1),c=h[r>>2]&-1<<t&-1>>>u-n,h[d>>2]=f|(t>>>0<a>>>0?c<<a-t:c>>>t-a|0),t=31&(r=a+o|0),h[s+12>>2]=t,a=d+(r>>>3&536870908)|0,h[s+8>>2]=a,(0|(r=n-o|0))>0&&(h[a>>2]=h[a>>2]&(-1>>>32-r^-1)|c>>>o+h[s+28>>2],h[s+12>>2]=r,t=r),l=l-n|0,r=h[s+24>>2]+4|0,h[s+24>>2]=r):t=h[s+12>>2],a=32-t|0,o=-1<<t,(0|l)>=32)for(c=-1^o;n=h[s+8>>2],r=h[r>>2],h[n>>2]=c&h[n>>2]|r<<t,h[s+8>>2]=n+4,h[n+4>>2]=o&h[n+4>>2]|r>>>a,r=h[s+24>>2]+4|0,h[s+24>>2]=r,n=l>>>0>63,l=l-32|0,n;);(0|l)<=0||(n=h[s+8>>2],c=a,a=(0|a)<(0|l)?a:l,c=h[n>>2]&(o&-1>>>c-a^-1),o=h[r>>2]&-1>>>32-l,h[n>>2]=c|o<<t,t=31&(r=t+a|0),h[s+12>>2]=t,n=n+(r>>>3&536870908)|0,h[s+8>>2]=n,(0|(r=l-a|0))<=0||(h[n>>2]=h[n>>2]&(-1>>>32-r^-1)|o>>>a,h[s+12>>2]=r,t=r))}r=h[s+8>>2],h[s+4>>2]=t,h[s>>2]=r}else{if((0|t)<=0)break t;if(a&&(o=-1<<a&-1>>>(o=32-a|0)-(n=(0|t)<(0|o)?t:o),h[r>>2]=h[r>>2]&(-1^o)|o&h[l>>2],t=t-n|0,l=l+4|0,r=r+(n+a>>>3&536870908)|0),n=At(c=r,l,r=(a=(0|t)/32|0)<<2),(0|(t=t-(a<<5)|0))<=0)break t;t=-1>>>32-t|0,h[(a=r+n|0)>>2]=h[a>>2]&(-1^t)|t&h[r+l>>2]}I=s+32|0,t=h[e>>2],h[e>>2]=h[i+16>>2],h[i+16>>2]=t,r=h[e+4>>2],h[e+4>>2]=h[i+20>>2],h[i+20>>2]=r,r=h[e+8>>2],h[e+8>>2]=h[i+24>>2],h[i+24>>2]=r,t&&be(t)}return void(I=i+32|0)}pn(),x()}function Me(e,t){t|=0;var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0;I=i=I-80|0;e:{if(d[h[28+(e|=0)>>2]+36|0]<=1){if(n=h[t+20>>2],n=(a=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(0|(u=h[t+12>>2]))<=(0|n)&a>>>0>p[t+8>>2]|(0|n)>(0|u))break e;r=r+h[t>>2]|0,l=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=n}else{if(!Ei(1,i+76|0,t))break e;l=h[i+76>>2]}if(l&&!((n=Xi((n=h[t+8>>2])-(r=h[t+16>>2])|0,h[t+12>>2]-(h[t+20>>2]+(r>>>0>n>>>0)|0)|0,5,0))>>>0<l>>>0&(0|(r=L))<=0|(0|r)<0)){for(r=h[e+4>>2],(n=h[e+8>>2]-r>>2)>>>0<l>>>0?ei(e+4|0,l-n|0):n>>>0<=l>>>0||(h[e+8>>2]=r+(l<<2)),E=e+16|0,g=h[e+32>>2],s=1;;){t:if(!((0|(r=o=h[t+12>>2]))<=(0|(n=h[t+20>>2]))&(_=h[t+8>>2])>>>0<=(c=h[t+16>>2])>>>0|(0|r)<(0|n)||(y=h[t>>2],u=d[y+c|0],r=n,r=(a=c+1|0)?r:r+1|0,h[t+16>>2]=a,h[t+20>>2]=r,(0|r)>=(0|o)&a>>>0>=_>>>0|(0|r)>(0|o)||(a=d[a+y|0],r=n,r=(m=c+2|0)>>>0<2?r+1|0:r,h[t+16>>2]=m,h[t+20>>2]=r,(0|r)>=(0|o)&m>>>0>=_>>>0|(0|r)>(0|o)||(m=d[m+y|0],r=n,r=(A=c+3|0)>>>0<3?r+1|0:r,h[t+16>>2]=A,h[t+20>>2]=r,(0|r)>=(0|o)&A>>>0>=_>>>0|(0|r)>(0|o)||(o=d[A+y|0],r=n,r=(n=c+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=n,h[t+20>>2]=r,!m|(a-12&255)>>>0<245|u>>>0>4)))))){if(c=tr(i+8|0),_=m<<24>>24,o=0!=(0|o),r=(n=a-1|0)>>>0<=10?h[13616+(n<<2)>>2]:-1,dr(c,u,_,a,o,n=b(r,m),n>>31),(65535&((n=f[h[e+28>>2]+36>>1])<<8|n>>>8))>>>0<=258){if(r=h[t+20>>2],r=(a=(n=h[t+16>>2])+2|0)>>>0<2?r+1|0:r,(0|(u=h[t+12>>2]))<=(0|r)&a>>>0>p[t+8>>2]|(0|r)>(0|u))break t;n=n+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8,h[t+16>>2]=a,h[t+20>>2]=r}else{if(!Ei(1,i+4|0,t))break t;s=h[i+4>>2]}if(h[i+68>>2]=s,n=It(mr(96),c),Rn[h[h[g>>2]+8>>2]](g,h[g+12>>2]-h[g+8>>2]>>2,n),n=(h[g+12>>2]-h[g+8>>2]>>2)-1|0,h[h[(a=n<<2)+h[g+8>>2]>>2]+60>>2]=s,h[h[e+4>>2]+(v<<2)>>2]=n,s=h[e+16>>2],(0|(r=h[e+20>>2]-s>>2))>(0|n)||(h[i>>2]=-1,(n=n+1|0)>>>0>r>>>0?($e(E,n-r|0,i),s=h[E>>2]):r>>>0<=n>>>0||(h[e+20>>2]=(n<<2)+s)),h[a+s>>2]=v,s=(v=v+1|0)>>>0<l>>>0,(0|l)!=(0|v))continue}break}v=!s}}return I=i+80|0,1&v}function Re(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,v=0;e:if(i=f[t+38>>1]){if(i>>>0<=511){if(r=h[t+12>>2],i=h[t+20>>2],i=(n=(s=h[t+16>>2])+4|0)>>>0<4?i+1|0:i,n>>>0>p[t+8>>2]&(0|i)>=(0|r)|(0|i)>(0|r))break e;i=s+h[t>>2]|0,a=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[e+12>>2]=a,i=h[t+20>>2],i=(r=h[t+16>>2]+4|0)>>>0<4?i+1|0:i,h[t+16>>2]=r,h[t+20>>2]=i}else{if(!yi(1,e+12|0,t))break e;a=h[e+12>>2]}if(r=h[e>>2],(i=h[e+4>>2]-r>>2)>>>0<a>>>0?(ei(e,a-i|0),a=h[e+12>>2]):i>>>0<=a>>>0||(h[e+4>>2]=r+(a<<2)),!a)return 1;for(c=h[t+8>>2],l=h[t+12>>2],m=h[e>>2],s=0;;){if((0|l)<=(0|(i=h[t+20>>2]))&c>>>0<=(r=h[t+16>>2])>>>0|(0|i)>(0|l))return 0;g=h[t>>2],u=d[g+r|0],i=(r=r+1|0)?i:i+1|0,o=r,h[t+16>>2]=r,h[t+20>>2]=i,r=u>>>2|0,n=0;t:{i:{r:{n:switch(0|(b=3&u)){case 0:break i;case 3:break n;default:break r}if((i=r+s|0)>>>0>=a>>>0)return 0;xt(m+(s<<2)|0,0,4+(252&u)|0),s=i;break t}for(;;){if((0|i)>=(0|l)&o>>>0>=c>>>0|(0|i)>(0|l))break e;if(a=d[o+g|0],i=(o=o+1|0)?i:i+1|0,h[t+16>>2]=o,h[t+20>>2]=i,r|=a<<(n<<3|6),(0|b)==(0|(n=n+1|0)))break}}h[m+(s<<2)>>2]=r}if(!((a=h[e+12>>2])>>>0>(s=s+1|0)>>>0))break}if(i=e+16|0,u=h[e>>2],r=h[e+16>>2],(t=h[e+20>>2]-r|0)>>>0<=16383?ei(i,4096-(t>>>2|0)|0):16384!=(0|t)&&(h[e+20>>2]=r+16384),s=h[(t=e+28|0)>>2],(r=h[e+32>>2]-s>>3)>>>0<a>>>0)ti(t,a-r|0),s=h[t>>2];else if(r>>>0>a>>>0&&(h[e+32>>2]=(a<<3)+s),!a)break e;for(n=0,e=0;;){if(l=h[(t=u+(n<<2)|0)>>2],r=e,h[4+(o=(n<<3)+s|0)>>2]=r,h[o>>2]=l,(e=(l=h[t>>2])+r|0)>>>0>4096)break e;if(!(e>>>0<=r>>>0)){if(o=h[i>>2],t=0,c=7&l)for(;h[o+(r<<2)>>2]=n,r=r+1|0,(0|c)!=(0|(t=t+1|0)););if(!(l-1>>>0<=6))for(;h[(t=o+(r<<2)|0)>>2]=n,h[t+28>>2]=n,h[t+24>>2]=n,h[t+20>>2]=n,h[t+16>>2]=n,h[t+12>>2]=n,h[t+8>>2]=n,h[t+4>>2]=n,(0|(r=r+8|0))!=(0|e););}if((0|(n=n+1|0))==(0|a))break}v=4096==(0|e)}return v}function Pe(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0;I=i=I-16|0,r=h[e+4>>2],h[e+40>>2]=h[e>>2],h[e+44>>2]=r,r=h[e+36>>2],h[e+72>>2]=h[e+32>>2],h[e+76>>2]=r,n=h[e+28>>2],h[(r=e- -64|0)>>2]=h[e+24>>2],h[r+4>>2]=n,r=h[e+20>>2],h[e+56>>2]=h[e+16>>2],h[e+60>>2]=r,r=h[e+12>>2],h[e+48>>2]=h[e+8>>2],h[e+52>>2]=r;e:if(Ut(e+40|0,1,i+8|0)&&(r=h[e+44>>2],h[e>>2]=h[e+40>>2],h[e+4>>2]=r,r=h[e+76>>2],h[e+32>>2]=h[e+72>>2],h[e+36>>2]=r,r=h[e+68>>2],h[e+24>>2]=h[e+64>>2],h[e+28>>2]=r,o=n=h[e+60>>2],r=h[e+56>>2],h[e+16>>2]=r,h[e+20>>2]=n,a=h[e+52>>2],n=h[e+48>>2],h[e+8>>2]=n,h[e+12>>2]=a,l=n-r|0,(0|(s=h[i+12>>2]))==(0|(a=a-((r>>>0>n>>>0)+o|0)|0))&l>>>0>=(n=h[i+8>>2])>>>0|a>>>0>s>>>0)){if(a=r+n|0,r=o+s|0,h[e+16>>2]=a,h[e+20>>2]=n>>>0>a>>>0?r+1|0:r,f[e+38>>1]<=513){if(r=h[e+4>>2],h[e+96>>2]=h[e>>2],h[e+100>>2]=r,r=h[e+36>>2],h[e+128>>2]=h[e+32>>2],h[e+132>>2]=r,r=h[e+28>>2],h[e+120>>2]=h[e+24>>2],h[e+124>>2]=r,r=h[e+20>>2],h[e+112>>2]=h[e+16>>2],h[e+116>>2]=r,r=h[e+12>>2],h[e+104>>2]=h[e+8>>2],h[e+108>>2]=r,!(Ut(e+96|0,1,i+8|0)&&(r=h[e+100>>2],h[e>>2]=h[e+96>>2],h[e+4>>2]=r,r=h[e+132>>2],h[e+32>>2]=h[e+128>>2],h[e+36>>2]=r,r=h[e+124>>2],h[e+24>>2]=h[e+120>>2],h[e+28>>2]=r,o=n=h[e+116>>2],r=h[e+112>>2],h[e+16>>2]=r,h[e+20>>2]=n,a=h[e+108>>2],n=h[e+104>>2],h[e+8>>2]=n,h[e+12>>2]=a,l=n-r|0,(0|(s=h[i+12>>2]))==(0|(a=a-((r>>>0>n>>>0)+o|0)|0))&l>>>0>=(n=h[i+8>>2])>>>0|a>>>0>s>>>0))){r=0;break e}a=r+n|0,r=o+s|0,h[e+16>>2]=a,h[e+20>>2]=n>>>0>a>>>0?r+1|0:r}else if(r=0,!ze(e+80|0,e))break e;r=0,Ot(e)&&(r=h[e+4>>2],h[t>>2]=h[e>>2],h[t+4>>2]=r,r=h[e+36>>2],h[t+32>>2]=h[e+32>>2],h[t+36>>2]=r,r=h[e+28>>2],h[t+24>>2]=h[e+24>>2],h[t+28>>2]=r,r=h[e+20>>2],h[t+16>>2]=h[e+16>>2],h[t+20>>2]=r,r=h[e+12>>2],h[t+8>>2]=h[e+8>>2],h[t+12>>2]=r,r=1)}else r=0;return I=i+16|0,r}function Ce(e,t,i){e|=0,t|=0,i|=0;var r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;I=r=I-16|0,h[r+8>>2]=i;e:if(!((0|(s=(a=h[e+12>>2])-(n=h[e+8>>2])>>2))>(0|t)))if((l=t+1|0)>>>0>s>>>0){if((s=l-s|0)>>>0<=(o=h[e+16>>2])-(n=h[e+12>>2])>>2>>>0){s&&(n=xt(a=n,0,n=s<<2)+n|0),h[e+12>>2]=n;break e}t:{i:{r:{if((a=(c=n-(l=h[e+8>>2])>>2)+s|0)>>>0<1073741824){if(d=(o=o-l|0)>>1,o=o>>>0<2147483644?a>>>0>d>>>0?a:d:1073741823){if(o>>>0>=1073741824)break r;u=mr(o<<2)}if(c=(s=xt(a=(c<<2)+u|0,0,c=s<<2))+c|0,o=(o<<2)+u|0,(0|n)==(0|l))break i;for(;s=h[(n=n-4|0)>>2],h[n>>2]=0,h[(a=a-4|0)>>2]=s,(0|n)!=(0|l););if(h[e+16>>2]=o,s=h[e+12>>2],h[e+12>>2]=c,n=h[e+8>>2],h[e+8>>2]=a,(0|n)==(0|s))break t;for(;a=h[(s=s-4|0)>>2],h[s>>2]=0,a&&Hi(a),(0|n)!=(0|s););break t}bn(),x()}Zi(1336),x()}h[e+16>>2]=o,h[e+12>>2]=c,h[e+8>>2]=s}n&&be(n)}else if(!(s>>>0<=l>>>0)){if((0|(n=n+(l<<2)|0))!=(0|a)){for(;i=h[(a=a-4|0)>>2],h[a>>2]=0,i&&Hi(i),(0|n)!=(0|a););i=h[r+8>>2]}h[e+12>>2]=n}e:{t:{if(!((0|(n=h[i+56>>2]))>4))if(a=b(n,12)+e|0,(0|(n=h[a+24>>2]))==h[a+28>>2]){if((n=1+(u=(s=n-(l=h[a+20>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(o=s>>1,o=s>>>0<2147483644?n>>>0>o>>>0?n:o:1073741823){if(o>>>0>=1073741824)break e;n=mr(o<<2)}else n=0;h[(u=n+(u<<2)|0)>>2]=t,(0|s)>0&&We(n,l,s),h[a+20>>2]=n,h[a+24>>2]=u+4,h[a+28>>2]=n+(o<<2),l&&be(l)}else h[n>>2]=t,h[a+24>>2]=n+4;return h[i+60>>2]=t,e=h[e+8>>2],h[r+8>>2]=0,e=h[(t=e+(t<<2)|0)>>2],h[t>>2]=i,e&&Hi(e),e=h[r+8>>2],h[r+8>>2]=0,e&&Hi(e),void(I=r+16|0)}bn(),x()}Zi(1336),x()}function ke(e,t){var i,r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;I=i=I-16|0,h[i>>2]=t,l=-1,-1!=(0|t)?(n=t+1|0,h[i+4>>2]=(n>>>0)%3|0?n:t-2|0,l=(t>>>0)%3|0?t-1|0:t+2|0):h[i+4>>2]=-1,h[i+8>>2]=l,r=-1==(0|t)?-1:(t>>>0)/3|0;e:{t:{i:{r:{for(;;){n:if(-1!=(0|t)&&-1!=(0|(n=h[h[h[e+8>>2]+12>>2]+(t<<2)>>2]))){if(!((n>>>0)/3>>>0<r>>>0)&&(l=0,h[e+220>>2]!=h[e+216>>2]))for(;;){if(Gi(h[e+368>>2]+(l<<4)|0))if(o=h[e+216>>2]+b(l,144)|0,(n=h[o+136>>2])>>>0<(a=h[o+140>>2])>>>0)h[n>>2]=t,h[o+136>>2]=n+4;else{if((n=1+(s=(u=n-(c=h[o+132>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(d=s<<2,s=(a=a-c|0)>>1,a=a>>>0<2147483644?n>>>0>s>>>0?n:s:1073741823){if(a>>>0>=1073741824)break e;n=mr(a<<2)}else n=0;h[(s=d+n|0)>>2]=t,(0|u)>0&&We(n,c,u),h[o+132>>2]=n,h[o+136>>2]=s+4,h[o+140>>2]=n+(a<<2),c&&be(c)}if(!((l=l+1|0)>>>0<(h[e+220>>2]-h[e+216>>2]|0)/144>>>0))break}}else{if(l=0,(0|(n=h[e+216>>2]))==h[e+220>>2])break n;for(;;){if(o=b(l,144)+n|0,(n=h[o+136>>2])>>>0<(a=h[o+140>>2])>>>0)h[n>>2]=t,h[o+136>>2]=n+4;else{if((n=1+(s=(u=n-(c=h[o+132>>2])|0)>>2)|0)>>>0>=1073741824)break r;if(d=s<<2,s=(a=a-c|0)>>1,a=a>>>0<2147483644?n>>>0>s>>>0?n:s:1073741823){if(a>>>0>=1073741824)break i;n=mr(a<<2)}else n=0;h[(s=d+n|0)>>2]=t,(0|u)>0&&We(n,c,u),h[o+132>>2]=n,h[o+136>>2]=s+4,h[o+140>>2]=n+(a<<2),c&&be(c)}if(l=l+1|0,n=h[e+216>>2],!(l>>>0<(h[e+220>>2]-n|0)/144>>>0))break}}if(3==(0|(f=f+1|0)))break;t=h[(f<<2)+i>>2]}return I=i+16|0,1}bn(),x()}Zi(1336),x()}bn(),x()}Zi(1336),x()}function Oe(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;I=i=I-16|0,h[i>>2]=t,o=-1,-1!=(0|t)?(r=t+1|0,h[i+4>>2]=(r>>>0)%3|0?r:t-2|0,o=(t>>>0)%3|0?t-1|0:t+2|0):h[i+4>>2]=-1,h[i+8>>2]=o;e:{t:{for(;;){i:{if(!(-1==(0|t)|-1==h[h[h[e+8>>2]+12>>2]+(t<<2)>>2])){if(o=0,h[e+220>>2]==h[e+216>>2])break i;r:{for(;;){n:{if(Gi(h[e+368>>2]+(o<<4)|0))if(s=h[e+216>>2]+b(o,144)|0,(r=h[s+136>>2])>>>0<(n=h[s+140>>2])>>>0)h[r>>2]=t,h[s+136>>2]=r+4;else{if((r=1+(a=(c=r-(l=h[s+132>>2])|0)>>2)|0)>>>0>=1073741824)break n;if(u=a<<2,a=(n=n-l|0)>>1,n=n>>>0<2147483644?r>>>0>a>>>0?r:a:1073741823){if(n>>>0>=1073741824)break r;r=mr(n<<2)}else r=0;h[(a=u+r|0)>>2]=t,(0|c)>0&&We(r,l,c),h[s+132>>2]=r,h[s+136>>2]=a+4,h[s+140>>2]=r+(n<<2),l&&be(l)}if((o=o+1|0)>>>0<(h[e+220>>2]-h[e+216>>2]|0)/144>>>0)continue;break i}break}bn(),x()}Zi(1336),x()}if(o=0,(0|(r=h[e+216>>2]))!=h[e+220>>2])for(;;){if(s=b(o,144)+r|0,(r=h[s+136>>2])>>>0<(n=h[s+140>>2])>>>0)h[r>>2]=t,h[s+136>>2]=r+4;else{if((r=1+(a=(c=r-(l=h[s+132>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(u=a<<2,a=(n=n-l|0)>>1,n=n>>>0<2147483644?r>>>0>a>>>0?r:a:1073741823){if(n>>>0>=1073741824)break e;r=mr(n<<2)}else r=0;h[(a=u+r|0)>>2]=t,(0|c)>0&&We(r,l,c),h[s+132>>2]=r,h[s+136>>2]=a+4,h[s+140>>2]=r+(n<<2),l&&be(l)}if(o=o+1|0,r=h[e+216>>2],!(o>>>0<(h[e+220>>2]-r|0)/144>>>0))break}}if(3==(0|(d=d+1|0)))break;t=h[(d<<2)+i>>2]}return I=i+16|0,1}bn(),x()}Zi(1336),x()}function De(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;if(((n=h[e+8>>2])-(s=h[e+4>>2])|0)/12>>>0>=t>>>0){if(t){if(r=s,a=1+(((n=b(t,12)-12|0)>>>0)/12|0)&3)for(;c=h[i+4>>2],h[r>>2]=h[i>>2],h[r+4>>2]=c,h[r+8>>2]=h[i+8>>2],r=r+12|0,(0|a)!=(0|(o=o+1|0)););if(s=b(t,12)+s|0,!(n>>>0<36))for(;t=h[i+4>>2],h[r>>2]=h[i>>2],h[r+4>>2]=t,h[r+8>>2]=h[i+8>>2],h[r+20>>2]=h[i+8>>2],t=h[i+4>>2],h[r+12>>2]=h[i>>2],h[r+16>>2]=t,h[r+32>>2]=h[i+8>>2],t=h[i+4>>2],h[r+24>>2]=h[i>>2],h[r+28>>2]=t,t=h[i+4>>2],h[r+36>>2]=h[i>>2],h[r+40>>2]=t,h[r+44>>2]=h[i+8>>2],(0|s)!=(0|(r=r+48|0)););}h[e+4>>2]=s}else{e:{if((r=(l=(s-(a=h[e>>2])|0)/12|0)+t|0)>>>0<357913942){if(a=(n=(n-a|0)/12|0)<<1,a=n>>>0<178956970?r>>>0>a>>>0?r:a:357913941){if(a>>>0>=357913942)break e;c=mr(b(a,12))}if(r=n=b(l,12)+c|0,u=1+(((l=(t=b(t,12))-12|0)>>>0)/12|0)&3)for(r=n;d=h[i+4>>2],h[r>>2]=h[i>>2],h[r+4>>2]=d,h[r+8>>2]=h[i+8>>2],r=r+12|0,(0|u)!=(0|(o=o+1|0)););if(o=t+n|0,l>>>0>=36)for(;t=h[i+4>>2],h[r>>2]=h[i>>2],h[r+4>>2]=t,h[r+8>>2]=h[i+8>>2],h[r+20>>2]=h[i+8>>2],t=h[i+4>>2],h[r+12>>2]=h[i>>2],h[r+16>>2]=t,h[r+32>>2]=h[i+8>>2],t=h[i+4>>2],h[r+24>>2]=h[i>>2],h[r+28>>2]=t,t=h[i+4>>2],h[r+36>>2]=h[i>>2],h[r+40>>2]=t,h[r+44>>2]=h[i+8>>2],(0|o)!=(0|(r=r+48|0)););return t=h[e>>2],r=n+b((0|(i=s-t|0))/-12|0,12)|0,(0|i)>0&&We(r,t,i),h[e+8>>2]=b(a,12)+c,h[e+4>>2]=o,h[e>>2]=r,void(t&&be(t))}bn(),x()}Zi(1336),x()}}function Ne(e,t,i,r){var n,a,s=0,o=0,l=0,c=0,u=0,d=0;if(n=h[t+16>>2],s=l=h[i+4>>2]-n|0,o=h[i>>2]-n|0,h[i>>2]=o,h[i+4>>2]=s,a=(0|(d=h[t+16>>2]))>=((c=(s>>=31)+l^s)+((s=o>>31)+o^s)|0))s=l;else{e:{t:{if((0|o)>=0){if(u=1,c=1,(0|l)>=0)break e;if(s=1,u=-1,c=-1,o)break t;break e}if(s=-1,u=-1,c=-1,(0|l)<=0)break e}u=(0|l)<=0?-1:1,c=s}s=(s=o<<1)-(o=b(c,d))|0,s=(((c=(0|b(u,c))>=0)?0-s|0:s)+(u=b(u,d))|0)/2|0,h[i+4>>2]=s,d=o,o=(l<<1)-u|0,o=(d+(c?0-o|0:o)|0)/2|0,h[i>>2]=o}e:{t:{i:{r:{n:{a:{s:{if(o){if((0|o)<0)break s;if((0|s)>=0)break a;break i}if(s)break n;u=1,l=0,s=0,c=0;break e}if(u=1,(0|s)>0)break r;c=(0|s)>0?253:0,l=s,s=o;break e}l=0-s|0,s=0-o|0,c=254;break t}if((0|s)<=0)break i}s=0-s|0,l=o,c=253;break t}l=0-o|0,c=255}h[i>>2]=s,h[i+4>>2]=l,u=0}i=h[r+4>>2]+l|0,(0|(o=h[r>>2]+s|0))>(0|(l=h[t+16>>2]))?o=o-h[t+4>>2]|0:(0-l|0)<=(0|o)||(o=h[t+4>>2]+o|0),(0|i)>(0|l)?i=i-h[t+4>>2]|0:(0-l|0)<=(0|i)||(i=h[t+4>>2]+i|0);e:if(u)t=i;else{t=i;t:switch((3&c)-1|0){case 0:t=0-o|0,o=i;break e;case 1:t=0-i|0,o=0-o|0;break e;case 2:break t;default:break e}t=o,o=0-i|0}if(a)i=t;else{e:{t:{if((0|o)>=0){if(i=1,s=1,(0|t)>=0)break e;if(r=1,i=-1,s=-1,o)break t;break e}if(r=-1,i=-1,s=-1,(0|t)<=0)break e}i=(0|t)<=0?-1:1,s=r}r=(r=o<<1)-(o=b(s,l))|0,h[e>>2]=r,d=0-r|0,c=r,i=(((r=(0|b(i,s))>=0)?d:c)+(s=b(i,l))|0)/2|0,t=(t<<1)-s|0,o=(o+(r?0-t|0:t)|0)/2|0}h[e>>2]=o+n,h[e+4>>2]=i+n}function Ie(e,t){var i=0,r=0,n=0,s=0;h[e+64>>2]||(i=mr(32),h[i+16>>2]=0,h[i+20>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,r=h[e+64>>2],h[e+64>>2]=i,r&&((i=h[r>>2])&&(h[r+4>>2]=i,be(i)),be(r),i=h[e+64>>2]),h[e>>2]=i,r=h[i+20>>2],h[e+8>>2]=h[i+16>>2],h[e+12>>2]=r,r=h[i+24>>2],i=h[i+28>>2],h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+16>>2]=r,h[e+20>>2]=i);e:{a[e+24|0]=d[t+24|0],h[e+28>>2]=h[t+28>>2],a[e+32|0]=d[t+32|0],i=h[t+44>>2],h[e+40>>2]=h[t+40>>2],h[e+44>>2]=i,i=h[t+52>>2],h[e+48>>2]=h[t+48>>2],h[e+52>>2]=i,h[e+56>>2]=h[t+56>>2],i=h[t+12>>2],h[e+8>>2]=h[t+8>>2],h[e+12>>2]=i,i=h[t+20>>2],h[e+16>>2]=h[t+16>>2],h[e+20>>2]=i,h[e+60>>2]=h[t+60>>2],(r=h[t>>2])?(i=0,(n=h[e>>2])&&(ji(n,i=h[r>>2],h[r+4>>2]-i|0,0),i=1)):(h[e>>2]=0,i=1);t:if(i){a[e+84|0]=d[t+84|0],h[e+80>>2]=h[t+80>>2],(0|e)!=(0|t)&&kt(e+68|0,h[t+68>>2],h[t+72>>2]);i:{if(r=h[t+88>>2]){if(t=mr(40),i=h[r>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t>>2]=i,n=h[r+12>>2]-h[r+8>>2]|0){if((0|n)<0)break e;i=mr(n),h[t+8>>2]=i,h[t+12>>2]=i,h[t+16>>2]=i+n,s=h[r+8>>2],(0|(n=h[r+12>>2]-s|0))>0&&(i=We(i,s,n)+n|0),h[t+12>>2]=i}if(i=h[r+36>>2],h[t+32>>2]=h[r+32>>2],h[t+36>>2]=i,i=h[r+28>>2],h[t+24>>2]=h[r+24>>2],h[t+28>>2]=i,i=h[e+88>>2],h[e+88>>2]=t,i)break i;break t}if(i=h[e+88>>2],h[e+88>>2]=0,!i)break t}(e=h[i+8>>2])&&(h[i+12>>2]=e,be(e)),be(i)}return}bn(),x()}function Le(e,t,i,r){var n=0,s=0,o=0,l=0,c=0,u=0;if(!((0|(l=r-i|0))<=0)){e:{if((0|l)<=((s=h[e+8>>2])-(c=h[e+4>>2])|0)){if((0|(u=c-t|0))>=(0|l)){o=c,s=r;break e}if(o=c,(0|(s=i+u|0))!=(0|r))for(n=s;a[0|o]=d[0|n],o=o+1|0,(0|(n=n+1|0))!=(0|r););if(h[e+4>>2]=o,(0|u)>0)break e;return}if((0|(r=l+(c-(n=h[e>>2])|0)|0))>=0){if(u=(s=s-n|0)<<1,i=We((o=t-n|0)+(r=(s=s>>>0<1073741823?r>>>0>u>>>0?r:u:2147483647)?mr(s):0)|0,i,l),(0|o)>0&&We(r,n,o),i=i+l|0,(0|t)!=(0|c)){if(o=(-1^t)+c|0,l=c-t&7)for(n=0;a[0|i]=d[0|t],i=i+1|0,t=t+1|0,(0|l)!=(0|(n=n+1|0)););if(o>>>0>=7)for(;a[0|i]=d[0|t],a[i+1|0]=d[t+1|0],a[i+2|0]=d[t+2|0],a[i+3|0]=d[t+3|0],a[i+4|0]=d[t+4|0],a[i+5|0]=d[t+5|0],a[i+6|0]=d[t+6|0],a[i+7|0]=d[t+7|0],i=i+8|0,(0|c)!=(0|(t=t+8|0)););n=h[e>>2]}return h[e+8>>2]=r+s,h[e+4>>2]=i,h[e>>2]=r,void(n&&be(n))}bn(),x()}if(c>>>0>(r=(n=o)-l|0)>>>0)for(;a[0|n]=d[0|r],n=n+1|0,c>>>0>(r=r+1|0)>>>0;);if(h[e+4>>2]=n,(e=o-(t+l|0)|0)&&At(o-e|0,t,e),(0|i)!=(0|s)){if(e=(-1^i)+s|0,o=s-i&7)for(r=0,n=t;a[0|n]=d[0|i],n=n+1|0,i=i+1|0,(0|o)!=(0|(r=r+1|0)););else n=t;if(!(e>>>0<7))for(;a[0|n]=d[0|i],a[n+1|0]=d[i+1|0],a[n+2|0]=d[i+2|0],a[n+3|0]=d[i+3|0],a[n+4|0]=d[i+4|0],a[n+5|0]=d[i+5|0],a[n+6|0]=d[i+6|0],a[n+7|0]=d[i+7|0],n=n+8|0,(0|s)!=(0|(i=i+8|0)););}}}function Ue(e,t,i,r){e|=0,i|=0,r|=0;var n,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0;I=n=I-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=b(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|5!=(0|t)&6!=(0|t)){if(h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,e){if((0|e)<0)break t;l=mr(t=e<<2),h[n>>2]=l,o=t+l|0,h[n+8>>2]=o,xt(l,0,t),h[n+4>>2]=o}o=h[r>>2],(t=h[r+4>>2]-o>>2)>>>0<s>>>0?ei(r,s-t|0):t>>>0<=s>>>0||(h[r+4>>2]=o+(s<<2));i:if(c)if(e){for(_=-4&e,g=3&e,y=e-1>>>0<3,t=1,s=0;;){if(he(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(v=h[r>>2],m=0,o=h[n>>2],e=0,t=0,!y)for(;p=e<<2,h[(f=(u<<2)+v|0)>>2]=h[o+p>>2],h[f+4>>2]=h[o+(4|p)>>2],h[f+8>>2]=h[o+(8|p)>>2],h[f+12>>2]=h[o+(12|p)>>2],e=e+4|0,u=u+4|0,(0|_)!=(0|(t=t+4|0)););if(g)for(;h[(u<<2)+v>>2]=h[o+(e<<2)>>2],e=e+1|0,u=u+1|0,(0|(m=m+1|0))!=(0|g););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[n>>2]}else for(e=0,t=1;;){if(!he(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&be(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=0,e=s<<2){if((0|e)<0)break t;u=(t=We(i=mr(e),l+c|0,e))+e|0,t=t+(e>>2<<2)|0}(e=h[r>>2])&&(h[r+4>>2]=e,be(e)),h[r+8>>2]=t,h[r+4>>2]=u,h[r>>2]=i,e=1}I=n+16|0,e&=1;break e}bn(),x()}return 0|e}function Ve(e,t){e|=0,t|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;I=i=I-32|0,h[i+28>>2]=0;e:{if(f[t+38>>1]<=513){if(r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(0|(s=h[t+12>>2]))<=(0|r)&l>>>0>p[t+8>>2]|(0|r)>(0|s))break e;n=n+h[t>>2]|0,n=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r}else{if(!Ai(1,i+28|0,t))break e;n=h[i+28>>2]}if(n&&(nt(e+76|0,n),h[(r=i+8|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,ze(r,t))){for(s=1;o=1<<c,u=Gi(r),l=h[e+76>>2]+(c>>>3&536870908)|0,1&(s^=u)?o=h[l>>2]&(-1^o):o|=h[l>>2],s^=1,h[l>>2]=o,(0|(c=c+1|0))!=(0|n););c=0,l=n=h[t+12>>2],s=r=h[t+20>>2],r=(u=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(m=h[t+8>>2])>>>0<u>>>0&(0|r)>=(0|n)|(0|r)>(0|n)||(g=h[t>>2],n=d[0|(n=g+o|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=r,r=s,o=s=o+8|0,s=r=s>>>0<8?r+1|0:r,o>>>0>m>>>0&(0|r)>=(0|l)|(0|r)>(0|l)||(r=d[0|(r=u+g|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,(0|r)<(0|n)||(h[e+16>>2]=r,h[e+12>>2]=n,!(t=(r>>31)-((n>>31)+(r>>>0<n>>>0)|0)|0)&(r=r-n|0)>>>0>2147483646|t||(c=1,t=r+1|0,h[e+20>>2]=t,r=t>>>1|0,h[e+24>>2]=r,h[e+28>>2]=0-r,1&t||(h[e+24>>2]=r-1)))))}}return I=i+32|0,0|c}function Fe(e,t){var i=0,r=0,n=0,a=0,s=0;r=-1,a=-1,-1!=(0|t)&&(r=((i=t+1|0)>>>0)%3|0?i:t-2|0,a=t-1|0,(t>>>0)%3|0||(a=t+2|0));e:{t:{i:{r:{n:{a:switch(0|(n=h[e+184>>2])){case 7:break i;case 3:break r;case 5:break n;case 0:case 1:break a;default:break e}s=h[e+148>>2],i=-1,n=1,r=(-1!=(0|r)?h[h[s>>2]+(r<<2)>>2]:i)<<2,i=h[e+156>>2],h[(r=r+i|0)>>2]=h[r>>2]+1,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],n=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[n>>2]=h[n>>2]+1,r=((-1!=(0|r)?h[h[s>>2]+(r<<2)>>2]:-1)<<2)+i|0,h[r>>2]=h[r>>2]+1,n=2,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],n=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[n>>2]=h[n>>2]+1,r=((-1!=(0|r)?h[h[s>>2]+(r<<2)>>2]:-1)<<2)+i|0,h[r>>2]=h[r>>2]+2,n=1,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],n=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[n>>2]=h[n>>2]+2,r=((-1!=(0|r)?h[h[s>>2]+(r<<2)>>2]:-1)<<2)+i|0,h[r>>2]=h[r>>2]+2,n=2,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0}h[i>>2]=h[i>>2]+n,n=h[e+184>>2]}switch(0|n){case 0:case 5:return a=h[e+156>>2],i=-1,-1!=(0|t)&&(i=-1,-1!=(0|(t=((r=t+1|0)>>>0)%3|0?r:t-2|0))&&(i=h[h[h[e+148>>2]>>2]+(t<<2)>>2])),h[a+(i<<2)>>2]<=5?void(h[e+188>>2]=5):void(h[e+188>>2]=0)}h[e+188>>2]=-1}function Ge(e,t){e|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0;if(I=i=I-16|0,r=h[20+(t|=0)>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!((0|(s=h[t+12>>2]))<=(0|r)&l>>>0>p[t+8>>2]|(0|r)>(0|s))&&(n=n+h[t>>2]|0,n=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r,!((0|n)<0)&&(nt(e+76|0,n),h[(r=i)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,ze(r,t)))){if(n)for(s=1;o=1<<c,u=Gi(r),l=h[e+76>>2]+(c>>>3&536870908)|0,1&(s^=u)?o=h[l>>2]&(-1^o):o|=h[l>>2],s^=1,h[l>>2]=o,(0|n)!=(0|(c=c+1|0)););c=0,l=n=h[t+12>>2],s=r=h[t+20>>2],r=(u=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(f=h[t+8>>2])>>>0<u>>>0&(0|r)>=(0|n)|(0|r)>(0|n)||(m=h[t>>2],n=d[0|(n=m+o|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=r,r=s,o=s=o+8|0,s=r=s>>>0<8?r+1|0:r,o>>>0>f>>>0&(0|r)>=(0|l)|(0|r)>(0|l)||(r=d[0|(r=u+m|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,(0|r)<(0|n)||(h[e+16>>2]=r,h[e+12>>2]=n,!(t=(r>>31)-((n>>31)+(r>>>0<n>>>0)|0)|0)&(r=r-n|0)>>>0>2147483646|t||(c=1,t=r+1|0,h[e+20>>2]=t,r=t>>>1|0,h[e+24>>2]=r,h[e+28>>2]=0-r,1&t||(h[e+24>>2]=r-1)))))}return I=i+16|0,0|c}function Be(e,t){var i=0,r=0,n=0,a=0,s=0;a=-1,r=-1,-1!=(0|t)&&(a=((r=t+1|0)>>>0)%3|0?r:t-2|0,r=t-1|0,(t>>>0)%3|0||(r=t+2|0));e:{t:{i:switch(h[e+168>>2]){case 0:case 1:n=h[e+148>>2],i=1,s=(t=h[e+156>>2])+((-1!=(0|a)?h[h[n>>2]+(a<<2)>>2]:-1)<<2)|0,h[s>>2]=h[s>>2]+1,t=((-1!=(0|r)?h[h[n>>2]+(r<<2)>>2]:-1)<<2)+t|0;break t;case 5:n=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[n>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+1,i=((-1!=(0|a)?h[h[n>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+1,i=2,t=((-1!=(0|r)?h[h[n>>2]+(r<<2)>>2]:-1)<<2)+t|0;break t;case 3:n=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[n>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+1,i=((-1!=(0|a)?h[h[n>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+2,i=1,t=((-1!=(0|r)?h[h[n>>2]+(r<<2)>>2]:-1)<<2)+t|0;break t;case 7:break i;default:break e}n=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[n>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+2,i=((-1!=(0|a)?h[h[n>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+2,i=2,t=((-1!=(0|r)?h[h[n>>2]+(r<<2)>>2]:-1)<<2)+t|0}h[t>>2]=h[t>>2]+i}i=e,r=h[e+180>>2],t=h[h[e+156>>2]+((-1!=(0|a)?h[h[h[e+148>>2]>>2]+(a<<2)>>2]:-1)<<2)>>2],e=h[e+176>>2],h[i+172>>2]=(0|e)>(0|t)?0:((0|t)>(0|r)?r:t)-e|0}function je(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;if((r=h[e+8>>2])-(n=h[e>>2])>>2>>>0>=t>>>0){if(a=t>>>0>(o=(s=h[e+4>>2])-n>>2)>>>0?o:t){if(u=a-1|0,l=7&a)for(r=n;h[r>>2]=h[i>>2],a=a-1|0,r=r+4|0,(0|(c=c+1|0))!=(0|l););else r=n;if(!(u>>>0<7))for(;h[r>>2]=h[i>>2],h[r+4>>2]=h[i>>2],h[r+8>>2]=h[i>>2],h[r+12>>2]=h[i>>2],h[r+16>>2]=h[i>>2],h[r+20>>2]=h[i>>2],h[r+24>>2]=h[i>>2],h[r+28>>2]=h[i>>2],r=r+32|0,a=a-8|0;);}if(t>>>0>o>>>0){if(r=e,e=t-o|0)for(e=(e<<2)+s|0;h[s>>2]=h[i>>2],(0|e)!=(0|(s=s+4|0)););else e=s;return void(h[r+4>>2]=e)}h[e+4>>2]=n+(t<<2)}else if(n&&(h[e+4>>2]=n,be(n),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=0),t>>>0>=1073741824||(n=r>>1,(r=r>>>0<2147483644?t>>>0>n>>>0?t:n:1073741823)>>>0>=1073741824))bn(),x();else{if(n=mr(r<<=2),h[e>>2]=n,h[e+8>>2]=r+n,i=h[i>>2],r=n,s=7&t)for(;h[r>>2]=i,r=r+4|0,(0|s)!=(0|(a=a+1|0)););if(n=n+(t<<2)|0,(t-1&1073741823)>>>0>=7)for(;h[r+28>>2]=i,h[r+24>>2]=i,h[r+20>>2]=i,h[r+16>>2]=i,h[r+12>>2]=i,h[r+8>>2]=i,h[r+4>>2]=i,h[r>>2]=i,(0|n)!=(0|(r=r+32|0)););h[e+4>>2]=n}}function ze(e,t){var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;I=i=I-16|0;e:if(!((0|(s=h[t+20>>2]))>=(0|(r=h[t+12>>2]))&(o=h[t+16>>2])>>>0>=p[t+8>>2]|(0|r)<(0|s))){if(a[e+12|0]=d[o+h[t>>2]|0],r=s=h[t+20>>2],s=(n=(o=h[t+16>>2])+1|0)?r:r+1|0,c=n,h[t+16>>2]=n,h[t+20>>2]=s,f[t+38>>1]<=513){if(l=h[t+12>>2],s=r,s=(r=o+5|0)>>>0<5?s+1|0:s,o=r,(n=h[t+8>>2])>>>0<r>>>0&(0|s)>=(0|l)|(0|s)>(0|l))break e;r=c+h[t>>2]|0,r=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s}else{if(!wi(1,i+12|0,t))break e;o=h[t+16>>2],s=h[t+20>>2],n=h[t+8>>2],l=h[t+12>>2],r=h[i+12>>2]}if(c=n-o|0,!((0|(n=l-(s+(n>>>0<o>>>0)|0)|0))<=0&r>>>0>c>>>0|(0|n)<0|(0|r)<=0)){n=o+h[t>>2]|0,h[e>>2]=n,m=e;t:if((u=d[0|(c=(l=r-1|0)+n|0)])>>>0<=63)h[e+4>>2]=l,e=63&d[0|c];else{i:switch((u>>>6|0)-1|0){case 0:if(r>>>0<2)break e;h[e+4>>2]=r-2,e=d[1+(n=(r+n|0)-2|0)|0]<<8&16128|d[0|n];break t;case 1:break i;default:break e}if(r>>>0<3)break e;h[e+4>>2]=r-3,e=d[2+(n=(r+n|0)-3|0)|0]<<16&4128768|d[n+1|0]<<8|d[0|n]}e=e+4096|0,h[m+8>>2]=e,e>>>0>1048575||(s=(e=r+o|0)>>>0<r>>>0?s+1|0:s,h[t+16>>2]=e,h[t+20>>2]=s,g=1)}}return I=i+16|0,g}function He(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;I=i=I-16|0;e:{if(f[t+38>>1]<=511){if(l=o=h[t+12>>2],r=h[t+20>>2],r=(s=(n=h[t+16>>2])+8|0)>>>0<8?r+1|0:r,(a=h[t+8>>2])>>>0<s>>>0&(0|r)>=(0|o)|(0|r)>(0|o))break e;n=n+h[t>>2]|0,o=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,n=d[n+4|0]|d[n+5|0]<<8|d[n+6|0]<<16|d[n+7|0]<<24,h[t+16>>2]=s,h[t+20>>2]=r}else{if(!hi(1,i+8|0,t))break e;s=h[t+16>>2],r=h[t+20>>2],a=h[t+8>>2],l=h[t+12>>2],o=h[i+8>>2],n=h[i+12>>2]}if(c=a-s|0,!((0|(a=l-(r+(s>>>0>a>>>0)|0)|0))==(0|n)&o>>>0>c>>>0|n>>>0>a>>>0||(r=r+n|0,r=(a=s+o|0)>>>0<s>>>0?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,(0|(r=o))<=0))){t=s+h[t>>2]|0,h[e+40>>2]=t,l=e;t:if((a=d[0|(o=t+(s=r-1|0)|0)])>>>0<=63)h[e+44>>2]=s,e=63&d[0|o];else{switch((a>>>6|0)-1|0){case 0:if(r>>>0<2)break e;h[e+44>>2]=r-2,e=d[1+(t=(t+r|0)-2|0)|0]<<8&16128|d[0|t];break t;case 1:if(r>>>0<3)break e;h[e+44>>2]=r-3,e=d[2+(t=(t+r|0)-3|0)|0]<<16&4128768|d[t+1|0]<<8|d[0|t];break t}h[e+44>>2]=r-4,e=d[2+(t=(t+r|0)-4|0)|0]<<16|d[t+3|0]<<24&1056964608|d[t+1|0]<<8|d[0|t]}e=e+16384|0,h[l+48>>2]=e,u=e>>>0<4194304}}return I=i+16|0,u}function We(e,t,i){var r,n=0,s=0;if(i>>>0>=512)return O(0|e,0|t,0|i),e;r=e+i|0;e:if(3&(e^t))if(r>>>0<4)i=e;else if((n=r-4|0)>>>0<e>>>0)i=e;else for(i=e;a[0|i]=d[0|t],a[i+1|0]=d[t+1|0],a[i+2|0]=d[t+2|0],a[i+3|0]=d[t+3|0],t=t+4|0,n>>>0>=(i=i+4|0)>>>0;);else{t:if(3&e)if(i)for(i=e;;){if(a[0|i]=d[0|t],t=t+1|0,!(3&(i=i+1|0)))break t;if(!(i>>>0<r>>>0))break}else i=e;else i=e;if(!((n=-4&r)>>>0<64||(s=n+-64|0)>>>0<i>>>0))for(;h[i>>2]=h[t>>2],h[i+4>>2]=h[t+4>>2],h[i+8>>2]=h[t+8>>2],h[i+12>>2]=h[t+12>>2],h[i+16>>2]=h[t+16>>2],h[i+20>>2]=h[t+20>>2],h[i+24>>2]=h[t+24>>2],h[i+28>>2]=h[t+28>>2],h[i+32>>2]=h[t+32>>2],h[i+36>>2]=h[t+36>>2],h[i+40>>2]=h[t+40>>2],h[i+44>>2]=h[t+44>>2],h[i+48>>2]=h[t+48>>2],h[i+52>>2]=h[t+52>>2],h[i+56>>2]=h[t+56>>2],h[i+60>>2]=h[t+60>>2],t=t- -64|0,s>>>0>=(i=i- -64|0)>>>0;);if(i>>>0>=n>>>0)break e;for(;h[i>>2]=h[t>>2],t=t+4|0,n>>>0>(i=i+4|0)>>>0;);}if(i>>>0<r>>>0)for(;a[0|i]=d[0|t],t=t+1|0,(0|r)!=(0|(i=i+1|0)););return e}function $e(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;if((a=h[e+8>>2])-(n=h[e+4>>2])>>2>>>0>=t>>>0){if(t){if(r=n,s=7&t)for(;h[r>>2]=h[i>>2],r=r+4|0,(0|s)!=(0|(o=o+1|0)););if(n=(t<<2)+n|0,!((t-1&1073741823)>>>0<7))for(;h[r>>2]=h[i>>2],h[r+4>>2]=h[i>>2],h[r+8>>2]=h[i>>2],h[r+12>>2]=h[i>>2],h[r+16>>2]=h[i>>2],h[r+20>>2]=h[i>>2],h[r+24>>2]=h[i>>2],h[r+28>>2]=h[i>>2],(0|n)!=(0|(r=r+32|0)););}h[e+4>>2]=n}else{e:{if((r=(n=(u=n-(s=h[e>>2])|0)>>2)+t|0)>>>0<1073741824){if(l=(a=a-s|0)>>1,a=a>>>0<2147483644?r>>>0>l>>>0?r:l:1073741823){if(a>>>0>=1073741824)break e;c=mr(a<<2)}if(r=n=(n<<2)+c|0,l=7&t)for(r=n;h[r>>2]=h[i>>2],r=r+4|0,(0|l)!=(0|(o=o+1|0)););if(n=n+(t<<2)|0,(t-1&1073741823)>>>0>=7)for(;h[r>>2]=h[i>>2],h[r+4>>2]=h[i>>2],h[r+8>>2]=h[i>>2],h[r+12>>2]=h[i>>2],h[r+16>>2]=h[i>>2],h[r+20>>2]=h[i>>2],h[r+24>>2]=h[i>>2],h[r+28>>2]=h[i>>2],(0|n)!=(0|(r=r+32|0)););return(0|u)>0&&We(c,s,u),h[e+8>>2]=(a<<2)+c,h[e+4>>2]=n,h[e>>2]=c,void(s&&be(s))}bn(),x()}Zi(1336),x()}}function Ye(e){var t,i=0,r=0,n=0,a=0;if(h[(e|=0)>>2]=11512,(i=h[196+(t=e+232|0)>>2])&&(h[t+200>>2]=i,be(i)),r=h[t+184>>2]){if((0|r)==(0|(i=h[t+188>>2])))i=r;else{for(;(a=h[(n=i-12|0)>>2])&&(h[i-8>>2]=a,be(a)),(0|r)!=(0|(i=n)););i=h[t+184>>2]}h[t+188>>2]=r,be(i)}if((i=h[t+156>>2])&&(h[t+160>>2]=i,be(i)),r=h[t+136>>2],h[t+136>>2]=0,r){if(i=h[(n=r-4|0)>>2])for(i=r+(i<<4)|0;(0|r)!=(0|(i=i-16|0)););be(n)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,be(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,be(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,be(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,be(i)),i=h[e+144>>2])for(;r=h[i>>2],be(i),i=r;);return i=h[e+136>>2],h[e+136>>2]=0,i&&be(i),(i=h[e+120>>2])&&be(i),(i=h[e+108>>2])&&be(i),(i=h[e+96>>2])&&be(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,be(i)),(i=h[e+60>>2])&&be(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,be(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,be(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,be(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,be(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ni(i),0|e}function Xe(e,t){var i,r,n=0,s=0,o=0;I=i=I-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[(n=e+16|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+48>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+68>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+88>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+100>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,r=e+116|0;e:{t:{if(t){if(t>>>0<1073741824)break t;bn(),x()}h[e+104>>2]=0,h[e+108>>2]=0,h[e+112>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,n=1;break e}s=mr(n=t<<2),h[e+92>>2]=s,o=n+s|0,h[e+100>>2]=o,xt(s,0,n),h[e+112>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0,h[e+96>>2]=o,s=mr(n),h[e+104>>2]=s,o=n+s|0,h[e+112>>2]=o,xt(s,0,n),h[e+108>>2]=o,s=mr(n),h[i>>2]=s,o=n+s|0,h[i+8>>2]=o,xt(s,0,n),h[i+4>>2]=o,n=t<<5|1}return Vt(r,n,i),(s=h[i>>2])&&(h[i+4>>2]=s,be(s)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(s=mr(t<<=2),h[i>>2]=s,o=t+s|0,h[i+8>>2]=o,xt(s,0,t),h[i+4>>2]=o),Vt(e+128|0,n,i),(t=h[i>>2])&&(h[i+4>>2]=t,be(t)),I=i+16|0,e}function qe(e,t,i,r){var n,a=0,s=0,o=0,l=0,c=0,u=0,h=0,d=0;n=i;e:{t:{i:{r:{n:{a:{s:{o:{l:{c:{u:{if(t){if(!n)break u;if(!r)break c;if((i=y(r)-y(t)|0)>>>0<=31)break l;break i}if(1==(0|r)|r>>>0>1)break i;e=(e>>>0)/(n>>>0)|0,L=0;break e}if(!e)break o;if(!r)break s;if(r-1&r)break s;e=t>>>Vr(r)|0,L=0;break e}if(!(n-1&n))break a;a=0-(o=(y(n)+33|0)-y(t)|0)|0;break r}o=i+1|0,a=63-i|0;break r}e=(t>>>0)/(r>>>0)|0,L=0;break e}if((i=y(r)-y(t)|0)>>>0<31)break n;break i}if(1==(0|n))break t;r=31&(i=Vr(n)),(63&i)>>>0>=32?(i=0,e=t>>>r|0):(i=t>>>r|0,e=((1<<r)-1&t)<<32-r|e>>>r),L=i;break e}o=i+1|0,a=63-i|0}if(s=31&(i=63&o),i>>>0>=32?(i=0,l=t>>>s|0):(i=t>>>s|0,l=((1<<s)-1&t)<<32-s|e>>>s),s=i,a=31&(i=63&a),i>>>0>=32?(i=e<<a,e=0):(i=(1<<a)-1&e>>>32-a|t<<a,e<<=a),t=i,o)for(i=r-1|0,d=-1!=(0|(a=n-1|0))?i+1|0:i;l=(i=l<<1|t>>>31)-(u=n&(c=d-((s=s<<1|l>>>31)+(i>>>0>a>>>0)|0)>>31))|0,s=s-((r&c)+(i>>>0<u>>>0)|0)|0,t=t<<1|e>>>31,e=h|e<<1,h=1&c,o=o-1|0;);L=t<<1|e>>>31,e=h|e<<1;break e}e=0,t=0}L=t}return e}function Ze(e,t){var i,r,n=0,a=0,s=0;I=i=I-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+32>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e+52>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[e+72>>2]=0,h[e+64>>2]=0,h[e+68>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+92>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+104>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,r=e+120|0;e:{t:{if(t){if(t>>>0<1073741824)break t;bn(),x()}h[e+108>>2]=0,h[e+112>>2]=0,h[e+116>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,a=1;break e}n=mr(a=t<<2),h[e+96>>2]=n,s=n+a|0,h[e+104>>2]=s,xt(n,0,a),h[e+116>>2]=0,h[e+108>>2]=0,h[e+112>>2]=0,h[e+100>>2]=s,n=mr(a),h[e+108>>2]=n,s=n+a|0,h[e+116>>2]=s,xt(n,0,a),h[e+112>>2]=s,n=mr(a),h[i>>2]=n,s=n+a|0,h[i+8>>2]=s,xt(n,0,a),h[i+4>>2]=s,a=t<<5|1}return Vt(r,a,i),(n=h[i>>2])&&(h[i+4>>2]=n,be(n)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(n=mr(t<<=2),h[i>>2]=n,s=t+n|0,h[i+8>>2]=s,xt(n,0,t),h[i+4>>2]=s),Vt(e+132|0,a,i),(t=h[i>>2])&&(h[i+4>>2]=t,be(t)),I=i+16|0,e}function Je(e,t){var i=0,r=0,n=0;i=(0|e)==(0|t),a[t+12|0]=i;e:if(!i)for(;;){if(r=h[t+8>>2],d[r+12|0])break e;t:{if(i=h[r+8>>2],(0|r)!=(0|(n=h[i>>2]))){if(!(d[n+12|0]|!n))break t;h[r>>2]==(0|t)?(e=h[t+4>>2],h[r>>2]=e,e&&(h[e+8>>2]=r,i=h[r+8>>2]),h[t+8>>2]=i,e=h[r+8>>2],h[(((0|r)!=h[e>>2])<<2)+e>>2]=t,h[t+4>>2]=r,h[r+8>>2]=t,i=h[t+8>>2]):t=r,a[t+12|0]=1,a[i+12|0]=0,e=h[i+4>>2],t=h[e>>2],h[i+4>>2]=t,t&&(h[t+8>>2]=i),h[e+8>>2]=h[i+8>>2],t=h[i+8>>2],h[((h[t>>2]!=(0|i))<<2)+t>>2]=e,h[e>>2]=i,t=i+8|0}else{if(!(!(n=h[i+4>>2])|d[n+12|0]))break t;h[r>>2]!=(0|t)?(t=h[r+4>>2],e=h[t>>2],h[r+4>>2]=e,e&&(h[e+8>>2]=r,i=h[r+8>>2]),h[t+8>>2]=i,e=h[r+8>>2],h[(((0|r)!=h[e>>2])<<2)+e>>2]=t,h[t>>2]=r,h[r+8>>2]=t,i=h[t+8>>2]):t=r,a[t+12|0]=1,a[i+12|0]=0,e=h[i>>2],t=h[e+4>>2],h[i>>2]=t,t&&(h[t+8>>2]=i),h[e+8>>2]=h[i+8>>2],t=h[i+8>>2],h[((h[t>>2]!=(0|i))<<2)+t>>2]=e,h[e+4>>2]=i,t=i+8|0}h[t>>2]=e;break e}if(a[r+12|0]=1,r=(0|e)==(0|i),a[i+12|0]=r,a[n+12|0]=1,t=i,r)break}}function Ke(e,t,i,r){var n,a,s=0,o=0,l=0,c=0,u=0,d=0,f=0;if(n=h[t+16>>2],s=u=h[i+4>>2]-n|0,o=h[i>>2]-n|0,h[i>>2]=o,h[i+4>>2]=s,a=(0|(l=h[t+16>>2]))>=((c=(s>>=31)+u^s)+((s=o>>31)+o^s)|0))s=u;else{e:{t:{if((0|o)>=0){if(s=1,c=1,(0|u)>=0)break e;if(d=1,s=-1,c=-1,o)break t;break e}if(d=-1,s=-1,c=-1,(0|u)<=0)break e}s=(0|u)<=0?-1:1,c=d}o=(o<<1)-(d=b(l,c))|0,s=(((c=(0|b(s,c))>=0)?0-o|0:o)+(l=b(s,l))|0)/2|0,h[i+4>>2]=s,f=i,i=(u<<1)-l|0,o=(d+(c?0-i|0:i)|0)/2|0,h[f>>2]=o,l=h[t+16>>2]}if(i=h[r+4>>2]+s|0,(0|l)<(0|(o=h[r>>2]+o|0))?o=o-h[t+4>>2]|0:(0-l|0)<=(0|o)||(o=h[t+4>>2]+o|0),(0|i)>(0|l)?i=i-h[t+4>>2]|0:(0-l|0)<=(0|i)||(i=h[t+4>>2]+i|0),a)l=i;else{e:{t:{if((0|o)>=0){if(t=1,s=1,(0|i)>=0)break e;if(r=1,t=-1,s=-1,o)break t;break e}if(r=-1,t=-1,s=-1,(0|i)<=0)break e}t=(0|i)<=0?-1:1,s=r}r=(o<<1)-(u=b(s,l))|0,h[e>>2]=r,d=0-r|0,c=r,l=(((r=(0|b(t,s))>=0)?d:c)+(t=b(t,l))|0)/2|0,t=(i<<1)-t|0,o=(u+(r?0-t|0:t)|0)/2|0}h[e>>2]=o+n,h[e+4>>2]=l+n}function Qe(e){var t,i=0,r=0,n=0,a=0,s=0,o=0;I=t=I-32|0;e:if((i=h[e+16>>2])>>>0>=341)h[e+16>>2]=i-341,i=h[e+4>>2],h[t+8>>2]=h[i>>2],h[e+4>>2]=i+4,ot(e,t+8|0);else{t:{i:{r:{n:{if((a=(n=h[e+8>>2])-h[e+4>>2]>>2)>>>0<(i=(r=h[e+12>>2])-h[e>>2]|0)>>2>>>0){if((0|r)==(0|n))break n;s=t,o=mr(4092),h[s+8>>2]=o,ot(e,t+8|0);break e}if(h[t+24>>2]=e+12,(i=i?i>>1:1)>>>0>=1073741824)break r;if(i=mr(r=i<<2),h[t+8>>2]=i,n=i+(a<<2)|0,h[t+16>>2]=n,h[t+20>>2]=i+r,h[t+12>>2]=n,s=t,o=mr(4092),h[s+4>>2]=o,ot(t+8|0,t+4|0),(0|(r=h[e+8>>2]))==h[e+4>>2]){i=r;break t}for(;ct(t+8|0,r=r-4|0),h[e+4>>2]!=(0|r););break i}s=t,o=mr(4092),h[s+8>>2]=o,ct(e,i=t+8|0),r=h[e+4>>2],h[t+8>>2]=h[r>>2],h[e+4>>2]=r+4,ot(e,i);break e}Zi(1336),x()}i=h[e+8>>2]}n=h[e>>2],h[e>>2]=h[t+8>>2],h[t+8>>2]=n,h[e+4>>2]=h[t+12>>2],h[t+12>>2]=r,h[e+8>>2]=h[t+16>>2],h[t+16>>2]=i,a=h[e+12>>2],h[e+12>>2]=h[t+20>>2],h[t+20>>2]=a,(0|i)!=(0|r)&&(h[t+16>>2]=i+(((i-r|0)-4>>>2^-1)<<2)),n&&be(n)}I=t+32|0}function et(e,t,i){e|=0,t|=0,i|=0;var r,n=0,s=0,o=0,l=0,c=0,u=v(0),d=0,f=0,p=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0;if(I=r=I-16|0,9==h[i+28>>2]){n=h[e+4>>2],s=(l=a[i+24|0])<<2,o=mr((1073741823&l)!=(0|l)?-1:s),h[(f=r+8|0)>>2]=1065353216,u=m[e+20>>2],(0|(n=-1<<n^-1))>0&&(m[f>>2]=u/v(0|n));e:if((b=(0|n)>0)&&(d=h[i+80>>2]))if(n=0,(0|l)<=0){if(1!=(0|d))for(e=-2&d,t=0;We(h[h[i+64>>2]>>2]+n|0,o,s),We((n=n+s|0)+h[h[i+64>>2]>>2]|0,o,s),n=n+s|0,(0|e)!=(0|(t=t+2|0)););if(!(1&d))break e;We(h[h[i+64>>2]>>2]+n|0,o,s)}else for(_=h[h[t>>2]>>2]+h[t+48>>2]|0,w=-2&l,S=1&l;;){if(p=h[e+8>>2],u=m[f>>2],t=0,g=0,1!=(0|l))for(;y=(n<<2)+_|0,m[(c=t<<2)+o>>2]=v(u*v(h[y>>2]))+m[c+p>>2],m[(c|=4)+o>>2]=v(u*v(h[y+4>>2]))+m[c+p>>2],t=t+2|0,n=n+2|0,(0|w)!=(0|(g=g+2|0)););if(S&&(m[(t<<=2)+o>>2]=v(u*v(h[(n<<2)+_>>2]))+m[t+p>>2],n=n+1|0),We(h[h[i+64>>2]>>2]+A|0,o,s),A=s+A|0,(0|(E=E+1|0))==(0|d))break}be(o)}return I=r+16|0,0|b}function tt(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;r=(i>>>0)/3|0,l=h[(h[h[e+8>>2]+96>>2]+b(r,12)|0)+(i-b(r,3)<<2)>>2],n=h[h[e+12>>2]+4>>2];e:if((0|(r=h[n+4>>2]))==h[n+8>>2]){t:{if((r=1+(c=(s=r-(o=h[n>>2])|0)>>2)|0)>>>0<1073741824){if(a=s>>1,a=s>>>0<2147483644?r>>>0>a>>>0?r:a:1073741823){if(a>>>0>=1073741824)break t;r=mr(a<<2)}else r=0;h[(c=r+(c<<2)|0)>>2]=l,(0|s)>0&&We(r,o,s),h[n+8>>2]=r+(a<<2),h[n+4>>2]=c+4,h[n>>2]=r,o&&be(o);break e}bn(),x()}Zi(1336),x()}else h[r>>2]=l,h[n+4>>2]=r+4;n=h[e+4>>2];e:{t:{if((0|(r=h[n+4>>2]))==h[n+8>>2]){if((r=1+(l=(s=r-(o=h[n>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(a=s>>1,a=s>>>0<2147483644?r>>>0>a>>>0?r:a:1073741823){if(a>>>0>=1073741824)break e;r=mr(a<<2)}else r=0;h[(l=r+(l<<2)|0)>>2]=i,(0|s)>0&&We(r,o,s),h[n+8>>2]=r+(a<<2),h[n+4>>2]=l+4,h[n>>2]=r,o&&be(o)}else h[r>>2]=i,h[n+4>>2]=r+4;return e=h[e+4>>2],h[h[e+12>>2]+(t<<2)>>2]=h[e+24>>2],void(h[e+24>>2]=h[e+24>>2]+1)}bn(),x()}Zi(1336),x()}function it(e,t){var i=0,r=0,n=0,s=0,o=0,l=0,c=0,u=0;if((r=d[e+11|0]>>>7|0?h[e+4>>2]:d[e+11|0])>>>0<t>>>0)return I=l=I-16|0,(s=t-r|0)&&(c=(o=(t=d[e+11|0]>>>7|0)?h[e+4>>2]:d[e+11|0])+s|0,(t=t?(2147483647&h[e+8>>2])-1|0:10)-o>>>0<s>>>0&&(I=r=I-16|0,(i=c-t|0)>>>0<=-17-t>>>0?(u=d[e+11|0]>>>7|0?h[e>>2]:e,t>>>0<2147483623?(h[r+8>>2]=t<<1,h[r+12>>2]=t+i,I=i=I-16|0,I=i+16|0,i=r+8|0,i=(i=h[(p[(n=r+12|0)>>2]<p[i>>2]?i:n)>>2])>>>0>=11?11==(0|(i=(n=i+16&-16)-1|0))?n:i:10):i=-18,i=mr(n=i+1|0),o&&rn(i,u,o),10!=(0|t)&&be(u),h[e>>2]=i,h[e+8>>2]=-2147483648|n,I=r+16|0):(mn(),x())),r=o+(t=d[e+11|0]>>>7|0?h[e>>2]:e)|0,s&&xt(r,0,s),d[e+11|0]>>>7|0?h[e+4>>2]=c:a[e+11|0]=c,a[l+15|0]=0,a[t+c|0]=d[l+15|0]),void(I=l+16|0);I=r=I-16|0,d[e+11|0]>>>7|0?(s=h[e>>2],a[r+15|0]=0,a[t+s|0]=d[r+15|0],h[e+4>>2]=t):(a[r+14|0]=0,a[e+t|0]=d[r+14|0],a[e+11|0]=t),I=r+16|0}function rt(e,t){e|=0;var i,r,n,a=0,s=0,o=0,l=0,c=0,u=0,p=0,m=0;a=i=h[12+(t|=0)>>2],l=s=h[t+20>>2],s=(o=(r=h[t+16>>2])+4|0)>>>0<4?s+1|0:s;e:if(!((n=h[t+8>>2])>>>0<o>>>0&(0|a)<=(0|s)|(0|a)<(0|s)||(u=h[t>>2],a=d[0|(a=r+u|0)]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,s=l,(c=r+8|0)>>>0>n>>>0&(0|(s=c>>>0<8?s+1|0:s))>=(0|i)|(0|s)>(0|i)||(o=d[0|(o=o+u|0)]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=c,h[t+20>>2]=s,(0|a)>(0|o)||(h[e+16>>2]=o,h[e+12>>2]=a,!(m=(o>>31)-((a>>31)+(a>>>0>o>>>0)|0)|0)&(a=o-a|0)>>>0>2147483646|m))))){if(a=a+1|0,h[e+20>>2]=a,o=a>>>1|0,h[e+24>>2]=o,h[e+28>>2]=0-o,1&a||(h[e+24>>2]=o-1),f[t+38>>1]<=513){if((0|s)>=(0|i)&c>>>0>=n>>>0|(0|s)>(0|i))break e;a=d[c+u|0],s=l,s=(l=r+9|0)>>>0<9?s+1|0:s,h[t+16>>2]=l,h[t+20>>2]=s;t:switch(0|a){case 1:p=1;break;case 0:break t;default:break e}h[e+88>>2]=p}p=ze(e+112|0,t)}return 0|p}function nt(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0;I=i=I-16|0;e:{t:if((n=h[e+4>>2])>>>0<t>>>0){if((a=t-n|0)>>>0>(r=(o=h[e+8>>2])<<5)>>>0|n>>>0>r-a>>>0){if(h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,(0|t)<0)break e;r>>>0<=1073741822?(r=t+31&-32,t=(t=o<<6)>>>0<r>>>0?r:t):t=2147483647,xe(i,t),n=h[e+4>>2],h[i+4>>2]=n+a,l=h[e>>2],t=h[i>>2],(0|n)<=0||(t=At(t,l,o=(r=n>>>5|0)<<2)+o|0,(0|(s=n-(r<<5)|0))<=0?s=0:(r=-1>>>32-s|0,h[t>>2]=h[t>>2]&(-1^r)|r&h[l+o>>2]),l=h[e>>2]),h[e>>2]=h[i>>2],h[i>>2]=l,r=h[e+4>>2],h[e+4>>2]=h[i+4>>2],h[i+4>>2]=r,r=h[e+8>>2],h[e+8>>2]=h[i+8>>2],h[i+8>>2]=r,l&&be(l)}else h[e+4>>2]=t,s=31&n,t=h[e>>2]+(n>>>3&536870908)|0;if(!a)break t;if(s&&(e=(r=32-s|0)>>>0>a>>>0?a:r,h[t>>2]=h[t>>2]&(-1<<s&-1>>>r-e^-1),a=a-e|0,t=t+4|0),e=xt(t,0,r=a>>>5<<2),!(t=31&a))break t;h[(e=e+r|0)>>2]=h[e>>2]&(-1>>>32-t^-1)}else h[e+4>>2]=t;return void(I=i+16|0)}pn(),x()}function at(e,t,i){t|=0,i|=0;var r=0,n=0,s=0,o=0,l=0,c=0,u=0;return(r=(s=h[12+(e|=0)>>2])-(l=h[e+8>>2])>>2)>>>0<(t=a[t+24|0])>>>0?(ei(e+8|0,t-r|0),l=h[e+8>>2],s=h[e+12>>2]):t>>>0>=r>>>0||(s=(t<<2)+l|0,h[e+12>>2]=s),t=0,c=h[i+20>>2],s=r=s-l|0,o=(n=h[i+16>>2])+r|0,u=h[i+12>>2],c=r>>>0>o>>>0?c+1|0:c,o>>>0>p[i+8>>2]&(0|u)<=(0|c)|(0|c)>(0|u)||(We(l,n+h[i>>2]|0,r),r=h[i+20>>2],r=(n=s+h[i+16>>2]|0)>>>0<s>>>0?r+1|0:r,o=n,h[i+16>>2]=n,h[i+20>>2]=r,n=h[i+12>>2],r=(s=o+4|0)>>>0<4?r+1|0:r,s>>>0>p[i+8>>2]&(0|r)>=(0|n)|(0|r)>(0|n)||(r=o+h[i>>2]|0,h[e+20>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,r=h[i+20>>2],s=(n=(o=h[i+16>>2])+4|0)>>>0<4?r+1|0:r,u=n,h[i+16>>2]=n,h[i+20>>2]=s,(0|s)>=(0|(n=h[i+12>>2]))&u>>>0>=p[i+8>>2]|(0|s)>(0|n)||(n=d[u+h[i>>2]|0],r=(s=o+5|0)>>>0<5?r+1|0:r,h[i+16>>2]=s,h[i+20>>2]=r,n-1>>>0>29||(h[e+4>>2]=n,t=1)))),0|t}function st(e,t){var i=0;return ze(e,t)&&ze(e+16|0,t)&&ze(e+32|0,t)&&ze(e+48|0,t)&&ze(e- -64|0,t)&&ze(e+80|0,t)&&ze(e+96|0,t)&&ze(e+112|0,t)&&ze(e+128|0,t)&&ze(e+144|0,t)&&ze(e+160|0,t)&&ze(e+176|0,t)&&ze(e+192|0,t)&&ze(e+208|0,t)&&ze(e+224|0,t)&&ze(e+240|0,t)&&ze(e+256|0,t)&&ze(e+272|0,t)&&ze(e+288|0,t)&&ze(e+304|0,t)&&ze(e+320|0,t)&&ze(e+336|0,t)&&ze(e+352|0,t)&&ze(e+368|0,t)&&ze(e+384|0,t)&&ze(e+400|0,t)&&ze(e+416|0,t)&&ze(e+432|0,t)&&ze(e+448|0,t)&&ze(e+464|0,t)&&ze(e+480|0,t)&&ze(e+496|0,t)&&(i=ze(e+512|0,t)),i}function ot(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;e:{if((0|(n=h[e+8>>2]))==h[e+12>>2])if((r=h[e+4>>2])>>>0>(s=h[e>>2])>>>0)i=(s=(1+(r-s>>2)|0)/-2<<2)+r|0,(a=n-r|0)&&(At(i,r,a),r=h[e+4>>2]),n=i+a|0,h[e+8>>2]=n,h[e+4>>2]=r+s;else{if((a=(i=n-s|0)?i>>1:1)>>>0>=1073741824)break e;if(u=(o=mr(i=a<<2))+i|0,i=n-r|0,n=a=(-4&a)+o|0,i){if(d=-4&i,c=1+((l=i-4|0)>>>2|0)&7)for(n=0,i=a;h[i>>2]=h[r>>2],r=r+4|0,i=i+4|0,(0|c)!=(0|(n=n+1|0)););else i=a;if(n=a+d|0,!(l>>>0<28))for(;h[i>>2]=h[r>>2],h[i+4>>2]=h[r+4>>2],h[i+8>>2]=h[r+8>>2],h[i+12>>2]=h[r+12>>2],h[i+16>>2]=h[r+16>>2],h[i+20>>2]=h[r+20>>2],h[i+24>>2]=h[r+24>>2],h[i+28>>2]=h[r+28>>2],r=r+32|0,(0|n)!=(0|(i=i+32|0)););}h[e+12>>2]=u,h[e+8>>2]=n,h[e+4>>2]=a,h[e>>2]=o,s&&(be(s),n=h[e+8>>2])}return h[n>>2]=h[t>>2],void(h[e+8>>2]=h[e+8>>2]+4)}Zi(1336),x()}function lt(e,t){var i,r=0,n=0,s=0,o=0,l=0;I=i=I-16|0;e:{t:{if(t){if(h[e+88>>2]=0,h[e+92>>2]=0,r=h[e+84>>2],h[e+84>>2]=0,r&&be(r),h[e+76>>2]=0,h[e+80>>2]=0,r=h[e+72>>2],h[e+72>>2]=0,r&&be(r),r=h[t>>2],n=h[t+4>>2],a[i+15|0]=0,Pt(e,n-r>>2,i+15|0),r=h[t+28>>2],n=h[t+24>>2],a[i+14|0]=0,Pt(e+12|0,r-n>>2,i+14|0),je(e+28|0,h[t+4>>2]-h[t>>2]>>2,13740),s=(n=h[t+28>>2]-h[t+24>>2]|0)>>2,r=h[e+52>>2],!(s>>>0<=h[e+60>>2]-r>>2>>>0)){if((0|n)<0)break t;o=h[e+56>>2],l=(n=mr(n))+(s<<2)|0,o=(s=o-r|0)+n|0,(0|s)>0&&We(n,r,s),h[e+60>>2]=l,h[e+56>>2]=o,h[e+52>>2]=n,r&&be(r)}if(s=(n=h[t+28>>2]-h[t+24>>2]|0)>>2,r=h[e+40>>2],!(s>>>0<=h[e+48>>2]-r>>2>>>0)){if((0|n)<0)break e;o=h[e+44>>2],l=(n=mr(n))+(s<<2)|0,o=(s=o-r|0)+n|0,(0|s)>0&&We(n,r,s),h[e+48>>2]=l,h[e+44>>2]=o,h[e+40>>2]=n,r&&be(r)}a[e+24|0]=1,h[e+64>>2]=t}return void(I=i+16|0)}Zi(1336),x()}Zi(1336),x()}function ct(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;e:{if((0|(s=h[e+4>>2]))==h[e>>2])if((r=h[e+8>>2])>>>0<(i=h[e+12>>2])>>>0)i=(a=(1+(i-r>>2)|0)/2<<2)+r|0,(n=r-s|0)&&(At(i=i-n|0,s,n),r=h[e+8>>2]),h[e+4>>2]=i,h[e+8>>2]=r+a;else{if((i=(i=i-s|0)?i>>1:1)>>>0>=1073741824)break e;if(d=(o=mr(n=i<<2))+n|0,a=i=(i+3&-4)+o|0,l=r-s|0){if(r=i,n=s,u=1+((c=l-4|0)>>>2|0)&7)for(a=0;h[r>>2]=h[n>>2],n=n+4|0,r=r+4|0,(0|u)!=(0|(a=a+1|0)););if(a=(-4&l)+i|0,!(c>>>0<28))for(;h[r>>2]=h[n>>2],h[r+4>>2]=h[n+4>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=h[n+12>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=h[n+20>>2],h[r+24>>2]=h[n+24>>2],h[r+28>>2]=h[n+28>>2],n=n+32|0,(0|a)!=(0|(r=r+32|0)););}h[e+12>>2]=d,h[e+8>>2]=a,h[e+4>>2]=i,h[e>>2]=o,s&&(be(s),i=h[e+4>>2])}else i=s;return h[i-4>>2]=h[t>>2],void(h[e+4>>2]=h[e+4>>2]-4)}Zi(1336),x()}function ut(e,t,i,r){var n,a,s=0,o=0,l=0,c=0,u=0,d=0,f=0;u=+m[t>>2],d=+m[t+4>>2],f=+m[t+8>>2],(l=_(u)+_(d)+_(f))>1e-6?(d*=l=1/l,u*=l,s=l*f<0):(u=1,d=0,s=0),n=h[e+16>>2],l=w(u*(f=+(0|n))+.5),c=(o=(a=_(l)<2147483648?~~l:-2147483648)>>31)+a^o,l=w(d*f+.5),c=(0|(t=n-(c+((o=_(l)<2147483648?~~l:-2147483648)+(t=o>>31)^t)|0)|0))<0?0:t,s=s?0-c|0:c,o=o+(t>>31&((0|o)>0?t:0-t|0))|0,(0|a)>=0?(t=s+n|0,e=h[e+8>>2],s=n+o|0):(t=o>>31,t^=t+o,e=h[e+8>>2],t=(0|s)<0?t:e-t|0,s=(0|o)<0?c:e-c|0),t|s&&(0|e)!=(0|t)|s&&(0|e)!=(0|s)|t?(0|t)<=(0|n)|s?(0|e)!=(0|s)|(0|t)>=(0|n)?(0|e)!=(0|t)|(0|s)>=(0|n)?t?e=s:(t=0,e=(0|s)<=(0|n)?s:(n<<1)-s|0):(t=e,e=(n<<1)-s|0):t=(n<<1)-t|0:(t=(n<<1)-t|0,e=0):t=e,h[i>>2]=e,h[r>>2]=t}function ht(e,t,i){e|=0,t|=0,i|=0;var r=0,n=v(0),s=v(0),o=v(0),u=v(0),f=v(0),p=0,m=v(0),g=v(0),b=v(0),y=v(0),A=0;if(!(9!=h[i+28>>2]|3!=d[i+24|0])&&!((e=h[e+4>>2])-31>>>0<4294967267)&&(A=1,p=h[i+80>>2]))for(m=v(v(2)/v((1<<e)-2|0)),i=h[h[i>>2]>>2]+h[i+48>>2]|0,e=h[h[t>>2]>>2]+h[t+48>>2]|0,t=0;o=v(0),g=v(0),b=v(0),n=v(v(v(h[e>>2])*m)+v(-1)),s=v(v(v(h[e+4>>2])*m)+v(-1)),f=v(v(v(1)-v(_(n)))-v(_(s))),u=v(E(v(-f),v(0))),y=v(-u),s=v(s+(s<v(0)?u:y)),n=v(n+(n<v(0)?u:y)),+(u=v(v(s*s)+v(v(f*f)+v(n*n))))<1e-6||(o=v(v(1)/v(T(u))),b=v(s*o),g=v(n*o),o=v(f*o)),e=e+8|0,l(b),r=c(2),a[i+8|0]=r,a[i+9|0]=r>>>8,a[i+10|0]=r>>>16,a[i+11|0]=r>>>24,l(g),r=c(2),a[i+4|0]=r,a[i+5|0]=r>>>8,a[i+6|0]=r>>>16,a[i+7|0]=r>>>24,l(o),r=c(2),a[0|i]=r,a[i+1|0]=r>>>8,a[i+2|0]=r>>>16,a[i+3|0]=r>>>24,i=i+12|0,(0|p)!=(0|(t=t+1|0)););return 0|A}function dt(e,t){var i,r,n,s=0,o=0,l=0;r=h[e>>2],h[(s=r+(t>>>3&536870908)|0)>>2]=h[s>>2]|1<<t,i=h[e+64>>2],o=-1,(l=-1==(0|t))||(o=-1,-1!=(0|(s=((s=t+1|0)>>>0)%3|0?s:t-2|0))&&(o=h[h[i>>2]+(s<<2)>>2])),s=h[e+12>>2],h[(n=(o>>>3&536870908)+s|0)>>2]=h[n>>2]|1<<o;e:{if(l)e=s+536870908|0,t=h[s+536870908>>2],s=-2147483648;else{t:{if((t>>>0)%3|0)l=t-1|0;else if(o=-1,-1==(0|(l=t+2|0)))break t;o=h[h[i>>2]+(l<<2)>>2]}if(h[(l=(o>>>3&536870908)+s|0)>>2]=h[l>>2]|1<<o,o=-1,-1==(0|(t=h[h[i+12>>2]+(t<<2)>>2])))break e;a[e+24|0]=0,h[(e=(t>>>3&536870908)+r|0)>>2]=h[e>>2]|1<<t,-1!=(0|(e=((e=t+1|0)>>>0)%3|0?e:t-2|0))&&(o=h[h[i>>2]+(e<<2)>>2]),h[(e=s+(o>>>3&536870908)|0)>>2]=h[e>>2]|1<<o;t:{if((t>>>0)%3|0)t=t-1|0;else if(e=-1,-1==(0|(t=t+2|0)))break t;e=h[h[i>>2]+(t<<2)>>2]}t=1<<e,s=h[(e=s+(e>>>3&536870908)|0)>>2]}h[e>>2]=t|s}}function ft(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;e:if(t>>>0<=63){if(t=0,(e=h[e+12>>2])>>>0<2)break e;if(r=h[i>>2],n=3&(t=e-1|0),i=0,e-2>>>0<3)e=1,t=0;else for(a=-4&t,t=0,e=1;s=e+3|0,o=e+2|0,l=e+1|0,t=p[r+(t<<2)>>2]>p[r+(e<<2)>>2]?e:t,t=p[r+(t<<2)>>2]>p[r+(l<<2)>>2]?l:t,t=p[r+(t<<2)>>2]>p[r+(o<<2)>>2]?o:t,t=p[r+(t<<2)>>2]>p[r+(s<<2)>>2]?s:t,e=e+4|0,(0|a)!=(0|(c=c+4|0)););if(!n)break e;for(;t=p[r+(t<<2)>>2]>p[r+(e<<2)>>2]?e:t,e=e+1|0,(0|n)!=(0|(i=i+1|0)););}else{if((0|(r=32-(t=h[e+580>>2])|0))>=4){if((0|(i=h[e+576>>2]))==h[e+568>>2])return 0;if(r=h[i>>2],n=t+4|0,h[e+580>>2]=n,t=r<<t>>>28|0,32!=(0|n))break e;return h[e+580>>2]=0,h[e+576>>2]=i+4,t}if((0|(n=(i=h[e+576>>2])+4|0))==h[e+568>>2])return 0;a=h[i>>2],h[e+576>>2]=n,h[e+580>>2]=t-28,e=60-t|0,t=h[i+4>>2]>>>e|a<<t>>>e-r}return t}function pt(e){var t,i=0,r=0,n=0;if(h[(e|=0)>>2]=11464,(i=h[e+388>>2])&&(h[e+392>>2]=i,be(i)),t=h[e+368>>2],h[e+368>>2]=0,t){if(i=h[(n=t-4|0)>>2])for(r=(i<<4)+t|0;(0|t)!=(0|(r=r-16|0)););be(n)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,be(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,be(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,be(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,be(i)),r=h[e+144>>2])for(;i=h[r>>2],be(r),r=i,i;);return i=h[e+136>>2],h[e+136>>2]=0,i&&be(i),(i=h[e+120>>2])&&be(i),(i=h[e+108>>2])&&be(i),(i=h[e+96>>2])&&be(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,be(i)),(i=h[e+60>>2])&&be(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,be(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,be(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,be(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,be(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ni(i),0|e}function mt(e,t){var i=0,r=0;i=h[t+8>>2],h[e+4>>2]=h[t+4>>2],h[e+8>>2]=i,h[e+20>>2]=h[t+20>>2],i=h[t+16>>2],h[e+12>>2]=h[t+12>>2],h[e+16>>2]=i;e:{t:{if((0|e)!=(0|t)){if(i=h[t+28>>2]){if(h[e+32>>2]<<5>>>0>=i>>>0)r=h[e+24>>2];else{if((r=h[e+24>>2])&&(be(r),h[e+32>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,i=h[t+28>>2]),(0|i)<0)break t;r=mr((i=1+(i-1>>>5|0)|0)<<2),h[e+32>>2]=i,h[e+28>>2]=0,h[e+24>>2]=r,i=h[t+28>>2]}At(r,h[t+24>>2],4+(i-1>>>3&536870908)|0),i=h[t+28>>2]}else i=0;if(h[e+28>>2]=i,i=h[t+40>>2]){if(h[e+44>>2]<<5>>>0>=i>>>0)r=h[e+36>>2];else{if((r=h[e+36>>2])&&(be(r),h[e+44>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,i=h[t+40>>2]),(0|i)<0)break e;r=mr((i=1+(i-1>>>5|0)|0)<<2),h[e+44>>2]=i,h[e+40>>2]=0,h[e+36>>2]=r,i=h[t+40>>2]}At(r,h[t+36>>2],4+(i-1>>>3&536870908)|0),t=h[t+40>>2]}else t=0;h[e+40>>2]=t}return}pn(),x()}pn(),x()}function gt(e,t){e|=0;var i,r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0;o=h[12+(t|=0)>>2],a=n=h[t+20>>2],n=(s=(i=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,l=s;e:if(!((r=h[t+8>>2])>>>0<s>>>0&(0|n)>=(0|o)|(0|n)>(0|o))){if(p=h[t>>2],c=d[0|(s=i+p|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n,(s=f[t+38>>1])>>>0<=513){if(n=a,l=a=i+8|0,a>>>0>r>>>0&(0|(n=a>>>0<8?n+1|0:n))>=(0|o)|(0|n)>(0|o))break e;h[t+16>>2]=l,h[t+20>>2]=n}if(1&c&&!((a=31^y(c))-30>>>0<4294967267)){if(h[e+8>>2]=a+1,c=-2-(a=-2<<a)|0,h[e+16>>2]=c,h[e+12>>2]=-1^a,h[e+24>>2]=(0|c)/2,m[e+20>>2]=v(2)/v(0|c),s>>>0<=513){if((0|n)>=(0|o)&l>>>0>=r>>>0|(0|n)>(0|o))break e;o=d[l+p|0],n=(a=l+1|0)?n:n+1|0,h[t+16>>2]=a,h[t+20>>2]=n;t:switch(0|o){case 1:u=1;break;case 0:break t;default:break e}h[e+72>>2]=u}u=ze(e+96|0,t)}}return 0|u}function bt(e,t){e|=0;var i,r,n=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0;o=h[12+(t|=0)>>2],l=n=h[t+20>>2],n=(a=(i=h[t+16>>2])+4|0)>>>0<4?n+1|0:n;e:if(!((r=h[t+8>>2])>>>0<a>>>0&(0|n)>=(0|o)|(0|n)>(0|o))&&(p=h[t>>2],s=d[0|(s=i+p|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=n,n=l,c=a=i+8|0,!(a>>>0>r>>>0&(0|(n=a>>>0<8?n+1|0:n))>=(0|o)|(0|n)>(0|o))&&(h[t+16>>2]=c,h[t+20>>2]=n,1&s&&!((a=31^y(s))-30>>>0<4294967267)))){if(h[e+8>>2]=a+1,s=-2-(a=-2<<a)|0,h[e+16>>2]=s,h[e+12>>2]=-1^a,h[e+24>>2]=(0|s)/2,m[e+20>>2]=v(2)/v(0|s),f[t+38>>1]<=513){if((0|n)>=(0|o)&c>>>0>=r>>>0|(0|n)>(0|o))break e;o=d[c+p|0],l=(n=i+9|0)>>>0<9?l+1|0:l,h[t+16>>2]=n,h[t+20>>2]=l;t:switch(0|o){case 1:u=1;break;case 0:break t;default:break e}h[e+72>>2]=u}u=ze(e+96|0,t)}return 0|u}function vt(e){var t,i=0,r=0,n=0;if(h[(e|=0)>>2]=11412,t=h[e+368>>2],h[e+368>>2]=0,t){if(i=h[(n=t-4|0)>>2])for(r=(i<<4)+t|0;(0|t)!=(0|(r=r-16|0)););be(n)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,be(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,be(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,be(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,be(i)),r=h[e+144>>2])for(;i=h[r>>2],be(r),r=i,i;);return i=h[e+136>>2],h[e+136>>2]=0,i&&be(i),(i=h[e+120>>2])&&be(i),(i=h[e+108>>2])&&be(i),(i=h[e+96>>2])&&be(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,be(i)),(i=h[e+60>>2])&&be(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,be(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,be(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,be(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,be(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ni(i),0|e}function _t(e){var t,i=0,r=0;i=h[e+8>>2],t=h[e>>2];e:{if(d[e+12|0]){t:{if(-1!=(0|i)&&-1!=(0|(i=((r=i+1|0)>>>0)%3|0?r:i-2|0))&&-1!=(0|(i=h[h[t+12>>2]+(i<<2)>>2]))){if(i=((r=i+1|0)>>>0)%3|0?r:i-2|0,h[e+8>>2]=i,-1!=(0|i))break t}else h[e+8>>2]=-1;i=-1;i:if(-1!=(0|(r=h[e+4>>2]))){if((r>>>0)%3|0)r=r-1|0;else if(i=-1,-1==(0|(r=r+2|0)))break i;i=-1,-1!=(0|(r=h[h[t+12>>2]+(r<<2)>>2]))&&(i=r-1|0,(r>>>0)%3|0||(i=r+2|0))}return a[e+12|0]=0,void(h[e+8>>2]=i)}if((0|i)!=h[e+4>>2])break e;return void(h[e+8>>2]=-1)}r=-1;t:if(-1!=(0|i)){if((i>>>0)%3|0)i=i-1|0;else if(r=-1,-1==(0|(i=i+2|0)))break t;r=-1,-1!=(0|(i=h[h[t+12>>2]+(i<<2)>>2]))&&(r=i-1|0,(i>>>0)%3|0||(r=i+2|0))}h[e+8>>2]=r}}function yt(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0;h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,l=(0|(a=h[t+4>>2]-h[t>>2]|0))/20|0;e:{t:{i:{if(a){if(l>>>0>=214748365)break i;r=mr(a),h[e+16>>2]=r,h[e+20>>2]=r,h[e+24>>2]=b(l,20)+r,i=h[t>>2],i=t=(0|(t=h[t+4>>2]-i|0))<=0?r:We(r,i,t)+b((t>>>0)/20|0,20)|0,h[e+20>>2]=i}if(h[e+28>>2]=0,!(t=i-r|0))break e;if(a=1&(i=(t=(0|t)/20|0)>>>0>1?t:1),t>>>0<2){t=0;break t}for(l=-2&i,t=0,i=0;s=b(1|t,20)+r|0,s=b(h[s+16>>2],h[s+12>>2]),o=b(t,20)+r|0,n=(n=n>>>0<(o=b(h[o+16>>2],h[o+12>>2]))>>>0?o:n)>>>0<s>>>0?s:n,t=t+2|0,(0|l)!=(0|(i=i+2|0)););break t}bn(),x()}a&&(t=b(t,20)+r|0,n=(t=b(h[t+16>>2],h[t+12>>2]))>>>0>n>>>0?t:n)}return ai(e,n),h[e+12>>2]=h[e>>2],e}function At(e,t,i){var r=0,n=0;e:if((0|e)!=(0|t)){if(t-(n=e+i|0)>>>0<=0-(i<<1)>>>0)return We(e,t,i);if(r=3&(e^t),e>>>0<t>>>0){if(r)r=e;else{if(3&e)for(r=e;;){if(!i)break e;if(a[0|r]=d[0|t],t=t+1|0,i=i-1|0,!(3&(r=r+1|0)))break}else r=e;if(!(i>>>0<=3))for(;h[r>>2]=h[t>>2],t=t+4|0,r=r+4|0,(i=i-4|0)>>>0>3;);}if(i)for(;a[0|r]=d[0|t],r=r+1|0,t=t+1|0,i=i-1|0;);}else{if(!r){if(3&n)for(;;){if(!i)break e;if(a[0|(r=(i=i-1|0)+e|0)]=d[t+i|0],!(3&r))break}if(!(i>>>0<=3))for(;h[(i=i-4|0)+e>>2]=h[t+i>>2],i>>>0>3;);}if(!i)break e;for(;a[(i=i-1|0)+e|0]=d[t+i|0],i;);}}return e}function Et(e,t,i){var r,n,a=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;I=r=I-16|0;e:{if((0|(o=h[e+24>>2]))!=(0|(n=h[e+28>>2])))for(;;){h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,a=Ki(h[o>>2],t,r),c=(e=d[r+11|0])<<24>>24,u=3;t:{i:{r:{n:if(a&&(u=0,s=(a=d[i+11|0])<<24>>24,(0|(f=(0|c)<0?h[r+4>>2]:e))==(0|((0|s)<0?h[i+4>>2]:a)))){l=(0|s)<0?h[i>>2]:i,s=h[r>>2];a:{if(!(a=(0|c)<0)){if(!c)break a;if(a=r,d[0|l]!=(255&s))break t;for(;;){if(!(e=e-1|0))break a;if(s=d[l+1|0],l=l+1|0,(0|s)!=d[0|(a=a+1|0)])break}break n}if(f&&xi(a?s:r,l,f))break r}p=h[o>>2],u=1}if((0|c)>=0)break i}be(h[r>>2])}switch(0|u){case 0:case 3:break t;default:break e}}if((0|n)==(0|(o=o+4|0)))break}p=0}return I=r+16|0,p}function wt(e,t,i){switch(t-9|0){case 0:return t=h[i>>2],h[i>>2]=t+4,void(h[e>>2]=h[t>>2]);case 6:return t=h[i>>2],h[i>>2]=t+4,t=u[t>>1],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 7:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=f[t>>1],void(h[e+4>>2]=0);case 8:return t=h[i>>2],h[i>>2]=t+4,t=a[0|t],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 9:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=d[0|t],void(h[e+4>>2]=0);case 16:return t=h[i>>2]+7&-8,h[i>>2]=t+8,void(g[e>>3]=g[t>>3]);case 17:Rn[0](e,i);default:return;case 1:case 4:case 14:return t=h[i>>2],h[i>>2]=t+4,t=h[t>>2],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 2:case 5:case 11:case 15:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=h[t>>2],void(h[e+4>>2]=0);case 3:case 10:case 12:case 13:}t=h[i>>2]+7&-8,h[i>>2]=t+8,i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i}function St(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0;if((r=h[e+8>>2])-(i=h[e+4>>2])>>2>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=2)+t|0),void(h[e+4>>2]=i);e:{t:{i:{if((n=(a=i-(s=h[e>>2])>>2)+t|0)>>>0<1073741824){if(o=(r=r-s|0)>>1,n=r>>>0<2147483644?n>>>0>o>>>0?n:o:1073741823){if(n>>>0>=1073741824)break i;l=mr(n<<2)}if(a=(t=xt(r=(a<<2)+l|0,0,a=t<<2))+a|0,n=(n<<2)+l|0,(0|i)==(0|s))break t;for(;t=h[(i=i-4|0)>>2],h[i>>2]=0,h[(r=r-4|0)>>2]=t,(0|i)!=(0|s););if(h[e+8>>2]=n,t=h[e+4>>2],h[e+4>>2]=a,i=h[e>>2],h[e>>2]=r,(0|t)==(0|i))break e;for(;e=h[(t=t-4|0)>>2],h[t>>2]=0,e&&Rn[h[h[e>>2]+4>>2]](e),(0|t)!=(0|i););break e}bn(),x()}Zi(1336),x()}h[e+8>>2]=n,h[e+4>>2]=a,h[e>>2]=t}i&&be(i)}function Tt(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0;return h[e+16>>2]=0,i=h[e>>2],h[e+4>>2]=i,h[e+12>>2]=i,i=s=h[t+12>>2],r=h[t+20>>2],r=(n=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(o=h[t+8>>2])>>>0<n>>>0&(0|i)<=(0|r)|(0|i)<(0|r)||(i=a+h[t>>2]|0,i=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+16>>2]=n,h[t+20>>2]=r,!i|3&i||o-n>>>0<i>>>0&(0|(a=s-(r+(n>>>0>o>>>0)|0)|0))<=0|(0|a)<0||(i>>>0>=4&&(ei(e,i>>>2|0),o=h[t+8>>2],s=h[t+12>>2],n=h[t+16>>2],r=h[t+20>>2]),(a=i+n|0)>>>0>o>>>0&(0|(r=i>>>0>a>>>0?r+1|0:r))>=(0|s)|(0|r)>(0|s)||(We(h[e>>2],n+h[t>>2]|0,i),r=h[t+20>>2],r=(n=i+h[t+16>>2]|0)>>>0<i>>>0?r+1|0:r,h[t+16>>2]=n,h[t+20>>2]=r,h[e+16>>2]=0,h[e+12>>2]=h[e>>2],l=1))),l}function xt(e,t,i){var r=0,n=0,s=0;if(i&&(a[0|e]=t,a[(n=e+i|0)-1|0]=t,!(i>>>0<3||(a[e+2|0]=t,a[e+1|0]=t,a[n-3|0]=t,a[n-2|0]=t,i>>>0<7||(a[e+3|0]=t,a[n-4|0]=t,i>>>0<9||(s=(n=0-e&3)+e|0,r=b(255&t,16843009),h[s>>2]=r,h[(i=(t=i-n&-4)+s|0)-4>>2]=r,t>>>0<9||(h[s+8>>2]=r,h[s+4>>2]=r,h[i-8>>2]=r,h[i-12>>2]=r,t>>>0<25||(h[s+24>>2]=r,h[s+20>>2]=r,h[s+16>>2]=r,h[s+12>>2]=r,h[i-16>>2]=r,h[i-20>>2]=r,h[i-24>>2]=r,h[i-28>>2]=r,(i=(i=t)-(t=4&s|24)|0)>>>0<32))))))))for(r=Xi(r,0,1,1),n=L,t=t+s|0;h[t+24>>2]=r,h[t+28>>2]=n,h[t+16>>2]=r,h[t+20>>2]=n,h[t+8>>2]=r,h[t+12>>2]=n,h[t>>2]=r,h[t+4>>2]=n,t=t+32|0,(i=i-32|0)>>>0>31;);return e}function Mt(e,t){var i=0,r=0,n=0,a=0,s=0;r=-1,a=-1,n=-1;e:{t:if(-1!=(0|t)){if(s=1,a=h[h[h[e+4>>2]+12>>2]+(t<<2)>>2],(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))>=0&&(n=(i>>>0)/3|0,n=h[(h[h[e>>2]+96>>2]+b(n,12)|0)+(i-b(n,3)<<2)>>2]),-1!=(0|a)&&(s=0,(0|(i=((a>>>0)%3|0?-1:2)+a|0))<0||(r=(i>>>0)/3|0,r=h[(h[h[e>>2]+96>>2]+b(r,12)|0)+(i-b(r,3)<<2)>>2])),i=-1,(0|r)!=(0|n))break e;if(n=-1,(0|(t=((t>>>0)%3|0?-1:2)+t|0))>=0){if(r=(t>>>0)/3|0,r=h[(h[h[e>>2]+96>>2]+b(r,12)|0)+(t-b(r,3)<<2)>>2],s)break t}else if(r=-1,s)break t;(0|(t=((t=a+1|0)>>>0)%3|0?t:a-2|0))<0||(i=h[h[e>>2]+96>>2],n=h[(i+b(e=(t>>>0)/3|0,12)|0)+(t-b(e,3)<<2)>>2])}i=(0|r)==(0|n)?a:-1}return i}function Rt(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;if(r=h[(n=e+16|0)>>2]){for(s=h[t>>2],t=n;t=(a=(0|s)>h[r+16>>2])?t:r,r=h[(a<<2)+r>>2];);if(!((0|t)==(0|n)|(0|s)<h[t+16>>2])&&(r=h[t+24>>2]))for(s=(a=(n=d[i+11|0])<<24>>24<0)?h[i>>2]:i,n=a?h[i+4>>2]:n,a=t+20|0;;){e:{t:{i:{if(c=(u=(t=(o=(t=d[r+27|0])<<24>>24<0)?h[r+20>>2]:t)>>>0<n>>>0)?t:n){l=r+16|0;r:{if(!(l=xi(s,o=o?h[l>>2]:l,c))){if(t>>>0<=n>>>0)break r;break e}if((0|l)<0)break e}if(!(t=xi(o,s,c)))break i;if((0|t)<0)break t;return ri(a,i)}if(t>>>0>n>>>0)break e}if(!u)return ri(a,i)}r=r+4|0}if(!(r=h[r>>2]))break}}return ri(e,i)}function Pt(e,t,i){var r,n=0,a=0,s=0;I=r=I-16|0,h[e+4>>2]=0;e:{t:if(t){if((n=(s=h[e+8>>2])<<5)>>>0>=t>>>0)h[e+4>>2]=t;else{if(h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,(0|t)<0)break e;xe(r,n=n>>>0<=1073741822?(n=s<<6)>>>0<(a=t+31&-32)>>>0?a:n:2147483647),a=h[e>>2],h[e>>2]=h[r>>2],h[r>>2]=a,n=h[e+4>>2],h[e+4>>2]=t,h[r+4>>2]=n,n=h[e+8>>2],h[e+8>>2]=h[r+8>>2],h[r+8>>2]=n,a&&be(a)}if(n=(a=t>>>5|0)<<2,e=h[e>>2],d[0|i]){if(e=xt(e,255,n),!(t&=31))break t;h[(e=e+(a<<2)|0)>>2]=h[e>>2]|-1>>>32-t}else e=xt(e,0,n),(t&=31)&&(h[(e=e+(a<<2)|0)>>2]=h[e>>2]&(-1>>>32-t^-1))}return void(I=r+16|0)}pn(),x()}function Ct(e,t){var i=0,r=0,n=0,a=0,s=0,o=0;if((r=h[e+4>>2])>>>0<(n=h[e+8>>2])>>>0)return h[r>>2]=h[t>>2],h[r+4>>2]=h[t+4>>2],h[r+8>>2]=h[t+8>>2],void(h[e+4>>2]=r+12);e:{if((i=1+(s=(r-(a=h[e>>2])|0)/12|0)|0)>>>0<357913942){if(o=(n=(n-a|0)/12|0)<<1,(i=n>>>0<178956970?i>>>0>o>>>0?i:o:357913941)>>>0>=357913942)break e;if(o=b(s,12),s=mr(n=b(i,12)),h[(i=o+s|0)>>2]=h[t>>2],h[i+4>>2]=h[t+4>>2],h[i+8>>2]=h[t+8>>2],t=i+12|0,(0|r)!=(0|a))for(;r=r-12|0,h[(i=i-12|0)>>2]=h[r>>2],h[i+4>>2]=h[r+4>>2],h[i+8>>2]=h[r+8>>2],(0|r)!=(0|a););return h[e+8>>2]=n+s,h[e+4>>2]=t,h[e>>2]=i,void(a&&be(a))}bn(),x()}Zi(1336),x()}function kt(e,t,i){var r,n=0,a=0,s=0,o=0;if((r=(s=i-t|0)>>2)>>>0<=(n=h[e+8>>2])-(a=h[e>>2])>>2>>>0){if((0|(n=r>>>0>(o=(n=(s=h[e+4>>2])-a|0)>>2)>>>0?t+n|0:i))!=(0|t))for(;h[a>>2]=h[t>>2],a=a+4|0,(0|n)!=(0|(t=t+4|0)););return r>>>0>o>>>0?((0|(t=i-n|0))>0&&(s=We(s,n,t)+t|0),void(h[e+4>>2]=s)):void(h[e+4>>2]=a)}if(a&&(h[e+4>>2]=a,be(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=0),!((0|s)<0||(i=n>>1,(i=n>>>0<2147483644?i>>>0<r>>>0?r:i:1073741823)>>>0>=1073741824)))return i=mr(a=i<<2),h[e>>2]=i,h[e+4>>2]=i,h[e+8>>2]=i+a,s&&(i=We(i,t,s)+s|0),void(h[e+4>>2]=i);bn(),x()}function Ot(e){var t=0,i=0,r=0,n=0;i=1;e:if(!((0|(r=h[e+140>>2]))<=0)){for(t=r<<4,i=mr((0|r)!=(268435455&r)?-1:4|t),h[i>>2]=r,r=(i=i+4|0)+t|0,t=i;h[t>>2]=0,h[t+4>>2]=0,a[t+5|0]=0,a[t+6|0]=0,a[t+7|0]=0,a[t+8|0]=0,a[t+9|0]=0,a[t+10|0]=0,a[t+11|0]=0,a[t+12|0]=0,(0|r)!=(0|(t=t+16|0)););if(n=h[e+136>>2],h[e+136>>2]=i,n){if(i=h[(r=n-4|0)>>2])for(t=(i<<4)+n|0;(0|n)!=(0|(t=t-16|0)););be(r)}if(i=1,!(h[e+140>>2]<=0))for(t=0;;){if(!(i=ze(h[e+136>>2]+(t<<4)|0,e)))break e;if(!((0|(t=t+1|0))<h[e+140>>2]))break}}return i}function Dt(e,t){var i,r=0,n=0,s=0,o=0;return h[e+64>>2]||(r=mr(32),h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,n=h[e+64>>2],h[e+64>>2]=r,n&&((r=h[n>>2])&&(h[n+4>>2]=r,be(r)),be(n))),s=h[e+64>>2],n=(r=h[e+28>>2]-1|0)>>>0<=10?h[13616+(r<<2)>>2]:-1,n=r=b(n,a[e+24|0]),(s=ji(s,0,Xi(r,i=r>>31,t,0),L))&&(r=h[e+64>>2],h[e>>2]=r,o=h[r+20>>2],h[e+8>>2]=h[r+16>>2],h[e+12>>2]=o,o=h[r+24>>2],r=h[r+28>>2],h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=n,h[e+44>>2]=i,h[e+16>>2]=o,h[e+20>>2]=r,h[e+80>>2]=t),s}function Nt(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;a=e+4|0;e:{if(e=h[e+4>>2])for(l=(r=(n=d[i+11|0])<<24>>24<0)?h[i>>2]:i,n=r?h[i+4>>2]:n;;){t:{i:{r:{n:{a:{s:if(o=(c=(i=(r=(i=d[e+27|0])<<24>>24<0)?h[e+20>>2]:i)>>>0<n>>>0)?i:n){if(s=e+16|0,!(s=xi(l,r=r?h[s>>2]:s,o))){if(i>>>0>n>>>0)break s;break a}if((0|s)>=0)break a}else if(i>>>0<=n>>>0)break n;if(i=h[e>>2])break t;return h[t>>2]=e,e}if(i=xi(r,l,o))break r}if(c)break i;break e}if((0|i)>=0)break e}if(a=e+4|0,!(i=h[e+4>>2]))break e;e=a}a=e,e=i}return h[t>>2]=a,a}return h[t>>2]=e,a}function It(e,t){var i=0;return i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,i=h[t+60>>2],h[e+56>>2]=h[t+56>>2],h[e+60>>2]=i,i=h[t+52>>2],h[e+48>>2]=h[t+48>>2],h[e+52>>2]=i,i=h[t+44>>2],h[e+40>>2]=h[t+40>>2],h[e+44>>2]=i,i=h[t+36>>2],h[e+32>>2]=h[t+32>>2],h[e+36>>2]=i,i=h[t+28>>2],h[e+24>>2]=h[t+24>>2],h[e+28>>2]=i,i=h[t+20>>2],h[e+16>>2]=h[t+16>>2],h[e+20>>2]=i,i=h[t+12>>2],h[e+8>>2]=h[t+8>>2],h[e+12>>2]=i,h[e+88>>2]=0,h[e+64>>2]=0,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,a[e+77|0]=0,a[e+78|0]=0,a[e+79|0]=0,a[e+80|0]=0,a[e+81|0]=0,a[e+82|0]=0,a[e+83|0]=0,a[e+84|0]=0,e}function Lt(e,t){var i,r=0,n=0,a=0,s=0,o=0,l=0,c=0;i=e+4|0;e:{t:if(e=h[e+4>>2]){for(l=(r=(n=d[t+11|0])<<24>>24<0)?h[t>>2]:t,a=r?h[t+4>>2]:n,r=i;(n=(s=(o=(c=(t=d[e+27|0])<<24>>24<0)?h[e+20>>2]:t)>>>0>a>>>0)?a:o)&&(t=e+16|0,t=xi(c?h[t>>2]:t,l,n))||(t=a>>>0>o>>>0?-1:s),r=(0|t)<0?r:e,e=h[(t>>>29&4)+e>>2];);if((0|r)!=(0|i)){if(!((t=(n=(s=(e=d[r+27|0])<<24>>24<0)?h[r+20>>2]:e)>>>0<a>>>0?n:a)&&(e=r+16|0,e=xi(l,s?h[e>>2]:e,t)))){if(n>>>0>a>>>0)break t;break e}if((0|e)>=0)break e}}r=i}return r}function Ut(e,t,i){var r=0,n=0,s=0,o=0;e:{if(t)if(f[e+38>>1]<=513){if(n=h[e+12>>2],t=h[e+20>>2],t=(o=(s=h[e+16>>2])+8|0)>>>0<8?t+1|0:t,o>>>0>p[e+8>>2]&(0|t)>=(0|n)|(0|t)>(0|n))break e;t=s+h[e>>2]|0,r=d[t+4|0]|d[t+5|0]<<8|d[t+6|0]<<16|d[t+7|0]<<24,h[i>>2]=d[0|t]|d[t+1|0]<<8|d[t+2|0]<<16|d[t+3|0]<<24,h[i+4>>2]=r,t=h[e+20>>2],t=(i=h[e+16>>2]+8|0)>>>0<8?t+1|0:t,h[e+16>>2]=i,h[e+20>>2]=t}else if(!ui(1,i,e))break e;a[e+36|0]=1,h[e+32>>2]=0,i=(t=h[e+16>>2])+h[e>>2]|0,h[e+24>>2]=i,r=e,e=h[e+8>>2],h[r+28>>2]=i+(e-t|0),r=1}return r}function Vt(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0;e:{t:{if(t){if(t>>>0>=357913942)break t;if(t=mr(r=b(t,12)),h[e>>2]=t,h[e+4>>2]=t,n=t+r|0,h[e+8>>2]=n,a=h[i>>2],i=h[i+4>>2]-a|0){if((0|i)<0)break e;for(s=i>>2<<2,o=i>>>2<<2;h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,r=mr(i),h[t>>2]=r,h[t+4>>2]=r,h[t+8>>2]=r+s,l=t,c=We(r,a,i)+o|0,h[l+4>>2]=c,(0|n)!=(0|(t=t+12|0)););}else xt(i=t,0,12+((t=r-12|0)-((t>>>0)%12|0)|0)|0);h[e+4>>2]=n}return}bn(),x()}h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,bn(),x()}function Ft(e,t){e|=0,t|=0;var i=0,r=0,n=0,a=0,s=0,o=0;a=mr(64),i=mr(12),h[i+8>>2]=h[h[e+4>>2]+80>>2],h[i>>2]=13248,h[i+4>>2]=0,a=Bi(a,i);e:{if((0|t)<0)i=a;else{if(o=e+8|0,!((0|(s=(i=h[e+12>>2])-(n=h[e+8>>2])>>2))>(0|t)))if(r=t+1|0,t>>>0>=s>>>0)St(o,r-s|0);else if(!(r>>>0>=s>>>0)){if((0|(n=n+(r<<2)|0))!=(0|i))for(;r=h[(i=i-4|0)>>2],h[i>>2]=0,r&&Rn[h[h[r>>2]+4>>2]](r),(0|i)!=(0|n););h[e+12>>2]=n}if(e=h[o>>2]+(t<<2)|0,i=h[e>>2],h[e>>2]=a,!i)break e}Rn[h[h[i>>2]+4>>2]](i)}return(-1^t)>>>31|0}function Gt(e,t){var i,r,n=0;if(I=r=I-16|0,h[r+12>>2]=t,I=i=I-208|0,h[i+204>>2]=t,xt(t=i+160|0,0,40),h[i+200>>2]=h[i+204>>2],!((0|q(0,e,i+200|0,i+80|0,t))<0)){h[3885],t=h[3866],h[3884]<=0&&(h[3866]=-33&t);e:{t:{if(h[3878]){if(h[3870])break t}else h[3878]=80,h[3873]=0,h[3870]=0,h[3871]=0,n=h[3877],h[3877]=i;if(er(15464))break e}q(15464,e,i+200|0,i+80|0,i+160|0)}n&&(Rn[h[3875]](15464,0,0),h[3878]=0,h[3877]=n,h[3873]=0,h[3870]=0,h[3871]=0),h[3866]=h[3866]|32&t}I=i+208|0,I=r+16|0}function Bt(e,t,i){var r,n=0,a=0,s=0,o=0;return(r=(s=i-t|0)>>2)>>>0<=(n=h[e+8>>2])-(a=h[e>>2])>>2>>>0?((o=(n=(s=(n=h[e+4>>2]-a|0)>>2)>>>0<r>>>0?t+n|0:i)-t|0)&&At(a,t,o),s>>>0<r>>>0?(t=h[e+4>>2],(0|(i=i-n|0))>0&&(t=We(t,n,i)+i|0),void(h[e+4>>2]=t)):void(h[e+4>>2]=a+o)):(a&&(h[e+4>>2]=a,be(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=0),(0|s)<0||(i=n>>1,(i=n>>>0<2147483644?i>>>0<r>>>0?r:i:1073741823)>>>0>=1073741824)?(bn(),void x()):(i=mr(a=i<<2),h[e>>2]=i,h[e+4>>2]=i,h[e+8>>2]=i+a,s&&(i=We(i,t,s)+s|0),void(h[e+4>>2]=i)))}function jt(e,t,i){var r=0,n=0,a=0,s=0;e:{if((t|i)>=0){if(!(t>>>0>1431655765)){if(je(e,r=b(t,3),13680),je(e+12|0,r,13684),r=h[e+24>>2],!(h[e+32>>2]-r>>2>>>0>=i>>>0)){if(i>>>0>=1073741824)break e;n=h[e+28>>2],a=(i=mr(a=i<<2))+a|0,s=(n=n-r|0)+i|0,(0|n)>0&&We(i,r,n),h[e+32>>2]=a,h[e+28>>2]=s,h[e+24>>2]=i,r&&be(r)}h[e+80>>2]=0,h[e+84>>2]=0,i=h[e+76>>2],h[e+76>>2]=0,i&&be(i),h[e+68>>2]=0,h[e+72>>2]=0,e=h[(i=e- -64|0)>>2],h[i>>2]=0,e&&be(e)}e=t>>>0<1431655766}else e=0;return e}Zi(1336),x()}function zt(e){var t=0,i=0,r=0,n=0,s=0;if(r=h[e+8>>2],!d[r+84|0]&&!(!(t=h[e+16>>2])|!d[t+84|0]||(i=h[r+72>>2],n=h[r+68>>2],a[t+84|0]=0,i=i-n>>2,s=h[t+68>>2],i>>>0>(n=h[t+72>>2]-s>>2)>>>0?($e(t+68|0,i-n|0,2344),r=h[e+8>>2]):i>>>0>=n>>>0||(h[t+72>>2]=s+(i<<2)),(t=d[r+84|0])||(0|(i=h[r+68>>2]))==h[r+72>>2])))if(n=h[h[e+16>>2]+68>>2],t)h[n>>2]=0;else for(t=0;h[(s=t<<2)+n>>2]=h[i+s>>2],t=t+1|0,i=h[r+68>>2],t>>>0<h[r+72>>2]-i>>2>>>0;);return h[e+16>>2]}function Ht(e,t){t|=0;var i=0,r=0,n=0,a=0;e:if((0|(i=h[216+(e|=0)>>2]))!=h[e+220>>2]){for(;;){t:if(!((0|(i=h[b(n,144)+i>>2]))<0||(r=h[e+4>>2],a=h[r+8>>2],(0|i)>=h[r+12>>2]-a>>2||(r=0,i=h[(i<<2)+a>>2],(0|Rn[h[h[i>>2]+24>>2]](i))<=0)))){for(;;){if((0|Rn[h[h[i>>2]+20>>2]](i,r))!=(0|t)){if(r=r+1|0,(0|Rn[h[h[i>>2]+24>>2]](i))>(0|r))continue;break t}break}e=h[e+216>>2]+b(n,144)|0,n=d[e+100|0]?e+4|0:0;break e}if(n=n+1|0,i=h[e+216>>2],!(n>>>0<(h[e+220>>2]-i|0)/144>>>0))break}return 0}return 0|n}function Wt(e,t){var i=0,r=0,n=0,a=0,s=0,o=0;if((0|(i=h[e+4>>2]))!=h[e+8>>2])return r=h[t+4>>2],h[i>>2]=h[t>>2],h[i+4>>2]=r,h[i+8>>2]=h[t+8>>2],void(h[e+4>>2]=i+12);e:{if((i=1+(r=(0|(s=i-(a=h[e>>2])|0))/12|0)|0)>>>0<357913942){if(n=r<<1,n=r>>>0<178956970?i>>>0>n>>>0?i:n:357913941){if(n>>>0>=357913942)break e;i=mr(b(n,12))}else i=0;return r=i+b(r,12)|0,o=h[t+4>>2],h[r>>2]=h[t>>2],h[r+4>>2]=o,h[r+8>>2]=h[t+8>>2],t=r+b((0|s)/-12|0,12)|0,(0|s)>0&&We(t,a,s),h[e+8>>2]=i+b(n,12),h[e+4>>2]=r+12,h[e>>2]=t,void(a&&be(a))}bn(),x()}Zi(1336),x()}function $t(e){var t=0,i=0,r=0;if(h[(e|=0)>>2]=2156,t=h[e+60>>2]){if((0|t)==(0|(i=h[e- -64>>2])))i=t;else{for(;r=h[(i=i-4|0)>>2],h[i>>2]=0,r&&Hi(r),(0|t)!=(0|i););i=h[e+60>>2]}h[e+64>>2]=t,be(i)}if((t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),t=h[e+36>>2]){if((0|t)==(0|(i=h[e+40>>2])))i=t;else{for(;Rn[h[h[(i=i-24|0)>>2]>>2]](i),(0|t)!=(0|i););i=h[e+36>>2]}h[e+40>>2]=t,be(i)}return h[e>>2]=2012,(t=h[e+16>>2])&&(h[e+20>>2]=t,be(t)),(t=h[e+4>>2])&&(h[e+8>>2]=t,be(t)),0|e}function Yt(e){var t=0,i=0,r=0,n=0;if(i=h[e+132>>2]){if((0|i)==(0|(t=h[e+136>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+132>>2]}h[e+136>>2]=i,be(t)}if(i=h[e+120>>2]){if((0|i)==(0|(t=h[e+124>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+120>>2]}h[e+124>>2]=i,be(t)}(t=h[e+108>>2])&&(h[e+112>>2]=t,be(t)),(t=h[e+96>>2])&&(h[e+100>>2]=t,be(t)),Rr(e+76|0),Rr(e+56|0),Rr(e+36|0),Rr(e+16|0)}function Xt(e,t,i,r,n,s,o){var l,c=0,u=0;if(I=l=I-16|0,(-1^t)-17>>>0>=i>>>0)return u=d[e+11|0]>>>7|0?h[e>>2]:e,t>>>0<2147483623?(h[l+8>>2]=t<<1,h[l+12>>2]=t+i,I=i=I-16|0,I=i+16|0,i=l+8|0,i=(i=h[(p[(c=l+12|0)>>2]<p[i>>2]?i:c)>>2])>>>0>=11?11==(0|(i=(c=i+16&-16)-1|0))?c:i:10):i=-18,i=mr(c=i+1|0),s&&rn(i,o,s),(r=r-n|0)&&rn(i+s|0,n+u|0,r),10!=(0|t)&&be(u),h[e>>2]=i,h[e+8>>2]=-2147483648|c,t=e,e=r+s|0,h[t+4>>2]=e,a[l+7|0]=0,a[e+i|0]=d[l+7|0],void(I=l+16|0);mn(),x()}function qt(e){var t=0,i=0,r=0,n=0;if(i=h[e+640>>2]){if((0|i)==(0|(t=h[e+644>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+640>>2]}h[e+644>>2]=i,be(t)}if(i=h[e+628>>2]){if((0|i)==(0|(t=h[e+632>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+628>>2]}h[e+632>>2]=i,be(t)}(t=h[e+616>>2])&&(h[e+620>>2]=t,be(t)),(t=h[e+604>>2])&&(h[e+608>>2]=t,be(t)),Rr(e+584|0),Rr(e+564|0),Rr(e+544|0)}function Zt(e){var t=0,i=0,r=0,n=0;if(i=h[e+128>>2]){if((0|i)==(0|(t=h[e+132>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+128>>2]}h[e+132>>2]=i,be(t)}if(i=h[e+116>>2]){if((0|i)==(0|(t=h[e+120>>2])))t=i;else{for(;(r=h[(n=t-12|0)>>2])&&(h[t-8>>2]=r,be(r)),(0|i)!=(0|(t=n)););t=h[e+116>>2]}h[e+120>>2]=i,be(t)}(t=h[e+104>>2])&&(h[e+108>>2]=t,be(t)),(t=h[e+92>>2])&&(h[e+96>>2]=t,be(t)),Rr(e+72|0),Rr(e+52|0),Rr(e+32|0)}function Jt(e,t){t|=0;var i=0,r=0,n=0,a=0;if((0|(i=h[216+(e|=0)>>2]))!=h[e+220>>2])for(;;){e:if(!((0|(i=h[b(n,144)+i>>2]))<0||(r=h[e+4>>2],a=h[r+8>>2],(0|i)>=h[r+12>>2]-a>>2||(r=0,i=h[(i<<2)+a>>2],(0|Rn[h[h[i>>2]+24>>2]](i))<=0)))){for(;;){if((0|Rn[h[h[i>>2]+20>>2]](i,r))!=(0|t)){if(r=r+1|0,(0|Rn[h[h[i>>2]+24>>2]](i))>(0|r))continue;break e}break}return 104+(h[e+216>>2]+b(n,144)|0)|0}if(n=n+1|0,i=h[e+216>>2],!(n>>>0<(h[e+220>>2]-i|0)/144>>>0))break}return e+184|0}function Kt(e,t){if(!e)return 0;e:{t:{if(e){if(t>>>0<=127)break t;if(h[h[4227]>>2]){if(t>>>0<=2047){a[e+1|0]=63&t|128,a[0|e]=t>>>6|192,e=2;break e}if(!(57344!=(-8192&t)&t>>>0>=55296)){a[e+2|0]=63&t|128,a[0|e]=t>>>12|224,a[e+1|0]=t>>>6&63|128,e=3;break e}if(t-65536>>>0<=1048575){a[e+3|0]=63&t|128,a[0|e]=t>>>18|240,a[e+2|0]=t>>>6&63|128,a[e+1|0]=t>>>12&63|128,e=4;break e}}else if(57216==(-128&t))break t;h[4190]=25,e=-1}else e=1;break e}a[0|e]=t,e=1}return e}function Qt(e){var t,i=0,r=0;if(h[(e|=0)>>2]=13756,(i=h[e+68>>2])&&(h[e+72>>2]=i,be(i)),(i=h[e+56>>2])&&(h[e+60>>2]=i,be(i)),(i=h[e+44>>2])&&(h[e+48>>2]=i,be(i)),(i=h[e+32>>2])&&(h[e+36>>2]=i,be(i)),(i=h[e+20>>2])&&(h[e+24>>2]=i,be(i)),t=h[e+8>>2]){if((0|(r=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Hi(i),(0|t)!=(0|r););i=h[e+8>>2]}h[e+12>>2]=t,be(i)}return i=h[e+4>>2],h[e+4>>2]=0,i&&Mi(i),0|e}function ei(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0;if((n=h[e+8>>2])-(i=h[e+4>>2])>>2>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=2)+t|0),void(h[e+4>>2]=i);e:{if((r=(o=(s=i-(a=h[e>>2])|0)>>2)+t|0)>>>0<1073741824){if(i=0,l=(n=n-a|0)>>1,r=n>>>0<2147483644?r>>>0>l>>>0?r:l:1073741823){if(r>>>0>=1073741824)break e;i=mr(r<<2)}return t=xt((o<<2)+i|0,0,t<<=2)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(r<<2)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&be(a))}bn(),x()}Zi(1336),x()}function ti(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0;if((n=h[e+8>>2])-(i=h[e+4>>2])>>3>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=3)+t|0),void(h[e+4>>2]=i);e:{if((r=(o=(s=i-(a=h[e>>2])|0)>>3)+t|0)>>>0<536870912){if(i=0,l=(n=n-a|0)>>2,r=n>>>0<2147483640?r>>>0>l>>>0?r:l:536870911){if(r>>>0>=536870912)break e;i=mr(r<<3)}return t=xt((o<<3)+i|0,0,t<<=3)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(r<<3)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&be(a))}bn(),x()}Zi(1336),x()}function ii(e,t){var i,r=0,n=0,a=0,s=0,o=0;if(i=h[e>>2],(e=h[i+4>>2])>>>0<(r=h[i+8>>2])>>>0)return h[e>>2]=h[t>>2],void(h[i+4>>2]=e+4);e:{if((e=1+(n=(s=e-(a=h[i>>2])|0)>>2)|0)>>>0<1073741824){if(o=n<<2,n=(r=r-a|0)>>1,r=r>>>0<2147483644?e>>>0>n>>>0?e:n:1073741823){if(r>>>0>=1073741824)break e;e=mr(r<<2)}else e=0;return h[(n=o+e|0)>>2]=h[t>>2],(0|s)>0&&We(e,a,s),h[i+8>>2]=e+(r<<2),h[i+4>>2]=n+4,h[i>>2]=e,void(a&&be(a))}bn(),x()}Zi(1336),x()}function ri(e,t){var i=0,r=0,n=0,s=0;if((0|(i=e+4|0))!=(0|(e=Lt(e,t)))){for(t=a[e+39|0]<0?h[e+28>>2]:e+28|0;t=(e=t)+1|0,32==(0|(i=a[0|e]))|i-9>>>0<5;);e:{t:{i:switch((i=a[0|e])-43|0){case 0:break t;case 2:break i;default:break e}n=1}i=a[0|t],e=t}if(i-48>>>0<10)for(;r=48+(b(r,10)-a[0|e]|0)|0,t=a[e+1|0],e=e+1|0,t-48>>>0<10;);-1!=(0|(e=n?r:0-r|0))&&(s=0!=(0|e))}return s}function ni(e,t){var i=0,r=0,n=0,a=0,s=0,o=0;if((n=h[e+8>>2])-(i=h[e+4>>2])>>1>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=1)+t|0),void(h[e+4>>2]=i);e:{if((0|(r=(o=(s=i-(a=h[e>>2])|0)>>1)+t|0))>=0){if(i=0,r=(n=n-a|0)>>>0<2147483646?r>>>0>n>>>0?r:n:2147483647){if((0|r)<0)break e;i=mr(r<<1)}return t=xt((o<<1)+i|0,0,t<<=1)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(r<<1)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&be(a))}bn(),x()}Zi(1336),x()}function ai(e,t){var i=0,r=0,n=0,a=0,s=0;e:{t:{if((a=(i=h[e+4>>2])-(n=h[e>>2])|0)>>>0<t>>>0){if((s=t-a|0)>>>0<=(r=h[e+8>>2])-i>>>0)return s&&(i=xt(i,0,s)+s|0),void(h[e+4>>2]=i);if((0|t)<0)break e;if(r=(i=r-n|0)<<1,xt((i=mr(r=i>>>0<1073741823?t>>>0>r>>>0?t:r:2147483647))+a|0,0,s),(0|a)>0&&We(i,n,a),h[e+8>>2]=i+r,h[e+4>>2]=t+i,h[e>>2]=i,!n)break t;return void be(n)}t>>>0>=a>>>0||(h[e+4>>2]=t+n)}return}bn(),x()}function si(e){var t=0,i=0,r=0,n=0,a=0;if((0|(t=h[e+4>>2]))!=h[e+8>>2])return h[t>>2]=h[2863],void(h[e+4>>2]=t+4);e:{if((t=1+(n=(r=t-(a=h[e>>2])|0)>>2)|0)>>>0<1073741824){if(i=r>>1,i=r>>>0<2147483644?t>>>0>i>>>0?t:i:1073741823){if(i>>>0>=1073741824)break e;t=mr(i<<2)}else t=0;return h[(n=t+(n<<2)|0)>>2]=h[2863],(0|r)>0&&We(t,a,r),h[e+8>>2]=t+(i<<2),h[e+4>>2]=n+4,h[e>>2]=t,void(a&&be(a))}bn(),x()}Zi(1336),x()}function oi(e,t){var i=0,r=0,n=0,a=0;r=h[e+12>>2],(i=h[e+16>>2]-r>>2)>>>0<t>>>0?ei(e+12|0,t-i|0):t>>>0>=i>>>0||(h[e+16>>2]=r+(t<<2));e:{if(i=h[e>>2],!(h[e+8>>2]-i>>2>>>0>=t>>>0)){if(t>>>0>=1073741824)break e;r=h[e+4>>2],n=(t=mr(n=t<<2))+n|0,a=(r=r-i|0)+t|0,(0|r)>0&&We(t,i,r),h[e+8>>2]=n,h[e+4>>2]=a,h[e>>2]=t,i&&be(i)}return}Zi(1336),x()}function li(e,t,i){var r=0,n=0,a=0;e:{if(!(r=h[i+16>>2])){if(er(i))break e;r=h[i+16>>2]}if(r-(a=h[i+20>>2])>>>0<t>>>0)return 0|Rn[h[i+36>>2]](i,e,t);t:if(h[i+80>>2]<0)r=0;else{for(n=t;;){if(!(r=n)){r=0;break t}if(10==d[(n=r-1|0)+e|0])break}if((n=0|Rn[h[i+36>>2]](i,e,r))>>>0<r>>>0)break e;e=e+r|0,t=t-r|0,a=h[i+20>>2]}We(a,e,t),h[i+20>>2]=h[i+20>>2]+t,n=t+r|0}return n}function ci(e){var t=0,i=0,r=0,n=0;d[e+76|0]&&(a[e+76|0]=0,r=h[e+60>>2],n=(t=(i=h[e+72>>2]+7|0)>>>0<7?1:t)>>>3|0,t=(i=t<<29|i>>>3)+h[e+56>>2]|0,r=r+n|0,h[e+56>>2]=t,h[e+60>>2]=t>>>0<i>>>0?r+1|0:r),f[e+38>>1]<=513&&(a[e+132|0]=0,r=h[e+116>>2],t=0,n=(t=(i=h[e+128>>2]+7|0)>>>0<7?1:t)>>>3|0,t=(i=t<<29|i>>>3)+h[e+112>>2]|0,r=r+n|0,h[e+112>>2]=t,h[e+116>>2]=t>>>0<i>>>0?r+1|0:r)}function ui(e,t,i){var r=0,n=0,s=0,o=0;e:if(!(e>>>0>10||(0|(r=h[i+20>>2]))>=(0|(n=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|n))){if(n=a[s+h[i>>2]|0],r=(s=s+1|0)?r:r+1|0,h[i+16>>2]=s,h[i+20>>2]=r,(0|n)<0){if(!ui(e+1|0,t,i))break e;i=h[t>>2],e=h[t+4>>2]<<7|i>>>25,i=127&n|i<<7}else e=0,i=255&n;h[t>>2]=i,h[t+4>>2]=e,o=1}return o}function hi(e,t,i){var r=0,n=0,s=0,o=0;e:if(!(e>>>0>10||(0|(r=h[i+20>>2]))>=(0|(n=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|n))){if(n=a[s+h[i>>2]|0],r=(s=s+1|0)?r:r+1|0,h[i+16>>2]=s,h[i+20>>2]=r,(0|n)<0){if(!hi(e+1|0,t,i))break e;i=h[t>>2],e=h[t+4>>2]<<7|i>>>25,i=127&n|i<<7}else e=0,i=255&n;h[t>>2]=i,h[t+4>>2]=e,o=1}return o}function di(e,t){var i,r=0,n=0,a=0,s=0;h[e+144>>2]=t,r=h[32+(0|Rn[h[h[t>>2]+32>>2]](t))>>2],i=h[r>>2]+h[r+16>>2]|0,n=h[32+(0|Rn[h[h[t>>2]+32>>2]](t))>>2],r=(r=h[n+8>>2])-(n=h[n+16>>2])|0,a=e,s=f[h[32+(0|Rn[h[h[t>>2]+32>>2]](t))>>2]+38>>1],u[a+38>>1]=s,h[e>>2]=i,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=r,h[e+12>>2]=0,a=e,s=0|Rn[h[h[t>>2]+36>>2]](t),h[a+148>>2]=s}function fi(e,t,i,r){a[e+53|0]=1;e:if(h[e+4>>2]==(0|i)){a[e+52|0]=1;t:{if(!(i=h[e+16>>2])){if(h[e+36>>2]=1,h[e+24>>2]=r,h[e+16>>2]=t,1!=(0|r))break e;if(1==h[e+48>>2])break t;break e}if((0|t)==(0|i)){if(2==(0|(i=h[e+24>>2]))&&(h[e+24>>2]=r,i=r),1!=h[e+48>>2])break e;if(1==(0|i))break t;break e}h[e+36>>2]=h[e+36>>2]+1}a[e+54|0]=1}}function pi(e,t,i){t|=0,i|=0;var r,n=0;I=r=I-16|0,h[4+(e|=0)>>2]=t,t=h[t+64>>2],n=h[t>>2],t=h[t+4>>2],a[r+15|0]=0,Pt(e+24|0,(t-n>>2>>>0)/3|0,r+15|0),t=h[e+4>>2],n=h[t+56>>2],t=h[t+52>>2],a[r+14|0]=0,Pt(e+36|0,n-t>>2,r+14|0),t=h[i+12>>2],h[e+16>>2]=h[i+8>>2],h[e+20>>2]=t,t=h[i+4>>2],h[e+8>>2]=h[i>>2],h[e+12>>2]=t,I=r+16|0}function mi(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;if(t)for(s=0-d[e+12|0]&255,o=h[e>>2],n=h[e+8>>2];l=r<<1,n>>>0>4095||(0|(r=h[e+4>>2]))<=0||(r=r-1|0,h[e+4>>2]=r,n=d[r+o|0]|n<<8),r=(a=255&n)>>>0<s>>>0,c=a,a=b(n>>>8|0,s),n=r?c+a|0:n-(s+a|0)|0,h[e+8>>2]=n,r|=l,t=t-1|0;);h[i>>2]=r}function gi(e){h[e>>2]=0,h[e+4>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,a[e+24|0]=1,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+68>>2]=e}function bi(e){var t;h[e>>2]=0,h[e+4>>2]=0,h[e+56>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+60>>2]=e}function vi(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!vi(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function _i(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!_i(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function yi(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!yi(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function Ai(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!Ai(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function Ei(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!Ei(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function wi(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!wi(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function Si(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!Si(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function Ti(e,t,i){var r=0,n=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(r=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(n=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|s))){if(r=d[n+h[i>>2]|0],a=(n=n+1|0)?a:a+1|0,h[i+16>>2]=n,h[i+20>>2]=a,128&r){if(!Ti(e+1|0,t,i))break e;r=127&r|h[t>>2]<<7}h[t>>2]=r,o=1}return o}function xi(e,t,i){var r=0,n=0;e:{t:{if(i>>>0>=4){if(3&(e|t))break t;for(;;){if(h[e>>2]!=h[t>>2])break t;if(t=t+4|0,e=e+4|0,!((i=i-4|0)>>>0>3))break}}if(!i)break e}for(;;){if((0|(r=d[0|e]))==(0|(n=d[0|t]))){if(t=t+1|0,e=e+1|0,i=i-1|0)continue;break e}break}return r-n|0}return 0}function Mi(e){var t=0,i=0,r=0;if(e){if(r=h[e+24>>2]){if((0|(i=h[e+28>>2]))==(0|r))t=r;else{for(;t=h[(i=i-4|0)>>2],h[i>>2]=0,t&&(nr(t+12|0,h[t+16>>2]),fr(t,h[t+4>>2]),be(t)),(0|r)!=(0|i););t=h[e+24>>2]}h[e+28>>2]=r,be(t)}nr(e+12|0,h[e+16>>2]),fr(e,h[e+4>>2]),be(e)}}function Ri(e){var t,i=0,r=0;if(t=h[e>>2]){if((0|t)==(0|(i=h[e+4>>2])))i=t;else{for(;(r=h[i-12>>2])&&(h[i-8>>2]=r,be(r)),(r=h[i-28>>2])&&(h[i-24>>2]=r,be(r)),(r=h[i-40>>2])&&(h[i-36>>2]=r,be(r)),Ii(i-140|0),(0|t)!=(0|(i=i-144|0)););i=h[e>>2]}h[e+4>>2]=t,be(i)}}function Pi(e){var t=0,i=0,r=0;e:{if(3&(t=e))for(;;){if(!d[0|t])break e;if(!(3&(t=t+1|0)))break}for(;i=t,t=t+4|0,!((-1^(r=h[i>>2]))&r-16843009&-2139062144););if(!(255&r))return i-e|0;for(;r=d[i+1|0],i=t=i+1|0,r;);}return t-e|0}function Ci(e){var t,i=0,r=0;if(h[(e|=0)>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,be(i)),t=h[e+8>>2]){if((0|(r=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+8>>2]}h[e+12>>2]=t,be(i)}be(e)}function ki(e,t,i){e|=0,t|=0;var r,n,a,s,o=0,l=0;return(s=h[8+(i|=0)>>2])>>>0>(n=h[i+16>>2])>>>0&(0|(o=a=h[i+12>>2]))>=(0|(r=h[i+20>>2]))|(0|r)<(0|o)&&(t=d[n+h[i>>2]|0],o=(l=n+1|0)?r:r+1|0,h[i+16>>2]=l,h[i+20>>2]=o,h[e+4>>2]=t),n>>>0<s>>>0&(0|r)<=(0|a)|(0|r)<(0|a)}function Oi(e,t,i){var r=0;if(!i)return h[e+4>>2]==h[t+4>>2];if((0|e)==(0|t))return 1;r=h[e+4>>2],e=d[0|r],i=h[t+4>>2];e:if(!(!e|(0|(t=d[0|i]))!=(0|e)))for(;;){if(t=d[i+1|0],!(e=d[r+1|0]))break e;if(i=i+1|0,r=r+1|0,(0|e)!=(0|t))break}return(0|e)==(0|t)}function Di(e,t){var i=0,r=0,n=0,a=0;e:{if(i=h[e>>2],!(h[e+8>>2]-i>>2>>>0>=t>>>0)){if(t>>>0>=1073741824)break e;r=h[e+4>>2],n=(t=mr(n=t<<2))+n|0,a=(r=r-i|0)+t|0,(0|r)>0&&We(t,i,r),h[e+8>>2]=n,h[e+4>>2]=a,h[e>>2]=t,i&&be(i)}return}Zi(1336),x()}function Ni(e){var t=0;e&&((t=h[e+76>>2])&&(h[e+80>>2]=t,be(t)),(t=h[e- -64>>2])&&(h[e+68>>2]=t,be(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),(t=h[e+24>>2])&&(h[e+28>>2]=t,be(t)),(t=h[e+12>>2])&&(h[e+16>>2]=t,be(t)),(t=h[e>>2])&&(h[e+4>>2]=t,be(t)),be(e))}function Ii(e){var t=0;(t=h[e+84>>2])&&(h[e+88>>2]=t,be(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,be(t)),(t=h[e+52>>2])&&(h[e+56>>2]=t,be(t)),(t=h[e+40>>2])&&(h[e+44>>2]=t,be(t)),(t=h[e+28>>2])&&(h[e+32>>2]=t,be(t)),(t=h[e+12>>2])&&be(t),(e=h[e>>2])&&be(e)}function Li(e,t,i){var r,n,a=0,s=0,o=0;for(I=r=(I=n=I-16|0)-16|0,t=t-e>>2;t;)h[r+12>>2]=e,a=t>>>1|0,h[r+12>>2]=h[r+12>>2]+(a<<2),o=(-1^a)+t|0,t=a,a=h[r+12>>2],t=(s=p[a>>2]<p[i>>2])?o:t,e=s?a+4|0:e;return I=r+16|0,I=n+16|0,e}function Ui(e){var t,i=0,r=0;if((0|(i=h[e+4>>2]))!=(0|(t=h[e>>2])))for(;(r=h[i-12>>2])&&(h[i-8>>2]=r,be(r)),(r=h[i-28>>2])&&(h[i-24>>2]=r,be(r)),(r=h[i-40>>2])&&(h[i-36>>2]=r,be(r)),Ii(i-140|0),(0|t)!=(0|(i=i-144|0)););h[e+4>>2]=t}function Vi(e,t,i){var r=0,n=0;e:{if(i>>>0<=10)a[(r=e)+11|0]=i;else{if(i>>>0>4294967279)break e;r=i>>>0>=11?11==(0|(r=(n=i+16&-16)-1|0))?n:r:10,r=mr(n=r+1|0),h[e>>2]=r,h[e+8>>2]=-2147483648|n,h[e+4>>2]=i}return void rn(r,t,i+1|0)}mn(),x()}function Fi(e,t){var i,r;return r=mr(40),h[r>>2]=-1,h[16+(i=r+8|0)>>2]=0,h[i+20>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,Rn[h[h[e>>2]+16>>2]](e,r),e=h[t+88>>2],h[t+88>>2]=r,e&&((t=h[e+8>>2])&&(h[e+12>>2]=t,be(t)),be(e)),1}function Gi(e){var t,i,r=0,n=0,a=0;return a=d[e+12|0],(n=h[e+8>>2])>>>0>4095||(0|(r=h[e+4>>2]))<=0||(r=r-1|0,h[e+4>>2]=r,n=d[r+h[e>>2]|0]|n<<8),r=b(a=0-a&255,n>>>8|0),i=(t=255&n)>>>0<a>>>0,h[e+8>>2]=i?r+t|0:n-(r+a|0)|0,i}function Bi(e,t){return h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2012,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e>>2]=2356,h[e+44>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+60>>2]=t,e}function ji(e,t,i,r){if(t){if((0|r)<0)return 0;!r&h[e+4>>2]-h[e>>2]>>>0>=i>>>0||ai(e,i),i&&At(h[e>>2],t,i)}else{if((0|r)<0)return 0;ai(e,i)}return t=h[e+28>>2],t=(i=h[e+24>>2]+1|0)?t:t+1|0,h[e+24>>2]=i,h[e+28>>2]=t,1}function zi(e){var t=0,i=0,r=0;if(a[h[e>>2]]-48>>>0>=10)return 0;for(;r=h[e>>2],i=-1,t>>>0<=214748364&&(i=(0|(i=a[0|r]-48|0))>(2147483647-(t=b(t,10))|0)?-1:i+t|0),h[e>>2]=r+1,t=i,a[r+1|0]-48>>>0<10;);return t}function Hi(e){var t=0,i=0;(e|=0)&&(t=h[e+88>>2],h[e+88>>2]=0,t&&((i=h[t+8>>2])&&(h[t+12>>2]=i,be(i)),be(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,be(t)),t=h[e+64>>2],h[e+64>>2]=0,t&&((i=h[t>>2])&&(h[t+4>>2]=i,be(i)),be(t)),be(e))}function Wi(e,t){var i,r=0,n=0;if((i=Pi(t))>>>0<4294967280){e:{if(i>>>0>=11)r=mr(n=i+16&-16),h[e+8>>2]=-2147483648|n,h[e>>2]=r,h[e+4>>2]=i;else if(a[e+11|0]=i,r=e,!i)break e;We(r,t,i)}return a[i+r|0]=0,e}mn(),x()}function $i(e,t,i,r){var n,a=0,s=0;return n=(s=t^r)>>31,s>>=31,e=qe((e^=a=t>>31)-a|0,a=(t^a)-((e>>>0<a>>>0)+a|0)|0,(t=i^(e=r>>31))-e|0,(e^r)-((e>>>0>t>>>0)+e|0)|0)^s,L=(n^L)-((e>>>0<s>>>0)+n|0)|0,e-s|0}function Yi(e,t,i){var r,n=0;I=r=I-16|0,(n=2147483647&h[e+8>>2])>>>0>i>>>0?(n=h[e>>2],h[e+4>>2]=i,rn(n,t,i),a[r+15|0]=0,a[i+n|0]=d[r+15|0]):Xt(e,n-1|0,1+(i-n|0)|0,e=h[e+4>>2],e,i,t),I=r+16|0}function Xi(e,t,i,r){var n,a,s,o,l=0,c=0;return o=b(l=i>>>16|0,c=e>>>16|0),l=(65535&(c=((s=b(n=65535&i,a=65535&e))>>>16|0)+b(c,n)|0))+b(l,a)|0,L=(b(t,i)+o|0)+b(e,r)+(c>>>16)+(l>>>16)|0,65535&s|l<<16}function qi(e,t,i){var r;if(!(r=h[e+16>>2]))return h[e+36>>2]=1,h[e+24>>2]=i,void(h[e+16>>2]=t);e:{if((0|t)==(0|r)){if(2!=h[e+24>>2])break e;return void(h[e+24>>2]=i)}a[e+54|0]=1,h[e+24>>2]=2,h[e+36>>2]=h[e+36>>2]+1}}function Zi(e){var t,i,r,n,a;t=0|N(8),h[t>>2]=15156,h[t>>2]=15200,r=mr((i=Pi(e))+13|0),h[r+8>>2]=0,h[r+4>>2]=i,h[r>>2]=i,n=t,a=We(r+12|0,e,i+1|0),h[n+4>>2]=a,h[t>>2]=15248,D(0|t,15280,13),x()}function Ji(e,t,i,r,n){var a;if(I=a=I-256|0,!(73728&n|(0|i)<=(0|r))){if(xt(a,255&t,(r=(i=i-r|0)>>>0<256)?i:256),!r)for(;$r(e,a,256),(i=i-256|0)>>>0>255;);$r(e,a,i)}I=a+256|0}function Ki(e,t,i){var r=0;return(0|(r=e+4|0))==(0|(e=Lt(e,t)))?0:((0|(t=h[e+32>>2]))!=(0|(r=h[e+28>>2]))&&(it(i,t-r|0),We(pr(i),i=h[e+28>>2],h[e+32>>2]-i|0)),(0|t)!=(0|r))}function Qi(e,t){var i,r=0;if(i=h[e+8>>2],e=h[e+12>>2]-i|0)for(r=(e>>=2)>>>0>1?e:1,e=0;;){if(h[h[(e<<2)+i>>2]+60>>2]==(0|t))return e;if((0|r)==(0|(e=e+1|0)))break}return-1}function er(e){var t=0;return t=h[e+72>>2],h[e+72>>2]=t-1|t,8&(t=h[e>>2])?(h[e>>2]=32|t,-1):(h[e+4>>2]=0,h[e+8>>2]=0,t=h[e+44>>2],h[e+28>>2]=t,h[e+20>>2]=t,h[e+16>>2]=t+h[e+48>>2],0)}function tr(e){return h[e+8>>2]=0,h[e+12>>2]=0,h[e>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+28>>2]=9,a[e+24|0]=1,h[e+56>>2]=-1,h[e+60>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,e}function ir(e,t,i){var r;I=r=I-16|0,i>>>0<=10?(a[e+11|0]=i,rn(e,t,i),a[r+15|0]=0,a[e+i|0]=d[r+15|0]):Xt(e,10,i-10|0,e=d[e+11|0],e,i,t),I=r+16|0}function rr(e){var t,i;return(e=(t=h[3902])+(i=e+3&-4)|0)>>>0<=t>>>0&&i||e>>>0>Pn()<<16>>>0&&!(0|C(0|e))?(h[4190]=48,-1):(h[3902]=e,t)}function nr(e,t){t&&(nr(e,h[t>>2]),nr(e,h[t+4>>2]),e=h[t+28>>2],h[t+28>>2]=0,e&&(nr(e+12|0,h[e+16>>2]),fr(e,h[e+4>>2]),be(e)),a[t+27|0]<0&&be(h[t+16>>2]),be(t))}function ar(e){return h[e+40>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=13312,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,u[e+36>>1]=0,e}function sr(e){var t=0;return!h[(e|=0)- -64>>2]|!h[e+68>>2]|!h[e+44>>2]|!h[e+48>>2]||!h[e+52>>2]|!h[e+56>>2]||(t=-1!=h[e+92>>2]),0|t}function or(e){var t=0;return h[(e|=0)>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rn[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),0|e}function lr(e){var t=0;return!h[48+(e|=0)>>2]|!h[e+52>>2]|!h[e+28>>2]|!h[e+32>>2]||!h[e+36>>2]|!h[e+40>>2]||(t=-1!=h[e+76>>2]),0|t}function cr(e){var t=0;return h[(e|=0)>>2]=11900,(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12152,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),0|e}function ur(e){var t=0;h[(e|=0)>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rn[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),be(e)}function hr(e,t){var i=0;return i=-1,-1==(0|t)|(0|t)>4||(t=b(t,12)+e|0,e=h[t+20>>2],(h[t+24>>2]-e|0)<=0||(i=h[e>>2])),i}function dr(e,t,i,r,n,s,o){h[e>>2]=0,h[e+56>>2]=t,h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=s,h[e+44>>2]=o,a[e+32|0]=n,h[e+28>>2]=r,a[e+24|0]=i}function fr(e,t){t&&(fr(e,h[t>>2]),fr(e,h[t+4>>2]),(e=h[t+28>>2])&&(h[t+32>>2]=e,be(e)),a[t+27|0]<0&&be(h[t+16>>2]),be(t))}function pr(e){return(d[e+11|0]>>>7|0?h[e+4>>2]:d[e+11|0])||(Tn(),x()),d[e+11|0]>>>7|0&&(e=h[e>>2]),e}function mr(e){var t=0;e=e||1;e:{for(;;){if(t=F(e))break e;if(!(t=h[4357]))break;Rn[0|t]()}M(),x()}return t}function gr(e,t){t&&(gr(e,h[t>>2]),gr(e,h[t+4>>2]),a[t+39|0]<0&&be(h[t+28>>2]),a[t+27|0]<0&&be(h[t+16>>2]),be(t))}function br(e,t){e|=0;var i=0;switch(0|(t|=0)){case 1:t=1;case 0:h[e+28>>2]=t,i=1}return 0|i}function vr(e){var t,i;return h[(e|=0)>>2]=15200,t=h[e+4>>2]-12|0,i=h[t+8>>2]-1|0,h[t+8>>2]=i,(0|i)<0&&be(t),0|e}function _r(e,t,i){return t|=0,i|=0,h[4+(e|=0)>>2]=t,t=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=t,1}function yr(e){var t=0;return!h[60+(e|=0)>>2]|!h[e+44>>2]|!h[e+48>>2]|!h[e+52>>2]||(t=0!=h[e+56>>2]),0|t}function Ar(e,t){var i,r;ai(e,t),i=t=h[e+28>>2],r=t+1|0,t=h[e+24>>2]+1|0,h[e+24>>2]=t,h[e+28>>2]=t?i:r}function Er(e){var t=0;return!h[52+(e|=0)>>2]|!h[e+44>>2]|!h[e+48>>2]||(t=0!=h[e+56>>2]),0|t}function wr(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|!t|3!=d[t+24|0]||(h[e+60>>2]=t,i=1),0|i}function Sr(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|3!=d[t+24|0]||(h[e- -64>>2]=t,i=1),0|i}function Tr(e){var t=0;(t=h[e+16>>2])&&(h[e+20>>2]=t,be(t)),(t=h[e>>2])&&(h[e+4>>2]=t,be(t))}function xr(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|3!=d[t+24|0]||(h[e+48>>2]=t,i=1),0|i}function Mr(e){var t;h[(e|=0)>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)}function Rr(e){var t;h[e+16>>2]=0,t=h[e>>2],h[e+4>>2]=t,h[e+12>>2]=t,t&&be(t)}function Pr(e,t){t&&(Pr(e,h[t>>2]),Pr(e,h[t+4>>2]),gr(t+20|0,h[t+24>>2]),be(t))}function Cr(e){for(var t=0;e;)e&=e-1,t=t+1|0;return t}function kr(){var e;return e=mr(12),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,0|e}function Or(e){var t=0;(e|=0)&&((t=h[e>>2])&&(h[e+4>>2]=t,be(t)),be(e))}function Dr(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function Nr(e,t,i){h[i+76>>2],e=li(e,t,i)}function Ir(e,t){return t|=0,0|Rn[h[h[(e|=0)>>2]+12>>2]](e,t)}function Lr(e,t){return t|=0,h[h[(e|=0)>>2]+(t<<2)>>2]}function Ur(e){return h[e>>2]=13756,xt(e+4|0,0,80),e}function Vr(e){return e?31-y(e-1^e)|0:32}function Fr(e){return h[12+(e|=0)>>2]-h[e+8>>2]>>2}function Gr(e){(e|=0)&&Rn[h[h[e>>2]+4>>2]](e)}function Br(e,t){return t|=0,h[4+(e|=0)>>2]=t,1}function jr(e){return h[4+(e|=0)>>2]-h[e>>2]>>1}function zr(e){return h[4+(e|=0)>>2]-h[e>>2]>>2}function Hr(e){return h[4+(e|=0)>>2]-h[e>>2]|0}function Wr(e){ar(e),h[e+44>>2]=0,h[e>>2]=11208}function $r(e,t,i){32&d[0|e]||li(t,i,e)}function Yr(e){return h[28+(e|=0)>>2]}function Xr(e){return h[80+(e|=0)>>2]}function qr(e,t){return-1}function Zr(e){return h[4+(e|=0)>>2]}function Jr(e){return h[8+(e|=0)>>2]}function Kr(e,t){return 6}function Qr(e,t){return 1}function en(e,t){return 0}function tn(e){return h[(e|=0)>>2]}function rn(e,t,i){i&&We(e,t,i)}function nn(e){(e|=0)&&be(e)}function an(e){return 0|e}function sn(e){return 3}function on(e){return 4}function ln(e){return 5}function cn(e){return 2}function un(e){return 6}function hn(e){return 1}function dn(e){return 0}function fn(e){be(e|=0)}function pn(){Zi(1276),x()}function mn(){Zi(1323),x()}function gn(e){x()}function bn(){pn(),x()}function vn(){return 3}function _n(){return 4}function yn(){return-1}function An(){return 1}function En(){return 0}function wn(){return 2}function Sn(){Tn(),x()}function Tn(){M(),x()}function xn(e){}n(t=d,1028,"YAQAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAE41ZHJhY28yOEF0dHJpYnV0ZU9jdGFoZWRyb25UcmFuc2Zvcm1FAADYOgAAOAQAAMwHAAAAAAAA0AQAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAAAoAAAAXAAAAGAAAAE41ZHJhY28zMEF0dHJpYnV0ZVF1YW50aXphdGlvblRyYW5zZm9ybUUAAAAA2DoAAKQEAADMBwAALSsgICAwWDB4AF9fbmV4dF9wcmltZSBvdmVyZmxvdwB2ZWN0b3IAc3RkOjpleGNlcHRpb24Ac2tpcF9hdHRyaWJ1dGVfdHJhbnNmb3JtAGJhc2ljX3N0cmluZwBhbGxvY2F0b3I8VD46OmFsbG9jYXRlKHNpemVfdCBuKSAnbicgZXhjZWVkcyBtYXhpbXVtIHN1cHBvcnRlZCBzaXplAERSQUNPAFVzaW5nIGluY29tcGF0aWJsZSBkZWNvZGVyIGZvciB0aGUgaW5wdXQgZ2VvbWV0cnkuAEZhaWxlZCB0byBkZWNvZGUgcG9pbnQgYXR0cmlidXRlcy4ARmFpbGVkIHRvIGluaXRpYWxpemUgdGhlIGRlY29kZXIuAFVua25vd24gbWlub3IgdmVyc2lvbi4AVW5rbm93biBtYWpvciB2ZXJzaW9uLgBJbnB1dCBpcyBub3QgYSBtZXNoLgBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlLgBOb3QgYSBEcmFjbyBmaWxlLgBJbnB1dCBpcyBub3QgYSBwb2ludCBjbG91ZC4AVW5zdXBwb3J0ZWQgZW5jb2RpbmcgbWV0aG9kLgBGYWlsZWQgdG8gZGVjb2RlIG1ldGFkYXRhLgBGYWlsZWQgdG8gZGVjb2RlIGdlb21ldHJ5IGRhdGEuAChudWxsKQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBLZFRyZWVBdHRyaWJ1dGVzRGVjb2RlcjogY29tcHJlc3Npb24gbGV2ZWwgJWkgbm90IHN1cHBvcnRlZC4KAEZsb2F0UG9pbnRzVHJlZURlY29kZXI6IGNvbXByZXNzaW9uIGxldmVsICVpIG5vdCBzdXBwb3J0ZWQuCgBWZXJzaW9uIG5vdCBzdXBwb3J0ZWQuIAoATWV0aG9kIG5vdCBzdXBwb3J0ZWQuIAoATjVkcmFjbzE4QXR0cmlidXRlVHJhbnNmb3JtRQCwOgAArwcAAAAAAABYCAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAATjVkcmFjbzE3QXR0cmlidXRlc0RlY29kZXJFAE41ZHJhY28yNkF0dHJpYnV0ZXNEZWNvZGVySW50ZXJmYWNlRQAAAACwOgAAKAgAANg6AAAMCAAAUAgAAAAAAADACAAAJQAAACYAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAJwAAACgAAAApAAAATjVkcmFjbzIzS2RUcmVlQXR0cmlidXRlc0RlY29kZXJFAAAA2DoAAJwIAABYCAAAAAAAACAJAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAABONWRyYWNvMjZTZXF1ZW50aWFsQXR0cmlidXRlRGVjb2RlckUAAAAAsDoAAPgIAAD/////AAAAAJgJAAAzAAAANAAAABsAAAA1AAAANgAAAB4AAAAfAAAAIAAAADcAAAA4AAAAOQAAADoAAAA7AAAATjVkcmFjbzM3U2VxdWVudGlhbEF0dHJpYnV0ZURlY29kZXJzQ29udHJvbGxlckUA2DoAAGgJAABYCAAAAAAAAAwKAAA8AAAAPQAAAD4AAAAtAAAALgAAAC8AAAA/AAAAMQAAAEAAAABBAAAAQgAAAEMAAABEAAAATjVkcmFjbzMzU2VxdWVudGlhbEludGVnZXJBdHRyaWJ1dGVEZWNvZGVyRQDYOgAA4AkAACAJAAAAAAAAmAwAAEUAAABGAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAUAAAAE41ZHJhY280ME1lc2hQcmVkaWN0aW9uU2NoZW1lUGFyYWxsZWxvZ3JhbURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjNQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQBONWRyYWNvMzdQcmVkaWN0aW9uU2NoZW1lVHlwZWREZWNvZGVySW50ZXJmYWNlSWlpRUUATjVkcmFjbzMyUHJlZGljdGlvblNjaGVtZURlY29kZXJJbnRlcmZhY2VFAE41ZHJhY28yNVByZWRpY3Rpb25TY2hlbWVJbnRlcmZhY2VFALA6AAA8DAAA2DoAABEMAABgDAAA2DoAAN0LAABoDAAA2DoAAIkLAAB0DAAA2DoAAPMKAACADAAA2DoAAFAKAACMDAAAAAAAAIwMAABFAAAAUQAAACIAAABIAAAAIgAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAACIAAAAAAAAAgAwAAEUAAABSAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAAD0DQAARQAAAFMAAABUAAAASAAAAFUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAABWAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUA2DoAAEwNAACMDAAAAAAAAOwOAABXAAAAWAAAAFkAAABIAAAAWgAAAEoAAABLAAAATAAAAE0AAABOAAAAWwAAAFwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAOA4AAIwMAAAAAAAA0A8AAF0AAABeAAAAXwAAAEgAAABgAAAAYQAAAGIAAABjAAAATQAAAE4AAABkAAAAZQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAMA8AAIwMAAAAAAAAvBAAAGYAAABnAAAAaAAAAEgAAABpAAAAagAAAGsAAABsAAAATQAAAE4AAABtAAAAbgAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAANg6AAAUEAAAjAwAAAAAAACoEQAAbwAAAHAAAABxAAAASAAAAHIAAABzAAAAdAAAAHUAAABNAAAATgAAAHYAAAB3AAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAAAARAACMDAAAAAAAADATAAB4AAAAeQAAAHoAAAB7AAAAfAAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQmFzZUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAAAAsDoAAHsSAADYOgAA0BEAACgTAAAAAAAAKBMAAHgAAAB9AAAAIgAAAHsAAAAiAAAAAAAAALwUAABFAAAAfgAAAH8AAABIAAAAgAAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAIEAAABONWRyYWNvNDBNZXNoUHJlZGljdGlvblNjaGVtZVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAADYOgAAJhQAAIAMAADYOgAAkBMAALAUAAAAAAAAsBQAAEUAAACCAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAADUFQAARQAAAIMAAACEAAAASAAAAIUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACGAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAADgVAACwFAAAAAAAAMAWAACHAAAAiAAAAIkAAABIAAAAigAAAEoAAABLAAAATAAAAE0AAABOAAAAiwAAAIwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAAGBYAALAUAAAAAAAAmBcAAI0AAACOAAAAjwAAAEgAAACQAAAAkQAAAJIAAACTAAAATQAAAE4AAACUAAAAlQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAABBcAALAUAAAAAAAAeBgAAJYAAACXAAAAmAAAAEgAAACZAAAAmgAAAJsAAACcAAAATQAAAE4AAACdAAAAngAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAAANg6AADcFwAAsBQAAAAAAABUGQAAnwAAAKAAAAChAAAASAAAAKIAAACjAAAApAAAAKUAAABNAAAATgAAAKYAAACnAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQDYOgAAvBgAALAUAAAAAAAAwBoAAKgAAACpAAAAqgAAAKsAAACsAAAATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JBcmVhSWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFALA6AAAaGgAA2DoAAHwZAAC4GgAAAAAAALgaAACoAAAArQAAACIAAACrAAAAIgAAAAAAAAB8GwAARQAAAK4AAACvAAAASAAAALAAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACxAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQAAAADYOgAAIBsAAIAMAAAAAAAA8BsAALIAAACzAAAAtAAAAC0AAAAuAAAAtQAAAD8AAAAxAAAAQAAAALYAAAC3AAAAuAAAALkAAABONWRyYWNvMzJTZXF1ZW50aWFsTm9ybWFsQXR0cmlidXRlRGVjb2RlckUAANg6AADEGwAADAoAAAAAAAD8HQAAugAAALsAAAC8AAAAvQAAAL4AAAC/AAAAwAAAAMEAAADCAAAAwwAAAMQAAADFAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yM1ByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUA2DoAAIUdAAB0DAAA2DoAAOQcAADkHQAA2DoAADQcAADwHQAAAAAAAJgfAADGAAAAxwAAAMgAAADJAAAAygAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQCwOgAA2h4AANg6AAAkHgAAkB8AAAAAAAAgIQAAywAAAMwAAADNAAAAvQAAAM4AAADPAAAA0AAAANEAAADCAAAAwwAAANIAAADTAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAAH8gAADkHQAA2DoAANwfAAAUIQAAAAAAAKQiAADUAAAA1QAAANYAAADXAAAA2AAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAACwOgAA8SEAANg6AABIIQAAnCIAAAAAAABMIwAA2QAAANoAAADbAAAAvQAAANwAAADdAAAA3gAAAN8AAADCAAAAwwAAAOAAAADhAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRUVFANg6AADoIgAA5B0AAAAAAACAJQAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzI3TWVzaFByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzIzUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUAANg6AAD7JAAAdAwAANg6AABNJAAAaCUAANg6AACQIwAAdCUAAAAAAAA4JwAA7gAAAO8AAADwAAAA8QAAAPIAAABONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckFyZWFJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQAAALA6AABrJgAA2DoAAKglAAAwJwAAAAAAANwoAADzAAAA9AAAAPUAAADlAAAA9gAAAPcAAAD4AAAA+QAAAOoAAADrAAAA+gAAAPsAAABONWRyYWNvNDJNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbERlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAACwoAABoJQAA2DoAAHwnAADQKAAAAAAAAHgqAAD8AAAA/QAAAP4AAAD/AAAAAAEAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQCwOgAAuikAANg6AAAEKQAAcCoAAAAAAAAwKwAA2QAAAAEBAAACAQAA5QAAAAMBAAAEAQAABQEAAAYBAADqAAAA6wAAAAcBAAAIAQAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVFRQAAAADYOgAAvCoAAGglAAAAAAAAtCsAAAkBAAAKAQAACwEAAC0AAAAuAAAADAEAAD8AAAAxAAAAQAAAAA0BAABCAAAAQwAAAA4BAAAPAQAAEAEAAE41ZHJhY28zOFNlcXVlbnRpYWxRdWFudGl6YXRpb25BdHRyaWJ1dGVEZWNvZGVyRQAAAADYOgAAgCsAAAwKAAAAAAAAFCwAABEBAAASAQAAEwEAABQBAAAiAAAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAACIAAABONWRyYWNvMTFNZXNoRGVjb2RlckUAAADYOgAA/CsAAGw0AAAAAAAAgCwAABwBAAAdAQAAEwEAAB4BAAAfAQAAFQEAABYBAAAXAQAAIAEAACEBAAAiAQAAIwEAACQBAABONWRyYWNvMjJNZXNoRWRnZWJyZWFrZXJEZWNvZGVyRQAAAADYOgAAXCwAABQsAAAAAAAApC0AACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAD/////AAAAAAguAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAAAAAAGguAAA5AQAAOgEAADsBAAA8AQAAPQEAAD4BAAA/AQAAQAEAAEEBAABCAQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfMzFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxEZWNvZGVyRUVFAE41ZHJhY28zNU1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSW50ZXJmYWNlRQAAALA6AABsLQAA2DoAACAtAACcLQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfNDFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxQcmVkaWN0aXZlRGVjb2RlckVFRQAAANg6AACwLQAAnC0AAE41ZHJhY28yNk1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSU5TXzM4TWVzaEVkZ2VicmVha2VyVHJhdmVyc2FsVmFsZW5jZURlY29kZXJFRUUAANg6AAAULgAAnC0AAAAAAABkLwAAQwEAAEQBAABFAQAATjVkcmFjbzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMV9FRUVFAE41ZHJhY28xM1RyYXZlcnNlckJhc2VJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQCwOgAA9S4AANg6AACILgAAXC8AAAAAAABcLwAARgEAAEcBAABFAQ=="),n(t,12180,"AQAAAAMAAAAFAAAABwAAAAAAAABoMAAASAEAAEkBAABKAQAASwEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAE41ZHJhY28xNVBvaW50c1NlcXVlbmNlckUAAAAAsDoAAEMwAADYOgAAvC8AAGAwAAD/////AAAAAFgxAABMAQAATQEAAE4BAABONWRyYWNvMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQBONWRyYWNvMTNUcmF2ZXJzZXJCYXNlSU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQAAsDoAAPUwAADYOgAAjDAAAFAxAAAAAAAAUDEAAE8BAABQAQAATgEAAAAAAAAQMgAAUQEAAFIBAABTAQAAVAEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAAAA2DoAAJAxAABgMAAAAAAAAJAyAABVAQAAVgEAAE4BAABONWRyYWNvMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQDYOgAAMDIAAFAxAAAAAAAAQDMAAFcBAABYAQAAWQEAAFoBAABONWRyYWNvMjJNZXNoVHJhdmVyc2FsU2VxdWVuY2VySU5TXzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMl9FRUVFRUUAANg6AAC0MgAAYDA="),n(t,13140,"rDMAABEBAABbAQAAEwEAABQBAABcAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAAF0BAABONWRyYWNvMjFNZXNoU2VxdWVudGlhbERlY29kZXJFANg6AACMMwAAFCwAAAAAAADsMwAAXgEAAF8BAABgAQAAYQEAAE41ZHJhY28xNUxpbmVhclNlcXVlbmNlckUAAADYOgAA0DMAAGAwAAAAAAAAbDQAABEBAABiAQAAYwEAABQBAAAiAAAAZAEAABYBAAAXAQAAGAE="),n(t,13360,"RmFpbGVkIHRvIHBhcnNlIERyYWNvIGhlYWRlci4ATjVkcmFjbzE3UG9pbnRDbG91ZERlY29kZXJFAAAAsDoAAE40AAAAAAAAxDQAABEBAABlAQAAYwEAABQBAABmAQAAZwEAABYBAAAXAQAAGAEAAE41ZHJhY28yM1BvaW50Q2xvdWRLZFRyZWVEZWNvZGVyRQAAANg6AACgNAAAbDQAAAAAAAAkNQAAEQEAAGgBAABjAQAAFAEAAGkBAABqAQAAFgEAABcBAAAYAQAATjVkcmFjbzI3UG9pbnRDbG91ZFNlcXVlbnRpYWxEZWNvZGVyRQAAANg6AAD8NAAAbDQAAAEAAAABAAAAAgAAAAIAAAAEAAAABAAAAAgAAAAIAAAABAAAAAgAAAAB"),n(t,13667,"wAAAAMAAAADAAAAAwP//////////AAAAAKA1AABrAQAAbAEAAG0BAABuAQAATjVkcmFjbzRNZXNoRQAAANg6AACQNQAA5DUAAP////8AAAAAAAAAAOQ1AABvAQAAcAEAAHEBAAByAQAATjVkcmFjbzEwUG9pbnRDbG91ZEUAAAAAsDoAAMw1AADYOwAAGQAKABkZGQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAAZABEKGRkZAwoHAAEACQsYAAAJBgsAAAsABhkAAAAZGRk="),n(t,13889,"DgAAAAAAAAAAGQAKDRkZGQANAAACAAkOAAAACQAOAAAO"),n(t,13947,"DA=="),n(t,13959,"EwAAAAATAAAAAAkMAAAAAAAMAAAM"),n(t,14005,"EA=="),n(t,14017,"DwAAAAQPAAAAAAkQAAAAAAAQAAAQ"),n(t,14063,"Eg=="),n(t,14075,"EQAAAAARAAAAAAkSAAAAAAASAAASAAAaAAAAGhoa"),n(t,14130,"GgAAABoaGgAAAAAAAAk="),n(t,14179,"FA=="),n(t,14191,"FwAAAAAXAAAAAAkUAAAAAAAUAAAU"),n(t,14237,"Fg=="),n(t,14249,"FQAAAAAVAAAAAAkWAAAAAAAWAAAWAAAwMTIzNDU2Nzg5QUJDREVGAAAAAAIAAAADAAAABQAAAAcAAAALAAAADQAAABEAAAATAAAAFwAAAB0AAAAfAAAAJQAAACkAAAArAAAALwAAADUAAAA7AAAAPQAAAEMAAABHAAAASQAAAE8AAABTAAAAWQAAAGEAAABlAAAAZwAAAGsAAABtAAAAcQAAAH8AAACDAAAAiQAAAIsAAACVAAAAlwAAAJ0AAACjAAAApwAAAK0AAACzAAAAtQAAAL8AAADBAAAAxQAAAMcAAADTAAAAAQAAAAsAAAANAAAAEQAAABMAAAAXAAAAHQAAAB8AAAAlAAAAKQAAACsAAAAvAAAANQAAADsAAAA9AAAAQwAAAEcAAABJAAAATwAAAFMAAABZAAAAYQAAAGUAAABnAAAAawAAAG0AAABxAAAAeQAAAH8AAACDAAAAiQAAAIsAAACPAAAAlQAAAJcAAACdAAAAowAAAKcAAACpAAAArQAAALMAAAC1AAAAuwAAAL8AAADBAAAAxQAAAMcAAADRAAAAMDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTk="),n(t,14884,"CgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUAypo7TjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAA2DoAAEg6AADMOwAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAA2DoAAHg6AABsOgAAAAAAAJw6AAB4AQAAeQEAAHoBAAB7AQAAfAEAAH0BAAB+AQAAfwEAAAAAAAAgOwAAeAEAAIABAAB6AQAAewEAAHwBAACBAQAAggEAAIMBAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAA2DoAAPg6AACcOgAAAAAAAFA7AACEAQAAhQEAAIYBAABTdDlleGNlcHRpb24AAAAAsDoAAEA7AAAAAAAAfDsAAA0AAACHAQAAiAEAAFN0MTFsb2dpY19lcnJvcgDYOgAAbDsAAFA7AAAAAAAAsDsAAA0AAACJAQAAiAEAAFN0MTJsZW5ndGhfZXJyb3IAAAAA2DoAAJw7AAB8OwAAU3Q5dHlwZV9pbmZvAAAAALA6AAC8Ow=="),n(t,15320,"BQ=="),n(t,15332,"cwE="),n(t,15356,"dAEAAHUBAABoPQ=="),n(t,15380,"Ag=="),n(t,15396,"//////////8="),n(t,15464,"BQ=="),n(t,15476,"dgE="),n(t,15500,"dAEAAHcBAAB4PQAAAAQ="),n(t,15524,"AQ=="),n(t,15540,"/////wo="),n(t,15608,"IERQ");var Mn,Rn=(Mn=[null,an,fn,cn,function(e,t){e|=0;var i=0;return!(t=h[88+(t|=0)>>2])|2!=h[t>>2]||(i=e,e=h[t+8>>2],h[i+4>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,i=1),0|i},function(e,t){e|=0;var i,r=0;h[(t|=0)>>2]=2,r=h[t+8>>2],(i=h[t+12>>2]-r|0)>>>0<=4294967291&&(Ar(t+8|0,i+4|0),r=h[t+8>>2]),t=r+i|0,e=h[e+4>>2],a[0|t]=e,a[t+1|0]=e>>>8,a[t+2|0]=e>>>16,a[t+3|0]=e>>>24},function(e,t,i,r){e|=0,t|=0,i|=0;var n,a=0,s=0,o=0,l=0,c=0,u=0,f=0;if(o=h[80+(r|=0)>>2],I=n=I-48|0,!((e=h[e+4>>2])-31>>>0<4294967267))if(l=h[h[r>>2]>>2]+h[r+48>>2]|0,h[n+16>>2]=e,e=-1<<e,h[n+20>>2]=-1^e,e=-2-e|0,h[n+24>>2]=e,h[n+32>>2]=(0|e)/2,m[n+28>>2]=v(2)/v(0|e),(0|(s=h[i>>2]))==h[i+4>>2])if(o)for(r=0,e=0;c=n+36|0,i=h[h[t>>2]>>2],a=h[t+40>>2],We(c,i+(s=h[t+48>>2]+Xi(a,h[t+44>>2],d[t+84|0]?e:h[h[t+68>>2]+(e<<2)>>2],0)|0)|0,a),ut(n+16|0,c,n+12|0,n+8|0),h[(i=r<<2)+l>>2]=h[n+12>>2],h[(4|i)+l>>2]=h[n+8>>2],r=r+2|0,a=1,(0|o)!=(0|(e=e+1|0)););else a=1;else for(e=0,r=0;a=h[(r<<2)+s>>2],o=n+36|0,c=h[h[t>>2]>>2],f=h[t+48>>2],s=h[t+44>>2],u=h[t+40>>2],d[t+84|0]||(a=h[h[t+68>>2]+(a<<2)>>2]),We(o,(a=Xi(u,s,a,0)+f|0)+c|0,u),ut(n+16|0,o,n+12|0,n+8|0),h[(s=e<<2)+l>>2]=h[n+12>>2],h[(4|s)+l>>2]=h[n+8>>2],a=1,e=e+2|0,r=r+1|0,s=h[i>>2],r>>>0<h[i+4>>2]-s>>2>>>0;);return I=n+48|0,0|a},ht,function(e,t){t|=0;var i,r=0;return I=i=I-16|0,-1!=(0|(e=h[4+(e|=0)>>2]))&&(a[i+15|0]=e,r=h[t+20>>2],!!h[t+16>>2]&(0|r)>=0|(0|r)>0||Le(t,h[t+4>>2],i+15|0,i+16|0)),I=i+16|0,-1!=(0|e)|0},ki,function(e,t,i){var r,n,s,o,l,c;return t|=0,i|=0,I=r=I+-64|0,n=0|Rn[h[h[(e|=0)>>2]+44>>2]](e,t),e=0|Rn[h[h[e>>2]+40>>2]](e,t),s=tr(r),o=h[t+56>>2],l=n<<24>>24,c=e,e=(e=e-1|0)>>>0<=10?h[13616+(e<<2)>>2]:-1,dr(s,o,l,c,0,e=b(e,n),e>>31),Dt(e=It(mr(96),s),i),a[e+84|0]=1,h[e+72>>2]=h[e+68>>2],h[e+60>>2]=h[t+60>>2],I=r- -64|0,0|e},Kr,function(e,t){return 2},vr,function(e){var t;return h[(e|=0)>>2]=1140,(t=h[e+8>>2])&&(h[e+12>>2]=t,be(t)),0|e},function(e){var t;h[(e|=0)>>2]=1140,(t=h[e+8>>2])&&(h[e+12>>2]=t,be(t)),be(e)},hn,function(e,t){e|=0;var i=0,r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;if(!(!(i=h[88+(t|=0)>>2])|1!=h[i>>2])){if(r=h[i+8>>2],h[e+4>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,r=a[t+24|0],n=h[e+8>>2],r>>>0>(s=h[e+12>>2]-n>>2)>>>0?(ei(e+8|0,r-s|0),r=a[t+24|0],n=h[e+8>>2]):r>>>0>=s>>>0||(h[e+12>>2]=(r<<2)+n),f=1,s=h[i+8>>2],(0|r)<=0)t=4;else{if(l=3&r,r-1>>>0<3)t=4,r=0;else for(p=-4&r,r=0,t=4;i=t+s|0,h[(o=r<<2)+n>>2]=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[(4|o)+n>>2]=d[i+4|0]|d[i+5|0]<<8|d[i+6|0]<<16|d[i+7|0]<<24,h[(8|o)+n>>2]=d[i+8|0]|d[i+9|0]<<8|d[i+10|0]<<16|d[i+11|0]<<24,h[(12|o)+n>>2]=d[i+12|0]|d[i+13|0]<<8|d[i+14|0]<<16|d[i+15|0]<<24,r=r+4|0,t=t+16|0,(0|p)!=(0|(c=c+4|0)););if(l)for(;i=t+s|0,h[(r<<2)+n>>2]=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,r=r+1|0,t=t+4|0,(0|(u=u+1|0))!=(0|l););}i=e,e=t+s|0,h[i+20>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24}return 0|f},function(e,t){e|=0;var i,r=0,n=0,s=0,o=0;if(h[(t|=0)>>2]=1,i=t+8|0,r=h[t+8>>2],(n=h[t+12>>2]-r|0)>>>0<=4294967291&&(Ar(i,n+4|0),r=h[i>>2]),r=r+n|0,n=h[e+4>>2],a[0|r]=n,a[r+1|0]=n>>>8,a[r+2|0]=n>>>16,a[r+3|0]=n>>>24,(0|(r=h[e+8>>2]))!=h[e+12>>2])for(n=0;o=(n<<2)+r|0,r=h[t+8>>2],(s=h[t+12>>2]-r|0)>>>0<=4294967291&&(Ar(i,s+4|0),r=h[i>>2]),r=r+s|0,s=h[o>>2],a[0|r]=s,a[r+1|0]=s>>>8,a[r+2|0]=s>>>16,a[r+3|0]=s>>>24,n=n+1|0,r=h[e+8>>2],n>>>0<h[e+12>>2]-r>>2>>>0;);(r=(r=h[t+12>>2])-(t=h[t+8>>2])|0)>>>0<=4294967291&&(Ar(i,r+4|0),t=h[i>>2]),t=t+r|0,e=h[e+20>>2],a[0|t]=e,a[t+1|0]=e>>>8,a[t+2|0]=e>>>16,a[t+3|0]=e>>>24},function(e,t,i,r){e|=0,t|=0,i|=0,r|=0;var n,s=v(0),o=0,l=0,c=0,u=0,f=0,p=v(0),g=0,b=0,y=0,A=0,E=0,S=0,T=0,x=0,M=0,R=0,P=0,C=0,k=0,O=0;if(h[i>>2]==h[i+4>>2]){if(l=h[r+80>>2],I=R=I-16|0,f=h[e+4>>2],c=h[r+48>>2],r=h[h[r>>2]>>2],u=a[t+24|0],h[(i=R+8|0)>>2]=1065353216,M=i,m[i>>2]=v(-1<<f^-1)/m[e+20>>2],P=mr((0|u)!=(1073741823&u)?-1:u<<2),!(!l|(0|u)<=0))if(T=r+c|0,k=h[t>>2],i=h[t+48>>2],O=h[t+44>>2],C=h[t+40>>2],d[t+84|0])for(y=-2&u,x=1&u,t=0;;){if(E=We(P,(c=h[k>>2])+(r=Xi(C,O,A,o)+i|0)|0,C),p=m[M>>2],g=h[e+8>>2],r=0,b=0,1!=(0|u))for(;c=T+(t<<2)|0,s=v(w(v(v(p*v(m[(S=r<<2)+E>>2]-m[g+S>>2]))+v(.5)))),f=v(_(s))<v(2147483648)?~~s:-2147483648,h[c>>2]=f,s=v(w(v(v(p*v(m[(f=4|S)+E>>2]-m[g+f>>2]))+v(.5)))),f=v(_(s))<v(2147483648)?~~s:-2147483648,h[c+4>>2]=f,r=r+2|0,t=t+2|0,(0|y)!=(0|(b=b+2|0)););if(x&&(c=T+(t<<2)|0,s=v(w(v(v(p*v(m[(r<<=2)+E>>2]-m[r+g>>2]))+v(.5)))),r=v(_(s))<v(2147483648)?~~s:-2147483648,h[c>>2]=r,t=t+1|0),A=r=A+1|0,!((0|l)!=(0|r)|(o=r?o:o+1|0)))break}else for(y=h[t+68>>2],x=-2&u,f=1&u,t=0;;){if(E=We(P,(o=h[k>>2])+(r=Xi(C,O,h[y+(A<<2)>>2],0)+i|0)|0,C),p=m[M>>2],g=h[e+8>>2],r=0,b=0,1!=(0|u))for(;o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(S=r<<2)+E>>2]-m[g+S>>2]))+v(.5)))),c=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=c,s=v(w(v(v(p*v(m[(c=4|S)+E>>2]-m[g+c>>2]))+v(.5)))),c=v(_(s))<v(2147483648)?~~s:-2147483648,h[o+4>>2]=c,r=r+2|0,t=t+2|0,(0|x)!=(0|(b=b+2|0)););if(f&&(o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(r<<=2)+E>>2]-m[r+g>>2]))+v(.5)))),r=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=r,t=t+1|0),(0|l)==(0|(A=A+1|0)))break}return be(P),I=R+16|0,1}if(I=R=I-16|0,M=h[e+4>>2],l=h[r+48>>2],o=h[h[r>>2]>>2],n=a[t+24|0],h[(r=R+8|0)>>2]=1065353216,c=r,m[r>>2]=v(-1<<M^-1)/m[e+20>>2],P=mr((0|n)!=(1073741823&n)?-1:n<<2),k=h[i>>2],!(!(i=h[i+4>>2]-k|0)|(0|n)<=0))if(T=o+l|0,O=h[t>>2],r=h[t+48>>2],C=h[t+44>>2],A=h[t+40>>2],S=(i>>=2)>>>0>1?i:1,d[t+84|0])for(f=-2&n,M=1&n,t=0;;){if(g=We(P,(o=h[O>>2])+(i=Xi(A,C,h[k+(b<<2)>>2],0)+r|0)|0,A),p=m[c>>2],y=h[e+8>>2],i=0,u=0,1!=(0|n))for(;o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(x=i<<2)+g>>2]-m[y+x>>2]))+v(.5)))),l=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=l,s=v(w(v(v(p*v(m[(l=4|x)+g>>2]-m[y+l>>2]))+v(.5)))),l=v(_(s))<v(2147483648)?~~s:-2147483648,h[o+4>>2]=l,i=i+2|0,t=t+2|0,(0|f)!=(0|(u=u+2|0)););if(M&&(o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(i<<=2)+g>>2]-m[i+y>>2]))+v(.5)))),i=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=i,t=t+1|0),(0|S)==(0|(b=b+1|0)))break}else for(x=h[t+68>>2],f=-2&n,M=1&n,t=0;;){if(E=We(P,(o=h[O>>2])+(i=Xi(A,C,h[x+(h[k+(b<<2)>>2]<<2)>>2],0)+r|0)|0,A),p=m[c>>2],g=h[e+8>>2],i=0,u=0,1!=(0|n))for(;o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(y=i<<2)+E>>2]-m[g+y>>2]))+v(.5)))),l=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=l,s=v(w(v(v(p*v(m[(l=4|y)+E>>2]-m[g+l>>2]))+v(.5)))),l=v(_(s))<v(2147483648)?~~s:-2147483648,h[o+4>>2]=l,i=i+2|0,t=t+2|0,(0|f)!=(0|(u=u+2|0)););if(M&&(o=T+(t<<2)|0,s=v(w(v(v(p*v(m[(i<<=2)+E>>2]-m[i+g>>2]))+v(.5)))),i=v(_(s))<v(2147483648)?~~s:-2147483648,h[o>>2]=i,t=t+1|0),(0|S)==(0|(b=b+1|0)))break}return be(P),I=R+16|0,1},et,function(e,t){t|=0;var i,r,n=0,s=0;return I=i=I-16|0,-1!=(0|(r=h[4+(e|=0)>>2]))&&(n=h[t+20>>2],!!h[t+16>>2]&(0|n)>=0|(0|n)>0||(Le(t,h[t+4>>2],h[e+8>>2],h[e+12>>2]),n=h[t+20>>2],!!h[t+16>>2]&(0|n)>=0|(0|n)>0||(n=e+20|0,Le(t,h[t+4>>2],n,n+4|0),n=h[t+20>>2],s=h[t+16>>2],a[i+15|0]=h[e+4>>2],!!s&(0|n)>=0|(0|n)>0||Le(t,h[t+4>>2],i+15|0,i+16|0)))),I=i+16|0,-1!=(0|r)|0},at,Kr,function(e,t){return a[24+(t|=0)|0]},function(e){var t=0;return h[(e|=0)>>2]=2012,(t=h[e+16>>2])&&(h[e+20>>2]=t,be(t)),(t=h[e+4>>2])&&(h[e+8>>2]=t,be(t)),0|e},gn,function(e,t,i){return t|=0,i|=0,h[32+(e|=0)>>2]=i,h[e+28>>2]=t,1},Me,function(e,t){t|=0;var i=0;return 0|Rn[h[h[(e|=0)>>2]+36>>2]](e,t)&&0|Rn[h[h[e>>2]+40>>2]](e,t)&&(i=0|Rn[h[h[e>>2]+44>>2]](e)),0|i},function(e,t){return t|=0,h[h[4+(e|=0)>>2]+(t<<2)>>2]},function(e){return h[8+(e|=0)>>2]-h[e+4>>2]>>2},Yr,en,Tn,Qr,hn,$t,function(e){be($t(e|=0))},function(e,t){e|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0;I=i=I-704|0,v=1;e:{t:{i:{if(!(f[38+(t|=0)>>1]<515||(v=0,(0|(r=h[t+20>>2]))>=(0|(s=h[t+12>>2]))&(n=h[t+16>>2])>>>0>=p[t+8>>2]|(0|r)>(0|s)))){if(y=d[n+h[t>>2]|0],r=(n=n+1|0)?r:r+1|0,h[t+16>>2]=n,h[t+20>>2]=r,_=h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+80>>2],r=0|Rn[h[h[e>>2]+24>>2]](e),h[i+696>>2]=0,h[i+688>>2]=0,h[i+692>>2]=0,r){if(r>>>0>=214748365)break i;n=mr(r=b(r,20)),h[i+688>>2]=n,h[i+696>>2]=r+n,E=i,w=xt(n,0,r=b((r-20>>>0)/20|0,20)+20|0)+r|0,h[E+692>>2]=w}r:{if((0|Rn[h[h[e>>2]+24>>2]](e))>0)for(;;){if(r=0|Rn[h[h[e>>2]+20>>2]](e,g),Dt(s=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],_),a[s+84|0]=1,h[s+72>>2]=h[s+68>>2],(r=h[s+28>>2])>>>0>9)break r;n:{a:{s:{if(!(42&(n=1<<r))){if(84&n)break n;if(9!=(0|r))break r;if(r=a[s+24|0],n=tr(i),o=r,r=b(r,h[3409]),dr(n,h[s+56>>2],o,6,0,r,r>>31),r=It(s=mr(96),n),h[i+656>>2]=s,a[r+84|0]=1,h[r+72>>2]=h[r+68>>2],Dt(r,_),(r=h[e+64>>2])>>>0>=p[e+68>>2])break s;n=h[i+656>>2],h[i+656>>2]=0,h[r>>2]=n,n=r+4|0,h[e+64>>2]=n;break a}if(n=0,a[s+24|0]<=0)break n;for(;;){if((r=h[e+52>>2])>>>0<(o=h[e+56>>2])>>>0)h[r>>2]=0,h[e+52>>2]=r+4;else{if((r=1+(u=(m=r-(l=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(A=u<<2,u=(o=o-l|0)>>1,o=o>>>0<2147483644?r>>>0>u>>>0?r:u:1073741823){if(o>>>0>=1073741824)break e;r=mr(o<<2)}else r=0;h[(u=A+r|0)>>2]=0,(0|m)>0&&We(r,l,m),h[e+56>>2]=r+(o<<2),h[e+52>>2]=u+4,h[e+48>>2]=r,l&&be(l)}if(!((0|(n=n+1|0))<a[s+24|0]))break}break n}n=0;s:{o:{l:{if(s=h[e+60>>2],(r=1+(l=h[e+64>>2]-s>>2)|0)>>>0<1073741824){if(o=(s=h[e+68>>2]-s|0)>>1,s=s>>>0<2147483644?r>>>0>o>>>0?r:o:1073741823){if(s>>>0>=1073741824)break l;n=mr(s<<2)}if(o=h[i+656>>2],h[i+656>>2]=0,h[(r=(l<<2)+n|0)>>2]=o,l=(s<<2)+n|0,o=r+4|0,(0|(n=h[e+64>>2]))==(0|(s=h[e+60>>2])))break o;for(;m=h[(n=n-4|0)>>2],h[n>>2]=0,h[(r=r-4|0)>>2]=m,(0|n)!=(0|s););if(h[e+68>>2]=l,n=h[e+64>>2],h[e+64>>2]=o,s=h[e+60>>2],h[e+60>>2]=r,(0|n)==(0|s))break s;for(;r=h[(n=n-4|0)>>2],h[n>>2]=0,r&&Hi(r),(0|n)!=(0|s););break s}bn(),x()}Zi(1336),x()}h[e+68>>2]=l,h[e+64>>2]=o,h[e+60>>2]=r}s&&be(s),n=h[e+64>>2]}s=h[n-4>>2],r=h[i+656>>2],h[i+656>>2]=0,r&&Hi(r)}if(n=(r=(l=h[s+28>>2])-1|0)>>>0<=10?h[13616+(r<<2)>>2]:-1,r=h[i+688>>2]+b(g,20)|0,o=a[s+24|0],h[r+16>>2]=o,h[r+12>>2]=(0|n)>0?n:0,h[r+8>>2]=l,h[r+4>>2]=c,h[r>>2]=s,c=o+c|0,g=g+1|0,!((0|Rn[h[h[e>>2]+24>>2]](e))>(0|g)))break}e=yt(i+656|0,i+688|0);n:{a:{s:switch(0|y){case 0:if(t=j(r=Ze(i,c),t,e),Yt(r),t)break a;break n;case 1:if(t=z(r=Ze(i,c),t,e),Yt(r),t)break a;break n;case 2:if(t=H(r=Xe(i,c),t,e),Zt(r),t)break a;break n;case 3:if(t=$(r=Xe(i,c),t,e),Zt(r),t)break a;break n;case 4:if(t=W(r=J(i,c),t,e),qt(r),t)break a;break n;case 5:if(t=Y(r=J(i,c),t,e),qt(r),t)break a;break n;case 6:break s;default:break n}if(t=X(r=J(i,c),t,e),qt(r),!t)break n}v=1}(t=h[e+16>>2])&&(h[e+20>>2]=t,be(t)),(t=h[e>>2])&&(h[e+4>>2]=t,be(t))}(e=h[i+688>>2])&&(h[i+692>>2]=e,be(e))}return I=i+704|0,0|v}bn(),x()}bn(),x()}Zi(1336),x()},function(e,t){e|=0,t|=0;var i,r,n=0,l=0,c=0,u=0,g=0,_=0,y=0,A=0,E=0,w=0,S=0,T=v(0),M=0,R=0,P=0;I=i=I-720|0;e:{t:{i:{r:{n:{a:{s:{o:{if(f[t+38>>1]>=515){if(h[i+680>>2]=0,h[i+672>>2]=0,h[i+676>>2]=0,(0|Rn[h[h[e>>2]+24>>2]](e))<=0)break r;for(;;){if(n=0|Rn[h[h[e>>2]+20>>2]](e,A),l=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],9==h[l+28>>2]){if(c=h[i+672>>2],(n=h[i+676>>2]-c>>2)>>>0<(u=a[l+24|0])>>>0?ei(i+672|0,u-n|0):n>>>0<=u>>>0||(h[i+676>>2]=c+(u<<2)),g=0,n=h[t+20>>2],_=(y=h[t+16>>2])+(l=u<<2)|0,c=h[t+12>>2],n=l>>>0>_>>>0?n+1|0:n,_>>>0>p[t+8>>2]&(0|c)<=(0|n)|(0|n)>(0|c))break t;if(We(h[i+672>>2],y+h[t>>2]|0,l),n=h[t+20>>2],n=(c=l+h[t+16>>2]|0)>>>0<l>>>0?n+1|0:n,h[t+16>>2]=c,h[t+20>>2]=n,y=E=h[t+12>>2],l=(_=c+4|0)>>>0<4?n+1|0:n,(w=h[t+8>>2])>>>0<_>>>0&(0|l)>=(0|y)|(0|l)>(0|y))break t;if(S=h[t>>2],y=d[0|(y=S+c|0)]|d[y+1|0]<<8|d[y+2|0]<<16|d[y+3|0]<<24,h[t+16>>2]=_,h[t+20>>2]=l,(0|l)>=(0|E)&_>>>0>=w>>>0|(0|l)>(0|E))break t;if(l=d[_+S|0],n=(c=c+5|0)>>>0<5?n+1|0:n,h[t+16>>2]=c,h[t+20>>2]=n,l>>>0>31)break t;if(r=y,s[2]=r,T=o[2],h[i+20>>2]=-1,h[i+16>>2]=1140,h[i+32>>2]=0,h[i+36>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,n=i+16|0,c=h[i+672>>2],(_=l-1|0)>>>0<=29&&(h[n+4>>2]=l,Bt(n+8|0,c,c+(u<<2)|0),m[n+20>>2]=T),!(_>>>0>=30)&&Fi(i+16|0,h[h[e+60>>2]+((h[e+40>>2]-h[e+36>>2]|0)/24<<2)>>2])){if((0|(n=h[e+40>>2]))==h[e+44>>2]){n=0;l:{c:{u:{h:{if((l=1+(c=((u=h[e+40>>2])-(g=h[e+36>>2])|0)/24|0)|0)>>>0<178956971){if(y=(_=(h[e+44>>2]-g|0)/24|0)<<1,_=_>>>0<89478485?l>>>0>y>>>0?l:y:178956970){if(_>>>0>=178956971)break h;n=mr(b(_,24))}if(c=b(c,24)+n|0,h[c>>2]=1140,l=h[i+20>>2],h[c+16>>2]=0,h[c+8>>2]=0,h[c+12>>2]=0,h[c+4>>2]=l,E=h[i+24>>2],l=h[i+28>>2]-E|0){if((0|l)<0)break u;y=mr(l),h[c+8>>2]=y,h[c+16>>2]=y+(l>>2<<2),R=c,P=We(y,E,l)+l|0,h[R+12>>2]=P}if(n=b(_,24)+n|0,m[c+20>>2]=m[i+36>>2],l=c+24|0,(0|u)==(0|g))break c;for(;h[(c=c-24|0)>>2]=1140,h[c+4>>2]=h[u-20>>2],_=u-16|0,h[c+8>>2]=h[_>>2],h[c+12>>2]=h[u-12>>2],y=u-8|0,h[c+16>>2]=h[y>>2],h[y>>2]=0,h[_>>2]=0,h[_+4>>2]=0,m[c+20>>2]=m[u-4>>2],(0|g)!=(0|(u=u-24|0)););if(h[e+44>>2]=n,g=h[e+40>>2],h[e+40>>2]=l,u=h[e+36>>2],h[e+36>>2]=c,(0|u)==(0|g))break l;for(;Rn[h[h[(g=g-24|0)>>2]>>2]](g),(0|u)!=(0|g););break l}bn(),x()}Zi(1336),x()}bn(),x()}h[e+44>>2]=n,h[e+40>>2]=l,h[e+36>>2]=c}u&&be(u)}else{if(h[n>>2]=1140,l=h[i+20>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,h[n+4>>2]=l,u=h[i+28>>2]-h[i+24>>2]|0){if((0|u)<0)break o;l=mr(u),h[n+8>>2]=l,h[n+12>>2]=l,h[n+16>>2]=l+(u>>2<<2),c=h[i+24>>2],(0|(u=h[i+28>>2]-c|0))>0&&(l=We(l,c,u)+u|0),h[n+12>>2]=l}m[n+20>>2]=m[i+36>>2],h[e+40>>2]=n+24}g=1}if(h[i+16>>2]=1140,(n=h[i+24>>2])&&(h[i+28>>2]=n,be(n)),!g)break i}if(A=A+1|0,!((0|Rn[h[h[e>>2]+24>>2]](e))>(0|A)))break}break r}if(_=0|Rn[h[h[e>>2]+24>>2]](e),h[i+712>>2]=0,h[i+704>>2]=0,h[i+708>>2]=0,_){if(_>>>0>=214748365)break s;for(l=mr(n=b(_,20)),h[i+704>>2]=l,h[i+712>>2]=n+l,R=i,P=xt(l,0,n=b((n-20>>>0)/20|0,20)+20|0)+n|0,h[R+708>>2]=P;;){if(n=0|Rn[h[h[e>>2]+20>>2]](e,A),l=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],(y=(0|(n=(n=(u=h[l+28>>2])-1|0)>>>0<=10?h[13616+(n<<2)>>2]:-1))>0?n:0)>>>0>4)break n;if(n=h[i+704>>2]+b(A,20)|0,E=a[l+24|0],h[n+16>>2]=E,h[n+12>>2]=y,h[n+8>>2]=u,h[n+4>>2]=c,h[n>>2]=l,c=c+E|0,(0|_)==(0|(A=A+1|0)))break}}if(n=0|Rn[h[h[e>>2]+20>>2]](e,0),w=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],a[w+84|0]=1,h[w+72>>2]=h[w+68>>2],(0|(n=u=h[t+12>>2]))<=(0|(l=h[t+20>>2]))&(y=h[t+8>>2])>>>0<=(A=h[t+16>>2])>>>0|(0|n)<(0|l))break n;S=h[t>>2],M=d[S+A|0],n=l,n=(E=A+1|0)?n:n+1|0,h[t+16>>2]=E,h[t+20>>2]=n;l:switch(0|M){case 0:if(!(y>>>0<=E>>>0&(0|n)>=(0|u)|(0|n)>(0|u)||(n=l,n=(e=A+2|0)>>>0<2?n+1|0:n,h[t+16>>2]=e,h[t+20>>2]=n,n=l,(l=A+6|0)>>>0>y>>>0&(0|(n=l>>>0<6?n+1|0:n))>=(0|u)|(0|n)>(0|u)))){e=d[0|(e=e+S|0)]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n,Dt(w,e),h[20+(g=i+672|0)>>2]=0,h[g+12>>2]=0,h[g+16>>2]=0,h[g>>2]=0,h[g+4>>2]=0,h[g+20>>2]=e,A=yt(i+16|0,i+704|0),u=0,I=c=I-32|0,h[c+24>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,y=e=h[t+12>>2],l=n=h[t+20>>2],n=(_=(E=h[t+16>>2])+4|0)>>>0<4?n+1|0:n;c:if(!((w=h[t+8>>2])>>>0<_>>>0&(0|e)<=(0|n)|(0|e)<(0|n))){S=h[t>>2],e=d[0|(e=S+E|0)]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[t+16>>2]=_,h[t+20>>2]=n;u:{switch(e-2|0){case 1:if((0|n)>=(0|y)&_>>>0>=w>>>0|(0|n)>(0|y))break c;if(e=a[_+S|0],n=l,n=(l=E+5|0)>>>0<5?n+1|0:n,h[t+16>>2]=l,h[t+20>>2]=n,h[g+8>>2]=e,1==(0|e)){if(U(g,t,c+16|0))break u;break c}Nr(1943,23,h[3451]);break c;default:Nr(1918,24,h[3451]);break c;case 0:}if(!U(g,t,c+16|0))break c}if(h[c+8>>2]=h[c+16>>2],h[c>>2]=h[c+20>>2],I=e=I-32|0,t=h[g>>2],T=m[g+4>>2],h[(u=e+24|0)>>2]=1065353216,(0|(t=-1<<t^-1))>0&&(m[u>>2]=T/v(0|t)),(0|(g=h[c+8>>2]))!=h[c>>2])for(n=h[A+28>>2];l=h[g>>2],_=h[g+4>>2],T=m[u>>2],m[e+16>>2]=T*v(h[g+8>>2]-t|0),m[e+12>>2]=T*v(_-t|0),m[e+8>>2]=T*v(l-t|0),_=h[A+16>>2],l=h[_>>2],d[l+84|0]||(n=h[h[l+68>>2]+(n<<2)>>2]),y=n,n=h[l+40>>2],We(h[h[l>>2]>>2]+b(y,n)|0,(e+8|0)+(h[_+4>>2]<<2)|0,n),n=h[A+28>>2]+1|0,h[A+28>>2]=n,(0|(g=g+12|0))!=h[c>>2];);I=e+32|0,u=1}if((e=h[c+16>>2])&&(h[c+20>>2]=e,be(e)),I=c+32|0,Tr(A),g=1,u)break n}g=0;break n;case 1:break l;default:break n}if(y>>>0<=E>>>0&(0|n)>=(0|u)|(0|n)>(0|u))break n;if(E=d[E+S|0],n=l,n=(w=A+2|0)>>>0<2?n+1|0:n,h[t+16>>2]=w,h[t+20>>2]=n,E>>>0>=7){h[i>>2]=E,Gt(1795,i);break n}if(n=l,A=l=A+6|0,l>>>0>y>>>0&(0|(n=l>>>0<6?n+1|0:n))>=(0|u)|(0|n)>(0|u))break n;if(l=d[0|(l=w+S|0)]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+16>>2]=A,h[t+20>>2]=n,_)for(A=0;n=0|Rn[h[h[e>>2]+20>>2]](e,A),Dt(n=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],l),a[n+84|0]=1,h[n+72>>2]=h[n+68>>2],(0|_)!=(0|(A=A+1|0)););e=yt(i+672|0,i+704|0);l:{c:switch(0|E){case 1:if(t=z(n=Ze(i+16|0,c),t,e),Yt(n),!t)break a;break l;case 2:if(t=H(n=Xe(i+16|0,c),t,e),Zt(n),!t)break a;break l;case 3:if(t=$(n=Xe(i+16|0,c),t,e),Zt(n),!t)break a;break l;case 4:if(t=W(n=J(i+16|0,c),t,e),qt(n),!t)break a;break l;case 5:if(t=Y(n=J(i+16|0,c),t,e),qt(n),!t)break a;break l;case 6:if(t=X(n=J(i+16|0,c),t,e),qt(n),t)break l;break a;case 0:break c;default:break a}if(t=j(n=Ze(i+16|0,c),t,e),Yt(n),!t)break a}Tr(e),g=1;break n}bn(),x()}bn(),x()}Tr(e)}if(!(e=h[i+704>>2]))break e;h[i+708>>2]=e,be(e);break e}if(h[e+52>>2]==h[e+48>>2]){g=1;break t}for(A=0;;){if(!vi(1,i+16|0,t))break i;if(g=1,n=h[e+48>>2],l=h[i+16>>2],h[n+(A<<2)>>2]=l>>>1^0-(1&l),!((A=A+1|0)>>>0<h[e+52>>2]-n>>2>>>0))break}break t}g=0}(e=h[i+672>>2])&&(h[i+676>>2]=e,be(e))}return I=i+720|0,0|g},function(e){e|=0;var t,i=0,r=0,n=0,s=0,o=0,l=0,c=0,g=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=v(0),D=0;I=t=I-32|0;e:if(h[e+60>>2]!=h[e- -64>>2]|h[e+48>>2]!=h[e+52>>2]){if(_=1,!((0|Rn[h[h[e>>2]+24>>2]](e))<=0)){t:{i:{for(;;){r:{r=0|Rn[h[h[e>>2]+20>>2]](e,D);n:{a:{s:switch(o=h[h[h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],h[o+28>>2]-1|0){case 8:break a;case 0:case 2:case 4:break s;default:break n}if(r=a[o+24|0],h[t+24>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,r){if((0|r)<0)break r;if(_=mr(r<<=2),h[t+16>>2]=_,i=r+_|0,h[t+24>>2]=i,A=0,xt(_,0,r),h[t+20>>2]=i,r=a[o+24|0],h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,r){if((0|r)<0)break i;A=mr(r<<=2),h[t>>2]=A,xt(A,0,r)}}else _=0,h[t>>2]=0,A=0;s:{o:switch(h[o+28>>2]-1|0){case 4:s=0,c=0,E=0,r=0,I=g=I-16|0,n=a[o+24|0],h[g+8>>2]=0,h[g>>2]=0,h[g+4>>2]=0;l:{c:{if(n){if((0|n)<0)break c;c=mr(i=n<<2),h[g>>2]=c,h[g+8>>2]=i+c,xt(c,0,i),xt(s=mr(i),0,i)}if(!h[o+80>>2])break l;for(;;){if(C=h[o>>2],M=h[C>>2],i=h[o+40>>2],y=We(c,M+(y=h[o+48>>2]+Xi(i,h[o+44>>2],E,r)|0)|0,i),!((0|(w=n<<24>>24))<=0)){if(S=h[e+48>>2],l=0,1!=(255&n))for(k=-2&w,n=0;h[(T=l<<2)+s>>2]=h[S+(l+P<<2)>>2]+h[y+T>>2],h[(M=(T=1|l)<<2)+s>>2]=h[S+(P+T<<2)>>2]+h[y+M>>2],l=l+2|0,(0|k)!=(0|(n=n+2|0)););1&w&&(h[(n=l<<2)+s>>2]=h[S+(l+P<<2)>>2]+h[n+y>>2])}if(We(h[C>>2]+b(i,E)|0,s,i),E=i=E+1|0,!(r=i?r:r+1|0)&p[o+80>>2]<=i>>>0|r)break l;n=d[o+24|0]}}bn(),x()}s&&be(s),c&&be(c),I=g+16|0;break s;case 2:s=0,c=0,E=0,r=0,I=g=I-16|0,n=a[o+24|0],h[g+8>>2]=0,h[g>>2]=0,h[g+4>>2]=0;l:{c:{if(n){if((0|n)<0)break c;c=mr(i=n<<1),h[g>>2]=c,h[g+8>>2]=i+c,xt(c,0,i),xt(s=mr(i),0,i)}if(!h[o+80>>2])break l;for(;;){if(C=h[o>>2],M=h[C>>2],i=h[o+40>>2],y=We(c,M+(y=h[o+48>>2]+Xi(i,h[o+44>>2],E,r)|0)|0,i),!((0|(w=n<<24>>24))<=0)){if(S=h[e+48>>2],l=0,1!=(255&n))for(k=-2&w,n=0;u[(T=l<<1)+s>>1]=f[y+T>>1]+f[S+(l+P<<2)>>1],u[(M=(T=1|l)<<1)+s>>1]=f[y+M>>1]+f[S+(P+T<<2)>>1],l=l+2|0,(0|k)!=(0|(n=n+2|0)););1&w&&(u[(n=l<<1)+s>>1]=f[n+y>>1]+f[S+(l+P<<2)>>1])}if(We(h[C>>2]+b(i,E)|0,s,i),E=i=E+1|0,!(r=i?r:r+1|0)&p[o+80>>2]<=i>>>0|r)break l;n=d[o+24|0]}}bn(),x()}s&&be(s),c&&be(c),I=g+16|0;break s;case 0:break o;default:break s}s=0,l=0,E=0,r=0,I=c=I-16|0,i=a[o+24|0],h[c+8>>2]=0,h[c>>2]=0,h[c+4>>2]=0;o:{l:{if(i){if((0|i)<0)break l;l=mr(i),h[c>>2]=l,h[c+8>>2]=i+l,xt(l,0,i),xt(s=mr(i),0,i)}if(h[o+80>>2])for(;;){if(M=h[h[o>>2]>>2],g=h[o+40>>2],i=We(l,M+(i=h[o+48>>2]+Xi(g,h[o+44>>2],E,r)|0)|0,g),!((0|(y=a[o+24|0]))<=0)){if(S=h[e+48>>2],n=0,1!=(0|y))for(C=-2&y,g=0;a[n+s|0]=d[i+n|0]+d[S+(n+P<<2)|0],a[(w=1|n)+s|0]=d[i+w|0]+d[S+(w+P<<2)|0],n=n+2|0,(0|C)!=(0|(g=g+2|0)););1&y&&(a[n+s|0]=d[i+n|0]+d[S+(n+P<<2)|0])}if(i=h[o+40>>2],We(h[h[o>>2]>>2]+b(i,E)|0,s,i),E=i=E+1|0,!(!(r=i?r:r+1|0)&p[o+80>>2]>i>>>0))break}s&&be(s),l&&be(l),I=c+16|0;break o}bn(),x()}}if(P=a[o+24|0]+P|0,r=1,A&&be(A),_&&be(_),r)break n;_=0;break e}if(l=h[h[e+60>>2]+(R<<2)>>2],s=h[e+36>>2],_=h[40+(0|Rn[h[h[e>>2]+28>>2]](e))>>2],h[t>>2]=h[o+56>>2],r=mr(32),h[t+16>>2]=r,h[t+20>>2]=24,h[t+24>>2]=-2147483616,a[r+24|0]=0,i=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,n=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[r+16|0]=n,a[r+17|0]=n>>>8,a[r+18|0]=n>>>16,a[r+19|0]=n>>>24,a[r+20|0]=i,a[r+21|0]=i>>>8,a[r+22|0]=i>>>16,a[r+23|0]=i>>>24,i=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,n=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[r+8|0]=n,a[r+9|0]=n>>>8,a[r+10|0]=n>>>16,a[r+11|0]=n>>>24,a[r+12|0]=i,a[r+13|0]=i>>>8,a[r+14|0]=i>>>16,a[r+15|0]=i>>>24,i=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,n=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|r]=n,a[r+1|0]=n>>>8,a[r+2|0]=n>>>16,a[r+3|0]=n>>>24,a[r+4|0]=i,a[r+5|0]=i>>>8,a[r+6|0]=i>>>16,a[r+7|0]=i>>>24,i=Rt(_,t,t+16|0),a[t+27|0]<0&&be(h[t+16>>2]),r=R+1|0,i)Ie(o,l);else{if(c=s+b(R,24)|0,s=h[c+4>>2],n=(R=a[o+24|0])<<2,i=mr((0|R)!=(1073741823&R)?-1:n),h[t+16>>2]=1065353216,O=m[c+20>>2],(0|(s=-1<<s^-1))>0&&(m[t+16>>2]=O/v(0|s)),(0|s)<=0)break t;if(h[l+80>>2])if((0|R)<=0)for(A=0,_=0;We(h[h[o+64>>2]>>2]+_|0,i,n),_=n+_|0,(A=A+1|0)>>>0<p[l+80>>2];);else for(y=h[h[l>>2]>>2]+h[l+48>>2]|0,C=-2&R,k=1&R,g=0,s=0,_=0;;){if(E=h[c+8>>2],O=m[t+16>>2],A=0,S=0,1!=(0|R))for(;T=y+(_<<2)|0,m[(w=A<<2)+i>>2]=v(O*v(h[T>>2]))+m[E+w>>2],m[(w|=4)+i>>2]=v(O*v(h[T+4>>2]))+m[E+w>>2],A=A+2|0,_=_+2|0,(0|C)!=(0|(S=S+2|0)););if(k&&(m[(A<<=2)+i>>2]=v(O*v(h[y+(_<<2)>>2]))+m[E+A>>2],_=_+1|0),We(h[h[o+64>>2]>>2]+s|0,i,n),s=n+s|0,!((g=g+1|0)>>>0<p[l+80>>2]))break}be(i)}R=r}if(_=1,D=D+1|0,(0|Rn[h[h[e>>2]+24>>2]](e))>(0|D))continue;break e}break}bn(),x()}bn(),x()}be(i),_=0}}else _=1;return I=t+32|0,0|_},function(e){var t;return h[(e|=0)>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),0|e},function(e){var t;h[(e|=0)>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),be(e)},_r,function(e,t){return t|=0,h[12+(e|=0)>>2]=-1,h[e+8>>2]=t,1},function(e,t,i){t|=0,i|=0;var r,n=0;return r=h[8+(e|=0)>>2],a[r+24|0]<=0||Dt(r,h[t+4>>2]-h[t>>2]>>2)&&(n=0|Rn[h[h[e>>2]+32>>2]](e,t,i)),0|n},function(e,t,i){return 1},Qr,function(e,t){e|=0;var i=0,r=0,n=0,a=0,s=0,o=0;a=1;e:if(!((0|Rn[h[h[(t|=0)>>2]+20>>2]](t))<=0))for(;;){if(a=0,-1==(0|(i=hr(h[h[e+4>>2]+4>>2],0|Rn[h[h[t>>2]+24>>2]](t,s)))))break e;n=h[e+4>>2];t:{if(d[n+36|0]<=1){if(0|Rn[h[h[t>>2]+28>>2]](t,h[h[h[n+4>>2]+8>>2]+(i<<2)>>2]))break t;break e}if(r=0,(0|i)<0||(o=h[n+4>>2],h[o+12>>2]-h[o+8>>2]>>2<=(0|i)||(r=h[h[n+8>>2]+(h[h[n+20>>2]+(i<<2)>>2]<<2)>>2],r=0|Rn[h[h[r>>2]+32>>2]](r,i))),!r)break e;if(!(0|Rn[h[h[t>>2]+28>>2]](t,r)))break e}if(a=1,s=s+1|0,!((0|Rn[h[h[t>>2]+20>>2]](t))>(0|s)))break}return 0|a},function(e,t,i){e|=0,i|=0;var r,n,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;if(a=h[(t|=0)>>2],t=h[t+4>>2],n=mr((0|(r=h[h[e+8>>2]+40>>2]))>=0?r:-1),o=1,!((0|(l=t-a|0))<=0||(t=0,o=0,a=0+h[i+20>>2]|0,a=(s=r+(c=h[i+16>>2])|0)>>>0<r>>>0?a+1|0:a,u=s,s=h[i+12>>2],u>>>0>p[i+8>>2]&(0|s)<=(0|a)|(0|a)>(0|s)))){for(o=(0|(d=l>>2))>1?d:1;s=We(n,c+h[i>>2]|0,r),h[i+16>>2]=u,h[i+20>>2]=a,We(h[h[h[e+8>>2]+64>>2]>>2]+t|0,s,r),(0|o)!=(0|(f=f+1|0))&&(t=t+r|0,a=0+h[i+20>>2]|0,a=(s=r+(c=h[i+16>>2])|0)>>>0<r>>>0?a+1|0:a,u=s,l=s,(0|(s=h[i+12>>2]))>=(0|a)&p[i+8>>2]>=l>>>0|(0|a)<(0|s)););o=(0|f)>=(0|d)}return be(n),0|o},function(e){var t,i=0,r=0;if(h[(e|=0)>>2]=2356,i=h[e+60>>2],h[e+60>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(i=h[e+48>>2])&&(h[e+52>>2]=i,be(i)),t=h[e+36>>2]){if((0|(r=h[e+40>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+36>>2]}h[e+40>>2]=t,be(i)}return h[e>>2]=2012,(i=h[e+16>>2])&&(h[e+20>>2]=i,be(i)),(i=h[e+4>>2])&&(h[e+8>>2]=i,be(i)),0|e},function(e){var t,i=0,r=0;if(h[(e|=0)>>2]=2356,i=h[e+60>>2],h[e+60>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(i=h[e+48>>2])&&(h[e+52>>2]=i,be(i)),t=h[e+36>>2]){if((0|(r=h[e+40>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+36>>2]}h[e+40>>2]=t,be(i)}h[e>>2]=2012,(i=h[e+16>>2])&&(h[e+20>>2]=i,be(i)),(i=h[e+4>>2])&&(h[e+8>>2]=i,be(i)),be(e)},function(e,t){var i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0;if(Me(e|=0,t|=0)){if(l=e+36|0,(s=0|Rn[h[h[e>>2]+24>>2]](e))>>>0>(i=(r=h[e+40>>2])-(n=h[e+36>>2])>>2)>>>0)St(l,s-i|0);else if(!(i>>>0<=s>>>0)){if((0|(n=n+(s<<2)|0))!=(0|r))for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|r)!=(0|n););h[e+40>>2]=n}e:if((0|s)<=0)n=0;else if(n=1,!((0|(i=h[t+20>>2]))>=(0|(r=h[t+12>>2]))&(a=h[t+16>>2])>>>0>=p[t+8>>2]|(0|i)>(0|r)))for(r=0;;){if(o=d[a+h[t>>2]|0],i=(a=a+1|0)?i:i+1|0,h[t+16>>2]=a,h[t+20>>2]=i,a=0|Rn[h[h[e>>2]+48>>2]](e,o),c=(o=r<<2)+h[e+36>>2]|0,i=h[c>>2],h[c>>2]=a,i&&Rn[h[h[i>>2]+4>>2]](i),!(i=h[h[l>>2]+o>>2]))break e;if(f=i,m=0|Rn[h[h[e>>2]+28>>2]](e),g=0|Rn[h[h[e>>2]+20>>2]](e,r),u=h[h[i>>2]+8>>2],!(0|Rn[u](0|f,0|m,0|g)))break e;if(n=(0|s)>(0|(r=r+1|0)),(0|r)==(0|s))break e;if(a=h[t+16>>2],i=h[t+20>>2],o=h[t+12>>2],!(a>>>0<p[t+8>>2]&(0|i)<=(0|o)|(0|i)<(0|o)))break}e=!n}else e=0;return 0|e},function(e,t){t|=0;var i=0,r=0,n=0,a=0,s=0;if((i=h[60+(e|=0)>>2])&&(h[i+4>>2]=e+48,0|Rn[h[h[i>>2]+12>>2]](i))){e:if(!((0|(i=0|Rn[h[h[e>>2]+24>>2]](e)))<=0)){for(;;){if(a=h[4+(0|Rn[h[h[e>>2]+28>>2]](e))>>2],s=0|Rn[h[h[e>>2]+20>>2]](e,r),n=h[e+60>>2],0|Rn[h[h[n>>2]+8>>2]](n,h[h[a+8>>2]+(s<<2)>>2])){if((0|i)!=(0|(r=r+1|0)))continue;break e}break}return 0}r=0,0|Rn[h[h[e>>2]+36>>2]](e,t)&&0|Rn[h[h[e>>2]+40>>2]](e,t)&&(r=0|Rn[h[h[e>>2]+44>>2]](e))}return 0|r},function(e,t){t|=0;var i,r=0;return i=h[16+(e|=0)>>2],r=0,h[e+20>>2]-i>>2<=(0|t)||(r=0,(0|(t=h[(t<<2)+i>>2]))<0||(r=zt(h[h[e+36>>2]+(t<<2)>>2]))),0|r},function(e,t){t|=0;var i,r=0,n=0,a=0,s=0;if(r=1,!((0|(i=0|Rn[h[h[(e|=0)>>2]+24>>2]](e)))<=0)&&(n=h[h[e+36>>2]>>2],a=e+48|0,r=0,0|Rn[h[h[n>>2]+16>>2]](n,a,t))){for(n=1;(0|i)!=(0|(r=n))&&(n=r+1|0,s=h[h[e+36>>2]+(r<<2)>>2],0|Rn[h[h[s>>2]+16>>2]](s,a,t)););r=(0|r)>=(0|i)}return 0|r},function(e,t){t|=0;var i,r=0,n=0,a=0,s=0;if(r=1,!((0|(i=0|Rn[h[h[(e|=0)>>2]+24>>2]](e)))<=0)&&(n=h[h[e+36>>2]>>2],a=e+48|0,r=0,0|Rn[h[h[n>>2]+20>>2]](n,a,t))){for(n=1;(0|i)!=(0|(r=n))&&(n=r+1|0,s=h[h[e+36>>2]+(r<<2)>>2],0|Rn[h[h[s>>2]+20>>2]](s,a,t)););r=(0|r)>=(0|i)}return 0|r},function(e){var t,i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;I=t=I-16|0,c=1;e:if((0|(i=0|Rn[h[h[(e|=0)>>2]+24>>2]](e)))<=0)c=0;else for(p=e+48|0;;){if(h[40+(0|Rn[h[h[e>>2]+28>>2]](e))>>2]&&(l=h[(u=o<<2)+h[e+36>>2]>>2],r=h[l+8>>2],(f=zt(l))&&(l=h[40+(0|Rn[h[h[e>>2]+28>>2]](e))>>2],h[t+12>>2]=h[r+56>>2],r=mr(32),h[t>>2]=r,h[t+4>>2]=24,h[t+8>>2]=-2147483616,a[r+24|0]=0,n=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,s=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[r+16|0]=s,a[r+17|0]=s>>>8,a[r+18|0]=s>>>16,a[r+19|0]=s>>>24,a[r+20|0]=n,a[r+21|0]=n>>>8,a[r+22|0]=n>>>16,a[r+23|0]=n>>>24,n=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,s=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[r+8|0]=s,a[r+9|0]=s>>>8,a[r+10|0]=s>>>16,a[r+11|0]=s>>>24,a[r+12|0]=n,a[r+13|0]=n>>>8,a[r+14|0]=n>>>16,a[r+15|0]=n>>>24,n=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,s=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|r]=s,a[r+1|0]=s>>>8,a[r+2|0]=s>>>16,a[r+3|0]=s>>>24,a[r+4|0]=n,a[r+5|0]=n>>>8,a[r+6|0]=n>>>16,a[r+7|0]=n>>>24,r=Rt(l,t+12|0,t),a[t+11|0]<0&&be(h[t>>2]),r)))Ie(h[h[h[e+36>>2]+u>>2]+8>>2],f);else if(r=h[h[e+36>>2]+(o<<2)>>2],!(0|Rn[h[h[r>>2]+24>>2]](r,p)))break e;if(c=(0|i)>(0|(o=o+1|0)),(0|o)==(0|i))break}return I=t+16|0,1&(-1^c)},function(e,t){switch(e|=0,e=0,0|(t|=0)){case 0:return e=mr(20),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,0|e;case 1:return e=mr(24),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,0|e;case 2:return e=mr(48),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,h[e+32>>2]=0,h[e+36>>2]=0,h[e+28>>2]=-1,h[e+24>>2]=1140,h[e>>2]=11076,h[e+40>>2]=0,h[e+44>>2]=0,0|e;case 3:e=mr(32),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,h[e+28>>2]=-1,h[e+24>>2]=1032,h[e>>2]=7056}return 0|e},or,ur,_r,function(e,t){t|=0;var i,r=0;return(i=h[4+(e|=0)>>2])&&(r=1,d[i+36|0]<2)||(r=0|Rn[h[h[e>>2]+48>>2]](e,h[t+4>>2]-h[t>>2]>>2)),0|r},function(e,t,i){e|=0,t|=0;var r,n,s=0,o=0,l=0,c=0,u=0,f=0,p=0;e:if(!((0|(s=r=h[12+(i|=0)>>2]))<=(0|(o=h[i+20>>2]))&(n=h[i+8>>2])>>>0<=(l=h[i+16>>2])>>>0|(0|s)<(0|o))){if(u=h[i>>2],f=a[u+l|0],s=o,s=(c=l+1|0)?s:s+1|0,h[i+16>>2]=c,h[i+20>>2]=s,-2!=(0|f)){if((0|s)>=(0|r)&c>>>0>=n>>>0|(0|s)>(0|r))break e;if(s=a[c+u|0],o=(l=l+2|0)>>>0<2?o+1|0:o,h[i+16>>2]=l,h[i+20>>2]=o,(s-4&255)>>>0<251)break e;o=0|Rn[h[h[e>>2]+40>>2]](e,f,s),s=h[e+20>>2],h[e+20>>2]=o,s&&Rn[h[h[s>>2]+4>>2]](s)}(!(s=h[e+20>>2])||0|Rn[h[h[e>>2]+28>>2]](e,s))&&0|Rn[h[h[e>>2]+36>>2]](e,t,i)&&(!(i=h[e+4>>2])|d[i+36|0]>1||0|Rn[h[h[e>>2]+48>>2]](e,h[t+4>>2]-h[t>>2]>>2))&&(p=1)}return 0|p},Te,function(e,t,i){e|=0,t|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0,d=0,p=0,m=0,g=0,b=0;if(I=r=I-48|0,1==(0|(i|=0))){o=h[e+4>>2],u=h[e+12>>2],h[r+40>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,s=r+8|0;e:if(-2!=(0|t)){if(m=h[h[h[o+4>>2]+8>>2]+(u<<2)>>2],1==(0|Rn[h[h[o>>2]+8>>2]](o))){if(p=65535&((e=f[o+36>>1])<<8|e>>>8),e=0,I=d=I-32|0,l=h[h[h[o+4>>2]+8>>2]+(u<<2)>>2],!(1!=(0|Rn[h[h[o>>2]+8>>2]](o))|t-1>>>0>5||!(n=0|Rn[h[h[o>>2]+36>>2]](o))|!(c=0|Rn[h[h[o>>2]+44>>2]](o,u))))if(i=0|Rn[h[h[o>>2]+40>>2]](o,u)){e=h[o+44>>2],h[d+12>>2]=i,h[d+8>>2]=e,h[d+20>>2]=c,h[d+16>>2]=c+12,o=d+8|0,e=0;t:{i:{r:switch(t-1|0){case 0:if(e=mr(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=2592;break t;case 1:if(e=mr(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=3356;break t;case 3:if(e=mr(112),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=3592,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0;break t;case 2:if(e=mr(92),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=3840,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=p;break t;case 4:if(e=mr(104),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,i=h[o+8>>2],t=h[o+12>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=4068,h[e+52>>2]=i,h[e+56>>2]=t,t=h[o+4>>2],h[e+88>>2]=h[o>>2],h[e+92>>2]=t,t=h[o+12>>2],h[e+96>>2]=h[o+8>>2],h[e+100>>2]=t;break t;case 5:break r;default:break t}e=mr(128),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t;r:{n:{if(i=h[s+28>>2]-h[s+24>>2]|0){if((0|i)<0)break n;t=mr(i),h[e+32>>2]=t,h[e+36>>2]=t,h[e+40>>2]=t+(i>>2<<2),i=h[s+24>>2],(0|(n=h[s+28>>2]-i|0))>0&&(t=We(t,i,n)+n|0),h[e+36>>2]=t}h[e>>2]=3244,t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+60>>2]=4932,h[e>>2]=4304,t=h[o+4>>2],h[e+72>>2]=h[o>>2],h[e+76>>2]=t,t=h[o+12>>2],h[e+80>>2]=h[o+8>>2],h[e+84>>2]=t,h[e+104>>2]=1065353216,h[e+108>>2]=-1,h[e+96>>2]=-1,h[e+100>>2]=-1,h[e+88>>2]=1,h[e+92>>2]=-1,h[e+60>>2]=4540,h[e+112>>2]=0,h[e+116>>2]=0,a[e+117|0]=0,a[e+118|0]=0,a[e+119|0]=0,a[e+120|0]=0,a[e+121|0]=0,a[e+122|0]=0,a[e+123|0]=0,a[e+124|0]=0;break r}bn(),x()}break t}bn(),x()}}else{e=h[o+44>>2],h[d+12>>2]=n,h[d+8>>2]=e,h[d+20>>2]=c,h[d+16>>2]=c+12,o=d+8|0,e=0;t:{i:{r:switch(t-1|0){case 0:if(e=mr(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=4960;break t;case 1:if(e=mr(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=5384;break t;case 3:if(e=mr(112),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=5608,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0;break t;case 2:if(e=mr(92),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=5844,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=p;break t;case 4:if(e=mr(104),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],n=h[s+28>>2]-t|0){if((0|n)<0)break i;i=mr(n),h[e+32>>2]=i,h[e+40>>2]=i+(n>>2<<2),g=e,b=We(i,t,n)+n|0,h[g+36>>2]=b}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,i=h[o+8>>2],t=h[o+12>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=6060,h[e+52>>2]=i,h[e+56>>2]=t,t=h[o+4>>2],h[e+88>>2]=h[o>>2],h[e+92>>2]=t,t=h[o+12>>2],h[e+96>>2]=h[o+8>>2],h[e+100>>2]=t;break t;case 5:break r;default:break t}e=mr(128),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],n=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=n,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t;r:{n:{if(i=h[s+28>>2]-h[s+24>>2]|0){if((0|i)<0)break n;t=mr(i),h[e+32>>2]=t,h[e+36>>2]=t,h[e+40>>2]=t+(i>>2<<2),i=h[s+24>>2],(0|(n=h[s+28>>2]-i|0))>0&&(t=We(t,i,n)+n|0),h[e+36>>2]=t}h[e>>2]=5328,t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+60>>2]=6868,h[e>>2]=6284,t=h[o+4>>2],h[e+72>>2]=h[o>>2],h[e+76>>2]=t,t=h[o+12>>2],h[e+80>>2]=h[o+8>>2],h[e+84>>2]=t,h[e+104>>2]=1065353216,h[e+108>>2]=-1,h[e+96>>2]=-1,h[e+100>>2]=-1,h[e+88>>2]=1,h[e+92>>2]=-1,h[e+60>>2]=6504,h[e+112>>2]=0,h[e+116>>2]=0,a[e+117|0]=0,a[e+118|0]=0,a[e+119|0]=0,a[e+120|0]=0,a[e+121|0]=0,a[e+122|0]=0,a[e+123|0]=0,a[e+124|0]=0;break r}bn(),x()}break t}bn(),x()}}if(I=d+32|0,n=e,e)break e}n=mr(44),h[n+4>>2]=m,h[n>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],i=h[s+20>>2],t=h[s>>2],e=h[s+4>>2],h[n+40>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+24>>2]=u,h[n+28>>2]=i,h[n+16>>2]=l,h[n+20>>2]=c,h[n+8>>2]=t,h[n+12>>2]=e;t:{if(e=h[s+24>>2],i=h[s+28>>2]-e|0){if((0|i)<0)break t;t=mr(i),h[n+32>>2]=t,h[n+40>>2]=t+(i>>2<<2),g=n,b=We(t,e,i)+i|0,h[g+36>>2]=b}h[n>>2]=6896;break e}bn(),x()}(e=h[r+32>>2])&&(h[r+36>>2]=e,be(e))}return I=r+48|0,0|n},function(e){return a[h[8+(e|=0)>>2]+24|0]},function(e,t){t|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,d=0,f=0,p=0,m=0,g=0,b=0;i=e|=0;e:{t:{i:{r:{n:{a:{s:{o:switch(f=h[e+8>>2],h[f+28>>2]-1|0){case 4:break i;case 5:break r;case 2:break n;case 3:break a;case 0:break s;case 1:break o;default:break e}if(n=mr((0|(r=a[f+24|0]))>=0?r:-1),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|r)>0){for(f=-4&r,m=3&r,s=r-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,a[e+n|0]=h[d>>2],a[(1|e)+n|0]=h[d+4>>2],a[(2|e)+n|0]=h[d+8>>2],a[(3|e)+n|0]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;a[e+n|0]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+g|0,n,r),g=r+g|0,(0|(p=p+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],n,r),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r);break t}if(n=mr((0|(r=a[f+24|0]))>=0?r:-1),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|r)>0){for(f=-4&r,m=3&r,s=r-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,a[e+n|0]=h[d>>2],a[(1|e)+n|0]=h[d+4>>2],a[(2|e)+n|0]=h[d+8>>2],a[(3|e)+n|0]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;a[e+n|0]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+g|0,n,r),g=r+g|0,(0|(p=p+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],n,r),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r);break t}if(n=mr((e=(s=a[f+24|0])+s|0)>>>0<s>>>0?-1:e),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if(r=s<<1,(0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,u[(p=e<<1)+n>>1]=h[d>>2],u[(2|p)+n>>1]=h[d+4>>2],u[(4|p)+n>>1]=h[d+8>>2],u[(6|p)+n>>1]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;u[(e<<1)+n>>1]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+b|0,n,r),b=r+b|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],n,r),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r);break t}if(n=mr((e=(s=a[f+24|0])+s|0)>>>0<s>>>0?-1:e),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if(r=s<<1,(0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,u[(p=e<<1)+n>>1]=h[d>>2],u[(2|p)+n>>1]=h[d+4>>2],u[(4|p)+n>>1]=h[d+8>>2],u[(6|p)+n>>1]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;u[(e<<1)+n>>1]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+b|0,n,r),b=r+b|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],n,r),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r);break t}if(r=(s=a[f+24|0])<<2,n=mr((0|s)!=(1073741823&s)?-1:r),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,h[(p=e<<2)+n>>2]=h[d>>2],h[(4|p)+n>>2]=h[d+4>>2],h[(8|p)+n>>2]=h[d+8>>2],h[(12|p)+n>>2]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;h[(e<<2)+n>>2]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+b|0,n,r),b=r+b|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],n,r),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r);break t}if(r=(s=a[f+24|0])<<2,n=mr((0|s)!=(1073741823&s)?-1:r),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,t)if((0|s)>0)for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,h[(p=e<<2)+n>>2]=h[d>>2],h[(4|p)+n>>2]=h[d+4>>2],h[(8|p)+n>>2]=h[d+8>>2],h[(12|p)+n>>2]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;h[(e<<2)+n>>2]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+b|0,n,r),b=r+b|0,(0|(g=g+1|0))==(0|t))break}else if(We(h[h[f+64>>2]>>2],n,r),1!=(0|t)){if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),We((e=e+r|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,n,r),(0|t)!=(0|(o=o+2|0)););c&&We(h[h[h[i+8>>2]+64>>2]>>2]+(e+r|0)|0,n,r)}}be(n),n=1}return 0|n},function(e){var t;return h[(e|=0)>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},Mr,hn,Zr,Er,dn,qr,en,dn,hn,function(e,t){e|=0;var i,r,n,a=0,s=0,o=0,l=0,c=0,u=0;return r=s=h[12+(t|=0)>>2],o=a=h[t+20>>2],a=(i=(l=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,(n=h[t+8>>2])>>>0<i>>>0&(0|a)>=(0|s)|(0|a)>(0|s)||(c=h[t>>2],s=d[0|(s=c+l|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=i,h[t+20>>2]=a,a=o,l=o=l+8|0,o=a=o>>>0<8?a+1|0:a,l>>>0>n>>>0&(0|a)>=(0|r)|(0|a)>(0|r)||(a=d[0|(a=i+c|0)]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=o,(0|a)<(0|s)||(h[e+16>>2]=a,h[e+12>>2]=s,!(t=(a>>31)-((s>>31)+(a>>>0<s>>>0)|0)|0)&(a=a-s|0)>>>0>2147483646|t||(u=1,t=a+1|0,h[e+20>>2]=t,a=t>>>1|0,h[e+24>>2]=a,h[e+28>>2]=0-a,1&t||(h[e+24>>2]=a-1))))),0|u},function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0;if(h[8+(e|=0)>>2]=n,p=h[(r=e+32|0)>>2],(a=h[e+36>>2]-p>>2)>>>0<n>>>0?(ei(r,n-a|0),p=h[r>>2],r=h[e+8>>2]):(n>>>0<a>>>0&&(h[e+36>>2]=(n<<2)+p),r=n),l=h[e+52>>2],s=h[e+48>>2],a=0,m=xt(mr(m=(1073741823&n)!=(0|n)?-1:n<<2),0,m),!((0|r)<=0)){for(;(0|(c=h[(r=a<<2)+m>>2]))>(0|(u=h[e+16>>2]))?h[r+p>>2]=u:(r=r+p|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|c)?u:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(!((0|r)<=0))for(a=0;;){r=(c=a<<2)+i|0,c=h[t+c>>2]+h[c+p>>2]|0,h[r>>2]=c;e:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break e;c=c+h[e+20>>2]|0}h[r>>2]=c}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],o=h[a>>2],(0|(a=h[a+4>>2]-o|0))>=5)for(_=(0|(a>>=2))>2?a:2,y=a>>>0>1?a:1,A=-2&n,E=1&n,p=1;;){e:{t:{if((0|p)!=(0|y)){if(v=b(n,p),-1==(0|(a=h[(p<<2)+o>>2]))|h[h[s>>2]+(a>>>3&536870908)>>2]>>>a&1)break t;if(-1==(0|(a=h[h[h[s+64>>2]+12>>2]+(a<<2)>>2])))break t;if(u=h[l>>2],c=h[s+28>>2],(0|(f=h[u+(h[c+(a<<2)>>2]<<2)>>2]))>=(0|p))break t;if((0|(d=h[u+(h[c+((((d=a+1|0)>>>0)%3|0?d:a-2|0)<<2)>>2]<<2)>>2]))>=(0|p))break t;if((0|(a=h[u+(h[c+(a+((a>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|p))break t;if(!((0|n)<=0)){if(c=b(n,a),u=b(n,d),f=b(n,f),a=0,g=0,1!=(0|n))for(;h[m+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+u<<2)+i>>2]|0)-h[(a+f<<2)+i>>2],h[m+((d=1|a)<<2)>>2]=(h[(c+d<<2)+i>>2]+h[(u+d<<2)+i>>2]|0)-h[(f+d<<2)+i>>2],a=a+2|0,(0|A)!=(0|(g=g+2|0)););E&&(h[m+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+u<<2)+i>>2]|0)-h[(a+f<<2)+i>>2])}if((0|r)<=0)break e;for(u=h[e+32>>2],a=0;(0|(c=h[(r=a<<2)+m>>2]))>(0|(f=h[e+16>>2]))?h[r+u>>2]=f:(r=r+u|0,f=h[e+12>>2],h[r>>2]=(0|f)>(0|c)?f:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,(0|r)<=0)break e;for(f=(r=v<<2)+i|0,d=t+r|0;;){r=(c=a<<2)+f|0,c=h[c+d>>2]+h[c+u>>2]|0,h[r>>2]=c;i:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break i;c=c+h[e+20>>2]|0}h[r>>2]=c}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}Sn(),x()}if(!((0|r)<=0)){for(f=(b(p-1|0,n)<<2)+i|0,u=h[e+32>>2],a=0;(0|(c=h[(r=a<<2)+f>>2]))>(0|(d=h[e+16>>2]))?h[r+u>>2]=d:(r=r+u|0,d=h[e+12>>2],h[r>>2]=(0|d)>(0|c)?d:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,!((0|r)<=0))for(f=(r=v<<2)+i|0,d=t+r|0;;){r=(c=a<<2)+f|0,c=h[c+d>>2]+h[c+u>>2]|0,h[r>>2]=c;t:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break t;c=c+h[e+20>>2]|0}h[r>>2]=c}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|_)==(0|(p=p+1|0)))break}return be(m),1},gn,gn,Mr,cn,Er,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0;if(h[8+(e|=0)>>2]=n,d=h[(r=e+32|0)>>2],(a=h[e+36>>2]-d>>2)>>>0<n>>>0?(ei(r,n-a|0),d=h[r>>2],r=h[e+8>>2]):(n>>>0<a>>>0&&(h[e+36>>2]=(n<<2)+d),r=n),s=xt(mr(a=(1073741823&n)!=(0|n)?-1:n<<2),0,a),o=xt(mr(a),0,a),!((0|r)<=0)){for(;(0|(a=h[(r=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[r+d>>2]=u:(r=r+d|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|a)?u:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(!((0|r)<=0))for(a=0;;){r=(u=a<<2)+i|0,u=h[t+u>>2]+h[u+d>>2]|0,h[r>>2]=u;e:{if((0|u)>h[e+16>>2])c=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;c=u+h[e+20>>2]|0}h[r>>2]=c}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],l=h[a>>2],(0|(a=h[a+4>>2]-l|0))>=5)for(M=h[e+52>>2],y=h[e+48>>2],R=(0|(a>>=2))>2?a:2,P=a>>>0>1?a:1,w=-2&n,S=1&n,C=-4&n,T=3&n,E=n-1|0,k=n<<2,v=1;;){e:{t:{i:{r:if((0|v)==(0|P))Sn(),x();else{if(u=h[(v<<2)+l>>2],(A=(0|n)<=0)||xt(s,0,k),-1==(0|u)){f=b(n,v);break t}for(O=h[y>>2],g=0,a=u;;){if(!(h[(a>>>3&536870908)+O>>2]>>>a&1||-1==(0|(c=h[h[h[y+64>>2]+12>>2]+(a<<2)>>2]))||(f=h[M>>2],d=h[y+28>>2],(0|(m=h[f+(h[d+(c<<2)>>2]<<2)>>2]))>=(0|v)||(0|(p=h[f+(h[d+((((p=c+1|0)>>>0)%3|0?p:c-2|0)<<2)>>2]<<2)>>2]))>=(0|v)||(0|(c=h[f+(h[d+(c+((c>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|v)))){if(!A){if(d=b(n,c),f=b(n,p),m=b(n,m),c=0,_=0,E)for(;h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+m<<2)+i>>2],h[((p=1|c)<<2)+o>>2]=(h[(d+p<<2)+i>>2]+h[(f+p<<2)+i>>2]|0)-h[(p+m<<2)+i>>2],c=c+2|0,(0|w)!=(0|(_=_+2|0)););if(S&&(h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+m<<2)+i>>2]),!A){if(d=0,c=0,f=0,E>>>0>2)for(;h[(p=(m=c<<2)+s|0)>>2]=h[p>>2]+h[m+o>>2],h[(_=(p=4|m)+s|0)>>2]=h[_>>2]+h[p+o>>2],h[(_=(p=8|m)+s|0)>>2]=h[_>>2]+h[p+o>>2],h[(p=(m|=12)+s|0)>>2]=h[p>>2]+h[m+o>>2],c=c+4|0,(0|C)!=(0|(f=f+4|0)););if(T)for(;h[(m=(f=c<<2)+s|0)>>2]=h[m>>2]+h[f+o>>2],c=c+1|0,(0|T)!=(0|(d=d+1|0)););}}g=g+1|0}n:{if((a>>>0)%3|0)a=a-1|0;else if(c=-1,-1==(0|(a=a+2|0)))break n;c=-1,h[h[y>>2]+(a>>>3&536870908)>>2]>>>a&1||(c=-1,-1!=(0|(a=h[h[h[y+64>>2]+12>>2]+(a<<2)>>2]))&&(c=a-1|0,(a>>>0)%3|0||(c=a+2|0)))}if(-1==(0|(a=(0|c)==(0|u)?-1:c)))break}if(f=b(n,v),!g)break t;if(A)break i;if(c=0,a=0,!E)break r;for(;h[(d=(u=c<<2)+s|0)>>2]=h[d>>2]/(0|g),h[(u=(4|u)+s|0)>>2]=h[u>>2]/(0|g),c=c+2|0,(0|w)!=(0|(a=a+2|0)););}S&&(h[(a=(c<<2)+s|0)>>2]=h[a>>2]/(0|g))}if((0|r)<=0)break e;for(d=h[e+32>>2],c=0;(0|(a=h[(r=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[r+d>>2]=u:(r=r+d|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|a)?u:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,(0|r)<=0)break e;for(c=(r=f<<2)+i|0,f=t+r|0;;){r=(u=a<<2)+c|0,u=h[u+f>>2]+h[u+d>>2]|0,h[r>>2]=u;i:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break i;u=u+h[e+20>>2]|0}h[r>>2]=u}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}if(!((0|r)<=0)){for(u=(b(v-1|0,n)<<2)+i|0,d=h[e+32>>2],c=0;(0|(a=h[(r=c<<2)+u>>2]))>(0|(g=h[e+16>>2]))?h[r+d>>2]=g:(r=r+d|0,g=h[e+12>>2],h[r>>2]=(0|g)>(0|a)?g:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,!((0|r)<=0))for(c=(r=f<<2)+i|0,f=t+r|0;;){r=(u=a<<2)+c|0,u=h[u+f>>2]+h[u+d>>2]|0,h[r>>2]=u;t:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break t;u=u+h[e+20>>2]|0}h[r>>2]=u}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|R)==(0|(v=v+1|0)))break}return be(o),be(s),1},function(e){var t=0;return h[(e|=0)>>2]=3592,(t=h[e+96>>2])&&be(t),(t=h[e+84>>2])&&be(t),(t=h[e+72>>2])&&be(t),(t=h[e+60>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=3592,(t=h[e+96>>2])&&be(t),(t=h[e+84>>2])&&be(t),(t=h[e+72>>2])&&be(t),(t=h[e+60>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},on,Er,Se,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0,V=0;I=s=I+-64|0,h[8+(e|=0)>>2]=n,u=h[(a=e+32|0)>>2];e:{if((r=h[e+36>>2]-u>>2)>>>0<n>>>0)ei(a,n-r|0),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0;else if(r>>>0>n>>>0&&(h[e+36>>2]=u+(n<<2)),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0,r=0,!n)break e;$e(s+16|0,n,s),d=h[s+28>>2],r=h[s+32>>2]}h[s>>2]=0;e:if((r=r-d>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+32>>2]=(n<<2)+d}else $e(s+16|12,n-r|0,s);h[s>>2]=0,a=h[s+40>>2];e:if((r=h[s+44>>2]-a>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+44>>2]=a+(n<<2)}else $e(s+40|0,n-r|0,s);h[s>>2]=0,a=h[s+52>>2];e:if((r=h[s+56>>2]-a>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+56>>2]=a+(n<<2)}else $e(s+52|0,n-r|0,s);if(d=0,!(h[e+8>>2]<=0)){for(f=h[e+32>>2],u=h[s+16>>2];(0|(a=h[(r=d<<2)+u>>2]))>(0|(g=h[e+16>>2]))?h[r+f>>2]=g:(r=r+f|0,g=h[e+12>>2],h[r>>2]=(0|g)>(0|a)?g:a),(0|(d=d+1|0))<(0|(r=h[e+8>>2])););if(!((0|r)<=0))for(r=0;;){a=(u=r<<2)+i|0,u=h[t+u>>2]+h[u+f>>2]|0,h[a>>2]=u;e:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}c=h[e+52>>2],o=h[e+48>>2],l=mr(16),h[(r=l)>>2]=0,h[r+4>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,h[s+8>>2]=0,h[s>>2]=0,h[s+4>>2]=0;e:{if(n){if(n>>>0>=1073741824)break e;T=mr(r=n<<2),h[s>>2]=T,h[s+8>>2]=r+T,xt(T,0,r)}y=1,r=h[e+56>>2],P=h[r>>2];t:if(!((0|(r=h[r+4>>2]-P|0))<5))for(D=(0|(r>>=2))>2?r:2,N=r>>>0>1?r:1,C=-2&n,k=1&n,L=-4&n,O=3&n,M=n-1|0,U=n<<2,g=1;;){i:{r:{n:{a:{if((0|g)!=(0|N)){r=((a=h[(g<<2)+P>>2])>>>0)%3|0;s:{o:if(-1!=(0|a)){f=0,R=0!=(0|r)|-1!=(0|(u=a+2|0)),v=1,_=1<<(A=r?a-1|0:u),E=A>>>5|0,V=h[o>>2],r=a;l:{for(;;){if(!(h[(r>>>3&536870908)+V>>2]>>>r&1||-1==(0|(u=h[h[h[o+64>>2]+12>>2]+(r<<2)>>2]))||(p=h[c>>2],d=h[o+28>>2],(0|(y=h[p+(h[d+(u<<2)>>2]<<2)>>2]))>=(0|g)||(0|(m=h[p+(h[d+((((m=u+1|0)>>>0)%3|0?m:u-2|0)<<2)>>2]<<2)>>2]))>=(0|g)||(0|(d=h[p+(h[d+(u+((u>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|g)))){if(n){if(u=h[(s+16|0)+b(f,12)>>2],p=b(n,d),m=b(n,m),y=b(n,y),d=0,S=0,M)for(;h[u+(d<<2)>>2]=(h[(d+p<<2)+i>>2]+h[(d+m<<2)+i>>2]|0)-h[(d+y<<2)+i>>2],h[u+((w=1|d)<<2)>>2]=(h[(p+w<<2)+i>>2]+h[(m+w<<2)+i>>2]|0)-h[(y+w<<2)+i>>2],d=d+2|0,(0|C)!=(0|(S=S+2|0)););k&&(h[u+(d<<2)>>2]=(h[(d+p<<2)+i>>2]+h[(d+m<<2)+i>>2]|0)-h[(d+y<<2)+i>>2])}if(u=4,4==(0|(f=f+1|0)))break l}c:if(1&v){if(d=r-2|0,u=r+1|0,r=-1,-1==(0|(u=(u>>>0)%3|0?u:d))|h[h[o>>2]+(u>>>3&536870908)>>2]>>>u&1)break c;if(-1==(0|(u=h[h[h[o+64>>2]+12>>2]+(u<<2)>>2])))break c;r=((r=u+1|0)>>>0)%3|0?r:u-2|0}else{if((r>>>0)%3|0)d=r-1|0;else if(d=r+2|0,r=-1,-1==(0|d))break c;r=-1,h[h[o>>2]+(d>>>3&536870908)>>2]>>>d&1||-1!=(0|(u=h[h[h[o+64>>2]+12>>2]+(d<<2)>>2]))&&(r=(u>>>0)%3|0?u-1|0:u+2|0)}c:if((0|r)!=(0|a)){if(!(1&(1^v)|-1!=(0|r))){if(!R|_&h[h[o>>2]+(E<<2)>>2])break c;if(-1==(0|(r=h[h[h[o+64>>2]+12>>2]+(A<<2)>>2])))break c;v=0,r=(r>>>0)%3|0?r-1|0:r+2|0}if(-1!=(0|r))continue}break}if((0|(u=f))<=0)break o}for(n&&xt(h[s>>2],0,U),w=((r=u-1|0)<<2)+l|0,S=r=b(r,12)+e|0,R=h[r- -64>>2],y=0,v=0,r=0;;){if(a=h[w>>2],h[w>>2]=a+1,a>>>0>=R>>>0)break t;if(!(h[h[S+60>>2]+(a>>>3&536870908)>>2]>>>a&1)&&(r=r+1|0,n)){if(f=h[s>>2],p=h[(s+16|0)+b(v,12)>>2],A=0,d=0,a=0,M>>>0>=3)for(;h[(_=(m=d<<2)+f|0)>>2]=h[_>>2]+h[p+m>>2],h[(E=(_=4|m)+f|0)>>2]=h[E>>2]+h[p+_>>2],h[(E=(_=8|m)+f|0)>>2]=h[E>>2]+h[p+_>>2],h[(_=(m|=12)+f|0)>>2]=h[_>>2]+h[p+m>>2],d=d+4|0,(0|L)!=(0|(a=a+4|0)););if(O)for(;h[(m=(a=d<<2)+f|0)>>2]=h[m>>2]+h[a+p>>2],d=d+1|0,(0|O)!=(0|(A=A+1|0)););}if((0|(v=v+1|0))==(0|u))break}if(a=v=b(n,g),!r)break s;if(!n)break r;if(a=h[s>>2],d=0,u=0,M)break a;break n}a=b(n,g)}if(h[e+8>>2]<=0)break i;for(v=(b(g-1|0,n)<<2)+i|0,f=h[e+32>>2],d=0;(0|(u=h[(r=d<<2)+v>>2]))>(0|(p=h[e+16>>2]))?h[r+f>>2]=p:(r=r+f|0,p=h[e+12>>2],h[r>>2]=(0|p)>(0|u)?p:u),(0|(d=d+1|0))<(0|(u=h[e+8>>2])););if(r=0,(0|u)<=0)break i;for(d=(a<<=2)+i|0,v=t+a|0;;){a=(u=r<<2)+d|0,u=h[u+v>>2]+h[u+f>>2]|0,h[a>>2]=u;s:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break s;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(r=r+1|0))<h[e+8>>2]))break}break i}Sn(),x()}for(;h[(p=(f=d<<2)+a|0)>>2]=h[p>>2]/(0|r),h[(f=a+(4|f)|0)>>2]=h[f>>2]/(0|r),d=d+2|0,(0|C)!=(0|(u=u+2|0)););}k&&(h[(a=a+(d<<2)|0)>>2]=h[a>>2]/(0|r))}if(!(h[e+8>>2]<=0)){for(f=h[e+32>>2],d=0;(0|(a=h[(r=d<<2)+T>>2]))>(0|(u=h[e+16>>2]))?h[r+f>>2]=u:(r=r+f|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|a)?u:a),(0|(d=d+1|0))<(0|(a=h[e+8>>2])););if(r=0,!((0|a)<=0))for(d=(a=v<<2)+i|0,v=t+a|0;;){a=(u=r<<2)+d|0,u=h[u+v>>2]+h[u+f>>2]|0,h[a>>2]=u;r:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break r;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}}if(y=1,(0|D)==(0|(g=g+1|0)))break}return(e=h[s>>2])&&be(e),be(l),(e=h[s+52>>2])&&(h[s+56>>2]=e,be(e)),(e=h[s+40>>2])&&(h[s+44>>2]=e,be(e)),(e=h[s+28>>2])&&(h[s+32>>2]=e,be(e)),(e=h[s+16>>2])&&(h[s+20>>2]=e,be(e)),I=s- -64|0,0|y}bn(),x()},function(e){var t=0;return h[(e|=0)>>2]=3840,(t=h[e+76>>2])&&be(t),t=h[e+68>>2],h[e+68>>2]=0,t&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=3840,(t=h[e+76>>2])&&be(t),t=h[e+68>>2],h[e+68>>2]=0,t&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},sn,yr,hn,en,wr,Ve,function(e,t,i,r,n,s){e|=0,t|=0,i|=0,r|=0,n|=0,s|=0;var o=0,l=0,c=v(0),u=v(0),f=0,p=0,g=0,y=v(0),A=v(0),E=v(0),S=v(0),M=0,R=v(0),P=v(0),C=v(0),k=v(0),O=v(0),D=v(0),N=v(0),L=v(0),U=v(0),V=0,F=v(0);h[e+64>>2]=s,h[e+72>>2]=n,s=mr((1073741823&n)!=(0|n)?-1:n<<2),r=h[e+68>>2],h[e+68>>2]=s,r&&be(r),h[e+8>>2]=n,o=h[(s=e+32|0)>>2],(r=h[e+36>>2]-o>>2)>>>0<n>>>0?ei(s,n-r|0):r>>>0<=n>>>0||(h[e+36>>2]=o+(n<<2));e:if(r=h[e+56>>2],!((0|(r=(o=h[r+4>>2])-(s=h[r>>2])|0))<=0)){if((0|s)!=(0|o))for(V=(r=r>>>2|0)>>>0>1?r:1;;){if(l=h[(g<<2)+s>>2],u=v(0),I=o=I-48|0,s=-1,r=-1,-1!=(0|l)&&(s=((r=l+1|0)>>>0)%3|0?r:l-2|0,r=l-1|0,(l>>>0)%3|0||(r=l+2|0)),f=h[e+52>>2],l=h[f>>2],f=h[f+4>>2]-l>>2,p=s<<2,s=h[h[e+48>>2]+28>>2],f>>>0<=(p=h[p+s>>2])>>>0||(s=h[s+(r<<2)>>2])>>>0>=f>>>0)Sn(),x();else{t:if((0|(f=h[l+(s<<2)>>2]))>=(0|g)|(0|(r=h[l+(p<<2)>>2]))>=(0|g)){if((0|r)<(0|g))s=h[e+72>>2],r=b(r,s);else{if(s=0,(0|g)<=0){if(h[e+72>>2]<=0)break t;for(r=h[e+68>>2];h[r+(s<<2)>>2]=0,(0|(s=s+1|0))<h[e+72>>2];);break t}s=h[e+72>>2],r=b(s,g-1|0)}if(!((0|s)<=0))for(l=h[e+68>>2],s=0;h[l+(s<<2)>>2]=h[(r+s<<2)+i>>2],(0|(s=s+1|0))<h[e+72>>2];);}else{if(s=h[e+72>>2],l=(b(s,f)<<2)+i|0,y=v(h[l+4>>2]),s=(b(r,s)<<2)+i|0,S=v(h[s+4>>2]),!((R=v(h[l>>2]))!=(D=v(h[s>>2]))|y!=S)){if(r=h[e+68>>2],s=v(_(y))<v(2147483648)?~~y:-2147483648,h[r+4>>2]=s,v(_(R))<v(2147483648)){h[r>>2]=~~R;break t}h[r>>2]=-2147483648;break t}s=h[h[e+64>>2]+(g<<2)>>2],h[o+40>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,l=h[e+60>>2],d[l+84|0]||(s=h[h[l+68>>2]+(s<<2)>>2]),Z(l,s,a[l+24|0],o+32|0),s=h[h[e+64>>2]+(r<<2)>>2],h[o+24>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,r=h[e+60>>2],d[r+84|0]||(s=h[h[r+68>>2]+(s<<2)>>2]),Z(r,s,a[r+24|0],o+16|0),s=h[h[e+64>>2]+(f<<2)>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,r=h[e+60>>2],d[r+84|0]||(s=h[h[r+68>>2]+(s<<2)>>2]),Z(r,s,a[r+24|0],o),P=m[o+40>>2],C=m[o+36>>2],F=m[o+32>>2],A=m[o+24>>2],c=v(m[o+8>>2]-A),L=m[o+20>>2],k=v(m[o+4>>2]-L),U=m[o+16>>2],O=v(m[o>>2]-U),!((N=v(v(c*c)+v(v(k*k)+v(v(O*O)+v(0)))))>v(0))&&(E=v(0),h[e+88>>2]>257)||(A=v(P-A),P=v(C-L),C=v(F-U),u=v(v(v(c*A)+v(v(k*P)+v(v(O*C)+v(0))))/N),c=v(A-v(c*u)),A=v(c*c),c=v(P-v(k*u)),E=v(c*c),c=v(C-v(O*u)),E=v(T(v(v(A+v(E+v(v(c*c)+v(0))))/N)))),A=E,r=h[e+80>>2]-1|0,s=h[h[e+76>>2]+(r>>>3&536870908)>>2],h[e+80>>2]=r,c=v(y-S),E=v(v(c*u)+S),S=v(R-D),y=v(S*A),y=v(E+((r=s>>>r&1)?y:v(-y))),E=v(v(S*u)+D),u=v(c*A),(u=v(E+(r?v(-u):u)))==u?(s=h[e+68>>2],M=w(+u+.5),r=_(M)<2147483648?~~M:-2147483648,h[s>>2]=r):(s=h[e+68>>2],h[s>>2]=-2147483648),M=w(+y+.5),r=_(M)<2147483648?~~M:-2147483648,h[s+4>>2]=y!=y?-2147483648:r}I=o+48|0}if(!(h[e+8>>2]<=0)){for(l=h[e+32>>2],f=h[e+68>>2],s=0;(0|(o=h[(r=s<<2)+f>>2]))>(0|(p=h[e+16>>2]))?h[r+l>>2]=p:(r=r+l|0,p=h[e+12>>2],h[r>>2]=(0|p)>(0|o)?p:o),(0|(s=s+1|0))<(0|(o=h[e+8>>2])););if(r=0,!((0|o)<=0))for(f=(s=b(n,g)<<2)+i|0,p=t+s|0;;){s=(o=r<<2)+f|0,o=h[o+p>>2]+h[o+l>>2]|0,h[s>>2]=o;t:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break t;o=o+h[e+20>>2]|0}h[s>>2]=o}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if((0|V)==(0|(g=g+1|0)))break e;if(r=h[e+56>>2],s=h[r>>2],!(h[r+4>>2]-s>>2>>>0>g>>>0))break}Sn(),x()}return 1},function(e){var t=0;return h[(e|=0)>>2]=4068,(t=h[e+76>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=4068,(t=h[e+76>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},ln,yr,hn,en,wr,Ge,function(e,t,i,r,n,s){e|=0,t|=0,i|=0,r|=0,s|=0;var o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,U=0,V=0,F=0,G=0,B=0,j=0,z=0,H=0,W=0,$=0,Y=0,X=0,q=0,Z=0,J=0;if(2==(0|(n|=0))){h[e+8>>2]=2,h[e- -64>>2]=s,s=h[(n=e+32|0)>>2],(r=h[e+36>>2]-s|0)>>>0<=7?ei(n,2-(r>>>2|0)|0):8!=(0|r)&&(h[e+36>>2]=s+8);e:if(r=h[e+56>>2],(0|(s=(n=h[r+4>>2])-(r=h[r>>2])|0))<=0)s=0;else{if((0|r)!=(0|n))for(m=e+60|0,X=(0|(V=s>>2))>1?V:1,s=1;;){I=u=I-80|0,n=-1,o=-1,-1!=(0|(r=h[(_<<2)+r>>2]))&&(n=((n=r+1|0)>>>0)%3|0?n:r-2|0,o=r-1|0,(r>>>0)%3|0||(o=r+2|0)),c=h[m+36>>2],r=h[c>>2];t:{i:{r:{n:{if(c=h[c+4>>2]-r>>2,l=n<<2,n=h[h[m+32>>2]+28>>2],!(c>>>0<=(f=h[l+n>>2])>>>0||(n=h[n+(o<<2)>>2])>>>0>=c>>>0)){a:{if(!((0|(o=h[r+(n<<2)>>2]))>=(0|_)|(0|(c=h[r+(f<<2)>>2]))>=(0|_))){if(S=h[4+(r=(o<<3)+i|0)>>2],A=h[4+(n=(c<<3)+i|0)>>2],!((0|(M=h[r>>2]))!=(0|(O=h[n>>2]))|(0|A)!=(0|S))){h[m+8>>2]=O,h[m+12>>2]=A;break a}if(r=h[h[m+4>>2]+(_<<2)>>2],h[u+72>>2]=0,h[u+76>>2]=0,h[(n=u- -64|0)>>2]=0,h[n+4>>2]=0,h[u+56>>2]=0,h[u+60>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],u+56|0),r=h[h[m+4>>2]+(c<<2)>>2],h[u+48>>2]=0,h[u+52>>2]=0,h[u+40>>2]=0,h[u+44>>2]=0,h[u+32>>2]=0,h[u+36>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],u+32|0),r=h[h[m+4>>2]+(o<<2)>>2],h[u+24>>2]=0,h[u+28>>2]=0,h[u+16>>2]=0,h[u+20>>2]=0,h[u+8>>2]=0,h[u+12>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],u+8|0),F=h[u+44>>2],r=Xi(b=(r=h[u+16>>2])-(n=D=h[u+40>>2])|0,f=h[u+20>>2]-(F+(r>>>0<n>>>0)|0)|0,b,f),n=L,g=r,G=h[u+36>>2],o=Xi(E=(r=h[u+8>>2])-(o=N=h[u+32>>2])|0,l=h[u+12>>2]-(G+(r>>>0<o>>>0)|0)|0,E,l),n=L+n|0,n=(r=g+o|0)>>>0<o>>>0?n+1|0:n,g=r,B=h[u+52>>2],y=Xi(v=(r=h[u+24>>2])-(o=U=h[u+48>>2])|0,p=h[u+28>>2]-(B+(r>>>0<o>>>0)|0)|0,v,p),o=L+n|0,w=r=g+y|0,r|(y=r>>>0<y>>>0?o+1|0:o)){if(r=Xi((r=g=h[u+64>>2])-D|0,(z=h[u+68>>2])-((r>>>0<D>>>0)+F|0)|0,b,f),n=L,r=(o=r)+(c=Xi((r=H=h[u+56>>2])-N|0,(W=h[u+60>>2])-((r>>>0<N>>>0)+G|0)|0,E,l))|0,o=L+n|0,o=r>>>0<c>>>0?o+1|0:o,r=(n=r)+(c=Xi((r=$=h[u+72>>2])-U|0,(Y=h[u+76>>2])-((r>>>0<U>>>0)+B|0)|0,v,p))|0,n=L+o|0,R=r,T=r>>>0<c>>>0?n+1|0:n,o=(r=p>>31)+p|0,o=(n=r+v|0)>>>0<r>>>0?o+1|0:o,n^=r,c=r^=o,o=(r=f>>31)+f|0,C=r^(P=r+b|0),P=r^=r>>>0>P>>>0?o+1|0:o,j=0,o=(r=l>>31)+l|0,o=(k=r+E|0)>>>0<r>>>0?o+1|0:o,q=n,k^=r,(n=qe(-1,2147483647,(n=(0|c)==(0|(r=(o=(0|P)==(0|(r^=o))&C>>>0>k>>>0|r>>>0<P>>>0)?P:r))&n>>>0>(C=o?C:k)>>>0|r>>>0<c>>>0)?q:C,n?c:r)>>>0<R>>>0)&(0|(r=L))<=(0|T)|(0|r)<(0|T))break t;if(c=1,r=0,n=g,b=$i(Xi(b,f,R,T),L,w,y),o=L+F|0,o=z-((n>>>0<(f=b+D|0)>>>0)+(o=f>>>0<b>>>0?o+1|0:o)|0)|0,o=Xi(n=n-f|0,o,n,o),b=L,n=H,g=o,l=$i(Xi(E,l,R,T),L,w,y),o=L+G|0,o=W-((n>>>0<(f=l+N|0)>>>0)+(o=l>>>0>f>>>0?o+1|0:o)|0)|0,f=Xi(n=n-f|0,o,n,o),n=L+b|0,f=n=(o=g+f|0)>>>0<f>>>0?n+1|0:n,n=$,g=o,p=$i(Xi(v,p,R,T),L,w,y),o=L+B|0,o=Y-((n>>>0<(l=p+U|0)>>>0)+(o=l>>>0<p>>>0?o+1|0:o)|0)|0,l=Xi(n=n-l|0,o,n,o),o=L+f|0,f=Xi(n=g+l|0,n>>>0<l>>>0?o+1|0:o,w,y),l=n=L,!n&f>>>0<=1)break n;for(p=f,n=l;o=r<<1|c>>>31,c<<=1,r=o,b=!n&p>>>0>7|0!=(0|n),p=(3&n)<<30|p>>>2,n=n>>>2|0,b;);break r}}if((0|c)<(0|_))r=c<<1;else{if((0|_)<=0){h[m+8>>2]=0,h[m+12>>2]=0;break a}r=(_<<1)-2|0}r=(r<<2)+i|0,h[m+8>>2]=h[r>>2],h[m+12>>2]=h[r+4>>2]}j=1;break t}Sn(),x()}if(r=l,(c=f)-1|0)break i}for(;n=qe(f,l,c,r)+c|0,o=r+L|0,n=Xi(c=(1&(o=n>>>0<c>>>0?o+1|0:o))<<31|n>>>1,r=o>>>1|0,c,r),(0|l)==(0|(o=L))&n>>>0>f>>>0|o>>>0>l>>>0;);}(f=h[m+20>>2])&&(n=f-1|0,p=h[h[m+16>>2]+(n>>>3&536870908)>>2],h[m+20>>2]=n,o=Xi(R,T,b=S-(o=A)|0,E=(S>>31)-((l=o>>31)+(o>>>0>S>>>0)|0)|0),v=L,l=(A=Xi(A,l,w,y))+o|0,o=L+v|0,o=l>>>0<A>>>0?o+1|0:o,g=l,M=l=Xi(c,r,v=M-(l=O)|0,S=(M>>31)-((A=l>>31)+(l>>>0>M>>>0)|0)|0),l=g+(p=(n=p>>>n&1)?0-l|0:l)|0,g=o,o=L,o=g+(n?0-(o+(0!=(0|M))|0)|0:o)|0,Z=m,J=$i(l,l>>>0<p>>>0?o+1|0:o,w,y),h[Z+12>>2]=J,o=Xi(v,S,R,T),p=L,l=(v=Xi(w,y,O,A))+o|0,o=L+p|0,o=l>>>0<v>>>0?o+1|0:o,g=l,r=Xi(c,r,b,E),c=g+(l=n?r:0-r|0)|0,g=o,o=L,n=g+(n?o:0-((0!=(0|r))+o|0)|0)|0,Z=m,J=$i(c,c>>>0<l>>>0?n+1|0:n,w,y),h[Z+8>>2]=J),j=0!=(0|f)}if(I=u+80|0,!j)break e;if(!(h[e+8>>2]<=0)){for(o=h[e+32>>2],r=0;(0|(s=h[68+((n=r<<2)+e|0)>>2]))>(0|(c=h[e+16>>2]))?h[n+o>>2]=c:(n=n+o|0,c=h[e+12>>2],h[n>>2]=(0|c)>(0|s)?c:s),(0|(r=r+1|0))<(0|(s=h[e+8>>2])););if(n=0,!((0|s)<=0))for(c=(r=_<<3)+i|0,f=t+r|0;;){r=(s=n<<2)+c|0,s=h[s+f>>2]+h[s+o>>2]|0,h[r>>2]=s;t:{if((0|s)>h[e+16>>2])s=s-h[e+20>>2]|0;else{if((0|s)>=h[e+12>>2])break t;s=s+h[e+20>>2]|0}h[r>>2]=s}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if(s=(0|V)>(0|(_=_+1|0)),(0|_)==(0|X))break e;if(n=h[e+56>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>_>>>0))break}Sn(),x()}e=1^s}else e=0;return 1&e},function(e){var t;return h[(e|=0)>>2]=4304,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t;h[(e|=0)>>2]=4304,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},un,sr,hn,en,Sr,rt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0;I=s=I-32|0,h[68+(e|=0)>>2]=a,n=h[e+56>>2],r=h[n>>2],a=h[n+4>>2],h[s+24>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+112|0,p=e+60|0,m=(n=a>>>2|0)>>>0>1?n:1;;){if(se(p,h[(u<<2)+r>>2],s+16|0),r=(n=h[s+20>>2])>>31,o=(a=h[s+16>>2])>>31,l=(c=h[s+24>>2])>>31,o=(l^=l+c)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+108>>2],d=l>>31,a,a>>31),L,o,r),h[s+16>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+20>>2]=r,r=(n=(n=r)+(r>>=31)^r)+((r=a>>31)+a^r)|0,h[s+24>>2]=(0|c)>=0?l-r:r-l):h[s+16>>2]=h[e+108>>2],r=Gi(f),a=h[s+16>>2],r?(h[s+24>>2]=0-h[s+24>>2],n=0-h[s+20>>2]|0,h[s+20>>2]=n,a=0-a|0,h[s+16>>2]=a):n=h[s+20>>2],(0|a)>=0?(a=(r=h[e+108>>2])+h[s+24>>2]|0,r=r+n|0):((0|n)<0?(r=(a=h[s+24>>2])>>31,r^=r+a):(r=(a=h[s+24>>2])>>31,r=h[e+100>>2]-(r^r+a)|0),(0|a)<0?a=(a=n)+(n>>=31)^n:(a=n,n>>=31,a=h[e+100>>2]-(a+n^n)|0)),n=h[e+100>>2],r|a?(0|n)!=(0|a)|r?(0|r)!=(0|n)|a?r||(0|(o=h[e+108>>2]))>=(0|a)?(0|r)!=(0|n)||(0|(o=h[e+108>>2]))<=(0|a)?(0|n)!=(0|a)||(0|(n=h[e+108>>2]))<=(0|r)?a||(a=0,(0|(n=h[e+108>>2]))>=(0|r)||(r=(n<<1)-r|0)):r=(n<<1)-r|0:a=(o<<1)-a|0:(a=(o<<1)-a|0,r=0):a=r:r=a:r=a=n,h[s+12>>2]=a,h[s+8>>2]=r,!(h[e+8>>2]<=0)){for(o=h[e+32>>2],a=0;(0|(n=h[e+16>>2]))<(0|r)?h[o+(a<<2)>>2]=n:(n=o+(a<<2)|0,c=h[e+12>>2],h[n>>2]=(0|c)>(0|r)?c:r),(0|(a=a+1|0))<(0|(n=h[e+8>>2]));)r=h[(s+8|0)+(a<<2)>>2];if(r=0,!((0|n)<=0))for(c=(n=u<<3)+i|0,l=t+n|0;;){n=(a=r<<2)+c|0,a=h[a+l>>2]+h[a+o>>2]|0,h[n>>2]=a;t:{if((0|a)>h[e+16>>2])a=a-h[e+20>>2]|0;else{if((0|a)>=h[e+12>>2])break t;a=a+h[e+20>>2]|0}h[n>>2]=a}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if((0|m)==(0|(u=u+1|0)))break e;if(n=h[e+56>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>u>>>0))break}Sn(),x()}return I=s+32|0,1},an,fn,br,Yr,se,gn,Mr,hn,Er,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0;if(h[8+(e|=0)>>2]=n,p=h[(r=e+32|0)>>2],(a=h[e+36>>2]-p>>2)>>>0<n>>>0?(ei(r,n-a|0),p=h[r>>2],r=h[e+8>>2]):(n>>>0<a>>>0&&(h[e+36>>2]=(n<<2)+p),r=n),l=h[e+52>>2],s=h[e+48>>2],a=0,g=xt(mr(g=(1073741823&n)!=(0|n)?-1:n<<2),0,g),!((0|r)<=0)){for(;(0|(c=h[(r=a<<2)+g>>2]))>(0|(d=h[e+16>>2]))?h[r+p>>2]=d:(r=r+p|0,d=h[e+12>>2],h[r>>2]=(0|d)>(0|c)?d:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(!((0|r)<=0))for(a=0;;){r=(c=a<<2)+i|0,c=h[t+c>>2]+h[c+p>>2]|0,h[r>>2]=c;e:{if((0|c)>h[e+16>>2])u=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break e;u=c+h[e+20>>2]|0}h[r>>2]=u}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],o=h[a>>2],(0|(a=h[a+4>>2]-o|0))>=5)for(_=(0|(a>>=2))>2?a:2,y=a>>>0>1?a:1,A=-2&n,E=1&n,p=1;;){e:{t:{if((0|p)!=(0|y)){if(v=b(n,p),-1==(0|(a=h[(p<<2)+o>>2])))break t;if(-1==(0|(a=h[h[s+12>>2]+(a<<2)>>2])))break t;d=h[l>>2],c=h[s>>2],f=h[d+(h[c+(a<<2)>>2]<<2)>>2],u=-1!=(0|(u=((u=a+1|0)>>>0)%3|0?u:a-2|0))?h[c+(u<<2)>>2]:-1;i:{if((a>>>0)%3|0)a=a-1|0;else if(m=-1,-1==(0|(a=a+2|0)))break i;m=h[c+(a<<2)>>2]}if((0|f)>=(0|p))break t;if((0|(a=h[(u<<2)+d>>2]))>=(0|p))break t;if((0|(c=h[d+(m<<2)>>2]))>=(0|p))break t;if(!((0|n)<=0)){if(c=b(n,c),d=b(n,a),f=b(n,f),a=0,m=0,1!=(0|n))for(;h[g+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+d<<2)+i>>2]|0)-h[(a+f<<2)+i>>2],h[g+((u=1|a)<<2)>>2]=(h[(c+u<<2)+i>>2]+h[(d+u<<2)+i>>2]|0)-h[(u+f<<2)+i>>2],a=a+2|0,(0|A)!=(0|(m=m+2|0)););E&&(h[g+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+d<<2)+i>>2]|0)-h[(a+f<<2)+i>>2])}if((0|r)<=0)break e;for(d=h[e+32>>2],a=0;(0|(c=h[(r=a<<2)+g>>2]))>(0|(f=h[e+16>>2]))?h[r+d>>2]=f:(r=r+d|0,f=h[e+12>>2],h[r>>2]=(0|f)>(0|c)?f:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,(0|r)<=0)break e;for(f=(r=v<<2)+i|0,u=t+r|0;;){r=(c=a<<2)+f|0,c=h[c+u>>2]+h[c+d>>2]|0,h[r>>2]=c;i:{if((0|c)>h[e+16>>2])m=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break i;m=c+h[e+20>>2]|0}h[r>>2]=m}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}Sn(),x()}if(!((0|r)<=0)){for(f=(b(p-1|0,n)<<2)+i|0,d=h[e+32>>2],a=0;(0|(c=h[(r=a<<2)+f>>2]))>(0|(u=h[e+16>>2]))?h[r+d>>2]=u:(r=r+d|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|c)?u:c),(0|(r=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,!((0|r)<=0))for(f=(r=v<<2)+i|0,u=t+r|0;;){r=(c=a<<2)+f|0,c=h[c+u>>2]+h[c+d>>2]|0,h[r>>2]=c;t:{if((0|c)>h[e+16>>2])m=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break t;m=c+h[e+20>>2]|0}h[r>>2]=m}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|_)==(0|(p=p+1|0)))break}return be(g),1},gn,Mr,cn,Er,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0;if(h[8+(e|=0)>>2]=n,d=h[(r=e+32|0)>>2],(a=h[e+36>>2]-d>>2)>>>0<n>>>0?(ei(r,n-a|0),d=h[r>>2],r=h[e+8>>2]):(n>>>0<a>>>0&&(h[e+36>>2]=(n<<2)+d),r=n),s=xt(mr(a=(1073741823&n)!=(0|n)?-1:n<<2),0,a),o=xt(mr(a),0,a),!((0|r)<=0)){for(;(0|(a=h[(r=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[r+d>>2]=u:(r=r+d|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|a)?u:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(!((0|r)<=0))for(a=0;;){r=(u=a<<2)+i|0,u=h[t+u>>2]+h[u+d>>2]|0,h[r>>2]=u;e:{if((0|u)>h[e+16>>2])c=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;c=u+h[e+20>>2]|0}h[r>>2]=c}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],l=h[a>>2],(0|(a=h[a+4>>2]-l|0))>=5)for(R=h[e+52>>2],E=h[e+48>>2],P=(0|(a>>=2))>2?a:2,C=a>>>0>1?a:1,w=-2&n,S=1&n,k=-4&n,T=3&n,A=n-1|0,O=n<<2,v=1;;){e:{t:{i:{r:if((0|v)==(0|C))Sn(),x();else{if(u=h[(v<<2)+l>>2],(y=(0|n)<=0)||xt(s,0,O),-1==(0|u)){u=b(n,v);break t}for(M=h[E+12>>2],m=0,a=u;;){if(-1!=(0|(c=h[(a<<2)+M>>2]))){f=h[R>>2],d=h[E>>2],_=h[f+(h[d+(c<<2)>>2]<<2)>>2],p=-1!=(0|(p=((p=c+1|0)>>>0)%3|0?p:c-2|0))?h[d+(p<<2)>>2]:-1;n:{if((c>>>0)%3|0)c=c-1|0;else if(g=-1,-1==(0|(c=c+2|0)))break n;g=h[d+(c<<2)>>2]}if(!((0|v)<=(0|_)||(0|(c=h[(p<<2)+f>>2]))>=(0|v)||(0|(d=h[f+(g<<2)>>2]))>=(0|v))){if(!y){if(d=b(n,d),f=b(n,c),_=b(n,_),c=0,g=0,A)for(;h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+_<<2)+i>>2],h[((p=1|c)<<2)+o>>2]=(h[(d+p<<2)+i>>2]+h[(f+p<<2)+i>>2]|0)-h[(p+_<<2)+i>>2],c=c+2|0,(0|w)!=(0|(g=g+2|0)););if(S&&(h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+_<<2)+i>>2]),!y){if(_=0,c=0,d=0,A>>>0>2)for(;h[(p=(f=c<<2)+s|0)>>2]=h[p>>2]+h[f+o>>2],h[(g=(p=4|f)+s|0)>>2]=h[g>>2]+h[p+o>>2],h[(g=(p=8|f)+s|0)>>2]=h[g>>2]+h[p+o>>2],h[(p=(f|=12)+s|0)>>2]=h[p>>2]+h[f+o>>2],c=c+4|0,(0|k)!=(0|(d=d+4|0)););if(T)for(;h[(f=(d=c<<2)+s|0)>>2]=h[f>>2]+h[d+o>>2],c=c+1|0,(0|T)!=(0|(_=_+1|0)););}}m=m+1|0}}n:{if((a>>>0)%3|0)a=a-1|0;else if(c=-1,-1==(0|(a=a+2|0)))break n;c=-1,-1!=(0|(a=h[(a<<2)+M>>2]))&&(c=a-1|0,(a>>>0)%3|0||(c=a+2|0))}if(-1==(0|(a=(0|c)==(0|u)?-1:c)))break}if(u=b(n,v),!m)break t;if(y)break i;if(c=0,a=0,!A)break r;for(;h[(f=(d=c<<2)+s|0)>>2]=h[f>>2]/(0|m),h[(d=(4|d)+s|0)>>2]=h[d>>2]/(0|m),c=c+2|0,(0|w)!=(0|(a=a+2|0)););}S&&(h[(a=(c<<2)+s|0)>>2]=h[a>>2]/(0|m))}if((0|r)<=0)break e;for(d=h[e+32>>2],c=0;(0|(a=h[(r=c<<2)+s>>2]))>(0|(m=h[e+16>>2]))?h[r+d>>2]=m:(r=r+d|0,m=h[e+12>>2],h[r>>2]=(0|m)>(0|a)?m:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,(0|r)<=0)break e;for(c=(r=u<<2)+i|0,m=t+r|0;;){r=(u=a<<2)+c|0,u=h[u+m>>2]+h[u+d>>2]|0,h[r>>2]=u;i:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break i;u=u+h[e+20>>2]|0}h[r>>2]=u}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}if(!((0|r)<=0)){for(m=(b(v-1|0,n)<<2)+i|0,d=h[e+32>>2],c=0;(0|(a=h[(r=c<<2)+m>>2]))>(0|(f=h[e+16>>2]))?h[r+d>>2]=f:(r=r+d|0,f=h[e+12>>2],h[r>>2]=(0|f)>(0|a)?f:a),(0|(r=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,!((0|r)<=0))for(c=(r=u<<2)+i|0,m=t+r|0;;){r=(u=a<<2)+c|0,u=h[u+m>>2]+h[u+d>>2]|0,h[r>>2]=u;t:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break t;u=u+h[e+20>>2]|0}h[r>>2]=u}if(!((0|(r=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|P)==(0|(v=v+1|0)))break}return be(o),be(s),1},function(e){var t=0;return h[(e|=0)>>2]=5608,(t=h[e+96>>2])&&be(t),(t=h[e+84>>2])&&be(t),(t=h[e+72>>2])&&be(t),(t=h[e+60>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=5608,(t=h[e+96>>2])&&be(t),(t=h[e+84>>2])&&be(t),(t=h[e+72>>2])&&be(t),(t=h[e+60>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},on,Er,Se,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o,l,c,u=0,d=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0;I=s=I+-64|0,h[8+(e|=0)>>2]=n,u=h[(a=e+32|0)>>2];e:{if((r=h[e+36>>2]-u>>2)>>>0<n>>>0)ei(a,n-r|0),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0;else if(r>>>0>n>>>0&&(h[e+36>>2]=u+(n<<2)),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0,r=0,!n)break e;$e(s+16|0,n,s),d=h[s+28>>2],r=h[s+32>>2]}h[s>>2]=0;e:if((r=r-d>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+32>>2]=(n<<2)+d}else $e(s+16|12,n-r|0,s);h[s>>2]=0,a=h[s+40>>2];e:if((r=h[s+44>>2]-a>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+44>>2]=a+(n<<2)}else $e(s+40|0,n-r|0,s);h[s>>2]=0,a=h[s+52>>2];e:if((r=h[s+56>>2]-a>>2)>>>0>=n>>>0){if(r>>>0<=n>>>0)break e;h[s+56>>2]=a+(n<<2)}else $e(s+52|0,n-r|0,s);if(d=0,!(h[e+8>>2]<=0)){for(p=h[e+32>>2],u=h[s+16>>2];(0|(a=h[(r=d<<2)+u>>2]))>(0|(v=h[e+16>>2]))?h[r+p>>2]=v:(r=r+p|0,v=h[e+12>>2],h[r>>2]=(0|v)>(0|a)?v:a),(0|(d=d+1|0))<(0|(r=h[e+8>>2])););if(!((0|r)<=0))for(r=0;;){a=(u=r<<2)+i|0,u=h[t+u>>2]+h[u+p>>2]|0,h[a>>2]=u;e:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}c=h[e+52>>2],l=h[e+48>>2],o=mr(16),h[(r=o)>>2]=0,h[r+4>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,h[s+8>>2]=0,h[s>>2]=0,h[s+4>>2]=0;e:{if(n){if(n>>>0>=1073741824)break e;T=mr(r=n<<2),h[s>>2]=T,h[s+8>>2]=r+T,xt(T,0,r)}E=1,r=h[e+56>>2],P=h[r>>2];t:if(!((0|(r=h[r+4>>2]-P|0))<5))for(D=(0|(r>>=2))>2?r:2,N=r>>>0>1?r:1,C=-2&n,k=1&n,L=-4&n,O=3&n,M=n-1|0,U=n<<2,v=1;;){i:{r:{n:{a:{if((0|v)!=(0|N)){r=((a=h[(v<<2)+P>>2])>>>0)%3|0;s:{o:if(-1!=(0|a)){p=0,R=0!=(0|r)|-1!=(0|(u=a+2|0)),A=(w=h[l+12>>2])+((r?a-1|0:u)<<2)|0,_=1,r=a;l:{for(;;){if(-1!=(0|(u=h[w+(r<<2)>>2]))){m=-1,E=h[c>>2],g=h[l>>2],d=E+(h[g+(u<<2)>>2]<<2)|0,-1!=(0|(y=((y=u+1|0)>>>0)%3|0?y:u-2|0))&&(m=h[g+(y<<2)>>2]),y=h[d>>2];c:{if((u>>>0)%3|0)d=u-1|0;else if(f=-1,-1==(0|(d=u+2|0)))break c;f=h[g+(d<<2)>>2]}if(!((0|v)<=(0|y)||(0|(d=h[E+(m<<2)>>2]))>=(0|v)||(0|(m=h[E+(f<<2)>>2]))>=(0|v))){if(u=h[(s+16|0)+b(p,12)>>2],n){if(m=b(n,m),g=b(n,d),E=b(n,y),d=0,f=0,M)for(;h[u+(d<<2)>>2]=(h[(d+m<<2)+i>>2]+h[(d+g<<2)+i>>2]|0)-h[(d+E<<2)+i>>2],h[u+((y=1|d)<<2)>>2]=(h[(m+y<<2)+i>>2]+h[(g+y<<2)+i>>2]|0)-h[(y+E<<2)+i>>2],d=d+2|0,(0|C)!=(0|(f=f+2|0)););k&&(h[u+(d<<2)>>2]=(h[(d+m<<2)+i>>2]+h[(d+g<<2)+i>>2]|0)-h[(d+E<<2)+i>>2])}if(u=4,4==(0|(p=p+1|0)))break l}}c:if(1&_){if(f=-1,-1==(0|(r=((d=r+1|0)>>>0)%3|0?d:r-2|0)))break c;if(f=-1,-1==(0|(r=h[w+(r<<2)>>2])))break c;f=((u=r+1|0)>>>0)%3|0?u:r-2|0}else{if((r>>>0)%3|0)d=r-1|0;else if(f=-1,-1==(0|(d=r+2|0)))break c;f=-1,-1!=(0|(r=h[w+(d<<2)>>2]))&&(f=r-1|0,(r>>>0)%3|0||(f=r+2|0))}c:if((0|a)!=(0|(r=f))){if(!(1&(1^_)|-1!=(0|r))){if(!R)break c;if(-1==(0|(r=h[A>>2])))break c;_=0,r=(r>>>0)%3|0?r-1|0:r+2|0}if(-1!=(0|r))continue}break}if((0|(u=p))<=0)break o}for(n&&xt(h[s>>2],0,U),y=((r=u-1|0)<<2)+o|0,f=r=b(r,12)+e|0,R=h[r- -64>>2],E=0,_=0,r=0;;){if(a=h[y>>2],h[y>>2]=a+1,a>>>0>=R>>>0)break t;if(!(h[h[f+60>>2]+(a>>>3&536870908)>>2]>>>a&1)&&(r=r+1|0,n)){if(p=h[s>>2],w=h[(s+16|0)+b(_,12)>>2],m=0,d=0,a=0,M>>>0>=3)for(;h[(A=(g=d<<2)+p|0)>>2]=h[A>>2]+h[g+w>>2],h[(S=(A=4|g)+p|0)>>2]=h[S>>2]+h[w+A>>2],h[(S=(A=8|g)+p|0)>>2]=h[S>>2]+h[w+A>>2],h[(A=(g|=12)+p|0)>>2]=h[A>>2]+h[g+w>>2],d=d+4|0,(0|L)!=(0|(a=a+4|0)););if(O)for(;h[(g=(a=d<<2)+p|0)>>2]=h[g>>2]+h[a+w>>2],d=d+1|0,(0|O)!=(0|(m=m+1|0)););}if((0|(_=_+1|0))==(0|u))break}if(a=_=b(n,v),!r)break s;if(!n)break r;if(a=h[s>>2],d=0,u=0,M)break a;break n}a=b(n,v)}if(h[e+8>>2]<=0)break i;for(_=(b(v-1|0,n)<<2)+i|0,p=h[e+32>>2],d=0;(0|(u=h[(r=d<<2)+_>>2]))>(0|(m=h[e+16>>2]))?h[r+p>>2]=m:(r=r+p|0,m=h[e+12>>2],h[r>>2]=(0|m)>(0|u)?m:u),(0|(d=d+1|0))<(0|(u=h[e+8>>2])););if(r=0,(0|u)<=0)break i;for(d=(a<<=2)+i|0,_=t+a|0;;){a=(u=r<<2)+d|0,u=h[u+_>>2]+h[u+p>>2]|0,h[a>>2]=u;s:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break s;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(r=r+1|0))<h[e+8>>2]))break}break i}Sn(),x()}for(;h[(m=(p=d<<2)+a|0)>>2]=h[m>>2]/(0|r),h[(p=a+(4|p)|0)>>2]=h[p>>2]/(0|r),d=d+2|0,(0|C)!=(0|(u=u+2|0)););}k&&(h[(a=a+(d<<2)|0)>>2]=h[a>>2]/(0|r))}if(!(h[e+8>>2]<=0)){for(p=h[e+32>>2],d=0;(0|(a=h[(r=d<<2)+T>>2]))>(0|(u=h[e+16>>2]))?h[r+p>>2]=u:(r=r+p|0,u=h[e+12>>2],h[r>>2]=(0|u)>(0|a)?u:a),(0|(d=d+1|0))<(0|(a=h[e+8>>2])););if(r=0,!((0|a)<=0))for(d=(a=_<<2)+i|0,_=t+a|0;;){a=(u=r<<2)+d|0,u=h[u+_>>2]+h[u+p>>2]|0,h[a>>2]=u;r:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break r;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}}if(E=1,(0|D)==(0|(v=v+1|0)))break}return(e=h[s>>2])&&be(e),be(o),(e=h[s+52>>2])&&(h[s+56>>2]=e,be(e)),(e=h[s+40>>2])&&(h[s+44>>2]=e,be(e)),(e=h[s+28>>2])&&(h[s+32>>2]=e,be(e)),(e=h[s+16>>2])&&(h[s+20>>2]=e,be(e)),I=s- -64|0,0|E}bn(),x()},function(e){var t=0;return h[(e|=0)>>2]=5844,(t=h[e+76>>2])&&be(t),t=h[e+68>>2],h[e+68>>2]=0,t&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=5844,(t=h[e+76>>2])&&be(t),t=h[e+68>>2],h[e+68>>2]=0,t&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},sn,yr,hn,en,wr,Ve,function(e,t,i,r,n,s){e|=0,t|=0,i|=0,r|=0,n|=0,s|=0;var o=0,l=0,c=v(0),u=0,f=v(0),p=0,g=v(0),y=v(0),A=v(0),E=0,S=v(0),M=0,R=v(0),P=v(0),C=v(0),k=v(0),O=v(0),D=v(0),N=v(0),L=v(0),U=v(0),V=0,F=v(0);h[e+64>>2]=s,h[e+72>>2]=n,s=mr((1073741823&n)!=(0|n)?-1:n<<2),r=h[e+68>>2],h[e+68>>2]=s,r&&be(r),h[e+8>>2]=n,o=h[(s=e+32|0)>>2],(r=h[e+36>>2]-o>>2)>>>0<n>>>0?ei(s,n-r|0):r>>>0<=n>>>0||(h[e+36>>2]=o+(n<<2));e:if(r=h[e+56>>2],!((0|(r=(o=h[r+4>>2])-(s=h[r>>2])|0))<=0)){if((0|s)!=(0|o))for(V=(r=r>>>2|0)>>>0>1?r:1;;){if(f=v(0),I=o=I-48|0,l=-1,-1==(0|(r=h[(p<<2)+s>>2]))||(u=h[e+48>>2],-1!=(0|(s=((s=r+1|0)>>>0)%3|0?s:r-2|0))&&(l=h[h[u>>2]+(s<<2)>>2]),s=-1,-1!=(0|(r=r+((r>>>0)%3|0?-1:2)|0))&&(s=h[h[u>>2]+(r<<2)>>2]),r=h[e+52>>2],u=h[r>>2],(r=h[r+4>>2]-u>>2)>>>0<=l>>>0|r>>>0<=s>>>0))Sn(),x();else{r=h[u+(l<<2)>>2];t:if((0|(u=h[u+(s<<2)>>2]))>=(0|p)|(0|r)>=(0|p)){if((0|r)<(0|p))s=h[e+72>>2],r=b(r,s);else{if(s=0,(0|p)<=0){if(h[e+72>>2]<=0)break t;for(r=h[e+68>>2];h[r+(s<<2)>>2]=0,(0|(s=s+1|0))<h[e+72>>2];);break t}s=h[e+72>>2],r=b(s,p-1|0)}if(!((0|s)<=0))for(l=h[e+68>>2],s=0;h[l+(s<<2)>>2]=h[(r+s<<2)+i>>2],(0|(s=s+1|0))<h[e+72>>2];);}else{if(s=h[e+72>>2],l=(b(s,u)<<2)+i|0,g=v(h[l+4>>2]),s=(b(r,s)<<2)+i|0,S=v(h[s+4>>2]),!((R=v(h[l>>2]))!=(D=v(h[s>>2]))|g!=S)){if(r=h[e+68>>2],s=v(_(g))<v(2147483648)?~~g:-2147483648,h[r+4>>2]=s,v(_(R))<v(2147483648)){h[r>>2]=~~R;break t}h[r>>2]=-2147483648;break t}s=h[h[e+64>>2]+(p<<2)>>2],h[o+40>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,l=h[e+60>>2],d[l+84|0]||(s=h[h[l+68>>2]+(s<<2)>>2]),Z(l,s,a[l+24|0],o+32|0),s=h[h[e+64>>2]+(r<<2)>>2],h[o+24>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,r=h[e+60>>2],d[r+84|0]||(s=h[h[r+68>>2]+(s<<2)>>2]),Z(r,s,a[r+24|0],o+16|0),s=h[h[e+64>>2]+(u<<2)>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,r=h[e+60>>2],d[r+84|0]||(s=h[h[r+68>>2]+(s<<2)>>2]),Z(r,s,a[r+24|0],o),P=m[o+40>>2],C=m[o+36>>2],F=m[o+32>>2],y=m[o+24>>2],c=v(m[o+8>>2]-y),L=m[o+20>>2],k=v(m[o+4>>2]-L),U=m[o+16>>2],O=v(m[o>>2]-U),!((N=v(v(c*c)+v(v(k*k)+v(v(O*O)+v(0)))))>v(0))&&(A=v(0),h[e+88>>2]>257)||(y=v(P-y),P=v(C-L),C=v(F-U),f=v(v(v(c*y)+v(v(k*P)+v(v(O*C)+v(0))))/N),c=v(y-v(c*f)),y=v(c*c),c=v(P-v(k*f)),A=v(c*c),c=v(C-v(O*f)),A=v(T(v(v(y+v(A+v(v(c*c)+v(0))))/N)))),y=A,r=h[e+80>>2]-1|0,s=h[h[e+76>>2]+(r>>>3&536870908)>>2],h[e+80>>2]=r,c=v(g-S),A=v(v(c*f)+S),S=v(R-D),g=v(S*y),g=v(A+((r=s>>>r&1)?g:v(-g))),A=v(v(S*f)+D),f=v(c*y),(f=v(A+(r?v(-f):f)))==f?(s=h[e+68>>2],M=w(+f+.5),r=_(M)<2147483648?~~M:-2147483648,h[s>>2]=r):(s=h[e+68>>2],h[s>>2]=-2147483648),M=w(+g+.5),r=_(M)<2147483648?~~M:-2147483648,h[s+4>>2]=g!=g?-2147483648:r}I=o+48|0}if(!(h[e+8>>2]<=0)){for(l=h[e+32>>2],u=h[e+68>>2],s=0;(0|(o=h[(r=s<<2)+u>>2]))>(0|(E=h[e+16>>2]))?h[r+l>>2]=E:(r=r+l|0,E=h[e+12>>2],h[r>>2]=(0|E)>(0|o)?E:o),(0|(s=s+1|0))<(0|(o=h[e+8>>2])););if(r=0,!((0|o)<=0))for(u=(s=b(n,p)<<2)+i|0,E=t+s|0;;){s=(o=r<<2)+u|0,o=h[o+E>>2]+h[o+l>>2]|0,h[s>>2]=o;t:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break t;o=o+h[e+20>>2]|0}h[s>>2]=o}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if((0|V)==(0|(p=p+1|0)))break e;if(r=h[e+56>>2],s=h[r>>2],!(h[r+4>>2]-s>>2>>>0>p>>>0))break}Sn(),x()}return 1},function(e){var t=0;return h[(e|=0)>>2]=6060,(t=h[e+76>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=6060,(t=h[e+76>>2])&&be(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},ln,yr,hn,en,wr,Ge,function(e,t,i,r,n,s){e|=0,t|=0,i|=0,r|=0,s|=0;var o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,U=0,V=0,F=0,G=0,B=0,j=0,z=0,H=0,W=0,$=0,Y=0,X=0,q=0,Z=0;if(2==(0|(n|=0))){h[e+8>>2]=2,h[e- -64>>2]=s,s=h[(n=e+32|0)>>2],(r=h[e+36>>2]-s|0)>>>0<=7?ei(n,2-(r>>>2|0)|0):8!=(0|r)&&(h[e+36>>2]=s+8);e:if(r=h[e+56>>2],(0|(s=(n=h[r+4>>2])-(r=h[r>>2])|0))<=0)s=0;else{if((0|r)!=(0|n))for(m=e+60|0,X=(0|(U=s>>2))>1?U:1,s=1;;){if(I=c=I-80|0,n=-1,-1==(0|(o=h[(v<<2)+r>>2]))||(l=h[m+32>>2],-1!=(0|(r=((r=o+1|0)>>>0)%3|0?r:o-2|0))&&(n=h[h[l>>2]+(r<<2)>>2]),r=-1,-1!=(0|(o=o+((o>>>0)%3|0?-1:2)|0))&&(r=h[h[l>>2]+(o<<2)>>2]),l=h[m+36>>2],o=h[l>>2],(l=h[l+4>>2]-o>>2)>>>0<=n>>>0|r>>>0>=l>>>0))Sn(),x();else{l=h[o+(n<<2)>>2];t:{i:{r:{n:{a:{if(!((0|(o=h[o+(r<<2)>>2]))>=(0|v)|(0|l)>=(0|v))){if(T=h[4+(r=(o<<3)+i|0)>>2],y=h[4+(n=(l<<3)+i|0)>>2],!((0|(E=h[r>>2]))!=(0|(O=h[n>>2]))|(0|y)!=(0|T))){h[m+8>>2]=O,h[m+12>>2]=y;break a}if(r=h[h[m+4>>2]+(v<<2)>>2],h[c+72>>2]=0,h[c+76>>2]=0,h[(n=c- -64|0)>>2]=0,h[n+4>>2]=0,h[c+56>>2]=0,h[c+60>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],c+56|0),r=h[h[m+4>>2]+(l<<2)>>2],h[c+48>>2]=0,h[c+52>>2]=0,h[c+40>>2]=0,h[c+44>>2]=0,h[c+32>>2]=0,h[c+36>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],c+32|0),n=h[h[m+4>>2]+(o<<2)>>2],h[c+24>>2]=0,h[c+28>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,h[c+8>>2]=0,h[c+12>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],c+8|0),V=h[c+44>>2],r=Xi(g=(r=h[c+16>>2])-(n=M=h[c+40>>2])|0,f=h[c+20>>2]-(V+(r>>>0<n>>>0)|0)|0,g,f),n=L,b=r,F=h[c+36>>2],o=Xi(w=(r=h[c+8>>2])-(o=D=h[c+32>>2])|0,u=h[c+12>>2]-(F+(r>>>0<o>>>0)|0)|0,w,u),n=L+n|0,n=(r=b+o|0)>>>0<o>>>0?n+1|0:n,b=r,G=h[c+52>>2],_=Xi(A=(r=h[c+24>>2])-(o=N=h[c+48>>2])|0,p=h[c+28>>2]-(G+(r>>>0<o>>>0)|0)|0,A,p),o=L+n|0,S=r=b+_|0,r|(_=r>>>0<_>>>0?o+1|0:o)){if(r=Xi((r=j=h[c+64>>2])-M|0,(z=h[c+68>>2])-((r>>>0<M>>>0)+V|0)|0,g,f),n=L,r=(o=r)+(l=Xi((r=H=h[c+56>>2])-D|0,(W=h[c+60>>2])-((r>>>0<D>>>0)+F|0)|0,w,u))|0,o=L+n|0,o=r>>>0<l>>>0?o+1|0:o,r=(n=r)+(l=Xi((r=$=h[c+72>>2])-N|0,(Y=h[c+76>>2])-((r>>>0<N>>>0)+G|0)|0,A,p))|0,n=L+o|0,P=r,R=r>>>0<l>>>0?n+1|0:n,o=(r=p>>31)+p|0,l=(n=r+A|0)^r,B=r^=o=n>>>0<r>>>0?o+1|0:o,n=(r=f>>31)+f|0,C=(o=r+g|0)^r,b=r^=o>>>0<r>>>0?n+1|0:n,n=0,o=(r=u>>31)+u|0,o=(k=r+w|0)>>>0<r>>>0?o+1|0:o,k^=r,(o=qe(-1,2147483647,(o=(0|B)==(0|(r=(o=(0|b)==(0|(r^=o))&C>>>0>k>>>0|r>>>0<b>>>0)?b:r))&l>>>0>(C=o?C:k)>>>0|r>>>0<B>>>0)?l:C,o?B:r)>>>0<P>>>0)&(0|(r=L))<=(0|R)|(0|r)<(0|R))break t;if(l=1,r=0,n=j,g=$i(Xi(g,f,P,R),L,S,_),o=L+V|0,o=z-((n>>>0<(f=g+M|0)>>>0)+(o=f>>>0<g>>>0?o+1|0:o)|0)|0,o=Xi(n=n-f|0,o,n,o),g=L,n=H,b=o,u=$i(Xi(w,u,P,R),L,S,_),o=L+F|0,o=W-((n>>>0<(f=u+D|0)>>>0)+(o=u>>>0>f>>>0?o+1|0:o)|0)|0,f=Xi(n=n-f|0,o,n,o),n=L+g|0,f=n=(o=b+f|0)>>>0<f>>>0?n+1|0:n,n=$,b=o,p=$i(Xi(A,p,P,R),L,S,_),o=L+G|0,o=Y-((n>>>0<(u=p+N|0)>>>0)+(o=u>>>0<p>>>0?o+1|0:o)|0)|0,u=Xi(n=n-u|0,o,n,o),o=L+f|0,f=Xi(n=b+u|0,n>>>0<u>>>0?o+1|0:o,S,_),u=n=L,!n&f>>>0<=1)break n;for(p=f,n=u;o=r<<1|l>>>31,l<<=1,r=o,g=!n&p>>>0>7|0!=(0|n),p=(3&n)<<30|p>>>2,n=n>>>2|0,g;);break r}}if((0|l)<(0|v))r=l<<1;else{if((0|v)<=0){h[m+8>>2]=0,h[m+12>>2]=0;break a}r=(v<<1)-2|0}r=(r<<2)+i|0,h[m+8>>2]=h[r>>2],h[m+12>>2]=h[r+4>>2]}n=1;break t}if(r=u,(l=f)-1|0)break i}for(;o=qe(f,u,l,r)+l|0,n=r+L|0,n=Xi(l=(1&(n=o>>>0<l>>>0?n+1|0:n))<<31|o>>>1,r=n>>>1|0,l,r),(0|u)==(0|(o=L))&n>>>0>f>>>0|o>>>0>u>>>0;);}(f=h[m+20>>2])&&(n=f-1|0,p=h[h[m+16>>2]+(n>>>3&536870908)>>2],h[m+20>>2]=n,o=Xi(P,R,g=T-(o=y)|0,w=(T>>31)-((u=o>>31)+(o>>>0>T>>>0)|0)|0),A=L,u=(y=Xi(y,u,S,_))+o|0,o=L+A|0,o=u>>>0<y>>>0?o+1|0:o,b=u,E=u=Xi(l,r,A=E-(u=O)|0,T=(E>>31)-((y=u>>31)+(u>>>0>E>>>0)|0)|0),p=b+(M=(n=u=p>>>n&1)?0-E|0:E)|0,b=o,o=L,n=b+(n?0-(o+(0!=(0|E))|0)|0:o)|0,q=m,Z=$i(p,p>>>0<M>>>0?n+1|0:n,S,_),h[q+12>>2]=Z,n=Xi(A,T,P,R),o=L,p=Xi(S,_,O,y),o=L+o|0,o=(n=p+n|0)>>>0<p>>>0?o+1|0:o,r=Xi(l,r,g,w),l=(p=u?r:0-r|0)+n|0,n=L,n=(u?n:0-((0!=(0|r))+n|0)|0)+o|0,q=m,Z=$i(l,l>>>0<p>>>0?n+1|0:n,S,_),h[q+8>>2]=Z),n=0!=(0|f)}I=c+80|0}if(!n)break e;if(!(h[e+8>>2]<=0)){for(o=h[e+32>>2],r=0;(0|(s=h[68+((n=r<<2)+e|0)>>2]))>(0|(l=h[e+16>>2]))?h[n+o>>2]=l:(n=n+o|0,l=h[e+12>>2],h[n>>2]=(0|l)>(0|s)?l:s),(0|(r=r+1|0))<(0|(s=h[e+8>>2])););if(n=0,!((0|s)<=0))for(l=(r=v<<3)+i|0,f=t+r|0;;){r=(s=n<<2)+l|0,s=h[s+f>>2]+h[s+o>>2]|0,h[r>>2]=s;t:{if((0|s)>h[e+16>>2])s=s-h[e+20>>2]|0;else{if((0|s)>=h[e+12>>2])break t;s=s+h[e+20>>2]|0}h[r>>2]=s}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if(s=(0|U)>(0|(v=v+1|0)),(0|v)==(0|X))break e;if(n=h[e+56>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>v>>>0))break}Sn(),x()}e=1^s}else e=0;return 1&e},function(e){var t;return h[(e|=0)>>2]=6284,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),0|e},function(e){var t;h[(e|=0)>>2]=6284,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),be(e)},un,sr,hn,en,Sr,rt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0;I=s=I-32|0,h[68+(e|=0)>>2]=a,n=h[e+56>>2],r=h[n>>2],a=h[n+4>>2],h[s+24>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+112|0,p=e+60|0,m=(n=a>>>2|0)>>>0>1?n:1;;){if(me(p,h[(u<<2)+r>>2],s+16|0),r=(n=h[s+20>>2])>>31,o=(a=h[s+16>>2])>>31,l=(c=h[s+24>>2])>>31,o=(l^=l+c)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+108>>2],d=l>>31,a,a>>31),L,o,r),h[s+16>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+20>>2]=r,r=(n=(n=r)+(r>>=31)^r)+((r=a>>31)+a^r)|0,h[s+24>>2]=(0|c)>=0?l-r:r-l):h[s+16>>2]=h[e+108>>2],r=Gi(f),a=h[s+16>>2],r?(h[s+24>>2]=0-h[s+24>>2],n=0-h[s+20>>2]|0,h[s+20>>2]=n,a=0-a|0,h[s+16>>2]=a):n=h[s+20>>2],(0|a)>=0?(a=(r=h[e+108>>2])+h[s+24>>2]|0,r=r+n|0):((0|n)<0?(r=(a=h[s+24>>2])>>31,r^=r+a):(r=(a=h[s+24>>2])>>31,r=h[e+100>>2]-(r^r+a)|0),(0|a)<0?a=(a=n)+(n>>=31)^n:(a=n,n>>=31,a=h[e+100>>2]-(a+n^n)|0)),n=h[e+100>>2],r|a?(0|n)!=(0|a)|r?(0|r)!=(0|n)|a?r||(0|(o=h[e+108>>2]))>=(0|a)?(0|r)!=(0|n)||(0|(o=h[e+108>>2]))<=(0|a)?(0|n)!=(0|a)||(0|(n=h[e+108>>2]))<=(0|r)?a||(a=0,(0|(n=h[e+108>>2]))>=(0|r)||(r=(n<<1)-r|0)):r=(n<<1)-r|0:a=(o<<1)-a|0:(a=(o<<1)-a|0,r=0):a=r:r=a:r=a=n,h[s+12>>2]=a,h[s+8>>2]=r,!(h[e+8>>2]<=0)){for(o=h[e+32>>2],a=0;(0|(n=h[e+16>>2]))<(0|r)?h[o+(a<<2)>>2]=n:(n=o+(a<<2)|0,c=h[e+12>>2],h[n>>2]=(0|c)>(0|r)?c:r),(0|(a=a+1|0))<(0|(n=h[e+8>>2]));)r=h[(s+8|0)+(a<<2)>>2];if(r=0,!((0|n)<=0))for(c=(n=u<<3)+i|0,l=t+n|0;;){n=(a=r<<2)+c|0,a=h[a+l>>2]+h[a+o>>2]|0,h[n>>2]=a;t:{if((0|a)>h[e+16>>2])a=a-h[e+20>>2]|0;else{if((0|a)>=h[e+12>>2])break t;a=a+h[e+20>>2]|0}h[n>>2]=a}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if((0|m)==(0|(u=u+1|0)))break e;if(n=h[e+56>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>u>>>0))break}Sn(),x()}return I=s+32|0,1},an,fn,br,Yr,me,gn,Mr,dn,hn,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0;if(h[8+(e|=0)>>2]=n,c=h[(a=e+32|0)>>2],(l=h[e+36>>2]-c>>2)>>>0<n>>>0?(ei(a,n-l|0),c=h[a>>2],a=h[e+8>>2]):(n>>>0<l>>>0&&(h[e+36>>2]=(n<<2)+c),a=n),l=0,s=xt(mr(o=(1073741823&n)!=(0|n)?-1:n<<2),0,o),!((0|a)<=0)){for(;(0|(o=h[(a=l<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[a+c>>2]=u:(a=a+c|0,u=h[e+12>>2],h[a>>2]=(0|u)>(0|o)?u:o),(0|(a=h[e+8>>2]))>(0|(l=l+1|0)););if(!((0|a)<=0))for(l=0;;){a=(o=l<<2)+i|0,o=h[t+o>>2]+h[o+c>>2]|0,h[a>>2]=o;e:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break e;o=o+h[e+20>>2]|0}h[a>>2]=o}if(!((0|(a=h[e+8>>2]))>(0|(l=l+1|0))))break}}if(!((0|r)<=(0|n)|(0|a)<=0))for(m=0-n<<2,c=n;;){if(!((0|a)<=0)){for(g=(p=(f=c<<2)+i|0)+m|0,u=h[e+32>>2],l=0;(0|(o=h[(a=l<<2)+g>>2]))>(0|(d=h[e+16>>2]))?h[a+u>>2]=d:(a=a+u|0,d=h[e+12>>2],h[a>>2]=(0|d)>(0|o)?d:o),(0|(a=h[e+8>>2]))>(0|(l=l+1|0)););if(l=0,!((0|a)<=0))for(f=t+f|0;;){a=(o=l<<2)+p|0,o=h[o+f>>2]+h[o+u>>2]|0,h[a>>2]=o;e:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break e;o=o+h[e+20>>2]|0}h[a>>2]=o}if(!((0|(a=h[e+8>>2]))>(0|(l=l+1|0))))break}}if(!((0|(c=n+c|0))<(0|r)))break}return be(s),1},or,ur,function(e,t,i){t|=0,i|=0;var r=0;return h[4+(e|=0)>>2]=t,t=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=t,e=h[e+8>>2],3==d[e+24|0]&&(r=9==h[e+28>>2]),0|r},function(e,t,i){return t|=0,i|=0,d[h[4+(e|=0)>>2]+36|0]>=2&&(t=0,!ki(e+24|0,zt(e),i))||(t=Fi(e+24|0,h[e+16>>2])),0|t},function(e,t,i){t|=0,i|=0;var r=0;return d[h[4+(e|=0)>>2]+36|0]<=1&&(r=0,!ki(e+24|0,h[e+8>>2],i))||(r=Te(e,t,i)),0|r},function(e,t,i){e|=0,t|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0;I=r=I-32|0;e:{t:switch((i|=0)-2|0){case 0:if(i=h[e+4>>2],s=h[e+12>>2],h[r+24>>2]=-1,h[r+16>>2]=-1,h[r+20>>2]=1065353216,h[r+8>>2]=-1,h[r+12>>2]=-1,-2==(0|t))break e;if(u=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2],1==(0|Rn[h[h[i>>2]+8>>2]](i))){c=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2];i:if(!(1!=(0|Rn[h[h[i>>2]+8>>2]](i))|t-1>>>0>5||!(l=0|Rn[h[h[i>>2]+36>>2]](i))|!(e=0|Rn[h[h[i>>2]+44>>2]](i,s))))if(o=e+12|0,s=0|Rn[h[h[i>>2]+40>>2]](i,s),i=h[i+44>>2],s){if(6!=(0|t))break i;n=mr(112),h[n+4>>2]=c,t=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=t,t=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=t,h[n+24>>2]=h[r+24>>2],h[n+40>>2]=e,h[n+36>>2]=o,h[n+32>>2]=s,h[n+28>>2]=i,h[n+68>>2]=e,h[n- -64>>2]=o,h[n+60>>2]=s,h[n+56>>2]=i,h[n+48>>2]=0,h[n+52>>2]=0,h[n>>2]=7172,h[n+88>>2]=1065353216,h[n+92>>2]=-1,h[n+80>>2]=-1,h[n+84>>2]=-1,h[n+72>>2]=1,h[n+76>>2]=-1,h[n+44>>2]=7696,h[(e=n+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0}else 6==(0|t)&&(n=mr(112),h[n+4>>2]=c,t=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=t,t=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=t,h[n+24>>2]=h[r+24>>2],h[n+40>>2]=e,h[n+36>>2]=o,h[n+32>>2]=l,h[n+28>>2]=i,h[n+68>>2]=e,h[n- -64>>2]=o,h[n+60>>2]=l,h[n+56>>2]=i,h[n+48>>2]=0,h[n+52>>2]=0,h[n>>2]=8108,h[n+88>>2]=1065353216,h[n+92>>2]=-1,h[n+80>>2]=-1,h[n+84>>2]=-1,h[n+72>>2]=1,h[n+76>>2]=-1,h[n+44>>2]=8500,h[(e=n+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0);if(n)break e}n=mr(28),h[n+4>>2]=u,e=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=e,e=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=e,h[n+24>>2]=h[r+24>>2],h[n>>2]=8888;break e;case 1:break t;default:break e}if(i=h[e+4>>2],s=h[e+12>>2],h[r+24>>2]=-1,h[r+16>>2]=-1,h[r+20>>2]=1065353216,h[r+8>>2]=-1,h[r+12>>2]=-1,-2!=(0|t)){if(u=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2],1==(0|Rn[h[h[i>>2]+8>>2]](i))){c=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2];t:if(!(1!=(0|Rn[h[h[i>>2]+8>>2]](i))|t-1>>>0>5||!(l=0|Rn[h[h[i>>2]+36>>2]](i))|!(e=0|Rn[h[h[i>>2]+44>>2]](i,s))))if(o=e+12|0,s=0|Rn[h[h[i>>2]+40>>2]](i,s),i=h[i+44>>2],s){if(6!=(0|t))break t;n=mr(112),h[n+4>>2]=c,t=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=t,t=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=t,h[n+24>>2]=h[r+24>>2],h[n+40>>2]=e,h[n+36>>2]=o,h[n+32>>2]=s,h[n+28>>2]=i,h[n+68>>2]=e,h[n- -64>>2]=o,h[n+60>>2]=s,h[n+56>>2]=i,h[n+48>>2]=0,h[n+52>>2]=0,h[n>>2]=9056,h[n+88>>2]=1065353216,h[n+92>>2]=-1,h[n+80>>2]=-1,h[n+84>>2]=-1,h[n+72>>2]=1,h[n+76>>2]=-1,h[n+44>>2]=9620,h[(e=n+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0}else 6==(0|t)&&(n=mr(112),h[n+4>>2]=c,t=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=t,t=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=t,h[n+24>>2]=h[r+24>>2],h[n+40>>2]=e,h[n+36>>2]=o,h[n+32>>2]=l,h[n+28>>2]=i,h[n+68>>2]=e,h[n- -64>>2]=o,h[n+60>>2]=l,h[n+56>>2]=i,h[n+48>>2]=0,h[n+52>>2]=0,h[n>>2]=10060,h[n+88>>2]=1065353216,h[n+92>>2]=-1,h[n+80>>2]=-1,h[n+84>>2]=-1,h[n+72>>2]=1,h[n+76>>2]=-1,h[n+44>>2]=10480,h[(e=n+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0);if(n)break e}n=mr(28),h[n+4>>2]=u,e=h[r+12>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=e,e=h[r+20>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=e,h[n+24>>2]=h[r+24>>2],h[n>>2]=10892}}return I=r+32|0,0|n},cn,function(e,t){return 0|ht(24+(e|=0)|0,zt(e),h[e+8>>2])},function(e){return h[(e|=0)>>2]=7172,0|e},function(e){h[(e|=0)>>2]=7172,be(e)},un,Zr,lr,hn,en,xr,hn,cn,gt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,b=0;I=s=I-48|0,(r=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=r,r=-2-(n=-1<<r)|0,h[e+84>>2]=r,h[e+80>>2]=-1^n,h[e+92>>2]=(0|r)/2,m[e+88>>2]=v(2)/v(0|r)),h[e+52>>2]=a,n=h[e+40>>2],r=h[n>>2],a=h[n+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,b=(n=a>>>2|0)>>>0>1?n:1;;){if(se(g,h[(c<<2)+r>>2],s+8|0),r=(n=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,r),h[s+8>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+12>>2]=r,n=r>>31,r=(n^=r+n)+((r=a>>31)+a^r)|0,h[s+16>>2]=(0|u)>=0?l-r:r-l):h[s+8>>2]=h[e+92>>2],r=Gi(p),a=h[s+8>>2],r?(h[s+16>>2]=0-h[s+16>>2],n=0-h[s+12>>2]|0,h[s+12>>2]=n,a=0-a|0,h[s+8>>2]=a):n=h[s+12>>2],(0|a)>=0?(r=(a=h[e+92>>2])+h[s+16>>2]|0,a=n+a|0):((0|n)<0?(a=(r=h[s+16>>2])>>31,a^=r+a):(a=(r=h[s+16>>2])>>31,a=h[e+84>>2]-(a^r+a)|0),(0|r)<0?(r=n>>31,r^=r+n):(r=n>>31,r=h[e+84>>2]-(r+n^r)|0)),n=h[e+84>>2],r|a?(0|r)!=(0|n)|a?(0|n)!=(0|a)|r?a||(0|(o=h[e+92>>2]))>=(0|r)?(0|n)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|r)?(0|r)!=(0|n)||(0|(n=h[e+92>>2]))<=(0|a)?r||(r=0,(0|(n=h[e+92>>2]))>=(0|a)||(a=(n<<1)-a|0)):a=(n<<1)-a|0:r=(o<<1)-r|0:(r=(o<<1)-r|0,a=0):r=a:a=r:a=r=n,u=h[4+(o=(n=c<<3)+t|0)>>2],h[s+40>>2]=h[o>>2],h[s+44>>2]=u,h[s+28>>2]=r,h[s+24>>2]=a,Ke(s+32|0,f,s+24|0,s+40|0),h[(r=i+n|0)>>2]=h[s+32>>2],h[r+4>>2]=h[s+36>>2],(0|b)==(0|(c=c+1|0)))break e;if(n=h[e+40>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>c>>>0))break}Sn(),x()}return I=s+48|0,1},an,fn,br,Yr,se,function(e){return h[(e|=0)>>2]=8108,0|e},function(e){h[(e|=0)>>2]=8108,be(e)},un,lr,hn,en,xr,gt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,b=0;I=s=I-48|0,(r=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=r,r=-2-(n=-1<<r)|0,h[e+84>>2]=r,h[e+80>>2]=-1^n,h[e+92>>2]=(0|r)/2,m[e+88>>2]=v(2)/v(0|r)),h[e+52>>2]=a,n=h[e+40>>2],r=h[n>>2],a=h[n+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,b=(n=a>>>2|0)>>>0>1?n:1;;){if(me(g,h[(c<<2)+r>>2],s+8|0),r=(n=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,r),h[s+8>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+12>>2]=r,n=r>>31,r=(n^=r+n)+((r=a>>31)+a^r)|0,h[s+16>>2]=(0|u)>=0?l-r:r-l):h[s+8>>2]=h[e+92>>2],r=Gi(p),a=h[s+8>>2],r?(h[s+16>>2]=0-h[s+16>>2],n=0-h[s+12>>2]|0,h[s+12>>2]=n,a=0-a|0,h[s+8>>2]=a):n=h[s+12>>2],(0|a)>=0?(r=(a=h[e+92>>2])+h[s+16>>2]|0,a=n+a|0):((0|n)<0?(a=(r=h[s+16>>2])>>31,a^=r+a):(a=(r=h[s+16>>2])>>31,a=h[e+84>>2]-(a^r+a)|0),(0|r)<0?(r=n>>31,r^=r+n):(r=n>>31,r=h[e+84>>2]-(r+n^r)|0)),n=h[e+84>>2],r|a?(0|r)!=(0|n)|a?(0|n)!=(0|a)|r?a||(0|(o=h[e+92>>2]))>=(0|r)?(0|n)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|r)?(0|r)!=(0|n)||(0|(n=h[e+92>>2]))<=(0|a)?r||(r=0,(0|(n=h[e+92>>2]))>=(0|a)||(a=(n<<1)-a|0)):a=(n<<1)-a|0:r=(o<<1)-r|0:(r=(o<<1)-r|0,a=0):r=a:a=r:a=r=n,u=h[4+(o=(n=c<<3)+t|0)>>2],h[s+40>>2]=h[o>>2],h[s+44>>2]=u,h[s+28>>2]=r,h[s+24>>2]=a,Ke(s+32|0,f,s+24|0,s+40|0),h[(r=i+n|0)>>2]=h[s+32>>2],h[r+4>>2]=h[s+36>>2],(0|b)==(0|(c=c+1|0)))break e;if(n=h[e+40>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>c>>>0))break}Sn(),x()}return I=s+48|0,1},an,fn,br,Yr,me,an,fn,dn,hn,dn,qr,en,function(e,t){e|=0;var i,r,n,a=0,s=0,o=0,l=0,c=0;o=h[12+(t|=0)>>2],l=a=h[t+20>>2],a=(s=(i=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,n=s;e:if(!((r=h[t+8>>2])>>>0<s>>>0&(0|a)>=(0|o)|(0|a)>(0|o))){if(s=i+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=n,h[t+20>>2]=a,f[t+38>>1]<=513){if(a=l,(l=i+8|0)>>>0>r>>>0&(0|(a=l>>>0<8?a+1|0:a))>=(0|o)|(0|a)>(0|o))break e;h[t+16>>2]=l,h[t+20>>2]=a}1&s&&((a=(t=31^y(s))-30|0)>>>0>=4294967267&&(h[e+8>>2]=t+1,t=-2-(o=-2<<t)|0,h[e+16>>2]=t,h[e+12>>2]=-1^o,h[e+24>>2]=(0|t)/2,m[e+20>>2]=v(2)/v(0|t)),c=a>>>0>4294967266)}return 0|c},function(e,t,i,r,n,a){e|=0,t|=0,i|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(I=a=I-32|0,s=xt(mr(o=(1073741823&(n|=0))!=(0|n)?-1:n<<2),0,o),c=h[(o=s)>>2],o=h[o+4>>2],d=h[t+4>>2],h[a+24>>2]=h[t>>2],h[a+28>>2]=d,h[a+8>>2]=c,h[a+12>>2]=o,Ke(a+16|0,c=e+8|0,a+8|0,a+24|0),h[i>>2]=h[a+16>>2],h[i+4>>2]=h[a+20>>2],(0|r)>(0|n))for(d=0-n<<2,e=n;f=h[(u=(o=(l=e<<2)+i|0)+d|0)>>2],u=h[u+4>>2],p=h[4+(l=t+l|0)>>2],h[a+24>>2]=h[l>>2],h[a+28>>2]=p,h[a+8>>2]=f,h[a+12>>2]=u,Ke(a+16|0,c,a+8|0,a+24|0),h[o>>2]=h[a+16>>2],h[o+4>>2]=h[a+20>>2],(0|r)>(0|(e=e+n|0)););return be(s),I=a+32|0,1},function(e){return h[(e|=0)>>2]=9056,0|e},function(e){h[(e|=0)>>2]=9056,be(e)},un,Zr,lr,hn,en,xr,hn,sn,bt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,b=0;I=s=I-48|0,(r=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=r,r=-2-(n=-1<<r)|0,h[e+84>>2]=r,h[e+80>>2]=-1^n,h[e+92>>2]=(0|r)/2,m[e+88>>2]=v(2)/v(0|r)),h[e+52>>2]=a,n=h[e+40>>2],r=h[n>>2],a=h[n+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,b=(n=a>>>2|0)>>>0>1?n:1;;){if(se(g,h[(c<<2)+r>>2],s+8|0),r=(n=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,r),h[s+8>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+12>>2]=r,n=r>>31,r=(n^=r+n)+((r=a>>31)+a^r)|0,h[s+16>>2]=(0|u)>=0?l-r:r-l):h[s+8>>2]=h[e+92>>2],r=Gi(p),a=h[s+8>>2],r?(h[s+16>>2]=0-h[s+16>>2],n=0-h[s+12>>2]|0,h[s+12>>2]=n,a=0-a|0,h[s+8>>2]=a):n=h[s+12>>2],(0|a)>=0?(r=(a=h[e+92>>2])+h[s+16>>2]|0,a=n+a|0):((0|n)<0?(a=(r=h[s+16>>2])>>31,a^=r+a):(a=(r=h[s+16>>2])>>31,a=h[e+84>>2]-(a^r+a)|0),(0|r)<0?(r=n>>31,r^=r+n):(r=n>>31,r=h[e+84>>2]-(r+n^r)|0)),n=h[e+84>>2],r|a?(0|r)!=(0|n)|a?(0|n)!=(0|a)|r?a||(0|(o=h[e+92>>2]))>=(0|r)?(0|n)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|r)?(0|r)!=(0|n)||(0|(n=h[e+92>>2]))<=(0|a)?r||(r=0,(0|(n=h[e+92>>2]))>=(0|a)||(a=(n<<1)-a|0)):a=(n<<1)-a|0:r=(o<<1)-r|0:(r=(o<<1)-r|0,a=0):r=a:a=r:a=r=n,u=h[4+(o=(n=c<<3)+t|0)>>2],o=h[o>>2],h[s+36>>2]=r,h[s+32>>2]=a,h[s+24>>2]=o,h[s+28>>2]=u,Ne(s+40|0,f,s+32|0,s+24|0),h[(r=i+n|0)>>2]=h[s+40>>2],h[r+4>>2]=h[s+44>>2],(0|b)==(0|(c=c+1|0)))break e;if(n=h[e+40>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>c>>>0))break}Sn(),x()}return I=s+48|0,1},an,fn,br,Yr,se,function(e){return h[(e|=0)>>2]=10060,0|e},function(e){h[(e|=0)>>2]=10060,be(e)},un,lr,hn,en,xr,bt,function(e,t,i,r,n,a){t|=0,i|=0,r|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,b=0;I=s=I-48|0,(r=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=r,r=-2-(n=-1<<r)|0,h[e+84>>2]=r,h[e+80>>2]=-1^n,h[e+92>>2]=(0|r)/2,m[e+88>>2]=v(2)/v(0|r)),h[e+52>>2]=a,n=h[e+40>>2],r=h[n>>2],a=h[n+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-r|0))<=0)){if((0|(r=h[n>>2]))!=h[n+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,b=(n=a>>>2|0)>>>0>1?n:1;;){if(me(g,h[(c<<2)+r>>2],s+8|0),r=(n=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((r^r+n)+(o^a+o)|0)|0,r=0,(r=o>>>0<l>>>0?1:r)|o?(a=$i(Xi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,r),h[s+8>>2]=a,r=$i(Xi(l,d,n,n>>31),L,o,r),h[s+12>>2]=r,n=r>>31,r=(n^=r+n)+((r=a>>31)+a^r)|0,h[s+16>>2]=(0|u)>=0?l-r:r-l):h[s+8>>2]=h[e+92>>2],r=Gi(p),a=h[s+8>>2],r?(h[s+16>>2]=0-h[s+16>>2],n=0-h[s+12>>2]|0,h[s+12>>2]=n,a=0-a|0,h[s+8>>2]=a):n=h[s+12>>2],(0|a)>=0?(r=(a=h[e+92>>2])+h[s+16>>2]|0,a=n+a|0):((0|n)<0?(a=(r=h[s+16>>2])>>31,a^=r+a):(a=(r=h[s+16>>2])>>31,a=h[e+84>>2]-(a^r+a)|0),(0|r)<0?(r=n>>31,r^=r+n):(r=n>>31,r=h[e+84>>2]-(r+n^r)|0)),n=h[e+84>>2],r|a?(0|r)!=(0|n)|a?(0|n)!=(0|a)|r?a||(0|(o=h[e+92>>2]))>=(0|r)?(0|n)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|r)?(0|r)!=(0|n)||(0|(n=h[e+92>>2]))<=(0|a)?r||(r=0,(0|(n=h[e+92>>2]))>=(0|a)||(a=(n<<1)-a|0)):a=(n<<1)-a|0:r=(o<<1)-r|0:(r=(o<<1)-r|0,a=0):r=a:a=r:a=r=n,u=h[4+(o=(n=c<<3)+t|0)>>2],o=h[o>>2],h[s+36>>2]=r,h[s+32>>2]=a,h[s+24>>2]=o,h[s+28>>2]=u,Ne(s+40|0,f,s+32|0,s+24|0),h[(r=i+n|0)>>2]=h[s+40>>2],h[r+4>>2]=h[s+44>>2],(0|b)==(0|(c=c+1|0)))break e;if(n=h[e+40>>2],r=h[n>>2],!(h[n+4>>2]-r>>2>>>0>c>>>0))break}Sn(),x()}return I=s+48|0,1},an,fn,br,Yr,me,fn,dn,hn,dn,qr,en,function(e,t){e|=0;var i,r,n,a,s=0,o=0,l=0,c=0;return i=h[12+(t|=0)>>2],l=s=h[t+20>>2],s=(o=(r=h[t+16>>2])+4|0)>>>0<4?s+1|0:s,a=o,(n=h[t+8>>2])>>>0<o>>>0&(0|s)>=(0|i)|(0|s)>(0|i)||(o=r+h[t>>2]|0,o=d[0|o]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=s,s=l,(l=r+8|0)>>>0>n>>>0&(0|(s=l>>>0<8?s+1|0:s))>=(0|i)|(0|s)>(0|i)||(h[t+16>>2]=l,h[t+20>>2]=s,1&o&&((t=31^y(o))-30>>>0<4294967267||(c=1,h[e+8>>2]=t+1,t=-2-(s=-2<<t)|0,h[e+16>>2]=t,h[e+12>>2]=-1^s,h[e+24>>2]=(0|t)/2,m[e+20>>2]=v(2)/v(0|t))))),0|c},function(e,t,i,r,n,a){e|=0,t|=0,i|=0,r|=0,a|=0;var s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(I=a=I-32|0,o=xt(mr(o=(1073741823&(n|=0))!=(0|n)?-1:n<<2),0,o),s=h[t>>2],l=h[t+4>>2],u=h[o+4>>2],h[a+16>>2]=h[o>>2],h[a+20>>2]=u,h[a+8>>2]=s,h[a+12>>2]=l,Ne(a+24|0,l=e+8|0,a+16|0,a+8|0),h[i>>2]=h[a+24>>2],h[i+4>>2]=h[a+28>>2],(0|r)>(0|n))for(u=0-n<<2,e=n;f=h[(c=(s=e<<2)+t|0)>>2],c=h[c+4>>2],p=h[4+(d=(s=i+s|0)+u|0)>>2],h[a+16>>2]=h[d>>2],h[a+20>>2]=p,h[a+8>>2]=f,h[a+12>>2]=c,Ne(a+24|0,l,a+16|0,a+8|0),h[s>>2]=h[a+24>>2],h[s+4>>2]=h[a+28>>2],(0|r)>(0|(e=e+n|0)););return be(o),I=a+32|0,1},function(e){var t=0;return h[24+(e|=0)>>2]=1140,h[e>>2]=11076,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),h[e>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rn[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),0|e},function(e){var t=0;h[24+(e|=0)>>2]=1140,h[e>>2]=11076,(t=h[e+32>>2])&&(h[e+36>>2]=t,be(t)),h[e>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rn[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&Hi(t),be(e)},function(e,t,i){var r;return t|=0,i|=0,h[4+(e|=0)>>2]=t,r=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=r,9==h[h[h[h[t+4>>2]+8>>2]+(i<<2)>>2]+28>>2]|0},function(e,t,i){return t|=0,d[h[4+(e|=0)>>2]+36|0]>=2&&(t=0,!(0|Rn[h[h[e>>2]+52>>2]](e)))||(t=Fi(e+24|0,h[e+16>>2])),0|t},function(e,t,i){t|=0,i|=0;var r=0;return d[h[4+(e|=0)>>2]+36|0]<=1&&(r=0,!(0|Rn[h[h[e>>2]+52>>2]](e)))||(r=Te(e,t,i)),0|r},function(e,t){return t|=0,0|Rn[h[h[(e|=0)>>2]+56>>2]](e,t)},function(e){return 0|at(24+(e|=0)|0,zt(e)||h[e+8>>2],h[h[e+4>>2]+32>>2])},function(e,t){return 0|et(24+(e|=0)|0,zt(e),h[e+8>>2])},function(e){var t,i=0,r=0;if(h[(e|=0)>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,be(i)),t=h[e+8>>2]){if((0|(r=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+8>>2]}h[e+12>>2]=t,be(i)}return 0|e},gn,hn,hn,function(e){return h[44+(e|=0)>>2]?0|Rn[h[h[e>>2]+48>>2]](e):0},function(e){var t=0,i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;e:{if(i=h[32+(e|=0)>>2],n=h[i+8>>2],t=0,!((0|(a=h[i+12>>2]))<=(0|(r=h[i+20>>2]))&(s=n)>>>0<=(n=h[i+16>>2])>>>0|(0|r)>(0|a))){s=d[n+h[i>>2]|0],r=(a=n+1|0)?r:r+1|0,h[i+16>>2]=a,h[i+20>>2]=r;t:if(s){for(;;){if(0|Rn[h[h[e>>2]+16>>2]](e,t)){if((0|s)!=(0|(t=t+1|0)))continue;break t}break}return 0}if((0|(t=h[e+8>>2]))!=(0|(r=h[e+12>>2])))for(;;){if(i=h[t>>2],!(0|Rn[h[h[i>>2]+8>>2]](i,e,h[e+4>>2])))break e;if((0|r)==(0|(t=t+4|0)))break}if(s){for(t=0;;){if(i=h[h[e+8>>2]+(t<<2)>>2],!(0|Rn[h[h[i>>2]+12>>2]](i,h[e+32>>2])))break e;if((0|s)==(0|(t=t+1|0)))break}if(s)for(n=e+20|0;;){if(t=0,i=h[(a=o<<2)+h[e+8>>2]>>2],(0|(r=0|Rn[h[h[i>>2]+24>>2]](i)))>0)for(;i=h[h[e+8>>2]+a>>2],u=0|Rn[h[h[i>>2]+20>>2]](i,t),l=h[e+20>>2],u>>>0<(c=h[e+24>>2]-l>>2)>>>0||((i=u+1|0)>>>0>c>>>0?(ei(n,i-c|0),l=h[n>>2]):i>>>0>=c>>>0||(h[e+24>>2]=(i<<2)+l)),h[(u<<2)+l>>2]=o,(0|r)!=(0|(t=t+1|0)););if((0|s)==(0|(o=o+1|0)))break}}t=0,0|Rn[h[h[e>>2]+28>>2]](e)&&(t=0|Rn[h[h[e>>2]+32>>2]](e))}return 0|t}return 0},function(e){var t,i=0,r=0;if((0|(i=h[8+(e|=0)>>2]))==(0|(t=h[e+12>>2])))return 1;for(;r=h[i>>2],(r=0|Rn[h[h[r>>2]+16>>2]](r,h[e+32>>2]))&&(0|t)!=(0|(i=i+4|0)););return 0|r},hn,dn,en,en,function(e){var t,i=0,r=0;if(h[(e|=0)>>2]=11304,i=h[e+48>>2],h[e+48>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),h[e>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,be(i)),t=h[e+8>>2]){if((0|(r=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+8>>2]}h[e+12>>2]=t,be(i)}return 0|e},function(e){var t,i=0,r=0;if(h[(e|=0)>>2]=11304,i=h[e+48>>2],h[e+48>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),h[e>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,be(i)),t=h[e+8>>2]){if((0|(r=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&Rn[h[h[i>>2]+4>>2]](i),(0|t)!=(0|r););i=h[e+8>>2]}h[e+12>>2]=t,be(i)}be(e)},function(e){var t,i=0,r=0,n=0,s=0;if(r=h[32+(e|=0)>>2],t=h[r+16>>2],n=h[r+12>>2],i=h[r+20>>2],p[r+8>>2]>t>>>0&(0|n)>=(0|i)|(0|i)<(0|n)){s=d[t+h[r>>2]|0],i=(n=t+1|0)?i:i+1|0,h[r+16>>2]=n,h[r+20>>2]=i,r=h[e+48>>2],h[e+48>>2]=0,r&&Rn[h[h[r>>2]+4>>2]](r);e:{t:{i:{r:switch(0|s){case 0:r=mr(384),h[r>>2]=11412,xt(r+4|0,0,80),h[r+96>>2]=0,h[r+100>>2]=0,h[r+92>>2]=-1,h[r+84>>2]=-1,h[r+88>>2]=-1,h[r+104>>2]=0,h[r+108>>2]=0,h[r+112>>2]=0,h[r+116>>2]=0,h[r+120>>2]=0,h[r+124>>2]=0,h[r+128>>2]=0,h[r+132>>2]=0,h[r+136>>2]=0,h[r+140>>2]=0,h[r+144>>2]=0,h[r+148>>2]=0,h[r+156>>2]=0,h[r+160>>2]=0,h[r+152>>2]=1065353216,h[r+164>>2]=0,h[r+168>>2]=0,h[r+172>>2]=0,h[r+176>>2]=0,h[r+180>>2]=0,h[r+184>>2]=0,h[r+188>>2]=0,h[r+192>>2]=0,h[r+196>>2]=0,h[r+200>>2]=0,h[r+204>>2]=0,h[r+208>>2]=0,h[r+212>>2]=-1,h[r+216>>2]=0,h[r+220>>2]=0,h[r+224>>2]=0,u[38+(i=r+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=r+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=r+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=r+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[r+376>>2]=0,h[r+368>>2]=0,h[r+372>>2]=0;break i;case 1:r=mr(424),h[r>>2]=11464,xt(r+4|0,0,80),h[r+96>>2]=0,h[r+100>>2]=0,h[r+92>>2]=-1,h[r+84>>2]=-1,h[r+88>>2]=-1,h[r+104>>2]=0,h[r+108>>2]=0,h[r+112>>2]=0,h[r+116>>2]=0,h[r+120>>2]=0,h[r+124>>2]=0,h[r+128>>2]=0,h[r+132>>2]=0,h[r+136>>2]=0,h[r+140>>2]=0,h[r+144>>2]=0,h[r+148>>2]=0,h[r+156>>2]=0,h[r+160>>2]=0,h[r+152>>2]=1065353216,h[r+164>>2]=0,h[r+168>>2]=0,h[r+172>>2]=0,h[r+176>>2]=0,h[r+180>>2]=0,h[r+184>>2]=0,h[r+188>>2]=0,h[r+192>>2]=0,h[r+196>>2]=0,h[r+200>>2]=0,h[r+204>>2]=0,h[r+208>>2]=0,h[r+212>>2]=-1,h[r+216>>2]=0,h[r+220>>2]=0,h[r+224>>2]=0,u[38+(i=r+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=r+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=r+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=r+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[r+392>>2]=0,h[r+396>>2]=0,h[r+384>>2]=0,h[r+388>>2]=0,h[r+376>>2]=0,h[r+380>>2]=0,h[r+368>>2]=0,h[r+372>>2]=0,h[(i=r+400|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,h[r+416>>2]=-1,h[r+420>>2]=-1;break i;case 2:break r;default:break t}r=mr(440),h[r>>2]=11512,xt(r+4|0,0,80),h[r+96>>2]=0,h[r+100>>2]=0,h[r+92>>2]=-1,h[r+84>>2]=-1,h[r+88>>2]=-1,h[r+104>>2]=0,h[r+108>>2]=0,h[r+112>>2]=0,h[r+116>>2]=0,h[r+120>>2]=0,h[r+124>>2]=0,h[r+128>>2]=0,h[r+132>>2]=0,h[r+136>>2]=0,h[r+140>>2]=0,h[r+144>>2]=0,h[r+148>>2]=0,h[r+156>>2]=0,h[r+160>>2]=0,h[r+152>>2]=1065353216,h[r+164>>2]=0,h[r+168>>2]=0,h[r+172>>2]=0,h[r+176>>2]=0,h[r+180>>2]=0,h[r+184>>2]=0,h[r+188>>2]=0,h[r+192>>2]=0,h[r+196>>2]=0,h[r+200>>2]=0,h[r+204>>2]=0,h[r+208>>2]=0,h[r+212>>2]=-1,h[r+216>>2]=0,h[r+220>>2]=0,h[r+224>>2]=0,u[38+(i=r+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=r+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=r+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=r+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[r+392>>2]=0,h[r+396>>2]=0,h[r+384>>2]=0,h[r+388>>2]=0,h[r+376>>2]=0,h[r+380>>2]=0,h[r+368>>2]=0,h[r+372>>2]=0,h[r+416>>2]=0,h[r+420>>2]=0,h[r+408>>2]=2,h[r+412>>2]=7,h[r+400>>2]=-1,h[r+404>>2]=-1,h[r+424>>2]=0,h[r+428>>2]=0,h[r+432>>2]=0,h[r+436>>2]=0}if(i=h[e+48>>2],h[e+48>>2]=r,!i)break e;Rn[h[h[i>>2]+4>>2]](i)}if(!(r=h[e+48>>2]))return 0}e=0|Rn[h[h[r>>2]+8>>2]](r,e)}else e=0;return 0|e},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+20>>2]](e,t)},function(e){return e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+28>>2]](e)},function(e){return e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+36>>2]](e)},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+12>>2]](e,t)},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+16>>2]](e,t)},function(e){return e=h[48+(e|=0)>>2],0|Rn[h[h[e>>2]+24>>2]](e)},vt,function(e){be(vt(e|=0))},Br,Ht,Jt,K,function(e){var t,i=0,r=0,n=0,s=0,o=0,l=0,c=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0,V=0,F=0,G=0,B=0,j=0,z=0;if(I=t=I+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(r=h[e+144>>2])for(;i=h[r>>2],be(r),r=i,i;);if(r=0,h[e+144>>2]=0,n=h[e+140>>2]){if(n-1>>>0>=3)for(i=-4&n;h[(m=r<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|m)>>2]=0,h[h[e+136>>2]+(8|m)>>2]=0,h[h[e+136>>2]+(12|m)>>2]=0,r=r+4|0,(0|i)!=(0|(s=s+4|0)););if(i=3&n)for(;h[h[e+136>>2]+(r<<2)>>2]=0,r=r+1|0,(0|i)!=(0|(k=k+1|0)););}h[e+148>>2]=0}e:{t:{if(r=h[e+4>>2],!((i=(k=d[r+36|0])<<8|d[r+37|0])>>>0>513))if(A=h[r+32>>2],i>>>0<=511){if(i=h[A+20>>2],i=(s=(n=h[A+16>>2])+4|0)>>>0<4?i+1|0:i,m=s,s=h[A+12>>2],m>>>0>p[A+8>>2]&(0|s)<=(0|i)|(0|i)>(0|s))break t;s=n+h[A>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[A+16>>2]=m,h[A+20>>2]=i,h[e+132>>2]=s}else{if(!Si(1,t,A))break t;r=h[e+4>>2],k=d[r+36|0],h[e+132>>2]=h[t>>2]}A=h[r+32>>2];i:{r:{if((255&k)>>>0<=1){if(k=0,i=h[A+20>>2],i=(s=(n=h[A+16>>2])+4|0)>>>0<4?i+1|0:i,m=s,s=h[A+12>>2],m>>>0>p[A+8>>2]&(0|s)<=(0|i)|(0|i)>(0|s))break e;s=n+h[A>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+60>>2]=s,h[A+16>>2]=m,h[A+20>>2]=i,h[e+156>>2]=s,g=e+156|0}else{if(k=0,!Si(1,t+60|0,A))break e;if(r=h[e+4>>2],i=d[r+36|0],h[e+156>>2]=h[t+60>>2],g=e+156|0,i>>>0>1)break r}if(n=h[r+32>>2],r=h[n+8>>2],m=h[n+12>>2],c=r,r=h[n+20>>2],c>>>0<(i=(s=h[n+16>>2])+4|0)>>>0&(0|(r=i>>>0<4?r+1|0:r))>=(0|m)|(0|r)>(0|m))break e;s=s+h[n>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+56>>2]=s,h[n+16>>2]=i,h[n+20>>2]=r;break i}if(!Si(1,t+56|0,h[r+32>>2]))break e;s=h[t+56>>2]}if(s>>>0>1431655765|p[g>>2]>b(s,3)>>>0)break e;if(o=h[e+4>>2],i=h[o+32>>2],n=P=h[i+8>>2],(0|(m=h[i+12>>2]))<=(0|(r=h[i+20>>2]))&(g=h[i+16>>2])>>>0>=n>>>0|(0|r)>(0|m))break e;if(c=h[i>>2],l=d[c+g|0],n=(A=g+1|0)?r:r+1|0,h[i+16>>2]=A,h[i+20>>2]=n,d[o+36|0]<=1){if((n=g+5|0)>>>0>P>>>0&(0|(r=n>>>0<5?r+1|0:r))>=(0|m)|(0|r)>(0|m))break e;g=d[0|(m=c+A|0)]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,h[t+52>>2]=g,h[i+16>>2]=n,h[i+20>>2]=r}else{if(!Si(1,t+52|0,i))break e;g=h[t+52>>2]}if(s>>>0<g>>>0|((g>>>0)/3|0)+g>>>0<s>>>0)break e;if(r=h[e+4>>2],A=h[r+32>>2],d[r+36|0]<=1){if(r=h[A+20>>2],r=(i=(n=h[A+16>>2])+4|0)>>>0<4?r+1|0:r,m=i,i=h[A+12>>2],m>>>0>p[A+8>>2]&(0|i)<=(0|r)|(0|i)<(0|r))break e;i=n+h[A>>2]|0,i=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+48>>2]=i,h[A+16>>2]=m,h[A+20>>2]=r}else{if(!Si(1,t+48|0,A))break e;i=h[t+48>>2]}if(i>>>0>g>>>0)break e;if(h[e+28>>2]=h[e+24>>2],bi(r=mr(88)),m=h[e+8>>2],h[e+8>>2]=r,m&&(Ni(m),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],Di(e+160|0,s),h[e+176>>2]=h[e+172>>2],Di(e+172|0,s),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(V=e+216|0),pe(V,l),!jt(h[e+8>>2],s,h[e+156>>2]+i|0))break e;if(r=h[e+156>>2],a[0|t]=1,Pt(e+120|0,i+r|0,t),i=h[e+4>>2],(r=65535&((r=f[i+36>>1])<<8|r>>>8))>>>0<=513){if(n=h[i+32>>2],r>>>0<=511){if(i=h[n+20>>2],i=(r=(s=h[n+16>>2])+4|0)>>>0<4?i+1|0:i,m=r,r=h[n+12>>2],m>>>0>p[n+8>>2]&(0|r)<=(0|i)|(0|i)>(0|r))break e;r=s+h[n>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[n+16>>2]=m,h[n+20>>2]=i}else{if(!Si(1,t+44|0,n))break e;s=h[t+44>>2]}if(!s)break e;if(n=h[h[e+4>>2]+32>>2],(i=(m=h[n+8>>2])-(r=h[n+16>>2])|0)>>>0<s>>>0&(0|(r=h[n+12>>2]-(h[n+20>>2]+(r>>>0>m>>>0)|0)|0))<=0|(0|r)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,n=h[h[e+4>>2]+32>>2],m=((r=h[n+16>>2])+h[n>>2]|0)+s|0,r=((i=h[n+8>>2])-r|0)-s|0,u[t+38>>1]=f[n+38>>1],h[t>>2]=m,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=r,h[t+12>>2]=0,-1==(0|(A=ee(e,t))))break e;G=A>>31}else if(A=-1,G=-1,-1==(0|ee(e,h[i+32>>2])))break e;h[144+(m=B=e+232|0)>>2]=e,r=h[32+(0|Rn[h[h[e>>2]+32>>2]](e))>>2],s=h[r>>2]+h[r+16>>2]|0,i=h[32+(0|Rn[h[h[e>>2]+32>>2]](e))>>2],r=(r=h[i+8>>2])-(i=h[i+16>>2])|0,j=m,z=f[h[32+(0|Rn[h[h[e>>2]+32>>2]](e))>>2]+38>>1],u[j+38>>1]=z,h[m>>2]=s,h[m+16>>2]=0,h[m+20>>2]=0,h[m+8>>2]=r,h[m+12>>2]=0,h[e+372>>2]=l,u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0;i:if(Pe(m,t)){i=0,s=0,r=0,P=0,m=0,I=_=I-96|0,h[_+72>>2]=0,h[_+64>>2]=0,h[_+68>>2]=0,h[_+48>>2]=0,h[_+52>>2]=0,h[_+40>>2]=0,h[_+44>>2]=0,h[_+56>>2]=1065353216,h[_+32>>2]=0,h[_+24>>2]=0,h[_+28>>2]=0,y=1,l=e,F=h[e+124>>2];r:{n:{a:{s:{o:{l:{c:{u:if(!((0|g)<=0)){for(D=h[l+216>>2]!=h[l+220>>2];;){P=(c=P)+1|0;h:{d:{f:{p:{m:{g:{b:{v:{_:{y:{A:if(d[l+308|0]){E:{if(!((e=(M=h[l+296>>2])+((E=h[l+304>>2])>>>3|0)|0)>>>0>=(v=h[l+300>>2])>>>0)&&(n=d[0|e],e=E+1|0,h[l+304>>2]=e,n>>>(7&E)&1))switch((n=M+(S=e>>>3|0)|0)>>>0>=v>>>0?(n=e,e=0):(o=d[0|n],n=E+2|0,h[l+304>>2]=n,S=n>>>3|0,e=o>>>(7&e)&1),(o=S+M|0)>>>0<v>>>0?(o=d[0|o],h[l+304>>2]=n+1,n=o>>>(7&n)<<1&2):n=0,(e=(e|n)<<1)-1|0){case 0:case 2:case 4:break a;case 5:break y;case 1:case 3:break E;default:break A}if((0|r)==(0|s)){n=-1;break c}S=-1,T=h[l+8>>2],M=h[T+24>>2],e=-1,-1!=(0|(O=h[(v=r-4|0)>>2]))&&(e=-1,-1!=(0|(i=((i=O+1|0)>>>0)%3|0?i:O-2|0))&&(e=h[h[T>>2]+(i<<2)>>2])),-1!=(0|(n=h[M+((i=e)<<2)>>2]))&&(S=((e=n+1|0)>>>0)%3|0?e:n-2|0),n=h[T+12>>2],e=(w=b(c,3))+1|0,h[n+(O<<2)>>2]=e,h[(o=e<<2)+n>>2]=O,E=w+2|0,h[n+(S<<2)>>2]=E,h[(c=E<<2)+n>>2]=S,R=-1,e=-1;w:if(-1!=(0|O)){if((O>>>0)%3|0)n=O-1|0;else if(e=-1,-1==(0|(n=O+2|0)))break w;e=h[h[T>>2]+(n<<2)>>2]}if(-1!=(0|S)&&-1!=(0|(n=((n=S+1|0)>>>0)%3|0?n:S-2|0))&&(R=h[h[T>>2]+(n<<2)>>2]),n=-1,(0|e)==(0|i)|(0|i)==(0|R))break c;n=h[T>>2],h[n+(w<<2)>>2]=i,h[n+o>>2]=R,h[n+c>>2]=e,-1!=(0|e)&&(h[M+(e<<2)>>2]=E),n=h[l+120>>2]+(i>>>3&536870908)|0,e=h[n>>2],j=n,z=Dr(i)&e,h[j>>2]=z,h[v>>2]=w,i=s;break h}if((0|r)==(0|s)){n=-1;break c}if(R=h[l+8>>2],i=h[R+12>>2],e=(v=(w=b(c,3))+((M=5==(1|e))?2:1)|0)<<2,O=h[(o=r-4|0)>>2],h[i+e>>2]=O,h[i+(O<<2)>>2]=v,si(R+24|0),n=-1,i=h[l+8>>2],E=h[i+24>>2],(0|F)<h[i+28>>2]-E>>2)break c;if(n=(T=h[i>>2])+e|0,e=((i=h[R+28>>2]-h[R+24>>2]|0)>>2)-1|0,h[n>>2]=e,i&&(h[E+(e<<2)>>2]=v),v=M?w:w+2|0,n=T+(w+M<<2)|0,-1!=(0|O)){E:{w:{if((O>>>0)%3|0)i=O-1|0;else if(-1==(0|(i=O+2|0)))break w;if(e=h[T+(i<<2)>>2],h[T+(v<<2)>>2]=e,-1==(0|e))break E;h[E+(e<<2)>>2]=v;break E}h[T+(v<<2)>>2]=-1}i=-1,-1!=(0|(e=((e=O+1|0)>>>0)%3|0?e:O-2|0))&&(i=h[T+(e<<2)>>2])}else h[T+(v<<2)>>2]=-1,i=-1;h[n>>2]=i,h[o>>2]=w,i=s;break _}if((0|r)==(0|s)){n=-1;break c}T=h[(e=r-4|0)>>2],h[_+68>>2]=e;A:if(v=h[_+44>>2])if((o=Cr(v)>>>0>1)?v>>>0>(i=c)>>>0||(i=(c>>>0)%(v>>>0)|0):i=c&v+2147483647,n=h[h[_+40>>2]+(i<<2)>>2])if(n=h[n>>2]){E:{if(!o){for(v=v-1|0;;){w:{if((0|(o=h[n+4>>2]))!=(0|c)){if((o&v)==(0|i))break w;r=e;break A}if((0|c)==h[n+8>>2])break E}if(!(n=h[n>>2]))break}r=e;break A}for(;;){w:{if((0|(o=h[n+4>>2]))!=(0|c)){if(o>>>0>=v>>>0&&(o=(o>>>0)%(v>>>0)|0),(0|i)==(0|o))break w;r=e;break A}if((0|c)==h[n+8>>2])break E}if(!(n=h[n>>2]))break}r=e;break A}if((0|e)==(0|U)){if((i=1+(r=(o=U-s|0)>>2)|0)>>>0>=1073741824)break b;if(e=o>>1,i=o>>>0<2147483644?e>>>0<i>>>0?i:e:1073741823){if(i>>>0>=1073741824)break n;C=mr(i<<2)}else C=0;h[(e=C+(r<<2)|0)>>2]=h[n+12>>2],U=(i<<2)+C|0,r=e+4|0,(0|o)>0&&We(C,s,o),h[_+72>>2]=U,h[_+68>>2]=r,h[_+64>>2]=C,s&&be(s)}else h[e>>2]=h[n+12>>2],h[_+68>>2]=r}else r=e;else r=e;else r=e;if((0|r)==(0|C))break v;if(i=-1==(0|(w=h[(o=r-4|0)>>2])),R=h[l+8>>2],!i&-1!=h[h[R+12>>2]+(w<<2)>>2])break v;if(E=h[R+12>>2],-1!=(0|T)&-1!=h[E+(T<<2)>>2])break v;if(c=(M=b(c,3))+2|0,h[E+(w<<2)>>2]=c,h[(v=c<<2)+E>>2]=w,e=M+1|0,h[E+(T<<2)>>2]=e,h[(s=e<<2)+E>>2]=T,i)break g;if((w>>>0)%3|0){y=w-1|0;break p}if(-1!=(0|(y=w+2|0)))break p;S=h[R>>2],i=-1;break f}if(si((e=h[l+8>>2])+24|0),n=-1,o=h[l+8>>2],T=b(c,3),v=(R=(E=h[e+28>>2]-h[e+24>>2]|0)>>2)-1|0,h[h[o>>2]+(T<<2)>>2]=v,si(o+24|0),M=T+1|0,h[h[o>>2]+(M<<2)>>2]=(h[o+28>>2]-h[o+24>>2]>>2)-1,si((e=h[l+8>>2])+24|0),o=T+2|0,h[h[e>>2]+(o<<2)>>2]=(h[e+28>>2]-h[e+24>>2]>>2)-1,e=h[l+8>>2],w=h[e+24>>2],(0|F)<h[e+28>>2]-w>>2)break c;y:{if(E){if(h[w+(v<<2)>>2]=T,n=0,-4!=(0|E)&&(h[w+(R<<2)>>2]=M,-1==(0|(n=R+1|0))))break y}else h[w+(R<<2)>>2]=M,n=1;h[w+(n<<2)>>2]=o}if((0|r)==(0|U)){if((C=1+(r=(n=r-i|0)>>2)|0)>>>0>=1073741824)break m;if(e=n>>1,s=n>>>0<2147483644?e>>>0<C>>>0?C:e:1073741823){if(s>>>0>=1073741824)break n;C=mr(s<<2)}else C=0;h[(e=C+(r<<2)|0)>>2]=T,U=(s<<2)+C|0,r=e+4|0,(0|n)>0&&We(C,i,n),h[_+72>>2]=U,h[_+68>>2]=r,h[_+64>>2]=C,i&&be(i),i=s=C}else h[r>>2]=T,r=r+4|0,h[_+68>>2]=r}if((0|(n=h[l+40>>2]))==h[l+36>>2])break h;for(v=(-1^c)+g|0,o=r-4|0;;){if((e=h[n-8>>2])>>>0>v>>>0)break v;if((0|e)!=(0|v))break h;if(c=d[n-4|0],n=h[(e=n-12|0)>>2],h[l+40>>2]=e,(0|n)<0)break v;M=h[o>>2],h[_+20>>2]=(-1^n)+g,e=_+20|0,h[_+88>>2]=e,ve(_,_+40|0,e,_+88|0),n=h[_>>2];_:if(1&c){if(e=-1,-1==(0|M))break _;e=((e=M+1|0)>>>0)%3|0?e:M-2|0}else e=-1,-1!=(0|M)&&(e=M-1|0,(M>>>0)%3|0||(e=M+2|0));if(h[n+12>>2]=e,(0|(n=h[l+40>>2]))==h[l+36>>2])break}break h}if(n=-1,1&y)break c;break u}bn(),x()}i=-1,S=h[R>>2],h[S+(M<<2)>>2]=-1,n=-1;break d}bn(),x()}S=h[R>>2],i=h[S+(y<<2)>>2]}h[(M<<2)+S>>2]=i,n=-1,-1!=(0|(e=((e=w+1|0)>>>0)%3|0?e:w-2|0))&&(n=h[(e<<2)+S>>2])}if(h[s+S>>2]=n,-1!=(0|T)){d:{f:{if((T>>>0)%3|0)n=T-1|0;else if(-1==(0|(n=T+2|0)))break f;if(e=h[(n<<2)+S>>2],h[v+S>>2]=e,-1==(0|e))break d;h[h[R+24>>2]+(e<<2)>>2]=c;break d}h[v+S>>2]=-1}y=-1,n=-1,-1!=(0|(e=((e=T+1|0)>>>0)%3|0?e:T-2|0))&&(y=h[(e<<2)+S>>2],n=e)}else h[v+S>>2]=-1,y=-1,n=-1;c=(e=h[R+24>>2])+(y<<2)|0,-1!=(0|i)&&(h[e+(i<<2)>>2]=h[c>>2]);d:if(-1!=(0|n))for(;;){if(h[(n<<2)+S>>2]=i,-1==(0|(e=((e=n+1|0)>>>0)%3|0?e:n-2|0)))break d;if(-1==(0|(s=h[E+(e<<2)>>2])))break d;if(-1==(0|(n=((e=s+1|0)>>>0)%3|0?e:s-2|0)))break}h[c>>2]=-1;d:if(!D){if((0|N)==(0|L)){f:{if((s=1+(i=(n=N-m|0)>>2)|0)>>>0<1073741824){if(e=n>>1,s=n>>>0<2147483644?e>>>0<s>>>0?s:e:1073741823){if(s>>>0>=1073741824)break f;e=mr(s<<2)}else e=0;h[(i=e+(i<<2)|0)>>2]=y,N=e+(s<<2)|0,L=i+4|0,(0|n)>0&&We(e,m,n),h[_+32>>2]=N,h[_+28>>2]=L,h[_+24>>2]=e,m&&be(m),m=e;break d}bn(),x()}break n}h[L>>2]=y,L=L+4|0,h[_+28>>2]=L}h[o>>2]=M,i=s=C}if(y=(0|g)>(0|P),(0|g)==(0|P))break}P=g}if(n=-1,y=h[l+8>>2],!((0|F)<h[y+28>>2]-h[y+24>>2]>>2)){if((0|r)!=(0|C)){for(s=l+60|0,M=l+312|0;;){E=h[(r=r-4|0)>>2],h[_+68>>2]=r;u:{h:{d:{if(f[l+270>>1]<=513){if(!d[l+364|0])break d;if(i=h[l+360>>2],(e=h[l+352>>2]+(i>>>3|0)|0)>>>0>=p[l+356>>2])break h;e=d[0|e],h[l+360>>2]=i+1,e=e>>>(7&i)&1}else e=Gi(M);if(!e)break h}if(D=h[l+8>>2],w=h[D>>2],((h[D+4>>2]-w>>2>>>0)/3|0)<=(0|P))break c;if(e=-1,i=-1,v=h[D+24>>2],c=-1,-1!=(0|E)&&(c=-1,-1!=(0|(o=((o=E+1|0)>>>0)%3|0?o:E-2|0))&&(c=h[w+(o<<2)>>2])),-1!=(0|(g=h[v+(c<<2)>>2]))&&-1!=(0|(o=((o=g+1|0)>>>0)%3|0?o:g-2|0))&&(-1!=(0|(e=((e=o+1|0)>>>0)%3|0?e:o-2|0))&&(i=h[w+(e<<2)>>2]),e=o),y=-1,S=-1,g=-1,-1!=(0|(v=h[v+(i<<2)>>2]))&&(g=-1,-1!=(0|(o=((o=v+1|0)>>>0)%3|0?o:v-2|0))&&(-1!=(0|(g=((g=o+1|0)>>>0)%3|0?g:o-2|0))&&(S=h[w+(g<<2)>>2]),g=o)),N=h[D+12>>2],R=b(P,3),h[N+(v=R<<2)>>2]=E,h[N+(E<<2)>>2]=R,h[(o=(E=R+1|0)<<2)+N>>2]=e,h[N+(e<<2)>>2]=E,h[(e=(D=R+2|0)<<2)+N>>2]=g,h[N+(g<<2)>>2]=D,h[v+w>>2]=i,h[(g=o+w|0)>>2]=S,h[(o=e+w|0)>>2]=c,v=h[l+120>>2],e=h[(i=v+((c=E>>>0<R>>>0?-1:i)>>>3&536870908)|0)>>2],j=i,z=Dr(c)&e,h[j>>2]=z,y=-1!=(0|E)?h[g>>2]:y,e=h[(i=v+(y>>>3&536870908)|0)>>2],j=i,z=Dr(y)&e,h[j>>2]=z,y=-1,y=-1!=(0|D)?h[o>>2]:y,e=h[(i=v+(y>>>3&536870908)|0)>>2],j=i,z=Dr(y)&e,h[j>>2]=z,(0|(y=h[l+64>>2]))==(e=h[l+68>>2])<<5){if((y+1|0)<0)break l;xe(s,e=y>>>0<=1073741822?(e<<=6)>>>0<(i=y+32&-32)>>>0?i:e:2147483647),y=h[l+64>>2]}if(P=P+1|0,h[l+64>>2]=y+1,e=h[l+60>>2]+(y>>>3&536870908)|0,h[e>>2]=h[e>>2]|1<<y,(0|(e=h[l+76>>2]))!=h[l+80>>2]){h[e>>2]=R,h[l+76>>2]=e+4;break u}if((c=1+(i=(g=e-(o=h[l+72>>2])|0)>>2)|0)>>>0>=1073741824)break o;if(e=g>>1,c=g>>>0<2147483644?e>>>0<c>>>0?c:e:1073741823){if(c>>>0>=1073741824)break n;e=mr(c<<2)}else e=0;if(h[(i=e+(i<<2)|0)>>2]=R,(0|g)>0&&We(e,o,g),h[l+80>>2]=e+(c<<2),h[l+76>>2]=i+4,h[l+72>>2]=e,!o)break u;be(o);break u}if((0|(e=h[l+64>>2]))==(c=h[l+68>>2])<<5){if((e+1|0)<0)break l;e>>>0<=1073741822?(i=e+32&-32,e=(e=c<<6)>>>0<i>>>0?i:e):e=2147483647,xe(s,e),e=h[l+64>>2]}if(h[l+64>>2]=e+1,c=h[l+60>>2]+(e>>>3&536870908)|0,i=h[c>>2],j=c,z=Dr(e)&i,h[j>>2]=z,(0|(e=h[l+76>>2]))==h[l+80>>2]){if((c=1+(i=(g=e-(o=h[l+72>>2])|0)>>2)|0)>>>0>=1073741824)break o;if(e=g>>1,c=g>>>0<2147483644?e>>>0<c>>>0?c:e:1073741823){if(c>>>0>=1073741824)break s;e=mr(c<<2)}else e=0;h[(i=e+(i<<2)|0)>>2]=E,(0|g)>0&&We(e,o,g),h[l+80>>2]=e+(c<<2),h[l+76>>2]=i+4,h[l+72>>2]=e,o&&be(o)}else h[e>>2]=E,h[l+76>>2]=e+4}if((0|r)==(0|C))break}y=h[l+8>>2]}if(((h[y+4>>2]-h[y>>2]>>2>>>0)/3|0)==(0|P))if(P=h[y+24>>2],n=h[y+28>>2]-P>>2,(0|m)!=(0|L))for(i=m;;){if(s=h[i>>2],-1==h[(S=((r=n-1|0)<<2)+P|0)>>2])for(;r=n-2|0,n=n-1|0,-1==h[(S=(r<<2)+P|0)>>2];);if(r>>>0>=s>>>0){if(h[_>>2]=y,P=h[S>>2],a[_+12|0]=1,h[_+8>>2]=P,h[_+4>>2]=P,-1!=(0|P))for(;h[h[y>>2]+(P<<2)>>2]=s,_t(_),y=h[l+8>>2],-1!=(0|(P=h[_+8>>2])););e=(P=h[y+24>>2])+(r<<2)|0,-1!=(0|s)&&(h[(s<<2)+P>>2]=h[e>>2]),h[e>>2]=-1,o=1<<s,s=(e=h[l+120>>2])+(s>>>3&536870908)|0,c=e+(r>>>3&536870908)|0,e=1<<r,r=h[c>>2]&e?o|h[s>>2]:h[s>>2]&(-1^o),h[s>>2]=r,h[c>>2]=h[c>>2]&(-1^e),n=n-1|0}if((0|L)==(0|(i=i+4|0)))break}else m=L}}if(m&&be(m),e=h[_+48>>2])for(;r=h[e>>2],be(e),e=r;);e=h[_+40>>2],h[_+40>>2]=0,e&&be(e),C&&(h[_+68>>2]=C,be(C)),I=_+96|0;break r}pn(),x()}bn(),x()}Zi(1336)}x()}Zi(1336),x()}if(-1!=(0|n)){i=(e=h[t+16>>2])+h[t>>2]|0,e=(r=h[t+8>>2])-e|0,r=h[h[l+4>>2]+32>>2],u[r+38>>1]=f[r+38>>1],h[r>>2]=i,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=e,h[r+12>>2]=0,i=h[l+4>>2],(65535&(r=(e=f[i+36>>1])<<8|e>>>8))>>>0<=513&&(e=h[i+32>>2],i=G+h[e+20>>2]|0,i=(C=A+h[e+16>>2]|0)>>>0<A>>>0?i+1|0:i,h[e+16>>2]=C,h[e+20>>2]=i);r:if(h[l+216>>2]!=h[l+220>>2]){if(e=h[l+8>>2],i=h[e>>2],e=h[e+4>>2],!((65535&r)>>>0>=513)){if((0|e)==(0|i))break r;for(r=0;;){if(Oe(l,r)){if(r=r+3|0,e=h[l+8>>2],r>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}if((0|e)!=(0|i)){for(r=0;;){if(ke(l,r)){if(r=r+3|0,e=h[l+8>>2],r>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}}if(ci(B),(0|(r=h[l+216>>2]))!=h[l+220>>2])for(s=0;;){if(lt(4+((i=b(s,144))+r|0)|0,h[l+8>>2]),k=h[V>>2],(0|(r=h[132+(e=i+k|0)>>2]))!=(0|(e=h[e+136>>2])))for(;dt(4+(i+k|0)|0,h[r>>2]),k=h[V>>2],(0|e)!=(0|(r=r+4|0)););if(_e(4+(i+k|0)|0),s=s+1|0,r=h[l+216>>2],!(s>>>0<(h[l+220>>2]-r|0)/144>>>0))break}if(e=h[l+8>>2],oi(l+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(k=h[l+216>>2]))!=h[l+220>>2])for(r=0;e=b(r,144)+k|0,i=h[e+60>>2]-h[e+56>>2]>>2,s=e+104|0,e=h[l+8>>2],oi(s,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|i)?e:i),r=r+1|0,k=h[l+216>>2],r>>>0<(h[l+220>>2]-k|0)/144>>>0;);k=ne(l,n)}}break e}k=0}return I=t- -64|0,0|k},hn,Zr,Jr,pt,function(e){be(pt(e|=0))},Br,Ht,Jt,K,function(e){var t,i=0,r=0,n=0,s=0,o=0,l=0,c=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0,V=0,F=0,G=0,B=0,j=0,z=0,H=0,W=0,$=0;if(I=t=I+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(s=h[e+144>>2])for(;n=h[s>>2],be(s),s=n,n;);if(s=0,h[e+144>>2]=0,o=h[e+140>>2]){if(o-1>>>0>=3)for(n=-4&o;h[(i=s<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|i)>>2]=0,h[h[e+136>>2]+(8|i)>>2]=0,h[h[e+136>>2]+(12|i)>>2]=0,s=s+4|0,(0|n)!=(0|(l=l+4|0)););if(n=3&o)for(;h[h[e+136>>2]+(s<<2)>>2]=0,s=s+1|0,(0|n)!=(0|(P=P+1|0)););}h[e+148>>2]=0}e:{t:{if(s=h[e+4>>2],!((n=(P=d[s+36|0])<<8|d[s+37|0])>>>0>513))if(r=h[s+32>>2],n>>>0<=511){if(n=h[r+20>>2],n=(l=(o=h[r+16>>2])+4|0)>>>0<4?n+1|0:n,i=l,l=h[r+12>>2],i>>>0>p[r+8>>2]&(0|l)<=(0|n)|(0|n)>(0|l))break t;l=o+h[r>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[r+16>>2]=i,h[r+20>>2]=n,h[e+132>>2]=l}else{if(!Si(1,t,r))break t;s=h[e+4>>2],P=d[s+36|0],h[e+132>>2]=h[t>>2]}r=h[s+32>>2];i:{r:{if((255&P)>>>0<=1){if(P=0,n=h[r+20>>2],n=(l=(o=h[r+16>>2])+4|0)>>>0<4?n+1|0:n,i=l,l=h[r+12>>2],i>>>0>p[r+8>>2]&(0|l)<=(0|n)|(0|n)>(0|l))break e;l=o+h[r>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+60>>2]=l,h[r+16>>2]=i,h[r+20>>2]=n,h[e+156>>2]=l,r=e+156|0}else{if(P=0,!Si(1,t+60|0,r))break e;if(s=h[e+4>>2],n=d[s+36|0],h[e+156>>2]=h[t+60>>2],r=e+156|0,n>>>0>1)break r}if(A=h[s+32>>2],n=h[A+8>>2],o=h[A+12>>2],g=n,n=h[A+20>>2],g>>>0<(s=l=(i=h[A+16>>2])+4|0)>>>0&(0|(n=l>>>0<4?n+1|0:n))>=(0|o)|(0|n)>(0|o))break e;l=i+h[A>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+56>>2]=l,h[A+16>>2]=s,h[A+20>>2]=n;break i}if(!Si(1,t+56|0,h[s+32>>2]))break e;l=h[t+56>>2]}if(l>>>0>1431655765|p[r>>2]>b(l,3)>>>0)break e;if(k=h[e+4>>2],s=h[k+32>>2],o=g=h[s+8>>2],(0|(i=h[s+12>>2]))<=(0|(n=h[s+20>>2]))&(_=h[s+16>>2])>>>0>=o>>>0|(0|n)>(0|i))break e;if(A=h[s>>2],m=d[A+_|0],o=(r=_+1|0)?n:n+1|0,h[s+16>>2]=r,h[s+20>>2]=o,d[k+36|0]<=1){if((o=_+5|0)>>>0>g>>>0&(0|(n=o>>>0<5?n+1|0:n))>=(0|i)|(0|n)>(0|i))break e;r=d[0|(i=r+A|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+52>>2]=r,h[s+16>>2]=o,h[s+20>>2]=n}else{if(!Si(1,t+52|0,s))break e;r=h[t+52>>2]}if(((r>>>0)/3|0)+r>>>0<l>>>0|r>>>0>l>>>0)break e;if(n=h[e+4>>2],A=h[n+32>>2],d[n+36|0]<=1){if(n=h[A+20>>2],n=(s=(i=h[A+16>>2])+4|0)>>>0<4?n+1|0:n,o=s,s=h[A+12>>2],o>>>0>p[A+8>>2]&(0|s)<=(0|n)|(0|n)>(0|s))break e;s=i+h[A>>2]|0,i=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+48>>2]=i,h[A+16>>2]=o,h[A+20>>2]=n}else{if(!Si(1,t+48|0,A))break e;i=h[t+48>>2]}if(r>>>0<i>>>0)break e;if(h[e+28>>2]=h[e+24>>2],bi(n=mr(88)),s=h[e+8>>2],h[e+8>>2]=n,s&&(Ni(s),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],Di(e+160|0,l),h[e+176>>2]=h[e+172>>2],Di(e+172|0,l),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(B=e+216|0),pe(B,m),!jt(h[e+8>>2],l,h[e+156>>2]+i|0))break e;if(n=h[e+156>>2],a[0|t]=1,Pt(e+120|0,n+i|0,t),l=h[e+4>>2],(n=65535&((n=f[l+36>>1])<<8|n>>>8))>>>0<=513){if(A=h[l+32>>2],n>>>0<=511){if(n=h[A+20>>2],n=(l=(o=h[A+16>>2])+4|0)>>>0<4?n+1|0:n,s=l,l=h[A+12>>2],s>>>0>p[A+8>>2]&(0|l)<=(0|n)|(0|n)>(0|l))break e;l=o+h[A>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[A+16>>2]=s,h[A+20>>2]=n}else{if(!Si(1,t+44|0,A))break e;l=h[t+44>>2]}if(!l)break e;if(A=h[h[e+4>>2]+32>>2],(s=(o=h[A+8>>2])-(n=h[A+16>>2])|0)>>>0<l>>>0&(0|(n=h[A+12>>2]-(h[A+20>>2]+(n>>>0>o>>>0)|0)|0))<=0|(0|n)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,A=h[h[e+4>>2]+32>>2],o=((n=h[(s=A)+16>>2])+h[s>>2]|0)+l|0,n=((s=h[s+8>>2])-n|0)-l|0,u[t+38>>1]=f[A+38>>1],h[t>>2]=o,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=n,h[t+12>>2]=0,-1==(0|(A=ee(e,t))))break e;H=A>>31}else if(A=-1,H=-1,-1==(0|ee(e,h[l+32>>2])))break e;di(U=e+232|0,e),h[e+372>>2]=m,h[e+384>>2]=h[e+156>>2]+i,u[t+38>>1]=0,h[t>>2]=0,h[(n=t)+8>>2]=0,h[n+12>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,a[n+29|0]=0,a[n+30|0]=0,a[n+31|0]=0,a[n+32|0]=0,a[n+33|0]=0,a[n+34|0]=0,a[n+35|0]=0,a[n+36|0]=0,_=0,I=g=I-16|0,Pe(U,n)&&(l=n,n=h[n+20>>2],n=(s=(o=h[l+16>>2])+4|0)>>>0<4?n+1|0:n,i=s,s=h[l+12>>2],i>>>0>p[l+8>>2]&(0|s)<=(0|n)|(0|n)>(0|s)||(s=o+h[l>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[l+16>>2]=i,h[l+20>>2]=n,(0|s)<0||(0|(i=h[U+152>>2]))<=(0|s)||(h[g+12>>2]=0,n=h[U+156>>2],(s=h[U+160>>2]-n>>2)>>>0<i>>>0?$e(U+156|0,i-s|0,g+12|0):i>>>0>=s>>>0||(h[U+160>>2]=n+(i<<2)),_=ze(U+168|0,l)))),I=g+16|0;i:if(_){i=0,_=0,s=0,n=0,l=0,k=0,I=y=I-96|0,h[y+72>>2]=0,h[y+64>>2]=0,h[y+68>>2]=0,h[y+48>>2]=0,h[y+52>>2]=0,h[y+40>>2]=0,h[y+44>>2]=0,h[y+56>>2]=1065353216,h[y+32>>2]=0,h[y+24>>2]=0,h[y+28>>2]=0,E=1,c=e,j=h[e+124>>2];r:{n:{a:{s:{g=r;o:{l:if(!((0|r)<=0)){for(F=c+400|0,z=c+232|0,D=h[c+216>>2]!=h[c+220>>2];;){k=(m=k)+1|0;c:{u:{h:{d:{if(-1==h[c+420>>2]||!Gi(F)){if(d[c+308|0]){if((e=(w=h[c+296>>2])+((S=h[c+304>>2])>>>3|0)|0)>>>0>=(T=h[c+300>>2])>>>0)break d;if(o=d[0|e],e=S+1|0,h[c+304>>2]=e,!(o>>>(7&S)&1))break d;(o=w+(v=e>>>3|0)|0)>>>0>=T>>>0?(o=e,e=0):(r=d[0|o],o=S+2|0,h[c+304>>2]=o,v=o>>>3|0,e=r>>>(7&e)&1),(r=v+w|0)>>>0<T>>>0?(r=d[0|r],h[c+304>>2]=o+1,o=r>>>(7&o)<<1&2):o=0,r=(e|o)<<1|1}else r=1;h[c+416>>2]=r;break u}if(r=h[c+420>>2],h[c+416>>2]=r,r)break u;break h}h[c+416>>2]=0}if((0|i)==(0|_)){o=-1;break o}T=-1,O=h[c+8>>2],e=S=h[O+24>>2],r=-1,-1!=(0|(N=h[(w=i-4|0)>>2]))&&(r=-1,-1!=(0|(o=((o=N+1|0)>>>0)%3|0?o:N-2|0))&&(r=h[h[O>>2]+(o<<2)>>2])),-1!=(0|(o=h[e+(r<<2)>>2]))&&(T=((e=o+1|0)>>>0)%3|0?e:o-2|0),o=h[O+12>>2],e=(R=b(m,3))+1|0,h[o+(N<<2)>>2]=e,h[(v=e<<2)+o>>2]=N,M=R+2|0,h[o+(T<<2)>>2]=M,h[(m=M<<2)+o>>2]=T,E=-1,e=-1;h:if(-1!=(0|N)){if((N>>>0)%3|0)o=N-1|0;else if(e=-1,-1==(0|(o=N+2|0)))break h;e=h[h[O>>2]+(o<<2)>>2]}if(-1!=(0|T)&&-1!=(0|(o=((o=T+1|0)>>>0)%3|0?o:T-2|0))&&(E=h[h[O>>2]+(o<<2)>>2]),o=-1,(0|e)==(0|r)|(0|r)==(0|E))break o;o=h[O>>2],h[o+(R<<2)>>2]=r,h[o+v>>2]=E,h[o+m>>2]=e,-1!=(0|e)&&(h[S+(e<<2)>>2]=M),o=h[c+120>>2]+(r>>>3&536870908)|0,e=h[o>>2],W=o,$=Dr(r)&e,h[W>>2]=$,h[w>>2]=R,Fe(z,R);break c}o=-1;u:{h:{d:{f:{p:{m:{g:{b:{v:{_:switch(r-1|0){case 2:case 4:if((0|n)==(0|i))break o;if(w=h[c+8>>2],v=h[w+12>>2],e=(r=(S=b(m,3))+((T=5==(0|r))?2:1)|0)<<2,R=h[(_=i-4|0)>>2],h[v+e>>2]=R,h[v+(R<<2)>>2]=r,si(w+24|0),i=h[c+8>>2],v=h[i+24>>2],h[i+28>>2]-v>>2>(0|j))break o;if(N=(M=h[i>>2])+e|0,e=((i=h[w+28>>2]-h[w+24>>2]|0)>>2)-1|0,h[N>>2]=e,i&&(h[v+(e<<2)>>2]=r),w=T?S:S+2|0,i=M+(T+S<<2)|0,-1!=(0|R)){y:{A:{if((R>>>0)%3|0)r=R-1|0;else if(-1==(0|(r=R+2|0)))break A;if(e=h[M+(r<<2)>>2],h[M+(w<<2)>>2]=e,-1==(0|e))break y;h[v+(e<<2)>>2]=w;break y}h[M+(w<<2)>>2]=-1}r=-1,-1!=(0|(e=((e=R+1|0)>>>0)%3|0?e:R-2|0))&&(r=h[M+(e<<2)>>2])}else h[M+(w<<2)>>2]=-1,r=-1;h[i>>2]=r,h[_>>2]=S;break v;case 0:if((0|i)==(0|_))break o;O=h[(s=i-4|0)>>2],h[y+68>>2]=s;y:if((w=h[y+44>>2])&&(r=h[y+40>>2],e=m&w+2147483647,(T=Cr(w)>>>0>1)&&((e=m)>>>0<w>>>0||(e=(m>>>0)%(w>>>0)|0)),(e=h[r+((v=e)<<2)>>2])&&(r=h[e>>2]))){A:{if(!T){for(T=w-1|0;;){E:{if((0|(e=h[r+4>>2]))!=(0|m)){if((0|v)==(e&T))break E;break y}if((0|m)==h[r+8>>2])break A}if(!(r=h[r>>2]))break}break y}for(;;){E:{if((0|(e=h[r+4>>2]))!=(0|m)){if(e>>>0>=w>>>0&&(e=(e>>>0)%(w>>>0)|0),(0|e)==(0|v))break E;break y}if((0|m)==h[r+8>>2])break A}if(!(r=h[r>>2]))break}break y}if((0|s)==(0|G)){if((n=1+(s=(v=G-_|0)>>2)|0)>>>0>=1073741824)break m;if(e=v>>1,i=v>>>0<2147483644?e>>>0<n>>>0?n:e:1073741823){if(i>>>0>=1073741824)break n;n=mr(i<<2)}else n=0;h[(e=n+(s<<2)|0)>>2]=h[r+12>>2],G=(i<<2)+n|0,s=e+4|0,(0|v)>0&&We(n,_,v),h[y+72>>2]=G,h[y+68>>2]=s,h[y+64>>2]=n,_&&be(_)}else h[s>>2]=h[r+12>>2],h[y+68>>2]=i,s=i}if((0|n)==(0|s))break g;if(r=-1==(0|(R=h[(v=s-4|0)>>2])),M=h[c+8>>2],!r&-1!=h[h[M+12>>2]+(R<<2)>>2])break g;if(S=h[M+12>>2],-1!=(0|O)&-1!=h[S+(O<<2)>>2])break g;if(m=(w=b(m,3))+2|0,h[S+(R<<2)>>2]=m,h[(_=m<<2)+S>>2]=R,e=w+1|0,h[S+(O<<2)>>2]=e,h[(i=e<<2)+S>>2]=O,r)break p;if((R>>>0)%3|0){o=R-1|0;break d}if(-1!=(0|(o=R+2|0)))break d;E=h[M>>2],e=-1;break h;case 6:break _;default:break o}if(si((e=h[c+8>>2])+24|0),s=h[c+8>>2],M=b(m,3),r=(w=(T=h[e+28>>2]-h[e+24>>2]|0)>>2)-1|0,h[h[s>>2]+(M<<2)>>2]=r,si(s+24|0),v=M+1|0,h[h[s>>2]+(v<<2)>>2]=(h[s+28>>2]-h[s+24>>2]>>2)-1,si((e=h[c+8>>2])+24|0),s=M+2|0,h[h[e>>2]+(s<<2)>>2]=(h[e+28>>2]-h[e+24>>2]>>2)-1,e=h[c+8>>2],S=h[e+24>>2],h[e+28>>2]-S>>2>(0|j))break o;_:{if(T){if(h[S+(r<<2)>>2]=M,r=0,-4!=(0|T)&&(h[S+(w<<2)>>2]=v,-1==(0|(r=w+1|0))))break _}else h[S+(w<<2)>>2]=v,r=1;h[S+(r<<2)>>2]=s}if((0|i)!=(0|G)){h[i>>2]=M,s=i+4|0,h[y+68>>2]=s;break b}if((n=1+(s=(r=G-_|0)>>2)|0)>>>0>=1073741824)break f;if(e=r>>1,i=r>>>0<2147483644?e>>>0<n>>>0?n:e:1073741823){if(i>>>0>=1073741824)break n;n=mr(i<<2)}else n=0;h[(e=n+(s<<2)|0)>>2]=M,G=(i<<2)+n|0,s=e+4|0,(0|r)>0&&We(n,_,r),h[y+72>>2]=G,h[y+68>>2]=s,h[y+64>>2]=n,_&&be(_)}_=n}Fe(z,h[s-4>>2]);b:if((0|(r=h[c+40>>2]))!=h[c+36>>2])for(T=g+(-1^m)|0,v=s-4|0;;){if((e=h[r-8>>2])>>>0>T>>>0)break g;if((0|e)!=(0|T))break b;if(m=d[r-4|0],i=h[(e=r-12|0)>>2],h[c+40>>2]=e,(0|i)<0)break g;r=h[v>>2],h[y+20>>2]=g+(-1^i),e=y+20|0,h[y+88>>2]=e,ve(y,y+40|0,e,y+88|0),i=h[y>>2];v:if(1&m){if(e=-1,-1==(0|r))break v;e=((e=r+1|0)>>>0)%3|0?e:r-2|0}else e=-1,-1!=(0|r)&&(e=r-1|0,(r>>>0)%3|0||(e=r+2|0));if(h[i+12>>2]=e,(0|(r=h[c+40>>2]))==h[c+36>>2])break}i=s;break c}if(E)break o;break l}bn(),x()}T=-1,E=h[M>>2],h[E+(w<<2)>>2]=-1,o=-1;break u}bn(),x()}E=h[M>>2],e=h[E+(o<<2)>>2]}T=e,h[(w<<2)+E>>2]=e,o=-1,-1!=(0|(e=((e=R+1|0)>>>0)%3|0?e:R-2|0))&&(o=h[(e<<2)+E>>2])}if(h[i+E>>2]=o,-1!=(0|O)){u:{h:{if((O>>>0)%3|0)o=O-1|0;else if(-1==(0|(o=O+2|0)))break h;if(e=h[(o<<2)+E>>2],h[_+E>>2]=e,-1==(0|e))break u;h[h[M+24>>2]+(e<<2)>>2]=m;break u}h[_+E>>2]=-1}_=-1,o=-1,-1!=(0|(e=((e=O+1|0)>>>0)%3|0?e:O-2|0))&&(_=h[(e<<2)+E>>2],o=e)}else h[_+E>>2]=-1,_=-1,o=-1;m=e=(r=h[c+388>>2])+(i=T<<2)|0,N=h[e>>2],e=_<<2,h[m>>2]=N+h[e+r>>2],r=(m=e)+(e=h[M+24>>2])|0,-1!=(0|T)&&(h[e+i>>2]=h[r>>2]);u:if(-1!=(0|o))for(;;){if(h[(o<<2)+E>>2]=T,-1==(0|(e=((e=o+1|0)>>>0)%3|0?e:o-2|0)))break u;if(-1==(0|(i=h[S+(e<<2)>>2])))break u;if(-1==(0|(o=((e=i+1|0)>>>0)%3|0?e:i-2|0)))break}h[r>>2]=-1;u:if(!D){if((0|L)==(0|V)){h:{if((l=1+(i=(r=L-C|0)>>2)|0)>>>0<1073741824){if(e=r>>1,o=r>>>0<2147483644?e>>>0<l>>>0?l:e:1073741823){if(o>>>0>=1073741824)break h;l=mr(o<<2)}else l=0;h[(e=l+(i<<2)|0)>>2]=_,L=(o<<2)+l|0,V=e+4|0,(0|r)>0&&We(l,C,r),h[y+32>>2]=L,h[y+28>>2]=V,h[y+24>>2]=l,C&&be(C),C=l;break u}bn(),x()}break n}h[V>>2]=_,V=V+4|0,h[y+28>>2]=V}h[v>>2]=w,i=s,_=n,Fe(z,w)}if(E=(0|g)>(0|k),(0|g)==(0|k))break}k=g}if(o=-1,E=h[c+8>>2],!(h[E+28>>2]-h[E+24>>2]>>2>(0|j))){if((0|n)!=(0|s)){for(e=c+60|0,w=c+312|0;;){D=h[(s=s-4|0)>>2],h[y+68>>2]=s;l:{c:{u:{if(f[c+270>>1]<=513){if(!d[c+364|0])break u;if(r=h[c+360>>2],(i=h[c+352>>2]+(r>>>3|0)|0)>>>0>=p[c+356>>2])break c;i=d[0|i],h[c+360>>2]=r+1,i=i>>>(7&r)&1}else i=Gi(w);if(!i)break c}if(S=h[c+8>>2],L=h[S>>2],((h[S+4>>2]-L>>2>>>0)/3|0)<=(0|k))break o;if(r=-1,_=-1,T=-1,m=C=h[S+24>>2],g=-1,-1!=(0|D)&&(g=-1,-1!=(0|(i=((i=D+1|0)>>>0)%3|0?i:D-2|0))&&(g=h[L+(i<<2)>>2])),i=-1,-1!=(0|(v=h[(g<<2)+m>>2]))&&(i=-1,-1!=(0|(m=((m=v+1|0)>>>0)%3|0?m:v-2|0))&&(r=m,i=-1!=(0|(i=((i=m+1|0)>>>0)%3|0?i:r-2|0))?h[L+(i<<2)>>2]:-1)),v=-1,-1!=(0|(C=h[C+(i<<2)>>2]))&&(v=-1,-1!=(0|(m=((m=C+1|0)>>>0)%3|0?m:C-2|0))&&(-1!=(0|(v=((v=m+1|0)>>>0)%3|0?v:m-2|0))&&(T=h[L+(v<<2)>>2]),v=m)),F=h[S+12>>2],M=b(k,3),h[F+(C=M<<2)>>2]=D,h[F+(D<<2)>>2]=M,h[(m=(D=M+1|0)<<2)+F>>2]=r,h[F+(r<<2)>>2]=D,h[(r=(S=M+2|0)<<2)+F>>2]=v,h[F+(v<<2)>>2]=S,h[C+L>>2]=i,h[(v=m+L|0)>>2]=T,h[(m=r+L|0)>>2]=g,C=h[c+120>>2],i=h[(r=C+((g=M>>>0>D>>>0?-1:i)>>>3&536870908)|0)>>2],W=r,$=Dr(g)&i,h[W>>2]=$,_=-1!=(0|D)?h[v>>2]:_,i=h[(r=C+(_>>>3&536870908)|0)>>2],W=r,$=Dr(_)&i,h[W>>2]=$,r=-1,r=-1!=(0|S)?h[m>>2]:r,i=h[(g=C+(r>>>3&536870908)|0)>>2],W=g,$=Dr(r)&i,h[W>>2]=$,(0|(r=h[c+64>>2]))==(i=h[c+68>>2])<<5){if((r+1|0)<0)break s;xe(e,i=r>>>0<=1073741822?(r=r+32&-32)>>>0>(i<<=6)>>>0?r:i:2147483647),r=h[c+64>>2]}if(k=k+1|0,h[c+64>>2]=r+1,i=h[c+60>>2]+(r>>>3&536870908)|0,h[i>>2]=h[i>>2]|1<<r,(0|(i=h[c+76>>2]))!=h[c+80>>2]){h[i>>2]=M,h[c+76>>2]=i+4;break l}if((g=1+(r=(_=i-(m=h[c+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(i=_>>1,g=_>>>0<2147483644?i>>>0<g>>>0?g:i:1073741823){if(g>>>0>=1073741824)break n;i=mr(g<<2)}else i=0;if(h[(r=i+(r<<2)|0)>>2]=M,(0|_)>0&&We(i,m,_),h[c+80>>2]=i+(g<<2),h[c+76>>2]=r+4,h[c+72>>2]=i,!m)break l;be(m);break l}if((0|(E=h[c+64>>2]))==(i=h[c+68>>2])<<5){if((E+1|0)<0)break s;xe(e,i=E>>>0<=1073741822?(r=E+32&-32)>>>0>(i<<=6)>>>0?r:i:2147483647),E=h[c+64>>2]}if(h[c+64>>2]=E+1,r=h[c+60>>2]+(E>>>3&536870908)|0,i=h[r>>2],W=r,$=Dr(E)&i,h[W>>2]=$,(0|(i=h[c+76>>2]))==h[c+80>>2]){if((g=1+(r=(_=i-(m=h[c+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(i=_>>1,g=_>>>0<2147483644?i>>>0<g>>>0?g:i:1073741823){if(g>>>0>=1073741824)break n;i=mr(g<<2)}else i=0;h[(r=i+(r<<2)|0)>>2]=D,(0|_)>0&&We(i,m,_),h[c+80>>2]=i+(g<<2),h[c+76>>2]=r+4,h[c+72>>2]=i,m&&be(m)}else h[i>>2]=D,h[c+76>>2]=i+4}if((0|n)==(0|s))break}E=h[c+8>>2]}if(((h[E+4>>2]-h[E>>2]>>2>>>0)/3|0)==(0|k))if(s=h[E+24>>2],o=h[E+28>>2]-s>>2,(0|l)!=(0|V))for(e=l;;){if(g=h[e>>2],-1==h[(i=((r=o-1|0)<<2)+s|0)>>2])for(;r=o-2|0,o=o-1|0,-1==h[(i=(r<<2)+s|0)>>2];);if(r>>>0>=g>>>0){if(h[y>>2]=E,s=h[i>>2],a[y+12|0]=1,h[y+8>>2]=s,h[y+4>>2]=s,-1!=(0|s))for(;h[h[E>>2]+(s<<2)>>2]=g,_t(y),E=h[c+8>>2],-1!=(0|(s=h[y+8>>2])););i=(s=h[E+24>>2])+(r<<2)|0,-1!=(0|g)&&(h[(g<<2)+s>>2]=h[i>>2]),h[i>>2]=-1,m=1<<g,g=(i=h[c+120>>2])+(g>>>3&536870908)|0,k=i+(r>>>3&536870908)|0,i=1<<r,h[k>>2]&i?m|=h[g>>2]:m=h[g>>2]&(-1^m),h[g>>2]=m,h[k>>2]=h[k>>2]&(-1^i),o=o-1|0}if((0|V)==(0|(e=e+4|0)))break}else l=V}}if(l&&be(l),e=h[y+48>>2])for(;l=h[e>>2],be(e),e=l;);e=h[y+40>>2],h[y+40>>2]=0,e&&be(e),n&&(h[y+68>>2]=n,be(n)),I=y+96|0;break r}pn(),x()}bn(),x()}Zi(1336),x()}if(-1!=(0|o)){l=(e=h[t+16>>2])+h[t>>2]|0,e=(n=h[t+8>>2])-e|0,n=h[h[c+4>>2]+32>>2],u[n+38>>1]=f[n+38>>1],h[n>>2]=l,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=e,h[n+12>>2]=0,n=h[c+4>>2],(65535&(l=(e=f[n+36>>1])<<8|e>>>8))>>>0<=513&&(e=h[n+32>>2],n=H+h[e+20>>2]|0,n=(s=A+h[e+16>>2]|0)>>>0<A>>>0?n+1|0:n,h[e+16>>2]=s,h[e+20>>2]=n);r:if(h[c+216>>2]!=h[c+220>>2]){if(e=h[c+8>>2],n=h[e>>2],e=h[e+4>>2],!((65535&l)>>>0>=513)){if((0|e)==(0|n))break r;for(s=0;;){if(Oe(c,s)){if(s=s+3|0,e=h[c+8>>2],s>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}if((0|e)!=(0|n)){for(s=0;;){if(ke(c,s)){if(s=s+3|0,e=h[c+8>>2],s>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}}if(ci(U),(0|(s=h[c+216>>2]))!=h[c+220>>2])for(l=0;;){if(lt(4+((n=b(l,144))+s|0)|0,h[c+8>>2]),P=h[B>>2],(0|(s=h[132+(e=n+P|0)>>2]))!=(0|(e=h[e+136>>2])))for(;dt(4+(n+P|0)|0,h[s>>2]),P=h[B>>2],(0|e)!=(0|(s=s+4|0)););if(_e(4+(n+P|0)|0),l=l+1|0,s=h[c+216>>2],!(l>>>0<(h[c+220>>2]-s|0)/144>>>0))break}if(e=h[c+8>>2],oi(c+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(P=h[c+216>>2]))!=h[c+220>>2])for(s=0;e=b(s,144)+P|0,n=h[e+60>>2]-h[e+56>>2]>>2,l=e+104|0,e=h[c+8>>2],oi(l,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|n)?e:n),s=s+1|0,P=h[c+216>>2],s>>>0<(h[c+220>>2]-P|0)/144>>>0;);P=ne(c,o)}}break e}P=0}return I=t- -64|0,0|P},hn,Zr,Jr,Ye,function(e){be(Ye(e|=0))},Br,Ht,Jt,K,function(e){var t,i=0,r=0,n=0,s=0,o=0,l=0,c=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0,F=0,G=0,B=0,j=0,z=0,H=0,W=0;if(I=t=I+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(i=h[e+144>>2])for(;s=h[i>>2],be(i),i=s;);if(i=0,h[e+144>>2]=0,s=h[e+140>>2]){if(s-1>>>0>=3)for(n=-4&s;h[(l=i<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|l)>>2]=0,h[h[e+136>>2]+(8|l)>>2]=0,h[h[e+136>>2]+(12|l)>>2]=0,i=i+4|0,(0|n)!=(0|(c=c+4|0)););if(s&=3)for(;h[h[e+136>>2]+(i<<2)>>2]=0,i=i+1|0,(0|s)!=(0|(P=P+1|0)););}h[e+148>>2]=0}e:{t:{if(i=h[e+4>>2],!((c=(P=d[i+36|0])<<8|d[i+37|0])>>>0>513))if(s=h[i+32>>2],c>>>0<=511){if(c=h[s+20>>2],c=(n=(l=h[s+16>>2])+4|0)>>>0<4?c+1|0:c,(0|(r=h[s+12>>2]))<=(0|c)&n>>>0>p[s+8>>2]|(0|r)<(0|c))break t;l=l+h[s>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[s+16>>2]=n,h[s+20>>2]=c,h[e+132>>2]=l}else{if(!Si(1,t,s))break t;i=h[e+4>>2],P=d[i+36|0],h[e+132>>2]=h[t>>2]}c=h[i+32>>2];i:{r:{if((255&P)>>>0<=1){if(P=0,s=h[c+20>>2],s=(n=(l=h[c+16>>2])+4|0)>>>0<4?s+1|0:s,(0|(r=h[c+12>>2]))<=(0|s)&n>>>0>p[c+8>>2]|(0|r)<(0|s))break e;l=l+h[c>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+60>>2]=l,h[c+16>>2]=n,h[c+20>>2]=s,h[e+156>>2]=l,n=e+156|0}else{if(P=0,!Si(1,t+60|0,c))break e;if(i=h[e+4>>2],s=d[i+36|0],h[e+156>>2]=h[t+60>>2],n=e+156|0,s>>>0>1)break r}if(s=h[i+32>>2],i=h[s+8>>2],c=h[s+12>>2],m=i,i=h[s+20>>2],m>>>0<(r=(l=h[s+16>>2])+4|0)>>>0&(0|(i=r>>>0<4?i+1|0:i))>=(0|c)|(0|i)>(0|c))break e;c=l+h[s>>2]|0,c=d[0|c]|d[c+1|0]<<8|d[c+2|0]<<16|d[c+3|0]<<24,h[t+56>>2]=c,h[s+16>>2]=r,h[s+20>>2]=i;break i}if(!Si(1,t+56|0,h[i+32>>2]))break e;c=h[t+56>>2]}if(c>>>0>1431655765|p[n>>2]>b(c,3)>>>0)break e;if(o=h[e+4>>2],l=h[o+32>>2],g=h[(i=l)+8>>2],(0|(n=h[i+12>>2]))<=(0|(s=h[i+20>>2]))&g>>>0<=(r=h[i+16>>2])>>>0|(0|s)>(0|n))break e;if(_=h[l>>2],m=d[_+r|0],i=s,i=(O=r+1|0)?i:i+1|0,h[l+16>>2]=O,h[l+20>>2]=i,d[o+36|0]<=1){if((0|(i=n))<=(0|(s=(n=r+5|0)>>>0<5?s+1|0:s))&(r=n)>>>0>g>>>0|(0|i)<(0|s))break e;n=d[0|(i=_+O|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+52>>2]=n,h[l+16>>2]=r,h[l+20>>2]=s}else{if(!Si(1,t+52|0,l))break e;n=h[t+52>>2]}if(((n>>>0)/3|0)+n>>>0<c>>>0|n>>>0>c>>>0)break e;if(i=h[e+4>>2],l=h[i+32>>2],d[i+36|0]<=1){if(i=h[l+20>>2],i=(r=(s=h[l+16>>2])+4|0)>>>0<4?i+1|0:i,(0|(o=h[l+12>>2]))<=(0|i)&r>>>0>p[l+8>>2]|(0|i)>(0|o))break e;s=s+h[l>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+48>>2]=s,h[l+16>>2]=r,h[l+20>>2]=i}else{if(!Si(1,t+48|0,l))break e;s=h[t+48>>2]}if(s>>>0>n>>>0)break e;if(h[e+28>>2]=h[e+24>>2],bi(l=mr(88)),i=h[e+8>>2],h[e+8>>2]=l,i&&(Ni(i),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],Di(e+160|0,c),h[e+176>>2]=h[e+172>>2],Di(e+172|0,c),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(B=e+216|0),pe(B,m),!jt(h[e+8>>2],c,h[e+156>>2]+s|0))break e;if(i=h[e+156>>2],a[0|t]=1,Pt(e+120|0,i+s|0,t),i=h[e+4>>2],(c=65535&((c=f[i+36>>1])<<8|c>>>8))>>>0<=513){if(l=h[i+32>>2],c>>>0<=511){if(c=h[l+20>>2],o=i=(r=h[l+16>>2])+4|0,i=c=i>>>0<4?c+1|0:c,g=h[l+12>>2],o>>>0>p[l+8>>2]&(0|i)>=(0|g)|(0|i)>(0|g))break e;c=r+h[l>>2]|0,c=d[0|c]|d[c+1|0]<<8|d[c+2|0]<<16|d[c+3|0]<<24,h[l+16>>2]=o,h[l+20>>2]=i}else{if(!Si(1,t+44|0,l))break e;c=h[t+44>>2]}if(!c)break e;if(i=h[h[e+4>>2]+32>>2],(o=(l=h[i+8>>2])-(r=h[i+16>>2])|0)>>>0<c>>>0&(0|(i=h[i+12>>2]-(h[i+20>>2]+(r>>>0>l>>>0)|0)|0))<=0|(0|i)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,l=h[h[e+4>>2]+32>>2],r=((i=h[l+16>>2])+h[l>>2]|0)+c|0,i=((o=h[l+8>>2])-i|0)-c|0,u[t+38>>1]=f[l+38>>1],h[t>>2]=r,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=i,h[t+12>>2]=0,-1==(0|(O=ee(e,t))))break e;j=O>>31}else if(O=-1,j=-1,-1==(0|ee(e,h[i+32>>2])))break e;di(o=e+232|0,e),h[e+372>>2]=m,h[e+384>>2]=h[e+156>>2]+s,u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,c=0,I=m=I-16|0;i:{r:{if(i=h[o+144>>2],(65535&((i=f[36+(0|Rn[h[h[i>>2]+32>>2]](i))>>1])<<8|i>>>8))>>>0<=513){if(i=h[o+4>>2],h[o+40>>2]=h[o>>2],h[o+44>>2]=i,i=h[o+36>>2],h[o+72>>2]=h[o+32>>2],h[o+76>>2]=i,s=h[o+28>>2],h[(i=o- -64|0)>>2]=h[o+24>>2],h[i+4>>2]=s,i=h[o+20>>2],h[o+56>>2]=h[o+16>>2],h[o+60>>2]=i,i=h[o+12>>2],h[o+48>>2]=h[o+8>>2],h[o+52>>2]=i,!Ut(o+40|0,1,m+8|0))break r;if(i=h[o+44>>2],h[o>>2]=h[o+40>>2],h[o+4>>2]=i,i=h[o+76>>2],h[o+32>>2]=h[o+72>>2],h[o+36>>2]=i,i=h[o+68>>2],h[o+24>>2]=h[o+64>>2],h[o+28>>2]=i,l=s=h[o+60>>2],i=h[o+56>>2],h[o+16>>2]=i,h[o+20>>2]=s,r=h[o+52>>2],s=h[o+48>>2],h[o+8>>2]=s,h[o+12>>2]=r,g=s-i|0,(0|(_=h[m+12>>2]))==(0|(s=r-((i>>>0>s>>>0)+l|0)|0))&g>>>0<(r=h[m+8>>2])>>>0|s>>>0<_>>>0)break r;s=i,r=i+r|0,i=l+_|0,h[o+16>>2]=r,h[o+20>>2]=r>>>0<s>>>0?i+1|0:i}if(f[o+38>>1]<=513){if(i=h[o+4>>2],h[o+96>>2]=h[o>>2],h[o+100>>2]=i,i=h[o+36>>2],h[o+128>>2]=h[o+32>>2],h[o+132>>2]=i,i=h[o+28>>2],h[o+120>>2]=h[o+24>>2],h[o+124>>2]=i,i=h[o+20>>2],h[o+112>>2]=h[o+16>>2],h[o+116>>2]=i,i=h[o+12>>2],h[o+104>>2]=h[o+8>>2],h[o+108>>2]=i,!Ut(o+96|0,1,m+8|0))break r;if(i=h[o+100>>2],h[o>>2]=h[o+96>>2],h[o+4>>2]=i,i=h[o+132>>2],h[o+32>>2]=h[o+128>>2],h[o+36>>2]=i,i=h[o+124>>2],h[o+24>>2]=h[o+120>>2],h[o+28>>2]=i,l=s=h[o+116>>2],i=h[o+112>>2],h[o+16>>2]=i,h[o+20>>2]=s,r=h[o+108>>2],s=h[o+104>>2],h[o+8>>2]=s,h[o+12>>2]=r,g=s-i|0,(0|(_=h[m+12>>2]))==(0|(s=r-((i>>>0>s>>>0)+l|0)|0))&g>>>0<(r=h[m+8>>2])>>>0|s>>>0<_>>>0)break r;s=l+_|0,s=(r=i+r|0)>>>0<i>>>0?s+1|0:s,h[o+16>>2]=r,h[o+20>>2]=s}else if(!ze(o+80|0,o))break i;if(!Ot(o))break i;if(i=h[o+4>>2],h[t>>2]=h[o>>2],h[t+4>>2]=i,i=h[o+36>>2],h[t+32>>2]=h[o+32>>2],h[t+36>>2]=i,i=h[o+28>>2],h[t+24>>2]=h[o+24>>2],h[t+28>>2]=i,i=h[o+20>>2],h[t+16>>2]=h[o+16>>2],h[t+20>>2]=i,i=h[o+12>>2],h[t+8>>2]=h[o+8>>2],h[t+12>>2]=i,i=h[o+144>>2],(65535&((i=f[36+(0|Rn[h[h[i>>2]+32>>2]](i))>>1])<<8|i>>>8))>>>0<=513){if(i=h[o+144>>2],d[36+(0|Rn[h[h[i>>2]+32>>2]](i))|0]<=1){if(i=h[t+20>>2],i=(l=(s=h[t+16>>2])+4|0)>>>0<4?i+1|0:i,(0|(r=h[t+12>>2]))<=(0|i)&l>>>0>p[t+8>>2]|(0|i)>(0|r))break i;s=s+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=i}else{if(!Si(1,m+8|0,t))break i;s=h[m+8>>2]}if(s>>>0>=(i=h[o+152>>2])>>>0)break i;if((0|(s=h[t+20>>2]))>=(0|(r=h[t+12>>2]))&(l=h[t+16>>2])>>>0>=p[t+8>>2]|(0|r)<(0|s))break i;if(r=d[l+h[t>>2]|0],s=(l=l+1|0)?s:s+1|0,h[t+16>>2]=l,h[t+20>>2]=s,r)break i;h[o+176>>2]=2,h[o+180>>2]=7}else h[o+176>>2]=2,h[o+180>>2]=7,i=h[o+152>>2];if((0|i)<0)break i;if(h[m+8>>2]=0,c=2,r=h[o+156>>2],(l=h[o+160>>2]-r>>2)>>>0<i>>>0?($e(o+156|0,i-l|0,m+8|0),c=h[o+176>>2],s=h[o+180>>2]):(s=7,i>>>0>=l>>>0||(h[o+160>>2]=r+(i<<2))),l=o+184|0,(s=1+(s-c|0)|0)>>>0>(c=((i=h[o+188>>2])-(r=h[o+184>>2])|0)/12|0)>>>0){if((s=s-c|0)>>>0<=((g=h[l+8>>2])-(i=h[l+4>>2])|0)/12>>>0)s&&(i=xt(c=i,0,i=b((b(s,12)-12>>>0)/12|0,12)+12|0)+i|0),h[l+4>>2]=i;else{n:{a:{s:{if((r=(_=(i-(c=h[l>>2])|0)/12|0)+s|0)>>>0<357913942){if(v=(g=(g-c|0)/12|0)<<1,g=g>>>0<178956970?r>>>0>v>>>0?r:v:357913941){if(g>>>0>=357913942)break s;T=mr(b(g,12))}if(_=(s=xt(r=b(_,12)+T|0,0,_=b((b(s,12)-12>>>0)/12|0,12)+12|0))+_|0,g=b(g,12)+T|0,(0|i)==(0|c))break a;for(;i=i-12|0,h[(r=r-12|0)>>2]=h[i>>2],h[r+4>>2]=h[i+4>>2],h[r+8>>2]=h[i+8>>2],h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,(0|i)!=(0|c););if(h[l+8>>2]=g,s=h[l+4>>2],h[l+4>>2]=_,i=h[l>>2],h[l>>2]=r,(0|i)==(0|s))break n;for(;(r=h[(c=s-12|0)>>2])&&(h[s-8>>2]=r,be(r)),(0|(s=c))!=(0|i););break n}bn(),x()}Zi(1336),x()}h[l+8>>2]=g,h[l+4>>2]=_,h[l>>2]=s}i&&be(i)}s=h[o+188>>2]}else if(s>>>0>=c>>>0)s=i;else{if((0|(s=r+b(s,12)|0))!=(0|i))for(;(r=h[(c=i-12|0)>>2])&&(h[i-8>>2]=r,be(r)),(0|s)!=(0|(i=c)););h[o+188>>2]=s}if(g=o+196|0,i=(s-(c=h[o+184>>2])|0)/12|0,T=h[o+196>>2],i>>>0>(r=h[o+200>>2]-T>>2)>>>0?(ei(g,i-r|0),c=h[o+184>>2],s=h[o+188>>2]):i>>>0>=r>>>0||(h[o+200>>2]=T+(i<<2)),(0|s)==(0|c)){c=1;break i}for(i=0;;){if(!Si(1,m+8|0,t))break r;if(c=h[m+8>>2],s=h[o+148>>2],c>>>0>(h[s+4>>2]-h[s>>2]>>2>>>0)/3>>>0)break r;if(c&&(s=h[l>>2],v=b(i,12),T=h[(r=s+v|0)>>2],(_=h[r+4>>2]-T>>2)>>>0<c>>>0?(ei(r,c-_|0),s=h[l>>2]):c>>>0>=_>>>0||(h[r+4>>2]=T+(c<<2)),V(c,1,t,h[s+v>>2]),h[h[g>>2]+(i<<2)>>2]=c),c=1,!((i=i+1|0)>>>0<(h[o+188>>2]-h[o+184>>2]|0)/12>>>0))break}break i}c=0}I=m+16|0;i:if(c){i=0,m=0,s=0,l=0,T=0,c=0,I=A=I-96|0,h[A+72>>2]=0,h[A+64>>2]=0,h[A+68>>2]=0,h[A+48>>2]=0,h[A+52>>2]=0,h[A+40>>2]=0,h[A+44>>2]=0,h[A+56>>2]=1065353216,h[A+32>>2]=0,h[A+24>>2]=0,h[A+28>>2]=0,M=1,v=e,L=h[e+124>>2];r:{n:{a:{s:{_=n;o:{l:if(!((0|n)<=0)){for(S=v+232|0,z=h[v+216>>2]!=h[v+220>>2];;){T=(e=T)+1|0;c:if(-1==(0|(n=h[S+172>>2]))){if(r=7,n=h[S+144>>2],!((65535&((n=f[36+(0|Rn[h[h[n>>2]+32>>2]](n))>>1])<<8|n>>>8))>>>0>513)){if(!d[S+76|0]){h[S+168>>2]=1,r=1;break c}r=0,(n=(y=h[S- -64>>2])+((g=h[S+72>>2])>>>3|0)|0)>>>0>=(w=h[S+68>>2])>>>0||(E=d[0|n],n=g+1|0,h[S+72>>2]=n,E>>>(7&g)&1&&((r=y+(E=n>>>3|0)|0)>>>0>=w>>>0?(r=n,n=0):(C=d[0|r],r=g+2|0,h[S+72>>2]=r,E=r>>>3|0,n=C>>>(7&n)&1),(g=y+E|0)>>>0<w>>>0?(g=d[0|g],h[S+72>>2]=r+1,r=g>>>(7&r)<<1&2):r=0,r=(n|r)<<1|1))}h[S+168>>2]=r}else{if(r=h[S+196>>2]+(n<<2)|0,n=(g=h[r>>2])-1|0,h[r>>2]=n,r=9,(0|g)<=0)break c;r=h[12176+(h[h[h[S+184>>2]+b(h[S+172>>2],12)>>2]+(n<<2)>>2]<<2)>>2],h[S+168>>2]=r}c:{if(r){g=-1;u:{h:{d:{f:{p:{m:{g:{b:{v:{_:switch(r-1|0){case 2:case 4:if((0|i)==(0|l))break o;if(n=h[v+8>>2],m=h[n+12>>2],k=(E=(y=b(e,3))+((C=5==(0|r))?2:1)|0)<<2,r=h[(F=i-4|0)>>2],h[m+k>>2]=r,h[m+(r<<2)>>2]=E,si(n+24|0),m=h[v+8>>2],w=h[m+24>>2],h[m+28>>2]-w>>2>(0|L))break o;if(G=(m=h[m>>2])+k|0,k=((n=h[n+28>>2]-h[n+24>>2]|0)>>2)-1|0,h[G>>2]=k,n&&(h[w+(k<<2)>>2]=E),E=C?y:y+2|0,G=m+(y+C<<2)|0,-1!=(0|r)){y:{A:{if((r>>>0)%3|0)n=r-1|0;else if(-1==(0|(n=r+2|0)))break A;if(n=h[m+(n<<2)>>2],h[m+(E<<2)>>2]=n,-1==(0|n))break y;h[w+(n<<2)>>2]=E;break y}h[m+(E<<2)>>2]=-1}n=-1,-1!=(0|(r=((E=r+1|0)>>>0)%3|0?E:r-2|0))&&(n=h[m+(r<<2)>>2])}else h[m+(E<<2)>>2]=-1,n=-1;h[G>>2]=n,h[F>>2]=y;break v;case 0:if((0|i)==(0|m))break o;E=h[(s=i-4|0)>>2],h[A+68>>2]=s;y:if((w=h[A+44>>2])&&(r=h[A+40>>2],n=e&w+2147483647,(C=Cr(w)>>>0>1)&&(n=e,e>>>0<w>>>0||(n=(e>>>0)%(w>>>0)|0)),(n=h[r+((y=n)<<2)>>2])&&(n=h[n>>2]))){A:{if(!C){for(r=w-1|0;;){E:{if((0|(w=h[n+4>>2]))!=(0|e)){if((0|y)==(r&w))break E;break y}if((0|e)==h[n+8>>2])break A}if(!(n=h[n>>2]))break}break y}for(;;){E:{if((0|(r=h[n+4>>2]))!=(0|e)){if(r>>>0>=w>>>0&&(r=(r>>>0)%(w>>>0)|0),(0|r)==(0|y))break E;break y}if((0|e)==h[n+8>>2])break A}if(!(n=h[n>>2]))break}break y}if((0|s)==(0|N)){if((s=1+(r=(i=N-m|0)>>2)|0)>>>0>=1073741824)break m;if(l=i>>1,s=i>>>0<2147483644?s>>>0>l>>>0?s:l:1073741823){if(s>>>0>=1073741824)break n;l=mr(s<<2)}else l=0;h[(r=l+(r<<2)|0)>>2]=h[n+12>>2],N=(s<<2)+l|0,s=r+4|0,(0|i)>0&&We(l,m,i),h[A+72>>2]=N,h[A+68>>2]=s,h[A+64>>2]=l,m&&be(m)}else h[s>>2]=h[n+12>>2],h[A+68>>2]=i,s=i}if((0|s)==(0|l))break g;if(n=-1==(0|(r=h[(C=s-4|0)>>2])),y=h[v+8>>2],!n&-1!=h[h[y+12>>2]+(r<<2)>>2])break g;if(w=h[y+12>>2],-1!=(0|E)&-1!=h[w+(E<<2)>>2])break g;if(M=(i=b(e,3))+2|0,h[w+(r<<2)>>2]=M,h[(e=M<<2)+w>>2]=r,m=i+1|0,h[w+(E<<2)>>2]=m,h[(k=m<<2)+w>>2]=E,n)break p;if((r>>>0)%3|0){g=r-1|0;break d}if(-1!=(0|(g=r+2|0)))break d;m=h[y>>2],n=-1;break h;case 6:break _;default:break o}if(si((r=h[v+8>>2])+24|0),n=h[v+8>>2],s=b(e,3),C=(y=(E=h[r+28>>2]-h[r+24>>2]|0)>>2)-1|0,h[h[n>>2]+(s<<2)>>2]=C,si(n+24|0),w=s+1|0,h[h[n>>2]+(w<<2)>>2]=(h[n+28>>2]-h[n+24>>2]>>2)-1,si((n=h[v+8>>2])+24|0),k=s+2|0,h[h[n>>2]+(k<<2)>>2]=(h[n+28>>2]-h[n+24>>2]>>2)-1,n=h[v+8>>2],r=h[n+24>>2],h[n+28>>2]-r>>2>(0|L))break o;_:{if(E){if(h[r+(C<<2)>>2]=s,n=0,-4!=(0|E)&&(h[r+(y<<2)>>2]=w,-1==(0|(n=y+1|0))))break _}else h[r+(y<<2)>>2]=w,n=1;h[r+(n<<2)>>2]=k}if((0|i)!=(0|N)){h[i>>2]=s,s=i+4|0,h[A+68>>2]=s,i=s;break b}if((l=1+(r=(i=i-m|0)>>2)|0)>>>0>=1073741824)break f;if(n=i>>1,n=i>>>0<2147483644?n>>>0<l>>>0?l:n:1073741823){if(n>>>0>=1073741824)break n;l=mr(n<<2)}else l=0;h[(r=l+(r<<2)|0)>>2]=s,N=(n<<2)+l|0,s=r+4|0,(0|i)>0&&We(l,m,i),h[A+72>>2]=N,h[A+68>>2]=s,h[A+64>>2]=l,m&&be(m),i=s}m=l}if(Be(S,h[i-4>>2]),(0|(n=h[v+40>>2]))==h[v+36>>2])break c;for(r=_+(-1^e)|0,y=s-4|0;;){if((e=h[n-8>>2])>>>0>r>>>0)break g;if((0|e)!=(0|r))break c;if(E=d[n-4|0],i=h[(e=n-12|0)>>2],h[v+40>>2]=e,(0|i)<0)break g;e=h[y>>2],h[A+20>>2]=_+(-1^i),i=A+20|0,h[A+88>>2]=i,ve(A,A+40|0,i,A+88|0),n=h[A>>2];b:if(1&E){if(i=-1,-1==(0|e))break b;i=((i=e+1|0)>>>0)%3|0?i:e-2|0}else i=-1,-1!=(0|e)&&(i=e-1|0,(e>>>0)%3|0||(i=e+2|0));if(h[n+12>>2]=i,i=s,(0|(n=h[v+40>>2]))==h[v+36>>2])break}break c}if(1&M)break o;break l}bn(),x()}n=-1,m=h[y>>2],h[m+(i<<2)>>2]=-1,g=-1;break u}bn(),x()}m=h[y>>2],n=h[m+(g<<2)>>2]}h[(i<<2)+m>>2]=n,g=-1,-1!=(0|(r=((F=r+1|0)>>>0)%3|0?F:r-2|0))&&(g=h[(r<<2)+m>>2])}if(h[m+k>>2]=g,-1!=(0|E)){u:{h:{if((E>>>0)%3|0)g=E-1|0;else if(-1==(0|(g=E+2|0)))break h;if(r=e+m|0,e=h[(g<<2)+m>>2],h[r>>2]=e,-1==(0|e))break u;h[h[y+24>>2]+(e<<2)>>2]=M;break u}h[e+m>>2]=-1}M=-1,g=-1,-1!=(0|(e=((e=E+1|0)>>>0)%3|0?e:E-2|0))&&(M=h[(e<<2)+m>>2],g=e)}else h[e+m>>2]=-1,M=-1,g=-1;E=(e=h[v+388>>2])+(r=n<<2)|0,G=e,e=M<<2,h[E>>2]=h[E>>2]+h[G+e>>2],e=(y=h[y+24>>2])+e|0,-1!=(0|n)&&(h[r+y>>2]=h[e>>2]);u:if(-1!=(0|g))for(;;){if(h[(g<<2)+m>>2]=n,-1==(0|(r=((r=g+1|0)>>>0)%3|0?r:g-2|0)))break u;if(-1==(0|(r=h[w+(r<<2)>>2])))break u;if(-1==(0|(g=((g=r+1|0)>>>0)%3|0?g:r-2|0)))break}h[e>>2]=-1;u:if(!z){if((0|D)==(0|U)){h:{if((c=1+(r=(e=U-R|0)>>2)|0)>>>0<1073741824){if(n=e>>1,n=e>>>0<2147483644?n>>>0<c>>>0?c:n:1073741823){if(n>>>0>=1073741824)break h;c=mr(n<<2)}else c=0;h[(r=c+(r<<2)|0)>>2]=M,U=(n<<2)+c|0,D=r+4|0,(0|e)>0&&We(c,R,e),h[A+32>>2]=U,h[A+28>>2]=D,h[A+24>>2]=c,R&&be(R),R=c;break u}bn(),x()}break n}h[D>>2]=M,D=D+4|0,h[A+28>>2]=D}h[C>>2]=i}else{if((0|s)==(0|l)){g=-1;break o}r=-1,y=h[v+8>>2],i=E=h[y+24>>2],n=-1,-1!=(0|(g=h[(w=s-4|0)>>2]))&&(n=-1,-1!=(0|(m=((m=g+1|0)>>>0)%3|0?m:g-2|0))&&(n=h[h[y>>2]+(m<<2)>>2])),-1!=(0|(i=h[i+(n<<2)>>2]))&&(r=((r=i+1|0)>>>0)%3|0?r:i-2|0),m=h[y+12>>2],e=(i=b(e,3))+1|0,h[m+(g<<2)>>2]=e,h[(C=e<<2)+m>>2]=g,M=i+2|0,h[m+(r<<2)>>2]=M,h[(k=M<<2)+m>>2]=r,m=-1,e=-1;u:if(-1!=(0|g)){if((g>>>0)%3|0)g=g-1|0;else if(e=-1,-1==(0|(g=g+2|0)))break u;e=h[h[y>>2]+(g<<2)>>2]}if(-1!=(0|r)&&-1!=(0|(r=((g=r+1|0)>>>0)%3|0?g:r-2|0))&&(m=h[h[y>>2]+(r<<2)>>2]),g=-1,(0|e)==(0|n)|(0|n)==(0|m))break o;r=h[y>>2],h[r+(i<<2)>>2]=n,h[r+C>>2]=m,h[r+k>>2]=e,-1!=(0|e)&&(h[E+(e<<2)>>2]=M),e=h[v+120>>2]+(n>>>3&536870908)|0,r=h[e>>2],H=e,W=Dr(n)&r,h[H>>2]=W,h[w>>2]=i}Be(S,i),i=s,m=l}if(M=(0|_)>(0|T),(0|_)==(0|T))break}T=_}if(g=-1,i=h[v+8>>2],!(h[i+28>>2]-h[i+24>>2]>>2>(0|L))){if((0|s)!=(0|l)){for(e=v+60|0,N=v+312|0;;){R=h[(s=s-4|0)>>2],h[A+68>>2]=s;l:{c:{u:{if(f[v+270>>1]<=513){if(!d[v+364|0])break u;if(i=h[v+360>>2],(n=h[v+352>>2]+(i>>>3|0)|0)>>>0>=p[v+356>>2])break c;n=d[0|n],h[v+360>>2]=i+1,i=n>>>(7&i)&1}else i=Gi(N);if(!i)break c}if(S=h[v+8>>2],y=h[S>>2],((h[S+4>>2]-y>>2>>>0)/3|0)<=(0|T))break o;if(n=-1,r=-1,m=h[S+24>>2],i=-1,-1!=(0|R)&&(i=-1,-1!=(0|(_=((_=R+1|0)>>>0)%3|0?_:R-2|0))&&(i=h[y+(_<<2)>>2])),-1!=(0|(i=h[m+((_=i)<<2)>>2]))&&-1!=(0|(i=((M=i+1|0)>>>0)%3|0?M:i-2|0))&&(-1!=(0|(n=((n=i+1|0)>>>0)%3|0?n:i-2|0))&&(r=h[y+(n<<2)>>2]),n=i),M=-1,E=-1,i=-1,-1!=(0|(m=h[m+(r<<2)>>2]))&&(i=-1,-1!=(0|(m=((w=m+1|0)>>>0)%3|0?w:m-2|0))&&(-1!=(0|(i=((i=m+1|0)>>>0)%3|0?i:m-2|0))&&(E=h[y+(i<<2)>>2]),i=m)),S=h[S+12>>2],m=b(T,3),h[S+(L=m<<2)>>2]=R,h[S+(R<<2)>>2]=m,h[(U=(R=m+1|0)<<2)+S>>2]=n,h[S+(n<<2)>>2]=R,h[(n=(w=m+2|0)<<2)+S>>2]=i,h[S+(i<<2)>>2]=w,h[y+L>>2]=r,h[(S=y+U|0)>>2]=E,h[(y=n+y|0)>>2]=_,i=h[v+120>>2],_=h[(r=i+((n=m>>>0>R>>>0?-1:r)>>>3&536870908)|0)>>2],H=r,W=Dr(n)&_,h[H>>2]=W,M=-1!=(0|R)?h[S>>2]:M,r=h[(n=i+(M>>>3&536870908)|0)>>2],H=n,W=Dr(M)&r,h[H>>2]=W,n=-1,n=-1!=(0|w)?h[y>>2]:n,r=h[(i=i+(n>>>3&536870908)|0)>>2],H=i,W=Dr(n)&r,h[H>>2]=W,(0|(n=h[v+64>>2]))==(i=h[v+68>>2])<<5){if((n+1|0)<0)break s;xe(e,i=n>>>0<=1073741822?(i<<=6)>>>0<(n=n+32&-32)>>>0?n:i:2147483647),n=h[v+64>>2]}if(T=T+1|0,h[v+64>>2]=n+1,i=h[v+60>>2]+(n>>>3&536870908)|0,h[i>>2]=h[i>>2]|1<<n,(0|(i=h[v+76>>2]))!=h[v+80>>2]){h[i>>2]=m,h[v+76>>2]=i+4;break l}if((i=1+(R=(n=i-(r=h[v+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(_=n>>1,_=n>>>0<2147483644?i>>>0>_>>>0?i:_:1073741823){if(_>>>0>=1073741824)break n;i=mr(_<<2)}else i=0;if(h[(R=i+(R<<2)|0)>>2]=m,(0|n)>0&&We(i,r,n),h[v+80>>2]=i+(_<<2),h[v+76>>2]=R+4,h[v+72>>2]=i,!r)break l;be(r);break l}if((0|(i=h[v+64>>2]))==(n=h[v+68>>2])<<5){if((i+1|0)<0)break s;xe(e,i=i>>>0<=1073741822?(i=i+32&-32)>>>0>(n<<=6)>>>0?i:n:2147483647),i=h[v+64>>2]}if(h[v+64>>2]=i+1,n=h[v+60>>2]+(i>>>3&536870908)|0,r=h[n>>2],H=n,W=Dr(i)&r,h[H>>2]=W,(0|(i=h[v+76>>2]))==h[v+80>>2]){if((i=1+(_=(n=i-(r=h[v+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(m=n>>1,m=n>>>0<2147483644?i>>>0>m>>>0?i:m:1073741823){if(m>>>0>=1073741824)break n;i=mr(m<<2)}else i=0;h[(_=i+(_<<2)|0)>>2]=R,(0|n)>0&&We(i,r,n),h[v+80>>2]=i+(m<<2),h[v+76>>2]=_+4,h[v+72>>2]=i,r&&be(r)}else h[i>>2]=R,h[v+76>>2]=i+4}if((0|s)==(0|l))break}i=h[v+8>>2]}if(((h[i+4>>2]-h[i>>2]>>2>>>0)/3|0)==(0|T))if(n=h[i+24>>2],g=h[i+28>>2]-n>>2,(0|c)!=(0|D))for(r=c;;){if(e=h[r>>2],-1==h[(m=((s=g-1|0)<<2)+n|0)>>2])for(;s=g-2|0,g=g-1|0,-1==h[(m=(s<<2)+n|0)>>2];);if(e>>>0<=s>>>0){if(h[A>>2]=i,n=h[m>>2],a[A+12|0]=1,h[A+8>>2]=n,h[A+4>>2]=n,-1!=(0|n))for(;h[h[i>>2]+(n<<2)>>2]=e,_t(A),i=h[v+8>>2],-1!=(0|(n=h[A+8>>2])););m=(n=h[i+24>>2])+(s<<2)|0,-1!=(0|e)&&(h[(e<<2)+n>>2]=h[m>>2]),h[m>>2]=-1,m=1<<e,e=(T=h[v+120>>2])+(e>>>3&536870908)|0,T=T+(s>>>3&536870908)|0,s=1<<s,h[T>>2]&s?m|=h[e>>2]:m=h[e>>2]&(-1^m),h[e>>2]=m,h[T>>2]=h[T>>2]&(-1^s),g=g-1|0}if((0|D)==(0|(r=r+4|0)))break}else c=D}}if(c&&be(c),e=h[A+48>>2])for(;i=h[e>>2],be(e),e=i,i;);e=h[A+40>>2],h[A+40>>2]=0,e&&be(e),l&&(h[A+68>>2]=l,be(l)),I=A+96|0;break r}pn(),x()}bn(),x()}Zi(1336),x()}if(-1!=(0|g)){i=(e=h[t+16>>2])+h[t>>2]|0,s=(s=h[t+8>>2])-e|0,e=h[h[v+4>>2]+32>>2],u[e+38>>1]=f[e+38>>1],h[e>>2]=i,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=s,h[e+12>>2]=0,e=h[v+4>>2],(65535&(c=(i=f[e+36>>1])<<8|i>>>8))>>>0<=513&&(e=h[e+32>>2],s=j+h[e+20>>2]|0,s=(i=O+h[e+16>>2]|0)>>>0<O>>>0?s+1|0:s,h[e+16>>2]=i,h[e+20>>2]=s);r:if(h[v+216>>2]!=h[v+220>>2]){if(i=h[v+8>>2],e=h[i>>2],i=h[i+4>>2],!((65535&c)>>>0>=513)){if((0|e)==(0|i))break r;for(i=0;;){if(Oe(v,i)){if(i=i+3|0,e=h[v+8>>2],i>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}if((0|e)!=(0|i)){for(i=0;;){if(ke(v,i)){if(i=i+3|0,e=h[v+8>>2],i>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break r}break}break i}}if(ci(o),(0|(i=h[v+216>>2]))!=h[v+220>>2])for(c=0;;){if(lt(4+((e=b(c,144))+i|0)|0,h[v+8>>2]),P=h[B>>2],(0|(i=h[132+(s=e+P|0)>>2]))!=(0|(s=h[s+136>>2])))for(;dt(4+(e+P|0)|0,h[i>>2]),P=h[B>>2],(0|s)!=(0|(i=i+4|0)););if(_e(4+(e+P|0)|0),c=c+1|0,i=h[v+216>>2],!(c>>>0<(h[v+220>>2]-i|0)/144>>>0))break}if(e=h[v+8>>2],oi(v+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(P=h[v+216>>2]))!=h[v+220>>2])for(i=0;e=b(i,144)+P|0,s=h[e+60>>2]-h[e+56>>2]>>2,c=e+104|0,e=h[v+8>>2],oi(c,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|s)?e:s),i=i+1|0,P=h[v+216>>2],i>>>0<(h[v+220>>2]-P|0)/144>>>0;);P=ne(v,g)}}break e}P=0}return I=t- -64|0,0|P},hn,Zr,Jr,cr,function(e){var t=0;h[(e|=0)>>2]=11900,(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12152,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),be(e)},pi,function(e){var t=0;return h[(e|=0)>>2]=12152,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12152,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),be(e)},function(e){var t=0;return h[8+(e|=0)>>2]=12416,h[e>>2]=12204,(t=h[e+96>>2])&&(h[e+100>>2]=t,be(t)),(t=h[e+80>>2])&&(h[e+84>>2]=t,be(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,be(t)),(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=12416,h[e>>2]=12204,(t=h[e+96>>2])&&(h[e+100>>2]=t,be(t)),(t=h[e+80>>2])&&(h[e+84>>2]=t,be(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,be(t)),(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),be(e)},function(e,t){t|=0;var i,r,n,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(r=h[12+(e|=0)>>2],s=h[e+108>>2],l=h[s+80>>2],a[t+84|0]=0,c=h[t+68>>2],(o=h[t+72>>2]-c>>2)>>>0<l>>>0?($e(t+68|0,l-o|0,12404),s=h[e+108>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=c+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;n=(s=(0|s)/12|0)>>>0>1?s:1,s=0;e:{for(;;){if(1431655765==(0|s))break e;if(o=h[r>>2]+(b(s,3)<<2)|0,-1==(0|(d=h[o>>2])))break e;if(c=b(s,12)+i|0,(u=h[c>>2])>>>0>=l>>>0)break e;if(p=h[h[e+112>>2]+12>>2],(f=h[p+(d<<2)>>2])>>>0>=l>>>0)break e;if(d=h[t+68>>2],h[d+(u<<2)>>2]=f,-1==(0|(u=h[o+4>>2])))break e;if((f=h[c+4>>2])>>>0>=l>>>0)break e;if((u=h[(u<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(f<<2)>>2]=u,-1==(0|(o=h[o+8>>2])))break e;if((c=h[c+8>>2])>>>0>=l>>>0)break e;if((o=h[(o<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(c<<2)>>2]=o,(0|n)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t,i=0,r=0,n=0,a=0,s=0,o=0;I=t=I-16|0,i=h[4+(e|=0)>>2],n=h[i>>2];e:{if(r=h[e+12>>2],!((a=(r=h[r+28>>2]-h[r+24>>2]|0)>>2)>>>0<=h[i+8>>2]-n>>2>>>0)){if((0|r)<0)break e;s=h[i+4>>2],o=(r=mr(r))+(a<<2)|0,s=(a=s-n|0)+r|0,(0|a)>0&&We(r,n,a),h[i+8>>2]=o,h[i+4>>2]=s,h[i>>2]=r,n&&be(n)}i=h[e+12>>2],n=h[i+28>>2],i=h[i+24>>2],h[t+12>>2]=0,i=n-i>>2,a=h[(r=e+96|0)>>2],i>>>0>(n=h[e+100>>2]-a>>2)>>>0?$e(r,i-n|0,t+12|0):i>>>0>=n>>>0||(h[e+100>>2]=a+(i<<2)),a=e+8|0;t:if(i=h[e+116>>2]){if((0|(r=h[i>>2]))==h[i+4>>2]){n=1;break t}for(i=0;;){if(!(n=re(a,h[(i<<2)+r>>2])))break t;if(s=h[e+116>>2],r=h[s>>2],!((i=i+1|0)>>>0<h[s+4>>2]-r>>2>>>0))break}}else if(n=1,e=h[e+12>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,i=0;;){if(!(n=re(a,b(i,3))))break t;if((0|e)==(0|(i=i+1|0)))break}return I=t+16|0,0|n}Zi(1336),x()},function(e){var t=0;return h[(e|=0)>>2]=12416,(t=h[e+88>>2])&&(h[e+92>>2]=t,be(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,be(t)),(t=h[e+60>>2])&&(h[e- -64>>2]=t,be(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12416,(t=h[e+88>>2])&&(h[e+92>>2]=t,be(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,be(t)),(t=h[e+60>>2])&&(h[e- -64>>2]=t,be(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),be(e)},function(e,t,i){t|=0,i|=0;var r,n=0;I=r=I-16|0,h[4+(e|=0)>>2]=t,n=h[t>>2],t=h[t+4>>2],a[r+15|0]=0,Pt(e+24|0,(t-n>>2>>>0)/3|0,r+15|0),t=h[e+4>>2],n=h[t+28>>2],t=h[t+24>>2],a[r+14|0]=0,Pt(e+36|0,n-t>>2,r+14|0),t=h[i+12>>2],h[e+16>>2]=h[i+8>>2],h[e+20>>2]=t,t=h[i+4>>2],h[e+8>>2]=h[i>>2],h[e+12>>2]=t,I=r+16|0},function(e){var t=0;return h[(e|=0)>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),be(e)},function(e){var t=0;return h[8+(e|=0)>>2]=12836,h[e>>2]=12672,(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=12836,h[e>>2]=12672,(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),be(e)},function(e,t){t|=0;var i,r,n,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(r=h[12+(e|=0)>>2],s=h[e+68>>2],l=h[s+80>>2],a[t+84|0]=0,c=h[t+68>>2],(o=h[t+72>>2]-c>>2)>>>0<l>>>0?($e(t+68|0,l-o|0,12404),s=h[e+68>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=c+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;n=(s=(0|s)/12|0)>>>0>1?s:1,s=0;e:{for(;;){if(1431655765==(0|s))break e;if(o=h[r>>2]+(b(s,3)<<2)|0,-1==(0|(d=h[o>>2])))break e;if(c=b(s,12)+i|0,(u=h[c>>2])>>>0>=l>>>0)break e;if(p=h[h[e+72>>2]+12>>2],(f=h[p+(d<<2)>>2])>>>0>=l>>>0)break e;if(d=h[t+68>>2],h[d+(u<<2)>>2]=f,-1==(0|(u=h[o+4>>2])))break e;if((f=h[c+4>>2])>>>0>=l>>>0)break e;if((u=h[(u<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(f<<2)>>2]=u,-1==(0|(o=h[o+8>>2])))break e;if((c=h[c+8>>2])>>>0>=l>>>0)break e;if((o=h[(o<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(c<<2)>>2]=o,(0|n)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t=0,i=0,r=0,n=0,a=0,s=0;t=h[4+(e|=0)>>2],r=h[t>>2];e:{if(i=h[e+12>>2],!((n=(i=h[i+28>>2]-h[i+24>>2]|0)>>2)>>>0<=h[t+8>>2]-r>>2>>>0)){if((0|i)<0)break e;a=h[t+4>>2],s=(i=mr(i))+(n<<2)|0,a=(n=a-r|0)+i|0,(0|n)>0&&We(i,r,n),h[t+8>>2]=s,h[t+4>>2]=a,h[t>>2]=i,r&&be(r)}n=e+8|0;t:if(t=h[e+76>>2]){if((0|(r=h[t>>2]))==h[t+4>>2])return 1;for(t=0;;){if(!(i=we(n,h[(t<<2)+r>>2])))break t;if(a=h[e+76>>2],r=h[a>>2],!((t=t+1|0)>>>0<h[a+4>>2]-r>>2>>>0))break}}else if(i=1,e=h[e+12>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,t=0;;){if(!(i=we(n,b(t,3))))break t;if((0|e)==(0|(t=t+1|0)))break}return 0|i}Zi(1336),x()},function(e){var t=0;return h[(e|=0)>>2]=12836,(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12836,(t=h[e+48>>2])&&(h[e+52>>2]=t,be(t)),h[e>>2]=12652,(t=h[e+36>>2])&&be(t),(t=h[e+24>>2])&&be(t),be(e)},function(e){var t=0;return h[8+(e|=0)>>2]=11900,h[e>>2]=12964,(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12152,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=11900,h[e>>2]=12964,(t=h[e+56>>2])&&(h[e+60>>2]=t,be(t)),h[e+8>>2]=12152,(t=h[e+44>>2])&&be(t),(t=h[e+32>>2])&&be(t),be(e)},function(e,t){t|=0;var i,r,n,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(d=h[12+(e|=0)>>2],s=h[e+68>>2],l=h[s+80>>2],a[t+84|0]=0,u=h[t+68>>2],(o=h[t+72>>2]-u>>2)>>>0<l>>>0?($e(t+68|0,l-o|0,12404),s=h[e+68>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=u+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;r=(s=(0|s)/12|0)>>>0>1?s:1,n=h[d+28>>2],s=0;e:{for(;;){if(o=(b(s,3)<<2)+n|0,-1==(0|(u=h[o>>2])))break e;if(d=b(s,12)+i|0,(f=h[d>>2])>>>0>=l>>>0)break e;if(c=u<<2,u=h[h[e+72>>2]+12>>2],(c=h[c+u>>2])>>>0>=l>>>0)break e;if(p=f<<2,f=h[t+68>>2],h[p+f>>2]=c,-1==(0|(c=h[o+4>>2])))break e;if((p=h[d+4>>2])>>>0>=l>>>0)break e;if((c=h[u+(c<<2)>>2])>>>0>=l>>>0)break e;if(h[f+(p<<2)>>2]=c,-1==(0|(o=h[o+8>>2])))break e;if((d=h[d+8>>2])>>>0>=l>>>0)break e;if((o=h[u+(o<<2)>>2])>>>0>=l>>>0)break e;if(h[f+(d<<2)>>2]=o,(0|r)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t=0,i=0,r=0,n=0,a=0,s=0;t=h[4+(e|=0)>>2],r=h[t>>2];e:{if(i=h[e+12>>2],!((n=(i=h[i+56>>2]-h[i+52>>2]|0)>>2)>>>0<=h[t+8>>2]-r>>2>>>0)){if((0|i)<0)break e;a=h[t+4>>2],s=(i=mr(i))+(n<<2)|0,a=(n=a-r|0)+i|0,(0|n)>0&&We(i,r,n),h[t+8>>2]=s,h[t+4>>2]=a,h[t>>2]=i,r&&be(r)}n=e+8|0;t:if(t=h[e+76>>2]){if((0|(r=h[t>>2]))==h[t+4>>2])return 1;for(t=0;;){if(!(i=ye(n,h[(t<<2)+r>>2])))break t;if(a=h[e+76>>2],r=h[a>>2],!((t=t+1|0)>>>0<h[a+4>>2]-r>>2>>>0))break}}else if(i=1,e=h[h[e+12>>2]+64>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,t=0;;){if(!(i=ye(n,b(t,3))))break t;if((0|e)==(0|(t=t+1|0)))break}return 0|i}Zi(1336),x()},Ci,Ft,function(e){var t,i=0,r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0,m=0,g=0,v=0;I=t=I-32|0,r=h[32+(e|=0)>>2];e:{if((65535&((n=f[e+36>>1])<<8|n>>>8))>>>0<=513){if(i=h[r+12>>2],a=n=h[r+20>>2],n=(s=(l=h[r+16>>2])+4|0)>>>0<4?n+1|0:n,o=s,(c=h[r+8>>2])>>>0<s>>>0&(0|i)<=(0|n)|(0|i)<(0|n))break e;if(g=h[r>>2],p=d[0|(s=g+l|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[r+16>>2]=o,h[r+20>>2]=n,n=i,i=a,(a=l+8|0)>>>0>c>>>0&(0|(i=a>>>0<8?i+1|0:i))>=(0|n)|(0|i)>(0|n))break e;g=d[0|(n=o+g|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+24>>2]=g,h[r+16>>2]=a,h[r+20>>2]=i}else{if(!_i(1,t+28|0,r))break e;if(!_i(1,t+24|0,h[e+32>>2]))break e;p=h[t+28>>2],g=h[t+24>>2]}if(!(p>>>0>1431655765||(a=h[e+32>>2],n=$i(o=(i=l=h[(n=a)+8>>2])-(r=h[n+16>>2])|0,(s=h[n+12>>2])-((v=i>>>0<r>>>0)+(i=h[n+20>>2])|0)|0,3,0),!L&n>>>0<p>>>0||(n=Xi(p,0,3,0),!L&n>>>0<g>>>0|(0|i)>=(0|s)&r>>>0>=l>>>0|(0|i)>(0|s))))){s=d[r+h[a>>2]|0],n=(l=r+1|0)?i:i+1|0,h[a+16>>2]=l,h[a+20>>2]=n;t:{if(s){i:if(g>>>0<=255){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,(0|n)>=(0|(i=r=h[a+12>>2]))&l>>>0>=(o=h[a+8>>2])>>>0|(0|i)<(0|n))break i;for(;;){if(s=h[a>>2],u=d[s+l|0],i=n,i=(c=l+1|0)?i:i+1|0,h[a+16>>2]=c,h[a+20>>2]=i,h[t+8>>2]=u,(0|i)>=(0|r)&c>>>0>=o>>>0|(0|i)>(0|r))break i;if(u=d[s+c|0],i=n,i=(c=l+2|0)>>>0<2?i+1|0:i,h[a+16>>2]=c,h[a+20>>2]=i,h[t+12>>2]=u,(0|i)>=(0|r)&c>>>0>=o>>>0|(0|i)>(0|r))break i;if(i=d[s+c|0],n=(r=l+3|0)>>>0<3?n+1|0:n,h[a+16>>2]=r,h[a+20>>2]=n,h[t+16>>2]=i,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],n=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!(l>>>0<(o=h[i+8>>2])>>>0&(0|n)<=(0|(i=r=h[i+12>>2]))|(0|i)>(0|n)))break}}else if(g>>>0<=65535){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[a+12>>2],o=r=r+3|0,r=i=r>>>0<3?i+1|0:i,(c=h[a+8>>2])>>>0<o>>>0&(0|i)>=(0|s)|(0|i)>(0|s))break i;for(;;){if(u=h[a>>2],i=d[0|(i=u+l|0)]|d[i+1|0]<<8,h[a+16>>2]=o,h[a+20>>2]=r,h[t+8>>2]=i,i=n,(r=l+4|0)>>>0>c>>>0&(0|(i=r>>>0<4?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(o=d[0|(o=o+u|0)]|d[o+1|0]<<8,h[a+16>>2]=r,h[a+20>>2]=i,h[t+12>>2]=o,i=n,(n=l+6|0)>>>0>c>>>0&(0|(i=n>>>0<6?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(r=d[0|(r=r+u|0)]|d[r+1|0]<<8,h[a+16>>2]=n,h[a+20>>2]=i,h[t+16>>2]=r,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],n=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[i+12>>2],c=h[i+8>>2],i=n,o=r=l+2|0,r=i=r>>>0<2?i+1|0:i,!((0|i)<=(0|s)&c>>>0>=o>>>0|(0|i)<(0|s)))break}}else if(g>>>0>2097151||(65535&((s=f[e+36>>1])<<8|s>>>8))>>>0<514){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[a+12>>2],o=r=r+5|0,r=i=r>>>0<5?i+1|0:i,!((c=h[a+8>>2])>>>0<o>>>0&(0|i)>=(0|s)|(0|i)>(0|s)))for(;;){if(u=h[a>>2],i=d[0|(i=u+l|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[a+16>>2]=o,h[a+20>>2]=r,h[t+8>>2]=i,i=n,v=r=l+8|0,r>>>0>c>>>0&(0|(i=r>>>0<8?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(r=d[0|(r=o+u|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[a+16>>2]=v,h[a+20>>2]=i,h[t+12>>2]=r,r=i=l+12|0,i>>>0>c>>>0&(0|(n=i>>>0<12?n+1|0:n))>=(0|s)|(0|n)>(0|s))break i;if(i=d[0|(i=u+v|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[a+16>>2]=r,h[a+20>>2]=n,h[t+16>>2]=i,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],n=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[i+12>>2],c=h[i+8>>2],i=n,o=r=l+4|0,r=i=r>>>0<4?i+1|0:i,!((0|i)<=(0|s)&c>>>0>=o>>>0|(0|i)<(0|s)))break}}else{if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!_i(1,t+4|0,a))break i;for(;;){if(h[t+8>>2]=h[t+4>>2],!_i(1,t+4|0,h[e+32>>2]))break i;if(h[t+12>>2]=h[t+4>>2],!_i(1,t+4|0,h[e+32>>2]))break i;if(h[t+16>>2]=h[t+4>>2],Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(n=h[e+32>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!_i(1,t+4|0,n))break}}m=0;break e}a=0,I=i=I-32|0,h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0;i:{r:{if(n=b(p,3)){if(n>>>0>=1073741824)break r;a=mr(r=b(p,12)),h[i+16>>2]=a,xt(a,0,r)}n:{if(!(n=V(n,1,h[e+32>>2],a))|!p){if(!a)break n}else for(s=0,r=0;c=(o=h[(l=(r<<2)+a|0)>>2])>>>1|0,o=(1&o?0-c|0:c)+u|0,h[i>>2]=o,u=(c=h[l+4>>2])>>>1|0,o=o+(1&c?0-u|0:u)|0,h[i+4>>2]=o,c=(l=h[l+8>>2])>>>1|0,u=o+(1&l?0-c|0:c)|0,h[i+8>>2]=u,Wt(h[e+44>>2]+96|0,i),r=r+3|0,(0|(s=s+1|0))!=(0|p););be(a)}I=i+32|0;break i}bn(),x()}if(!n)break e}h[h[e+4>>2]+80>>2]=g,m=1}}return I=t+32|0,0|m},an,fn,function(e,t){return a[84+(t|=0)|0]=1,h[t+72>>2]=h[t+68>>2],1},function(e){var t=0,i=0,r=0,n=0,a=0;e:{if(!((0|(t=h[8+(e|=0)>>2]))<0||(i=h[e+4>>2],n=h[i>>2],(r=h[i+4>>2]-n>>2)>>>0<t>>>0?(ei(i,t-r|0),a=h[e+8>>2]):(a=t,t>>>0>=r>>>0||(h[i+4>>2]=n+(t<<2),a=t)),(0|(r=a))<=0)))for(e=h[e+4>>2],i=h[e>>2],n=h[e+4>>2]-i>>2,e=0;;){if((0|e)==(0|n))break e;if(h[i+(e<<2)>>2]=e,(0|r)==(0|(e=e+1|0)))break}return(-1^t)>>>31|0}Sn(),x()},gn,dn,hn,Ci,function(e,t){e|=0,t|=0;var i,r=0,n=0,a=0,s=0,o=0;r=mr(72),h[r+4>>2]=0,h[r+8>>2]=0,h[r>>2]=2012,h[r+12>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+40>>2]=0,h[r>>2]=2156,h[r+44>>2]=0,h[r+48>>2]=0,h[r+52>>2]=0,h[r+56>>2]=0,h[r+60>>2]=0,h[r+64>>2]=0,h[r+68>>2]=0,i=r;e:{if((0|t)>=0){if(o=e+8|0,!((0|(s=(r=h[e+12>>2])-(a=h[e+8>>2])>>2))>(0|t)))if(n=t+1|0,t>>>0>=s>>>0)St(o,n-s|0);else if(!(n>>>0>=s>>>0)){if((0|(a=(n<<2)+a|0))!=(0|r))for(;n=h[(r=r-4|0)>>2],h[r>>2]=0,n&&Rn[h[h[n>>2]+4>>2]](n),(0|r)!=(0|a););h[e+12>>2]=a}if(e=h[o>>2]+(t<<2)|0,r=h[e>>2],h[e>>2]=i,!r)break e}Rn[h[h[r>>2]+4>>2]](r)}return(-1^t)>>>31|0},function(e){var t,i,r=0,n=0,a=0,s=0;return t=h[32+(e|=0)>>2],s=h[t+8>>2],a=h[t+12>>2],n=h[t+20>>2],s>>>0<(i=(s=h[t+16>>2])+4|0)>>>0&(0|(n=i>>>0<4?n+1|0:n))>=(0|a)|(0|n)>(0|a)||(r=s+h[t>>2]|0,a=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=i,h[t+20>>2]=n,r=0,(0|a)<0||(h[h[e+4>>2]+80>>2]=a,r=1)),0|r},Ci,Ft,function(e){var t,i,r,n,a,s=0,o=0;return t=h[32+(e|=0)>>2],i=h[t+12>>2],s=n=h[t+8>>2],o=h[t+20>>2],(0|(o=(r=(a=h[t+16>>2])+4|0)>>>0<4?o+1|0:o))<=(0|i)&s>>>0>=r>>>0|(0|o)<(0|i)&&(s=a+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=r,h[t+20>>2]=o,h[h[e+4>>2]+80>>2]=s),(0|o)<=(0|i)&r>>>0<=n>>>0|(0|o)<(0|i)},function(e){var t=0;return h[(e|=0)>>2]=13696,(t=h[e+96>>2])&&(h[e+100>>2]=t,be(t)),(t=h[e+84>>2])&&(h[e+88>>2]=t,be(t)),Qt(e),0|e},function(e){var t=0;h[(e|=0)>>2]=13696,(t=h[e+96>>2])&&(h[e+100>>2]=t,be(t)),(t=h[e+84>>2])&&(h[e+88>>2]=t,be(t)),Qt(e),be(e)},function(e,t,i){var r=0,n=0,a=0,s=0,o=0,l=0,c=0;if(Ce(e|=0,t|=0,i|=0),i=h[e+84>>2],!((0|(r=h[e+88>>2]-i>>2))>(0|t))){if((t=t+1|0)>>>0>r>>>0){e:if((r=t-r|0)>>>0<=(n=h[e+92>>2])-(i=h[e+88>>2])>>2>>>0){if(r){if(t=i,a=7&r)for(;h[t>>2]=1,t=t+4|0,(0|a)!=(0|(s=s+1|0)););if(i=(r<<2)+i|0,!((r-1&1073741823)>>>0<7))for(;h[t+24>>2]=1,h[t+28>>2]=1,h[t+16>>2]=1,h[t+20>>2]=1,h[t+8>>2]=1,h[t+12>>2]=1,h[t>>2]=1,h[t+4>>2]=1,(0|i)!=(0|(t=t+32|0)););}h[e+88>>2]=i}else{t:{if((t=(i=(c=i-(a=h[e+84>>2])|0)>>2)+r|0)>>>0<1073741824){if(o=(n=n-a|0)>>1,n=n>>>0<2147483644?t>>>0>o>>>0?t:o:1073741823){if(n>>>0>=1073741824)break t;l=mr(n<<2)}if(t=i=(i<<2)+l|0,o=7&r)for(t=i;h[t>>2]=1,t=t+4|0,(0|o)!=(0|(s=s+1|0)););if(i=i+(r<<2)|0,(r-1&1073741823)>>>0>=7)for(;h[t+24>>2]=1,h[t+28>>2]=1,h[t+16>>2]=1,h[t+20>>2]=1,h[t+8>>2]=1,h[t+12>>2]=1,h[t>>2]=1,h[t+4>>2]=1,(0|i)!=(0|(t=t+32|0)););(0|c)>0&&We(l,a,c),h[e+92>>2]=(n<<2)+l,h[e+88>>2]=i,h[e+84>>2]=l,a&&be(a);break e}bn(),x()}Zi(1336),x()}return}t>>>0>=r>>>0||(h[e+88>>2]=i+(t<<2))}},function(e,t){var i=0,r=0;ge(e|=0,t|=0),(0|t)<0||(i=h[e+88>>2])-(r=h[e+84>>2])>>2<=(0|t)||((i=i-(r=4+(t=r+(t<<2)|0)|0)|0)&&At(t,r,i),h[e+88>>2]=t+i)},Qt,function(e){be(Qt(e|=0))},Ce,ge,function(e){return 0|k(h[60+(e|=0)>>2])},function(e,t,i){t|=0,i|=0;var r,n=0,a=0,s=0,o=0,l=0,c=0;I=r=I-32|0,a=h[28+(e|=0)>>2],h[r+16>>2]=a,n=h[e+20>>2],h[r+28>>2]=i,h[r+24>>2]=t,t=n-a|0,h[r+20>>2]=t,a=t+i|0,c=2;e:{t:{t=r+16|0,(n=0|R(h[e+60>>2],0|t,2,r+12|0))?(h[4190]=n,n=-1):n=0;i:{if(!n)for(;;){if((0|(n=h[r+12>>2]))==(0|a))break i;if((0|n)<0)break t;if(s=n-((o=(s=h[t+4>>2])>>>0<n>>>0)?s:0)|0,h[(l=(o<<3)+t|0)>>2]=s+h[l>>2],h[(l=(o?12:4)+t|0)>>2]=h[l>>2]-s,a=a-n|0,t=o?t+8|0:t,c=c-o|0,(n=0|R(h[e+60>>2],0|t,0|c,r+12|0))?(h[4190]=n,n=-1):n=0,n)break}if(-1!=(0|a))break t}t=h[e+44>>2],h[e+28>>2]=t,h[e+20>>2]=t,h[e+16>>2]=t+h[e+48>>2],e=i;break e}h[e+28>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e>>2]=32|h[e>>2],e=0,2!=(0|c)&&(e=i-h[t+4>>2]|0)}return I=r+32|0,0|e},function(e,t,i,r){var n;return t|=0,i|=0,r|=0,I=n=I-16|0,(e=0|P(h[60+(e|=0)>>2],0|t,0|i,255&r,n+8|0))?(h[4190]=e,e=-1):e=0,I=n+16|0,L=e?-1:h[n+12>>2],0|(e?-1:h[n+8>>2])},dn,function(e,t,i,r){return L=0,0},an,fn,xn,xn,function(e,t,i){i|=0;var r,n=0,a=0,s=0,o=0;if(I=r=I+-64|0,n=1,!Oi(e|=0,t|=0,0)&&(n=0,t)){I=n=I+-64|0,a=h[t>>2],s=h[a-4>>2],o=h[a-8>>2],h[n+20>>2]=0,h[n+16>>2]=14956,h[n+12>>2]=t,h[n+8>>2]=15004,a=0,xt(n+24|0,0,39),t=t+o|0;e:if(Oi(s,15004,0))h[n+56>>2]=1,Rn[h[h[s>>2]+20>>2]](s,n+8|0,t,t,1,0),a=1==h[n+32>>2]?t:0;else{Rn[h[h[s>>2]+24>>2]](s,n+8|0,t,1,0);t:switch(h[n+44>>2]){case 0:a=1==h[n+48>>2]&&1==h[n+36>>2]&&1==h[n+40>>2]?h[n+28>>2]:0;break e;case 1:break t;default:break e}1!=h[n+32>>2]&&h[n+48>>2]|1!=h[n+36>>2]|1!=h[n+40>>2]||(a=h[n+24>>2])}I=n- -64|0,n=0,a&&(xt(4|(t=r+8|0),0,52),h[r+56>>2]=1,h[r+20>>2]=-1,h[r+16>>2]=e,h[r+8>>2]=a,Rn[h[h[a>>2]+28>>2]](a,t,h[i>>2],1),1==(0|(e=h[r+32>>2]))&&(h[i>>2]=h[r+24>>2]),n=1==(0|e))}return I=r- -64|0,0|n},function(e,t,i,r,n,a){i|=0,r|=0,n|=0,a|=0,Oi(e|=0,h[8+(t|=0)>>2],a)&&fi(t,i,r,n)},function(e,t,i,r,n){if(i|=0,r|=0,n|=0,Oi(e|=0,h[8+(t|=0)>>2],n))1==h[t+28>>2]|h[t+4>>2]!=(0|i)||(h[t+28>>2]=r);else e:if(Oi(e,h[t>>2],n)){if(!(h[t+16>>2]!=(0|i)&h[t+20>>2]!=(0|i))){if(1!=(0|r))break e;return void(h[t+32>>2]=1)}h[t+20>>2]=i,h[t+32>>2]=r,h[t+40>>2]=h[t+40>>2]+1,1!=h[t+36>>2]|2!=h[t+24>>2]||(a[t+54|0]=1),h[t+44>>2]=4}},function(e,t,i,r){i|=0,r|=0,Oi(e|=0,h[8+(t|=0)>>2],0)&&qi(t,i,r)},fn,function(e,t,i,r,n,a){i|=0,r|=0,n|=0,a|=0,Oi(e|=0,h[8+(t|=0)>>2],a)?fi(t,i,r,n):(e=h[e+8>>2],Rn[h[h[e>>2]+20>>2]](e,t,i,r,n,a))},function(e,t,i,r,n){if(i|=0,r|=0,n|=0,Oi(e|=0,h[8+(t|=0)>>2],n))1==h[t+28>>2]|h[t+4>>2]!=(0|i)||(h[t+28>>2]=r);else e:{if(Oi(e,h[t>>2],n)){if(!(h[t+16>>2]!=(0|i)&h[t+20>>2]!=(0|i))){if(1!=(0|r))break e;return void(h[t+32>>2]=1)}h[t+32>>2]=r;t:if(4!=h[t+44>>2]){if(u[t+52>>1]=0,e=h[e+8>>2],Rn[h[h[e>>2]+20>>2]](e,t,i,i,1,n),d[t+53|0]){if(h[t+44>>2]=3,!d[t+52|0])break t;break e}h[t+44>>2]=4}if(h[t+20>>2]=i,h[t+40>>2]=h[t+40>>2]+1,1!=h[t+36>>2]|2!=h[t+24>>2])break e;return void(a[t+54|0]=1)}e=h[e+8>>2],Rn[h[h[e>>2]+24>>2]](e,t,i,r,n)}},function(e,t,i,r){i|=0,r|=0,Oi(e|=0,h[8+(t|=0)>>2],0)?qi(t,i,r):(e=h[e+8>>2],Rn[h[h[e>>2]+28>>2]](e,t,i,r))},an,fn,function(e){return 1283},function(e){be(vr(e|=0))},Zr,function(e){vr(e|=0),be(e)}],Mn.set=function(e,t){this[e]=t},Mn.get=function(e){return this[e]},Mn);function Pn(){return r.byteLength/65536|0}return{j:function(){h[4227]=16796,h[4209]=42},k:Rn,l:nn,m:function(){var e;return e=mr(40),u[e+38>>1]=0,h[e>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,a[e+29|0]=0,a[e+30|0]=0,a[e+31|0]=0,a[e+32|0]=0,a[e+33|0]=0,a[e+34|0]=0,a[e+35|0]=0,a[e+36|0]=0,0|e},n:function(e,t,i){t|=0,i|=0,h[16+(e|=0)>>2]=0,h[e+20>>2]=0,h[e>>2]=t,h[e+8>>2]=i,h[e+12>>2]=0},o:nn,p:function(){var e,t;return t=mr(40),h[t>>2]=-1,h[16+(e=t+8|0)>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,0|t},q:tn,r:function(e){var t=0;(e|=0)&&((t=h[e+8>>2])&&(h[e+12>>2]=t,be(t)),be(e))},s:function(){return 0|tr(mr(64))},t:nn,u:function(){var e;return tr(e=mr(96)),h[e+64>>2]=0,h[e+68>>2]=0,h[e+88>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,a[e+77|0]=0,a[e+78|0]=0,a[e+79|0]=0,a[e+80|0]=0,a[e+81|0]=0,a[e+82|0]=0,a[e+83|0]=0,a[e+84|0]=0,0|e},v:Xr,w:function(e){return h[88+(e|=0)>>2]},x:function(e){return h[56+(e|=0)>>2]},y:Yr,z:function(e){return a[24+(e|=0)|0]},A:function(e){return d[32+(e|=0)|0]},B:function(e){return h[40+(e|=0)>>2]},C:function(e){return h[48+(e|=0)>>2]},D:function(e){return h[60+(e|=0)>>2]},E:Hi,F:function(){var e;return e=mr(24),h[e+8>>2]=0,h[e+12>>2]=0,h[e+4>>2]=-1,h[e>>2]=1140,h[e+16>>2]=0,h[e+20>>2]=0,0|e},G:Ir,H:Zr,I:function(e,t){return t|=0,v(m[h[8+(e|=0)>>2]+(t<<2)>>2])},J:function(e){return v(m[20+(e|=0)>>2])},K:Gr,L:function(){var e;return e=mr(8),h[e+4>>2]=-1,h[e>>2]=1032,0|e},M:Ir,N:Zr,O:Gr,P:function(){return 0|Ur(mr(84))},Q:Fr,R:Xr,S:Gr,T:function(){var e;return Ur(e=mr(108)),h[e+84>>2]=0,h[e+88>>2]=0,h[e>>2]=13696,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,0|e},U:function(e){return(h[100+(e|=0)>>2]-h[e+96>>2]|0)/12|0},V:Fr,W:Xr,X:Gr,Y:function(){var e,t;return e=mr(24),h[e+4>>2]=0,h[e+8>>2]=0,h[(t=e+16|0)>>2]=0,h[t+4>>2]=0,h[e>>2]=e+4,h[e+12>>2]=t,0|e},Z:function(e){(e|=0)&&(nr(e+12|0,h[e+16>>2]),fr(e,h[e+4>>2]),be(e))},_:tn,$:function(e){return 0|!h[(e|=0)>>2]},aa:function(e){return 0|(a[15+(e|=0)|0]<0?h[e+4>>2]:e+4|0)},ba:function(e){(e|=0)&&(a[e+15|0]<0&&be(h[e+4>>2]),be(e))},ca:kr,da:function(e,t){return t|=0,v(m[h[(e|=0)>>2]+(t<<2)>>2])},ea:zr,fa:Or,ga:kr,ha:function(e,t){return t|=0,a[h[(e|=0)>>2]+t|0]},ia:Hr,ja:Or,ka:kr,la:function(e,t){return t|=0,d[h[(e|=0)>>2]+t|0]},ma:Hr,na:Or,oa:kr,pa:function(e,t){return t|=0,u[h[(e|=0)>>2]+(t<<1)>>1]},qa:jr,ra:Or,sa:kr,ta:function(e,t){return t|=0,f[h[(e|=0)>>2]+(t<<1)>>1]},ua:jr,va:Or,wa:kr,xa:Lr,ya:zr,za:Or,Aa:kr,Ba:Lr,Ca:zr,Da:Or,Ea:function(){var e;return e=mr(28),h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,0|e},Fa:function(e,t,i){e|=0,t|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0,f=0;if(I=r=I-16|0,(n=Pi(i|=0))>>>0<4294967280){e:{if(n>>>0>=11)e=mr(s=n+16&-16),h[r+8>>2]=-2147483648|s,h[r>>2]=e,h[r+4>>2]=n;else if(a[r+11|0]=n,e=r,!n)break e;We(e,i,n)}a[e+n|0]=0,n=(i=d[r+11|0])<<24>>24,s=h[r>>2],e=0;e:if(t=h[t+4>>2]){for(e=i,e=(i=(0|n)<0)?h[r+4>>2]:e,u=i?s:r;;){t:{i:{r:{if(c=(f=(i=(o=(i=d[t+27|0])<<24>>24<0)?h[t+20>>2]:i)>>>0<e>>>0)?i:e){l=t+16|0;n:{if(!(l=xi(u,o=o?h[l>>2]:l,c))){if(e>>>0>=i>>>0)break n;break t}if((0|l)<0)break t}if(!(i=xi(o,u,c)))break r;if((0|i)<0)break i;e=1;break e}if(e>>>0<i>>>0)break t}if(!f){e=1;break e}}t=t+4|0}if(!(t=h[t>>2]))break}e=0}(0|n)<0&&be(s),I=r+16|0}else mn(),x();return 0|e},Ga:function(e,t,i){e|=0,t|=0,i|=0;var r,n,s=0;if(I=r=I-16|0,h[r+12>>2]=0,(n=Pi(i))>>>0<4294967280){e:{if(n>>>0>=11)e=mr(s=n+16&-16),h[r+8>>2]=-2147483648|s,h[r>>2]=e,h[r+4>>2]=n;else if(a[r+11|0]=n,e=r,!n)break e;We(e,i,n)}a[e+n|0]=0,(0|(e=Lt(t,r)))!=(t+4|0)&&4==((t=h[e+32>>2])-(e=h[e+28>>2])|0)&&(h[r+12>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24),e=h[r+12>>2],a[r+11|0]<0&&be(h[r>>2]),I=r+16|0}else mn(),x();return 0|e},Ha:function(e,t,i,r){e|=0,t|=0,r|=0;var n=0,s=0,o=0;if(I=e=I-32|0,(n=Pi(i|=0))>>>0<4294967280){e:{if(n>>>0>=11)s=mr(o=n+16&-16),h[e+24>>2]=-2147483648|o,h[e+16>>2]=s,h[e+20>>2]=n;else if(a[e+27|0]=n,s=e+16|0,!n)break e;We(s,i,n)}a[n+s|0]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,(0|(i=Lt(t,e+16|0)))!=(t+4|0)&&(0|(t=h[i+28>>2]))!=(0|(s=h[i+32>>2]))&&(3&(t=s-t|0)||((n=t>>>2|0)>>>0>(o=(s=h[e+4>>2])-(t=h[e>>2])>>2)>>>0?(ei(e,n-o|0),t=h[e>>2],s=h[e+4>>2]):n>>>0>=o>>>0||(s=(n<<2)+t|0,h[e+4>>2]=s),(0|t)==(0|s)?(Sn(),x()):We(n=t,t=h[i+28>>2],h[i+32>>2]-t|0))),(t=h[r>>2])&&(h[r+4>>2]=t,be(t)),h[r>>2]=h[e>>2],h[r+4>>2]=h[e+4>>2],h[r+8>>2]=h[e+8>>2],a[e+27|0]<0&&be(h[e+16>>2]),I=e+32|0}else mn(),x()},Ia:function(e,t,i){e|=0,t|=0,i|=0;var r,n=0,s=0,o=0;if(I=e=I-32|0,h[e+24>>2]=0,h[e+28>>2]=0,(r=Pi(i))>>>0<4294967280){e:{if(r>>>0>=11)n=mr(s=r+16&-16),h[e+16>>2]=-2147483648|s,h[e+8>>2]=n,h[e+12>>2]=r;else if(a[e+19|0]=r,n=e+8|0,!r)break e;We(n,i,r)}a[r+n|0]=0,(0|(i=t+4|0))!=(0|(t=Lt(t,e+8|0)))&&8==((i=h[t+32>>2])-(t=h[t+28>>2])|0)&&(i=d[t+4|0]|d[t+5|0]<<8|d[t+6|0]<<16|d[t+7|0]<<24,h[e+24>>2]=d[0|t]|d[t+1|0]<<8|d[t+2|0]<<16|d[t+3|0]<<24,h[e+28>>2]=i),o=g[e+24>>3],a[e+19|0]<0&&be(h[e+8>>2]),I=e+32|0}else mn(),x();return+o},Ja:function(e,t,i){e|=0,t|=0;var r,n,s=0,o=0;if(I=r=I-16|0,(n=Pi(i|=0))>>>0<4294967280){e:{if(n>>>0>=11)s=mr(o=n+16&-16),h[r+8>>2]=-2147483648|o,h[r>>2]=s,h[r+4>>2]=n;else if(a[r+11|0]=n,s=r,!n)break e;We(s,i,n)}a[n+s|0]=0,i=Ki(t,r,s=e+16|0),t=a[e+27|0],e=h[e+16>>2],a[r+11|0]<0&&be(h[r>>2]),I=r+16|0,e=i?(0|t)<0?e:s:0}else mn(),x();return 0|e},Ka:function(e,t){return h[8+(t|=0)>>2]},La:function(e,t,i){t|=0;var r,n=0,s=0,o=0,l=0,c=0,u=0,d=0;r=i|=0;e:if(h[12+(n=e|=0)>>2]!=(0|t)){if(e=t,(0|(t=h[n+4>>2]))!=(0|(i=h[n>>2])))for(;s=t-12|0,a[t-1|0]<0&&be(h[s>>2]),(0|i)!=(0|(t=s)););if(h[n+12>>2]=e,h[n+4>>2]=i,(0|(t=h[e>>2]))!=(0|(u=e+4|0)))for(;;){if(h[n+8>>2]==(0|i)){l=0;t:{i:{r:{if((i=1+(o=((s=h[n+4>>2])-(e=h[n>>2])|0)/12|0)|0)>>>0<357913942){if(d=(c=(h[n+8>>2]-e|0)/12|0)<<1,i=c>>>0<178956970?i>>>0>d>>>0?i:d:357913941){if(i>>>0>=357913942)break r;l=mr(b(i,12))}if(c=b(i,12),i=b(o,12)+l|0,a[t+27|0]>=0?(o=h[t+20>>2],h[i>>2]=h[t+16>>2],h[i+4>>2]=o,h[i+8>>2]=h[t+24>>2]):(Vi(i,h[t+16>>2],h[t+20>>2]),s=h[n+4>>2],e=h[n>>2]),l=l+c|0,o=i+12|0,(0|e)==(0|s))break i;for(;c=h[4+(s=s-12|0)>>2],h[(i=i-12|0)>>2]=h[s>>2],h[i+4>>2]=c,h[i+8>>2]=h[s+8>>2],h[s>>2]=0,h[s+4>>2]=0,h[s+8>>2]=0,(0|e)!=(0|s););if(h[n+8>>2]=l,e=h[n+4>>2],h[n+4>>2]=o,s=h[n>>2],h[n>>2]=i,(0|e)==(0|s))break t;for(;i=e-12|0,a[e-1|0]<0&&be(h[i>>2]),e=i,(0|i)!=(0|s););break t}bn(),x()}Zi(1336),x()}h[n+8>>2]=l,h[n+4>>2]=o,h[n>>2]=i}s&&be(s)}else a[t+27|0]>=0?(e=h[t+20>>2],h[i>>2]=h[t+16>>2],h[i+4>>2]=e,h[i+8>>2]=h[t+24>>2]):Vi(i,h[t+16>>2],h[t+20>>2]),h[n+4>>2]=i+12;t:if(i=h[t+4>>2])for(;e=i,i=h[i>>2];);else{if(e=h[t+8>>2],h[e>>2]==(0|t))break t;for(t=t+8|0;t=(i=h[t>>2])+8|0,e=h[i+8>>2],(0|i)!=h[e>>2];);}if((0|e)==(0|u))break e;i=h[n+4>>2],t=e}}return i=0,(0|r)<0||(e=h[n>>2],(h[n+4>>2]-e|0)/12>>>0<=r>>>0||(e=e+b(r,12)|0,i=a[e+11|0]<0?h[e>>2]:e)),0|i},Ma:function(e){var t=0,i=0,r=0;if(e|=0){if(a[e+27|0]<0&&be(h[e+16>>2]),t=h[e>>2]){if((0|(i=h[e+4>>2]))==(0|t))r=t;else{for(;r=i-12|0,a[i-1|0]<0&&be(h[r>>2]),(0|(i=r))!=(0|t););r=h[e>>2]}h[e+4>>2]=t,be(r)}be(e)}},Na:function(){var e,t;return e=mr(40),h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=e+4,h[(t=e+16|0)>>2]=0,h[t+4>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+12>>2]=t,h[e+32>>2]=0,h[e+36>>2]=0,0|e},Oa:function(e,t,i,r){e|=0,t|=0,i|=0,r|=0;var n,s=0,o=0;I=n=I+-64|0,u[38+(s=n+8|0)>>1]=0,h[s>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,a[s+29|0]=0,a[s+30|0]=0,a[s+31|0]=0,a[s+32|0]=0,a[s+33|0]=0,a[s+34|0]=0,a[s+35|0]=0,a[s+36|0]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=t,h[s+8>>2]=i,h[s+12>>2]=0,fe(t=n+48|0,e,s,r),h[e+24>>2]=h[n+48>>2];e:if((0|(i=e+24|0))!=(0|t))if(s=n+48|4,r=(t=d[n+63|0])<<24>>24,a[11+(o=e+28|0)|0]>=0){if((0|r)>=0){e=h[s+4>>2],h[o>>2]=h[s>>2],h[o+4>>2]=e,h[o+8>>2]=h[s+8>>2];break e}ir(o,h[n+52>>2],h[n+56>>2])}else Yi(o,(e=(0|r)<0)?h[n+52>>2]:s,e?h[n+56>>2]:t);return a[n+63|0]<0&&be(h[n+52>>2]),I=n- -64|0,0|i},Pa:function(e,t,i,r){e|=0,t|=0,i|=0,r|=0;var n,s=0,o=0;I=n=I+-64|0,u[38+(s=n+8|0)>>1]=0,h[s>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,a[s+29|0]=0,a[s+30|0]=0,a[s+31|0]=0,a[s+32|0]=0,a[s+33|0]=0,a[s+34|0]=0,a[s+35|0]=0,a[s+36|0]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=t,h[s+8>>2]=i,h[s+12>>2]=0,Ae(t=n+48|0,e,s,r),h[e+24>>2]=h[n+48>>2];e:if((0|(i=e+24|0))!=(0|t))if(s=n+48|4,r=(t=d[n+63|0])<<24>>24,a[11+(o=e+28|0)|0]>=0){if((0|r)>=0){e=h[s+4>>2],h[o>>2]=h[s>>2],h[o+4>>2]=e,h[o+8>>2]=h[s+8>>2];break e}ir(o,h[n+52>>2],h[n+56>>2])}else Yi(o,(e=(0|r)<0)?h[n+52>>2]:s,e?h[n+56>>2]:t);return a[n+63|0]<0&&be(h[n+52>>2]),I=n- -64|0,0|i},Qa:function(e,t,i){return 0|hr(t|=0,i|=0)},Ra:function(e,t,i){e|=0,t|=0;var r=0,n=0,s=0;if(I=e=I-32|0,(r=Pi(i|=0))>>>0<4294967280){e:{if(r>>>0>=11)n=mr(s=r+16&-16),h[e+24>>2]=-2147483648|s,h[e+16>>2]=n,h[e+20>>2]=r;else if(a[e+27|0]=r,n=e+16|0,!r)break e;We(n,i,r)}a[r+n|0]=0,a[e+4|0]=0,h[e>>2]=1701667182,a[e+11|0]=4,i=-1,(r=h[t+4>>2])&&(i=-1,(r=Et(r,e,e+16|0))&&(i=Qi(t,h[r+24>>2]))),t=i,a[e+11|0]<0&&be(h[e>>2]),a[e+27|0]<0&&be(h[e+16>>2]),I=e+32|0}else mn(),x();return 0|t},Sa:function(e,t,i,r){e|=0,t|=0,r|=0;var n,s=0,o=0;I=n=I-32|0;e:{t:{if((s=Pi(i|=0))>>>0<4294967280){i:{if(s>>>0>=11)e=mr(o=s+16&-16),h[n+24>>2]=-2147483648|o,h[n+16>>2]=e,h[n+20>>2]=s;else if(a[n+27|0]=s,e=n+16|0,!s)break i;We(e,i,s)}if(a[e+s|0]=0,(i=Pi(r))>>>0>=4294967280)break t;i:{if(i>>>0>=11)e=mr(s=i+16&-16),h[n+8>>2]=-2147483648|s,h[n>>2]=e,h[n+4>>2]=i;else if(a[n+11|0]=i,e=n,!i)break i;We(e,r,i)}a[e+i|0]=0,e=-1,(i=h[t+4>>2])&&(e=-1,(i=Et(i,n+16|0,n))&&(e=Qi(t,h[i+24>>2]))),a[n+11|0]<0&&be(h[n>>2]),a[n+27|0]<0&&be(h[n+16>>2]),I=n+32|0;break e}mn(),x()}mn(),x()}return 0|e},Ta:function(e,t,i){return i|=0,h[h[8+(t|=0)>>2]+(i<<2)>>2]},Ua:function(e,t,i){e|=0,i|=0;var r=0,n=0;r=(e=h[12+(t|=0)>>2])-(t=h[t+8>>2])|0,e=0;e:if(r){r=(e=r>>2)>>>0>1?e:1,e=0;t:{for(;;){if(n=h[t+(e<<2)>>2],h[n+60>>2]==(0|i))break t;if((0|r)==(0|(e=e+1|0)))break}e=0;break e}e=-1==(0|e)?0:n}return 0|e},Va:function(e,t){return h[4+(t|=0)>>2]},Wa:function(e,t,i){e|=0,i|=0;var r,n=0;if((r=h[4+(t|=0)>>2])&&!((0|(t=h[h[h[t+8>>2]+(i<<2)>>2]+60>>2]))<0)&&(0|(e=h[r+24>>2]))!=(0|(i=h[r+28>>2])))e:{for(;;){if(n=h[e>>2],(0|t)==h[n+24>>2])break e;if((0|i)==(0|(e=e+4|0)))break}n=0}return 0|n},Xa:function(e,t,i,r){var n,a;return e|=0,i|=0,r|=0,I=e=I-16|0,t=h[96+(t|=0)>>2],h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,a=(i=We(n=mr(12),t+b(i,12)|0,12))+12|0,(t=h[r>>2])&&(h[r+4>>2]=t,be(t)),h[r+8>>2]=i+12,h[r+4>>2]=a,h[r>>2]=n,I=e+16|0,1},Ya:function(e,t,i){e|=0,t|=0;var r,n,s,o,l,c,u=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,k=0,O=0,D=0,N=0,L=0,U=0,V=0,F=0,G=0,B=0;c=i|=0,i=0,I=n=I-96|0,xt(r=n+16|0,0,76),h[n+92>>2]=-1,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,I=s=I-16|0,h[r+68>>2]=0,h[r+72>>2]=0,h[r>>2]=t,I=o=I-16|0,l=t,e=h[t+20>>2],(h[t+24>>2]-e|0)<=0||-1!=(0|(e=h[e>>2]))&&(i=h[h[l+8>>2]+(e<<2)>>2]);e:{t:{if(i){e=h[l+100>>2],f=h[l+96>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,t=(0|(u=e-f|0))/12|0;i:if(u){if(t>>>0>=357913942)break t;if(p=mr(u),h[o>>2]=p,h[o+8>>2]=p+b(t,12),e=0,u=xt(m=p,0,p=b((u-12>>>0)/12|0,12)+12|0),h[o+4>>2]=u+p,d[i+84|0]){if(m=1&(i=t>>>0>1?t:1),t>>>0>=2)for(_=-2&i,i=0;p=b(e,12),A=h[4+(t=p+f|0)>>2],E=h[t>>2],h[8+(p=u+p|0)>>2]=h[t+8>>2],h[p>>2]=E,h[p+4>>2]=A,p=b(1|e,12),A=h[8+(t=p+f|0)>>2],E=h[t+4>>2],h[(p=u+p|0)>>2]=h[t>>2],h[p+4>>2]=E,h[p+8>>2]=A,e=e+2|0,(0|_)!=(0|(i=i+2|0)););if(!m)break i;t=b(e,12),i=h[4+(e=t+f|0)>>2],f=h[e>>2],h[8+(t=t+u|0)>>2]=h[e+8>>2],h[t>>2]=f,h[t+4>>2]=i}else for(m=t>>>0>1?t:1,e=h[i+68>>2],i=0;p=b(i,12),_=h[e+(h[(t=p+f|0)>>2]<<2)>>2],A=h[e+(h[t+4>>2]<<2)>>2],h[8+(p=u+p|0)>>2]=h[e+(h[t+8>>2]<<2)>>2],h[p+4>>2]=A,h[p>>2]=_,(0|m)!=(0|(i=i+1|0)););}if(I=D=I-16|0,m=mr(88),h[m>>2]=0,h[m+4>>2]=0,h[m+56>>2]=0,h[m+48>>2]=0,h[m+52>>2]=0,h[m+40>>2]=0,h[m+44>>2]=0,h[m+32>>2]=0,h[m+36>>2]=0,h[m+24>>2]=0,h[m+28>>2]=0,h[m+16>>2]=0,h[m+20>>2]=0,h[m+8>>2]=0,h[m+12>>2]=0,h[(e=m- -64|0)>>2]=0,h[e+4>>2]=0,h[m+72>>2]=0,h[m+76>>2]=0,h[m+80>>2]=0,h[m+84>>2]=0,h[m+60>>2]=m,I=k=I-16|0,h[m+80>>2]=0,h[m+84>>2]=0,e=h[m+76>>2],h[m+76>>2]=0,e&&be(e),h[m+68>>2]=0,h[m+72>>2]=0,e=h[(t=m- -64|0)>>2],h[t>>2]=0,e&&be(e),t=h[o>>2],i=h[o+4>>2]-t|0,e=b(_=(0|i)/12|0,3),u=h[m>>2],e>>>0>(f=h[m+4>>2]-u>>2)>>>0?(ei(m,e-f|0),t=h[o>>2],_=(0|(i=h[o+4>>2]-t|0))/12|0,u=h[m>>2]):e>>>0>=f>>>0||(h[m+4>>2]=(e<<2)+u),i)for(p=_>>>0>1?_:1,e=0;i=(f=b(e,12))+u|0,f=t+f|0,h[i>>2]=h[f>>2],h[i+4>>2]=h[f+4>>2],h[i+8>>2]=h[f+8>>2],(0|p)!=(0|(e=e+1|0)););h[k+12>>2]=-1,I=p=I-48|0;i:{r:{if(P=k+12|0){if(E=(i=(u=h[m+4>>2])-(A=h[m>>2])|0)>>2,t=h[m+12>>2],E>>>0>(e=h[m+16>>2]-t>>2)>>>0?($e(m+12|0,E-e|0,13684),E=(i=(u=h[m+4>>2])-(A=h[m>>2])|0)>>2):e>>>0<=E>>>0||(h[m+16>>2]=t+(E<<2)),t=0,h[p+40>>2]=0,h[p+32>>2]=0,h[p+36>>2]=0,i){n:{if((0|i)>=0)for(t=mr(i),h[p+36>>2]=t,h[p+32>>2]=t,h[p+40>>2]=(E<<2)+t,e=t,i=0;;){if((_=h[(i<<2)+A>>2])>>>0<(e=e-t>>2)>>>0||(h[p+16>>2]=0,(f=_+1|0)>>>0>e>>>0?($e(p+32|0,f-e|0,p+16|0),A=h[m>>2],u=h[m+4>>2],t=h[p+32>>2]):e>>>0<=f>>>0||(h[p+36>>2]=(f<<2)+t)),h[(e=(_<<2)+t|0)>>2]=h[e>>2]+1,(i=i+1|0)>>>0>=(E=(e=u-A|0)>>2)>>>0)break n;e=h[p+36>>2]}break r}if(h[p+24>>2]=0,h[p+16>>2]=0,h[p+20>>2]=0,e){if(e>>>0>=2147483645)break t;e=mr(i=e<<1),h[p+16>>2]=e,f=e+(E<<3)|0,h[p+24>>2]=f,xt(e,255,i),h[p+20>>2]=f}}else h[p+24>>2]=0,h[p+16>>2]=0,h[p+20>>2]=0;if(u=0,h[p+8>>2]=0,h[p>>2]=0,h[p+4>>2]=0,_=(e=h[p+36>>2]-t|0)>>2,e){if((0|e)<0)break t;if(y=mr(e),h[p>>2]=y,i=(e=_<<2)+y|0,h[p+8>>2]=i,e=xt(y,0,e),h[p+4>>2]=i,S=3&(f=_>>>0>1?_:1),i=0,f-1>>>0>=3)for(T=-4&f;h[(f=v<<2)+e>>2]=i,C=4|f,i=h[t+f>>2]+i|0,h[C+e>>2]=i,R=8|f,i=i+h[t+C>>2]|0,h[R+e>>2]=i,f|=12,i=i+h[t+R>>2]|0,h[f+e>>2]=i,i=i+h[t+f>>2]|0,v=v+4|0,(0|T)!=(0|(g=g+4|0)););if(S)for(;h[(f=v<<2)+e>>2]=i,v=v+1|0,i=h[t+f>>2]+i|0,(0|S)!=(0|(w=w+1|0)););}if(E)for(C=h[m+12>>2];;){i=(N=u<<2)+A|0,g=-1,-1!=(0|(e=((f=u+1|0)>>>0)%3|0?f:u-2|0))&&(g=h[(e<<2)+A>>2]),e=h[i>>2];n:{a:{if(!((u>>>0)%3|0)){if(w=-1,-1!=(0|(i=u+2|0))&&(w=h[(i<<2)+A>>2]),!((0|e)==(0|g)|(0|e)==(0|w))&(0|g)!=(0|w))break a;h[m+40>>2]=h[m+40>>2]+1,f=u+3|0;break n}w=h[i-4>>2]}a:{s:if(!((0|(R=h[(i=w<<2)+t>>2]))<=0))for(S=h[p+16>>2],i=h[i+y>>2],v=0;;){if(-1==(0|(M=h[(T=S+(i<<3)|0)>>2])))break s;if((0|g)==(0|M)&&(0|(M=-1!=(0|(T=h[T+4>>2]))?h[(T<<2)+A>>2]:-1))!=(0|e)){for(;e=i,!((0|R)<=(0|(v=v+1|0))||(M=S+(e<<3)|0,U=h[(L=S+((i=e+1|0)<<3)|0)>>2],h[M>>2]=U,h[M+4>>2]=h[L+4>>2],-1==(0|U))););if(h[S+(e<<3)>>2]=-1,-1==(0|T))break s;h[C+N>>2]=T,h[C+(T<<2)>>2]=u;break a}if(i=i+1|0,(0|R)==(0|(v=v+1|0)))break}if(!((0|(g=h[(e=g<<2)+t>>2]))<=0))for(S=h[p+16>>2],i=h[e+y>>2],v=0;;){if(-1==h[(e=S+(i<<3)|0)>>2]){h[e>>2]=w,h[e+4>>2]=u;break a}if(i=i+1|0,(0|g)==(0|(v=v+1|0)))break}}}if(!(E>>>0>(u=f)>>>0))break}h[P>>2]=_,y&&be(y),(e=h[p+16>>2])&&(h[p+20>>2]=e,be(e)),(e=h[p+32>>2])&&(h[p+36>>2]=e,be(e))}if(I=p+48|0,C=0!=(0|P)){I=g=I-32|0,E=h[m>>2],e=h[m+4>>2],h[g+24>>2]=0,h[g+16>>2]=0,h[g+20>>2]=0;n:{a:{if(t=e-E|0){if((0|t)<0)break a;f=mr((p=1+(u=(i=t>>2)-1>>>5|0)|0)<<2),h[g+24>>2]=p,h[g+16>>2]=f,h[g+20>>2]=i,h[f+((t>>>0<132?0:u)<<2)>>2]=0,f=xt(f,0,t=i>>>5<<2),(i&=31)&&(h[(t=t+f|0)>>2]=h[t>>2]&(-1>>>32-i^-1))}for(h[g+8>>2]=0,h[g>>2]=0;;){if(S=0,t=0,(0|e)!=(0|E)){for(;;){u=h[g+16>>2];s:if(!(h[u+(t>>>3&536870908)>>2]>>>t&1)){for(f=h[g>>2],h[g+4>>2]=f,i=h[m+12>>2],e=t;v=e,!(-1==(0|(e=((p=e+1|0)>>>0)%3|0?p:e-2|0))||-1==(0|(e=h[i+(e<<2)>>2]))||(0|t)==(0|(e=((p=e+1|0)>>>0)%3|0?p:e-2|0))|-1==(0|e)||h[(e>>>3&536870908)+u>>2]>>>e&1););i=f,_=v;o:{l:{for(;;){if(h[(e=(_>>>3&536870908)+u|0)>>2]=h[e>>2]|1<<_,p=((e=_+1|0)>>>0)%3|0?e:_-2|0,T=(A=((R=(_>>>0)%3|0)?-1:2)+_|0)<<2,(0|i)!=(0|f))if(P=h[(p<<2)+E>>2],y=h[m+12>>2],e=i,-1==(0|A))for(;;){if((0|P)==h[e>>2]&&(w=-1,A=-1,-1!=(0|(u=h[e+4>>2]))))break l;if((0|f)==(0|(e=e+8|0)))break}else for(M=y+T|0;;){if((0|P)==h[e>>2]&&(0|(u=h[e+4>>2]))!=(0|(w=h[M>>2]))){if(f=-1,e=-1,-1==(0|u))break o;break l}if((0|f)==(0|(e=e+8|0)))break}if(A=h[E+T>>2],h[g+8>>2]==(0|f)){if((e=1+(f=(u=f-i|0)>>3)|0)>>>0>=536870912)break t;if(y=u>>2,y=u>>>0<2147483640?e>>>0>y>>>0?e:y:536870911){if(y>>>0>=536870912)break r;e=mr(y<<3)}else e=0;h[(f=e+(f<<3)|0)>>2]=A,h[f+4>>2]=p,f=f+8|0,(0|u)>0&&We(e,i,u),h[g+8>>2]=e+(y<<3),h[g+4>>2]=f,h[g>>2]=e,i&&be(i)}else h[f>>2]=A,h[f+4>>2]=p,f=f+8|0,h[g+4>>2]=f;c:{if(R)e=_-1|0;else if(-1==(0|(e=_+2|0)))break c;if(-1!=(0|(e=h[h[m+12>>2]+(e<<2)>>2]))&&!((0|v)==(0|(_=e+((e>>>0)%3|0?-1:2)|0))|-1==(0|_))){E=h[m>>2],i=h[g>>2],u=h[g+16>>2];continue}}break}E=h[m>>2];break s}e=h[y+((f=u)<<2)>>2]}-1!=(0|w)&&(h[y+(w<<2)>>2]=-1),-1!=(0|e)&&(h[h[m+12>>2]+(e<<2)>>2]=-1),e=h[m+12>>2],h[e+(A<<2)>>2]=-1,h[e+(f<<2)>>2]=-1,S=1}if(!((t=t+1|0)>>>0<(e=h[m+4>>2])-E>>2>>>0))break}if(S)continue}break}(e=h[g>>2])&&be(e),(e=h[g+16>>2])&&be(e),I=g+32|0;break n}pn(),x()}A=0,I=v=I-32|0,e=h[k+12>>2],h[m+36>>2]=e,E=m+24|0;n:{a:{s:{o:{l:{i=h[m+24>>2];c:{if((t=h[m+28>>2]-i>>2)>>>0<e>>>0)$e(E,e-t|0,13684),h[v+24>>2]=0,h[v+16>>2]=0,h[v+20>>2]=0;else if(e>>>0<t>>>0&&(h[m+28>>2]=i+(e<<2)),t=0,h[v+24>>2]=0,h[v+16>>2]=0,h[v+20>>2]=0,!e)break c;if((0|e)<0)break l;t=mr((f=1+(i=e-1>>>5|0)|0)<<2),h[v+24>>2]=f,h[v+16>>2]=t,h[v+20>>2]=e,h[((e>>>0<33?0:i)<<2)+t>>2]=0,f=xt(t,0,i=e>>>5<<2),(u=31&e)&&(h[(i=i+f|0)>>2]=h[i>>2]&(-1>>>32-u^-1))}if(y=h[m>>2],_=h[m+4>>2],h[v+8>>2]=0,h[v>>2]=0,h[v+4>>2]=0,!(i=_-y|0))break n;if((0|i)<0)break o;if(g=mr((p=1+(u=(f=i>>2)-1>>>5|0)|0)<<2),h[v+8>>2]=p,h[v>>2]=g,h[v+4>>2]=f,w=0,h[((i>>>0<132?0:u)<<2)+g>>2]=0,p=xt(g,0,u=f>>>5<<2),(f&=31)&&(h[(u=u+p|0)>>2]=h[u>>2]&(-1>>>32-f^-1)),i>>>0<12)break n;for(;;){if(T=b(w,3),i=h[(f=(T<<2)+y|0)>>2],u=-1,-1!=(0|(p=T+1|0))&&(u=h[(p<<2)+y>>2]),(0|i)!=(0|u)&&(0|(p=i))!=(0|(i=h[f+8>>2]))&&(S=0,(0|i)!=(0|u))){for(;;){if(!(h[((f=S+T|0)>>>3&536870908)+g>>2]>>>f&1)){if(P=(u=1<<(i=h[(f<<2)+y>>2]))&h[((g=i>>>5|0)<<2)+t>>2]){if((0|(t=h[m+28>>2]))==h[m+32>>2]){if((t=1+(g=(u=t-(p=h[E>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(_=u>>1,_=u>>>0<2147483644?t>>>0>_>>>0?t:_:1073741823){if(_>>>0>=1073741824)break r;t=mr(_<<2)}else t=0;h[(g=t+(g<<2)|0)>>2]=-1,(0|u)>0&&We(t,p,u),h[m+32>>2]=t+(_<<2),h[m+28>>2]=g+4,h[m+24>>2]=t,p&&be(p)}else h[t>>2]=-1,h[m+28>>2]=t+4;if((0|(t=h[m+52>>2]))==h[m+56>>2]){if((t=1+(g=(u=t-(p=h[m+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(_=u>>1,_=u>>>0<2147483644?t>>>0>_>>>0?t:_:1073741823){if(_>>>0>=1073741824)break r;t=mr(_<<2)}else t=0;h[(g=t+(g<<2)|0)>>2]=i,(0|u)>0&&We(t,p,u),h[m+56>>2]=t+(_<<2),h[m+52>>2]=g+4,h[m+48>>2]=t,p&&be(p)}else h[t>>2]=i,h[m+52>>2]=t+4;if((0|(u=h[v+20>>2]))==(t=h[v+24>>2])<<5){if((u+1|0)<0)break s;xe(i=v+16|0,t=u>>>0<=1073741822?(t<<=6)>>>0<(u=u+32&-32)>>>0?u:t:2147483647),u=h[v+20>>2]}h[v+20>>2]=u+1,t=h[v+16>>2]+(u>>>3&536870908)|0,i=h[t>>2],G=t,B=Dr(u)&i,h[G>>2]=B,u=1<<e,g=e>>>5|0,i=e,e=e+1|0}p=e,t=h[v+16>>2],h[(e=t+(g<<2)|0)>>2]=h[e>>2]|u,R=h[m+24>>2]+(i<<2)|0,_=h[m+12>>2],y=h[m>>2],g=h[v>>2],e=f;c:{u:{h:{d:{f:{p:{for(;;){if(-1==(0|e))break p;if(h[(u=(e>>>3&536870908)+g|0)>>2]=h[u>>2]|1<<e,h[R>>2]=e,P&&(h[(e<<2)+y>>2]=i),u=-1,-1!=(0|(e=((M=e+1|0)>>>0)%3|0?M:e-2|0))&&(u=-1,-1!=(0|(e=h[_+(e<<2)>>2]))&&(u=((u=e+1|0)>>>0)%3|0?u:e-2|0)),(0|f)==(0|(e=u)))break}if(-1!=(0|f))break c;e=1;break f}if((f>>>0)%3|0)e=f-1|0;else if(-1==(0|(e=f+2|0)))break d}if(-1!=(0|(e=h[_+(e<<2)>>2]))){if(!((e>>>0)%3|0))break h;e=e-1|0,y=h[m>>2],g=h[v>>2];break u}}y=h[m>>2],g=h[v>>2];break c}if(y=h[m>>2],g=h[v>>2],-1==(0|(e=e+2|0)))break c}for(f=h[m+12>>2];;){if(h[(u=(e>>>3&536870908)+g|0)>>2]=h[u>>2]|1<<e,P&&(h[(e<<2)+y>>2]=i),(e>>>0)%3|0)e=e-1|0;else if(-1==(0|(e=e+2|0)))break c;if(-1==(0|(e=h[f+(e<<2)>>2])))break c;if(-1==(0|(e=e+((e>>>0)%3|0?-1:2)|0)))break}}e=p}if(3==(0|(S=S+1|0)))break}y=h[m>>2],_=h[m+4>>2]}if(!((w=w+1|0)>>>0<(_-y>>2>>>0)/3>>>0))break}break a}pn(),x()}pn(),x()}pn(),x()}t=h[v+16>>2]}if(h[m+44>>2]=0,e=h[v+20>>2])for(i=31&e,f=(e>>>3&536870908)+t|0,e=t,g=0;h[e>>2]>>>A&1||(g=g+1|0,h[m+44>>2]=g),(0|f)!=(0|(e=((u=31==(0|A))<<2)+e|0))|(0|i)!=(0|(A=u?0:A+1|0)););(e=h[v>>2])&&(be(e),t=h[v+16>>2]),t&&be(t),I=v+32|0}I=k+16|0,C||(h[D+8>>2]=0,Ni(m),m=0),I=D+16|0,e=m;break i}Zi(1336),x()}(t=h[o>>2])&&(h[o+4>>2]=t,be(t))}else e=0;if(I=o+16|0,t=h[r+4>>2],h[r+4>>2]=e,t&&(Ni(t),e=h[r+4>>2]),e)if(e=h[l+100>>2],t=h[l+96>>2],a[s+12|0]=0,Pt(r+56|0,(e-t|0)/12|0,s+12|0),(0|(e=h[l+100>>2]))!=(0|(i=h[l+96>>2])))for(;;){if(!(h[h[r+56>>2]+(O>>>3&536870908)>>2]>>>O&1)){if(Ee(r,0,e=b(O,3)),t=h[r+8>>2],i=h[r+12>>2],Ee(r,1,e+1|0),f=h[r+20>>2],u=h[r+24>>2],Ee(r,2,e+2|0),e=(f=u-f>>2)>>>0>(i=(t=i-t|0)>>2)>>>0,i=h[r+36>>2]-h[r+32>>2]>>2>>>0>(e?f:i)>>>0?2:e?1:t?0:-1,h[r+68>>2]<=0||(h[s+12>>2]=h[r+76>>2],h[s+8>>2]=n,ii(s+8|0,s+12|0),(0|(e=h[44+((i<<2)+r|0)>>2]))<0?e=-1:(t=(e>>>0)/3|0,e=h[(h[h[r>>2]+96>>2]+b(t,12)|0)+(e-b(t,3)<<2)>>2]),h[s+12>>2]=e,h[s+8>>2]=n,ii(s+8|0,s+12|0),t=h[r+72>>2],h[r+72>>2]=t+2,1&t&&(h[s+12>>2]=e,h[s+8>>2]=n,ii(s+8|0,s+12|0),h[r+72>>2]=h[r+72>>2]+1)),I=t=I-16|0,h[r+68>>2]=h[r+68>>2]+1,e=b(i,12)+r|0,!((0|(f=h[e+12>>2]-h[e+8>>2]|0))<=0)){e=-1,u=((i=h[44+((i<<2)+r|0)>>2])>>>0)/3|0,p=(v=-1==(0|i))?-1:u,m=h[r+56>>2]+(p>>>3&536870908)|0,h[m>>2]=h[m>>2]|1<<p,h[r+72>>2]=h[r+72>>2]+1,h[t+12>>2]=(0|i)>=0?h[(h[h[r>>2]+96>>2]+b(u,12)|0)+((i>>>0)%3<<2)>>2]:-1,h[t+8>>2]=n,ii(t+8|0,t+12|0);i:if(v)h[t+12>>2]=-1,h[t+8>>2]=n,ii(t+8|0,t+12|0);else{if((0|(p=((p=i+1|0)>>>0)%3|0?p:i-2|0))>=0?(v=(p>>>0)/3|0,p=h[(h[h[r>>2]+96>>2]+b(v,12)|0)+(p-b(v,3)<<2)>>2]):p=-1,h[t+12>>2]=p,h[t+8>>2]=n,ii(t+8|0,t+12|0),(0|(u=i+(i-b(u,3)|0?-1:2)|0))<0)break i;e=(u>>>0)/3|0,e=h[(h[h[r>>2]+96>>2]+b(e,12)|0)+(u-b(e,3)<<2)>>2]}if(h[r+76>>2]=e,h[t+12>>2]=e,h[t+8>>2]=n,e=-1,ii(t+8|0,t+12|0),e=-1!=(0|i)?h[h[h[r+4>>2]+12>>2]+(i<<2)>>2]:e,!(f>>>0<=7))for(v=(i=f>>>2|0)>>>0>1?i:1,f=1;;){i=e,p=(e>>>0)/3|0,e=-1==(0|e)?-1:p,u=h[r+56>>2]+(e>>>3&536870908)|0,h[u>>2]=h[u>>2]|1<<e,h[r+72>>2]=h[r+72>>2]+1,e=-1,e=(0|i)>=0?h[(h[h[r>>2]+96>>2]+b(p,12)|0)+((i>>>0)%3<<2)>>2]:e,h[r+76>>2]=e,h[t+12>>2]=e,h[t+8>>2]=n,ii(t+8|0,t+12|0);i:{r:{if(1&f){if(u=-1,-1==(0|i))break i;if((0|i)!=(0|b(p,3))){e=i-1|0;break r}e=i+2|0}else{if(u=-1,-1==(0|i))break i;e=((e=i+1|0)>>>0)%3|0?e:i-2|0}if(u=-1,-1==(0|e))break i}u=h[h[h[r+4>>2]+12>>2]+(e<<2)>>2]}if(e=u,(0|v)==(0|(f=f+1|0)))break}}I=t+16|0,i=h[l+96>>2],e=h[l+100>>2]}if(V=1,!((O=O+1|0)>>>0<(e-i|0)/12>>>0))break}else V=1;I=s+16|0,V?((e=h[c>>2])&&(h[c+4>>2]=e,be(e)),h[c>>2]=h[n>>2],h[c+4>>2]=h[n+4>>2],h[c+8>>2]=h[n+8>>2],F=h[n+84>>2]):(e=h[n>>2])&&(h[n+4>>2]=e,be(e)),(e=h[n+72>>2])&&be(e),(e=h[n+48>>2])&&(h[n+52>>2]=e,be(e)),(e=h[n+36>>2])&&(h[n+40>>2]=e,be(e)),(e=h[n+24>>2])&&(h[n+28>>2]=e,be(e)),e=h[n+20>>2],h[n+20>>2]=0,e&&Ni(e),I=n+96|0;break e}bn(),x()}return 0|F},Za:function(e,t,i,r){e|=0,i|=0,r|=0;var n=0,a=0,s=0;if(!(p[80+(t|=0)>>2]>65535||(a=h[t+96>>2],t=h[t+100>>2]-a|0,s=(0|(n=b(e=(0|t)/12|0,6)))==(0|i),!t|(0|i)!=(0|n))))for(s=1,n=e>>>0>1?e:1,e=0;t=b(e,6)+r|0,i=b(e,12)+a|0,u[t>>1]=h[i>>2],u[t+2>>1]=h[i+4>>2],u[t+4>>1]=h[i+8>>2],(0|n)!=(0|(e=e+1|0)););return 0|s},_a:function(e,t,i,r){e|=0,i|=0,r|=0;var n,a=0,s=0,o=0;if(n=h[96+(t|=0)>>2],!((0|(t=h[t+100>>2]-n|0))!=(0|i)|!t))for(o=(e=(0|i)/12|0)>>>0>1?e:1,e=0;s=(a=b(e,12))+r|0,a=a+n|0,h[s>>2]=h[a>>2],h[s+4>>2]=h[a+4>>2],h[s+8>>2]=h[a+8>>2],(0|o)!=(0|(e=e+1|0)););return(0|t)==(0|i)|0},$a:function(e,t,i,r){e|=0,i|=0,r|=0;var n=0,s=0,o=0;I=e=I-32|0,n=a[24+(t|=0)|0],s=h[3419],h[e+24>>2]=h[3418],h[e+28>>2]=s,s=h[3417],h[e+16>>2]=h[3416],h[e+20>>2]=s;e:{t:{if(i=Z(t,i,n,e+16|0)){if(h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,t=0,n){if((0|n)<0)break t;o=We(t=mr(n<<=2),e+16|0,n)+n|0}(n=h[r>>2])&&(h[r+4>>2]=n,be(n)),h[r+8>>2]=o,h[r+4>>2]=o,h[r>>2]=t}I=e+32|0;break e}bn(),x()}return 0|i},ab:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s,o=0,l=0,c=0,u=0,f=0,p=0,g=0,v=0,_=0,y=0,A=0;e=0,I=n=I-16|0,s=h[80+(t|=0)>>2],o=a[i+24|0],h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0;e:{t:{if(o){if((0|o)<0)break t;if(e=mr(t=o<<2),h[n>>2]=e,c=e+t|0,h[n+8>>2]=c,f=o-1&1073741823,p=7&o)for(t=e;h[t>>2]=-1073741824,t=t+4|0,(0|p)!=(0|(l=l+1|0)););else t=e;if(f>>>0>=7)for(;h[t+24>>2]=-1073741824,h[t+28>>2]=-1073741824,h[t+16>>2]=-1073741824,h[t+20>>2]=-1073741824,h[t+8>>2]=-1073741824,h[t+12>>2]=-1073741824,h[t>>2]=-1073741824,h[t+4>>2]=-1073741824,(0|c)!=(0|(t=t+32|0)););h[n+4>>2]=c}t=b(o,s),c=h[r>>2],t>>>0>(l=h[r+4>>2]-c>>2)>>>0?ei(r,t-l|0):t>>>0>=l>>>0||(h[r+4>>2]=c+(t<<2));i:if(s)if(u=1,(0|o)<=0)for(t=0;;){if(!Z(i,d[i+84|0]?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],e))break i;if(u=s>>>0>(t=t+1|0)>>>0,(0|t)==(0|s))break}else{for(y=-4&o,p=3&o,l=0,A=o-1>>>0<3;;){if(Z(i,d[i+84|0]?g:h[h[i+68>>2]+(g<<2)>>2],a[i+24|0],e)){if(_=h[r>>2],v=0,o=h[n>>2],t=0,u=0,!A)for(;f=t<<2,m[(c=_+(l<<2)|0)>>2]=m[f+o>>2],m[c+4>>2]=m[(4|f)+o>>2],m[c+8>>2]=m[(8|f)+o>>2],m[c+12>>2]=m[(12|f)+o>>2],t=t+4|0,l=l+4|0,(0|y)!=(0|(u=u+4|0)););if(p)for(;m[_+(l<<2)>>2]=m[(t<<2)+o>>2],t=t+1|0,l=l+1|0,(0|p)!=(0|(v=v+1|0)););if(u=(g=g+1|0)>>>0<s>>>0,(0|s)!=(0|g))continue}break}e=h[n>>2]}e&&be(e),I=n+16|0,e=1&(-1^u);break e}bn(),x()}return 0|e},bb:Ue,cb:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s,o,l=0,c=0,u=0,f=0;I=n=I-16|0,s=h[80+(t|=0)>>2],o=d[i+24|0],t=b(s,l=o<<24>>24);e:{t:{e=h[i+28>>2];i:if(!d[i+84|0]|1!=(0|e)&2!=(0|e)){e=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0;r:{n:{if(l){if((0|l)<0)break t;if(c=mr(l),h[n>>2]=c,xt(c,0,l),ai(r,t),s)break n;t=1;break r}if(ai(r,t),t=1,!s)break i;for(;te(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],0)&&(t=s>>>0>(e=e+1|0)>>>0,(0|e)!=(0|s)););t^=1;break i}u=-2&(t=l-1|0),f=1&t,t=1,l=0;n:{for(;;){if(c=h[n>>2],!te(i,d[i+84|0]?l:h[h[i+68>>2]+(l<<2)>>2],a[i+24|0],c))break n;a[h[r>>2]+e|0]=d[0|c],t=1,e=e+1|0,c=0;a:{switch(o-1|0){default:for(;a[h[r>>2]+e|0]=d[h[n>>2]+t|0],a[1+(h[r>>2]+e|0)|0]=d[1+(h[n>>2]+t|0)|0],t=t+2|0,e=e+2|0,(0|u)!=(0|(c=c+2|0)););break;case 0:break a;case 1:}f&&(a[h[r>>2]+e|0]=d[h[n>>2]+t|0],e=e+1|0)}if(t=s>>>0>(l=l+1|0)>>>0,(0|l)==(0|s))break}c=h[n>>2]}if(t=!t,!c)break i}be(c)}else{if(l=h[i+48>>2],i=h[h[i>>2]>>2],e=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,t){if((0|t)<0)break t;e=We(c=mr(t),i+l|0,t)+t|0}(t=h[r>>2])&&(h[r+4>>2]=t,be(t)),h[r+8>>2]=e,h[r+4>>2]=e,h[r>>2]=c,t=1}I=n+16|0,e=1&t;break e}bn(),x()}return 0|e},db:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s,o,l=0,c=0,u=0,f=0;I=n=I-16|0,s=h[80+(t|=0)>>2],o=d[i+24|0],t=b(s,l=o<<24>>24);e:{t:{e=h[i+28>>2];i:if(!d[i+84|0]|1!=(0|e)&2!=(0|e)){e=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0;r:{n:{if(l){if((0|l)<0)break t;if(c=mr(l),h[n>>2]=c,xt(c,0,l),ai(r,t),s)break n;t=1;break r}if(ai(r,t),t=1,!s)break i;for(;ie(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],0)&&(t=s>>>0>(e=e+1|0)>>>0,(0|e)!=(0|s)););t^=1;break i}u=-2&(t=l-1|0),f=1&t,t=1,l=0;n:{for(;;){if(c=h[n>>2],!ie(i,d[i+84|0]?l:h[h[i+68>>2]+(l<<2)>>2],a[i+24|0],c))break n;a[h[r>>2]+e|0]=d[0|c],t=1,e=e+1|0,c=0;a:{switch(o-1|0){default:for(;a[h[r>>2]+e|0]=d[h[n>>2]+t|0],a[1+(h[r>>2]+e|0)|0]=d[1+(h[n>>2]+t|0)|0],t=t+2|0,e=e+2|0,(0|u)!=(0|(c=c+2|0)););break;case 0:break a;case 1:}f&&(a[h[r>>2]+e|0]=d[h[n>>2]+t|0],e=e+1|0)}if(t=s>>>0>(l=l+1|0)>>>0,(0|l)==(0|s))break}c=h[n>>2]}if(t=!t,!c)break i}be(c)}else{if(l=h[i+48>>2],i=h[h[i>>2]>>2],e=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,t){if((0|t)<0)break t;e=We(c=mr(t),i+l|0,t)+t|0}(t=h[r>>2])&&(h[r+4>>2]=t,be(t)),h[r+8>>2]=e,h[r+4>>2]=e,h[r>>2]=c,t=1}I=n+16|0,e=1&t;break e}bn(),x()}return 0|e},eb:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s=0,o=0,l=0,c=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0;I=n=I-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=b(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|3!=(0|t)&4!=(0|t)){if(h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,e){if((0|e)<0)break t;l=mr(t=e<<1),h[n>>2]=l,o=t+l|0,h[n+8>>2]=o,xt(l,0,t),h[n+4>>2]=o}o=h[r>>2],(t=h[r+4>>2]-o>>1)>>>0<s>>>0?ni(r,s-t|0):t>>>0<=s>>>0||(h[r+4>>2]=o+(s<<1));i:if(c)if(e){for(A=-4&e,_=3&e,E=e-1>>>0<3,t=1,s=0;;){if(le(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(y=h[r>>2],v=0,o=h[n>>2],e=0,t=0,!E)for(;g=e<<1,u[(m=(p<<1)+y|0)>>1]=f[o+g>>1],u[m+2>>1]=f[o+(2|g)>>1],u[m+4>>1]=f[o+(4|g)>>1],u[m+6>>1]=f[o+(6|g)>>1],e=e+4|0,p=p+4|0,(0|A)!=(0|(t=t+4|0)););if(_)for(;u[(p<<1)+y>>1]=f[o+(e<<1)>>1],e=e+1|0,p=p+1|0,(0|(v=v+1|0))!=(0|_););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[n>>2]}else for(e=0,t=1;;){if(!le(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&be(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=0,e=s<<1){if((0|e)<0)break t;p=(t=We(i=mr(e),l+c|0,e))+e|0,t=t+(e>>1<<1)|0}(e=h[r>>2])&&(h[r+4>>2]=e,be(e)),h[r+8>>2]=t,h[r+4>>2]=p,h[r>>2]=i,e=1}I=n+16|0,e&=1;break e}bn(),x()}return 0|e},fb:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s=0,o=0,l=0,c=0,p=0,m=0,g=0,v=0,_=0,y=0,A=0,E=0;I=n=I-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=b(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|3!=(0|t)&4!=(0|t)){if(h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,e){if((0|e)<0)break t;l=mr(t=e<<1),h[n>>2]=l,o=t+l|0,h[n+8>>2]=o,xt(l,0,t),h[n+4>>2]=o}o=h[r>>2],(t=h[r+4>>2]-o>>1)>>>0<s>>>0?ni(r,s-t|0):t>>>0<=s>>>0||(h[r+4>>2]=o+(s<<1));i:if(c)if(e){for(A=-4&e,_=3&e,E=e-1>>>0<3,t=1,s=0;;){if(ce(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(y=h[r>>2],v=0,o=h[n>>2],e=0,t=0,!E)for(;g=e<<1,u[(m=(p<<1)+y|0)>>1]=f[o+g>>1],u[m+2>>1]=f[o+(2|g)>>1],u[m+4>>1]=f[o+(4|g)>>1],u[m+6>>1]=f[o+(6|g)>>1],e=e+4|0,p=p+4|0,(0|A)!=(0|(t=t+4|0)););if(_)for(;u[(p<<1)+y>>1]=f[o+(e<<1)>>1],e=e+1|0,p=p+1|0,(0|(v=v+1|0))!=(0|_););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[n>>2]}else for(e=0,t=1;;){if(!ce(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&be(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=0,e=s<<1){if((0|e)<0)break t;p=(t=We(i=mr(e),l+c|0,e))+e|0,t=t+(e>>1<<1)|0}(e=h[r>>2])&&(h[r+4>>2]=e,be(e)),h[r+8>>2]=t,h[r+4>>2]=p,h[r>>2]=i,e=1}I=n+16|0,e&=1;break e}bn(),x()}return 0|e},gb:Ue,hb:function(e,t,i,r){e|=0,i|=0,r|=0;var n,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,_=0,y=0;I=n=I-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=b(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|5!=(0|t)&6!=(0|t)){if(h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,e){if((0|e)<0)break t;l=mr(t=e<<2),h[n>>2]=l,o=t+l|0,h[n+8>>2]=o,xt(l,0,t),h[n+4>>2]=o}o=h[r>>2],(t=h[r+4>>2]-o>>2)>>>0<s>>>0?ei(r,s-t|0):t>>>0<=s>>>0||(h[r+4>>2]=o+(s<<2));i:if(c)if(e){for(_=-4&e,g=3&e,y=e-1>>>0<3,t=1,s=0;;){if(de(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(v=h[r>>2],m=0,o=h[n>>2],e=0,t=0,!y)for(;p=e<<2,h[(f=(u<<2)+v|0)>>2]=h[o+p>>2],h[f+4>>2]=h[o+(4|p)>>2],h[f+8>>2]=h[o+(8|p)>>2],h[f+12>>2]=h[o+(12|p)>>2],e=e+4|0,u=u+4|0,(0|_)!=(0|(t=t+4|0)););if(g)for(;h[(u<<2)+v>>2]=h[o+(e<<2)>>2],e=e+1|0,u=u+1|0,(0|(m=m+1|0))!=(0|g););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[n>>2]}else for(e=0,t=1;;){if(!de(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&be(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=0,e=s<<2){if((0|e)<0)break t;u=(t=We(i=mr(e),l+c|0,e))+e|0,t=t+(e>>2<<2)|0}(e=h[r>>2])&&(h[r+4>>2]=e,be(e)),h[r+8>>2]=t,h[r+4>>2]=u,h[r>>2]=i,e=1}I=n+16|0,e&=1;break e}bn(),x()}return 0|e},ib:function(e,t,i,r,n,s){e|=0,t|=0,i|=0,n|=0,s|=0;var o=0,l=0,c=0,p=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0;e:{t:{i:{r:{n:switch((r|=0)-1|0){case 0:e=0,I=_=I-16|0,p=h[t+80>>2],o=a[i+24|0];a:if((0|b(p,o))==(0|n))if((t=1!=h[i+28>>2])|!(e=d[i+84|0])){if(r=0,h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,o){if((0|o)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,o)}s:{o:if(p){if(t){if(!o)for(t=0,r=1;;){if(!te(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(r=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(v=-4&o,g=3&o,t=0,y=o-1>>>0<3,r=1;;){if(!te(i,255&e?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,n=0,!y)for(;a[0|(o=t+s|0)]=d[e+l|0],a[o+1|0]=d[(1|e)+l|0],a[o+2|0]=d[(2|e)+l|0],a[o+3|0]=d[(3|e)+l|0],e=e+4|0,t=t+4|0,(0|v)!=(0|(n=n+4|0)););if(g)for(;a[t+s|0]=d[e+l|0],e=e+1|0,t=t+1|0,(0|g)!=(0|(r=r+1|0)););if((0|p)==(0|(c=c+1|0)))break;r=c>>>0<p>>>0,e=d[i+84|0]}e=c>>>0>=p>>>0;break s}if(o)for(y=-4&o,v=3&o,t=0,A=o-1>>>0<3;;){if(n=h[h[i>>2]>>2],E=h[i+40>>2],o=We(l,n+(e=h[i+48>>2]+Xi(E,h[i+44>>2],255&e?r:h[h[i+68>>2]+(r<<2)>>2],0)|0)|0,E),n=0,e=0,c=0,!A)for(;a[0|(g=t+s|0)]=d[e+o|0],a[g+1|0]=d[o+(1|e)|0],a[g+2|0]=d[o+(2|e)|0],a[g+3|0]=d[o+(3|e)|0],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;a[t+s|0]=d[e+o|0],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break s;e=d[i+84|0]}if(v=h[i>>2],n=h[i+48>>2],A=h[i+68>>2],s=h[i+44>>2],E=i=h[i+40>>2],t=0,1!=(0|p))for(w=-2&p,T=255&e;o=1|t,g=We(l,(y=h[v>>2])+(g=Xi(i,s,T?t:h[A+(t<<2)>>2],0)+n|0)|0,E),S=h[v>>2],T||(o=h[A+(o<<2)>>2]),We(g,(o=Xi(i,s,o,0)+n|0)+S|0,E),t=t+2|0,(0|w)!=(0|(c=c+2|0)););if(!(1&p))break o;c=h[v>>2],255&e||(t=h[A+(t<<2)>>2]),We(l,(e=Xi(i,s,t,0)+n|0)+c|0,E)}if(e=1^r,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break i;case 2:e=0,I=_=I-16|0,o=(r=a[i+24|0])<<1,p=h[t+80>>2];a:if((0|b(o,p))==(0|n))if((t=3!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,r){if((0|r)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,r<<1)}s:{o:if(p){if(t){if(!r)for(t=0,c=1;;){if(!le(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&r,v=3&r,t=0,A=r-1>>>0<3,c=1,r=0;;){if(!le(i,255&e?r:h[h[i+68>>2]+(r<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,c=0,!A)for(;g=e<<1,u[(o=(t<<1)+s|0)>>1]=f[g+l>>1],u[o+2>>1]=f[(2|g)+l>>1],u[o+4>>1]=f[(4|g)+l>>1],u[o+6>>1]=f[(6|g)+l>>1],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;u[(t<<1)+s>>1]=f[(e<<1)+l>>1],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if((0|p)==(0|(r=r+1|0)))break;c=r>>>0<p>>>0,e=d[i+84|0]}e=r>>>0>=p>>>0;break s}if(y=h[i>>2],n=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],r){for(M=-4&r,A=3&r,t=0,R=255&e,P=r-1>>>0<3,r=0;;){if(v=We(l,(i=h[y>>2])+(e=Xi(g,o,R?r:h[E+(r<<2)>>2],0)+n|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<1,u[(w=(t<<1)+s|0)>>1]=f[S+v>>1],u[w+2>>1]=f[v+(2|S)>>1],u[w+4>>1]=f[v+(4|S)>>1],u[w+6>>1]=f[v+(6|S)>>1],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;u[(t<<1)+s>>1]=f[v+(e<<1)>>1],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,v=255&e,r=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Xi(g,o,v?t:h[E+(t<<2)>>2],0)+n|0)|0,T),S=h[y>>2],v||(i=h[E+(i<<2)>>2]),We(s,(i=Xi(g,o,i,0)+n|0)+S|0,T),t=t+2|0,(0|w)!=(0|(r=r+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Xi(g,o,t,0)+n|0)+i|0,T)}if(e=!c,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break t;case 4:e=0,I=_=I-16|0,o=(r=a[i+24|0])<<2,p=h[t+80>>2];a:if((0|b(o,p))==(0|n))if((t=5!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,r){if((0|r)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,r<<2)}s:{o:if(p){if(t){if(!r)for(t=0,c=1;;){if(!he(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&r,v=3&r,t=0,A=r-1>>>0<3,c=1,r=0;;){if(!he(i,255&e?r:h[h[i+68>>2]+(r<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,c=0,!A)for(;g=e<<2,h[(o=(t<<2)+s|0)>>2]=h[g+l>>2],h[o+4>>2]=h[(4|g)+l>>2],h[o+8>>2]=h[(8|g)+l>>2],h[o+12>>2]=h[(12|g)+l>>2],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;h[(t<<2)+s>>2]=h[(e<<2)+l>>2],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if((0|p)==(0|(r=r+1|0)))break;c=r>>>0<p>>>0,e=d[i+84|0]}e=r>>>0>=p>>>0;break s}if(y=h[i>>2],n=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],r){for(M=-4&r,A=3&r,t=0,R=255&e,P=r-1>>>0<3,r=0;;){if(v=We(l,(i=h[y>>2])+(e=Xi(g,o,R?r:h[E+(r<<2)>>2],0)+n|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<2,h[(w=(t<<2)+s|0)>>2]=h[S+v>>2],h[w+4>>2]=h[v+(4|S)>>2],h[w+8>>2]=h[v+(8|S)>>2],h[w+12>>2]=h[v+(12|S)>>2],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;h[(t<<2)+s>>2]=h[v+(e<<2)>>2],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,v=255&e,r=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Xi(g,o,v?t:h[E+(t<<2)>>2],0)+n|0)|0,T),S=h[y>>2],v||(i=h[E+(i<<2)>>2]),We(s,(i=Xi(g,o,i,0)+n|0)+S|0,T),t=t+2|0,(0|w)!=(0|(r=r+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Xi(g,o,t,0)+n|0)+i|0,T)}if(e=!c,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break t;case 1:e=0,I=_=I-16|0,p=h[t+80>>2],o=a[i+24|0];a:if((0|b(p,o))==(0|n))if((t=2!=h[i+28>>2])|!(e=d[i+84|0])){if(r=0,h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,o){if((0|o)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,o)}s:{o:if(p){if(t){if(!o)for(t=0,r=1;;){if(!ie(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(r=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(v=-4&o,g=3&o,t=0,y=o-1>>>0<3,r=1;;){if(!ie(i,255&e?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,n=0,!y)for(;a[0|(o=t+s|0)]=d[e+l|0],a[o+1|0]=d[(1|e)+l|0],a[o+2|0]=d[(2|e)+l|0],a[o+3|0]=d[(3|e)+l|0],e=e+4|0,t=t+4|0,(0|v)!=(0|(n=n+4|0)););if(g)for(;a[t+s|0]=d[e+l|0],e=e+1|0,t=t+1|0,(0|g)!=(0|(r=r+1|0)););if((0|p)==(0|(c=c+1|0)))break;r=c>>>0<p>>>0,e=d[i+84|0]}e=c>>>0>=p>>>0;break s}if(o)for(y=-4&o,v=3&o,t=0,A=o-1>>>0<3;;){if(n=h[h[i>>2]>>2],E=h[i+40>>2],o=We(l,n+(e=h[i+48>>2]+Xi(E,h[i+44>>2],255&e?r:h[h[i+68>>2]+(r<<2)>>2],0)|0)|0,E),n=0,e=0,c=0,!A)for(;a[0|(g=t+s|0)]=d[e+o|0],a[g+1|0]=d[o+(1|e)|0],a[g+2|0]=d[o+(2|e)|0],a[g+3|0]=d[o+(3|e)|0],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;a[t+s|0]=d[e+o|0],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break s;e=d[i+84|0]}if(v=h[i>>2],n=h[i+48>>2],A=h[i+68>>2],s=h[i+44>>2],E=i=h[i+40>>2],t=0,1!=(0|p))for(w=-2&p,T=255&e;o=1|t,g=We(l,(y=h[v>>2])+(g=Xi(i,s,T?t:h[A+(t<<2)>>2],0)+n|0)|0,E),S=h[v>>2],T||(o=h[A+(o<<2)>>2]),We(g,(o=Xi(i,s,o,0)+n|0)+S|0,E),t=t+2|0,(0|w)!=(0|(c=c+2|0)););if(!(1&p))break o;c=h[v>>2],255&e||(t=h[A+(t<<2)>>2]),We(l,(e=Xi(i,s,t,0)+n|0)+c|0,E)}if(e=1^r,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break i;case 3:e=0,I=_=I-16|0,o=(r=a[i+24|0])<<1,p=h[t+80>>2];a:if((0|b(o,p))==(0|n))if((t=4!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,r){if((0|r)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,r<<1)}s:{o:if(p){if(t){if(!r)for(t=0,c=1;;){if(!ce(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&r,v=3&r,t=0,A=r-1>>>0<3,c=1,r=0;;){if(!ce(i,255&e?r:h[h[i+68>>2]+(r<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,c=0,!A)for(;g=e<<1,u[(o=(t<<1)+s|0)>>1]=f[g+l>>1],u[o+2>>1]=f[(2|g)+l>>1],u[o+4>>1]=f[(4|g)+l>>1],u[o+6>>1]=f[(6|g)+l>>1],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;u[(t<<1)+s>>1]=f[(e<<1)+l>>1],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if((0|p)==(0|(r=r+1|0)))break;c=r>>>0<p>>>0,e=d[i+84|0]}e=r>>>0>=p>>>0;break s}if(y=h[i>>2],n=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],r){for(M=-4&r,A=3&r,t=0,R=255&e,P=r-1>>>0<3,r=0;;){if(v=We(l,(i=h[y>>2])+(e=Xi(g,o,R?r:h[E+(r<<2)>>2],0)+n|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<1,u[(w=(t<<1)+s|0)>>1]=f[S+v>>1],u[w+2>>1]=f[v+(2|S)>>1],u[w+4>>1]=f[v+(4|S)>>1],u[w+6>>1]=f[v+(6|S)>>1],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;u[(t<<1)+s>>1]=f[v+(e<<1)>>1],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,v=255&e,r=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Xi(g,o,v?t:h[E+(t<<2)>>2],0)+n|0)|0,T),S=h[y>>2],v||(i=h[E+(i<<2)>>2]),We(s,(i=Xi(g,o,i,0)+n|0)+S|0,T),t=t+2|0,(0|w)!=(0|(r=r+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Xi(g,o,t,0)+n|0)+i|0,T)}if(e=!c,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break t;case 5:e=0,I=_=I-16|0,o=(r=a[i+24|0])<<2,p=h[t+80>>2];a:if((0|b(o,p))==(0|n))if((t=6!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,r){if((0|r)<0)break r;l=mr(o),h[_>>2]=l,xt(l,0,r<<2)}s:{o:if(p){if(t){if(!r)for(t=0,c=1;;){if(!de(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&r,v=3&r,t=0,A=r-1>>>0<3,c=1,r=0;;){if(!de(i,255&e?r:h[h[i+68>>2]+(r<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,c=0,!A)for(;g=e<<2,h[(o=(t<<2)+s|0)>>2]=h[g+l>>2],h[o+4>>2]=h[(4|g)+l>>2],h[o+8>>2]=h[(8|g)+l>>2],h[o+12>>2]=h[(12|g)+l>>2],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(v)for(;h[(t<<2)+s>>2]=h[(e<<2)+l>>2],e=e+1|0,t=t+1|0,(0|v)!=(0|(n=n+1|0)););if((0|p)==(0|(r=r+1|0)))break;c=r>>>0<p>>>0,e=d[i+84|0]}e=r>>>0>=p>>>0;break s}if(y=h[i>>2],n=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],r){for(M=-4&r,A=3&r,t=0,R=255&e,P=r-1>>>0<3,r=0;;){if(v=We(l,(i=h[y>>2])+(e=Xi(g,o,R?r:h[E+(r<<2)>>2],0)+n|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<2,h[(w=(t<<2)+s|0)>>2]=h[S+v>>2],h[w+4>>2]=h[v+(4|S)>>2],h[w+8>>2]=h[v+(8|S)>>2],h[w+12>>2]=h[v+(12|S)>>2],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;h[(t<<2)+s>>2]=h[v+(e<<2)>>2],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(r=r+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,v=255&e,r=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Xi(g,o,v?t:h[E+(t<<2)>>2],0)+n|0)|0,T),S=h[y>>2],v||(i=h[E+(i<<2)>>2]),We(s,(i=Xi(g,o,i,0)+n|0)+S|0,T),t=t+2|0,(0|w)!=(0|(r=r+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Xi(g,o,t,0)+n|0)+i|0,T)}if(e=!c,!l)break a}be(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,n),e=1;break t;case 8:break n;default:break e}e=0,I=p=I-16|0,r=(c=a[i+24|0])<<2,g=h[t+80>>2];n:if((0|b(r,g))==(0|n)){n=h[i+28>>2],h[p+8>>2]=0,h[p>>2]=0,h[p+4>>2]=0,t=0;a:{s:{o:{if(c){if((0|c)<0)break o;if(t=mr(r),h[p>>2]=t,o=(c<<2)+t|0,h[p+8>>2]=o,_=1+((r=r-4|0)>>>2|0)&7)for(e=t;h[e>>2]=-1073741824,e=e+4|0,(0|_)!=(0|(l=l+1|0)););else e=t;if(!(r>>>0<28))for(;h[e+24>>2]=-1073741824,h[e+28>>2]=-1073741824,h[e+16>>2]=-1073741824,h[e+20>>2]=-1073741824,h[e+8>>2]=-1073741824,h[e+12>>2]=-1073741824,h[e>>2]=-1073741824,h[e+4>>2]=-1073741824,(0|o)!=(0|(e=e+32|0)););}if(!g)break s;if(9==(0|n)){if(e=0,y=h[i>>2],r=h[i+48>>2],E=h[i+68>>2],T=d[i+84|0],n=h[i+44>>2],w=o=h[i+40>>2],(0|c)<=0){if(1!=(0|g))for(c=-2&g,i=0;s=1|e,l=We(t,(_=h[y>>2])+(l=Xi(o,n,T?e:h[E+(e<<2)>>2],0)+r|0)|0,w),_=h[y>>2],T||(s=h[E+(s<<2)>>2]),We(l,(s=Xi(o,n,s,0)+r|0)+_|0,w),e=e+2|0,(0|c)!=(0|(i=i+2|0)););if(!(1&g))break s;i=h[y>>2],T||(e=h[E+(e<<2)>>2]),We(t,(e=Xi(o,n,e,0)+r|0)+i|0,w);break s}for(R=-4&c,A=3&c,l=0,P=c-1>>>0<3,c=0;;){if(i=We(t,(i=h[y>>2])+(e=Xi(o,n,T?c:h[E+(c<<2)>>2],0)+r|0)|0,w),_=0,e=0,M=0,!P)for(;S=e<<2,m[(v=(l<<2)+s|0)>>2]=m[S+i>>2],m[v+4>>2]=m[i+(4|S)>>2],m[v+8>>2]=m[i+(8|S)>>2],m[v+12>>2]=m[i+(12|S)>>2],e=e+4|0,l=l+4|0,(0|R)!=(0|(M=M+4|0)););if(A)for(;m[(l<<2)+s>>2]=m[i+(e<<2)>>2],e=e+1|0,l=l+1|0,(0|A)!=(0|(_=_+1|0)););if(e=1,(0|g)==(0|(c=c+1|0)))break}break a}if(v=1,(0|c)<=0){for(e=0;;){if(!Z(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],t))break s;if(v=g>>>0>(e=e+1|0)>>>0,(0|e)==(0|g))break}break s}for(y=-4&c,o=3&c,l=0,A=c-1>>>0<3,c=0;;){if(!Z(i,d[i+84|0]?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],t))break s;if(v=0,e=0,_=0,!A)for(;n=e<<2,m[(r=(l<<2)+s|0)>>2]=m[n+t>>2],m[r+4>>2]=m[(4|n)+t>>2],m[r+8>>2]=m[(8|n)+t>>2],m[r+12>>2]=m[(12|n)+t>>2],e=e+4|0,l=l+4|0,(0|y)!=(0|(_=_+4|0)););if(o)for(;m[(l<<2)+s>>2]=m[(e<<2)+t>>2],e=e+1|0,l=l+1|0,(0|o)!=(0|(v=v+1|0)););if(v=g>>>0>(c=c+1|0)>>>0,(0|c)==(0|g))break}e=c>>>0>=g>>>0;break a}bn(),x()}if(e=1^v,!t)break n}be(t)}I=p+16|0,l=1&e;break e}bn(),x()}I=_+16|0,l=1&e;break e}I=_+16|0,l=1&e}return 0|l},jb:function(e,t){e|=0,t|=0;var i,r=0,n=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0;I=i=I-16|0,h[i+12>>2]=t,t=mr(32),h[i>>2]=t,h[i+4>>2]=24,h[i+8>>2]=-2147483616,a[t+24|0]=0,r=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,n=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[t+16|0]=n,a[t+17|0]=n>>>8,a[t+18|0]=n>>>16,a[t+19|0]=n>>>24,a[t+20|0]=r,a[t+21|0]=r>>>8,a[t+22|0]=r>>>16,a[t+23|0]=r>>>24,r=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,n=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=r,a[t+13|0]=r>>>8,a[t+14|0]=r>>>16,a[t+15|0]=r>>>24,r=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,n=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=r,a[t+5|0]=r>>>8,a[t+6|0]=r>>>16,a[t+7|0]=r>>>24,I=c=I-48|0,m=e;e:{if(e=h[(r=e+16|0)>>2]){for(n=h[i+12>>2],t=r;t=(o=(0|n)>h[e+16>>2])?t:e,e=h[(o<<2)+e>>2];);if((0|t)!=(0|r)&&(0|n)>=h[t+16>>2])break e}if(h[4+(e=w=c+24|0)>>2]=0,h[e+8>>2]=0,S=e+4|0,h[e>>2]=S,e=h[i+12>>2],h[(n=c+16|0)>>2]=0,h[n+4>>2]=0,h[c+8>>2]=e,h[c+12>>2]=n,(0|S)!=(0|(t=h[w>>2])))for(g=c+8|4;;){o=t,l=t+16|0,I=y=I-16|0,u=y+12|0,e=y+8|0;t:{i:{r:{n:{a:{s:{o:if((0|(A=g+4|0))!=(0|n))if(s=(t=d[n+27|0])<<24>>24<0,f=(0|(T=(b=d[l+11|0])<<24>>24))<0,_=(v=(t=s?h[n+20>>2]:t)>>>0<(b=f?h[l+4>>2]:b)>>>0)?t:b){if(E=n+16|0,!(E=xi(f=f?h[l>>2]:l,s=s?h[E>>2]:E,_))){if(t>>>0>b>>>0)break o;break s}if((0|E)>=0)break s}else if(t>>>0<=b>>>0)break a;s=h[n>>2];o:{l:if((0|(e=n))!=h[g>>2]){if(s)for(t=s;e=t,t=h[t+4>>2];);else{if(e=n+8|0,(0|n)==h[h[n+8>>2]>>2])for(;e=(t=h[e>>2])+8|0,(0|t)==h[h[t+8>>2]>>2];);e=h[e>>2]}if(t=(f=d[l+11|0])<<24>>24<0,b=(v=d[e+27|0])<<24>>24<0,!((_=(f=t?h[l+4>>2]:f)>>>0<(v=b?h[e+20>>2]:v)>>>0?f:v)&&(A=e+16|0,t=xi(b?h[A>>2]:A,t?h[l>>2]:l,_)))){if(f>>>0>v>>>0)break l;break o}if((0|t)>=0)break o}if(!s){h[u>>2]=n,e=n;break t}h[u>>2]=e,e=e+4|0;break t}e=Nt(g,u,l);break t}if(t=xi(s,f,_))break n}if(v)break r;break i}if((0|t)>=0)break i}if(s=h[n+4>>2])for(t=s;e=t,t=h[t>>2];);else if(e=h[n+8>>2],(0|n)!=h[e>>2])for(t=n+8|0;t=(f=h[t>>2])+8|0,e=h[f+8>>2],(0|f)!=h[e>>2];);r:{n:if((0|e)!=(0|A)){if(!((v=(f=(t=(f=d[e+27|0])<<24>>24<0)?h[e+20>>2]:f)>>>0<b>>>0?f:b)&&(_=e+16|0,t=xi((0|T)<0?h[l>>2]:l,t?h[_>>2]:_,v)))){if(f>>>0>b>>>0)break n;break r}if((0|t)>=0)break r}if(!s){h[u>>2]=n,e=n+4|0;break t}h[u>>2]=e;break t}e=Nt(g,u,l);break t}h[u>>2]=n,h[e>>2]=n}(e=h[(t=e)>>2])?t=0:(s=(e=mr(40))+16|0,a[l+11|0]>=0?(u=h[l+4>>2],h[s>>2]=h[l>>2],h[s+4>>2]=u,h[s+8>>2]=h[l+8>>2]):Vi(s,h[l>>2],h[l+4>>2]),s=e+28|0,a[l+23|0]>=0?(u=h[l+16>>2],h[s>>2]=h[l+12>>2],h[s+4>>2]=u,h[s+8>>2]=h[l+20>>2]):Vi(s,h[l+12>>2],h[l+16>>2]),h[e+8>>2]=h[y+12>>2],h[e>>2]=0,h[e+4>>2]=0,h[t>>2]=e,(s=h[h[g>>2]>>2])?(h[g>>2]=s,t=h[t>>2]):t=e,Je(h[g+4>>2],t),h[g+8>>2]=h[g+8>>2]+1,t=1),a[c+44|0]=t,h[c+40>>2]=e,I=y+16|0;t:if(e=h[o+4>>2])for(;e=h[(t=e)>>2];);else{if(t=h[o+8>>2],(0|o)==h[t>>2])break t;for(e=o+8|0;e=(o=h[e>>2])+8|0,t=h[o+8>>2],(0|o)!=h[t>>2];);}if((0|t)==(0|S))break}t:{if(e=h[r>>2])for(r=m+16|0,o=h[c+8>>2];;){i:{if((0|(t=h[e+16>>2]))>(0|o)){if(t=h[e>>2])break i;r=e;break t}if((0|t)>=(0|o))break t;if(r=e+4|0,!(t=h[e+4>>2]))break t;e=r}r=e,e=t}e=r}(t=h[r>>2])||(t=mr(32),h[t+16>>2]=h[c+8>>2],h[t+20>>2]=h[c+12>>2],o=t+24|0,s=h[c+16>>2],h[o>>2]=s,l=h[c+20>>2],h[t+28>>2]=l,l?(h[s+8>>2]=o,h[c+16>>2]=0,h[c+20>>2]=0,h[c+12>>2]=n):h[t+20>>2]=o,h[t+8>>2]=e,h[t>>2]=0,h[t+4>>2]=0,h[r>>2]=t,(e=h[h[m+12>>2]>>2])?(h[m+12>>2]=e,e=h[r>>2]):e=t,Je(h[m+16>>2],e),h[m+20>>2]=h[m+20>>2]+1),gr(c+8|4,h[c+16>>2]),gr(w,h[w+4>>2])}if(I=n=(I=m=(I=c+48|0)-48|0)-32|0,(0|(o=(r=l=n+32|0)-(e=n+21|0)|0))<=9&(0|o)<(1-(p[3720]>1)|0)?(h[n+8>>2]=r,r=61):(a[0|e]=49,h[n+8>>2]=e+1,r=0),h[n+12>>2]=r,r=m+8|0,I=s=(I=c=I-16|0)-16|0,(o=(g=h[n+8>>2])-e|0)>>>0<=4294967279){for(o>>>0<=10?(a[r+11|0]=o,n=r):(n=o>>>0>=11?11==(0|(n=(u=o+16&-16)-1|0))?u:n:10,n=mr(u=n+1|0),h[r>>2]=n,h[r+8>>2]=-2147483648|u,h[r+4>>2]=o);(0|e)!=(0|g);)a[0|n]=d[0|e],n=n+1|0,e=e+1|0;a[s+15|0]=0,a[0|n]=d[s+15|0],I=s+16|0}else mn(),x();I=c+16|0,I=l,h[m+32>>2]=i;e:{t:{if(e=h[4+(n=t+20|0)>>2])for(s=(r=(t=d[i+11|0])<<24>>24<0)?h[i>>2]:i,o=r?h[i+4>>2]:t,t=n+4|0;;){i:{r:{n:{a:{s:{o:if(g=(c=(r=(l=(r=d[e+27|0])<<24>>24<0)?h[e+20>>2]:r)>>>0<o>>>0)?r:o){if(u=e+16|0,!(u=xi(s,l=l?h[u>>2]:u,g))){if(r>>>0>o>>>0)break o;break s}if((0|u)>=0)break s}else if(r>>>0<=o>>>0)break a;if(r=h[e>>2])break i;break t}if(r=xi(l,s,g))break n}if(c)break r;break e}if((0|r)>=0)break e}if(t=e+4|0,!(r=h[e+4>>2]))break e;e=t}t=e,e=r}e=n+4|0}t=e}(r=h[t>>2])?e=0:(s=(r=mr(40))+16|0,o=h[m+32>>2],a[o+11|0]>=0?(l=h[o+4>>2],h[s>>2]=h[o>>2],h[s+4>>2]=l,h[s+8>>2]=h[o+8>>2]):Vi(s,h[o>>2],h[o+4>>2]),h[r+8>>2]=e,h[r>>2]=0,h[r+4>>2]=0,h[r+36>>2]=0,h[r+28>>2]=0,h[r+32>>2]=0,h[t>>2]=r,(e=h[h[n>>2]>>2])?(h[n>>2]=e,e=h[t>>2]):e=r,Je(h[n+4>>2],e),h[n+8>>2]=h[n+8>>2]+1,e=1),a[m+44|0]=e,h[m+40>>2]=r,e=h[m+40>>2],a[e+39|0]<0&&be(h[e+28>>2]),t=h[m+12>>2],h[e+28>>2]=h[m+8>>2],h[e+32>>2]=t,h[e+36>>2]=h[m+16>>2],I=m+48|0,a[i+11|0]<0&&be(h[i>>2]),I=i+16|0},kb:function(e,t){e|=0;var i,r,n=0,s=0;s=8+(r=I-32|0)|0,I=i=(I=r)-80|0,e=h[36+(t|=0)>>2],h[i+72>>2]=h[t+32>>2],h[i+76>>2]=e,n=h[t+28>>2],h[(e=i- -64|0)>>2]=h[t+24>>2],h[e+4>>2]=n,e=h[t+20>>2],h[i+56>>2]=h[t+16>>2],h[i+60>>2]=e,e=h[t+12>>2],h[i+48>>2]=h[t+8>>2],h[i+52>>2]=e,e=h[t+4>>2],h[i+40>>2]=h[t>>2],h[i+44>>2]=e,ue(i+8|0,i+40|0,i+24|0);e:if(e=h[i+8>>2]){if(h[s>>2]=e,e=s+4|0,a[i+23|0]>=0){s=h[4+(t=i+8|4)>>2],h[e>>2]=h[t>>2],h[e+4>>2]=s,h[e+8>>2]=h[t+8>>2];break e}if(Vi(e,h[i+12>>2],h[i+16>>2]),a[i+23|0]>=0)break e;be(h[i+12>>2])}else a[i+23|0]<0&&be(h[i+12>>2]),(e=d[i+31|0])>>>0>=2?(e=mr(32),t=d[1621]|d[1622]<<8,a[e+24|0]=t,a[e+25|0]=t>>>8,t=d[1617]|d[1618]<<8|d[1619]<<16|d[1620]<<24,n=d[1613]|d[1614]<<8|d[1615]<<16|d[1616]<<24,a[e+16|0]=n,a[e+17|0]=n>>>8,a[e+18|0]=n>>>16,a[e+19|0]=n>>>24,a[e+20|0]=t,a[e+21|0]=t>>>8,a[e+22|0]=t>>>16,a[e+23|0]=t>>>24,t=d[1609]|d[1610]<<8|d[1611]<<16|d[1612]<<24,n=d[1605]|d[1606]<<8|d[1607]<<16|d[1608]<<24,a[e+8|0]=n,a[e+9|0]=n>>>8,a[e+10|0]=n>>>16,a[e+11|0]=n>>>24,a[e+12|0]=t,a[e+13|0]=t>>>8,a[e+14|0]=t>>>16,a[e+15|0]=t>>>24,t=d[1601]|d[1602]<<8|d[1603]<<16|d[1604]<<24,n=d[1597]|d[1598]<<8|d[1599]<<16|d[1600]<<24,a[0|e]=n,a[e+1|0]=n>>>8,a[e+2|0]=n>>>16,a[e+3|0]=n>>>24,a[e+4|0]=t,a[e+5|0]=t>>>8,a[e+6|0]=t>>>16,a[e+7|0]=t>>>24,a[e+26|0]=0,h[i+8>>2]=-1,Vi(t=i+8|4,e,26),n=a[i+23|0],h[s>>2]=h[i+8>>2],s=s+4|0,(0|n)>=0?(n=h[t+4>>2],h[s>>2]=h[t>>2],h[s+4>>2]=n,h[s+8>>2]=h[t+8>>2]):Vi(s,h[i+12>>2],h[i+16>>2]),a[i+23|0]<0&&be(h[i+12>>2]),be(e)):(h[s>>2]=0,h[s+4>>2]=0,h[s+16>>2]=e,h[s+8>>2]=0,h[s+12>>2]=0);return I=i+80|0,e=h[r+24>>2],a[r+23|0]<0&&be(h[r+12>>2]),I=r+32|0,0|e},lb:function(e,t,i){var r,n,s=0;I=r=I-16|0,fe(r,e|=0,t|=0,i|=0),h[e+24>>2]=h[r>>2];e:if((0|(n=e+24|0))!=(0|r))if(t=4|r,i=(s=d[r+15|0])<<24>>24,a[11+(e=e+28|0)|0]>=0){if((0|i)>=0){i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,h[e+8>>2]=h[t+8>>2];break e}ir(e,h[r+4>>2],h[r+8>>2])}else Yi(e,(e=(0|i)<0)?h[r+4>>2]:t,e?h[r+8>>2]:s);return a[r+15|0]<0&&be(h[r+4>>2]),I=r+16|0,0|n},mb:function(e,t,i){var r,n,s=0;I=r=I-16|0,Ae(r,e|=0,t|=0,i|=0),h[e+24>>2]=h[r>>2];e:if((0|(n=e+24|0))!=(0|r))if(t=4|r,i=(s=d[r+15|0])<<24>>24,a[11+(e=e+28|0)|0]>=0){if((0|i)>=0){i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,h[e+8>>2]=h[t+8>>2];break e}ir(e,h[r+4>>2],h[r+8>>2])}else Yi(e,(e=(0|i)<0)?h[r+4>>2]:t,e?h[r+8>>2]:s);return a[r+15|0]<0&&be(h[r+4>>2]),I=r+16|0,0|n},nb:function(e){(e|=0)&&(a[e+39|0]<0&&be(h[e+28>>2]),Pr(e+12|0,h[e+16>>2]),gr(e,h[e+4>>2]),be(e))},ob:yn,pb:En,qb:An,rb:wn,sb:yn,tb:En,ub:An,vb:wn,wb:vn,xb:_n,yb:yn,zb:En,Ab:An,Bb:En,Cb:An,Db:wn,Eb:vn,Fb:_n,Gb:function(){return 5},Hb:function(){return 6},Ib:function(){return 7},Jb:function(){return 8},Kb:function(){return 9},Lb:function(){return 10},Mb:function(){return 11},Nb:function(){return 12},Ob:En,Pb:yn,Qb:function(){return-2},Rb:function(){return-3},Sb:function(){return-4},Tb:function(){return-5},Ub:F,Vb:be}}(e)}(ce)},instantiate:function(e,t){return{then:function(t){var i=new T.Module(e);t({instance:new T.Instance(i)})}}},RuntimeError:Error};A=[],"object"!=typeof T&&$("no native wasm support detected");var x=!1;function M(e,t){e||$(t)}var R,P,C,k,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(e,t,i){for(var r=t+i,n=t;e[n]&&!(n>=r);)++n;if(n-t>16&&e.subarray&&O)return O.decode(e.subarray(t,n));for(var a="";t<n;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}function N(e,t){return e?D(C,e,t):""}function I(e){R=e,a.HEAP8=P=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=k=new Int32Array(e),a.HEAPU8=C=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var L,U=a.INITIAL_MEMORY||16777216;(S=a.wasmMemory?a.wasmMemory:new T.Memory({initial:U/65536,maximum:32768}))&&(R=S.buffer),U=R.byteLength,I(R);var V=[],F=[],G=[],B=!1;function j(e){F.unshift(e)}var z=0,H=null,W=null;function $(e){a.onAbort&&a.onAbort(e),w(e="Aborted("+e+")"),x=!0,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new T.RuntimeError(e);throw n(t),t}a.preloadedImages={},a.preloadedAudios={};var Y,X,q="data:application/octet-stream;base64,";function Z(e){return e.startsWith(q)}function J(e){return e.startsWith("file://")}function K(e){try{if(e==Y&&A)return new Uint8Array(A);var t=oe(e);if(t)return t;if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function Q(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var i=t.func;"number"==typeof i?void 0===t.arg?te(i)():te(i)(t.arg):i(void 0===t.arg?null:t.arg)}else t(a)}}Z(Y="draco_decoder.wasm")||(X=Y,Y=a.locateFile?a.locateFile(X,y):y+X);var ee=[];function te(e){var t=ee[e];return t||(e>=ee.length&&(ee.length=e+1),ee[e]=t=L.get(e)),t}function ie(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){k[this.ptr+4>>2]=e},this.get_type=function(){return k[this.ptr+4>>2]},this.set_destructor=function(e){k[this.ptr+8>>2]=e},this.get_destructor=function(){return k[this.ptr+8>>2]},this.set_refcount=function(e){k[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,P[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=P[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,P[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=P[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=k[this.ptr>>2];k[this.ptr>>2]=e+1},this.release_ref=function(){var e=k[this.ptr>>2];return k[this.ptr>>2]=e-1,1===e}}function re(e){try{return S.grow(e-R.byteLength+65535>>>16),I(S.buffer),1}catch(e){}}var ne={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var i=ne.buffers[e];0===t||10===t?((1===e?E:w)(D(i,0)),i.length=0):i.push(t)},varargs:void 0,get:function(){return ne.varargs+=4,k[ne.varargs-4>>2]},getStr:function(e){return N(e)},get64:function(e,t){return e}},ae=!1,se="function"==typeof atob?atob:function(e){var t,i,r,n,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=o.indexOf(e.charAt(c++))<<2|(n=o.indexOf(e.charAt(c++)))>>4,i=(15&n)<<4|(a=o.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(s=o.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==a&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(r))}while(c<e.length);return l};function oe(e){if(Z(e))return function(e){if("boolean"==typeof _&&_){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}try{for(var i=se(e),r=new Uint8Array(i.length),n=0;n<i.length;++n)r[n]=i.charCodeAt(n);return r}catch(e){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(q.length))}var le,ce={i:function(e){return Wi(e+16)+16},h:function(e,t,i){throw new ie(e).init(t,i),e},b:function(){$("")},g:function(e,t,i){C.copyWithin(e,t,t+i)},e:function(e){var t,i=C.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var a=i*(1+.2/n);if(a=Math.min(a,e+100663296),re(Math.min(r,((t=Math.max(e,a))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},f:function(e){return 0},d:function(e,t,i,r,n){},c:function(e,t,i,r){for(var n=0,a=0;a<i;a++){var s=k[t>>2],o=k[t+4>>2];t+=8;for(var l=0;l<o;l++)ne.printChar(e,C[s+l]);n+=o}return k[r>>2]=n,0},a:S},ue=(function(){var e={a:ce};function t(e,t){var i=e.exports;a.asm=i,L=a.asm.k,j(a.asm.j),function(e){if(z--,a.monitorRunDependencies&&a.monitorRunDependencies(z),0==z&&(null!==H&&(clearInterval(H),H=null),W)){var t=W;W=null,t()}}()}function i(e){t(e.instance)}function r(t){return function(){if(!A&&(b||v)){if("function"==typeof fetch&&!J(Y))return fetch(Y,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Y+"'";return e.arrayBuffer()})).catch((function(){return K(Y)}));if(u)return new Promise((function(e,t){u(Y,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return K(Y)}))}().then((function(t){return T.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){w("failed to asynchronously prepare wasm: "+e),$(e)}))}if(z++,a.monitorRunDependencies&&a.monitorRunDependencies(z),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}(A||"function"!=typeof T.instantiateStreaming||Z(Y)||J(Y)||"function"!=typeof fetch?r(i):fetch(Y,{credentials:"same-origin"}).then((function(t){return T.instantiateStreaming(t,e).then(i,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),r(i)}))}))).catch(n)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.j).apply(null,arguments)},a._emscripten_bind_VoidPtr___destroy___0=function(){return(ue=a._emscripten_bind_VoidPtr___destroy___0=a.asm.l).apply(null,arguments)}),he=a._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(he=a._emscripten_bind_DecoderBuffer_DecoderBuffer_0=a.asm.m).apply(null,arguments)},de=a._emscripten_bind_DecoderBuffer_Init_2=function(){return(de=a._emscripten_bind_DecoderBuffer_Init_2=a.asm.n).apply(null,arguments)},fe=a._emscripten_bind_DecoderBuffer___destroy___0=function(){return(fe=a._emscripten_bind_DecoderBuffer___destroy___0=a.asm.o).apply(null,arguments)},pe=a._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(pe=a._emscripten_bind_AttributeTransformData_AttributeTransformData_0=a.asm.p).apply(null,arguments)},me=a._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(me=a._emscripten_bind_AttributeTransformData_transform_type_0=a.asm.q).apply(null,arguments)},ge=a._emscripten_bind_AttributeTransformData___destroy___0=function(){return(ge=a._emscripten_bind_AttributeTransformData___destroy___0=a.asm.r).apply(null,arguments)},be=a._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(be=a._emscripten_bind_GeometryAttribute_GeometryAttribute_0=a.asm.s).apply(null,arguments)},ve=a._emscripten_bind_GeometryAttribute___destroy___0=function(){return(ve=a._emscripten_bind_GeometryAttribute___destroy___0=a.asm.t).apply(null,arguments)},_e=a._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(_e=a._emscripten_bind_PointAttribute_PointAttribute_0=a.asm.u).apply(null,arguments)},ye=a._emscripten_bind_PointAttribute_size_0=function(){return(ye=a._emscripten_bind_PointAttribute_size_0=a.asm.v).apply(null,arguments)},Ae=a._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(Ae=a._emscripten_bind_PointAttribute_GetAttributeTransformData_0=a.asm.w).apply(null,arguments)},Ee=a._emscripten_bind_PointAttribute_attribute_type_0=function(){return(Ee=a._emscripten_bind_PointAttribute_attribute_type_0=a.asm.x).apply(null,arguments)},we=a._emscripten_bind_PointAttribute_data_type_0=function(){return(we=a._emscripten_bind_PointAttribute_data_type_0=a.asm.y).apply(null,arguments)},Se=a._emscripten_bind_PointAttribute_num_components_0=function(){return(Se=a._emscripten_bind_PointAttribute_num_components_0=a.asm.z).apply(null,arguments)},Te=a._emscripten_bind_PointAttribute_normalized_0=function(){return(Te=a._emscripten_bind_PointAttribute_normalized_0=a.asm.A).apply(null,arguments)},xe=a._emscripten_bind_PointAttribute_byte_stride_0=function(){return(xe=a._emscripten_bind_PointAttribute_byte_stride_0=a.asm.B).apply(null,arguments)},Me=a._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Me=a._emscripten_bind_PointAttribute_byte_offset_0=a.asm.C).apply(null,arguments)},Re=a._emscripten_bind_PointAttribute_unique_id_0=function(){return(Re=a._emscripten_bind_PointAttribute_unique_id_0=a.asm.D).apply(null,arguments)},Pe=a._emscripten_bind_PointAttribute___destroy___0=function(){return(Pe=a._emscripten_bind_PointAttribute___destroy___0=a.asm.E).apply(null,arguments)},Ce=a._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(Ce=a._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=a.asm.F).apply(null,arguments)},ke=a._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(ke=a._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=a.asm.G).apply(null,arguments)},Oe=a._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Oe=a._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=a.asm.H).apply(null,arguments)},De=a._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(De=a._emscripten_bind_AttributeQuantizationTransform_min_value_1=a.asm.I).apply(null,arguments)},Ne=a._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(Ne=a._emscripten_bind_AttributeQuantizationTransform_range_0=a.asm.J).apply(null,arguments)},Ie=a._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(Ie=a._emscripten_bind_AttributeQuantizationTransform___destroy___0=a.asm.K).apply(null,arguments)},Le=a._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(Le=a._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=a.asm.L).apply(null,arguments)},Ue=a._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(Ue=a._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=a.asm.M).apply(null,arguments)},Ve=a._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(Ve=a._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=a.asm.N).apply(null,arguments)},Fe=a._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(Fe=a._emscripten_bind_AttributeOctahedronTransform___destroy___0=a.asm.O).apply(null,arguments)},Ge=a._emscripten_bind_PointCloud_PointCloud_0=function(){return(Ge=a._emscripten_bind_PointCloud_PointCloud_0=a.asm.P).apply(null,arguments)},Be=a._emscripten_bind_PointCloud_num_attributes_0=function(){return(Be=a._emscripten_bind_PointCloud_num_attributes_0=a.asm.Q).apply(null,arguments)},je=a._emscripten_bind_PointCloud_num_points_0=function(){return(je=a._emscripten_bind_PointCloud_num_points_0=a.asm.R).apply(null,arguments)},ze=a._emscripten_bind_PointCloud___destroy___0=function(){return(ze=a._emscripten_bind_PointCloud___destroy___0=a.asm.S).apply(null,arguments)},He=a._emscripten_bind_Mesh_Mesh_0=function(){return(He=a._emscripten_bind_Mesh_Mesh_0=a.asm.T).apply(null,arguments)},We=a._emscripten_bind_Mesh_num_faces_0=function(){return(We=a._emscripten_bind_Mesh_num_faces_0=a.asm.U).apply(null,arguments)},$e=a._emscripten_bind_Mesh_num_attributes_0=function(){return($e=a._emscripten_bind_Mesh_num_attributes_0=a.asm.V).apply(null,arguments)},Ye=a._emscripten_bind_Mesh_num_points_0=function(){return(Ye=a._emscripten_bind_Mesh_num_points_0=a.asm.W).apply(null,arguments)},Xe=a._emscripten_bind_Mesh___destroy___0=function(){return(Xe=a._emscripten_bind_Mesh___destroy___0=a.asm.X).apply(null,arguments)},qe=a._emscripten_bind_Metadata_Metadata_0=function(){return(qe=a._emscripten_bind_Metadata_Metadata_0=a.asm.Y).apply(null,arguments)},Ze=a._emscripten_bind_Metadata___destroy___0=function(){return(Ze=a._emscripten_bind_Metadata___destroy___0=a.asm.Z).apply(null,arguments)},Je=a._emscripten_bind_Status_code_0=function(){return(Je=a._emscripten_bind_Status_code_0=a.asm._).apply(null,arguments)},Ke=a._emscripten_bind_Status_ok_0=function(){return(Ke=a._emscripten_bind_Status_ok_0=a.asm.$).apply(null,arguments)},Qe=a._emscripten_bind_Status_error_msg_0=function(){return(Qe=a._emscripten_bind_Status_error_msg_0=a.asm.aa).apply(null,arguments)},et=a._emscripten_bind_Status___destroy___0=function(){return(et=a._emscripten_bind_Status___destroy___0=a.asm.ba).apply(null,arguments)},tt=a._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(tt=a._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=a.asm.ca).apply(null,arguments)},it=a._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(it=a._emscripten_bind_DracoFloat32Array_GetValue_1=a.asm.da).apply(null,arguments)},rt=a._emscripten_bind_DracoFloat32Array_size_0=function(){return(rt=a._emscripten_bind_DracoFloat32Array_size_0=a.asm.ea).apply(null,arguments)},nt=a._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(nt=a._emscripten_bind_DracoFloat32Array___destroy___0=a.asm.fa).apply(null,arguments)},at=a._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(at=a._emscripten_bind_DracoInt8Array_DracoInt8Array_0=a.asm.ga).apply(null,arguments)},st=a._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(st=a._emscripten_bind_DracoInt8Array_GetValue_1=a.asm.ha).apply(null,arguments)},ot=a._emscripten_bind_DracoInt8Array_size_0=function(){return(ot=a._emscripten_bind_DracoInt8Array_size_0=a.asm.ia).apply(null,arguments)},lt=a._emscripten_bind_DracoInt8Array___destroy___0=function(){return(lt=a._emscripten_bind_DracoInt8Array___destroy___0=a.asm.ja).apply(null,arguments)},ct=a._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(ct=a._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=a.asm.ka).apply(null,arguments)},ut=a._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(ut=a._emscripten_bind_DracoUInt8Array_GetValue_1=a.asm.la).apply(null,arguments)},ht=a._emscripten_bind_DracoUInt8Array_size_0=function(){return(ht=a._emscripten_bind_DracoUInt8Array_size_0=a.asm.ma).apply(null,arguments)},dt=a._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(dt=a._emscripten_bind_DracoUInt8Array___destroy___0=a.asm.na).apply(null,arguments)},ft=a._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(ft=a._emscripten_bind_DracoInt16Array_DracoInt16Array_0=a.asm.oa).apply(null,arguments)},pt=a._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(pt=a._emscripten_bind_DracoInt16Array_GetValue_1=a.asm.pa).apply(null,arguments)},mt=a._emscripten_bind_DracoInt16Array_size_0=function(){return(mt=a._emscripten_bind_DracoInt16Array_size_0=a.asm.qa).apply(null,arguments)},gt=a._emscripten_bind_DracoInt16Array___destroy___0=function(){return(gt=a._emscripten_bind_DracoInt16Array___destroy___0=a.asm.ra).apply(null,arguments)},bt=a._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(bt=a._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=a.asm.sa).apply(null,arguments)},vt=a._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(vt=a._emscripten_bind_DracoUInt16Array_GetValue_1=a.asm.ta).apply(null,arguments)},_t=a._emscripten_bind_DracoUInt16Array_size_0=function(){return(_t=a._emscripten_bind_DracoUInt16Array_size_0=a.asm.ua).apply(null,arguments)},yt=a._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(yt=a._emscripten_bind_DracoUInt16Array___destroy___0=a.asm.va).apply(null,arguments)},At=a._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(At=a._emscripten_bind_DracoInt32Array_DracoInt32Array_0=a.asm.wa).apply(null,arguments)},Et=a._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(Et=a._emscripten_bind_DracoInt32Array_GetValue_1=a.asm.xa).apply(null,arguments)},wt=a._emscripten_bind_DracoInt32Array_size_0=function(){return(wt=a._emscripten_bind_DracoInt32Array_size_0=a.asm.ya).apply(null,arguments)},St=a._emscripten_bind_DracoInt32Array___destroy___0=function(){return(St=a._emscripten_bind_DracoInt32Array___destroy___0=a.asm.za).apply(null,arguments)},Tt=a._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(Tt=a._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=a.asm.Aa).apply(null,arguments)},xt=a._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(xt=a._emscripten_bind_DracoUInt32Array_GetValue_1=a.asm.Ba).apply(null,arguments)},Mt=a._emscripten_bind_DracoUInt32Array_size_0=function(){return(Mt=a._emscripten_bind_DracoUInt32Array_size_0=a.asm.Ca).apply(null,arguments)},Rt=a._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(Rt=a._emscripten_bind_DracoUInt32Array___destroy___0=a.asm.Da).apply(null,arguments)},Pt=a._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(Pt=a._emscripten_bind_MetadataQuerier_MetadataQuerier_0=a.asm.Ea).apply(null,arguments)},Ct=a._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(Ct=a._emscripten_bind_MetadataQuerier_HasEntry_2=a.asm.Fa).apply(null,arguments)},kt=a._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(kt=a._emscripten_bind_MetadataQuerier_GetIntEntry_2=a.asm.Ga).apply(null,arguments)},Ot=a._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Ot=a._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=a.asm.Ha).apply(null,arguments)},Dt=a._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(Dt=a._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=a.asm.Ia).apply(null,arguments)},Nt=a._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(Nt=a._emscripten_bind_MetadataQuerier_GetStringEntry_2=a.asm.Ja).apply(null,arguments)},It=a._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(It=a._emscripten_bind_MetadataQuerier_NumEntries_1=a.asm.Ka).apply(null,arguments)},Lt=a._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(Lt=a._emscripten_bind_MetadataQuerier_GetEntryName_2=a.asm.La).apply(null,arguments)},Ut=a._emscripten_bind_MetadataQuerier___destroy___0=function(){return(Ut=a._emscripten_bind_MetadataQuerier___destroy___0=a.asm.Ma).apply(null,arguments)},Vt=a._emscripten_bind_Decoder_Decoder_0=function(){return(Vt=a._emscripten_bind_Decoder_Decoder_0=a.asm.Na).apply(null,arguments)},Ft=a._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Ft=a._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=a.asm.Oa).apply(null,arguments)},Gt=a._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(Gt=a._emscripten_bind_Decoder_DecodeArrayToMesh_3=a.asm.Pa).apply(null,arguments)},Bt=a._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Bt=a._emscripten_bind_Decoder_GetAttributeId_2=a.asm.Qa).apply(null,arguments)},jt=a._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(jt=a._emscripten_bind_Decoder_GetAttributeIdByName_2=a.asm.Ra).apply(null,arguments)},zt=a._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(zt=a._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=a.asm.Sa).apply(null,arguments)},Ht=a._emscripten_bind_Decoder_GetAttribute_2=function(){return(Ht=a._emscripten_bind_Decoder_GetAttribute_2=a.asm.Ta).apply(null,arguments)},Wt=a._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(Wt=a._emscripten_bind_Decoder_GetAttributeByUniqueId_2=a.asm.Ua).apply(null,arguments)},$t=a._emscripten_bind_Decoder_GetMetadata_1=function(){return($t=a._emscripten_bind_Decoder_GetMetadata_1=a.asm.Va).apply(null,arguments)},Yt=a._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(Yt=a._emscripten_bind_Decoder_GetAttributeMetadata_2=a.asm.Wa).apply(null,arguments)},Xt=a._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Xt=a._emscripten_bind_Decoder_GetFaceFromMesh_3=a.asm.Xa).apply(null,arguments)},qt=a._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(qt=a._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=a.asm.Ya).apply(null,arguments)},Zt=a._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(Zt=a._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=a.asm.Za).apply(null,arguments)},Jt=a._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(Jt=a._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=a.asm._a).apply(null,arguments)},Kt=a._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(Kt=a._emscripten_bind_Decoder_GetAttributeFloat_3=a.asm.$a).apply(null,arguments)},Qt=a._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(Qt=a._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=a.asm.ab).apply(null,arguments)},ei=a._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(ei=a._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=a.asm.bb).apply(null,arguments)},ti=a._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(ti=a._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=a.asm.cb).apply(null,arguments)},ii=a._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(ii=a._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=a.asm.db).apply(null,arguments)},ri=a._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(ri=a._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=a.asm.eb).apply(null,arguments)},ni=a._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(ni=a._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=a.asm.fb).apply(null,arguments)},ai=a._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(ai=a._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=a.asm.gb).apply(null,arguments)},si=a._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(si=a._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=a.asm.hb).apply(null,arguments)},oi=a._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(oi=a._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=a.asm.ib).apply(null,arguments)},li=a._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(li=a._emscripten_bind_Decoder_SkipAttributeTransform_1=a.asm.jb).apply(null,arguments)},ci=a._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(ci=a._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=a.asm.kb).apply(null,arguments)},ui=a._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(ui=a._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=a.asm.lb).apply(null,arguments)},hi=a._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(hi=a._emscripten_bind_Decoder_DecodeBufferToMesh_2=a.asm.mb).apply(null,arguments)},di=a._emscripten_bind_Decoder___destroy___0=function(){return(di=a._emscripten_bind_Decoder___destroy___0=a.asm.nb).apply(null,arguments)},fi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(fi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=a.asm.ob).apply(null,arguments)},pi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(pi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=a.asm.pb).apply(null,arguments)},mi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(mi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=a.asm.qb).apply(null,arguments)},gi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(gi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=a.asm.rb).apply(null,arguments)},bi=a._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(bi=a._emscripten_enum_draco_GeometryAttribute_Type_INVALID=a.asm.sb).apply(null,arguments)},vi=a._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(vi=a._emscripten_enum_draco_GeometryAttribute_Type_POSITION=a.asm.tb).apply(null,arguments)},_i=a._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(_i=a._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=a.asm.ub).apply(null,arguments)},yi=a._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(yi=a._emscripten_enum_draco_GeometryAttribute_Type_COLOR=a.asm.vb).apply(null,arguments)},Ai=a._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Ai=a._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=a.asm.wb).apply(null,arguments)},Ei=a._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Ei=a._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=a.asm.xb).apply(null,arguments)},wi=a._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(wi=a._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=a.asm.yb).apply(null,arguments)},Si=a._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(Si=a._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=a.asm.zb).apply(null,arguments)},Ti=a._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Ti=a._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=a.asm.Ab).apply(null,arguments)},xi=a._emscripten_enum_draco_DataType_DT_INVALID=function(){return(xi=a._emscripten_enum_draco_DataType_DT_INVALID=a.asm.Bb).apply(null,arguments)},Mi=a._emscripten_enum_draco_DataType_DT_INT8=function(){return(Mi=a._emscripten_enum_draco_DataType_DT_INT8=a.asm.Cb).apply(null,arguments)},Ri=a._emscripten_enum_draco_DataType_DT_UINT8=function(){return(Ri=a._emscripten_enum_draco_DataType_DT_UINT8=a.asm.Db).apply(null,arguments)},Pi=a._emscripten_enum_draco_DataType_DT_INT16=function(){return(Pi=a._emscripten_enum_draco_DataType_DT_INT16=a.asm.Eb).apply(null,arguments)},Ci=a._emscripten_enum_draco_DataType_DT_UINT16=function(){return(Ci=a._emscripten_enum_draco_DataType_DT_UINT16=a.asm.Fb).apply(null,arguments)},ki=a._emscripten_enum_draco_DataType_DT_INT32=function(){return(ki=a._emscripten_enum_draco_DataType_DT_INT32=a.asm.Gb).apply(null,arguments)},Oi=a._emscripten_enum_draco_DataType_DT_UINT32=function(){return(Oi=a._emscripten_enum_draco_DataType_DT_UINT32=a.asm.Hb).apply(null,arguments)},Di=a._emscripten_enum_draco_DataType_DT_INT64=function(){return(Di=a._emscripten_enum_draco_DataType_DT_INT64=a.asm.Ib).apply(null,arguments)},Ni=a._emscripten_enum_draco_DataType_DT_UINT64=function(){return(Ni=a._emscripten_enum_draco_DataType_DT_UINT64=a.asm.Jb).apply(null,arguments)},Ii=a._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(Ii=a._emscripten_enum_draco_DataType_DT_FLOAT32=a.asm.Kb).apply(null,arguments)},Li=a._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(Li=a._emscripten_enum_draco_DataType_DT_FLOAT64=a.asm.Lb).apply(null,arguments)},Ui=a._emscripten_enum_draco_DataType_DT_BOOL=function(){return(Ui=a._emscripten_enum_draco_DataType_DT_BOOL=a.asm.Mb).apply(null,arguments)},Vi=a._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(Vi=a._emscripten_enum_draco_DataType_DT_TYPES_COUNT=a.asm.Nb).apply(null,arguments)},Fi=a._emscripten_enum_draco_StatusCode_OK=function(){return(Fi=a._emscripten_enum_draco_StatusCode_OK=a.asm.Ob).apply(null,arguments)},Gi=a._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(Gi=a._emscripten_enum_draco_StatusCode_DRACO_ERROR=a.asm.Pb).apply(null,arguments)},Bi=a._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(Bi=a._emscripten_enum_draco_StatusCode_IO_ERROR=a.asm.Qb).apply(null,arguments)},ji=a._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(ji=a._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=a.asm.Rb).apply(null,arguments)},zi=a._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(zi=a._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=a.asm.Sb).apply(null,arguments)},Hi=a._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(Hi=a._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=a.asm.Tb).apply(null,arguments)},Wi=a._malloc=function(){return(Wi=a._malloc=a.asm.Ub).apply(null,arguments)};function $i(e){function i(){le||(le=!0,a.calledRun=!0,x||(B=!0,Q(F),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),G.unshift(e);var e;Q(G)}()))}e=e||g,z>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),V.unshift(e);var e;Q(V)}(),z>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),i()}),1)):i()))}if(a._free=function(){return(a._free=a.asm.Vb).apply(null,arguments)},W=function e(){le||$i(),le||(W=e)},a.run=$i,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();function Yi(){}function Xi(e){return(e||Yi).__cache__}function qi(e,t){var i=Xi(t),r=i[e];return r||((r=Object.create((t||Yi).prototype)).ptr=e,i[e]=r)}$i(),Yi.prototype=Object.create(Yi.prototype),Yi.prototype.constructor=Yi,Yi.prototype.__class__=Yi,Yi.__cache__={},a.WrapperObject=Yi,a.getCache=Xi,a.wrapPointer=qi,a.castObject=function(e,t){return qi(e.ptr,t)},a.NULL=qi(0),a.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Xi(e.__class__)[e.ptr]},a.compare=function(e,t){return e.ptr===t.ptr},a.getPointer=function(e){return e.ptr},a.getClass=function(e){return e.__class__};var Zi={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Zi.needed){for(var e=0;e<Zi.temps.length;e++)a._free(Zi.temps[e]);Zi.temps.length=0,a._free(Zi.buffer),Zi.buffer=0,Zi.size+=Zi.needed,Zi.needed=0}Zi.buffer||(Zi.size+=128,Zi.buffer=a._malloc(Zi.size),M(Zi.buffer)),Zi.pos=0},alloc:function(e,t){M(Zi.buffer);var i,r=t.BYTES_PER_ELEMENT,n=e.length*r;return n=n+7&-8,Zi.pos+n>=Zi.size?(M(n>0),Zi.needed+=n,i=a._malloc(n),Zi.temps.push(i)):(i=Zi.buffer+Zi.pos,Zi.pos+=n),i},copy:function(e,t,i){switch(i>>>=0,t.BYTES_PER_ELEMENT){case 2:i>>>=1;break;case 4:i>>>=2;break;case 8:i>>>=3}for(var r=0;r<e.length;r++)t[i+r]=e[r]}};function Ji(e){if("string"==typeof e){var t=(n=function(e){for(var t=0,i=0;i<e.length;++i){var r=e.charCodeAt(i);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++i)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(r=e)+1,function(e,t,i,r){if(!(r>0))return 0;for(var n=i,a=i+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(i>=a)break;t[i++]=o}else if(o<=2047){if(i+1>=a)break;t[i++]=192|o>>6,t[i++]=128|63&o}else if(o<=65535){if(i+2>=a)break;t[i++]=224|o>>12,t[i++]=128|o>>6&63,t[i++]=128|63&o}else{if(i+3>=a)break;t[i++]=240|o>>18,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}}return t[i]=0,i-n}(r,a=new Array(n),0,a.length),a),i=Zi.alloc(t,P);return Zi.copy(t,P,i),i}var r,n,a;return e}function Ki(e){if("object"==typeof e){var t=Zi.alloc(e,P);return Zi.copy(e,P,t),t}return e}function Qi(){throw"cannot construct a VoidPtr, no constructor in IDL"}function er(){this.ptr=he(),Xi(er)[this.ptr]=this}function tr(){this.ptr=pe(),Xi(tr)[this.ptr]=this}function ir(){this.ptr=be(),Xi(ir)[this.ptr]=this}function rr(){this.ptr=_e(),Xi(rr)[this.ptr]=this}function nr(){this.ptr=Ce(),Xi(nr)[this.ptr]=this}function ar(){this.ptr=Le(),Xi(ar)[this.ptr]=this}function sr(){this.ptr=Ge(),Xi(sr)[this.ptr]=this}function or(){this.ptr=He(),Xi(or)[this.ptr]=this}function lr(){this.ptr=qe(),Xi(lr)[this.ptr]=this}function cr(){throw"cannot construct a Status, no constructor in IDL"}function ur(){this.ptr=tt(),Xi(ur)[this.ptr]=this}function hr(){this.ptr=at(),Xi(hr)[this.ptr]=this}function dr(){this.ptr=ct(),Xi(dr)[this.ptr]=this}function fr(){this.ptr=ft(),Xi(fr)[this.ptr]=this}function pr(){this.ptr=bt(),Xi(pr)[this.ptr]=this}function mr(){this.ptr=At(),Xi(mr)[this.ptr]=this}function gr(){this.ptr=Tt(),Xi(gr)[this.ptr]=this}function br(){this.ptr=Pt(),Xi(br)[this.ptr]=this}function vr(){this.ptr=Vt(),Xi(vr)[this.ptr]=this}return Qi.prototype=Object.create(Yi.prototype),Qi.prototype.constructor=Qi,Qi.prototype.__class__=Qi,Qi.__cache__={},a.VoidPtr=Qi,Qi.prototype.__destroy__=Qi.prototype.__destroy__=function(){var e=this.ptr;ue(e)},er.prototype=Object.create(Yi.prototype),er.prototype.constructor=er,er.prototype.__class__=er,er.__cache__={},a.DecoderBuffer=er,er.prototype.Init=er.prototype.Init=function(e,t){var i=this.ptr;Zi.prepare(),"object"==typeof e&&(e=Ki(e)),t&&"object"==typeof t&&(t=t.ptr),de(i,e,t)},er.prototype.__destroy__=er.prototype.__destroy__=function(){var e=this.ptr;fe(e)},tr.prototype=Object.create(Yi.prototype),tr.prototype.constructor=tr,tr.prototype.__class__=tr,tr.__cache__={},a.AttributeTransformData=tr,tr.prototype.transform_type=tr.prototype.transform_type=function(){var e=this.ptr;return me(e)},tr.prototype.__destroy__=tr.prototype.__destroy__=function(){var e=this.ptr;ge(e)},ir.prototype=Object.create(Yi.prototype),ir.prototype.constructor=ir,ir.prototype.__class__=ir,ir.__cache__={},a.GeometryAttribute=ir,ir.prototype.__destroy__=ir.prototype.__destroy__=function(){var e=this.ptr;ve(e)},rr.prototype=Object.create(Yi.prototype),rr.prototype.constructor=rr,rr.prototype.__class__=rr,rr.__cache__={},a.PointAttribute=rr,rr.prototype.size=rr.prototype.size=function(){var e=this.ptr;return ye(e)},rr.prototype.GetAttributeTransformData=rr.prototype.GetAttributeTransformData=function(){var e=this.ptr;return qi(Ae(e),tr)},rr.prototype.attribute_type=rr.prototype.attribute_type=function(){var e=this.ptr;return Ee(e)},rr.prototype.data_type=rr.prototype.data_type=function(){var e=this.ptr;return we(e)},rr.prototype.num_components=rr.prototype.num_components=function(){var e=this.ptr;return Se(e)},rr.prototype.normalized=rr.prototype.normalized=function(){var e=this.ptr;return!!Te(e)},rr.prototype.byte_stride=rr.prototype.byte_stride=function(){var e=this.ptr;return xe(e)},rr.prototype.byte_offset=rr.prototype.byte_offset=function(){var e=this.ptr;return Me(e)},rr.prototype.unique_id=rr.prototype.unique_id=function(){var e=this.ptr;return Re(e)},rr.prototype.__destroy__=rr.prototype.__destroy__=function(){var e=this.ptr;Pe(e)},nr.prototype=Object.create(Yi.prototype),nr.prototype.constructor=nr,nr.prototype.__class__=nr,nr.__cache__={},a.AttributeQuantizationTransform=nr,nr.prototype.InitFromAttribute=nr.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!ke(t,e)},nr.prototype.quantization_bits=nr.prototype.quantization_bits=function(){var e=this.ptr;return Oe(e)},nr.prototype.min_value=nr.prototype.min_value=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),De(t,e)},nr.prototype.range=nr.prototype.range=function(){var e=this.ptr;return Ne(e)},nr.prototype.__destroy__=nr.prototype.__destroy__=function(){var e=this.ptr;Ie(e)},ar.prototype=Object.create(Yi.prototype),ar.prototype.constructor=ar,ar.prototype.__class__=ar,ar.__cache__={},a.AttributeOctahedronTransform=ar,ar.prototype.InitFromAttribute=ar.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!Ue(t,e)},ar.prototype.quantization_bits=ar.prototype.quantization_bits=function(){var e=this.ptr;return Ve(e)},ar.prototype.__destroy__=ar.prototype.__destroy__=function(){var e=this.ptr;Fe(e)},sr.prototype=Object.create(Yi.prototype),sr.prototype.constructor=sr,sr.prototype.__class__=sr,sr.__cache__={},a.PointCloud=sr,sr.prototype.num_attributes=sr.prototype.num_attributes=function(){var e=this.ptr;return Be(e)},sr.prototype.num_points=sr.prototype.num_points=function(){var e=this.ptr;return je(e)},sr.prototype.__destroy__=sr.prototype.__destroy__=function(){var e=this.ptr;ze(e)},or.prototype=Object.create(Yi.prototype),or.prototype.constructor=or,or.prototype.__class__=or,or.__cache__={},a.Mesh=or,or.prototype.num_faces=or.prototype.num_faces=function(){var e=this.ptr;return We(e)},or.prototype.num_attributes=or.prototype.num_attributes=function(){var e=this.ptr;return $e(e)},or.prototype.num_points=or.prototype.num_points=function(){var e=this.ptr;return Ye(e)},or.prototype.__destroy__=or.prototype.__destroy__=function(){var e=this.ptr;Xe(e)},lr.prototype=Object.create(Yi.prototype),lr.prototype.constructor=lr,lr.prototype.__class__=lr,lr.__cache__={},a.Metadata=lr,lr.prototype.__destroy__=lr.prototype.__destroy__=function(){var e=this.ptr;Ze(e)},cr.prototype=Object.create(Yi.prototype),cr.prototype.constructor=cr,cr.prototype.__class__=cr,cr.__cache__={},a.Status=cr,cr.prototype.code=cr.prototype.code=function(){var e=this.ptr;return Je(e)},cr.prototype.ok=cr.prototype.ok=function(){var e=this.ptr;return!!Ke(e)},cr.prototype.error_msg=cr.prototype.error_msg=function(){var e=this.ptr;return N(Qe(e))},cr.prototype.__destroy__=cr.prototype.__destroy__=function(){var e=this.ptr;et(e)},ur.prototype=Object.create(Yi.prototype),ur.prototype.constructor=ur,ur.prototype.__class__=ur,ur.__cache__={},a.DracoFloat32Array=ur,ur.prototype.GetValue=ur.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),it(t,e)},ur.prototype.size=ur.prototype.size=function(){var e=this.ptr;return rt(e)},ur.prototype.__destroy__=ur.prototype.__destroy__=function(){var e=this.ptr;nt(e)},hr.prototype=Object.create(Yi.prototype),hr.prototype.constructor=hr,hr.prototype.__class__=hr,hr.__cache__={},a.DracoInt8Array=hr,hr.prototype.GetValue=hr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),st(t,e)},hr.prototype.size=hr.prototype.size=function(){var e=this.ptr;return ot(e)},hr.prototype.__destroy__=hr.prototype.__destroy__=function(){var e=this.ptr;lt(e)},dr.prototype=Object.create(Yi.prototype),dr.prototype.constructor=dr,dr.prototype.__class__=dr,dr.__cache__={},a.DracoUInt8Array=dr,dr.prototype.GetValue=dr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ut(t,e)},dr.prototype.size=dr.prototype.size=function(){var e=this.ptr;return ht(e)},dr.prototype.__destroy__=dr.prototype.__destroy__=function(){var e=this.ptr;dt(e)},fr.prototype=Object.create(Yi.prototype),fr.prototype.constructor=fr,fr.prototype.__class__=fr,fr.__cache__={},a.DracoInt16Array=fr,fr.prototype.GetValue=fr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),pt(t,e)},fr.prototype.size=fr.prototype.size=function(){var e=this.ptr;return mt(e)},fr.prototype.__destroy__=fr.prototype.__destroy__=function(){var e=this.ptr;gt(e)},pr.prototype=Object.create(Yi.prototype),pr.prototype.constructor=pr,pr.prototype.__class__=pr,pr.__cache__={},a.DracoUInt16Array=pr,pr.prototype.GetValue=pr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),vt(t,e)},pr.prototype.size=pr.prototype.size=function(){var e=this.ptr;return _t(e)},pr.prototype.__destroy__=pr.prototype.__destroy__=function(){var e=this.ptr;yt(e)},mr.prototype=Object.create(Yi.prototype),mr.prototype.constructor=mr,mr.prototype.__class__=mr,mr.__cache__={},a.DracoInt32Array=mr,mr.prototype.GetValue=mr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Et(t,e)},mr.prototype.size=mr.prototype.size=function(){var e=this.ptr;return wt(e)},mr.prototype.__destroy__=mr.prototype.__destroy__=function(){var e=this.ptr;St(e)},gr.prototype=Object.create(Yi.prototype),gr.prototype.constructor=gr,gr.prototype.__class__=gr,gr.__cache__={},a.DracoUInt32Array=gr,gr.prototype.GetValue=gr.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),xt(t,e)},gr.prototype.size=gr.prototype.size=function(){var e=this.ptr;return Mt(e)},gr.prototype.__destroy__=gr.prototype.__destroy__=function(){var e=this.ptr;Rt(e)},br.prototype=Object.create(Yi.prototype),br.prototype.constructor=br,br.prototype.__class__=br,br.__cache__={},a.MetadataQuerier=br,br.prototype.HasEntry=br.prototype.HasEntry=function(e,t){var i=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),!!Ct(i,e,t)},br.prototype.GetIntEntry=br.prototype.GetIntEntry=function(e,t){var i=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),kt(i,e,t)},br.prototype.GetIntEntryArray=br.prototype.GetIntEntryArray=function(e,t,i){var r=this.ptr;Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),i&&"object"==typeof i&&(i=i.ptr),Ot(r,e,t,i)},br.prototype.GetDoubleEntry=br.prototype.GetDoubleEntry=function(e,t){var i=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),Dt(i,e,t)},br.prototype.GetStringEntry=br.prototype.GetStringEntry=function(e,t){var i=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),N(Nt(i,e,t))},br.prototype.NumEntries=br.prototype.NumEntries=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),It(t,e)},br.prototype.GetEntryName=br.prototype.GetEntryName=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),N(Lt(i,e,t))},br.prototype.__destroy__=br.prototype.__destroy__=function(){var e=this.ptr;Ut(e)},vr.prototype=Object.create(Yi.prototype),vr.prototype.constructor=vr,vr.prototype.__class__=vr,vr.__cache__={},a.Decoder=vr,vr.prototype.DecodeArrayToPointCloud=vr.prototype.DecodeArrayToPointCloud=function(e,t,i){var r=this.ptr;return Zi.prepare(),"object"==typeof e&&(e=Ki(e)),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),qi(Ft(r,e,t,i),cr)},vr.prototype.DecodeArrayToMesh=vr.prototype.DecodeArrayToMesh=function(e,t,i){var r=this.ptr;return Zi.prepare(),"object"==typeof e&&(e=Ki(e)),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),qi(Gt(r,e,t,i),cr)},vr.prototype.GetAttributeId=vr.prototype.GetAttributeId=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Bt(i,e,t)},vr.prototype.GetAttributeIdByName=vr.prototype.GetAttributeIdByName=function(e,t){var i=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),jt(i,e,t)},vr.prototype.GetAttributeIdByMetadataEntry=vr.prototype.GetAttributeIdByMetadataEntry=function(e,t,i){var r=this.ptr;return Zi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ji(t),i=i&&"object"==typeof i?i.ptr:Ji(i),zt(r,e,t,i)},vr.prototype.GetAttribute=vr.prototype.GetAttribute=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(Ht(i,e,t),rr)},vr.prototype.GetAttributeByUniqueId=vr.prototype.GetAttributeByUniqueId=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(Wt(i,e,t),rr)},vr.prototype.GetMetadata=vr.prototype.GetMetadata=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),qi($t(t,e),lr)},vr.prototype.GetAttributeMetadata=vr.prototype.GetAttributeMetadata=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(Yt(i,e,t),lr)},vr.prototype.GetFaceFromMesh=vr.prototype.GetFaceFromMesh=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Xt(r,e,t,i)},vr.prototype.GetTriangleStripsFromMesh=vr.prototype.GetTriangleStripsFromMesh=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qt(i,e,t)},vr.prototype.GetTrianglesUInt16Array=vr.prototype.GetTrianglesUInt16Array=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Zt(r,e,t,i)},vr.prototype.GetTrianglesUInt32Array=vr.prototype.GetTrianglesUInt32Array=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Jt(r,e,t,i)},vr.prototype.GetAttributeFloat=vr.prototype.GetAttributeFloat=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Kt(r,e,t,i)},vr.prototype.GetAttributeFloatForAllPoints=vr.prototype.GetAttributeFloatForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Qt(r,e,t,i)},vr.prototype.GetAttributeIntForAllPoints=vr.prototype.GetAttributeIntForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ei(r,e,t,i)},vr.prototype.GetAttributeInt8ForAllPoints=vr.prototype.GetAttributeInt8ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ti(r,e,t,i)},vr.prototype.GetAttributeUInt8ForAllPoints=vr.prototype.GetAttributeUInt8ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ii(r,e,t,i)},vr.prototype.GetAttributeInt16ForAllPoints=vr.prototype.GetAttributeInt16ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ri(r,e,t,i)},vr.prototype.GetAttributeUInt16ForAllPoints=vr.prototype.GetAttributeUInt16ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ni(r,e,t,i)},vr.prototype.GetAttributeInt32ForAllPoints=vr.prototype.GetAttributeInt32ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ai(r,e,t,i)},vr.prototype.GetAttributeUInt32ForAllPoints=vr.prototype.GetAttributeUInt32ForAllPoints=function(e,t,i){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!si(r,e,t,i)},vr.prototype.GetAttributeDataArrayForAllPoints=vr.prototype.GetAttributeDataArrayForAllPoints=function(e,t,i,r,n){var a=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),r&&"object"==typeof r&&(r=r.ptr),n&&"object"==typeof n&&(n=n.ptr),!!oi(a,e,t,i,r,n)},vr.prototype.SkipAttributeTransform=vr.prototype.SkipAttributeTransform=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),li(t,e)},vr.prototype.GetEncodedGeometryType_Deprecated=vr.prototype.GetEncodedGeometryType_Deprecated=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ci(t,e)},vr.prototype.DecodeBufferToPointCloud=vr.prototype.DecodeBufferToPointCloud=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(ui(i,e,t),cr)},vr.prototype.DecodeBufferToMesh=vr.prototype.DecodeBufferToMesh=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(hi(i,e,t),cr)},vr.prototype.__destroy__=vr.prototype.__destroy__=function(){var e=this.ptr;di(e)},function(){function e(){a.ATTRIBUTE_INVALID_TRANSFORM=fi(),a.ATTRIBUTE_NO_TRANSFORM=pi(),a.ATTRIBUTE_QUANTIZATION_TRANSFORM=mi(),a.ATTRIBUTE_OCTAHEDRON_TRANSFORM=gi(),a.INVALID=bi(),a.POSITION=vi(),a.NORMAL=_i(),a.COLOR=yi(),a.TEX_COORD=Ai(),a.GENERIC=Ei(),a.INVALID_GEOMETRY_TYPE=wi(),a.POINT_CLOUD=Si(),a.TRIANGULAR_MESH=Ti(),a.DT_INVALID=xi(),a.DT_INT8=Mi(),a.DT_UINT8=Ri(),a.DT_INT16=Pi(),a.DT_UINT16=Ci(),a.DT_INT32=ki(),a.DT_UINT32=Oi(),a.DT_INT64=Di(),a.DT_UINT64=Ni(),a.DT_FLOAT32=Ii(),a.DT_FLOAT64=Li(),a.DT_BOOL=Ui(),a.DT_TYPES_COUNT=Vi(),a.OK=Fi(),a.DRACO_ERROR=Gi(),a.IO_ERROR=Bi(),a.INVALID_PARAMETER=ji(),a.UNSUPPORTED_VERSION=zi(),a.UNKNOWN_VERSION=Hi()}B?e():j(e)}(),"function"==typeof a.onModuleParsed&&a.onModuleParsed(),a.Decoder.prototype.GetEncodedGeometryType=function(e){if(e.__class__&&e.__class__===a.DecoderBuffer)return a.Decoder.prototype.GetEncodedGeometryType_Deprecated(e);if(e.byteLength<8)return a.INVALID_GEOMETRY_TYPE;switch(e[7]){case 0:return a.POINT_CLOUD;case 1:return a.TRIANGULAR_MESH;default:return a.INVALID_GEOMETRY_TYPE}},e.ready});e.exports=n},9649:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessorLoader=void 0;const r=i(7038),n=i(4465),a=i(8877);t.AccessorLoader=class{constructor(e,t){this._content=e,this._bufferViewLoader=t,this._logger=a.Logger.instance,this._loaded={}}getAccessor(e){if(!this._content.accessors)throw new Error("AccessorLoader.getAccessor: Accessors not available.");if(!this._content.accessors[e])throw new Error("AccessorLoader.getAccessor: Accessor not available.");if(!this._loaded[e])throw new Error("AccessorLoader.getAccessor: Accessor not loaded.");return this._loaded[e]}load(){if(this._content.accessors)for(let e=0;e<this._content.accessors.length;e++){const t=e;if(!this._content.accessors[t])throw new Error("AccessorLoader.load: BufferView not available.");const i=this._content.accessors[t];if(void 0===i.bufferView){this._loaded[t]=null;continue}const a=this._bufferViewLoader.getBufferView(i.bufferView),s=n.ACCESSORTYPE_V2[i.type];5124===i.componentType&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const o=n.ACCESSORCOMPONENTTYPE_V2[i.componentType],l=o.BYTES_PER_ELEMENT,c=l*s,u=i.byteOffset||0,h=void 0!==i.bufferView&&this._content.bufferViews?this._content.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized,f=this._content.bufferViews?this._content.bufferViews[i.bufferView].target:void 0;let p;if(p=h&&h!==c?new o(a,Math.floor(u/h)*h,i.count*h/l):null===a?new o(i.count*s):new o(a,u,i.count*s),void 0===i.sparse)this._loaded[t]=new r.AttributeData(p,s,c,u,l,d,i.count,i.min,i.max,h,f);else{const e=n.ACCESSORTYPE_V2.SCALAR,a=n.ACCESSORCOMPONENTTYPE_V2[i.sparse.indices.componentType],m=i.sparse.indices.byteOffset||0,g=i.sparse.values.byteOffset||0;if(!i.sparse.indices.bufferView||!i.sparse.values.bufferView)throw new Error("Sparse Mesh not properly defined.");const b=new a(this._bufferViewLoader.getBufferView(i.sparse.indices.bufferView),m,i.sparse.count*e),v=new o(this._bufferViewLoader.getBufferView(i.sparse.values.bufferView),g,i.sparse.count*s);this._loaded[t]=new r.AttributeData(p,s,c,u,l,d,i.count,i.min,i.max,h,f,!0,b,v)}}}}},8103:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLoader=void 0;const n=i(8877);t.BufferLoader=class{constructor(e,t,i){this._content=e,this._body=t,this._baseUri=i,this._httpClient=n.HttpClient.instance,this._loaded={}}getBuffer(e){if(!this._content.buffers)throw new Error("BufferLoader.getBuffer: Buffers not available.");if(!this._content.buffers[e])throw new Error("BufferLoader.getBuffer: Buffer not available.");if(!this._loaded[e])throw new Error("BufferLoader.getBuffer: Buffer not loaded.");return this._loaded[e]}load(){return r(this,void 0,void 0,(function*(){if(!this._content.buffers)return;let e=[];for(let t=0;t<this._content.buffers.length;t++){const i=t,r=this._content.buffers[i];if(r.type&&"arraybuffer"!==r.type)throw new Error(`BufferLoader.load: ${r.type} is not supported.`);if(void 0===r.uri&&0===i){if(!this._body)throw new Error("BufferLoader.load: Buffer not available.");return void(this._loaded[i]=this._body)}const n=/^data:(.*?)(;base64)?,(.*)$/,a=r.uri.match(n);if(a){const e=!!a[2];let t=a[3];t=decodeURIComponent(t),e&&(t=atob(t));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);this._loaded[i]=r.buffer}else{let t=this._httpClient.get(this._baseUri+"/"+r.uri,{responseType:"arraybuffer"}).then((e=>{this._loaded[i]=e.data}));e.push(t)}}yield Promise.all(e)}))}}},9056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferViewLoader=void 0,t.BufferViewLoader=class{constructor(e,t){this._content=e,this._bufferLoader=t,this._loaded={}}getBufferView(e){if(!this._content.bufferViews)throw new Error("BufferViewLoader.load: BufferViews not available.");if(!this._content.bufferViews[e])throw new Error("BufferViewLoader.load: BufferView not available.");if(!this._loaded[e])throw new Error("BufferViewLoader.load: BufferView not loaded.");return this._loaded[e]}load(){if(this._content.bufferViews)for(let e=0;e<this._content.bufferViews.length;e++){const t=e;if(!this._content.bufferViews[t])throw new Error("BufferViewLoader.load: BufferView not available.");const i=this._content.bufferViews[t],r=i.byteLength||0,n=i.byteOffset||0;if(void 0===i.buffer)throw new Error("BufferViewLoader.load: BufferView has no buffer defined.");const a=this._bufferLoader.getBuffer(i.buffer).slice(n,n+r);this._loaded[t]=a}}}},206:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryLoader=void 0;const r=i(3858),n=i(7038),a=i(2549);t.GeometryLoader=class{constructor(e,t,i,r,a){this._content=e,this._accessorLoader=t,this._bufferViewLoader=i,this._materialLoader=r,this._dracoModule=a,this._materialVariantsData=new n.MaterialVariantsData,this._loaded={}}get materialVariantsData(){return this._materialVariantsData}loadMesh(e,t){if(!this._content.meshes)throw new Error("GeometryLoader.loadMesh: Meshes not available.");if(!this._content.meshes[e])throw new Error("GeometryLoader.loadMesh: Mesh not available.");const i=this._content.meshes[e],n=new r.TreeNode(i.name||"mesh_"+e);if(i.primitives)for(let r=0,a=i.primitives.length;r<a;r++)n.addChild(this.loadPrimitive(e,i.primitives,r,i.weights||t));return n}loadPrimitive(e,t,i,s=[]){const o=t[i],l=new r.TreeNode("primitive_"+i);if(this._loaded["mesh_"+e+"_primitive_"+i])return l.data.push(this._loaded["mesh_"+e+"_primitive_"+i].clone()),l;const c={};let u=null;const h={};if(o.extensions&&o.extensions[a.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]){const e=o.extensions[a.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION],t=this._bufferViewLoader.getBufferView(e.bufferView),i=new this._dracoModule.Decoder,r=new Int8Array(t),s=i.GetEncodedGeometryType(r);let l;if(s===this._dracoModule.TRIANGULAR_MESH?(l=new this._dracoModule.Mesh,i.DecodeArrayToMesh(r,r.byteLength,l)):s===this._dracoModule.POINT_CLOUD&&(l=new this._dracoModule.PointCloud,i.DecodeArrayToPointCloud(r,r.byteLength,l)),void 0===e.attributes.POSITION){const e="No position attribute found in the mesh.";throw this._dracoModule.destroy(i),this._dracoModule.destroy(l),new Error(e)}for(let t in e.attributes){const r=i.GetAttributeByUniqueId(l,e.attributes[t]),a=new this._dracoModule.DracoFloat32Array;i.GetAttributeFloatForAllPoints(l,r,a);const s=r.byte_offset(),o=r.normalized(),u=r.num_components(),h=l.num_points()*u,d=h*Float32Array.BYTES_PER_ELEMENT,f=this._dracoModule._malloc(d);i.GetAttributeDataArrayForAllPoints(l,r,this._dracoModule.DT_FLOAT32,d,f);const p=new Float32Array(this._dracoModule.HEAPF32.buffer,f,h).slice();this._dracoModule._free(f),t.includes("COLOR")&&p.forEach(((e,t)=>p[t]=Math.max(0,Math.min(1,e)))),c[t]=new n.AttributeData(p,u,p.BYTES_PER_ELEMENT*u,s,p.BYTES_PER_ELEMENT,o,p.length/u)}if(s==this._dracoModule.TRIANGULAR_MESH){const e=3*l.num_faces(),t=4*e,r=this._dracoModule._malloc(t);i.GetTrianglesUInt32Array(l,t,r);const a=new Uint32Array(this._dracoModule.HEAPF32.buffer,r,e).slice();this._dracoModule._free(r),u=new n.AttributeData(a,1,1*a.BYTES_PER_ELEMENT,0,a.BYTES_PER_ELEMENT,!1,a.length)}this._dracoModule.destroy(i),this._dracoModule.destroy(l)}for(let e in o.attributes){if(c[e]){h[e]=e;continue}let t=e;if(/\d/.test(t)&&!t.includes("_")){const e=t.search(/\d/);t=t.substring(0,e)+"_"+t.substring(e,t.length)}else"TEXCOORD"===t||"COLOR"===t||"JOINTS"===t||"WEIGHTS"===t?t+="_0":"UV"===t&&(t="TEXCOORD_0");h[e]=t,c[t]=this._accessorLoader.getAccessor(o.attributes[e])}if(!o.indices&&0!==o.indices||u||(u=this._accessorLoader.getAccessor(o.indices)),o.targets)for(let e=0;e<o.targets.length;e++)for(let t in o.targets[e])c[t]&&c[h[t]].morphAttributeData.push(this._accessorLoader.getAccessor(o.targets[e][t]));let d=null;(o.material||0===o.material)&&(d=this._materialLoader.getMaterial(o.material));const f=new n.PrimitiveData(c,u),p=new n.GeometryData(f,o.mode,d);if(o.extensions&&o.extensions[a.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS]){this._materialVariantsData.geometryData.push(p);const e=o.extensions[a.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS];for(let t=0;t<e.mappings.length;t++){const i=e.mappings[t],r=this._materialLoader.getMaterial(i.material);for(let e=0;e<i.variants.length;e++)p.materialVariants.push({variant:i.variants[e],material:r})}}return p.morphWeights=s,this._loaded["mesh_"+e+"_primitive_"+i]=p,l.data.push(p),l}}},3883:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialLoader=void 0;const n=i(8877),a=i(887),s=i(7038),o=i(4320),l=i(2549);t.MaterialLoader=class{constructor(e,t){this._content=e,this._textureLoader=t,this._converter=n.Converter.instance,this._materialEngine=o.MaterialEngine.instance,this._loaded={}}getMaterial(e){if(!this._content.materials)throw new Error("MaterialLoader.getMaterial: Materials not available.");if(!this._content.materials[e])throw new Error("MaterialLoader.getMaterial: Material not available.");if(!this._loaded[e])throw new Error("MaterialLoader.getMaterial: Material not loaded.");return this._loaded[e]}load(){return r(this,void 0,void 0,(function*(){if(this._loaded={},!this._content.materials)return;let e=[];for(let t=0;t<this._content.materials.length;t++){const i=t,n=this._content.materials[i],a=n.extensions||{},o={};if(void 0!==n.name&&(o.name=n.name),a[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET]){const t=a[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET];e.push(new Promise(((e,a)=>r(this,void 0,void 0,(function*(){try{const r=yield this._materialEngine.loadPresetMaterial(t.materialpreset);r.name=n.name,r.color=t.color,this._loaded[i]=r,e()}catch(e){a(e)}})))));continue}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS],t=o;if(t.color="#ffffff",t.opacity=1,void 0!==e.diffuseFactor&&(t.color=[255*e.diffuseFactor[0],255*e.diffuseFactor[1],255*e.diffuseFactor[2]],t.opacity=e.diffuseFactor[3]),void 0!==e.diffuseTexture){const i=e.diffuseTexture.extensions&&e.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;t.map=this.loadMap(e.diffuseTexture.index,i)}if(t.emissiveness="#000000",t.glossiness=void 0!==e.glossinessFactor?e.glossinessFactor:1,t.specular="#ffffff",void 0!==e.specularFactor&&(t.specular=[255*e.specularFactor[0],255*e.specularFactor[1],255*e.specularFactor[2]]),void 0!==e.specularGlossinessTexture){const i=e.specularGlossinessTexture.extensions&&e.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;t.specularGlossinessMap=this.loadMap(e.specularGlossinessTexture.index,i)}}else if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=o;if(e.color="#ffffff",e.opacity=1,void 0!==n.pbrMetallicRoughness&&(void 0!==n.pbrMetallicRoughness.baseColorFactor&&(e.color=[255*n.pbrMetallicRoughness.baseColorFactor[0],255*n.pbrMetallicRoughness.baseColorFactor[1],255*n.pbrMetallicRoughness.baseColorFactor[2]],e.opacity=n.pbrMetallicRoughness.baseColorFactor[3]),void 0!==n.pbrMetallicRoughness.baseColorTexture)){const t=n.pbrMetallicRoughness.baseColorTexture.extensions&&n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;e.map=this.loadMap(n.pbrMetallicRoughness.baseColorTexture.index,t)}}else{const e=o;if(void 0!==n.pbrMetallicRoughness){if(e.color="#ffffff",void 0!==n.pbrMetallicRoughness.baseColorFactor&&(e.color=[255*n.pbrMetallicRoughness.baseColorFactor[0],255*n.pbrMetallicRoughness.baseColorFactor[1],255*n.pbrMetallicRoughness.baseColorFactor[2]],e.opacity=n.pbrMetallicRoughness.baseColorFactor[3]),void 0!==n.pbrMetallicRoughness.baseColorTexture){const t=n.pbrMetallicRoughness.baseColorTexture.extensions&&n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;e.map=this.loadMap(n.pbrMetallicRoughness.baseColorTexture.index,t)}if(void 0!==n.pbrMetallicRoughness.metallicFactor&&(e.metalness=n.pbrMetallicRoughness.metallicFactor),void 0!==n.pbrMetallicRoughness.roughnessFactor&&(e.roughness=n.pbrMetallicRoughness.roughnessFactor),void 0!==n.pbrMetallicRoughness.metallicRoughnessTexture){const t=n.pbrMetallicRoughness.metallicRoughnessTexture.extensions&&n.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;e.metalnessRoughnessMap=this.loadMap(n.pbrMetallicRoughness.metallicRoughnessTexture.index,t)}}}if(void 0!==n.normalTexture){const e=n.normalTexture.extensions&&n.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;o.normalMap=this.loadMap(n.normalTexture.index,e),o.normalScale=1,void 0!==n.normalTexture.scale&&(o.normalScale=n.normalTexture.scale)}if(void 0!==n.occlusionTexture){const e=n.occlusionTexture.extensions&&n.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;o.aoMap=this.loadMap(n.occlusionTexture.index,e),void 0!==n.occlusionTexture.strength&&(o.aoMapIntensity=n.occlusionTexture.strength)}if(void 0!==n.emissiveTexture){const e=n.emissiveTexture.extensions&&n.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;o.emissiveMap=this.loadMap(n.emissiveTexture.index,e)}if(void 0!==n.emissiveFactor&&(o.emissiveness=[255*n.emissiveFactor[0],255*n.emissiveFactor[1],255*n.emissiveFactor[2]]),void 0!==n.alphaMode&&(o.alphaMode=n.alphaMode.toLowerCase()===s.MATERIAL_ALPHA.MASK?s.MATERIAL_ALPHA.MASK:n.alphaMode.toLowerCase()===s.MATERIAL_ALPHA.BLEND?s.MATERIAL_ALPHA.BLEND:s.MATERIAL_ALPHA.OPAQUE,o.alphaMode===s.MATERIAL_ALPHA.MASK&&(o.alphaCutoff=void 0!==n.alphaCutoff?n.alphaCutoff:.5)),void 0!==n.alphaCutoff&&(o.alphaCutoff=n.alphaCutoff),void 0!==n.doubleSided&&(o.side=n.doubleSided?s.MATERIAL_SIDE.DOUBLE:s.MATERIAL_SIDE.FRONT),a[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const e=o,t=new s.MaterialSpecularGlossinessData(e);this._loaded[i]=t;continue}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=o,t=new s.MaterialUnlitData(e);this._loaded[i]=t;continue}const c=o;if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT];if(void 0!==e.clearcoatFactor&&(c.clearcoat=e.clearcoatFactor),void 0!==e.clearcoatTexture){const t=e.clearcoatTexture.extensions&&e.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.clearcoatMap=this.loadMap(e.clearcoatTexture.index,t)}if(void 0!==e.clearcoatRoughnessFactor&&(c.clearcoatRoughness=e.clearcoatRoughnessFactor),void 0!==e.clearcoatRoughnessTexture){const t=e.clearcoatRoughnessTexture.extensions&&e.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.clearcoatRoughnessMap=this.loadMap(e.clearcoatRoughnessTexture.index,t)}if(void 0!==e.clearcoatNormalTexture){const t=e.clearcoatNormalTexture.extensions&&e.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.clearcoatNormalMap=this.loadMap(e.clearcoatNormalTexture.index,t)}}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR];void 0!==e.ior&&(c.ior=e.ior)}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION];if(void 0!==e.transmissionFactor&&(c.transmission=e.transmissionFactor),void 0!==e.transmissionTexture){const t=e.transmissionTexture.extensions&&e.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.transmissionMap=this.loadMap(e.transmissionTexture.index,t)}}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME];if(void 0!==e.thicknessFactor&&(c.thickness=e.thicknessFactor),void 0!==e.thicknessTexture){const t=e.thicknessTexture.extensions&&e.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.thicknessMap=this.loadMap(e.thicknessTexture.index,t)}void 0!==e.attenuationDistance&&(c.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&(c.attenuationColor=[255*e.attenuationColor[0],255*e.attenuationColor[1],255*e.attenuationColor[2]])}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN];if(c.sheen=1,void 0!==e.sheenColorFactor&&(c.sheenColor=[255*e.sheenColorFactor[0],255*e.sheenColorFactor[1],255*e.sheenColorFactor[2]]),void 0!==e.sheenRoughnessFactor&&(c.sheenRoughness=e.sheenRoughnessFactor),void 0!==e.sheenColorTexture){const t=e.sheenColorTexture.extensions&&e.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.sheenColorMap=this.loadMap(e.sheenColorTexture.index,t)}if(void 0!==e.sheenRoughnessTexture){const t=e.sheenRoughnessTexture.extensions&&e.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.sheenRoughnessMap=this.loadMap(e.sheenRoughnessTexture.index,t)}}if(a[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR]){const e=a[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR];if(void 0!==e.specularFactor&&(c.specularIntensity=e.specularFactor),void 0!==e.specularColorFactor&&(c.specularColor=[255*e.specularColorFactor[0],255*e.specularColorFactor[1],255*e.specularColorFactor[2]]),void 0!==e.specularColorTexture){const t=e.specularColorTexture.extensions&&e.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.specularColorMap=this.loadMap(e.specularColorTexture.index,t)}if(void 0!==e.specularTexture){const t=e.specularTexture.extensions&&e.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;c.specularIntensityMap=this.loadMap(e.specularTexture.index,t)}}const u=new s.MaterialStandardData(c);this._loaded[i]=u}yield Promise.all(e)}))}loadMap(e,t){if(!this._content.textures)throw new Error("Textures not available.");const i=this._content.textures[e];if(!this._content.images)throw new Error("Images not available.");const r=this._content.samplers&&i.sampler&&this._content.samplers[i.sampler]?this._content.samplers[i.sampler]:{},n=this._textureLoader.getTexture(e);return new s.MapData(n,r.wrapS,r.wrapT,r.minFilter,r.magFilter,void 0,void 0,t&&t.offset?a.vec2.fromValues(t.offset[0],t.offset[1]):void 0,t&&t.scale?a.vec2.fromValues(t.scale[0],t.scale[1]):void 0,t&&void 0!==t.rotation?t.rotation:0,!1)}}},5458:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=void 0;const n=i(8877);t.TextureLoader=class{constructor(e,t,i){this._content=e,this._bufferViewLoader=t,this._baseUri=i,this._converter=n.Converter.instance,this._httpClient=n.HttpClient.instance,this._loaded={}}getTexture(e){if(!this._content.textures)throw new Error("TextureLoader.getTexture: Textures not available.");if(!this._content.textures[e])throw new Error("TextureLoader.getTexture: Texture not available.");if(!this._loaded[e])throw new Error("TextureLoader.getTexture: Texture not loaded.");return this._loaded[e]}load(){return r(this,void 0,void 0,(function*(){if(!this._content.textures)return;let e=[];for(let t=0;t<this._content.textures.length;t++){const i=t,r=this._content.textures[i];if(!this._content.images)throw new Error("TextureLoader.load: Images not available.");const n=this._content.images[r.source],a=/^data:(.*?)(;base64)?,(.*)$/,s=/^https:\/\//;if(void 0!==n.bufferView){const t=this._bufferViewLoader.getBufferView(n.bufferView),r=new DataView(t),a=[];for(let e=0;e<r.byteLength;e+=1)a[e]=r.getUint8(e);const s=new Blob([new Uint8Array(a)],{type:n.mimeType}),o=URL.createObjectURL(s);e.push(new Promise(((e,t)=>{this._httpClient.loadTexture(o).then((r=>{this._converter.responseToImage(r).then((t=>{this._loaded[i]=t,URL.revokeObjectURL(o),e()})).catch((e=>t(e)))}))})))}else{const t=a.test(n.uri)||s.test(n.uri)?n.uri:`${this._baseUri}/${n.uri}`;e.push(new Promise(((e,r)=>{this._httpClient.loadTexture(t).then((t=>{this._converter.responseToImage(t).then((t=>{this._loaded[i]=t,e()}))})).catch((e=>r(e)))})))}}yield Promise.all(e)}))}}},6538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryEngine=void 0;const r=i(1183);Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return r.GeometryEngine}})},7767:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFConverter=t.GLTF_EXTENSIONS=void 0;const n=i(3441),a=i(3858),s=i(8877),o=i(4465),l=i(887),c=i(7038),u=i(7502);var h;(h=t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={})).KHR_BINARY_GLTF="KHR_binary_glTF",h.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",h.KHR_MATERIALS_UNLIT="KHR_materials_unlit",t.GLTFConverter=class{constructor(){this._converter=s.Converter.instance,this._eventEngine=s.EventEngine.instance,this._globalTransformationInverse=l.mat4.fromValues(1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1),this._uuidGenerator=s.UuidGenerator.instance,this._progressUpdateLimit=500,this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+n.build_data.build_version,version:"2.0",extensions:{}}},this._convertForAR=!1,this._eventId="",this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._nodes=[],this._numberOfNodes=0,this._progressTimer=0,this._promises=[],this._materialCache={},this._meshCache={}}static get instance(){return this._instance||(this._instance=new this)}convert(e,t=!1,i){var n,o;return r(this,void 0,void 0,(function*(){this._eventId=this._uuidGenerator.create();const r={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:0,status:"Starting glTF conversion."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_START,r),this._numberOfNodes=0,e.traverse((()=>this._numberOfNodes++)),this._progressTimer=performance.now(),this.reset(),this._convertForAR=t,this._viewport=i;const u=e.parent,h=new a.TreeNode("ShapeDiverRootNode");h.addChild(e);const d={name:h.name,nodes:[]},f=this._uuidGenerator.create();e.addTransformation({id:f,matrix:this._globalTransformationInverse});const p=this._uuidGenerator.create();if(t){const t=e.boundingBox.boundingSphere.center;let i=l.mat4.fromTranslation(l.mat4.create(),l.vec3.multiply(l.vec3.create(),l.vec3.fromValues(t[0],t[1],t[2]),l.vec3.fromValues(-1,-1,-1)));e.addTransformation({id:p,matrix:i})}if(this._viewport){if(this._viewport&&!1===e.excludeViewports.includes(this._viewport)&&0==(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._viewport))){const t=yield this.convertNode(e);-1!==t&&(null===(n=d.nodes)||void 0===n||n.push(t))}}else{const t=yield this.convertNode(e);-1!==t&&(null===(o=d.nodes)||void 0===o||o.push(t))}for(let t=0;t<e.transformations.length;t++)e.transformations[t].id===f&&e.removeTransformation(e.transformations[t]);if(t)for(let t=0;t<e.transformations.length;t++)e.transformations[t].id===p&&e.removeTransformation(e.transformations[t]);this._content.scenes=[],this._content.scenes.push(d),this.convertAnimations(),this._extensionsUsed.length>0&&(this._content.extensionsUsed=this._extensionsUsed),this._extensionsRequired.length>0&&(this._content.extensionsRequired=this._extensionsRequired);let m=0;for(;m!==this._promises.length;)m=this._promises.length,yield Promise.all(this._promises),yield new Promise((e=>setTimeout(e,0)));const g={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:.75,status:"GlTF images resolved."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_PROCESS,g);const b=new Blob(this._buffers,{type:"application/octet-stream"});return u&&u.addChild(e),this._content.buffers&&this._content.buffers.length>0&&(this._content.buffers[0].byteLength=b.size),new Promise(((e,t)=>{try{const i=new window.FileReader;i.readAsArrayBuffer(b),i.onloadend=()=>{const r=this.getPaddedArrayBuffer(i.result),n=new DataView(new ArrayBuffer(8));n.setUint32(0,r.byteLength,!0),n.setUint32(4,5130562,!0);const a=this.getPaddedArrayBuffer(this.stringToArrayBuffer(JSON.stringify(this._content)),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,a.byteLength,!0),o.setUint32(4,1313821514,!0);const l=new ArrayBuffer(12),u=new DataView(l);u.setUint32(0,1179937895,!0),u.setUint32(4,2,!0);const h=12+o.byteLength+a.byteLength+n.byteLength+r.byteLength;u.setUint32(8,h,!0);const d=new Blob([l,o,a,n,r],{type:"application/octet-stream"}),f=new window.FileReader;f.readAsArrayBuffer(d),f.onloadend=()=>{const t={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:1,status:"GlTF creation complete."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_END,t),e(f.result)},f.onerror=t},i.onerror=t}catch(e){t(e)}}))}))}convertAccessor(e){this._content.accessors||(this._content.accessors=[]);const t=this.convertBufferView(e),i=this.getMinMax(e),r={bufferView:t,byteOffset:0,componentType:this.getComponentType(e.array),normalized:e.normalized,count:+e.count,max:i.max,min:i.min,type:this.getType(e.itemSize)};return this._content.accessors.push(r),this._content.accessors.length-1}convertAnimations(){var e;!this._content.animations&&this._animations.length>0&&(this._content.animations=[]);for(let t=0;t<this._animations.length;t++){const i=this._animations[t],r={name:i.name||"animation_"+t,channels:[],samplers:[]};for(let e=0;e<i.tracks.length;e++){const t=i.tracks[e],n=this._nodes.find((e=>e.node===t.node));if(!n)continue;const a=Math.min(...t.times),s=Math.max(...t.times),o=new c.AttributeData(new Float32Array(t.times),1,4,0,4,!1,t.times.length,[a],[s]),l=[];l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==0)))),l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==1)))),l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==2)))),"rotation"===t.path&&l.push(Math.min(...t.values.filter(((e,t)=>t%4==3))));const u=[];u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==0)))),u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==1)))),u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==2)))),"rotation"===t.path&&u.push(Math.max(...t.values.filter(((e,t)=>t%4==3))));const h=new c.AttributeData(new Float32Array(t.values),"rotation"===t.path?4:3,"rotation"===t.path?16:12,0,4,!1,t.times.length,l,u,"rotation"===t.path?16:12),d={input:this.convertAccessor(o),output:this.convertAccessor(h),interpolation:t.interpolation.toUpperCase()};r.samplers.push(d);const f={sampler:r.samplers.length-1,target:{node:n.id,path:t.path}};r.channels.push(f)}null===(e=this._content.animations)||void 0===e||e.push(r)}}convertBuffer(e){return this._content.buffers||(this._content.buffers=[]),0===this._content.buffers.length&&(this._content.buffers=[{byteLength:0}]),this._buffers.push(e),0}convertBufferView(e){this._content.bufferViews||(this._content.bufferViews=[]);let t=this.getComponentType(e.array),i=o.ACCESSORCOMPONENTSIZE_V2[t];const r=4*Math.ceil(e.count*e.itemSize*i/4),n=new DataView(new ArrayBuffer(r));let a=0;for(let t=0;t<e.count;t++)for(let r=0;r<e.itemSize;r++){let s=0;e.itemSize>4?s=e.array[t*e.itemSize+r]:0===r?s=e.array[t*e.itemSize]:1===r?s=e.array[t*e.itemSize+1]:2===r?s=e.array[t*e.itemSize+2]:3===r&&(s=e.array[t*e.itemSize+3]),e.array instanceof Float32Array?n.setFloat32(a,s,!0):e.array instanceof Uint32Array?n.setUint32(a,s,!0):e.array instanceof Uint16Array?n.setUint16(a,s,!0):e.array instanceof Int16Array?n.setInt16(a,s,!0):e.array instanceof Uint8Array?n.setUint8(a,s):e.array instanceof Int8Array&&n.setInt8(a,s),a+=i}const s={buffer:this.convertBuffer(n.buffer),byteOffset:this._byteOffset,byteLength:r,target:e.target};return this._byteOffset+=r,this._content.bufferViews.push(s),this._content.bufferViews.length-1}convertBufferViewImage(e){return r(this,void 0,void 0,(function*(){return this._content.bufferViews||(this._content.bufferViews=[]),new Promise(((t,i)=>{try{const r=new window.FileReader;r.readAsArrayBuffer(e),r.onloadend=()=>{const e=this.getPaddedArrayBuffer(r.result),i={buffer:this.convertBuffer(e),byteOffset:this._byteOffset,byteLength:e.byteLength};this._byteOffset+=e.byteLength,this._content.bufferViews.push(i),t(this._content.bufferViews.length-1)},r.onerror=i}catch(e){i(e)}}))}))}convertImage(e){if(this._content.images||(this._content.images=[]),this._imageCache[e.image.src])return this._imageCache[e.image.src];const t={},i=document.createElement("canvas");i.width=e.image.width,i.height=e.image.height;const n=i.getContext("2d");e.flipY&&(n.translate(0,i.height),n.scale(1,-1));let a="image/png";if((e.image.src.endsWith(".jpg")||e.image.src.includes("image/jpeg"))&&(a="image/jpeg"),t.mimeType=a,/^data:(.*?)(;base64)?,(.*)$/.test(e.image.src)){const i=atob(e.image.src.split(",")[1]),n=e.image.src.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(i.length),s=new Uint8Array(a);for(let e=0;e<i.length;e++)s[e]=i.charCodeAt(e);const o=new Blob([a],{type:n});this._promises.push(new Promise(((e,i)=>r(this,void 0,void 0,(function*(){try{const i=yield this.convertBufferViewImage(o);t.bufferView=i,e()}catch(e){i(e)}})))))}else n.drawImage(e.image,0,0,i.width,i.height),this._promises.push(new Promise(((e,n)=>{try{i.toBlob((i=>r(this,void 0,void 0,(function*(){try{const r=yield this.convertBufferViewImage(i);t.bufferView=r,e()}catch(e){n(e)}}))),a)}catch(e){n(e)}})));return this._content.images.push(t),this._imageCache[e.image.src]=this._content.images.length-1,this._content.images.length-1}convertMaterial(e,t=!0){if(this._content.materials||(this._content.materials=[]),this._materialCache[e.id+"_"+e.version])return this._materialCache[e.id+"_"+e.version];const i={name:e.id,pbrMetallicRoughness:{}};if(e instanceof c.MaterialSpecularGlossinessData){this._extensionsUsed.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsUsed.push("KHR_materials_pbrSpecularGlossiness"),this._extensionsRequired.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsRequired.push("KHR_materials_pbrSpecularGlossiness");const r={};r.diffuseFactor=this._converter.toColorArray(e.color),r.diffuseFactor[3]=e.opacity,e.map&&t&&(r.diffuseTexture={index:this.convertTexture(e.map)}),r.specularFactor=this._converter.toColorArray(e.specular),r.glossinessFactor=e.glossiness,e.specularGlossinessMap&&t&&(r.specularGlossinessTexture={index:this.convertTexture(e.specularGlossinessMap)}),i.extensions={KHR_materials_pbrSpecularGlossiness:r}}else if(e instanceof c.MaterialUnlitData)this._extensionsUsed.includes("KHR_materials_unlit")||this._extensionsUsed.push("KHR_materials_unlit"),this._extensionsRequired.includes("KHR_materials_unlit")||this._extensionsRequired.push("KHR_materials_unlit"),i.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(e.color),i.pbrMetallicRoughness.baseColorFactor[3]=e.opacity,e.map&&t&&(i.pbrMetallicRoughness.baseColorTexture={index:this.convertTexture(e.map)}),i.extensions={KHR_materials_unlit:{}};else{const n=e;i.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(n.color),i.pbrMetallicRoughness.baseColorFactor[3]=n.opacity,n.map&&t&&(i.pbrMetallicRoughness.baseColorTexture={index:this.convertTexture(n.map)}),i.pbrMetallicRoughness.metallicFactor=n.metalnessMap?1:n.metalness,i.pbrMetallicRoughness.roughnessFactor=n.roughnessMap?1:n.roughness,n.metalnessRoughnessMap&&t?i.pbrMetallicRoughness.metallicRoughnessTexture={index:this.convertTexture(n.metalnessRoughnessMap)}:(n.metalnessMap||n.roughnessMap)&&t&&this._promises.push(new Promise(((e,t)=>r(this,void 0,void 0,(function*(){try{const t=yield(0,u.combineTextures)(void 0,n.roughnessMap?n.roughnessMap.image:void 0,n.metalnessMap?n.metalnessMap.image:void 0),r=n.roughnessMap||n.metalnessMap;i.pbrMetallicRoughness.metallicRoughnessTexture={index:this.convertTexture(new c.MapData(t,r.wrapS,r.wrapT,r.minFilter,r.magFilter,r.center,r.color,r.offset,r.repeat,r.rotation,r.flipY))},e()}catch(e){t(e)}})))))}return e.normalMap&&t&&(i.normalTexture={index:this.convertTexture(e.normalMap)}),e.aoMap&&t&&(i.occlusionTexture={index:this.convertTexture(e.aoMap)}),e.emissiveMap&&t&&(i.emissiveTexture={index:this.convertTexture(e.emissiveMap)}),e.emissiveness&&(i.emissiveFactor=this._converter.toColorArray(e.emissiveness)),i.alphaMode=e.alphaMode.toUpperCase(),e.alphaMode===c.MATERIAL_ALPHA.MASK&&(i.alphaCutoff=e.alphaCutoff),i.doubleSided=e.side===c.MATERIAL_SIDE.DOUBLE,this._content.materials.push(i),this._materialCache[e.id+"_"+e.version]=this._content.materials.length-1,this._materialCache[e.id+"_"+e.version]}convertMesh(e){var t;if(this._content.meshes||(this._content.meshes=[]),this._meshCache[e.id+"_"+e.version])return this._meshCache[e.id+"_"+e.version];const i={primitives:[],name:e.id};return null===(t=i.primitives)||void 0===t||t.push(this.convertPrimitive(e,e.primitive)),this._content.meshes.push(i),this._meshCache[e.id+"_"+e.version]=this._content.meshes.length-1,this._meshCache[e.id+"_"+e.version]}convertNode(e){var t;return r(this,void 0,void 0,(function*(){this._content.nodes||(this._content.nodes=[]);const i={name:this._convertForAR?this._uuidGenerator.create():e.name};if(e.transformations.length>0){let t=e.nodeMatrix;e.nodeMatrix.filter((e=>isNaN(e)||e===1/0||e===-1/0)).length>0&&(t=l.mat4.create()),i.matrix=[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}for(let t=0;t<e.data.length;t++)e.data[t]instanceof c.GeometryData&&(this._convertForAR?e.data[t].mode!==c.PRIMITIVE_MODE.POINTS&&e.data[t].mode!==c.PRIMITIVE_MODE.LINES&&e.data[t].mode!==c.PRIMITIVE_MODE.LINE_LOOP&&e.data[t].mode!==c.PRIMITIVE_MODE.LINE_STRIP&&(i.mesh=this.convertMesh(e.data[t])):i.mesh=this.convertMesh(e.data[t])),e.data[t]instanceof c.AnimationData&&this._animations.push(e.data[t]);e.children.length>0&&(i.children=[]);for(let r=0;r<e.children.length;r++)if(!0===e.children[r].visible){if(this._viewport){if(e.children[r].excludeViewports.includes(this._viewport))continue;if(e.children[r].restrictViewports.length>0&&!e.children[r].restrictViewports.includes(this._viewport))continue}const n=yield this.convertNode(e.children[r]);-1!==n&&(null===(t=i.children)||void 0===t||t.push(n))}if(void 0!==i.children&&0===i.children.length&&(i.children=void 0),performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:this._content.nodes.length/this._numberOfNodes/2,status:`GlTF conversion progress: ${this._content.nodes.length}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return void 0===i.camera&&void 0===i.children&&void 0===i.mesh&&void 0===i.extensions&&void 0===i.extras&&void 0===i.skin?-1:(this._content.nodes.push(i),this._nodes.push({node:e,id:this._content.nodes.length-1}),this._content.nodes.length-1)}))}convertPrimitive(e,t){const i={attributes:{},mode:e.mode};for(let e in t.attributes)if(t.attributes[e].array.length>0)if(e.includes("COLOR")){if(t.attributes[e].itemSize%4==0)i.attributes[e]=this.convertAccessor(t.attributes[e]);else if(t.attributes[e].itemSize%3==0){const r=t.attributes[e],n=new Float32Array(r.array.length/3*4);let a=0;for(let e=0;e<n.length;e+=4)n[e]=r.array[a]/(1===r.elementBytes?255:1),n[e+1]=r.array[a+1]/(1===r.elementBytes?255:1),n[e+2]=r.array[a+2]/(1===r.elementBytes?255:1),n[e+3]=1,a+=3;i.attributes[e]=this.convertAccessor(new c.AttributeData(n,4,16,r.byteOffset,4,r.normalized,r.count,r.min,r.max,r.byteStride))}}else i.attributes[e]=this.convertAccessor(t.attributes[e]);if(t.indices&&(i.indices=this.convertAccessor(t.indices)),e.material){const t=Object.keys(i.attributes).find((e=>e.includes("TEXCOORD")));i.material=this.convertMaterial(e.material,!!t)}return i}convertTexture(e){this._content.textures||(this._content.textures=[]);const t={source:this.convertImage(e)};return this._content.textures.push(t),this._content.textures.length-1}getComponentType(e){switch(!0){case e instanceof Int8Array:return 5120;case e instanceof Uint8Array:return 5121;case e instanceof Int16Array:return 5122;case e instanceof Uint16Array:return 5123;case e instanceof Uint32Array:return 5125;default:return 5126}}getMinMax(e){const t={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=0;i<e.count;i++)for(let r=0;r<e.itemSize;r++){let n=0;e.itemSize>4?n=e.array[i*e.itemSize+r]:0===r?n=e.array[i*e.itemSize]:1===r?n=e.array[i*e.itemSize+1]:2===r?n=e.array[i*e.itemSize+2]:3===r&&(n=e.array[i*e.itemSize+3]),t.min[r]=Math.min(t.min[r],n),t.max[r]=Math.max(t.max[r],n)}return t}getPaddedArrayBuffer(e,t=0){const i=4*Math.ceil(e.byteLength/4);if(i!==e.byteLength){const r=new Uint8Array(i);if(r.set(new Uint8Array(e)),0!==t)for(let n=e.byteLength;n<i;n++)r[n]=t;return r.buffer}return e}getType(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:default:return"VEC3";case 4:return"VEC4";case 9:return"MAT3";case 18:return"MAT4"}}reset(){this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+n.build_data.build_version,version:"2.0",extensions:{}}},this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._materialCache={},this._meshCache={},this._nodes=[],this._promises=[],this._convertForAR=!1,this._viewport=void 0}stringToArrayBuffer(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;const t=new Uint8Array(new ArrayBuffer(e.length));for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);t[i]=r>255?32:r}return t.buffer}}},7163:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFConverter=void 0;const r=i(7767);Object.defineProperty(t,"GLTFConverter",{enumerable:!0,get:function(){return r.GLTFConverter}})},2345:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorEngine=void 0;const n=i(7038),a=i(3858),s=i(8877),o=i(5174);t.HTMLElementAnchorEngine=class{constructor(){this._converter=s.Converter.instance,this._inputValidator=s.InputValidator.instance,this._logger=s.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return r(this,void 0,void 0,(function*(){try{const t=new a.TreeNode("htmlElementAnchors");return"tag2d"===e.format?e.data.forEach((e=>{if(!e.location||!e.text)return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Tag2D elements did not have all necessary properties.");const i=this._inputValidator.sanitize(e.text);t.data.push(new n.HTMLElementAnchorTextData({location:this._converter.toVec3(e.location),data:{color:e.color||"#000000",text:i}}))})):"anchor"===e.format&&e.data.forEach((e=>{if(!e.location||!e.data)return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");let i,r;if(e.data.position&&(i={vertical:e.data.position.vertical,horizontal:e.data.position.horizontal}),e.intersectionTarget&&("string"==typeof e.intersectionTarget||Array.isArray(e.intersectionTarget)?r=e.intersectionTarget:e.intersectionTarget.min&&e.intersectionTarget.max&&(r=new o.Box(this._converter.toVec3(e.intersectionTarget.min),this._converter.toVec3(e.intersectionTarget.max)))),e.format&&"text"!==e.format){if("image"===e.format){if(!(e.data.src&&e.data.width&&e.data.height&&e.data.alt))return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");const a=e.data;t.data.push(new n.HTMLElementAnchorImageData({location:this._converter.toVec3(e.location),data:{alt:a.alt,height:"string"==typeof a.height?+a.height:a.height,width:"string"==typeof a.width?+a.width:a.width,src:a.src,hidden:a.hidden,position:i},hideable:e.hideable,viewports:e.viewports,intersectionTarget:r}))}}else{if(!e.data.text)return void this._logger.warn("HTMLElementAnchorEngine.load: The text property for an Anchor element is missing.");const a=e.data,s=this._inputValidator.sanitize(a.text);t.data.push(new n.HTMLElementAnchorTextData({location:this._converter.toVec3(e.location),data:{color:a.color||"#000000",text:s,hidden:a.hidden,textAlign:a.textAlign,position:i},hideable:e.hideable,viewports:e.viewports,intersectionTarget:r}))}this._logger.warn(`HTMLElementAnchorEngine.load: The Anchor does not have a recognized format: ${e.format}`)})),t}catch(e){throw new s.ShapeDiverViewerDataProcessingError("HTMLElementAnchorEngine.load: Loading of anchors failed.")}}))}}},9780:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorEngine=void 0;const r=i(2345);Object.defineProperty(t,"HTMLElementAnchorEngine",{enumerable:!0,get:function(){return r.HTMLElementAnchorEngine}})},421:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialEngine=void 0;const n=i(3858),a=i(8877),s=i(7038),o=i(887),l=i(7244);t.MaterialEngine=class{constructor(){this._converter=a.Converter.instance,this._httpClient=a.HttpClient.instance,this._logger=a.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return r(this,void 0,void 0,(function*(){const t=new n.TreeNode(e.name||"material");if(!e)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Invalid content was provided to material engine.");let i=new s.MaterialStandardData;if(!e.data)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: No material data was provided to material engine.");{const t=e.data;let r;if(t.materialpreset&&(r=this.loadPresetMaterialDefinition(t.materialpreset)),t.materialType&&"standard"!==t.materialType);else if(t.version)if("1.0"===t.version)i=yield this.loadMaterialV3(this.loadMaterialDefinitionV1(t,r));else if("2.0"===t.version)i=yield this.loadMaterialV3(this.loadMaterialDefinitionV2(t,r));else{if("3.0"!==t.version)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Material data version not supported.");i=yield this.loadMaterialV3(this.loadMaterialDefinitionV3(t,r))}}return t.data.push(i),t}))}loadMap(e,t){return r(this,void 0,void 0,(function*(){let i;return i=t?yield this._converter.responseToImage(yield this._httpClient.loadTexture("https://viewer.shapediver.com/v2/materials/1024/"+t+"/"+e)):yield this._converter.responseToImage(yield this._httpClient.loadTexture(e)),new s.MapData(i)}))}loadMapWithProperties(e){return r(this,void 0,void 0,(function*(){let t=yield this._converter.responseToImage(yield this._httpClient.loadTexture(e.href));const i=1===e.wrapS?s.TEXTURE_WRAPPING.CLAMP_TO_EDGE:2===e.wrapS?s.TEXTURE_WRAPPING.MIRRORED_REPEAT:s.TEXTURE_WRAPPING.REPEAT,r=1===e.wrapT?s.TEXTURE_WRAPPING.CLAMP_TO_EDGE:2===e.wrapT?s.TEXTURE_WRAPPING.MIRRORED_REPEAT:s.TEXTURE_WRAPPING.REPEAT,n=e.center?o.vec2.fromValues(e.center[0],e.center[1]):o.vec2.fromValues(0,0),a=e.color?o.vec4.fromValues(e.color[0]/255,e.color[1]/255,e.color[2]/255,e.color[3]/255):o.vec4.fromValues(1,1,1,1),l=e.offset?o.vec2.fromValues(e.offset[0],e.offset[1]):o.vec2.fromValues(0,0),c=e.repeat?o.vec2.fromValues(e.repeat[0],e.repeat[1]):o.vec2.fromValues(1,1);return new s.MapData(t,i,r,s.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR,s.TEXTURE_FILTERING.LINEAR,n,a,l,c,e.rotation||0)}))}loadMaterialDefinitionV1(e,t={}){return e.color?t.color=e.color:e.diffuse&&(t.color=e.diffuse),(e.shine||0===e.shine)&&(t.metalness=Math.min(1,e.shine),t.roughness=1-Math.min(1,e.shine)),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),e.bitmaptexture&&(t.bitmaptexture={href:e.bitmaptexture}),e.bumptexture&&(t.bumptexture={href:e.bumptexture}),e.transparencytexture&&(t.transparencytexture={href:e.transparencytexture}),t}loadMaterialDefinitionV2(e,t={}){return e.color&&(t.color=e.color),t.side=e.side,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaThreshold=e.alphaThreshold),e.bitmaptexture&&(t.bitmaptexture={href:e.bitmaptexture}),e.metalnesstexture&&(t.metalnesstexture={href:e.metalnesstexture}),e.roughnesstexture&&(t.roughnesstexture={href:e.roughnesstexture}),e.bumptexture&&(t.bumptexture={href:e.bumptexture}),e.normaltexture&&(t.normaltexture={href:e.normaltexture}),e.transparencytexture&&(t.transparencytexture={href:e.transparencytexture}),t}loadMaterialDefinitionV3(e,t={}){return e.color&&(t.color=e.color),t.side=e.side,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaThreshold=e.alphaThreshold),(e.bumpAmplitude||0===e.bumpAmplitude)&&(t.bumpAmplitude=e.bumpAmplitude),e.bitmaptexture&&(t.bitmaptexture=e.bitmaptexture),e.metalnesstexture&&(t.metalnesstexture=e.metalnesstexture),e.roughnesstexture&&(t.roughnesstexture=e.roughnesstexture),e.bumptexture&&(t.bumptexture=e.bumptexture),e.normaltexture&&(t.normaltexture=e.normaltexture),e.transparencytexture&&(t.transparencytexture=e.transparencytexture),t}loadMaterialV3(e){return r(this,void 0,void 0,(function*(){const t=new s.MaterialStandardData,i=[];return e.color&&(t.color=e.color),t.side="front"===e.side?s.MATERIAL_SIDE.FRONT:"back"===e.side?s.MATERIAL_SIDE.BACK:s.MATERIAL_SIDE.DOUBLE,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.opacity=1-e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaCutoff=e.alphaThreshold),(e.bumpAmplitude||0===e.bumpAmplitude)&&(t.bumpScale=e.bumpAmplitude),e.bitmaptexture&&i.push(this.loadMapWithProperties(e.bitmaptexture).then((e=>(e&&(t.map=e),e)))),e.metalnesstexture&&i.push(this.loadMapWithProperties(e.metalnesstexture).then((e=>(e&&(t.metalnessMap=e),e)))),e.roughnesstexture&&i.push(this.loadMapWithProperties(e.roughnesstexture).then((e=>(e&&(t.roughnessMap=e),e)))),e.bumptexture&&i.push(this.loadMapWithProperties(e.bumptexture).then((e=>(e&&(t.bumpMap=e),e)))),e.normaltexture&&i.push(this.loadMapWithProperties(e.normaltexture).then((e=>(e&&(t.normalMap=e),e)))),e.transparencytexture&&i.push(this.loadMapWithProperties(e.transparencytexture).then((e=>(e&&(t.alphaMap=e),e)))),yield Promise.all(i),t}))}loadPresetMaterial(e){return r(this,void 0,void 0,(function*(){return this.loadMaterialV3(this.loadPresetMaterialDefinition(e))}))}loadPresetMaterialDefinition(e){const t={},i=this.getClassAndSpecificId(e);return l.materialDatabase[i.class]&&l.materialDatabase[i.class][i.specific]?(this.assignSpecificDefinition(i,l.materialDatabase[i.class][i.specific],t),this.assignGeneralDefinition(i,l.materialDatabase[i.class].properties,l.materialDatabase[i.class][i.specific],t)):l.materialDatabase[i.class]&&l.materialDatabase[i.class]["00"]?(this.assignSpecificDefinition({class:i.class,specific:"00"},l.materialDatabase[i.class]["00"],t),this.assignGeneralDefinition({class:i.class,specific:"00"},l.materialDatabase[i.class].properties,l.materialDatabase[i.class]["00"],t)):(this.assignSpecificDefinition({class:"00",specific:"00"},l.materialDatabase["00"]["00"],t),this.assignGeneralDefinition({class:"00",specific:"00"},l.materialDatabase["00"].properties,l.materialDatabase["00"]["00"],t)),t}assignGeneralDefinition(e,t,i,r){t.transparencytexture&&!i.transparencytexture&&(r.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.transparencytexture}),t.hasOwnProperty("alphaThreshold")&&!i.hasOwnProperty("alphaThreshold")&&(r.alphaThreshold=t.alphaThreshold),t.bumptexture&&!i.bumptexture&&(r.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.bumptexture}),t.hasOwnProperty("bumpAmplitude")&&!i.hasOwnProperty("bumpAmplitude")&&(r.bumpAmplitude=t.bumpAmplitude),t.color&&!i.color&&(r.color=t.color),t.bitmaptexture&&!i.bitmaptexture&&(r.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.bitmaptexture}),t.hasOwnProperty("metalness")&&!i.hasOwnProperty("metalness")&&(r.metalness=t.metalness),t.metalnesstexture&&!i.metalnesstexture&&(r.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.metalnesstexture}),t.normaltexture&&!i.normaltexture&&(r.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.normaltexture}),t.hasOwnProperty("transparency")&&!i.hasOwnProperty("transparency")&&(r.transparency=t.transparency),t.hasOwnProperty("roughness")&&!i.hasOwnProperty("roughness")&&(r.roughness=t.roughness),t.roughnesstexture&&!i.roughnesstexture&&(r.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.roughnesstexture}),t.side&&!i.side&&(r.side=t.side)}assignSpecificDefinition(e,t,i){t.transparencytexture&&(i.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.transparencytexture}),t.hasOwnProperty("alphaThreshold")&&(i.alphaThreshold=t.alphaThreshold),t.bumptexture&&(i.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.bumptexture}),t.hasOwnProperty("bumpAmplitude")&&(i.bumpAmplitude=t.bumpAmplitude),t.color&&(i.color=t.color),t.bitmaptexture&&(i.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.bitmaptexture}),t.hasOwnProperty("metalness")&&(i.metalness=t.metalness),t.metalnesstexture&&(i.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.metalnesstexture}),t.normaltexture&&(i.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.normaltexture}),t.hasOwnProperty("transparency")&&(i.transparency=t.transparency),t.hasOwnProperty("roughness")&&(i.roughness=t.roughness),t.roughnesstexture&&(i.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.roughnesstexture}),t.side&&(i.side=t.side)}getClassAndSpecificId(e){e<100&&e%10==0&&(e/=10),e<10&&(e*=100);const t=e=>String(e).padStart(2,"0").slice(0,2);return{class:t(Math.floor(e/100)),specific:t(e-100*Math.floor(e/100))}}}},4320:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialEngine=void 0;const r=i(421);Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return r.MaterialEngine}})},7244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialDatabase=void 0,t.materialDatabase={"00":{"00":{name:"Default material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Default materials"}},"01":{"01":{name:"Default groundplane material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Groundplane materials"}},"02":{"00":{name:"Default plastic material",color:[211,211,211,255],metalness:0,roughness:1,normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Plastic materials"}},"03":{"00":{name:"Default metal material",color:[205,205,205,255],roughness:.25},"01":{name:"Used metal material 1",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"02":{name:"Used metal material 2",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"03":{name:"Used metal material 3",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},10:{name:"Gold material",color:[230,207,92,255],roughness:0},11:{name:"Used gold material",color:[230,207,92,255],roughness:0,roughnesstexture:"roughnessMap.jpg"},21:{name:"Hammered metal material",color:[205,205,205,255],roughness:1,normaltexture:"normalMap.jpg"},properties:{name:"Metal materials",metalness:1}},"04":{"00":{name:"Default glass material",color:[211,211,211,255],metalness:1,roughness:0,transparency:.75},properties:{name:"Glass materials"}},"05":{"00":{bitmaptexture:"map.jpg",name:"Default wood material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Wood floor material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Natural oak material",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},11:{bitmaptexture:"map.jpg",name:"Premium oak material",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Wood materials",color:[211,211,211,255],metalness:0,roughness:1}},"06":{"00":{bitmaptexture:"map.jpg",name:"Default leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Dark brown leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"02":{bitmaptexture:"map.jpg",name:"Black leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Worn leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Leather materials",metalness:0,roughness:1}},"07":{"00":{bitmaptexture:"map.jpg",name:"Default fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Grey fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Fabric materials",metalness:1,roughness:1}}}},3418:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFEngine=void 0;const n=i(3858),a=i(8877),s=i(7038),o=i(4767),l=i(9116);t.SDTFEngine=class{constructor(){this._logger=a.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,t){return r(this,void 0,void 0,(function*(){const i=new n.TreeNode("sdtf");if(!e||e&&!e.href)throw new a.ShapeDiverViewerDataProcessingError("SDTFEngine.loadContent: Invalid content was provided to geometry engine.");const r=(t?yield(0,o.create)({authToken:t}):yield(0,o.create)()).createParser();this._parsedFile=yield r.readFromUrl(e.href),i.data.push(yield this.createSDTFOverview());for(let e=0;e<this._parsedFile.chunks.length;e++)i.children.push(yield this.loadChunk(this._parsedFile.chunks[e],e));return i}))}createSDTFOverview(){var e,t;return r(this,void 0,void 0,(function*(){const i={};for(let r=0;r<this._parsedFile.attributes.length;r++){const n=this._parsedFile.attributes[r];for(let r in n.entries){const a=n.entries[r],s=yield a.getContent(),o=void 0===a.typeHint?"undefined":a.typeHint.name,c=i[r]?i[r].filter((e=>e.typeHint===o)):[];if(i[r]&&c.length>0){const i=c[0];i.count++,l.SdtfPrimitiveTypeGuard.isStringType(o)&&((null===(e=i.values)||void 0===e?void 0:e.includes(s))||null===(t=i.values)||void 0===t||t.push(s)),l.SdtfPrimitiveTypeGuard.isNumberType(o)&&(i.min=Math.min(s,i.min),i.max=Math.max(s,i.max))}else i[r]?i[r].push({typeHint:o,count:1}):i[r]=[{typeHint:o,count:1}],l.SdtfPrimitiveTypeGuard.isStringType(o)&&(i[r][i[r].length-1].values=[s]),l.SdtfPrimitiveTypeGuard.isNumberType(o)&&(i[r][i[r].length-1].min=s,i[r][i[r].length-1].max=s)}}return new s.SDTFOverviewData(i)}))}loadAttributes(e){var t,i,n,a;return r(this,void 0,void 0,(function*(){const o=new s.SDTFAttributesData;for(let c in e.entries)if(l.SdtfPrimitiveTypeGuard.isBooleanType(null===(t=e.entries[c].typeHint)||void 0===t?void 0:t.name)||l.SdtfPrimitiveTypeGuard.isColorType(null===(i=e.entries[c].typeHint)||void 0===i?void 0:i.name)||l.SdtfPrimitiveTypeGuard.isNumberType(null===(n=e.entries[c].typeHint)||void 0===n?void 0:n.name)||l.SdtfPrimitiveTypeGuard.isStringType(null===(a=e.entries[c].typeHint)||void 0===a?void 0:a.name)){const t=void 0===e.entries[c].typeHint?"undefined":e.entries[c].typeHint.name;o.attributes[c]=new s.SDTFAttributeData(t,yield e.entries[c].getContent())}else{const t=void 0===e.entries[c].typeHint?"undefined":e.entries[c].typeHint.name;o.attributes[c]=new s.SDTFAttributeData(t,(()=>r(this,void 0,void 0,(function*(){return yield e.entries[c].getContent()}))))}return o}))}loadChunk(e,t){return r(this,void 0,void 0,(function*(){const i=new n.TreeNode(e.name||"chunk_"+t);if(void 0!==e.attributes&&i.data.push(yield this.loadAttributes(e.attributes)),void 0!==e.items&&e.items.length>0)for(let t=0,r=e.items.length;t<r;t++)i.addChild(yield this.loadItem(e.items[t],t));if(void 0!==e.nodes&&e.nodes.length>0)for(let t=0,r=e.nodes.length;t<r;t++)i.addChild(yield this.loadNode(e.nodes[t],t));return i}))}loadItem(e,t){return r(this,void 0,void 0,(function*(){const i=new n.TreeNode(t+"");let a;void 0!==e.attributes&&(a=yield this.loadAttributes(e.attributes));const o=void 0===e.typeHint?"undefined":e.typeHint.name;let c;return c=l.SdtfPrimitiveTypeGuard.isBooleanType(o)||l.SdtfPrimitiveTypeGuard.isColorType(o)||l.SdtfPrimitiveTypeGuard.isNumberType(o)||l.SdtfPrimitiveTypeGuard.isStringType(o)?new s.SDTFItemData(o,yield e.getContent(),null==a?void 0:a.attributes):new s.SDTFItemData(o,(()=>r(this,void 0,void 0,(function*(){return yield e.getContent()}))),null==a?void 0:a.attributes),i.data.push(c),i}))}loadNode(e,t){return r(this,void 0,void 0,(function*(){const i=new n.TreeNode(e.name||"node_"+t);if(void 0!==e.attributes&&i.data.push(yield this.loadAttributes(e.attributes)),void 0!==e.items&&e.items.length>0)for(let t=0,r=e.items.length;t<r;t++)i.addChild(yield this.loadItem(e.items[t],t));if(void 0!==e.nodes&&e.nodes.length>0)for(let t=0,r=e.nodes.length;t<r;t++)i.addChild(yield this.loadNode(e.nodes[t],t));return i}))}}},3705:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFEngine=void 0;const r=i(3418);Object.defineProperty(t,"SDTFEngine",{enumerable:!0,get:function(){return r.SDTFEngine}})},3066:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=void 0,(i=t.TAG3D_JUSTIFICATION||(t.TAG3D_JUSTIFICATION={})).TOP_LEFT="TL",i.TOP_CENTER="TC",i.TOP_RIGHT="TR",i.MIDDLE_LEFT="ML",i.MIDDLE_CENTER="MC",i.MIDDLE_RIGHT="MR",i.BOTTOM_LEFT="BL",i.BOTTOM_CENTER="BC",i.BOTTOM_RIGHT="BR"},7761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACCESSORTYPE=t.ACCESSORCOMPONENTSIZE=t.ACCESSORCOMPONENTTYPE=void 0,t.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint32Array,5125:Uint32Array,5126:Float32Array},t.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},t.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,VEC7:7,VEC10:10,VEC12:12,MAT2:4,MAT3:9,MAT4:16}},2e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACCESSORTYPE=t.ACCESSORCOMPONENTSIZE=t.ACCESSORCOMPONENTTYPE=void 0,t.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint16Array,5125:Uint32Array,5126:Float32Array},t.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},t.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}},4465:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=t.ACCESSORTYPE_V2=t.ACCESSORCOMPONENTSIZE_V2=t.ACCESSORCOMPONENTTYPE_V2=t.ACCESSORTYPE_V1=t.ACCESSORCOMPONENTSIZE_V1=t.ACCESSORCOMPONENTTYPE_V1=void 0;const r=i(3066);Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return r.TAG3D_JUSTIFICATION}});const n=i(7761);Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V1",{enumerable:!0,get:function(){return n.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V1",{enumerable:!0,get:function(){return n.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V1",{enumerable:!0,get:function(){return n.ACCESSORTYPE}});const a=i(2e3);Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V2",{enumerable:!0,get:function(){return a.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V2",{enumerable:!0,get:function(){return a.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V2",{enumerable:!0,get:function(){return a.ACCESSORTYPE}})},5656:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tag3dEngine=void 0;const o=a(i(5232)),l=i(3858),c=i(8877),u=i(7038),h=i(9577),d=i(4456),f=i(5743);t.Tag3dEngine=class{constructor(){this._converter=c.Converter.instance,this._httpClient=c.HttpClient.instance,this._logger=c.Logger.instance,this._stateEngine=c.StateEngine.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return s(this,void 0,void 0,(function*(){this._font||(this._font=new d.Font(f.font),this._stateEngine.fontLoaded.resolve(!0));const t=new l.TreeNode("tag3d");if(!1===this._stateEngine.fontLoaded.resolved&&(yield this._stateEngine.fontLoaded),!e)throw new c.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: Invalid content was provided to tag3d engine.");if(!e.data||!Array.isArray(e.data))throw new c.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: No tag3d data was provided to tag3d engine.");for(let n=0;n<e.data.length;n++){const a=e.data[n];a.size=a.size?+a.size:1,a.text=a.text||"";const s=a.text.split(/\r\n|\r|\n/g);let c=[];for(let e=0;e<s.length;++e){if(""===s[e])continue;let t=new h.TextGeometry(s[e],{size:a.size,height:a.size/10,font:this._font});c.push(t)}let d=new o.Object3D;for(let e of c)d.add(new o.Mesh(e,new o.MeshPhongMaterial));let f,p,m,g=0;g=0;for(let e of d.children)f=(new o.Box3).setFromObject(e),m=f.max.y-f.min.y,g=Math.max(g,m);g*=1.15,c.forEach(((e,t)=>{e.translate(0,(-t-1)*g,0)})),f=(new o.Box3).setFromObject(d),p=f.max.x-f.min.x,m=f.max.y-f.min.y;var i=new o.Vector3(0,0,0);switch(a.justification){case"TL":break;case"TC":i.x=.5*-p;break;case"TR":i.x=-p;break;case"ML":i.y=.5*m;break;case"MC":i.x=.5*-p,i.y=.5*m;break;case"MR":i.x=-p,i.y=.5*m;break;case"BL":i.y=m;break;case"BC":i.x=.5*-p,i.y=m;break;case"BR":i.x=-p,i.y=m}for(let e of c)e.translate(i.x,i.y,i.z);if(a.location.hasOwnProperty("xAxis")){var r=new o.Matrix4;r.set(a.location.xAxis.X,a.location.yAxis.X,a.location.normal.X,0,a.location.xAxis.Y,a.location.yAxis.Y,a.location.normal.Y,0,a.location.xAxis.Z,a.location.yAxis.Z,a.location.normal.Z,0,0,0,0,1);for(let e of c)e.applyMatrix4(r),e.translate(a.location.origin.X,a.location.origin.Y,a.location.origin.Z)}for(let e of c){const i={};for(let t in e.attributes){let r=t.toUpperCase();if(/\d/.test(r)&&!r.includes("_")){const e=r.search(/\d/);r=r.substring(0,e)+"_"+r.substring(e,r.length)}else"TEXCOORD"===r||"COLOR"===r||"JOINTS"===r||"WEIGHTS"===r?r+="_0":"UV"===r&&(r="TEXCOORD_0");i[r]=new u.AttributeData(e.attributes[t].array,e.attributes[t].itemSize,0,0,0,!1,e.attributes[t].array.length/e.attributes[t].itemSize)}const r=new l.TreeNode("tag3d_"+e);r.data.push(new u.GeometryData(new u.PrimitiveData(i,null),u.PRIMITIVE_MODE.TRIANGLES,new u.MaterialStandardData({color:a.color,metalness:0,roughness:1}))),t.children.push(r)}}return t}))}}},5743:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.font=void 0,t.font={glyphs:{0:{ha:946,x_min:0,x_max:0,o:"m 478 88 b 740 472 651 88 740 221 l 740 528 b 475 908 740 758 643 908 b 207 525 307 908 207 769 l 207 469 b 478 88 207 218 313 88 m 478 -12 b 83 468 240 -12 83 179 l 83 524 b 475 1006 83 817 232 1006 b 863 526 719 1006 863 810 l 863 471 b 478 -12 863 182 722 -12 "},1:{ha:554,x_min:0,x_max:0,o:"m 268 874 l 46 714 l 46 826 l 276 993 l 389 993 l 389 0 l 268 0 "},2:{ha:769,x_min:0,x_max:0,o:"m 26 28 l 421 443 b 564 731 511 539 564 629 b 386 908 564 842 499 908 b 176 688 271 908 196 843 l 64 688 b 386 1006 79 882 197 1006 b 686 726 569 1006 686 897 b 486 365 686 604 608 485 l 213 99 l 692 99 l 692 0 l 26 0 "},3:{ha:839,x_min:0,x_max:0,o:"m 403 -12 b 56 293 192 -12 63 119 l 167 293 b 406 85 178 175 249 85 b 632 276 561 85 632 160 b 422 469 632 404 563 469 l 347 469 l 347 571 l 417 571 b 603 740 546 571 603 632 b 422 907 603 835 543 907 b 203 719 299 907 215 832 l 97 719 b 422 1006 104 876 233 1006 b 721 743 611 1006 721 881 b 564 526 721 631 654 564 b 756 276 681 496 756 414 b 403 -12 756 96 608 -12 "},4:{ha:857,x_min:0,x_max:0,o:"m 551 208 l 54 208 l 54 247 l 508 993 l 669 993 l 669 307 l 807 307 l 807 208 l 669 208 l 669 0 l 551 0 m 551 307 l 551 901 l 207 307 "},5:{ha:815,x_min:0,x_max:0,o:"m 390 -12 b 60 268 176 -12 74 106 l 175 268 b 389 85 194 160 238 85 b 607 325 524 85 607 175 b 399 557 607 465 525 557 b 164 461 283 557 217 521 l 119 461 l 119 993 l 678 993 l 678 889 l 219 889 l 219 586 b 422 654 260 624 328 654 b 731 325 600 654 731 528 b 390 -12 731 115 579 -12 "},6:{ha:860,x_min:0,x_max:0,o:"m 440 -12 b 83 439 169 -12 83 190 l 83 463 b 472 1006 83 819 244 1006 b 763 765 626 1006 736 925 l 647 765 b 464 907 625 857 575 907 b 203 510 314 907 208 772 b 458 644 250 590 343 644 b 783 319 656 644 783 501 b 440 -12 783 121 650 -12 m 440 82 b 660 314 571 82 660 174 b 439 550 660 457 574 550 b 211 331 306 550 211 460 b 440 82 211 168 307 82 "},7:{ha:729,x_min:0,x_max:0,o:"m 549 896 l 44 896 l 44 993 l 699 993 l 699 976 l 326 0 l 203 0 "},8:{ha:843,x_min:0,x_max:0,o:"m 422 -12 b 79 282 260 -12 79 85 b 267 539 79 415 161 501 b 117 747 172 575 117 650 b 422 1006 117 908 269 1006 b 726 750 576 1006 726 906 b 574 540 726 650 665 581 b 764 285 689 499 764 413 b 422 -12 764 86 590 -12 m 422 86 b 640 289 544 86 640 157 b 425 486 640 419 543 486 b 203 286 307 486 203 418 b 422 86 203 156 307 86 m 426 582 b 604 749 532 582 604 643 b 422 911 604 844 525 911 b 239 746 319 911 239 849 b 426 582 239 642 325 582 "},9:{ha:861,x_min:0,x_max:0,o:"m 403 -11 b 83 244 219 -11 110 85 l 200 244 b 406 88 222 147 278 88 b 660 482 564 88 657 218 b 403 350 613 401 517 350 b 76 675 210 350 76 488 b 419 1007 76 874 210 1007 b 776 563 654 1007 776 849 l 776 500 b 403 -11 776 171 640 -11 m 421 444 b 649 660 554 444 649 531 b 419 913 649 822 553 913 b 200 681 289 913 200 821 b 421 444 200 538 286 444 "}," ":{ha:368,x_min:0,x_max:0,o:""},"!":{ha:397,x_min:0,x_max:0,o:"m 199 -7 b 110 82 150 -7 110 32 b 199 171 110 132 150 171 b 288 82 247 171 288 132 b 199 -7 288 32 247 -7 m 136 993 l 264 993 l 244 281 l 156 281 "},'"':{ha:521,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 m 311 993 l 436 993 l 415 653 l 332 653 "},"#":{ha:699,x_min:0,x_max:0,o:"m 386 392 l 251 392 l 215 138 l 121 138 l 157 392 l 42 392 l 42 489 l 172 489 l 199 672 l 81 672 l 81 769 l 213 769 l 246 993 l 340 993 l 307 769 l 442 769 l 475 993 l 569 993 l 536 769 l 657 769 l 657 672 l 522 672 l 496 489 l 618 489 l 618 392 l 481 392 l 444 138 l 350 138 m 267 489 l 401 489 l 428 672 l 293 672 "},$:{ha:871,x_min:0,x_max:0,o:"m 396 -11 b 63 303 158 6 79 143 l 179 303 b 396 83 193 194 226 99 l 396 469 b 103 736 213 504 103 569 b 396 1004 103 881 222 993 l 396 1129 l 478 1129 l 478 1003 b 767 732 644 988 749 893 l 658 732 b 478 908 638 839 581 894 l 478 561 b 788 281 682 525 788 460 b 478 -11 788 122 658 0 l 478 -187 l 396 -187 m 672 272 b 478 456 672 375 629 424 l 478 83 b 672 272 589 94 672 169 m 213 747 b 396 575 213 660 242 607 l 396 910 b 213 747 279 900 213 833 "},"%":{ha:1089,x_min:0,x_max:0,o:"m 275 622 b 397 767 350 622 397 674 b 275 911 397 856 350 911 b 153 765 201 911 153 860 b 275 622 153 671 201 622 m 275 532 b 47 764 157 532 47 629 b 275 1001 47 901 154 1001 b 503 767 399 1001 503 901 b 275 532 503 629 394 532 m 794 993 l 900 993 l 293 0 l 188 0 m 814 79 b 936 224 889 79 936 131 b 814 368 936 313 889 368 b 692 222 740 368 692 317 b 814 79 692 128 740 79 m 814 -11 b 586 221 696 -11 586 86 b 814 458 586 358 693 458 b 1042 224 938 458 1042 358 b 814 -11 1042 86 933 -11 "},"&":{ha:953,x_min:0,x_max:0,o:"m 732 203 l 899 0 l 758 0 l 660 119 b 385 -10 597 47 510 -10 b 71 263 203 -10 71 99 b 299 561 71 419 171 499 b 211 771 240 636 211 704 b 454 999 211 921 329 999 b 671 794 576 999 671 914 b 458 538 671 674 585 592 l 667 283 l 788 513 l 894 513 m 389 85 b 600 193 468 85 540 121 l 353 494 b 188 274 256 447 188 390 b 389 85 188 154 264 85 m 322 769 b 408 601 322 719 354 669 b 563 797 519 651 563 701 b 450 908 563 861 517 908 b 322 769 381 908 322 867 "},"'":{ha:294,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 "},"(":{ha:447,x_min:0,x_max:0,o:"m 304 -206 b 74 433 176 -56 74 157 b 304 1074 74 710 176 924 l 419 1074 b 194 433 294 918 194 719 b 419 -206 194 147 294 -50 l 304 -206 "},")":{ha:447,x_min:0,x_max:0,o:"m 28 -201 b 253 439 153 -46 253 153 b 28 1078 253 725 153 922 l 143 1078 b 374 439 271 928 374 715 b 143 -201 374 163 271 -51 l 28 -201 "},"*":{ha:586,x_min:0,x_max:0,o:"m 114 625 l 229 779 l 58 819 l 89 913 l 253 846 l 243 1032 l 344 1032 l 335 846 l 497 913 l 528 819 l 356 779 l 471 625 l 393 568 l 290 735 l 193 568 "},"+":{ha:721,x_min:0,x_max:0,o:"m 310 426 l 50 426 l 50 524 l 310 524 l 310 804 l 411 804 l 411 524 l 671 524 l 671 426 l 411 426 l 411 146 l 310 146 "},",":{ha:392,x_min:0,x_max:0,o:"m 50 -132 l 183 172 l 296 119 l 125 -171 "},"-":{ha:464,x_min:0,x_max:0,o:"m 83 436 l 381 436 l 381 328 l 83 328 "},".":{ha:392,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 "},"/":{ha:560,x_min:0,x_max:0,o:"m 413 1078 l 518 1078 l 114 -206 l 8 -206 "},":":{ha:406,x_min:0,x_max:0,o:"m 203 -7 b 114 82 154 -7 114 32 b 203 171 114 132 154 171 b 292 82 251 171 292 132 b 203 -7 292 32 251 -7 m 203 406 b 114 494 154 406 114 444 b 203 583 114 544 154 583 b 292 494 251 583 292 544 b 203 406 292 444 251 406 "},";":{ha:406,x_min:0,x_max:0,o:"m 29 -132 l 163 172 l 275 119 l 104 -171 m 215 406 b 126 494 167 406 126 444 b 215 583 126 544 167 583 b 304 494 264 583 304 544 b 215 406 304 444 264 406 "},"<":{ha:700,x_min:0,x_max:0,o:"m 74 433 l 74 461 l 607 763 l 607 651 l 242 447 l 607 243 l 607 132 "},"=":{ha:672,x_min:0,x_max:0,o:"m 56 372 l 617 372 l 617 272 l 56 272 m 56 622 l 617 622 l 617 522 l 56 522 "},">":{ha:700,x_min:0,x_max:0,o:"m 93 243 l 458 447 l 93 651 l 93 763 l 626 461 l 626 433 l 93 132 "},"?":{ha:679,x_min:0,x_max:0,o:"m 249 350 b 392 600 249 463 322 532 b 493 771 446 654 493 704 b 344 910 493 853 447 910 b 160 729 240 910 169 839 l 51 729 b 346 1006 61 892 176 1006 b 610 775 535 1006 610 892 b 474 543 610 672 540 607 b 351 340 411 483 351 425 l 351 281 l 249 281 m 297 -7 b 208 82 249 -7 208 32 b 297 171 208 132 249 171 b 386 82 346 171 386 132 b 297 -7 386 32 346 -7 "},"@":{ha:1271,x_min:0,x_max:0,o:"m 638 -204 b 63 361 267 -204 63 65 b 656 956 63 701 335 956 b 1208 447 988 956 1208 733 b 947 93 1208 186 1058 93 b 788 213 835 93 799 140 b 581 83 747 140 667 83 b 357 325 446 83 357 175 b 631 647 357 511 479 647 b 799 553 729 647 779 600 l 808 636 l 924 636 l 882 286 b 949 176 872 213 896 176 b 1108 444 1028 176 1108 256 b 656 864 1108 693 942 864 b 169 364 375 864 169 658 b 638 -112 169 111 328 -112 b 965 0 789 -112 879 -74 l 1072 0 b 638 -204 1001 -121 838 -204 m 606 172 b 783 399 692 172 783 251 b 639 556 783 504 729 556 b 475 326 551 556 475 472 b 606 172 475 229 531 172 "},A:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 "},B:{ha:864,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 743 736 608 993 743 932 l 743 731 b 593 521 743 640 707 560 b 792 283 738 486 792 413 l 792 278 b 465 0 792 90 664 0 l 125 0 m 463 94 b 674 279 607 94 674 158 l 674 285 b 446 465 674 407 606 465 l 243 465 l 243 94 m 424 560 b 625 735 569 560 625 613 l 625 740 b 421 899 625 853 560 899 l 243 899 l 243 560 "},C:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 "},D:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 "},E:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 "},F:{ha:758,x_min:0,x_max:0,o:"m 125 993 l 706 993 l 706 894 l 246 894 l 246 543 l 604 543 l 604 444 l 246 444 l 246 0 l 125 0 "},G:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 "},H:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 "},I:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 "},J:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 "},K:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 "},L:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},M:{ha:1189,x_min:0,x_max:0,o:"m 125 993 l 293 993 l 600 219 l 897 993 l 1064 993 l 1064 0 l 943 0 l 943 836 l 614 0 l 576 0 l 236 836 l 236 0 l 125 0 "},N:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 "},O:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 "},P:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 407 993 b 754 703 597 993 754 910 l 754 697 b 407 404 754 486 596 404 l 246 404 l 246 0 l 125 0 m 415 500 b 633 697 557 500 633 569 l 633 703 b 415 896 633 843 550 896 l 246 896 l 246 500 "},Q:{ha:1126,x_min:0,x_max:0,o:"m 776 32 b 568 -12 715 3 644 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 864 86 1050 325 981 178 l 989 -53 l 915 -124 m 568 88 b 704 113 618 88 664 96 l 593 238 l 667 308 l 793 165 b 925 494 878 238 925 353 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 "},R:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 "},S:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 "},T:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 "},U:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 "},V:{ha:908,x_min:0,x_max:0,o:"m 42 993 l 161 993 l 457 117 l 753 993 l 867 993 l 524 0 l 379 0 "},W:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 "},X:{ha:913,x_min:0,x_max:0,o:"m 390 510 l 85 993 l 218 993 l 465 603 l 711 993 l 835 993 l 526 510 l 850 0 l 714 0 l 449 418 l 183 0 l 63 0 "},Y:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 "},Z:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 "},"[":{ha:494,x_min:0,x_max:0,o:"m 122 1078 l 433 1078 l 433 986 l 238 986 l 238 -114 l 433 -114 l 433 -206 l 122 -206 "},"\\":{ha:560,x_min:0,x_max:0,o:"m 42 1078 l 147 1078 l 551 -206 l 446 -206 "},"]":{ha:494,x_min:0,x_max:0,o:"m 61 -114 l 257 -114 l 257 986 l 61 986 l 61 1078 l 372 1078 l 372 -206 l 61 -206 "},"^":{ha:704,x_min:0,x_max:0,o:"m 293 993 l 411 993 l 643 567 l 526 567 l 350 894 l 175 567 l 61 567 "},_:{ha:547,x_min:0,x_max:0,o:"m -1 -128 l 549 -128 l 549 -219 l -1 -219 "},"`":{ha:556,x_min:0,x_max:0,o:"m 101 1056 l 246 1056 l 332 851 l 246 851 "},a:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},b:{ha:871,x_min:0,x_max:0,o:"m 478 -12 b 232 119 360 -12 274 47 l 232 0 l 117 0 l 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},c:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 "},d:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},e:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},f:{ha:481,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 358 1078 142 992 214 1078 b 444 1064 396 1078 415 1074 l 444 967 b 363 982 424 975 394 982 b 257 857 288 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 "},g:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 "},h:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},i:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},j:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},k:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 "},l:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 "},m:{ha:1264,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 615 b 449 739 265 683 344 739 b 661 603 542 739 624 700 b 910 739 711 697 819 739 b 1154 450 1040 739 1154 661 l 1154 0 l 1039 0 l 1039 458 b 885 639 1039 586 985 639 b 693 444 790 639 693 575 l 693 0 l 578 0 l 578 458 b 424 639 578 586 524 639 b 232 444 329 639 232 575 l 232 0 l 117 0 "},n:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},o:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 "},p:{ha:871,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},q:{ha:871,x_min:0,x_max:0,o:"m 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 -253 l 639 -253 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},r:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 "},s:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 "},t:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 "},u:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 "},v:{ha:742,x_min:0,x_max:0,o:"m 35 726 l 160 726 l 375 117 l 588 726 l 707 726 l 446 0 l 299 0 "},w:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 "},x:{ha:733,x_min:0,x_max:0,o:"m 299 374 l 56 726 l 190 726 l 368 463 l 544 726 l 669 726 l 429 382 l 694 0 l 558 0 l 363 293 l 163 0 l 39 0 "},y:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 "},z:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 "},"{":{ha:529,x_min:0,x_max:0,o:"m 468 -204 b 193 85 263 -204 156 -125 l 219 229 b 56 396 235 311 197 396 l 56 482 b 219 649 197 482 235 567 l 193 793 b 468 1082 156 1003 263 1082 l 468 994 b 303 790 332 993 278 949 l 329 631 b 193 439 346 526 286 463 b 329 247 286 415 346 351 l 303 88 b 468 -117 278 -71 332 -115 l 468 -204 "},"|":{ha:351,x_min:0,x_max:0,o:"m 129 1078 l 222 1078 l 222 -206 l 129 -206 "},"}":{ha:529,x_min:0,x_max:0,o:"m 61 -117 b 226 88 197 -115 251 -71 l 200 247 b 336 439 183 351 243 415 b 200 631 243 463 183 526 l 226 790 b 61 994 251 949 197 993 l 61 1082 b 336 793 267 1082 374 1003 l 310 649 b 474 482 294 567 332 482 l 474 396 b 310 229 332 396 294 311 l 336 85 b 61 -204 374 -125 267 -204 "},"~":{ha:618,x_min:0,x_max:0,o:"m 61 310 b 208 488 71 431 139 488 b 403 417 300 488 357 417 b 465 490 432 417 461 440 l 557 490 b 414 313 549 367 479 313 b 217 383 318 313 261 383 b 153 310 186 383 160 358 l 61 310 "}," ":{ha:368,x_min:0,x_max:0,o:""},"":{ha:400,x_min:0,x_max:0,o:"m 154 550 l 243 550 l 263 -162 l 135 -162 m 200 660 b 111 749 151 660 111 699 b 200 838 111 799 151 838 b 289 749 249 838 289 799 b 200 660 289 699 249 660 "},"":{ha:785,x_min:0,x_max:0,o:"m 371 -10 b 63 356 190 8 63 147 l 63 367 b 371 736 63 572 196 715 l 371 874 l 453 874 l 453 736 b 731 485 589 725 710 653 l 617 485 b 453 640 601 583 535 629 l 453 86 b 628 261 540 99 617 157 l 735 261 b 453 -10 721 115 608 4 l 453 -187 l 371 -187 m 182 356 b 371 86 182 197 256 106 l 371 639 b 182 367 260 618 182 518 l 182 356 "},"":{ha:828,x_min:0,x_max:0,o:"m 67 524 l 157 524 b 132 719 143 582 132 646 b 438 1006 132 889 265 1006 b 735 743 615 1006 722 901 l 618 743 b 438 907 599 849 553 907 b 254 718 331 907 254 832 b 278 524 254 643 265 582 l 574 524 l 574 438 l 297 438 b 318 254 308 382 318 324 b 300 164 318 221 311 190 b 539 89 392 142 479 89 b 665 208 613 89 660 118 l 767 208 b 553 -12 758 81 683 -12 b 244 75 431 -12 324 75 b 154 0 183 75 158 36 l 53 0 b 196 169 58 63 100 151 b 213 256 206 193 213 221 b 181 438 213 317 197 375 l 67 438 "},"":{ha:800,x_min:0,x_max:0,o:"m 117 471 l 333 471 l 39 993 l 169 993 l 413 543 l 644 993 l 761 993 l 483 471 l 701 471 l 701 390 l 468 390 l 468 282 l 701 282 l 701 201 l 468 201 l 468 0 l 350 0 l 350 201 l 117 201 l 117 282 l 350 282 l 350 390 l 117 390 "},"":{ha:361,x_min:0,x_max:0,o:"m 129 413 l 222 413 l 222 -206 l 129 -206 m 129 1078 l 222 1078 l 222 510 l 129 510 "},"":{ha:749,x_min:0,x_max:0,o:"m 369 -190 b 108 36 215 -190 111 -108 l 226 36 b 367 -93 233 -43 269 -93 b 508 32 464 -93 508 -37 b 313 181 508 104 474 140 b 58 415 160 219 58 278 b 215 603 58 507 118 575 b 131 779 160 642 131 693 b 378 1006 131 911 250 1006 b 632 788 529 1006 628 928 l 515 788 b 381 908 510 861 478 908 b 242 782 283 908 242 851 b 428 636 242 710 274 675 b 690 397 581 597 690 549 b 538 211 690 318 635 242 b 619 35 590 172 619 118 b 369 -190 619 -90 508 -190 m 453 257 b 576 388 538 278 576 324 b 403 528 576 468 514 499 l 293 557 b 172 425 221 542 172 493 b 349 286 172 351 232 318 l 453 257 "},"":{ha:556,x_min:0,x_max:0,o:"m 147 881 b 74 954 107 881 74 914 b 147 1028 74 994 107 1028 b 221 954 188 1028 221 994 b 147 881 221 914 188 881 m 408 881 b 335 954 368 881 335 914 b 408 1028 335 994 368 1028 b 482 954 449 1028 482 994 b 408 881 482 914 449 881 "},"":{ha:1172,x_min:0,x_max:0,o:"m 588 215 b 321 490 419 215 321 322 l 321 501 b 588 778 321 667 433 778 b 822 586 713 778 811 715 l 717 586 b 588 694 706 657 664 694 b 431 501 492 694 431 624 l 431 492 b 588 300 431 369 488 300 b 728 415 663 300 717 338 l 828 415 b 588 215 814 282 718 215 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "},:{ha:582,x_min:0,x_max:0,o:"m 236 403 b 42 575 129 403 42 456 b 336 757 42 710 179 757 l 417 757 l 417 793 b 299 918 417 879 383 918 b 174 824 222 918 183 885 l 67 824 b 304 1006 78 953 183 1006 b 525 794 425 1006 525 957 l 525 414 l 417 414 l 417 486 b 236 403 376 433 324 403 m 256 488 b 417 618 347 488 417 533 l 417 682 l 339 682 b 151 578 229 682 151 656 b 256 488 151 521 179 488 "},"":{ha:694,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 m 329 363 l 510 610 l 624 610 l 450 363 l 624 115 l 510 115 "},"":{ha:714,x_min:0,x_max:0,o:"m 251 854 l 358 854 b 475 763 429 854 475 825 l 475 761 b 413 679 475 715 449 690 l 493 550 l 424 550 l 350 668 l 318 668 l 318 550 l 251 550 m 357 714 b 410 758 392 714 410 729 l 410 760 b 357 803 410 792 390 803 l 318 803 l 318 714 m 357 442 b 610 699 500 442 610 547 b 357 956 610 850 504 956 b 104 697 210 956 104 849 b 357 442 104 544 215 442 m 357 392 b 49 697 186 392 49 524 b 357 1006 49 868 185 1006 b 665 699 532 1006 665 869 b 357 392 665 525 529 392 "},"":{ha:556,x_min:0,x_max:0,o:"m 96 989 l 460 989 l 460 900 l 96 900 "},"":{ha:593,x_min:0,x_max:0,o:"m 297 644 b 421 783 371 644 421 706 b 297 925 421 864 371 925 b 168 783 222 925 168 864 b 297 644 168 706 222 644 m 297 564 b 69 783 171 564 69 664 b 297 1006 69 906 171 1006 b 524 783 422 1006 524 906 b 297 564 524 664 422 564 "},"":{ha:721,x_min:0,x_max:0,o:"m 310 454 l 50 454 l 50 551 l 310 551 l 310 804 l 411 804 l 411 551 l 671 551 l 671 454 l 411 454 l 411 201 l 310 201 m 50 97 l 671 97 l 671 0 l 50 0 "},"":{ha:397,x_min:0,x_max:0,o:"m 11 533 l 189 722 b 264 857 235 769 264 813 b 194 926 264 900 239 926 b 111 835 149 926 119 900 l 26 835 b 197 999 32 939 96 999 b 356 858 297 999 356 943 b 264 689 356 796 319 743 l 163 589 l 360 589 l 360 518 l 11 518 "},"":{ha:432,x_min:0,x_max:0,o:"m 211 511 b 29 665 96 511 32 572 l 114 665 b 208 581 119 617 146 581 b 296 656 268 581 296 610 b 213 731 296 706 268 731 l 176 731 l 176 796 l 211 796 b 289 864 264 796 289 821 b 217 929 289 901 265 929 b 131 853 168 929 136 900 l 46 853 b 218 999 51 938 115 999 b 378 871 319 999 378 943 b 299 768 378 818 346 785 b 392 654 354 756 392 717 b 211 511 392 565 322 511 "},"":{ha:556,x_min:0,x_max:0,o:"m 310 1056 l 454 1056 l 310 851 l 224 851 "},"":{ha:817,x_min:0,x_max:0,o:"m 383 481 l 364 481 b 63 732 188 481 63 564 b 364 993 63 908 193 993 l 686 993 l 686 -139 l 590 -139 l 590 914 l 478 914 l 478 -139 l 383 -139 "},"":{ha:392,x_min:0,x_max:0,o:"m 196 365 b 107 454 147 365 107 404 b 196 543 107 504 147 543 b 285 454 244 543 285 504 b 196 365 285 404 244 365 "},"":{ha:556,x_min:0,x_max:0,o:"m 289 -297 b 150 -181 208 -297 156 -250 l 225 -181 b 285 -231 231 -207 250 -231 b 340 -181 319 -231 340 -210 b 290 -133 340 -151 319 -133 b 251 -144 272 -133 258 -140 l 207 -106 l 265 0 l 339 0 l 299 -74 b 429 -186 363 -65 429 -101 b 289 -297 429 -261 364 -297 "},"":{ha:321,x_min:0,x_max:0,o:"m 146 901 l 33 826 l 33 908 l 157 993 l 240 993 l 240 518 l 146 518 "},:{ha:685,x_min:0,x_max:0,o:"m 343 492 b 519 700 453 492 519 575 l 519 708 b 343 917 519 835 451 917 b 165 708 233 917 165 835 l 165 700 b 343 492 165 574 232 492 m 342 403 b 51 699 174 403 51 526 l 51 707 b 343 1006 51 885 175 1006 b 633 710 510 1006 633 886 l 633 701 b 342 403 633 522 510 403 "},"":{ha:694,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 m 492 363 l 318 610 l 432 610 l 613 363 l 432 115 l 318 115 "},"":{ha:942,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 772 993 l 864 993 l 160 0 l 68 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"":{ha:940,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 754 993 l 846 993 l 142 0 l 50 0 m 549 15 l 726 204 b 801 339 772 251 801 294 b 732 408 801 382 776 408 b 649 317 686 408 657 382 l 564 317 b 735 481 569 421 633 481 b 893 340 835 481 893 425 b 801 171 893 278 857 225 l 700 71 l 897 71 l 897 0 l 549 0 "},"":{ha:946,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 822 993 l 914 993 l 210 0 l 118 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"":{ha:679,x_min:0,x_max:0,o:"m 431 481 b 288 231 431 368 357 299 b 186 60 233 176 186 126 b 335 -79 186 -22 232 -79 b 519 101 439 -79 510 -8 l 628 101 b 333 -175 618 -61 503 -175 b 69 56 144 -175 69 -61 b 206 288 69 158 139 224 b 328 490 268 347 328 406 l 328 550 l 431 550 m 382 838 b 471 749 431 838 471 799 b 382 660 471 699 431 660 b 293 749 333 660 293 699 b 382 838 293 799 333 838 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 297 1247 l 442 1247 l 519 1071 l 433 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 494 1247 l 639 1247 l 503 1071 l 417 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 417 1247 l 521 1247 l 669 1071 l 585 1071 l 467 1151 l 349 1071 l 267 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 543 1075 b 393 1135 483 1075 433 1135 b 338 1072 367 1135 344 1108 l 254 1072 b 394 1233 265 1171 322 1233 b 543 1174 453 1233 503 1174 b 599 1236 569 1174 592 1200 l 682 1236 b 543 1075 671 1138 614 1075 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 326 1096 b 253 1169 286 1096 253 1129 b 326 1243 253 1210 286 1243 b 400 1169 367 1243 400 1210 b 326 1096 400 1129 367 1096 m 608 1096 b 535 1169 568 1096 535 1129 b 608 1243 535 1210 568 1243 b 682 1169 649 1243 682 1210 b 608 1096 682 1129 649 1096 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 468 1054 b 319 1199 386 1054 319 1119 b 468 1343 319 1278 386 1343 b 617 1199 550 1343 617 1278 b 468 1054 617 1119 550 1054 m 468 1118 b 542 1199 511 1118 542 1153 b 468 1279 542 1244 511 1279 b 394 1199 425 1279 394 1244 b 468 1118 394 1153 425 1118 "},:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 "},:{ha:1014,x_min:0,x_max:0,o:"m 529 -297 b 390 -181 449 -297 396 -250 l 465 -181 b 525 -231 471 -207 490 -231 b 581 -181 560 -231 581 -210 b 531 -133 581 -151 560 -133 b 492 -144 513 -133 499 -140 l 447 -106 l 499 -11 b 76 490 236 7 76 199 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 572 -11 922 111 778 -1 l 539 -74 b 669 -186 603 -65 669 -101 b 529 -297 669 -261 604 -297 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 254 1247 l 399 1247 l 476 1071 l 390 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 451 1247 l 596 1247 l 460 1071 l 374 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 374 1247 l 478 1247 l 626 1071 l 542 1071 l 424 1151 l 306 1071 l 224 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 283 1096 b 210 1169 243 1096 210 1129 b 283 1243 210 1210 243 1243 b 357 1169 324 1243 357 1210 b 283 1096 357 1129 324 1096 m 565 1096 b 492 1169 525 1096 492 1129 b 565 1243 492 1210 525 1243 b 639 1169 606 1243 639 1210 b 565 1096 639 1129 606 1096 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 21 1247 l 165 1247 l 243 1071 l 157 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 218 1247 l 363 1247 l 226 1071 l 140 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 140 1247 l 244 1247 l 393 1071 l 308 1071 l 190 1151 l 72 1071 l -10 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 50 1096 b -24 1169 10 1096 -24 1129 b 50 1243 -24 1210 10 1243 b 124 1169 90 1243 124 1210 b 50 1096 124 1129 90 1096 m 332 1096 b 258 1169 292 1096 258 1129 b 332 1243 258 1210 292 1243 b 406 1169 372 1243 406 1210 b 332 1096 406 1129 372 1096 "},:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 592 1075 b 442 1135 532 1075 482 1135 b 386 1072 415 1135 393 1108 l 303 1072 b 443 1233 314 1171 371 1233 b 592 1174 501 1233 551 1174 b 647 1236 618 1174 640 1200 l 731 1236 b 592 1075 719 1138 663 1075 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 392 1247 l 536 1247 l 614 1071 l 528 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 589 1247 l 733 1247 l 597 1071 l 511 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 511 1247 l 615 1247 l 764 1071 l 679 1071 l 561 1151 l 443 1071 l 361 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 638 1075 b 488 1135 578 1075 528 1135 b 432 1072 461 1135 439 1108 l 349 1072 b 489 1233 360 1171 417 1233 b 638 1174 547 1233 597 1174 b 693 1236 664 1174 686 1200 l 776 1236 b 638 1075 765 1138 708 1075 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 421 1096 b 347 1169 381 1096 347 1129 b 421 1243 347 1210 381 1243 b 494 1169 461 1243 494 1210 b 421 1096 494 1129 461 1096 m 703 1096 b 629 1169 663 1096 629 1129 b 703 1243 629 1210 663 1243 b 776 1169 743 1243 776 1210 b 703 1096 776 1129 743 1096 "},"":{ha:651,x_min:0,x_max:0,o:"m 46 249 l 260 463 l 46 676 l 111 743 l 325 528 l 539 743 l 606 676 l 392 463 l 606 249 l 539 182 l 325 397 l 111 182 "},:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 313 1247 l 457 1247 l 535 1071 l 449 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 510 1247 l 654 1247 l 518 1071 l 432 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 432 1247 l 536 1247 l 685 1071 l 600 1071 l 482 1151 l 364 1071 l 282 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 342 1096 b 268 1169 301 1096 268 1129 b 342 1243 268 1210 301 1243 b 415 1169 382 1243 415 1210 b 342 1096 415 1129 382 1096 m 624 1096 b 550 1169 583 1096 550 1129 b 624 1243 550 1210 583 1243 b 697 1169 664 1243 697 1210 b 624 1096 697 1129 664 1096 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 442 1247 l 586 1247 l 450 1071 l 364 1071 "},:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 807 l 407 807 b 754 522 597 807 754 729 l 754 517 b 407 229 754 306 596 229 l 246 229 l 246 0 l 125 0 m 415 325 b 633 517 557 325 633 389 l 633 522 b 415 710 633 663 550 710 l 246 710 l 246 325 "},:{ha:819,x_min:0,x_max:0,o:"m 465 -12 b 338 10 407 -12 358 1 l 338 108 b 460 83 364 96 407 83 b 640 292 544 83 640 118 l 640 301 b 368 543 640 451 535 549 l 368 642 b 575 824 525 638 575 739 l 575 829 b 406 983 575 928 515 983 b 232 792 300 983 232 908 l 232 0 l 117 0 l 117 786 b 407 1078 117 964 251 1078 b 685 829 572 1078 685 978 l 685 824 b 519 600 685 736 628 636 b 760 303 663 564 760 447 l 760 294 b 465 -12 760 60 615 -12 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 197 1056 l 342 1056 l 428 851 l 342 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 411 1056 l 556 1056 l 411 851 l 325 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 310 1051 l 414 1051 l 563 851 l 478 851 l 360 956 l 242 851 l 160 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 451 860 b 301 919 392 860 342 919 b 246 857 275 919 253 893 l 163 857 b 303 1018 174 956 231 1018 b 451 958 361 1018 411 958 b 507 1021 478 958 500 985 l 590 1021 b 451 860 579 922 522 860 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 246 881 b 172 954 206 881 172 914 b 246 1028 172 994 206 1028 b 319 954 286 1028 319 994 b 246 881 319 914 286 881 m 507 881 b 433 954 467 881 433 914 b 507 1028 433 994 467 1028 b 581 954 547 1028 581 994 b 507 881 581 914 547 881 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 376 894 b 450 975 419 894 450 929 b 376 1056 450 1021 419 1056 b 303 975 333 1056 303 1021 b 376 894 303 929 333 894 m 376 831 b 228 975 294 831 228 896 b 376 1119 228 1054 294 1119 b 525 975 458 1119 525 1054 b 376 831 525 896 458 831 "},:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 "},:{ha:792,x_min:0,x_max:0,o:"m 397 -297 b 258 -181 317 -297 264 -250 l 333 -181 b 393 -231 339 -207 358 -231 b 449 -181 428 -231 449 -210 b 399 -133 449 -151 428 -133 b 360 -144 381 -133 367 -140 l 315 -106 l 368 -10 b 63 356 190 11 63 149 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 440 -11 719 111 604 -1 l 407 -74 b 538 -186 471 -65 538 -101 b 397 -297 538 -261 472 -297 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 224 1056 l 368 1056 l 454 851 l 368 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 438 1056 l 582 1056 l 438 851 l 351 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 351 1051 l 456 1051 l 604 851 l 519 851 l 401 956 l 283 851 l 201 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 272 881 b 199 954 232 881 199 914 b 272 1028 199 994 232 1028 b 346 954 313 1028 346 994 b 272 881 346 914 313 881 m 533 881 b 460 954 493 881 460 914 b 533 1028 460 994 493 1028 b 607 954 574 1028 607 994 b 533 881 607 914 574 881 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m -3 1056 l 142 1056 l 228 851 l 142 851 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 211 1056 l 356 1056 l 211 851 l 125 851 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 125 1051 l 229 1051 l 378 851 l 293 851 l 175 956 l 57 851 l -25 851 "},:{ha:354,x_min:0,x_max:0,o:"m 51 881 b -22 954 11 881 -22 914 b 51 1028 -22 994 11 1028 b 125 954 92 1028 125 994 b 51 881 125 914 92 881 m 301 881 b 228 954 261 881 228 914 b 301 1028 228 994 261 1028 b 375 954 342 1028 375 994 b 301 881 375 914 342 881 m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:839,x_min:0,x_max:0,o:"m 217 863 l 351 942 b 179 1074 296 990 236 1035 l 328 1074 b 444 997 363 1054 403 1029 l 560 1065 l 600 997 l 507 943 b 776 394 644 815 776 622 l 776 364 b 418 -12 776 144 625 -12 b 63 357 211 -12 63 144 l 63 368 b 393 739 63 586 215 739 b 603 639 489 739 557 696 b 413 888 558 728 490 813 l 257 796 m 419 83 b 657 357 565 83 657 193 l 657 367 b 421 643 657 535 565 643 b 182 368 275 643 182 535 l 182 357 b 419 83 182 192 272 83 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 489 860 b 339 919 429 860 379 919 b 283 857 313 919 290 893 l 200 857 b 340 1018 211 956 268 1018 b 489 958 399 1018 449 958 b 544 1021 515 958 538 985 l 628 1021 b 489 860 617 922 560 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 240 1056 l 385 1056 l 471 851 l 385 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 454 1056 l 599 1056 l 454 851 l 368 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 368 1051 l 472 1051 l 621 851 l 536 851 l 418 956 l 300 851 l 218 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 494 860 b 344 919 435 860 385 919 b 289 857 318 919 296 893 l 206 857 b 346 1018 217 956 274 1018 b 494 958 404 1018 454 958 b 550 1021 521 958 543 985 l 633 1021 b 494 860 622 922 565 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 289 881 b 215 954 249 881 215 914 b 289 1028 215 994 249 1028 b 363 954 329 1028 363 994 b 289 881 363 914 329 881 m 550 881 b 476 954 510 881 476 914 b 550 1028 476 994 510 1028 b 624 954 590 1028 624 994 b 550 881 624 914 590 881 "},"":{ha:721,x_min:0,x_max:0,o:"m 360 124 b 271 213 311 124 271 163 b 360 301 271 263 311 301 b 449 213 408 301 449 263 b 360 124 449 163 408 124 m 50 524 l 671 524 l 671 426 l 50 426 m 360 649 b 271 738 311 649 271 688 b 360 826 271 788 311 826 b 449 738 408 826 449 788 b 360 649 449 688 408 649 "},:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 233 1056 l 378 1056 l 464 851 l 378 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 447 1056 l 592 1056 l 447 851 l 361 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 361 1051 l 465 1051 l 614 851 l 529 851 l 411 956 l 293 851 l 211 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 282 881 b 208 954 242 881 208 914 b 282 1028 208 994 242 1028 b 356 954 322 1028 356 994 b 282 881 356 914 322 881 m 543 881 b 469 954 503 881 469 914 b 543 1028 469 994 503 1028 b 617 954 583 1028 617 994 b 543 881 617 914 583 881 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 413 1056 l 557 1056 l 413 851 l 326 851 "},:{ha:871,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 247 881 b 174 954 207 881 174 914 b 247 1028 174 994 207 1028 b 321 954 288 1028 321 994 b 247 881 321 914 288 881 m 508 881 b 435 954 468 881 435 914 b 508 1028 435 994 468 1028 b 582 954 549 1028 582 994 b 508 881 582 914 549 881 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:771,x_min:0,x_max:0,o:"m 58 443 l 153 478 l 153 993 l 274 993 l 274 522 l 550 624 l 550 529 l 274 428 l 274 99 l 728 99 l 728 0 l 153 0 l 153 383 l 58 349 "},:{ha:383,x_min:0,x_max:0,o:"m 28 529 l 133 589 l 133 1074 l 250 1074 l 250 656 l 361 719 l 361 622 l 250 558 l 250 0 l 133 0 l 133 492 l 28 432 "},:{ha:1326,x_min:0,x_max:0,o:"m 76 500 b 582 993 76 775 235 993 l 1244 993 l 1244 894 l 808 894 l 808 557 l 1156 557 l 1156 458 l 808 458 l 808 99 l 1269 99 l 1269 0 l 579 0 b 76 488 238 0 76 211 l 76 500 m 585 894 b 201 499 329 894 201 742 l 201 488 b 586 97 201 258 313 97 l 688 97 l 688 894 "},:{ha:1382,x_min:0,x_max:0,o:"m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 714 564 556 739 660 672 b 996 739 765 672 864 739 b 1322 378 1164 739 1322 638 l 1322 340 l 775 340 b 1008 83 781 175 860 83 b 1201 210 1121 83 1186 125 l 1317 210 b 1007 -12 1292 64 1171 -12 b 714 161 869 -12 767 51 b 418 -12 658 53 554 -12 m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 1204 433 b 996 643 1193 583 1115 643 b 779 433 878 643 799 563 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 218 1247 l 303 1247 l 421 1167 l 539 1247 l 621 1247 l 471 1071 l 367 1071 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 129 1051 l 214 1051 l 332 947 l 450 1051 l 532 1051 l 382 851 l 278 851 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 274 1096 b 200 1169 233 1096 200 1129 b 274 1243 200 1210 233 1243 b 347 1169 314 1243 347 1210 b 274 1096 347 1129 314 1096 m 556 1096 b 482 1169 515 1096 482 1129 b 556 1243 482 1210 515 1243 b 629 1169 596 1243 629 1210 b 556 1096 629 1129 596 1096 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 208 1247 l 293 1247 l 411 1167 l 529 1247 l 611 1247 l 461 1071 l 357 1071 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 143 1051 l 228 1051 l 346 947 l 464 1051 l 546 1051 l 396 851 l 292 851 "},:{ha:551,x_min:0,x_max:0,o:"m 40 574 l 175 574 l 207 785 b 442 1006 229 928 307 1006 b 536 990 482 1006 510 1000 l 536 893 b 444 910 515 901 485 910 b 321 779 367 910 332 854 l 289 574 l 472 574 l 472 479 l 275 479 l 164 -253 l 49 -253 l 160 479 l 40 479 "},:{ha:556,x_min:0,x_max:0,o:"m 226 1051 l 331 1051 l 479 851 l 394 851 l 276 956 l 158 851 l 76 851 "},:{ha:556,x_min:0,x_max:0,o:"m 76 1051 l 161 1051 l 279 947 l 397 1051 l 479 1051 l 329 851 l 225 851 "},"":{ha:556,x_min:0,x_max:0,o:"m 275 860 b 92 1043 175 860 97 938 l 183 1043 b 275 954 193 989 219 954 b 375 1043 333 954 364 988 l 464 1043 b 275 860 458 938 375 860 "},"":{ha:556,x_min:0,x_max:0,o:"m 278 878 b 201 954 236 878 201 913 b 278 1031 201 996 236 1031 b 354 954 319 1031 354 996 b 278 878 354 913 319 878 "},"":{ha:556,x_min:0,x_max:0,o:"m 278 894 b 351 975 321 894 351 929 b 278 1056 351 1021 321 1056 b 204 975 235 1056 204 1021 b 278 894 204 929 235 894 m 278 831 b 129 975 196 831 129 896 b 278 1119 129 1054 196 1119 b 426 975 360 1119 426 1054 b 278 831 426 896 360 831 "},"":{ha:556,x_min:0,x_max:0,o:"m 310 -253 b 165 -142 224 -253 165 -211 b 274 0 165 -82 214 -29 l 369 0 b 275 -119 307 -42 275 -76 b 328 -169 275 -153 294 -169 b 400 -154 351 -169 379 -165 l 400 -236 b 310 -253 376 -246 349 -253 "},"":{ha:556,x_min:0,x_max:0,o:"m 353 860 b 203 919 293 860 243 919 b 147 857 176 919 154 893 l 64 857 b 204 1018 75 956 132 1018 b 353 958 263 1018 313 958 b 408 1021 379 958 401 985 l 492 1021 b 353 860 481 922 424 860 "},"":{ha:556,x_min:0,x_max:0,o:"m 189 1056 l 321 1056 l 217 851 l 133 851 m 403 1056 l 535 1056 l 431 851 l 347 851 "},"":{ha:731,x_min:0,x_max:0,o:"m 63 432 l 668 432 l 668 335 l 63 335 "},"":{ha:1229,x_min:0,x_max:0,o:"m 63 432 l 1167 432 l 1167 335 l 63 335 "},"":{ha:354,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 "},"":{ha:354,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 "},"":{ha:354,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 "},"":{ha:600,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 m 301 728 l 464 1008 l 535 972 l 411 678 "},"":{ha:600,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 m 311 714 l 435 1008 l 544 958 l 382 678 "},"":{ha:600,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 m 311 -122 l 435 172 l 544 122 l 382 -158 "},"":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 296 l 208 296 "},"":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 568 l 472 568 l 472 475 l 313 475 l 313 296 l 208 296 l 208 475 l 47 475 l 47 568 l 208 568 "},"":{ha:461,x_min:0,x_max:0,o:"m 231 264 b 69 425 139 264 69 336 b 231 586 69 514 139 586 b 392 425 324 586 392 514 b 231 264 392 336 324 264 "},"":{ha:1119,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 m 560 -7 b 471 82 511 -7 471 32 b 560 171 471 132 511 171 b 649 82 608 171 649 132 b 560 -7 649 32 608 -7 m 924 -7 b 835 82 875 -7 835 32 b 924 171 835 132 875 171 b 1013 82 972 171 1013 132 b 924 -7 1013 32 972 -7 "},"":{ha:1564,x_min:0,x_max:0,o:"m 268 638 b 385 775 339 638 385 689 b 268 913 385 858 339 913 b 151 774 199 913 151 863 b 268 638 151 686 199 638 m 268 549 b 47 772 154 549 47 643 b 268 1001 47 906 151 1001 b 489 775 388 1001 489 906 b 268 549 489 643 383 549 m 782 993 l 888 993 l 281 0 l 175 0 m 785 78 b 901 215 856 78 901 129 b 785 353 901 299 856 353 b 668 214 715 353 668 303 b 785 78 668 126 715 78 m 785 -11 b 564 213 671 -11 564 83 b 785 442 564 346 668 442 b 1006 215 904 442 1006 346 b 785 -11 1006 83 900 -11 m 1296 78 b 1413 215 1367 78 1413 129 b 1296 353 1413 299 1367 353 b 1179 214 1226 353 1179 303 b 1296 78 1179 126 1226 78 m 1296 -11 b 1075 213 1182 -11 1075 83 b 1296 442 1075 346 1179 442 b 1517 215 1415 442 1517 346 b 1296 -11 1517 83 1411 -11 "},"":{ha:447,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 "},"":{ha:447,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 "},"":{ha:157,x_min:0,x_max:0,o:"m 385 993 l 476 993 l -228 0 l -319 0 "},"":{ha:994,x_min:0,x_max:0,o:"m 475 993 l 582 993 l 707 679 l 829 993 l 938 993 l 938 546 l 860 546 l 860 894 l 717 546 l 690 546 l 546 894 l 546 546 l 475 546 m 183 932 l 47 932 l 47 993 l 396 993 l 396 932 l 261 932 l 261 546 l 183 546 "},"":{ha:721,x_min:0,x_max:0,o:"m 50 524 l 671 524 l 671 426 l 50 426 "},"":{ha:692,x_min:0,x_max:0,o:"m 61 231 b 214 396 71 342 138 396 b 481 335 319 396 407 335 b 543 399 510 335 539 354 l 631 399 b 482 233 622 285 554 233 b 213 294 372 233 285 294 b 149 231 182 294 156 274 l 61 231 m 61 476 b 214 642 71 588 138 642 b 481 581 319 642 407 581 b 543 644 510 581 539 600 l 631 644 b 482 479 622 531 554 479 b 213 540 372 479 285 540 b 149 476 182 540 156 519 l 61 476 "},"":{ha:672,x_min:0,x_max:0,o:"m 56 622 l 354 622 l 410 765 l 515 765 l 460 622 l 617 622 l 617 522 l 421 522 l 364 372 l 617 372 l 617 272 l 325 272 l 269 129 l 164 129 l 219 272 l 56 272 l 56 372 l 258 372 l 315 522 l 56 522 "},"":{ha:700,x_min:0,x_max:0,o:"m 74 450 l 74 478 l 607 763 l 607 651 l 246 464 l 607 276 l 607 165 m 74 97 l 607 97 l 607 0 l 74 0 "},"":{ha:700,x_min:0,x_max:0,o:"m 93 276 l 454 464 l 93 651 l 93 763 l 626 478 l 626 450 l 93 165 m 93 97 l 626 97 l 626 0 l 93 0 "},:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},:{ha:1006,x_min:0,x_max:0,o:"m 606 -268 b 467 -242 531 -268 493 -256 l 467 -142 b 599 -169 503 -157 539 -169 b 763 -1 696 -169 760 -115 l 240 851 l 240 0 l 125 0 l 125 993 l 282 993 l 765 204 l 765 993 l 881 993 l 881 14 b 606 -268 881 -185 757 -268 "},:{ha:913,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 521 -12 b 382 14 446 -12 408 0 l 382 114 b 514 86 418 99 454 86 b 675 275 613 86 675 142 l 675 993 l 796 993 l 796 269 b 521 -12 796 71 672 -12 "},:{ha:871,x_min:0,x_max:0,o:"m 392 939 l 639 939 l 639 1074 l 754 1074 l 754 939 l 858 939 l 858 854 l 754 854 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 854 l 392 854 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},:{ha:831,x_min:0,x_max:0,o:"m 499 -168 b 606 -56 581 -161 606 -119 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 -46 b 499 -265 721 -185 660 -260 "},:{ha:708,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 m 367 -168 b 474 -56 449 -161 474 -119 l 474 726 l 589 726 l 589 -46 b 367 -265 589 -185 528 -260 m 529 878 b 453 954 488 878 453 913 b 529 1031 453 996 488 1031 b 606 954 571 1031 606 996 b 529 878 606 913 571 878 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 465 1065 b 282 1249 365 1065 288 1143 l 374 1249 b 465 1160 383 1194 410 1160 b 565 1249 524 1160 554 1193 l 654 1249 b 465 1065 649 1143 565 1065 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 283 1181 l 653 1181 l 653 1092 l 283 1092 "},:{ha:936,x_min:0,x_max:0,o:"m 813 -253 b 668 -142 726 -253 668 -211 b 768 -4 668 -85 713 -33 l 669 286 l 260 286 l 164 0 l 50 0 l 392 993 l 550 993 l 885 4 b 778 -119 808 -40 778 -76 b 831 -169 778 -153 797 -169 b 903 -154 854 -169 882 -165 l 903 -236 b 813 -253 879 -246 851 -253 m 293 382 l 638 382 l 465 893 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 478 1040 b 329 1185 396 1040 329 1106 b 478 1329 329 1264 396 1329 b 626 1185 560 1329 626 1264 b 478 1040 626 1106 560 1040 m 510 1546 l 654 1546 l 518 1369 l 432 1369 m 478 1104 b 551 1185 521 1104 551 1139 b 478 1265 551 1231 521 1265 b 404 1185 435 1265 404 1231 b 478 1104 404 1139 435 1104 "},:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 m 874 1247 l 1018 1247 l 882 1071 l 796 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 572 1247 l 717 1247 l 581 1071 l 494 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 344 1247 l 429 1247 l 547 1167 l 665 1247 l 747 1247 l 597 1071 l 493 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 494 1247 l 599 1247 l 747 1071 l 663 1071 l 544 1151 l 426 1071 l 344 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 540 1093 b 464 1169 499 1093 464 1128 b 540 1246 464 1211 499 1246 b 617 1169 582 1246 617 1211 b 540 1093 617 1128 582 1093 "},:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 m 238 1247 l 322 1247 l 440 1167 l 558 1247 l 640 1247 l 490 1071 l 386 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 432 1065 b 249 1249 332 1065 254 1143 l 340 1249 b 432 1160 350 1194 376 1160 b 532 1249 490 1160 521 1193 l 621 1249 b 432 1065 615 1143 532 1065 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 425 1093 b 349 1169 383 1093 349 1128 b 425 1246 349 1211 383 1246 b 501 1169 467 1246 501 1211 b 425 1093 501 1128 467 1093 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 240 1181 l 610 1181 l 610 1092 l 240 1092 "},:{ha:786,x_min:0,x_max:0,o:"m 631 -253 b 486 -142 544 -253 486 -211 b 594 0 486 -82 535 -29 l 125 0 l 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 690 0 b 596 -119 628 -42 596 -76 b 649 -169 596 -153 615 -169 b 721 -154 672 -169 700 -165 l 721 -236 b 631 -253 697 -246 669 -253 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 546 1065 b 363 1249 446 1065 368 1143 l 454 1249 b 546 1160 464 1194 490 1160 b 646 1249 604 1160 635 1193 l 735 1249 b 546 1065 729 1143 646 1065 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 497 1247 l 601 1247 l 750 1071 l 665 1071 l 547 1151 l 429 1071 l 347 1071 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 432 -269 l 513 -51 l 624 -85 l 503 -306 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 549 1093 b 472 1169 507 1093 472 1128 b 549 1246 472 1211 507 1246 b 625 1169 590 1246 625 1211 b 549 1093 625 1128 590 1093 "},:{ha:1014,x_min:0,x_max:0,o:"m 28 778 l 125 778 l 125 993 l 246 993 l 246 778 l 768 778 l 768 993 l 889 993 l 889 778 l 986 778 l 986 685 l 889 685 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 l 125 685 l 28 685 m 768 543 l 768 685 l 246 685 l 246 543 "},:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 m 456 1247 l 560 1247 l 708 1071 l 624 1071 l 506 1151 l 388 1071 l 306 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1065 b 8 1249 92 1065 14 1143 l 100 1249 b 192 1160 110 1194 136 1160 b 292 1249 250 1160 281 1193 l 381 1249 b 192 1065 375 1143 292 1065 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1093 b 115 1169 150 1093 115 1128 b 192 1246 115 1211 150 1246 b 268 1169 233 1246 268 1211 b 192 1093 268 1128 233 1093 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 7 1181 l 376 1181 l 376 1092 l 7 1092 "},:{ha:385,x_min:0,x_max:0,o:"m 181 -253 b 36 -142 94 -253 36 -211 b 132 -6 36 -86 78 -36 l 132 993 l 253 993 l 253 6 b 146 -119 178 -37 146 -76 b 199 -169 146 -153 165 -169 b 271 -154 222 -169 250 -165 l 271 -236 b 181 -253 247 -246 219 -253 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 269 1075 b 119 1135 210 1075 160 1135 b 64 1072 93 1135 71 1108 l -19 1072 b 121 1233 -8 1171 49 1233 b 269 1174 179 1233 229 1174 b 325 1236 296 1174 318 1200 l 408 1236 b 269 1075 397 1138 340 1075 "},:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 m 351 1247 l 456 1247 l 604 1071 l 519 1071 l 401 1151 l 283 1071 l 201 1071 "},:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 m 331 -269 l 411 -51 l 522 -85 l 401 -306 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 214 1247 l 358 1247 l 222 1071 l 136 1071 "},:{ha:743,x_min:0,x_max:0,o:"m 438 993 l 568 993 l 488 775 l 407 775 m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 556 444 b 467 533 507 444 467 483 b 556 622 467 583 507 622 b 644 533 604 622 644 583 b 556 444 644 483 604 444 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 543 1247 l 688 1247 l 551 1071 l 465 1071 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 315 1247 l 400 1247 l 518 1167 l 636 1247 l 718 1247 l 568 1071 l 464 1071 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 369 -269 l 450 -51 l 561 -85 l 440 -306 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 560 1065 b 376 1249 460 1065 382 1143 l 468 1249 b 560 1160 478 1194 504 1160 b 660 1249 618 1160 649 1193 l 749 1249 b 560 1065 743 1143 660 1065 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 458 1247 l 590 1247 l 490 1071 l 407 1071 m 672 1247 l 804 1247 l 704 1071 l 621 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 378 1181 l 747 1181 l 747 1092 l 378 1092 "},:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 m 590 1247 l 735 1247 l 599 1071 l 513 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 457 1247 l 601 1247 l 465 1071 l 379 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 314 -269 l 394 -51 l 506 -85 l 385 -306 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 446 1247 l 590 1247 l 454 1071 l 368 1071 "},:{ha:871,x_min:0,x_max:0,o:"m 403 -297 b 264 -181 322 -297 269 -250 l 339 -181 b 399 -231 344 -207 364 -231 b 454 -181 433 -231 454 -210 b 404 -133 454 -151 433 -133 b 365 -144 386 -133 372 -140 l 321 -106 l 374 -8 b 67 303 163 15 83 149 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 l 413 -74 b 543 -186 476 -65 543 -101 b 403 -297 543 -261 478 -297 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 368 1247 l 472 1247 l 621 1071 l 536 1071 l 418 1151 l 300 1071 l 218 1071 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 303 -269 l 383 -51 l 494 -85 l 374 -306 "},:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 188 1247 l 272 1247 l 390 1167 l 508 1247 l 590 1247 l 440 1071 l 336 1071 "},:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 272 -269 l 353 -51 l 464 -85 l 343 -306 "},:{ha:779,x_min:0,x_max:0,o:"m 128 561 l 329 561 l 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 561 l 651 561 l 651 469 l 450 469 l 450 0 l 329 0 l 329 469 l 128 469 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 481 1065 b 297 1249 381 1065 303 1143 l 389 1249 b 481 1160 399 1194 425 1160 b 581 1249 539 1160 569 1193 l 669 1249 b 481 1065 664 1143 581 1065 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 379 1247 l 511 1247 l 411 1071 l 328 1071 m 593 1247 l 725 1247 l 625 1071 l 542 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 299 1181 l 668 1181 l 668 1092 l 299 1092 "},:{ha:967,x_min:0,x_max:0,o:"m 533 -253 b 389 -142 447 -253 389 -211 b 475 -12 389 -89 426 -43 l 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 665 25 850 201 785 81 b 499 -119 571 -19 499 -51 b 551 -169 499 -153 518 -169 b 624 -154 575 -169 603 -165 l 624 -236 b 533 -253 600 -246 572 -253 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 483 1090 b 557 1171 526 1090 557 1125 b 483 1251 557 1217 526 1251 b 410 1171 440 1251 410 1217 b 483 1090 410 1125 440 1090 m 483 1026 b 335 1171 401 1026 335 1092 b 483 1315 335 1250 401 1315 b 632 1171 565 1315 632 1250 b 483 1026 632 1092 565 1026 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 558 1075 b 408 1135 499 1075 449 1135 b 353 1072 382 1135 360 1108 l 269 1072 b 410 1233 281 1171 338 1233 b 558 1174 468 1233 518 1174 b 614 1236 585 1174 607 1200 l 697 1236 b 558 1075 686 1138 629 1075 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 689 1247 l 833 1247 l 697 1071 l 611 1071 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 593 1247 l 697 1247 l 846 1071 l 761 1071 l 643 1151 l 525 1071 l 443 1071 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 507 1096 b 433 1169 467 1096 433 1129 b 507 1243 433 1210 467 1243 b 581 1169 547 1243 581 1210 b 507 1096 581 1129 547 1096 m 789 1096 b 715 1169 749 1096 715 1129 b 789 1243 715 1210 749 1243 b 863 1169 829 1243 863 1210 b 789 1096 863 1129 829 1096 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 478 1247 l 622 1247 l 700 1071 l 614 1071 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 364 1247 l 468 1247 l 617 1071 l 532 1071 l 414 1151 l 296 1071 l 214 1071 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 258 1247 l 403 1247 l 481 1071 l 394 1071 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 436 1247 l 581 1247 l 444 1071 l 358 1071 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 410 1093 b 333 1169 368 1093 333 1128 b 410 1246 333 1211 368 1246 b 486 1169 451 1246 486 1211 b 410 1093 486 1128 451 1093 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 374 860 b 190 1043 274 860 196 938 l 282 1043 b 374 954 292 989 318 954 b 474 1043 432 954 463 988 l 563 1043 b 374 860 557 938 474 860 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 194 989 l 558 989 l 558 900 l 194 900 "},:{ha:750,x_min:0,x_max:0,o:"m 565 -253 b 421 -142 479 -253 421 -211 b 525 -1 421 -83 467 -32 l 525 92 b 299 -12 471 24 406 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 6 b 531 -119 565 -37 531 -76 b 583 -169 531 -153 550 -169 b 656 -154 607 -169 635 -165 l 656 -236 b 565 -253 632 -246 604 -253 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 379 867 b 453 947 422 867 453 901 b 379 1028 453 993 422 1028 b 306 947 336 1028 306 993 b 379 867 306 901 336 867 m 379 803 b 231 947 297 803 231 868 b 379 1092 231 1026 297 1092 b 528 947 461 1092 528 1026 b 379 803 528 868 461 803 m 421 1328 l 565 1328 l 429 1151 l 343 1151 "},:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 m 651 1056 l 796 1056 l 651 851 l 565 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 449 1056 l 593 1056 l 449 851 l 363 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 363 1051 l 467 1051 l 615 851 l 531 851 l 413 956 l 294 851 l 213 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 414 878 b 338 954 372 878 338 913 b 414 1031 338 996 372 1031 b 490 954 456 1031 490 996 b 414 878 490 913 456 878 "},:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 m 838 1074 l 968 1074 l 901 831 l 821 831 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 389 860 b 206 1043 289 860 211 938 l 297 1043 b 389 954 307 989 333 954 b 489 1043 447 954 478 988 l 578 1043 b 389 860 572 938 489 860 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 201 1051 l 286 1051 l 404 947 l 522 1051 l 604 1051 l 454 851 l 350 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 403 878 b 326 954 361 878 326 913 b 403 1031 326 996 361 1031 b 479 954 444 1031 479 996 b 403 878 479 913 444 878 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 221 989 l 585 989 l 585 900 l 221 900 "},:{ha:789,x_min:0,x_max:0,o:"m 539 -253 b 394 -142 453 -253 394 -211 b 490 -7 394 -86 436 -36 b 414 -12 465 -11 440 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 597 15 704 97 633 46 b 504 -119 543 -31 504 -76 b 557 -169 504 -153 524 -169 b 629 -154 581 -169 608 -165 l 629 -236 b 539 -253 606 -246 578 -253 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 406 860 b 222 1043 306 860 228 938 l 314 1043 b 406 954 324 989 350 954 b 506 1043 464 954 494 988 l 594 1043 b 406 860 589 938 506 860 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 357 1051 l 461 1051 l 610 851 l 525 851 l 407 956 l 289 851 l 207 851 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 353 869 l 474 1090 l 544 1054 l 464 836 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 408 878 b 332 954 367 878 332 913 b 408 1031 332 996 367 1031 b 485 954 450 1031 485 996 b 408 878 485 913 450 878 "},:{ha:831,x_min:0,x_max:0,o:"m 13 939 l 117 939 l 117 1074 l 232 1074 l 232 939 l 479 939 l 479 854 l 232 854 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 854 l 13 854 "},:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 383 1317 l 488 1317 l 636 1140 l 551 1140 l 433 1221 l 315 1140 l 233 1140 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 860 b -8 1043 75 860 -3 938 l 83 1043 b 175 954 93 989 119 954 b 275 1043 233 954 264 988 l 364 1043 b 175 860 358 938 275 860 "},:{ha:354,x_min:0,x_max:0,o:"m 42 989 l 311 989 l 311 900 l 42 900 m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:354,x_min:0,x_max:0,o:"m 167 -253 b 22 -142 81 -253 22 -211 b 119 -6 22 -85 64 -35 l 119 726 l 235 726 l 235 4 b 132 -119 164 -39 132 -76 b 185 -169 132 -153 151 -169 b 257 -154 208 -169 236 -165 l 257 -236 b 167 -253 233 -246 206 -253 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 253 860 b 103 919 193 860 143 919 b 47 857 76 919 54 893 l -36 857 b 104 1018 -25 956 32 1018 b 253 958 163 1018 213 958 b 308 1021 279 958 301 985 l 392 1021 b 253 860 381 922 324 860 "},:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 124 1051 l 228 1051 l 376 851 l 292 851 l 174 956 l 56 851 l -26 851 "},:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 m 258 -269 l 339 -51 l 450 -85 l 329 -306 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 206 1317 l 350 1317 l 214 1140 l 128 1140 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 319 1074 l 450 1074 l 383 831 l 303 831 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 61 -269 l 142 -51 l 253 -85 l 132 -306 "},:{ha:456,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 403 421 b 314 510 354 421 314 460 b 403 599 314 560 354 599 b 492 510 451 599 492 560 b 403 421 492 460 451 421 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 449 1056 l 593 1056 l 449 851 l 363 851 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m -61 714 l 63 1008 l 172 958 l 10 678 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 417 860 b 233 1043 317 860 239 938 l 325 1043 b 417 954 335 989 361 954 b 517 1043 475 954 506 988 l 606 1043 b 417 860 600 938 517 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 319 1056 l 451 1056 l 347 851 l 264 851 m 533 1056 l 665 1056 l 561 851 l 478 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 238 989 l 601 989 l 601 900 l 238 900 "},:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 m 453 1056 l 597 1056 l 453 851 l 367 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 319 1056 l 464 1056 l 319 851 l 233 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 83 1051 l 168 1051 l 286 947 l 404 1051 l 486 1051 l 336 851 l 232 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 54 -269 l 135 -51 l 246 -85 l 125 -306 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 365 1056 l 510 1056 l 365 851 l 279 851 "},:{ha:667,x_min:0,x_max:0,o:"m 315 -297 b 176 -181 235 -297 182 -250 l 251 -181 b 311 -231 257 -207 276 -231 b 367 -181 346 -231 367 -210 b 317 -133 367 -151 346 -133 b 278 -144 299 -133 285 -140 l 233 -106 l 286 -8 b 57 224 146 7 63 92 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 358 -12 608 81 524 -7 l 325 -74 b 456 -186 389 -65 456 -101 b 315 -297 456 -261 390 -297 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 279 1051 l 383 1051 l 532 851 l 447 851 l 329 956 l 211 851 l 129 851 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 214 -269 l 294 -51 l 406 -85 l 285 -306 "},:{ha:493,x_min:0,x_max:0,o:"m 38 471 l 142 471 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 471 l 426 471 l 426 389 l 257 389 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 b 142 182 206 -10 142 68 l 142 389 l 38 389 "},:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 374 1074 l 504 1074 l 438 831 l 357 831 "},:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 149 -269 l 229 -51 l 340 -85 l 219 -306 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 410 860 b 226 1043 310 860 232 938 l 318 1043 b 410 954 328 989 354 954 b 510 1043 468 954 499 988 l 599 1043 b 410 860 593 938 510 860 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 313 1056 l 444 1056 l 340 851 l 257 851 m 526 1056 l 658 1056 l 554 851 l 471 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 231 989 l 594 989 l 594 900 l 231 900 "},:{ha:825,x_min:0,x_max:0,o:"m 638 -253 b 493 -142 551 -253 493 -211 b 593 -4 493 -85 538 -33 l 593 115 b 363 -12 560 47 479 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 7 b 603 -119 633 -40 603 -76 b 656 -169 603 -153 622 -169 b 728 -154 679 -169 707 -165 l 728 -236 b 638 -253 704 -246 676 -253 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 408 853 b 482 933 451 853 482 888 b 408 1014 482 979 451 1014 b 335 933 365 1014 335 979 b 408 853 335 888 365 853 m 408 789 b 260 933 326 789 260 854 b 408 1078 260 1013 326 1078 b 557 933 490 1078 557 1013 b 408 789 557 854 490 789 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 488 860 b 338 919 428 860 378 919 b 282 857 311 919 289 893 l 199 857 b 339 1018 210 956 267 1018 b 488 958 397 1018 447 958 b 543 1021 514 958 536 985 l 626 1021 b 488 860 615 922 558 860 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 600 1056 l 744 1056 l 600 851 l 514 851 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 500 1051 l 604 1051 l 753 851 l 668 851 l 550 956 l 432 851 l 350 851 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 428 881 b 354 954 388 881 354 914 b 428 1028 354 994 388 1028 b 501 954 468 1028 501 994 b 428 881 501 914 468 881 m 689 881 b 615 954 649 881 615 914 b 689 1028 615 994 649 1028 b 763 954 729 1028 763 994 b 689 881 763 914 729 881 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 385 1056 l 529 1056 l 615 851 l 529 851 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 315 1051 l 419 1051 l 568 851 l 483 851 l 365 956 l 247 851 l 165 851 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 193 1056 l 338 1056 l 424 851 l 338 851 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 379 1056 l 524 1056 l 379 851 l 293 851 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 344 878 b 268 954 303 878 268 913 b 344 1031 268 996 303 1031 b 421 954 386 1031 421 996 b 344 878 421 913 386 878 "},:{ha:881,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 835 b 358 1068 142 982 214 1068 b 444 1054 396 1068 415 1064 l 444 957 b 363 972 424 965 394 972 b 257 847 288 972 257 921 l 257 726 l 542 726 l 542 844 b 758 1078 542 992 614 1078 b 844 1064 796 1078 815 1074 l 844 967 b 763 982 824 975 794 982 b 657 857 688 982 657 931 l 657 726 l 835 726 l 835 629 l 657 629 l 657 0 l 542 0 l 542 629 l 257 629 l 257 0 l 142 0 "},:{ha:829,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 726 l 710 726 l 710 0 l 594 0 m 650 878 b 574 954 608 878 574 913 b 650 1031 574 996 608 1031 b 726 954 692 1031 726 996 b 650 878 726 913 692 878 "},:{ha:831,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 1074 l 711 1074 l 711 0 l 594 0 "},"":{ha:992,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 768 -7 b 589 133 672 -7 589 40 b 676 254 589 194 624 236 b 607 353 633 272 607 306 b 769 481 607 433 685 481 b 931 354 856 481 931 433 b 860 256 931 306 903 274 b 949 136 915 235 949 194 b 768 -7 949 43 868 -7 m 769 63 b 856 143 818 63 856 90 b 769 222 856 193 818 222 b 683 142 722 222 683 193 b 769 63 683 90 722 63 m 769 282 b 842 349 813 282 842 307 b 769 414 842 389 810 414 b 696 347 728 414 696 389 b 769 282 696 306 731 282 "},"":{ha:1004,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 778 -7 b 596 147 663 -7 599 54 l 681 147 b 775 63 686 99 713 63 b 863 138 835 63 863 92 b 779 213 863 188 835 213 l 743 213 l 743 278 l 778 278 b 856 346 831 278 856 303 b 783 411 856 383 832 411 b 697 335 735 411 703 382 l 613 335 b 785 481 618 419 682 481 b 944 353 886 481 944 425 b 865 250 944 300 913 267 b 958 136 921 238 958 199 b 778 -7 958 47 889 -7 "},"":{ha:1033,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 825 993 l 917 993 l 213 0 l 121 0 m 810 -7 b 631 133 714 -7 631 40 b 718 254 631 194 665 236 b 649 353 675 272 649 306 b 811 481 649 433 726 481 b 972 354 897 481 972 433 b 901 256 972 306 944 274 b 990 136 957 235 990 194 b 810 -7 990 43 910 -7 m 811 63 b 897 143 860 63 897 90 b 811 222 897 193 860 222 b 725 142 764 222 725 193 b 811 63 725 90 764 63 m 811 282 b 883 349 854 282 883 307 b 811 414 883 389 851 414 b 738 347 769 414 738 389 b 811 282 738 306 772 282 "},"":{ha:1025,x_min:0,x_max:0,o:"m 206 511 b 33 656 93 511 39 572 l 121 656 b 206 583 128 613 144 583 b 286 676 257 583 286 619 b 204 767 286 732 256 767 b 107 726 157 767 128 751 l 57 726 l 63 993 l 354 993 l 354 921 l 133 921 l 132 793 b 236 835 151 815 185 835 b 382 675 322 835 382 775 b 206 511 382 574 310 511 m 815 993 l 907 993 l 203 0 l 111 0 m 801 -7 b 622 133 706 -7 622 40 b 710 254 622 194 657 236 b 640 353 667 272 640 306 b 803 481 640 433 718 481 b 964 354 889 481 964 433 b 893 256 964 306 936 274 b 982 136 949 235 982 194 b 801 -7 982 43 901 -7 m 803 63 b 889 143 851 63 889 90 b 803 222 889 193 851 222 b 717 142 756 222 717 193 b 803 63 717 90 756 63 m 803 282 b 875 349 846 282 875 307 b 803 414 875 389 843 414 b 729 347 761 414 729 389 b 803 282 729 306 764 282 "},"":{ha:1056,x_min:0,x_max:0,o:"m 15 533 l 193 722 b 268 857 239 769 268 813 b 199 926 268 900 243 926 b 115 835 153 926 124 900 l 31 835 b 201 999 36 939 100 999 b 360 858 301 999 360 943 b 268 689 360 796 324 743 l 167 589 l 364 589 l 364 518 l 15 518 m 838 993 l 929 993 l 225 0 l 133 0 m 829 -7 b 647 147 714 -7 650 54 l 732 147 b 826 63 738 99 764 63 b 914 138 886 63 914 92 b 831 213 914 188 886 213 l 794 213 l 794 278 l 829 278 b 907 346 882 278 907 303 b 835 411 907 383 883 411 b 749 335 786 411 754 382 l 664 335 b 836 481 669 419 733 481 b 996 353 938 481 996 425 b 917 250 996 300 964 267 b 1010 136 972 238 1010 199 b 829 -7 1010 47 940 -7 "},"":{ha:986,x_min:0,x_max:0,o:"m 246 917 l 28 917 l 28 993 l 363 993 l 363 982 l 190 518 l 96 518 m 750 993 l 842 993 l 138 0 l 46 0 m 763 -7 b 583 133 667 -7 583 40 b 671 254 583 194 618 236 b 601 353 628 272 601 306 b 764 481 601 433 679 481 b 925 354 850 481 925 433 b 854 256 925 306 897 274 b 943 136 910 235 943 194 b 763 -7 943 43 863 -7 m 764 63 b 850 143 813 63 850 90 b 764 222 850 193 813 222 b 678 142 717 222 678 193 b 764 63 678 90 717 63 m 764 282 b 836 349 807 282 836 307 b 764 414 836 389 804 414 b 690 347 722 414 690 389 b 764 282 690 306 725 282 "},"":{ha:833,x_min:0,x_max:0,o:"m 378 -11 b 44 303 142 4 61 143 l 161 303 b 378 82 175 193 210 96 l 378 469 b 85 738 196 504 85 571 b 378 1004 85 881 206 992 l 378 1129 l 460 1129 l 460 1003 b 749 732 629 988 731 889 l 640 732 b 460 908 619 838 564 894 l 460 561 b 769 279 664 526 769 458 b 460 -11 769 122 644 3 l 460 -187 l 378 -187 m 654 272 b 460 456 654 375 611 425 l 460 82 b 654 272 576 96 654 169 m 194 747 b 378 575 194 660 225 607 l 378 910 b 194 747 258 900 194 832 "},"":{ha:833,x_min:0,x_max:0,o:"m 396 -10 b 88 356 215 8 88 147 l 88 367 b 396 736 88 572 221 715 l 396 874 l 478 874 l 478 736 b 756 485 614 725 735 653 l 642 485 b 478 640 626 583 560 631 l 478 86 b 653 261 565 99 642 157 l 760 261 b 478 -10 746 115 633 4 l 478 -187 l 396 -187 m 207 356 b 396 86 207 197 281 106 l 396 639 b 207 367 285 618 207 518 l 207 356 "},"":{ha:833,x_min:0,x_max:0,o:"m 21 628 l 106 628 b 449 1006 119 860 242 1006 b 750 706 619 1006 728 897 l 636 706 b 449 911 617 839 558 911 b 226 628 307 911 236 813 l 532 628 l 517 547 l 225 547 l 225 439 l 496 439 l 481 358 l 226 358 b 451 86 236 175 307 86 b 654 308 568 86 632 158 l 767 308 b 451 -12 744 103 625 -12 b 107 358 251 -12 121 119 l 21 358 l 21 439 l 106 439 l 106 547 l 21 547 "},"":{ha:833,x_min:0,x_max:0,o:"m 422 88 b 640 410 578 88 640 178 l 640 590 b 419 908 640 803 568 908 b 194 581 269 908 194 806 l 194 407 b 422 88 194 175 276 88 m 422 -12 b 71 406 214 -12 71 128 l 71 579 b 419 1006 71 861 207 1006 b 763 589 635 1006 763 861 l 763 408 b 422 -12 763 131 636 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 436 871 l 151 643 l 151 756 l 431 993 l 557 993 l 557 0 l 436 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 58 28 l 453 443 b 596 731 543 539 596 629 b 418 908 596 842 531 908 b 208 688 303 908 228 843 l 96 688 b 418 1006 111 882 229 1006 b 718 726 601 1006 718 897 b 518 365 718 604 640 485 l 244 99 l 724 99 l 724 0 l 58 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 61 293 193 -12 68 119 l 172 293 b 403 85 183 175 246 85 b 626 276 558 85 626 160 b 417 469 626 404 557 469 l 342 469 l 342 571 l 411 571 b 601 740 540 571 601 632 b 424 907 601 835 544 907 b 207 719 300 907 219 832 l 101 719 b 424 1006 108 876 235 1006 b 719 743 613 1006 719 881 b 558 526 719 631 651 564 b 750 276 675 496 750 414 b 400 -12 750 96 606 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 540 208 l 57 208 l 57 247 l 497 993 l 658 993 l 658 307 l 775 307 l 775 208 l 658 208 l 658 0 l 540 0 m 540 307 l 540 894 l 207 307 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 69 268 186 -12 83 106 l 185 268 b 399 85 204 160 247 85 b 617 325 533 85 617 175 b 408 557 617 465 535 557 b 174 461 293 557 226 521 l 129 461 l 129 993 l 688 993 l 688 889 l 229 889 l 229 586 b 432 654 269 624 338 654 b 740 325 610 654 740 528 b 400 -12 740 115 589 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 428 -12 b 71 439 157 -12 71 190 l 71 463 b 460 1006 71 819 232 1006 b 750 765 614 1006 724 925 l 635 765 b 451 907 613 857 563 907 b 190 510 301 907 196 772 b 446 644 238 590 331 644 b 771 319 643 644 771 501 b 428 -12 771 121 638 -12 m 428 82 b 647 314 558 82 647 174 b 426 550 647 457 561 550 b 199 331 293 550 199 460 b 428 82 199 168 294 82 "},"":{ha:833,x_min:0,x_max:0,o:"m 596 896 l 97 896 l 97 993 l 751 993 l 751 976 l 354 0 l 231 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 418 -12 b 75 282 256 -12 75 85 b 263 539 75 415 157 501 b 113 747 168 575 113 650 b 418 1006 113 908 265 1006 b 722 750 572 1006 722 906 b 569 540 722 650 661 581 b 760 285 685 499 760 413 b 418 -12 760 86 586 -12 m 418 86 b 636 289 540 86 636 157 b 421 486 636 419 539 486 b 199 286 303 486 199 418 b 418 86 199 156 303 86 m 422 582 b 600 749 528 582 600 643 b 418 911 600 844 521 911 b 235 746 315 911 235 849 b 422 582 235 642 321 582 "},"":{ha:833,x_min:0,x_max:0,o:"m 389 -11 b 69 244 206 -11 96 85 l 186 244 b 392 88 208 147 264 88 b 646 482 550 88 643 218 b 389 350 599 401 503 350 b 63 675 196 350 63 488 b 406 1007 63 874 196 1007 b 763 563 640 1007 763 849 l 763 500 b 389 -11 763 171 626 -11 m 407 444 b 635 660 540 444 635 531 b 406 913 635 822 539 913 b 186 681 275 913 186 821 b 407 444 186 538 272 444 "},"":{ha:854,x_min:0,x_max:0,o:"m 383 -12 b 63 349 210 -12 63 122 l 63 360 b 394 739 63 582 211 739 b 622 613 507 739 581 683 l 622 726 l 738 726 l 738 0 l 622 0 l 622 122 b 383 -12 581 51 481 -12 m 396 83 b 626 358 519 83 626 172 l 626 369 b 406 643 626 556 536 643 b 182 365 272 643 182 542 l 182 354 b 396 83 182 171 282 83 "},"":{ha:469,x_min:0,x_max:0,o:"m 151 629 l 38 629 l 38 726 l 151 726 l 151 892 l 267 892 l 267 726 l 426 726 l 426 629 l 267 629 l 267 0 l 151 0 "},:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 "},"":{ha:153,x_min:0,x_max:0,o:""},"":{ha:294,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 "},"":{ha:521,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 m 325 993 l 450 993 l 374 653 l 290 653 "},"":{ha:1172,x_min:0,x_max:0,o:"m 422 774 l 600 774 b 804 604 725 774 804 719 l 804 600 b 604 432 804 483 722 432 l 528 432 l 528 225 l 422 225 m 600 508 b 703 600 667 508 703 540 l 703 604 b 600 692 703 667 665 692 l 528 692 l 528 508 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "}},familyName:"Graphik Regular",ascender:1136,descender:-253,underlinePosition:-75,underlineThickness:50,boundingBox:{yMin:-220,xMin:-230,yMax:1113,xMax:1092},resolution:1e3,original_font_information:{format:0,copyright:"2009 Commercial Type.",fontFamily:"Graphik Regular",fontSubfamily:"Regular",uniqueID:"1.000;COM ;Graphik-Regular",fullName:"Graphik Regular Regular",version:"Version 1.000;PS 001.000;hotconv 1.0.72;makeotf.lib2.5.5900",postScriptName:"Graphik-Regular",trademark:"Graphik is a trademark of Commercial Type/Schwartzco Inc.",manufacturer:"Commercial Type",designer:"Christian Schwartz",manufacturerURL:"http://commercialtype.com",designerURL:"http://christianschwartz.com",licence:'Commercial Type Font Software End User License Agreement\r\rPLEASE READ THIS DOCUMENT CAREFULLY and we recommend that you keep a copy for further reference. \r\rThis End User License Agreement (the "Agreement" "EULA," "License," "Agreement" or "License Agreement") is a legal agreement between you and Schwartzco, Inc., d/b/a Commercial Type, a/d/b/a St. Bride Type Foundry (collectively, "Commercial Type") and becomes a binding contract between you and Schwartzco. This Agreement governs the terms of use the Font Software and the design of the Fonts embodied therein (collectively, "Font Software"), together with any media, printed materials, electronic documentation, updates, add-ons, artwork, web services and any other material that may be associated with the product now or in the future. This Agreement becomes effective (a) when you "ACCEPT LICENSE AGREEMENT," or (b) if you are acquire and accept the Font Software on a Compact Disc or Digital Video Disk (CD, DVD), or (c) when you open the compressed electronic file in which the Font Software is contained. If you do not wish to enter into this Agreement, do not purchase, access, download and/or install or otherwise use the Font Software.\r\r1. Upon payment in full, Commercial Type will grant you a non-exclusive terminable License to the Font Software that accompanies this EULA. Use of the Font Software is limited to Personal or Internal Business Use only. For the purposes of this Agreement, "Font Software" shall be defined as the design of the Fonts together with the Font Software which, when used generates the typeface, typographic designs and, if applicable, ornaments or other designs. Personal or Internal Business Use shall mean Use of the Font Software for your customary personal or internal business purposes and, except as may otherwise permitted herein, shall not mean or include the commercial distribution or use of Font Software, the design of the fonts or artwork embodied therein or any component thereof for any commercial use or in any Commercial Product for sale whatsoever. For the purposes of this Agreement, prohibited commercial uses include, by way of example not limitation, T-shirts, third-party software, electronic devices, mugs, animation, etc. and as may be further noted below. If you are unsure whether your use is not permitted, contact Commercial Type. Your failure to contact to seek permission or the lack of a specific prohibition in this Agreement shall not be interpreted or deemed a waiver or permissible use of any kind. You hereby agree that the Font Software shall further comprise all bitmap representations of typeface and typographic designs and ornaments created by or derived from the Font Software. The Font Software shall be deemed to include any upgrades, updates, related files, permitted modifications, if any, permitted copies, and related documentation.\r\r2. If you are a design consultancy, advertising agency or purchasing this license for use by or on behalf of such an entity, the ultimate end user should also purchase a license appropriate for their intended use of the Font Software, if their use of the Font Software is likely to involve uses not permitted under this Agreement. The license granted herein for personal use does not extend to uses by temporary employees or independent contractors using the Font Software as their use may relate to providing professional services or for other professional uses. Under such circumstances an employer and/or the ultimate end user are also required to purchase a license appropriate for their usage.\r\r3. For the purposes of this Agreement, "Commercial Product" shall also mean, among other things, a user editable electronic document created by Use of the Font Software which is offered for distribution to the general public (or to some subset of the general public), in Flash type software distributed or exhibited, in gaming products or software where the extraction of the Font Software or the designs embodied therein may be extracted; or use on goods for sale as a commercial product in exchange for a separate fee or other consideration. However, a document distributed in connection with a commercial transaction in which the consideration is unrelated to such a document (for example, printed advertising, a business letter or a receipt for purchase of tangible goods such as clothing), or as other design materials distributed incidental to the purchase of goods or services, shall not be considered a Commercial Product.\r\r4. a) Except as may be prohibited herein, you are permitted to electronically distribute a Personal or Internal Business Use document (that is, a document other than a Commercial Product as defined above) (i) that is in a static graphic image (for example, a gif) or in an embedded electronic document, and (ii) which is distributed in a format that permits only the viewing and printing (and not the editing, altering, enhancing, or modifying) of such static graphic image or embedded document. Personal or Internal Business Use shall not include any Use of the Font Software by persons that are not members of your immediate household, your authorized employees, or your authorized agents. All such household members, employees and agents shall be notified by you as to the terms and conditions of the Agreement and shall agree to be bound by it prior to use of the Font Software.\rb) Use of the Font Software in sIFR (Scalable Inman Font Replacement) is permitted. However, the use of Cufn or @font-face or other forms of web embedding or web font replacement technologies, (Font Replacement Technologies) other than pdf as otherwise expressly permitted herein, each require the purchase of a license upgrade.\r\r5. Commercial Type, its successors and assigns, expressly retain all right and title in and to the Font Software together with the design of the Font embodied therein together with any trademarks used in connection therewith. Except as may be otherwise expressly permitted herein, you agree not to copy the Font Software or create derivative works based upon the design of the Font or the Font Software. You hereby agree that the design of the Font and the Font Software are the exclusive property of Commercial Type and that the unauthorized use of the design of the Font or the Font Software is an infringement of Commercial Type\'s exclusive rights and causing significant monetary harm. All rights not expressly granted herein are reserved to Commercial Type. Commercial Type\'s rights and remedies in the event of an infringement shall be cumulative in nature. \r\r6. Except as is prohibited herein, you may install and Use the Font Software on a single file server for Use on a single local area network ("LAN") only when the Use of such Font Software is expressly for and limited to the number of total users disclosed and licensed under this Agreement, i.e., the total number of users who could use the Font Software, not the total number of users who might have access to the Font Software at any one time.\r\r7. Except as may be otherwise expressly permitted herein, you may not alter or copy the Font Software or the designs embodied therein in any manner whatsoever. Reformatting the Font Software into other formats for use in other operating systems is expressly prohibited. Upon payment of an additional fee and a separate written agreement Commercial Type may, if so agreed, provide the Font Software in alternate and/or additional font formats, contact Commercial Type for a quotation. Altering or amending the embedding bits characteristics of the Font Software is expressly prohibited. The Font Software may not be used to create or distribute any electronic document in which the Font Software or any part thereof, is embedded in a manner or format that permits editing, alterations, enhancements, or modifications by the recipient of such document. You may not knowingly transmit any electronic document or the Font Software to any party that intends or is likely to "hack," edit, alter, enhance, or otherwise modify the Font Software or remove the Font Software from any document.\r\r8. You may make one (1) back-up copy of Font Software for archival purposes only, and you agree to retain exclusive custody and control over any such copy. Upon termination of the Agreement, you must destroy the original and any and all copies of the Font Software. The unauthorized sharing, lending, renting, sale, or other unauthorized use or misuse of the back-up copy is a material breach of this Agreement and will result in the immediate termination of this License.\r\r9. If no other option exists, you may take a digitized copy of the Font Software used for a particular document, or Font Software embedded in an electronic document that is sent to a commercial printer or service bureau for use by the printer or service bureau for preparing the document provided that the printer or service bureau represents that it shall destroy any and all copies of the Font Software upon completion of its work. Notwithstanding, you agree that the transmission of a "print/preview" PDF document is the first and preferred method of transmitting such documents to a service bureau or printer.\r\r10. The designs embodied and the Font Software and the Font Software and any trademarks associated therewith are the exclusive property of Commercial Type and their designers, where applicable and are protected by the copyright and other intellectual property laws of the United States, by the copyright and design laws of other nations, and by other international treaties. Any copies that you are expressly permitted to make pursuant to the Agreement must contain the same copyright, trademark, and other proprietary notices that appear on or in the Font Software.\r\r11. You agree not to create, assist in and/or cause the creation of modifications or additions to the Fonts or Font Software, including, but not limited to, creating additional weights; creating additional or deleting existing characters; modifying existing characters; modifying font spacing and kerning; or converting fonts to an alternate digital format, modify, adapt, translate, reverse engineer, decompile, disassemble, alter, or otherwise attempt to discover the source code of the Font Software without first obtaining written permission from Commercial Type. In the event that permission is given to you, any and all modifications and additions shall become and shall remain the sole and exclusive property of Commercial Type and you may not sell, lend or otherwise transmit any modifications or additions to the Font Software to any third party. Other jurisdictions may provide for additional rights, and if applicable, you may reverse engineer or decompile the Font Software only to the extent that sufficient information is not available for the purpose of creating an interoperable software program (but only for such purpose and only to the extent that sufficient information is not provided by Commercial Type upon written request). All trademarks shall be used in accordance with accepted trademark practice, including identification of the trademark owner\'s name. Use of the trademarks associated with the Font Software inures solely to the benefit of Commercial Type. \r\r12. Use of Commercial Type Font Software in the following circumstances and/or applications is NOT permitted without first obtaining the appropriate licensing upgrade. \r\ra) \tALPHABET OR LETTERFORM-RELATED PRODUCTS\r\t\tFOR RESALE OR LETTERFORM CREATION PRODUCTS OR DEVICES;\rb) \tEMBEDDING IN ELECTRONIC DEVICES; ALL GAMING USES AND/OR DEVICES;\rc) \tEMBEDDING IN SOFTWARE;\rd) \tSTORING AND/OR SERVING THE FONT SOFTWARE FOR THE PURPOSES OF MAKING THE FONT SOFTWARE\r\t\tAVAILABLE VIA THE INTERNET USING FONT REPLACEMENT TECHNOLOGIES.\r\r\ri) Letterform or Alphabet Products include, but are not limited to, signage and/or scrapbooking uses involving reproductions of individual letterforms, use in the creation of signage or numbering products, rubber stamps, die-cut products, stencil products, tattoo, flash, or adhesive sticker alphabet products or any other product containing any image of or derived from the design of the Font embodied in the Font Software of which any likeness of the alphabet can be reproduced.\r\rii) Embedding of the Fonts in a print/preview format is permitted. Notwithstanding, embedding or other use of the Fonts or the outlines thereof in any method which permits the extraction of the Font Software of the designs embodied therein is expressly prohibited. Any such use requires the express written permission of Commercial Type and may or may not require the purchase of a license upgrade at the sole discretion of Commercial Type.\r\riii) In the event any dingbats or other art forms are part of the Font Software, use of the artwork is further restricted. You may use the artwork, drawings and/or dingbats on goods for sale, in logo design, retail packaging or in point of sale uses only after the purchase of a license upgrade.\r\rIn order to obtain a license upgrade, you must contact Commercial Type at info@commercialtype.com for more information. If you are unsure whether your use of the Font Software is specifically permitted under this Agreement, contact Commercial Type.\r\r13. Embedded Electronic Devices includes the use of the Font Software for any on-screen display or on an electronic device outside a single location. For example, and not by way of limitation, such electronic devices include a kiosk, gaming devices, embroidery or sewing machines game playing or gambling devices, irrespective of whether the showing or creation of copies of the design embodied in the Font Software is created by use of the software or as an image of the design in tiff, gif or other format. \r\r14. Commercial Type Font Software is licensed for use by a specified number of users. Use of the Font Software in more than one geographic location or by means of server or central CPU outside of the terms of your license is permitted provided the each user or potential user is licensed. License upgrades may be purchased from Commercial Type at info@commercialtype.com.\r\r15. Except as may be otherwise expressly provided for herein, you expressly agree not to rent, lease, sublicense, give, lend, or further distribute the Font Software. You may transfer all your rights under this Agreement another person or entity provided that (i) the transferee accepts and agrees to be bound by all the terms and conditions of this Agreement, and (ii) you destroy all copies of the Font Software, including all copies stored in the memory of a hardware device.\r\r16. Commercial Type warrants that the Font Software will perform substantially in accordance with its documentation for ninety (90) days following delivery of the Font Software. To make a warranty claim, you must either return the Font Software to the location from which you obtained it together with a copy of your sales receipt or, if acquired on-line, contact the on-line provider with sufficient information regarding your acquisition of the Font Software to permit the confirmation of the effective date of this License. Schwartzco, Inc. and Commercial Type hereby EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. COMMERCIAL TYPE DOES NOT WARRANT THAT THE OPERATION OF THE FONT SOFTWARE WILL BE UNINTERRUPTED OR ERROR-FREE, OR THAT THE FONT SOFTWARE IS WITHOUT DEFECTS. UNDER NO CIRCUMSTANCES SHALL COMMERCIAL TYPE BE LIABLE TO YOU OR ANY OTHER PARTY, WHETHER IN CONTRACT OR TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, FOR ANY SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING LOST PROFITS, SAVINGS OR BUSINESS INTERRUPTION AS A RESULT OF THE USE OF THE FONT SOFTWARE EVEN IF NOTIFIED IN ADVANCE OF SUCH POSSIBILITY. You hereby agree that your entire, exclusive, and cumulative liability and remedy shall be limited to the purchase price of this Font Software License. Under no circumstances shall Schwartzco, Inc.\'s or Commercial Type\'s liability to you exceed either the refunding of the cost of the Font Software License or replacement of the Font Software either of which shall be at Commercial Type\'s sole discretion.\r\r17. OTHER LAW - CONSUMERS ONLY. Some jurisdictions do not allow the exclusion or limitation of incidental, consequential or special damages, implied warranties or implied warranties as they relate to sales to consumers. ANY IMPLIED WARRANTY OR OTHER RIGHT CREATED BY LAW IS ONLY EFFECTIVE FOR THE NINETY (90) DAY WARRANTY PERIOD. THERE ARE NO WARRANTIES OR CONDITIONS OF ANY KIND AFTER THE NINETY (90) DAY WARRANTY PERIOD. To the extent permissible by law, you agree that all implied warranties are not to be effective for more than thirty (30) days. \r\r18. You expressly agree that this Agreement shall be governed by the laws of the State of New York, U.S.A., as they apply to contracts entered into and wholly performed therein and without respect to its conflict of laws provisions or the conflict of laws provisions of any other jurisdiction. You expressly submit to the personal jurisdiction of the state and federal courts in the State of New York, USA, agree to waive any defenses arising out of the selection of jurisdiction or venue and further agree to service of process by mail. You hereby expressly agree that the application of the United Nations Convention of Contracts for the International Sale of Goods is expressly excluded.\r\r19. You acknowledge that you have read and understand this Agreement and that by using the software you agree to be bound by its terms and conditions. You further agree that it is the complete and exclusive statement of the agreement between Commercial Type and you which supersedes any proposal or prior agreement, oral or written, and any other communications relating to the subject matter of this Agreement. No variation of the terms of this Agreement or any different terms will be enforceable in the absence of an express written amendment, or consent, including a written express waiver of the affected terms of this Agreement. If any provision of this Agreement is declared by a court of competent jurisdiction to be invalid, void or unenforceable, the remaining provisions of this Agreement shall continue in full force and effect, and the invalid provision shall be replaced by Commercial Type with a provision that effects the intent of the invalid provision.\r\r20. Commercial Type expressly reserves the right to amend or modify its License Agreements at any time and without prior notification.\r\r21. The Agreement shall automatically terminate in the event you or any authorized user breaches any term or condition set forth herein. Notwithstanding any termination of this License, Commercial Type expressly reserves any and all other rights and remedies under equity or law. The Agreement may only be modified in a writing signed by an authorized officer of Commercial Type.\r\r22. You agree to be responsible for compliance with all laws, foreign and domestic relating to the control of exports or the transfer of technology. If you are purchasing this License for government use, or under a government contract, you agree to familiarize yourself with and follow any applicable rules and regulations relating to the purchase of a license to use software and the actual use thereof.\r\rAll inquiries and arrangements for returns, if any, may be sent via e-mail to info@commercialtype.com. The Commercial Type website is located at www.commercialtype.com\r\rv090815',licenceURL:"http://commercialtype.com/license",preferredFamily:"Graphik"},cssFontWeight:"normal",cssFontStyle:"normal"}},2556:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag3dEngine=void 0;const r=i(5656);Object.defineProperty(t,"Tag3dEngine",{enumerable:!0,get:function(){return r.Tag3dEngine}})},9577:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextGeometry=void 0;const r=i(5232);class n extends r.ExtrudeGeometry{constructor(e,t={}){const i=t.font;if(void 0===i)super();else{const r=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}t.TextGeometry=n},4456:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Font=t.FontLoader=void 0;const r=i(5232);class n extends r.Loader{constructor(e){super(e)}load(e,t,i,n){const a=this,s=new r.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,(function(e){let i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}const r=a.parse(i);t&&t(r)}),i,n)}parse(e){return new a(e)}}t.FontLoader=n;class a{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],r=function(e,t,i){const r=Array.from(e),n=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,o=[];let l=0,c=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)l=0,c-=a;else{const e=s(t,n,l,c,i);l+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)Array.prototype.push.apply(i,r[e].toShapes());return i}}function s(e,t,i,n,a){const s=a.glyphs[e]||a.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".");const o=new r.ShapePath;let l,c,u,h,d,f,p,m;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let r=0,a=e.length;r<a;)switch(e[r++]){case"m":l=e[r++]*t+i,c=e[r++]*t+n,o.moveTo(l,c);break;case"l":l=e[r++]*t+i,c=e[r++]*t+n,o.lineTo(l,c);break;case"q":u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,f=e[r++]*t+n,o.quadraticCurveTo(d,f,u,h);break;case"b":u=e[r++]*t+i,h=e[r++]*t+n,d=e[r++]*t+i,f=e[r++]*t+n,p=e[r++]*t+i,m=e[r++]*t+n,o.bezierCurveTo(d,f,p,m,u,h)}}return{offsetX:s.ha*t,path:o}}t.Font=a,a.prototype.isFont=!0},8199:function(e,t,i){"use strict";var r,n,a,s,o,l,c=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenter=void 0;const d=i(2248),f=i(6041),p=i(9878),m=i(8877),g=i(7038),b=i(3441),v=i(5174),_=i(3858),y=i(148);t.CreationControlCenter=class{constructor(){r.set(this,m.EventEngine.instance),n.set(this,m.Logger.instance),a.set(this,_.Tree.instance),s.set(this,m.StateEngine.instance),o.set(this,m.UuidGenerator.instance),l.set(this,void 0),this.renderingEngines={},this.sessionEngines={}}static get instance(){return this._instance||(this._instance=new this)}applySettings(e,t,i){i=i||{},this.sessionEngines[e].applySettings(t,i);const r=[];i.session&&i.session.parameter&&i.session.parameter.value&&r.push(this.sessionEngines[e].customize());for(let t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[t].sessionSettingsId)&&(u(this,s,"f").renderingEngines[t].settingsAssigned.reset(),r.push(new Promise((e=>{u(this,s,"f").renderingEngines[t].settingsAssigned.then((()=>{e()}))}))),this.renderingEngines[t].applySettings(i.viewport));return new Promise((e=>Promise.all(r).then((()=>e()))))}applyViewportSettings(e,t,i={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1}){i=i||{};const r=new m.SettingsEngine;r.loadSettings(t);const n=[];return u(this,s,"f").renderingEngines[e].settingsAssigned.reset(),n.push(new Promise((t=>{u(this,s,"f").renderingEngines[e].settingsAssigned.then((()=>{t()}))}))),this.renderingEngines[e].applySettings(i,r),new Promise((e=>Promise.all(n).then((()=>e()))))}closeRenderingEngine(e){return c(this,void 0,void 0,(function*(){this.renderingEngines[e]&&(u(this,n,"f").debugLow(`CreationControlCenter.closeRenderingEngine: Closing viewport ${e}.`),!1===u(this,s,"f").renderingEngines[e].initialized.resolved&&(yield new Promise((t=>{u(this,s,"f").renderingEngines[e].initialized.then((()=>t()))}))),u(this,s,"f").renderingEngines[e].settingsAssigned.reset(),u(this,s,"f").renderingEngines[e].environmentMapLoaded.reset(),u(this,s,"f").renderingEngines[e].initialized.reset(),yield this.renderingEngines[e].close(),this.renderingEngines[e]=void 0,delete this.renderingEngines[e],delete u(this,s,"f").renderingEngines[e],u(this,n,"f").debug("CreationControlCenter.closeRenderingEngine: Viewport closed."),this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,r,"f").emitEvent(m.EVENTTYPE.VIEWPORT.VIEWPORT_CLOSED,{viewportId:e}))}))}closeSessionEngine(e){var t;return c(this,void 0,void 0,(function*(){if(this.sessionEngines[e]){u(this,n,"f").debugLow(`CreationControlCenter.closeSession: Closing session ${e}.`),!1===u(this,s,"f").sessionEngines[e].initialized.resolved&&(yield new Promise((t=>{u(this,s,"f").sessionEngines[e].initialized.then((()=>t()))}))),yield this.sessionEngines[e].close();for(let t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL&&this.renderingEngines[t].sessionSettingsId===e||this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")===this.sessionEngines[e])&&this.renderingEngines[t].reset();if(u(this,l,"f")===this.sessionEngines[e]){const i=Object.values(this.sessionEngines).filter((t=>t.id!==e));if(h(this,l,0===i.length?void 0:i[0],"f"),u(this,l,"f")){let e=[];for(let i in this.renderingEngines)!1===u(this,s,"f").renderingEngines[i].settingsAssigned.resolved&&this.renderingEngines[i].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&(e.push(u(this,s,"f").renderingEngines[i].settingsAssigned),this.assignSettings(this.renderingEngines[i],null===(t=u(this,l,"f"))||void 0===t?void 0:t.id));yield Promise.all(e),this.update&&this.update(this.sessionEngines,this.renderingEngines)}}u(this,s,"f").sessionEngines[e].settingsRegistered.reset(),this.sessionEngines[e]=void 0,delete this.sessionEngines[e],delete u(this,s,"f").sessionEngines[e],u(this,n,"f").debug("CreationControlCenter.closeSessionEngine: Session closed.");for(let e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.closeSessionEngine");this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,r,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_CLOSED,{sessionId:e})}}))}createRenderingEngineThreeJs(e){return c(this,void 0,void 0,(function*(){const t=u(this,o,"f").create();let i=e.id||u(this,o,"f").create();e.id=i;try{const o={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:0,status:"Creating viewport"};if(u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_START,o),this.renderingEngines[i]){const e={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:.1,status:"Closing viewport with same id"};u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,e),u(this,n,"f").warn(`CreationControlCenter.createViewport: Viewer with this id (${i}) already exists. Closing initial instance.`),yield this.closeRenderingEngine(i)}u(this,s,"f").renderingEngines[i]={id:i,initialized:new m.StatePromise,environmentMapLoaded:new m.StatePromise,settingsAssigned:new m.StatePromise,boundingBoxCreated:new m.StatePromise,busy:[]};const c=new f.RenderingEngine(e);if(this.renderingEngines[i]=c,c.cameraEngine.createDefaultCameras(),e.sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL){if(!e.sessionSettingsId)throw new m.ShapeDiverViewerViewportError("Session with sessionSettingsMode MANUAL needs to have a sessionSettingsId.");const t=e.sessionSettingsId;this.sessionEngines[t]&&(yield this.assignSettings(c,t))}else e.sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&(yield this.assignSettings(c,u(this,l,"f").id));c.sessionSettingsMode===d.SESSION_SETTINGS_MODE.NONE&&c.visibility===d.VISIBILITY_MODE.SESSION||c.visibility===d.VISIBILITY_MODE.INSTANT?c.show=!0:c.visibility===d.VISIBILITY_MODE.SESSION&&(u(this,a,"f").root.boundingBox.isEmpty()?u(this,r,"f").addListener(m.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{const t=e;t.viewportId===c.id&&(new v.Box(t.boundingBox.min,t.boundingBox.max).isEmpty()?c.show=!1:u(this,s,"f").renderingEngines[i].settingsAssigned.resolved?c.show=!0:u(this,s,"f").renderingEngines[i].settingsAssigned.then((()=>{c.show=!0})))})):u(this,s,"f").renderingEngines[i].settingsAssigned.resolved?c.show=!0:u(this,s,"f").renderingEngines[i].settingsAssigned.then((()=>{c.show=!0}))),u(this,s,"f").renderingEngines[i].initialized.resolve(!0),u(this,n,"f").debug(`CreationControlCenter.createViewport: Viewport(${i}) created.`);const h={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:1,status:"Viewport created"};return this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,r,"f").emitEvent(m.EVENTTYPE.VIEWPORT.VIEWPORT_CREATED,{viewportId:i}),u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_END,h),this.renderingEngines[i]}catch(e){const n={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:.9,status:"Viewport created failed, closing viewport"};u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,n);try{yield this.closeRenderingEngine(i)}catch(e){}const a={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:1,status:"Viewport created failed, exiting"};throw u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_CANCEL,a),e}}))}createSessionEngine(e){return c(this,void 0,void 0,(function*(){const t=u(this,o,"f").create();let i=e.id||u(this,o,"f").create();e.id=i;try{const a={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:0,status:"Creating session"};if(u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_START,a),this.sessionEngines[i]){const e={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.1,status:"Closing session with same id"};u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,e),u(this,n,"f").warn(`CreationControlCenter.createSession: Session with this id (${i}) already exists. Closing initial instance.`),yield this.closeSessionEngine(i)}u(this,s,"f").sessionEngines[i]={id:i,initialized:new m.StatePromise,settingsRegistered:new m.StatePromise};const o=new p.SessionEngine({id:i,ticket:e.ticket,modelViewUrl:e.modelViewUrl,excludeViewports:e.excludeViewports,buildVersion:b.build_data.build_version,buildDate:b.build_data.build_date,bearerToken:e.jwtToken}),c={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.25,status:"Initializing session."};if(u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,c),yield o.init(e.initialParameterValues),!1!==e.loadOutputs)if(!1!==e.waitForOutputs){yield o.updateOutputs({eventId:t,type:g.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:void 0}),u(this,r,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i});for(let e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.createSessionEngine.waitForOutputs=true")}else o.updateOutputs({eventId:t,type:g.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:void 0}).then((()=>{u(this,r,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i});for(let e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.createSessionEngine.waitForOutputs=false")}));this.sessionEngines[i]=o,u(this,s,"f").sessionEngines[i].initialized.resolve(!0),u(this,n,"f").debug(`CreationControlCenter.createSession: Session(${o.id}) created.`),u(this,l,"f")||h(this,l,o,"f");let f=[];for(let e in this.renderingEngines)!1===u(this,s,"f").renderingEngines[e].settingsAssigned.resolved&&(this.renderingEngines[e].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST||this.renderingEngines[e].sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL&&this.renderingEngines[e].sessionSettingsId===i)&&(f.push(u(this,s,"f").renderingEngines[e].settingsAssigned),this.assignSettings(this.renderingEngines[e],i));yield Promise.all(f);for(let e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.createSessionEngine");this.update&&this.update(this.sessionEngines,this.renderingEngines);const v={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:1,status:"Session created"};return u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_END,v),u(this,r,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_CREATED,{sessionId:i}),o}catch(e){if(e instanceof m.ShapeDiverViewerError&&(this.sessionEngines[i]&&1===Object.values(this.sessionEngines).length||!this.sessionEngines[i]&&0===Object.values(this.sessionEngines).length))for(let t in this.renderingEngines)this.renderingEngines[t].displayErrorMessage(e.message);const n={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.9,status:"Session created failed, closing session"};u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,n),yield this.closeSessionEngine(i);const a={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:1,status:"Session created failed"};throw u(this,r,"f").emitEvent(m.EVENTTYPE.TASK.TASK_CANCEL,a),e}}))}createSettingsObject(e,t){const i=this.sessionEngines[e];let r;if(i.settingsEngine.settings.build_version=b.build_data.build_version,i.settingsEngine.settings.build_date=b.build_data.build_date,i.settingsEngine.settings.settings_version=y.latestVersion,t&&this.renderingEngines[t])r=this.renderingEngines[t];else for(let t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[t].sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[t].sessionSettingsId)&&(r=this.renderingEngines[t]);return r&&r.saveSettings(),i.settingsEngine.settings}getARSessionEngine(){for(let e in this.sessionEngines)if(this.sessionEngines[e].canUploadGLTF)return this.sessionEngines[e]}getViewportSettings(e){let t=this.renderingEngines[e];if(!t)throw new m.ShapeDiverViewerViewportError("Viewport with id "+e+" could not be found.");const i=new m.SettingsEngine;return t.saveSettings(i),i.settings}resetSettings(e,t){t=t||{},this.sessionEngines[e].resetSettings(t);const i=[];t.session&&t.session.parameter&&t.session.parameter.value&&i.push(this.sessionEngines[e].customize());for(let r in this.renderingEngines)(this.renderingEngines[r].sessionSettingsMode===d.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[r].sessionSettingsMode===d.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[r].sessionSettingsId)&&(u(this,s,"f").renderingEngines[r].settingsAssigned.reset(),i.push(new Promise((e=>{u(this,s,"f").renderingEngines[r].settingsAssigned.then((()=>{e()}))}))),this.renderingEngines[r].applySettings(t.viewport));return new Promise((e=>Promise.all(i).then((()=>e()))))}saveSettings(e,t){return c(this,void 0,void 0,(function*(){const i=this.sessionEngines[e];yield i.saveUiProperties(!1);const r=this.createSettingsObject(e,t),a=yield i.saveSettings(r);if(!a)throw new m.ShapeDiverViewerSessionError(`Session(${e}).saveSettings: Could not save settings.`);return u(this,n,"f").debug(`Session(${e}).saveSettings: Saved settings.`),a}))}assignSettings(e,t){return c(this,void 0,void 0,(function*(){!0===u(this,s,"f").sessionEngines[t].initialized.resolved?(e.settingsEngine=this.sessionEngines[t].settingsEngine,yield e.applySettings()):yield new Promise((i=>{u(this,s,"f").sessionEngines[t].initialized.then((()=>c(this,void 0,void 0,(function*(){e.settingsEngine=this.sessionEngines[t].settingsEngine,yield e.applySettings(),i()}))))}))}))}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap},5094:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenter=void 0;const r=i(8199);Object.defineProperty(t,"CreationControlCenter",{enumerable:!0,get:function(){return r.CreationControlCenter}})},3979:function(e,t,i){"use strict";var r,n,a,s,o,l=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&l(t,e,i);return c(t,e),t},h=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingEngine=void 0;const f=u(i(5232)),p=i(887),m=i(1990),g=i(420),b=i(3858),v=i(3490),_=i(2248),y=i(8877),A=i(7038),E=i(3289),w=i(2850),S=i(4323),T=i(9346),x=i(5897),M=i(6152),R=i(5158),P=i(3467),C=i(8030),k=i(7076),O=i(3689),D=i(2465),N=i(7181),I=i(514);t.RenderingEngine=class{constructor(e){this._canvasEngine=g.CanvasEngine.instance,this._animationEngine=E.AnimationEngine.instance,this._converter=y.Converter.instance,this._intersectionManager=w.IntersectionEngine.instance,this._systemInfo=y.SystemInfo.instance,this._eventEngine=y.EventEngine.instance,this._colorCache=[],this._logger=y.Logger.instance,this._stateEngine=y.StateEngine.instance,this._tree=b.Tree.instance,this._uuidGenerator=y.UuidGenerator.instance,this._ambientOcclusion=!0,this._ambientOcclusionIntensity=.1,this._arRotation=p.vec3.create(),this._arScale=p.vec3.fromValues(1,1,1),this._arTranslation=p.vec3.create(),this._automaticColorAdjustment=!0,this._automaticResizing=!0,this._beautyRenderBlendingDuration=1500,this._beautyRenderDelay=50,this._busy=!1,this._busyModeDisplay=_.BUSY_MODE_DISPLAY.SPINNER,this._clearAlpha=1,this._clearColor="#ffffff",this._closed=!1,this._defaultMaterialColor="#199b9b",this._enableAR=!0,this._environmentMap="null",this._environmentMapAsBackground=!1,this._environmentMapBlurriness=0,this._environmentMapIntensity=1,this._environmentMapResolution="1024",this._environmentMapForUnlitMaterials=!1,this._environmentMapRotation=p.quat.create(),this._gridVisibility=!0,this._groundPlaneVisibility=!0,this._groundPlaneShadowVisibility=!1,this._lights=!0,this._maximumRenderingSize={width:1920,height:1080},this._pointSize=1,this._shadows=!0,this._show=!1,this._showStatistics=!1,this._type=_.RENDERER_TYPE.STANDARD,r.set(this,"https://viewer.shapediver.com/v3/graphics/logo_animated_breath.svg"),n.set(this,"https://viewer.shapediver.com/v3/graphics/logo.png"),a.set(this,"https://viewer.shapediver.com/v3/graphics/spinner_ripple.svg"),s.set(this,{}),o.set(this,{[_.FLAG_TYPE.CAMERA_FREEZE]:[],[_.FLAG_TYPE.CONTINUOUS_RENDERING]:[],[_.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE]:[]}),f.Object3D.DEFAULT_UP=new f.Vector3(0,0,1);const t=Object.assign({},e),i=Object.assign({},t.branding);this._id=t.id||y.UuidGenerator.instance.create(),this._visibility=t.visibility||_.VISIBILITY_MODE.SESSION,this._sessionSettingsMode=t.sessionSettingsMode||_.SESSION_SETTINGS_MODE.FIRST,this._sessionSettingsId=t.sessionSettingsId,this._branding={logo:void 0===i.logo?d(this,r,"f"):i.logo,backgroundColor:i.backgroundColor||"#393a45FF",busyModeSpinner:void 0===i.busyModeSpinner?d(this,a,"f"):i.busyModeSpinner,busyModeDisplay:i.busyModeDisplay||_.BUSY_MODE_DISPLAY.SPINNER,spinnerPositioning:i.spinnerPositioning||_.SPINNER_POSITIONING.BOTTOM_RIGHT},this._canvas=this._canvasEngine.getCanvas(this._canvasEngine.createCanvasObject(t.canvas)),this._domEventEngine=new y.DomEventEngine(this._canvas.canvasElement),this._cameraEngine=new m.CameraEngine(this,this._canvas.canvasElement),this._lightEngine=new v.LightEngine(this),this._beautyRenderingManager=new k.BeautyRenderingManager(this),this._cameraManager=new N.CameraManager(this),this._environmentGeometryManager=new O.EnvironmentGeometryManager(this),this._sceneTracingManager=new D.SceneTracingManager(this),this._sceneTreeManager=new S.SceneTreeManager(this),this._renderingManager=new T.RenderingManager(this),this._environmentMapLoader=new M.EnvironmentMapLoader(this),this._materialLoader=new x.MaterialLoader(this),this._geometryLoader=new R.GeometryLoader(this),this._htmlElementAnchorLoader=new C.HTMLElementAnchorLoader(this),this._lightLoader=new P.LightLoader(this),this._renderer=this.renderingManager.createRenderer(this._canvas.canvasElement),this._logoDivElement=this.renderingManager.addLogo(this._canvas.canvasElement,this._branding),this._spinnerDivElement=this.renderingManager.addSpinner(this._canvas.canvasElement,this._branding),this._beautyRenderingManager.init(),this._cameraManager.init(),this._environmentGeometryManager.init(),this._sceneTracingManager.init(),this._sceneTreeManager.init(),this._renderingManager.init(),this._environmentMapLoader.init(),this._materialLoader.init(),this._geometryLoader.init(),this._htmlElementAnchorLoader.init(),this._lightLoader.init(),this._renderingManager.start(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.then((()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)})),this._sessionSettingsMode===_.SESSION_SETTINGS_MODE.NONE&&(this.environmentMap="photo_studio",this.ambientOcclusion=!1)}get ambientOcclusion(){return this._ambientOcclusion}set ambientOcclusion(e){this._ambientOcclusion=e}get ambientOcclusionIntensity(){return this._ambientOcclusionIntensity}set ambientOcclusionIntensity(e){this._ambientOcclusionIntensity=e}get arRotation(){return this._arRotation}set arRotation(e){this._arRotation=e}get arScale(){return this._arScale}set arScale(e){this._arScale=e}get arTranslation(){return this._arTranslation}set arTranslation(e){this._arTranslation=e}get automaticColorAdjustment(){return this._automaticColorAdjustment}set automaticColorAdjustment(e){this._automaticColorAdjustment!==e&&(this._automaticColorAdjustment=e,this._colorCache.forEach((t=>t.colorCorrection(e))),this._materialLoader.assignColorCorrection(e))}get automaticResizing(){return this._automaticResizing}set automaticResizing(e){this._automaticResizing=e}get beautyRenderBlendingDuration(){return this._beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){this._beautyRenderBlendingDuration=e}get beautyRenderDelay(){return this._beautyRenderDelay}set beautyRenderDelay(e){this._beautyRenderDelay=e}get beautyRenderingManager(){return this._beautyRenderingManager}get busy(){return this._busy}set busy(e){this._busy=e}get busyModeDisplay(){return this._busyModeDisplay}set busyModeDisplay(e){this._busyModeDisplay=e}get branding(){return this._branding}get cameraEngine(){return this._cameraEngine}get cameraManager(){return this._cameraManager}get canvas(){return this._canvas.canvasElement}get canvasEngine(){return this._canvasEngine}get clearAlpha(){return this._clearAlpha}set clearAlpha(e){this._clearAlpha=e}get clearColor(){return this._clearColor}set clearColor(e){this._clearColor=e}get closed(){return this._closed}get colorCache(){return this._colorCache}get continuousRendering(){return this._renderingManager.continuousRendering}set continuousRendering(e){this._renderingManager.continuousRendering=e}get continuousShadowMapUpdate(){return this._renderingManager.continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._renderingManager.continuousShadowMapUpdate=e}get defaultMaterialColor(){return this._defaultMaterialColor}set defaultMaterialColor(e){this._defaultMaterialColor=e,this._materialLoader.assignDefaultMaterialColor()}get domEventEngine(){return this._domEventEngine}get enableAR(){return this._enableAR}set enableAR(e){this._enableAR=e}get environmentMap(){return this._environmentMap}set environmentMap(e){this._environmentMap=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapAsBackground(){return this._environmentMapAsBackground}set environmentMapAsBackground(e){this._environmentMapAsBackground=e}get environmentMapBlurriness(){return this._environmentMapBlurriness}set environmentMapBlurriness(e){this._environmentMapBlurriness=e,this._sceneTreeManager.scene.backgroundBlurriness=this._environmentMapBlurriness}get environmentMapIntensity(){return this._environmentMapIntensity}set environmentMapIntensity(e){this._environmentMapIntensity=e,this._sceneTreeManager.scene.backgroundIntensity=e,this._materialLoader.assignEnvironmentMapIntensity(e)}get environmentMapLoader(){return this._environmentMapLoader}get environmentMapResolution(){return this._environmentMapResolution}set environmentMapResolution(e){this._environmentMapResolution=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapForUnlitMaterials(){return this._environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){this._environmentMapForUnlitMaterials=e,this._materialLoader.assignEnvironmentMapForUnlitMaterials(e)}get environmentMapRotation(){return this._environmentMapRotation}set environmentMapRotation(e){this._environmentMapRotation=e,this._materialLoader.updateEnvironmentMapRotation(e)}get eventEngine(){return this._eventEngine}get geometryLoader(){return this._geometryLoader}get gridColor(){return this._environmentGeometryManager.gridColor}set gridColor(e){this._environmentGeometryManager.gridColor=e}get gridVisibility(){return this._gridVisibility}set gridVisibility(e){this._environmentGeometryManager.grid&&(this._environmentGeometryManager.grid.visible=e),this._gridVisibility=e}get groundPlaneColor(){return this._environmentGeometryManager.groundPlaneColor}set groundPlaneColor(e){this._environmentGeometryManager.groundPlaneColor=e}get groundPlaneVisibility(){return this._groundPlaneVisibility}set groundPlaneVisibility(e){this._environmentGeometryManager.groundPlane&&(this._environmentGeometryManager.groundPlane.visible=e),this._groundPlaneVisibility=e}get groundPlaneShadowColor(){return this._environmentGeometryManager.groundPlaneShadowColor}set groundPlaneShadowColor(e){this._environmentGeometryManager.groundPlaneShadowColor=e}get groundPlaneShadowVisibility(){return this._groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){this._environmentGeometryManager.groundPlaneShadow&&(this._environmentGeometryManager.groundPlaneShadow.visible=e),this._groundPlaneShadowVisibility=e}get htmlElementAnchorLoader(){return this._htmlElementAnchorLoader}get id(){return this._id}get lightEngine(){return this._lightEngine}get lightLoader(){return this._lightLoader}get lights(){return this._lights}set lights(e){this._lights=e}get lightScene(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get lightSceneId(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get logoDivElement(){return this._logoDivElement}get materialLoader(){return this._materialLoader}get maximumRenderingSize(){return this._maximumRenderingSize}set maximumRenderingSize(e){this._maximumRenderingSize=e}get minimalRendering(){return this.renderingManager.minimalRendering}get outputEncoding(){switch(this._renderer.outputEncoding){case f.sRGBEncoding:return _.TEXTURE_ENCODING.SRGB;case f.LinearEncoding:default:return _.TEXTURE_ENCODING.LINEAR}}set outputEncoding(e){switch(e){case _.TEXTURE_ENCODING.SRGB:this._renderer.outputEncoding=f.sRGBEncoding,this._beautyRenderingManager.assignOutputEncoding(f.sRGBEncoding);break;case _.TEXTURE_ENCODING.LINEAR:default:this._renderer.outputEncoding=f.LinearEncoding,this._beautyRenderingManager.assignOutputEncoding(f.LinearEncoding)}}get physicallyCorrectLights(){return this._renderer.physicallyCorrectLights}set physicallyCorrectLights(e){this._renderer.physicallyCorrectLights=e}get pointSize(){return this._pointSize}set pointSize(e){this._pointSize=e,this.materialLoader.assignPointSize(e)}get renderer(){return this._renderer}get renderingManager(){return this._renderingManager}get scene(){return this._sceneTreeManager.scene}get sceneTracingManager(){return this._sceneTracingManager}get sceneTreeManager(){return this._sceneTreeManager}get sessionSettingsId(){return this._sessionSettingsId}set sessionSettingsId(e){this._sessionSettingsId=e}get sessionSettingsMode(){return this._sessionSettingsMode}set sessionSettingsMode(e){this._sessionSettingsMode=e}get settingsEngine(){return this._settingsEngine}set settingsEngine(e){this._settingsEngine=e}get shadows(){return this._shadows}set shadows(e){this._shadows=e}get show(){return this._show}set show(e){this._show=e}get showStatistics(){return this._showStatistics}set showStatistics(e){this._showStatistics=e}get spinnerDivElement(){return this._spinnerDivElement}get stateEngine(){return this._stateEngine}get textureEncoding(){switch(this.materialLoader.textureEncoding){case f.sRGBEncoding:return _.TEXTURE_ENCODING.SRGB;case f.LinearEncoding:default:return _.TEXTURE_ENCODING.LINEAR}}set textureEncoding(e){switch(e){case _.TEXTURE_ENCODING.SRGB:this.environmentMapLoader.textureEncoding=f.sRGBEncoding,this.materialLoader.textureEncoding=f.sRGBEncoding;break;case _.TEXTURE_ENCODING.LINEAR:default:this.environmentMapLoader.textureEncoding=f.LinearEncoding,this.materialLoader.textureEncoding=f.LinearEncoding}}get toneMapping(){switch(this._renderer.toneMapping){case f.LinearToneMapping:return _.TONE_MAPPING.LINEAR;case f.ReinhardToneMapping:return _.TONE_MAPPING.REINHARD;case f.CineonToneMapping:return _.TONE_MAPPING.CINEON;case f.ACESFilmicToneMapping:return _.TONE_MAPPING.ACES_FILMIC;case f.NoToneMapping:default:return _.TONE_MAPPING.NONE}}set toneMapping(e){switch(e){case _.TONE_MAPPING.LINEAR:this._renderer.toneMapping=f.LinearToneMapping;break;case _.TONE_MAPPING.REINHARD:this._renderer.toneMapping=f.ReinhardToneMapping;break;case _.TONE_MAPPING.CINEON:this._renderer.toneMapping=f.CineonToneMapping;break;case _.TONE_MAPPING.ACES_FILMIC:this._renderer.toneMapping=f.ACESFilmicToneMapping;break;case _.TONE_MAPPING.NONE:default:this._renderer.toneMapping=f.NoToneMapping}this.materialLoader.updateMaterials()}get toneMappingExposure(){return this._renderer.toneMappingExposure}set toneMappingExposure(e){this._renderer.toneMappingExposure=e}get type(){return this._type}set type(e){this._type=e,this.update("RenderingEngine.type")}get usingSwiftShader(){return this.renderingManager.usingSwiftShader}get visibility(){return this._visibility}get visualizeAttributes(){return this._visualizeAttributes}set visualizeAttributes(e){this._visualizeAttributes=e}addFlag(e){const t=this._uuidGenerator.create();return e===_.FLAG_TYPE.BUSY_MODE?this.stateEngine.renderingEngines[this.id].busy.push(t):d(this,o,"f")[e].push(t),this.evaluateFlagState(),t}applySettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0},t){return h(this,void 0,void 0,(function*(){(t=t||this._settingsEngine)&&(e.environment?yield new Promise(((i,r)=>{this._stateEngine.renderingEngines[this.id].environmentMapLoaded.then((()=>{try{if(!t)return;this.environmentMapAsBackground=t.environment.mapAsBackground,this.clearAlpha=t.environment.clearAlpha,this.clearColor=this._converter.toHexColor(t.environment.clearColor),this.environmentMapRotation=[t.environment.rotation.x,t.environment.rotation.y,t.environment.rotation.z,t.environment.rotation.w],this.environmentMapBlurriness=t.environment.blurriness,this.environmentMapIntensity=t.environment.intensity,this.applySyncSettings(e),this._eventEngine.emitEvent(y.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id}),i()}catch(e){r(e)}})).catch((e=>r(e))),this.environmentMap=t.environment.map})):(this.applySyncSettings(e),this._eventEngine.emitEvent(y.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id})))}))}convert3Dto2D(e){return this.sceneTracingManager.convert3Dto2D(e)}close(){var e,t,i;return h(this,void 0,void 0,(function*(){this._closed=!0,this._lightEngine.close(),this._renderer.clear(!0,!0,!0),this._renderer.dispose(),this._domEventEngine.removeAllDomEventListener(),this._domEventEngine.dispose(),null===(e=this._canvas.canvasElement.parentElement)||void 0===e||e.removeChild(this._logoDivElement),null===(t=this._canvas.canvasElement.parentElement)||void 0===t||t.removeChild(this._spinnerDivElement),null===(i=this._canvas.canvasElement.parentNode)||void 0===i||i.removeChild(this._htmlElementAnchorLoader.parentDiv),this._canvas.reset()}))}createSDTFOverview(e){const t=new A.SDTFOverviewData({});for(let i=0,r=e.data.length;i<r;i++)e.data[i]instanceof A.SDTFOverviewData&&t.merge(e.data[i]);for(let i=0,r=e.children.length;i<r;i++)t.merge(new A.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return t.overview}createThreeJsColor(e){const t=new I.SDColor(this._converter.toThreeJsColorInput(e),e);return t.colorCorrection(this.automaticColorAdjustment),this._colorCache.push(t),t}displayErrorMessage(e){for(let e=0;e<this.logoDivElement.children.length;e++)this.logoDivElement.children[e].style.visibility="hidden";const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translateX(-50%) translateY(-50%)",t.style.textAlign="center",this.logoDivElement.appendChild(t);const i=document.createElement("p");i.textContent=e,i.style.fontFamily='"CircularXXWeb-Book",sans-serif',i.style.fontSize="x-large",i.style.color=this.logoDivElement.style.backgroundColor,i.style.filter="invert(100%)",t.appendChild(i)}evaluateFlagState(){{const e=this.busy;this.stateEngine.renderingEngines[this.id]&&this.stateEngine.renderingEngines[this.id].busy.length>0?e||(this.busy=!0,this._renderingManager.render(),this._eventEngine.emitEvent(y.EVENTTYPE.VIEWPORT.BUSY_MODE_ON,{viewportId:this.id})):e&&(this.busy=!1,this._renderingManager.render(),this._eventEngine.emitEvent(y.EVENTTYPE.VIEWPORT.BUSY_MODE_OFF,{viewportId:this.id}))}d(this,o,"f")[_.FLAG_TYPE.CAMERA_FREEZE].length>0?this.cameraEngine.deactivateCameraEvents():this.cameraEngine.activateCameraEvents();{const e=this.continuousRendering;d(this,o,"f")[_.FLAG_TYPE.CONTINUOUS_RENDERING].length>0?e||(this.continuousRendering=!0,this._renderingManager.render()):e&&(this.continuousRendering=!1)}{const e=this.continuousShadowMapUpdate;d(this,o,"f")[_.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE].length>0?e||(this.continuousShadowMapUpdate=!0,this._renderingManager.render()):e&&(this.continuousShadowMapUpdate=!1)}}getEnvironmentMapImageUrl(){return this._environmentMapLoader.getEnvironmentMapImageUrl(this.environmentMap)}getScreenshot(e,t){return this._renderingManager.getScreenshot(e,t)}isMobileDeviceWithoutBrowserARSupport(){return(!1!==this._systemInfo.isIOS||!1!==this._systemInfo.isAndroid)&&(!0===this._systemInfo.isAndroid&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isInstagram)}mouseEventToRay(e){return this._sceneTracingManager.mouseEventToRay(e)}raytraceScene(e,t,i){return this._intersectionManager.intersect({origin:e,direction:t},void 0,void 0,i).map((e=>({distance:e.distance,node:e.node,data:e.geometryData})))}removeFlag(e){let t=!1;const i=Object.values(_.FLAG_TYPE);for(let r of i)if(r===_.FLAG_TYPE.BUSY_MODE){if(this.stateEngine.renderingEngines[this.id].busy.includes(e)){this.stateEngine.renderingEngines[this.id].busy.splice(this.stateEngine.renderingEngines[this.id].busy.indexOf(e),1),t=!0;break}}else if(d(this,o,"f")[r].includes(e)){d(this,o,"f")[r].splice(d(this,o,"f")[r].indexOf(e),1),t=!0;break}return this.evaluateFlagState(),t}reset(){this._stateEngine.renderingEngines[this.id].settingsAssigned.reset(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.reset(),this._stateEngine.renderingEngines[this.id].environmentMapLoaded.reset(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.then((()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)}))}resize(e,t){this._renderingManager.resize(e,t),this._renderingManager.render()}saveSettings(e){(e=e||this._settingsEngine)&&(this.lightEngine.saveSettings(e),this.cameraEngine.saveSettings(e),e.ar.enable=this.enableAR,e.environment.mapResolution=this.environmentMapResolution,e.environment.map=Array.isArray(this.environmentMap)?JSON.stringify(this.environmentMap):this.environmentMap,e.environment.mapAsBackground=this.environmentMapAsBackground,e.environment.clearAlpha=this.clearAlpha,e.environment.clearColor=this._converter.toHexColor(this.clearColor),e.environment.rotation={x:this.environmentMapRotation[0],y:this.environmentMapRotation[1],z:this.environmentMapRotation[2],w:this.environmentMapRotation[3]},e.environment.blurriness=this.environmentMapBlurriness,e.environment.intensity=this.environmentMapIntensity,e.environmentGeometry.gridVisibility=this.gridVisibility,e.environmentGeometry.groundPlaneVisibility=this.groundPlaneVisibility,e.environmentGeometry.groundPlaneShadowVisibility=this.groundPlaneShadowVisibility,e.environmentGeometry.gridColor=this._converter.toHexColor(this.gridColor),e.environmentGeometry.groundPlaneColor=this._converter.toHexColor(this.groundPlaneColor),e.environmentGeometry.groundPlaneShadowColor=this._converter.toHexColor(this.groundPlaneShadowColor),e.general.pointSize=this.pointSize,e.general.transformation.rotation={x:this.arRotation[0],y:this.arRotation[1],z:this.arRotation[2]},e.general.transformation.translation={x:this.arTranslation[0],y:this.arTranslation[1],z:this.arTranslation[2]},e.general.transformation.scale={x:this.arScale[0],y:this.arScale[1],z:this.arScale[2]},e.general.defaultMaterialColor=this._converter.toHexColor(this.defaultMaterialColor),e.rendering.ambientOcclusion=this.ambientOcclusion,e.rendering.ambientOcclusionIntensity=this.ambientOcclusionIntensity,e.rendering.automaticColorAdjustment=this.automaticColorAdjustment,e.rendering.lights=this.lights,e.rendering.outputEncoding=this.outputEncoding,e.rendering.physicallyCorrectLights=this.physicallyCorrectLights,e.rendering.textureEncoding=this.textureEncoding,e.rendering.toneMapping=this.toneMapping,e.rendering.toneMappingExposure=this.toneMappingExposure,e.rendering.beautyRenderBlendingDuration=this.beautyRenderBlendingDuration,e.rendering.beautyRenderDelay=this.beautyRenderDelay,e.rendering.shadows=this.shadows)}touchToRay(e){return this._sceneTracingManager.touchToRay(e)}touchEventToRay(e){return this._sceneTracingManager.touchEventToRay(e)}update(e){this.closed||(this._sceneTreeManager.updateSceneTree(this._tree.root,this._lightEngine),this._renderingManager.updateShadowMap(),this._animationEngine.updateAnimationData(),this._renderingManager.render(),this._eventEngine.emitEvent(y.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this.id}))}updateEnvironmentGeometry(){this._environmentGeometryManager.updateEnvironmentGeometryPosition()}viewInAR(e,t={arScale:"auto",arPlacement:"floor",xrEnvironment:!1}){return h(this,void 0,void 0,(function*(){const i=this._uuidGenerator.create(),r={type:A.TASK_TYPE.AR_LOADING,id:i,progress:0,status:"Loading AR scene"};if(this._eventEngine.emitEvent(y.EVENTTYPE.TASK.TASK_START,r),!1===this.viewableInAR()){const e={type:A.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Stopped AR loading due to an error"};throw this._eventEngine.emitEvent(y.EVENTTYPE.TASK.TASK_CANCEL,e),new y.ShapeDiverViewerArError('Api.viewInAR: The device or browser is not supported for this functionality, please call "viewableInAR" for more information.')}const a="auto"!==t.arScale?"fixed":"auto";t.arPlacement,t.xrEnvironment;let s="";const o=this.getEnvironmentMapImageUrl();if(""!==o&&(o.endsWith(".hdr")?"skybox-image="+o:"environment-image="+o),this._systemInfo.isIOS){const t=document.createElement("a");t.href=e+("fixed"===a?".usdz_allowsContentScaling=0":".usdz"),t.rel="ar";const i=document.createElement("img");i.src=d(this,n,"f"),t.appendChild(i),t.click()}else{const t=document.createElement("a");t.href=`intent://arvr.google.com/scene-viewer/1.0?resizable=${"fixed"===a?"false":"true"}&file=${e}&mode=ar_only#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;end;`,t.click()}const l={type:A.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Done loading AR scene, launching AR"};this._eventEngine.emitEvent(y.EVENTTYPE.TASK.TASK_END,l)}))}viewableInAR(){return!(!1===this._systemInfo.isIOS&&!1===this._systemInfo.isAndroid||!0===this._systemInfo.isAndroid&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isInstagram)}applySyncSettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0}){this._settingsEngine&&(e.ar&&(this.enableAR=this._settingsEngine.ar.enable,this.arScale=[this._settingsEngine.general.transformation.scale.x,this._settingsEngine.general.transformation.scale.y,this._settingsEngine.general.transformation.scale.z],this.arTranslation=[this._settingsEngine.general.transformation.translation.x,this._settingsEngine.general.transformation.translation.y,this._settingsEngine.general.transformation.translation.z],this.arRotation=[this._settingsEngine.general.transformation.rotation.x,this._settingsEngine.general.transformation.rotation.y,this._settingsEngine.general.transformation.rotation.z]),e.scene&&(this.gridColor=this._settingsEngine.environmentGeometry.gridColor,this.gridVisibility=this._settingsEngine.environmentGeometry.gridVisibility,this.groundPlaneColor=this._settingsEngine.environmentGeometry.groundPlaneColor,this.groundPlaneVisibility=this._settingsEngine.environmentGeometry.groundPlaneVisibility,this.groundPlaneShadowColor=this._settingsEngine.environmentGeometry.groundPlaneShadowColor,this.groundPlaneShadowVisibility=this._settingsEngine.environmentGeometry.groundPlaneShadowVisibility,this.shadows=this._settingsEngine.rendering.shadows,this.ambientOcclusion=this._settingsEngine.rendering.ambientOcclusion,this.lights=this._settingsEngine.rendering.lights,this.automaticColorAdjustment=this._settingsEngine.rendering.automaticColorAdjustment,this.textureEncoding=this._settingsEngine.rendering.textureEncoding,this.outputEncoding=this._settingsEngine.rendering.outputEncoding,this.physicallyCorrectLights=this._settingsEngine.rendering.physicallyCorrectLights,this.toneMapping=this._settingsEngine.rendering.toneMapping,this.toneMappingExposure=this._settingsEngine.rendering.toneMappingExposure),e.general&&(this.defaultMaterialColor=this._settingsEngine.general.defaultMaterialColor,this.pointSize=this._settingsEngine.general.pointSize),e.light&&this.lightEngine.applySettings(this._settingsEngine),e.camera&&this.cameraEngine.applySettings(this._settingsEngine),this._stateEngine.renderingEngines[this.id].settingsAssigned.resolve(!0),this.update("RenderingEngine.applySyncSettings"))}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},6041:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.ThreejsData=t.RenderingEngine=void 0;const r=i(3979);Object.defineProperty(t,"RenderingEngine",{enumerable:!0,get:function(){return r.RenderingEngine}});const n=i(6336);Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return n.ThreejsData}});const a=i(6152);Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP_EMPTY}})},6152:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMapLoader=t.ENVIRONMENT_MAP_TYPE=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP=t.ENVIRONMENT_MAP_CUBE=void 0;const o=a(i(5232)),l=i(8877),c=i(4645),u=i(7038);var h,d,f,p;(p=t.ENVIRONMENT_MAP_CUBE||(t.ENVIRONMENT_MAP_CUBE={})).DEFAULT="default",p.DEFAULT_BW="default_bw",p.BLURRED_LIGHTS="blurred_lights",p.GEORGENTOR="georgentor",p.GEORGENTOR_BLUR="georgentor_blur",p.GEORGENTOR_BLUE_BLUR="georgentor_blue_blur",p.GEORGENTOR_BW_BLUR="georgentor_bw_blur",p.LEVELSETS="levelsets",p.LYTHWOOD_FIELD="lythwood_field",p.MOUNTAINS="mountains",p.OCEAN="ocean",p.PIAZZA_SAN_MARCO="piazza_san_marco",p.RESIDENTIAL_GARDEN="residential_garden",p.ROOM_ABSTRACT_1="room_abstract_1",p.SKY="sky",p.STORAGE_ROOM="storage_room",p.STORM="storm",p.SUBWAY_ENTRANCE="subway_entrance",p.SUBWAY_ENTRANCE_BW_BLUR="subway_entrance_bw_blur",p.WHITE="white",p.YOKOHAMA="yokohama",function(e){e.ANNIVERSARY_LOUNGE="anniversary_lounge",e.BALLROOM="ballroom",e.CANNON_EXTERIOR="cannon_exterior",e.CAPE_HILL="cape_hill",e.CHRISTMAS_PHOTO_STUDIO="christmas_photo_studio",e.CIRCUS_MAXIMUS="circus_maximus",e.COLORFUL_STUDIO="colorful_studio",e.COMBINATION_ROOM="combination_room",e.GREEN_POINT_PARK="green_point_park",e.HILLTOP_CONSTRUCTION="hilltop_construction",e.LARGE_CORRIDOR="large_corridor",e.LYTHWOOD_LOUNGE="lythwood_lounge",e.NEUTRAL="neutral",e.OBERER_KUHBERG="oberer_kuhberg",e.OLD_HALL="old_hall",e.PAUL_LOBE_HAUS="paul_lobe_haus",e.PHOTO_STUDIO="photo_studio",e.PHOTO_STUDIO_BROADWAY_HALL="photo_studio_broadway_hall",e.SNOWY_FIELD="snowy_field",e.STUDIO_SMALL="studio_small",e.SUNFLOWERS="sunflowers",e.TABLE_MOUNTAIN="table_mountain",e.VENICE_SUNSET="venice_sunset",e.WIDE_STREET="wide_street"}(h=t.ENVIRONMENT_MAP||(t.ENVIRONMENT_MAP={})),(f=t.ENVIRONMENT_MAP_EMPTY||(t.ENVIRONMENT_MAP_EMPTY={})).NONE="none",f.NULL="null",function(e){e.LDR="ldr",e.HDR="hdr",e.NONE="none",e.NULL="null"}(d=t.ENVIRONMENT_MAP_TYPE||(t.ENVIRONMENT_MAP_TYPE={})),t.EnvironmentMapLoader=class{constructor(e){this._renderingEngine=e,this._converter=l.Converter.instance,this._environmentMapFilenames=["px","nx","pz","nz","py","ny"],this._environmentMapHDR=[],this._environmentMapNamesHDR=Object.values(h).filter((e=>"string"==typeof e)),this._environmentMapNamesHDRKhronos=["cannon_exterior","colorful_studio","neutral","wide_street"],this._environmentMapNamesJPG=["default","default_bw","blurred_lights","georgentor","georgentor_blur","georgentor_blue_blur","georgentor_bw_blur","levelsets","lythwood_field","mountains","ocean","piazza_san_marco","residential_garden","room_abstract_1","sky","storage_room","storm","subway_entrance","subway_entrance_bw_blur","white","yokohama"],this._environmentMaps={},this._eventEngine=l.EventEngine.instance,this._stateEngine=l.StateEngine.instance,this._logger=l.Logger.instance,this._httpClient=l.HttpClient.instance,this._uuidGenerator=l.UuidGenerator.instance,this._environmentMapName="null",this._environmentMapNameInternal="null",this._isHDRMap=!1,this._textureEncoding=o.sRGBEncoding,this._type=d.NULL}get environmentMap(){return this._environmentMaps[this._environmentMapName]}get isHDRMap(){return this._isHDRMap}init(){this._environmentMaps.null=null,this._environmentMaps.none=null,this._pmremGenerator=new o.PMREMGenerator(this._renderingEngine.renderer),this._pmremGenerator.compileEquirectangularShader()}notify(e,t=!1){let i;t?(i={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:e,progress:1,status:"Loading of EnvironmentMap failed"},this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_CANCEL,i)):(i={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:e,progress:1,status:"Loaded EnvironmentMap"},this._stateEngine.renderingEngines[this._renderingEngine.id].environmentMapLoaded.resolve(!0),this._stateEngine.renderingEngines[this._renderingEngine.id].environmentMapLoaded=new l.StatePromise,this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_END,i))}loadEnvMap(e,t){return s(this,void 0,void 0,(function*(){const i=t||this._uuidGenerator.create(),r={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:i,data:{input:e},progress:0,status:"Loading EnvironmentMap"};if(this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_START,r),"none"===e)return this._environmentMapNameInternal=e,{name:e,map:this._environmentMaps[e],type:d.NONE};if("null"===e)return this._environmentMapNameInternal=e,{name:e,map:this._environmentMaps[e],type:d.NULL};let n,a,s;if(!Array.isArray(e)&&e.startsWith('["https')&&e.endsWith('"]'))try{e=JSON.parse(e)}catch(t){throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map.",e)}if(Array.isArray(e)){if(6!==e.length)throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, exactly 6 files are needed in the array.",e);n=JSON.stringify(e,null,0),a=n}else n=e.toLowerCase().replace(/ /g,"_"),a=n+this._renderingEngine.environmentMapResolution;this._environmentMapNameInternal=n;for(let e in this._environmentMaps)if(e===a)return{name:e,map:this._environmentMaps[e],type:this._environmentMaps[e]instanceof o.CubeTexture?d.LDR:d.HDR};try{if(Array.isArray(e))s=e;else{let t;if(s=[],this._environmentMapNamesHDR.indexOf(n)>=0){let e="https://viewer.shapediver.com/v3/envmaps/1k/"+n+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(n)>=0&&(e="https://viewer.shapediver.com/v3/envmaps/khronos/"+n+".hdr"),this._environmentMapHDR.push(e),yield this.loadEnvironmentMap(e,[],i),{name:e,map:this._environmentMaps[e],type:this._environmentMaps[e]instanceof o.CubeTexture?d.LDR:d.HDR}}if(this._environmentMapNamesJPG.indexOf(n)>=0)for(t=0;t<this._environmentMapFilenames.length;t++)s.push("https://viewer.shapediver.com/v2/envmaps/"+this._renderingEngine.environmentMapResolution+"/"+n+"/"+this._environmentMapFilenames[t]+".jpg");else{if(!e.startsWith("https://")&&!e.startsWith("http://"))throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, format not supported.",e);if(e.endsWith(".hdr"))return this._environmentMapHDR.push(e),yield this.loadEnvironmentMap(e,[],i),{name:e,map:this._environmentMaps[e],type:this._environmentMaps[e]instanceof o.CubeTexture?d.LDR:d.HDR};for(e.endsWith("/")||(e+="/"),t=0;t<this._environmentMapFilenames.length;t++)s.push(e+this._environmentMapFilenames[t]+".jpg")}}return yield this.loadEnvironmentMap(a,s,i),{name:a,map:this._environmentMaps[a],type:this._environmentMaps[a]instanceof o.CubeTexture?d.LDR:d.HDR}}catch(e){throw this.notify(i,!0),e}}))}load(e){return s(this,void 0,void 0,(function*(){const t=this._uuidGenerator.create(),i=yield this.loadEnvMap(e,t);return this.assignEnvironmentMap(i.name,i.type,t),Promise.resolve(!0)}))}getEnvironmentMapImageUrl(e){if(Array.isArray(e))return"";if(this._environmentMapNamesHDR.indexOf(e)>=0){let t="https://viewer.shapediver.com/v3/envmaps/1k/"+e+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(e)>=0&&(t="https://viewer.shapediver.com/v3/envmaps/khronos/"+e+".hdr"),t}return(e.startsWith("https://")||e.startsWith("http://"))&&(e.endsWith(".hdr")||e.endsWith(".jpg")||e.endsWith(".png"))?e:""}assignEnvironmentMap(e,t,i){e in this._environmentMaps!=0&&(this._type=t,this._environmentMapName=e,this._renderingEngine.materialLoader.assignEnvironmentMap(this._environmentMaps[e],t),this.notify(i))}assignTextureEncoding(){var e;for(let t in this._environmentMaps)this._environmentMaps[t]&&!this._environmentMapHDR.includes(t)&&(null===(e=this._environmentMaps[t])||void 0===e||e.dispose(),this._environmentMaps[t].encoding=this._textureEncoding,this._environmentMaps[t].needsUpdate=!0)}loadEnvironmentMap(e,t,i){return s(this,void 0,void 0,(function*(){return new Promise(((r,n)=>s(this,void 0,void 0,(function*(){try{if(e.endsWith(".hdr")){const t=yield this._httpClient.loadTexture(e),i=new Uint8Array(t.data),a=new Blob([i],{type:t.headers["content-type"]}),s=URL.createObjectURL(a);(new c.RGBELoader).load(s,(t=>{const i=this._pmremGenerator.fromEquirectangular(t).texture;this._pmremGenerator.dispose(),this._environmentMaps[e]=i,URL.revokeObjectURL(s),r()}),(()=>{}),(e=>n(e)))}else{const i=[];t.forEach((e=>i.push(this._httpClient.loadTexture(e))));const a=(yield Promise.all(i)).map((e=>{const t=new Uint8Array(e.data),i=new Blob([t],{type:e.headers["content-type"]});return URL.createObjectURL(i)}));(new o.CubeTextureLoader).load(a,(t=>{t.encoding=o.sRGBEncoding,t.format=o.RGBAFormat,t.mapping=o.CubeReflectionMapping,this._environmentMaps[e]=t,a.forEach((e=>URL.revokeObjectURL(e))),r()}),(()=>{}),(e=>n(e)))}}catch(e){throw this.notify(i,!0),e}}))))}))}get textureEncoding(){return this._textureEncoding}set textureEncoding(e){this._textureEncoding=e,this.assignTextureEncoding()}}},5158:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryLoader=void 0;const s=a(i(5232)),o=i(7038),l=i(8877),c=i(2248),u=i(6064),h=i(887),d=i(1786);t.GeometryLoader=class{constructor(e){this._renderingEngine=e,this._primitiveCache={},this._geometryCache={},this._logger=l.Logger.instance,this._gemSphericalMapsCache={}}emptyGeometryCache(){this._geometryCache={},this._primitiveCache={}}init(){}load(e,t,i,r){const n=(()=>this._primitiveCache[e.primitive.id+"_"+e.primitive.version]?(this._primitiveCache[e.primitive.id+"_"+e.primitive.version].counter++,this._primitiveCache[e.primitive.id+"_"+e.primitive.version].threeGeometry):this.loadPrimitive(e.primitive))();let a;a=e.effectMaterials.length>0?e.effectMaterials[e.effectMaterials.length-1].material:this._renderingEngine.type===c.RENDERER_TYPE.ATTRIBUTES?e.attributeMaterial:e.material;const l={mode:e.mode,useVertexTangents:void 0!==n.attributes.tangent,useVertexColors:void 0!==n.attributes.color&&this._renderingEngine.type!==c.RENDERER_TYPE.ATTRIBUTES,useFlatShading:void 0===n.attributes.normal,useMorphTargets:Object.keys(n.morphAttributes).length>0,useMorphNormals:Object.keys(n.morphAttributes).length>0&&void 0!==n.morphAttributes.normal};if(a instanceof o.MaterialGemData){const t=a;n.boundingSphere||n.computeBoundingSphere();let i=this.createCubeNormalMap(e,n),r=n.boundingSphere.center,s=n.boundingSphere.radius;t.side=o.MATERIAL_SIDE.FRONT,t.center=h.vec3.fromValues(r.x,r.y,r.z),t.radius=s,t.sphericalNormalMap=i}const f=this._renderingEngine.materialLoader.load(a||e,l);let p;this._geometryCache[e.id+"_"+e.version]&&!r?(p=this._geometryCache[e.id+"_"+e.version].obj,(!1===i&&p.parent!==t||!0===i)&&(p=p.cloneObject(),t.add(p)),p.traverse((e=>{(e instanceof s.Points||e instanceof s.LineSegments||e instanceof s.LineLoop||e instanceof s.Line||e instanceof s.Mesh)&&(e.material=f)}))):(p=new d.SDData(e.id,e.version),this.createMesh(p,e,n,f,l,r),this._geometryCache[e.id+"_"+e.version]={obj:p},t.add(p)),p.children.forEach((e=>e.castShadow=!0)),f instanceof u.GemMaterial?p.children.forEach((e=>e.receiveShadow=!1)):p.children.forEach((e=>e.receiveShadow=!0));const m=t.children.find((e=>{e.SDid===p.SDid&&(e.SDversion,p.SDversion)}));return m&&t.remove(m),e.boundingBox.clone()}loadPrimitive(e){let t=new s.BufferGeometry;e.indices&&t.setIndex(new s.BufferAttribute(e.indices.array,e.indices.itemSize));for(let i in e.attributes){const r=this.loadAttribute(e.attributes[i],i),n=this.getAttributeName(i);if("NORMAL"===i&&this.checkNormals(e,i,r,t))continue;t.setAttribute(n,r);const a=e.attributes[i].morphAttributeData;if(a.length>0){t.morphTargetsRelative=!0;const e=[];for(let t=0;t<a.length;t++)e.push(this.loadAttribute(a[t],i));t.morphAttributes[n]=e}const s="TEXCOORD_1",o="uv2";if("uv"===n&&!e.attributes[s]){t.setAttribute(o,r);const n=e.attributes[i].morphAttributeData;if(n.length>0){t.morphTargetsRelative=!0;const e=[];for(let t=0;t<n.length;t++)e.push(this.loadAttribute(n[t],i));t.morphAttributes[o]=e}}}return e.threeJsObject[this._renderingEngine.id]=t,t}removeFromGeometryCache(e){this._geometryCache[e]&&delete this._geometryCache[e]}removeFromPrimitiveCache(e){this._primitiveCache[e]&&(1===this._primitiveCache[e].counter?delete this._primitiveCache[e]:this._primitiveCache[e].counter--)}checkNormals(e,t,i,r){let n=!1;for(let e=0;e<10;++e){if(Math.abs(i.array[3*e])>.001){n=!0;break}if(Math.abs(i.array[3*e+1])>.001){n=!0;break}if(Math.abs(i.array[3*e+2])>.001){n=!0;break}}if(!n){r.computeVertexNormals();const i=r.getAttribute("normal");return e.attributes[t]=new o.AttributeData(new Float32Array(i.array),i.itemSize,0,0,3,i.normalized,i.array.length/3),!0}return!1}convertToTriangleMode(e,t){let i=e.getIndex();if(null===i){const t=[],r=e.getAttribute("position");if(void 0===r)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined position attribute. Processing not possible.");for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}if(null===i)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined index. Processing not possible.");const r=i.count-2,n=[];if(t===o.PRIMITIVE_MODE.TRIANGLE_FAN)for(let e=1;e<=r;e++)n.push(i.getX(0)),n.push(i.getX(e)),n.push(i.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(n.push(i.getX(e)),n.push(i.getX(e+1)),n.push(i.getX(e+2))):(n.push(i.getX(e+2)),n.push(i.getX(e+1)),n.push(i.getX(e)));if(n.length/3!==r)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Unable to generate correct amount of triangle.");e.setIndex(n)}createCubeNormalMap(e,t,i=1024){if(this._gemSphericalMapsCache[e.id+"_"+e.version])return this._gemSphericalMapsCache[e.id+"_"+e.version];if(this._gemScene||(this._gemScene=new s.Scene,this._gemCubeCameraRenderTarget=new s.WebGLCubeRenderTarget(i,{format:s.RGBAFormat,magFilter:s.LinearFilter,minFilter:s.LinearFilter}),this._gemCubeCameraRenderTarget.texture.generateMipmaps=!1,this._gemCubeCameraRenderTarget.texture.minFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.magFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.format=s.RGBAFormat,this._gemCubeCamera=new s.CubeCamera(.001,1e4,this._gemCubeCameraRenderTarget),this._gemScene.add(this._gemCubeCamera)),!this._gemNormalMaterial){let e={defines:{},uniforms:s.UniformsUtils.merge([s.UniformsLib.common]),vertexShader:"\n                varying vec3 vNormal;\n\n                void main() {\n                  vNormal = normal;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n                ",fragmentShader:"\n                varying highp vec3 vNormal;\n\n                float decodeFloat(float f) {\n                    float r = mod(f, 1.0/255.0);\n                    return /*r > 0.5/256.0 ? f + (1.0/256.0) - r : */f - r;\n                }\n                \n                vec3 decodeVec3(vec3 v) {\n                    return vec3(decodeFloat(v.x), decodeFloat(v.y), decodeFloat(v.z));\n                }\n                \n                float signEncoding(vec3 v) {\n                    float code = 1.0;\n                     if(v.x < 0.0 && v.y < 0.0 && v.z < 0.0) {\n                        code = 0.0;\n                    } else if (v.x < 0.0 && v.y < 0.0) {\n                        code = 2.0/256.0;\n                    } else if (v.x < 0.0 && v.z < 0.0) {\n                        code = 4.0/256.0;\n                    } else if (v.y < 0.0 && v.z < 0.0) {\n                        code = 6.0/256.0;\n                    } else if (v.x < 0.0) {\n                        code = 8.0/256.0;\n                    } else if (v.y < 0.0) {\n                        code = 10.0/256.0;\n                    } else if (v.z < 0.0) {\n                        code = 12.0/256.0;\n                    }\n                    return code;\n                }\n                \n                void main() {\n                    vec3 n = normalize(vNormal);\n                    gl_FragColor = vec4(decodeVec3(abs(n)), signEncoding(n));\n                }\n                "};this._gemNormalMaterial=new s.ShaderMaterial({uniforms:s.UniformsUtils.clone(e.uniforms),defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this._gemNormalMaterial.blending=s.NoBlending,this._gemNormalMaterial.side=s.DoubleSide,this._gemScene.overrideMaterial=this._gemNormalMaterial}let r=new s.Mesh(t.clone(),this._gemNormalMaterial);return r.geometry.center(),this._gemScene.add(r),this._gemCubeCamera.update(this._renderingEngine.renderer,this._gemScene),this._gemScene.remove(r),r.geometry.dispose(),r.material.dispose(),this._gemSphericalMapsCache[e.id+"_"+e.version]=this._gemCubeCamera.renderTarget.texture,this._gemSphericalMapsCache[e.id+"_"+e.version]}createMesh(e,t,i,r,n,a){if(t.mode===o.PRIMITIVE_MODE.POINTS){const n=new s.Points(i,r);t.threeJsObject[this._renderingEngine.id]=n,e.add(n)}else if(t.mode===o.PRIMITIVE_MODE.LINES){const n=new s.LineSegments(i,r);t.threeJsObject[this._renderingEngine.id]=n,e.add(n)}else if(t.mode===o.PRIMITIVE_MODE.LINE_LOOP){const n=new s.LineLoop(i,r);t.threeJsObject[this._renderingEngine.id]=n,e.add(n)}else if(t.mode===o.PRIMITIVE_MODE.LINE_STRIP){const n=new s.Line(i,r);t.threeJsObject[this._renderingEngine.id]=n,e.add(n)}else{if(t.mode!==o.PRIMITIVE_MODE.TRIANGLES&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_STRIP&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_FAN)throw new l.ShapeDiverViewerDataProcessingError(`GeometryLoader.load: Unrecognized primitive mode ${t.mode}.`);{let n=i;if(t.mode!==o.PRIMITIVE_MODE.TRIANGLE_STRIP&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_FAN||this.convertToTriangleMode(n,t.mode),a){const i=new s.SkinnedMesh(n,r);t.threeJsObject[this._renderingEngine.id]=i,i.bind(a,i.matrixWorld),n.attributes.skinWeight.normalized&&i.normalizeSkinWeights(),e.add(i)}else{const i=new s.Mesh(n,r);t.threeJsObject[this._renderingEngine.id]=i,e.add(i)}}}e.traverse((e=>{e instanceof s.Mesh&&!0!==e.userData.transparencyPlaceholder&&(e.geometry.boundingBox=new s.Box3(new s.Vector3(t.boundingBox.min[0],t.boundingBox.min[1],t.boundingBox.min[2]),new s.Vector3(t.boundingBox.max[0],t.boundingBox.max[1],t.boundingBox.max[2])),e.geometry.boundingSphere=new s.Sphere(new s.Vector3(t.boundingBox.boundingSphere.center[0],t.boundingBox.boundingSphere.center[1],t.boundingBox.boundingSphere.center[2]),t.boundingBox.boundingSphere.radius),e.geometry.userData={SDid:t.id,SDversion:t.version,primitiveSDid:t.primitive.id,primitiveSDversion:t.primitive.version},e.renderOrder=t.renderOrder,e.morphTargetInfluences=t.morphWeights)})),this._primitiveCache[t.primitive.id+"_"+t.primitive.version]={threeGeometry:i,materialSettings:n,counter:1}}getAttributeName(e){switch(e){case"POSITION":return"position";case"NORMAL":return"normal";case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":case"UV":return"uv";case"TEXCOORD_1":return"uv2";case"COLOR_0":case"COLOR0":case"COLOR":return"color";case"WEIGHT":case"WEIGHTS_0":return"skinWeight";case"JOINT":case"JOINTS_0":return"skinIndex";case"TANGENT":return"tangent";default:this._logger.warn(`GeometryLoader.loadPrimitive: Unrecognized attribute id ${e}.`)}return""}loadAttribute(e,t){let i;if(e.byteStride&&e.byteStride!==e.itemBytes){const t=new s.InterleavedBuffer(e.array,e.byteStride/e.elementBytes);i=new s.InterleavedBufferAttribute(t,e.itemSize,e.byteOffset%e.byteStride/e.elementBytes,e.normalized)}else i=new s.BufferAttribute(e.array,e.itemSize,"COLOR_0"===t||"COLOR0"===t||"COLOR"===t||e.normalized);if(e.sparse){null!==e.array&&(i=new s.BufferAttribute(e.array.slice(),e.itemSize,e.normalized));for(let t=0,r=e.sparseIndices.length;t<r;t++){const r=e.sparseIndices[t];if(i.setX(r,e.sparseValues[t*e.itemSize]),e.itemSize>=2&&i.setY(r,e.sparseValues[t*e.itemSize+1]),e.itemSize>=3&&i.setZ(r,e.sparseValues[t*e.itemSize+2]),e.itemSize>=4&&i.setW(r,e.sparseValues[t*e.itemSize+3]),e.itemSize>=5)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.loadPrimitive: Unsupported itemSize in sparse BufferAttribute.")}}return i}}},8030:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorLoader=void 0;const r=i(887),n=i(2248);t.HTMLElementAnchorLoader=class{constructor(e){this._renderingEngine=e,this._htmlElements={},this._parentDiv=document.createElement("div"),this._parentDiv.style.userSelect="none",this._parentDiv.style.cursor="default",this._parentDiv.style.pointerEvents="none",this._parentDiv.style.overflow="hidden",this._parentDiv.style.position="absolute",this._parentDiv.style.width="100%",this._parentDiv.style.height="100%",this._parentDiv.style.left="0%",this._parentDiv.style.top="0%"}get parentDiv(){return this._parentDiv}adjustPositions(e,t){for(let i in this._htmlElements){const n=this._htmlElements[i].anchor,{page:a,container:s,client:o,hidden:l}=this._renderingEngine.sceneTracingManager.convert3Dto2D(r.vec3.clone(n.location)),c=n.createViewerHtmlElement(this._renderingEngine.id);if(!c)continue;let u=this._htmlElements[i].node,h=u.visible;for(;u.parent;)u=u.parent,h=u.visible&&h;!1===this._renderingEngine.show&&(h=!1),n.update({anchor:n,htmlElement:c,page:a,container:s,client:o,scale:r.vec2.fromValues(e,t),hidden:l,visible:h})}}init(){var e;null===(e=this._renderingEngine.canvas.parentNode)||void 0===e||e.appendChild(this._parentDiv)}load(e,t){const i=t.createViewerHtmlElement(this._renderingEngine.id);i&&(!1===this._renderingEngine.show&&(i.style.display="none"),this._parentDiv.appendChild(i),this._htmlElements[t.id+"_"+t.version]={node:e,anchor:t})}removeData(e,t){const i=this._htmlElements[e+"_"+t].anchor;i&&i.getViewerHtmlElement(this._renderingEngine.id)&&(this._parentDiv.removeChild(i.getViewerHtmlElement(this._renderingEngine.id)),delete this._htmlElements[e+"_"+t])}toggleBusyMode(e){if(e&&this._renderingEngine.busyModeDisplay===n.BUSY_MODE_DISPLAY.BLUR){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._parentDiv.style.filter="blur(3px)"}else this._parentDiv.style.filter=""}}},3467:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LightLoader=void 0;const s=a(i(5232)),o=i(3490),l=i(8877);t.LightLoader=class{constructor(e){this._renderingEngine=e,this._converter=l.Converter.instance,this._shadowMapCount=0,this._forceDisabledShadows=!1}init(){}load(e,t){let i=t.children[0]instanceof s.Light?t.children[0]:null;if(e instanceof o.AmbientLight){i||(i=new s.AmbientLight,e.threeJsObject[this._renderingEngine.id]=i,t.add(i));const r=i;r.color=this._renderingEngine.createThreeJsColor(e.color),r.intensity=e.intensity}if(e instanceof o.DirectionalLight){i||(i=new s.DirectionalLight,t.add(i),t.add(i.target),e.threeJsObject[this._renderingEngine.id]=i);const r=i;r.color=this._renderingEngine.createThreeJsColor(e.color),r.intensity=e.intensity,e.useNodeData&&(r.position.set(0,0,0),r.target.position.set(0,0,-1))}if(e instanceof o.HemisphereLight){i||(i=new s.HemisphereLight,t.add(i),e.threeJsObject[this._renderingEngine.id]=i);const r=i;r.color=this._renderingEngine.createThreeJsColor(e.color),r.intensity=e.intensity,r.groundColor=this._renderingEngine.createThreeJsColor(e.groundColor)}if(e instanceof o.PointLight){i||(i=new s.PointLight,t.add(i),e.threeJsObject[this._renderingEngine.id]=i);const r=i;r.color=this._renderingEngine.createThreeJsColor(e.color),r.intensity=e.intensity,r.distance=e.distance,r.decay=e.decay,r.position.set(e.position[0],e.position[1],e.position[2])}if(e instanceof o.SpotLight){i||(i=new s.SpotLight(this._renderingEngine.createThreeJsColor(e.color),e.intensity,e.distance,e.angle,e.penumbra,e.decay),t.add(i),t.add(i.target),e.threeJsObject[this._renderingEngine.id]=i);const r=i;r.color=this._renderingEngine.createThreeJsColor(e.color),r.intensity=e.intensity,r.distance=e.distance,r.angle=e.angle,r.penumbra=e.penumbra,r.decay=e.decay,r.position.set(e.position[0],e.position[1],e.position[2]),r.target.position.set(e.target[0],e.target[1],e.target[2])}}adjustToBoundingBox(e,t,i){let r=t.children[0];if(e instanceof o.DirectionalLight){const t=r,n=i.boundingSphere;t.position.set(n.center[0]+e.direction[0]*n.radius*2.35,n.center[1]+e.direction[1]*n.radius*2.35,n.center[2]+e.direction[2]*n.radius*2.35),t.target.position.set(n.center[0],n.center[1],n.center[2]),!0===e.castShadow&&!1===this.forceDisabledShadows?(t.castShadow=!0,t.shadow.camera.up.set(0,0,1),t.shadow.camera.far=8*n.radius,t.shadow.camera.right=1.5*n.radius,t.shadow.camera.left=-1.5*n.radius,t.shadow.camera.top=1.5*n.radius,t.shadow.camera.bottom=-1.5*n.radius,t.shadow.mapSize.width=e.shadowMapResolution,t.shadow.mapSize.height=e.shadowMapResolution,t.shadow.bias=e.shadowMapBias,t.shadow.camera.updateProjectionMatrix(),this._shadowMapCount++):t.castShadow=!1}}get shadowMapCount(){return this._shadowMapCount}set shadowMapCount(e){this._shadowMapCount=e}get forceDisabledShadows(){return this._forceDisabledShadows}set forceDisabledShadows(e){this._forceDisabledShadows=e}}},5897:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialLoader=t.MATERIAL_TYPE=void 0;const s=a(i(5232)),o=i(7038),l=i(887),c=i(7863),u=i(1560),h=i(8877),d=i(6152),f=i(6064),p=i(514);var m;!function(e){e.POINT="point",e.LINE="line",e.MESH="mesh"}(m=t.MATERIAL_TYPE||(t.MATERIAL_TYPE={})),t.MaterialLoader=class{constructor(e){this._renderingEngine=e,this._converter=h.Converter.instance,this._logger=h.Logger.instance,this._materialCache={},this._blending=0,this._envMap=null,this._envMapIntensity=1,this._height=1020,this._lightSizeUV=.025,this._pointSize=1,this._textureEncoding=s.sRGBEncoding,this._maxMapCount=0,this._envMapType=d.ENVIRONMENT_MAP_TYPE.NULL,this._environmentMapRotationMatrix=new s.Matrix4;let t=s.ShaderChunk.shadowmap_pars_fragment;if(t.includes("PCSS implementation")||(t=t.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP"+c.main),t=t.replace(t.substr(t.indexOf("#if defined( SHADOWMAP_TYPE_PCF )"),t.indexOf("#elif defined( SHADOWMAP_TYPE_PCF_SOFT )")-t.indexOf("#if defined( SHADOWMAP_TYPE_PCF )")),"#if defined( SHADOWMAP_TYPE_PCF )\n"+c.entry)),s.ShaderChunk.shadowmap_pars_fragment=t,s.ShaderLib.backgroundCube.uniforms.envMapRotation={value:this._environmentMapRotationMatrix},s.ShaderChunk.cube_uv_reflection_fragment.includes("uniform mat4 envMapRotation;")||(s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("#ifdef ENVMAP_TYPE_CUBE_UV","uniform mat4 envMapRotation;\n                #ifdef ENVMAP_TYPE_CUBE_UV")),s.ShaderChunk.envmap_fragment=s.ShaderChunk.envmap_fragment.replace("vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","\n            #ifdef ENVMAP_TYPE_LDR\n                vec4 adjustedEnvReflectVector = vec4( flipEnvMap * reflectVec.x, reflectVec.yz, 1.0 ) * envMapRotation;\n                vec4 envColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n            #else\n                vec4 adjustedEnvReflectVector = vec4( flipEnvMap * reflectVec.x, reflectVec.zy, 1.0 ) * envMapRotation;\n                vec4 envColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n            #endif\n            "),s.ShaderChunk.backgroundCube_frag=s.ShaderChunk.backgroundCube_frag.replace("vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );","\n            #ifdef ENVMAP_TYPE_LDR\n                vec4 adjustedEnvReflectVector = vec4( flipEnvMap * vWorldDirection.x, vWorldDirection.yz, 1.0 ) * envMapRotation;\n                vec4 texColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n            #else\n                vec4 adjustedEnvReflectVector = vec4( flipEnvMap * vWorldDirection.x, vWorldDirection.zy, 1.0 ) * envMapRotation;\n                vec4 texColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n            #endif"),s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );","\n            #ifdef ENVMAP_TYPE_LDR\n                vec4 adjustedEnvReflectVector = vec4(sampleDir, 1.0) * envMapRotation;\n                vec3 color0 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt );            \n            #else\n                vec4 adjustedEnvReflectVector = vec4(sampleDir.xzy, 1.0) * envMapRotation;\n                vec3 color0 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt );            \n            #endif"),s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );","\n            #ifdef ENVMAP_TYPE_LDR\n                vec4 adjustedEnvReflectVector = vec4(sampleDir, 1.0) * envMapRotation;\n                vec3 color1 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt + 1.0 );            \n            #else\n                vec4 adjustedEnvReflectVector = vec4(sampleDir.xzy, 1.0) * envMapRotation;\n                vec3 color1 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt + 1.0 );        \n            #endif"),!s.ShaderChunk.lights_fragment_maps.includes("vec3 reflectVec")){var i=s.ShaderChunk.lights_fragment_maps.lastIndexOf("#endif");s.ShaderChunk.lights_fragment_maps=s.ShaderChunk.lights_fragment_maps.substring(0,i)+"#else\n                #ifdef ENVMAP_TYPE_NONE\n                    vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n                    reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n                    vec4 adjustedEnvReflectVector = vec4(reflectVec, 1.0) * envMapRotation;\n                    radiance += (vec3((adjustedEnvReflectVector.z + 1.0) / 2.0) + 0.5) / 1.5;\n                #endif\n            #endif\n            "+s.ShaderChunk.lights_fragment_maps.substring(i+6)}}cacheSize(){return Object.entries(this._materialCache).length}assignEnvironmentMap(e,t){this._envMap=e,this._envMapType=t;for(let t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshPhysicalMaterial||this._materialCache[t].material instanceof s.MeshStandardMaterial||this._materialCache[t].material instanceof s.MeshBasicMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&(this._materialCache[t].materialData instanceof o.MaterialStandardData||this._materialCache[t].materialData instanceof o.MaterialGemData||this._materialCache[t].materialData instanceof o.MaterialSpecularGlossinessData||this._materialCache[t].materialData instanceof o.MaterialUnlitData)&&void 0!==this._materialCache[t].materialData.envMap)continue;if(this._materialCache[t].materialData instanceof o.MaterialUnlitData&&!1===this._renderingEngine.environmentMapForUnlitMaterials)return;i.envMap=e,i.needsUpdate=!0;for(let e in i.defines)e.startsWith("ENVMAP_TYPE_")&&delete i.defines[e];i.defines&&(i.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="")}}assignEnvironmentMapIntensity(e){this._envMapIntensity=e;for(let t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshPhysicalMaterial||this._materialCache[t].material instanceof s.MeshStandardMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&(this._materialCache[t].materialData instanceof o.MaterialStandardData||this._materialCache[t].materialData instanceof o.MaterialGemData||this._materialCache[t].materialData instanceof o.MaterialSpecularGlossinessData||this._materialCache[t].materialData instanceof o.MaterialUnlitData)&&void 0!==this._materialCache[t].materialData.envMap)continue;i.envMapIntensity=e,i.needsUpdate=!0}}assignEnvironmentMapForUnlitMaterials(e){for(let t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshBasicMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&this._materialCache[t].materialData instanceof o.MaterialUnlitData&&void 0!==this._materialCache[t].materialData.envMap)continue;if(e){i.envMap=this._envMap,i.needsUpdate=!0;for(let e in i.defines)e.startsWith("ENVMAP_TYPE_")&&delete i.defines[e];i.defines&&(i.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="")}else i.envMap=null,i.needsUpdate=!0}}assignPointSize(e){const t=this._renderingEngine.renderer?this._renderingEngine.renderer.getSize(new s.Vector2).y:1080;if(t!==this._height||e*(this._height/1080)!==this._pointSize){this._height=t,this._pointSize=e*(this._height/1080);for(let e in this._materialCache)this._materialCache[e].material instanceof s.PointsMaterial&&(this._materialCache[e].material.size=this._pointSize,this._materialCache[e].material.needsUpdate=!0)}}assignTextureEncoding(){for(let e in this._materialCache)if(this._materialCache[e].material instanceof s.MeshPhysicalMaterial||this._materialCache[e].material instanceof s.MeshStandardMaterial){const t=this._materialCache[e].material;t.emissiveMap&&(t.emissiveMap.encoding=this._textureEncoding,t.emissiveMap.needsUpdate=!0),t.map&&(t.map.encoding=this._textureEncoding,t.map.needsUpdate=!0),t.needsUpdate=!0}}assignDefaultMaterialColor(){for(let e in this._materialCache){const{material:t,materialData:i,materialSettings:r}=this._materialCache[e];i||void 0!==r&&r.useVertexColors||(t.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor))}}assignColorCorrection(e){const t=(e,t)=>{if(e){if(e instanceof p.SDColor)return e.colorCorrection(t),e;{const i=this._renderingEngine.colorCache.find((t=>t.equals(e)));if(i)return i.colorCorrection(t),i;{const i=e.clone();!0===t?i.convertSRGBToLinear():i.convertLinearToSRGB();const r=this._renderingEngine.colorCache.find((e=>e.equals(i)));return r?(r.colorCorrection(t),r):e}}}};for(let i in this._materialCache){const r=this._materialCache[i].material;r.color=t(r.color,e),r.specular=t(r.specular,e),r.emissive=t(r.emissive,e),r.colorTransferBegin=t(r.colorTransferBegin,e),r.colorTransferEnd=t(r.colorTransferEnd,e),r.attenuationColor=t(r.attenuationColor,e),r.sheencolor=t(r.sheencolor,e),r.specularColor=t(r.specularColor,e),r.needsUpdate=!0}}emptyMaterialCache(){this._materialCache={}}removeFromMaterialCache(e){for(let t in this._materialCache)t.startsWith(e)&&delete this._materialCache[t]}init(){}getMaterialProperties(e,t,i){const r={};let n=0;if(!e)return r.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor),void 0!==i&&i.useVertexColors&&(r.color=this._renderingEngine.createThreeJsColor("#d3d3d3")),r.side=s.DoubleSide,t!==m.POINT&&t!==m.LINE&&(r.envMap=this._envMap,r.emissiveIntensity=this._envMapIntensity),{properties:r,mapCount:n};if(r.alphaTest=e.alphaCutoff,void 0!==e.opacity&&(r.opacity=e.opacity,r.transparent=r.opacity<1),e.alphaMode===o.MATERIAL_ALPHA.BLEND?(r.transparent=!0,r.depthWrite=!1):r.transparent||(r.transparent=!1),void 0!==e.color&&(r.color=this._renderingEngine.createThreeJsColor(e.color)),void 0===e.color&&void 0!==e.map&&void 0!==e.map.color&&(r.color=this._renderingEngine.createThreeJsColor(e.map.color)),void 0!==e.color||void 0===e.map||void 0!==e.map.color||void 0!==i&&i.useVertexColors||(r.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor)),void 0===i||!i.useVertexColors||e.color!==this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)&&e.color+"ff"!==this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)&&e.color!==this._renderingEngine.defaultMaterialColor&&e.color!==this._renderingEngine.defaultMaterialColor+"ff"&&void 0!==e.color||(r.color=this._renderingEngine.createThreeJsColor("#d3d3d3")),void 0!==e.side&&(r.side=e.side===o.MATERIAL_SIDE.BACK?s.BackSide:e.side===o.MATERIAL_SIDE.FRONT?s.FrontSide:s.DoubleSide),t===m.POINT)return r.size=this._pointSize,{properties:r,mapCount:n};if(t===m.LINE)return{properties:r,mapCount:n};if(e instanceof o.MaterialShadowData)return{properties:r,mapCount:n};const a=r;if(void 0!==e.alphaMap&&(a.alphaMap=this.createTexture(e.alphaMap),a.transparent=!0,a.depthWrite=!1,n++),void 0!==e.aoMap&&(a.aoMap=this.createTexture(e.aoMap),n++),void 0!==e.aoMapIntensity&&(a.aoMapIntensity=e.aoMapIntensity),void 0!==e.map&&(a.map=this.createTexture(e.map),a.map.encoding=this._textureEncoding,n++),e instanceof o.MaterialUnlitData)return{properties:a,mapCount:n};const l=a;if(void 0!==e.shading&&(l.flatShading="smooth"!==e.shading),void 0!==e.bumpMap&&(l.bumpMap=this.createTexture(e.bumpMap),n++),l.bumpScale=e.bumpScale,void 0!==e.emissiveness&&(l.emissive=this._renderingEngine.createThreeJsColor(e.emissiveness)),void 0!==e.emissiveMap&&(l.emissiveMap=this.createTexture(e.emissiveMap),l.emissiveMap.encoding=this._textureEncoding,n++),l.envMap=this._envMap,l.emissiveIntensity=this._envMapIntensity,void 0!==e.normalMap&&(l.normalMap=this.createTexture(e.normalMap),n++),void 0!==e.normalScale&&(l.normalScale=new s.Vector2(e.normalScale,-e.normalScale)),e instanceof o.MaterialSpecularGlossinessData){const t=l;return t.specular=this._renderingEngine.createThreeJsColor(e.specular),t.glossiness=e.glossiness,void 0!==e.specularGlossinessMap?(t.specularMap=this.createTexture(e.specularGlossinessMap),t.specularMap.encoding=s.sRGBEncoding,t.glossinessMap=t.specularMap,n++):(void 0!==e.specularMap&&(t.specularMap=this.createTexture(e.specularMap),t.specularMap.encoding=s.sRGBEncoding,n++),void 0!==e.glossinessMap&&(t.glossinessMap=this.createTexture(e.glossinessMap),n++)),{properties:t,mapCount:n}}if(e instanceof o.MaterialGemData){const t=l;return t.refractionIndex=e.refractionIndex,void 0!==e.impurityMap&&(t.impurityMap=this.createTexture(e.impurityMap),n++),t.impurityScale=e.impurityScale,void 0!==e.colorTransferBegin&&(t.colorTransferBegin=this._renderingEngine.createThreeJsColor(e.colorTransferBegin)),void 0!==e.colorTransferEnd&&(t.colorTransferEnd=this._renderingEngine.createThreeJsColor(e.colorTransferEnd)),t.center=new s.Vector3(e.center[0],e.center[1],e.center[2]),t.tracingDepth=e.tracingDepth,t.radius=e.radius,t.sphericalNormalMap=e.sphericalNormalMap,t.gamma=e.gamma,t.contrast=e.contrast,t.brightness=e.brightness,t.dispersion=e.dispersion,t.tracingOpacity=e.tracingOpacity,t.roughness=0,t.metalness=1,t.transparent=!0,t.opacity=1,t.side=s.FrontSide,{properties:t,mapCount:n}}if(e instanceof o.MaterialStandardData){const t=l;return t.clearcoat=e.clearcoat,void 0!==e.clearcoatMap&&(t.clearcoatMap=this.createTexture(e.clearcoatMap),n++),void 0!==e.clearcoatNormalMap&&(t.clearcoatNormalMap=this.createTexture(e.clearcoatNormalMap),n++),t.clearcoatRoughness=e.clearcoatRoughness,void 0!==e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap=this.createTexture(e.clearcoatRoughnessMap),n++),void 0!==e.displacementMap&&(t.displacementMap=this.createTexture(e.displacementMap),n++),t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias,t.ior=e.ior,t.transmission=e.transmission,void 0!==e.transmissionMap&&(t.transmissionMap=this.createTexture(e.transmissionMap),n++),t.thickness=e.thickness,void 0!==e.thicknessMap&&(t.thicknessMap=this.createTexture(e.thicknessMap),n++),t.attenuationDistance=e.attenuationDistance,t.attenuationColor=this._renderingEngine.createThreeJsColor(e.attenuationColor),t.sheen=e.sheen,t.sheenColor=this._renderingEngine.createThreeJsColor(e.sheenColor),t.sheenRoughness=e.sheenRoughness,void 0!==e.sheenColorMap&&(t.sheenColorMap=this.createTexture(e.sheenColorMap),n++),void 0!==e.sheenRoughnessMap&&(t.sheenRoughnessMap=this.createTexture(e.sheenRoughnessMap),n++),t.specularIntensity=e.specularIntensity,void 0!==e.specularIntensityMap&&(t.specularIntensityMap=this.createTexture(e.specularIntensityMap),n++),t.specularColor=this._renderingEngine.createThreeJsColor(e.specularColor),void 0!==e.specularColorMap&&(t.specularColorMap=this.createTexture(e.specularColorMap),n++),t.metalness=e.metalness,t.roughness=e.roughness,void 0!==e.metalnessRoughnessMap?(t.metalnessMap=this.createTexture(e.metalnessRoughnessMap),t.roughnessMap=t.metalnessMap,n++):(void 0!==e.metalnessMap&&(t.metalnessMap=this.createTexture(e.metalnessMap),n++),void 0!==e.roughnessMap&&(t.roughnessMap=this.createTexture(e.roughnessMap),n++)),{properties:t,mapCount:n}}throw new h.ShapeDiverViewerDataProcessingError("MaterialLoader.getMaterialProperties: No proper material properties were found.")}createMaterial(e,t,i,r){let n,{properties:a,mapCount:l}=this.getMaterialProperties(i,e,r);if(this.maxMapCount=Math.max(this.maxMapCount,l),e===m.POINT)n=new s.PointsMaterial(Object.assign(a,{size:this._pointSize}));else if(e===m.LINE)n=new s.LineBasicMaterial(a);else if(i instanceof o.MaterialUnlitData)n=new s.MeshBasicMaterial(a);else{n=i instanceof o.MaterialShadowData?new s.ShadowMaterial({opacity:a.opacity,color:a.color}):i instanceof o.MaterialSpecularGlossinessData?new u.SpecularGlossinessMaterial(a):i instanceof o.MaterialGemData?new f.GemMaterial(a):new s.MeshPhysicalMaterial(a);const e=n.onBeforeCompile;n.onBeforeCompile=(t,i)=>{e(t,i),t.uniforms.lightSizeUV={value:this._lightSizeUV},t.uniforms.blending={value:this._blending},t.uniforms.envMapRotation={value:this._environmentMapRotationMatrix},n.userData.shader=t},(n instanceof u.SpecularGlossinessMaterial||n instanceof s.MeshPhysicalMaterial)&&(n.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="",r&&r.useVertexTangents&&(n.normalScale.y*=-1),r&&r.useVertexTangents&&n instanceof s.MeshPhysicalMaterial&&(n.clearcoatNormalScale.y*=-1),r&&r.useFlatShading&&(n.flatShading=!0))}if(r&&r.useVertexColors&&(n.vertexColors=!0),(i instanceof o.MaterialStandardData||i instanceof o.MaterialGemData||i instanceof o.MaterialSpecularGlossinessData||i instanceof o.MaterialUnlitData)&&void 0!==i.envMap){const e=i.envMap;void 0!==e&&this._renderingEngine.environmentMapLoader.loadEnvMap(e).then((e=>{if(n instanceof s.MeshBasicMaterial&&!1===this._renderingEngine.environmentMapForUnlitMaterials)return;n.envMap=e.map;const t=n.envMap instanceof s.CubeTexture?d.ENVIRONMENT_MAP_TYPE.LDR:d.ENVIRONMENT_MAP_TYPE.HDR;for(let e in n.defines)e.startsWith("ENVMAP_TYPE_")&&delete n.defines[e];n.defines&&(n.defines["ENVMAP_TYPE_"+t.toUpperCase()]=""),n.needsUpdate=!0}))}return i&&(i.threeJsObject[this._renderingEngine.id]=n),n.needsUpdate=!0,n.userData={SDid:t.id,SDversion:t.version},n}load(e,t){let i,r=null;if(e instanceof o.GeometryData||(r=e),i=t&&0===t.mode?m.POINT:!t||1!==t.mode&&2!==t.mode&&3!==t.mode?m.MESH:m.LINE,!r){if(t&&0===t.mode){if(this._defaultPointsMaterial)return this._defaultPointsMaterial}else if(!t||1!==t.mode&&2!==t.mode&&3!==t.mode){if(this._defaultMaterial)return this._defaultMaterial}else if(this._defaultLineMaterial)return this._defaultLineMaterial;const n=this.createMaterial(i,e,r,t);return i===m.POINT?this._defaultPointsMaterial=n:i===m.LINE?this._defaultLineMaterial=n:this._defaultMaterial=n,this._materialCache[i+"_"+i]={material:n,materialData:r,materialSettings:t},n}if(this._materialCache[e.id+"_"+e.version+"_"+i])return this._materialCache[e.id+"_"+e.version+"_"+i].material;const n=this.createMaterial(i,e,r,t);return this._materialCache[e.id+"_"+e.version+"_"+i]?(this._materialCache[e.id+"_"+e.version+"_"+i].material.copy(n),this._materialCache[e.id+"_"+e.version+"_"+i].material):(this._materialCache[e.id+"_"+e.version+"_"+i]={material:n,materialData:r,materialSettings:t},n)}updateMaterials(){for(let e in this._materialCache)this._materialCache[e].material.needsUpdate=!0}updateEnvironmentMapRotation(e){this._environmentMapRotationMatrix=(new s.Matrix4).fromArray(l.mat4.fromQuat(l.mat4.create(),e)).transpose();for(let e in this._materialCache)this._materialCache[e].material.userData.shader&&(this._materialCache[e].material.userData.shader.uniforms.envMapRotation.value=this._environmentMapRotationMatrix);s.ShaderLib.backgroundCube.uniforms.envMapRotation={value:this._environmentMapRotationMatrix},this._renderingEngine.renderer.renderLists.get(this._renderingEngine.scene,0).opaque.forEach((e=>e.material.uniforms&&e.material.uniforms.envMapRotation&&(e.material.uniforms.envMapRotation={value:this._environmentMapRotationMatrix})))}updateSoftShadow(e,t){this._lightSizeUV=e,this._blending=t;for(let i in this._materialCache)this._materialCache[i].material.userData.shader&&(this._materialCache[i].material.userData.shader.uniforms.lightSizeUV.value=e,this._materialCache[i].material.userData.shader.uniforms.blending.value=t)}createTexture(e){const t=new s.Texture(e.image);return t.format=s.RGBAFormat,t.minFilter=(()=>{switch(e.minFilter){case o.TEXTURE_FILTERING.NEAREST:return s.NearestFilter;case o.TEXTURE_FILTERING.NEAREST_MIPMAP_NEAREST:return s.NearestMipMapNearestFilter;case o.TEXTURE_FILTERING.LINEAR_MIPMAP_NEAREST:return s.LinearMipMapNearestFilter;case o.TEXTURE_FILTERING.NEAREST_MIPMAP_LINEAR:return s.NearestMipMapLinearFilter;case o.TEXTURE_FILTERING.LINEAR:return s.LinearFilter;case o.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR:default:return s.LinearMipMapLinearFilter}})(),t.magFilter=(()=>{switch(e.magFilter){case o.TEXTURE_FILTERING.NEAREST:return s.NearestFilter;case o.TEXTURE_FILTERING.LINEAR:default:return s.LinearFilter}})(),t.wrapS=(()=>{switch(e.wrapS){case o.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return s.ClampToEdgeWrapping;case o.TEXTURE_WRAPPING.MIRRORED_REPEAT:return s.MirroredRepeatWrapping;case o.TEXTURE_WRAPPING.REPEAT:default:return s.RepeatWrapping}})(),t.wrapT=(()=>{switch(e.wrapT){case o.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return s.ClampToEdgeWrapping;case o.TEXTURE_WRAPPING.MIRRORED_REPEAT:return s.MirroredRepeatWrapping;case o.TEXTURE_WRAPPING.REPEAT:default:return s.RepeatWrapping}})(),t.center=new s.Vector2(e.center[0],e.center[1]),t.offset=new s.Vector2(e.offset[0],e.offset[1]),t.repeat=new s.Vector2(e.repeat[0],e.repeat[1]),t.rotation=e.rotation,t.flipY=e.flipY,t.needsUpdate=!0,t}get maxMapCount(){return this._maxMapCount}set maxMapCount(e){this._maxMapCount=e}get textureEncoding(){return this._textureEncoding}set textureEncoding(e){this._textureEncoding=e,this.assignTextureEncoding()}}},7076:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BeautyRenderingManager=void 0;const s=a(i(5232)),o=i(8877),l=i(9513),c=i(656),u=i(3860),h=i(7735),d=i(9526),f=i(90);t.BeautyRenderingManager=class{constructor(e){this._renderingEngine=e,this._systemInfo=o.SystemInfo.instance,this._beautyRenderingActive=!1,this._beautyRenderingDurationActive=0,this._beautyRenderingTimeout=null,this._lastTime=0,this._lightSizeUVEnd=.15,this._lightSizeUVStart=.025}get beautyRenderingActive(){return this._beautyRenderingActive}set beautyRenderingActive(e){this._beautyRenderingActive=e}get beautyRenderingDurationActive(){return this._beautyRenderingDurationActive}set beautyRenderingDurationActive(e){this._beautyRenderingDurationActive=e}get beautyRenderingTimeout(){return this._beautyRenderingTimeout}set beautyRenderingTimeout(e){this._beautyRenderingTimeout=e}activateBeautyRenderShaders(){this._renderingEngine.renderer.shadowMap.type=s.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials()}assignOutputEncoding(e){3001===e?this._effectComposer.passes.includes(this._gammaCorrectionPass)||this._effectComposer.addPass(this._gammaCorrectionPass):this._effectComposer.passes.includes(this._gammaCorrectionPass)&&this._effectComposer.removePass(this._gammaCorrectionPass)}deactivateBeautyRenderShaders(){this._beautyRenderingTimeout=null,this._beautyRenderingActive=!1,this._beautyRenderingDurationActive=0,this._renderingEngine.renderer.shadowMap.type=s.PCFSoftShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,.1),this._renderingEngine.materialLoader.updateMaterials()}init(){const e=new s.PerspectiveCamera;var t=this._renderingEngine.renderer.getSize(new s.Vector2);const i=new s.WebGLRenderTarget(t.width,t.height,{minFilter:s.LinearFilter,magFilter:s.LinearFilter,format:s.RGBAFormat,stencilBuffer:!1,type:s.FloatType});i.texture.name="EffectComposer.rt1",this._effectComposer=new l.EffectComposer(this._renderingEngine.renderer,i),this._renderPass=new c.RenderPass(this._renderingEngine.scene,e),this._ssaaPass=new u.SSAARenderPass(this._renderingEngine.scene,e,this._renderingEngine.renderer.getClearColor(new s.Color),this._renderingEngine.renderer.getClearAlpha()),this._ssaaPass.sampleLevel=2,this._effectComposer.addPass(this._ssaaPass),this._saoPass=new f.SAOPass(this._renderingEngine.scene,e,!0,!0);const r=this._saoPass.render.bind(this._saoPass);this._saoPass.render=(e,t,i,n,a)=>{const o=[];this._renderingEngine.scene.traverse((function(e){!0===e.visible&&(e instanceof s.Mesh&&e.material&&e.material instanceof s.MeshPhysicalMaterial&&e.material.transparent&&(o.push(e),e.visible=!1),(e instanceof s.Line||e instanceof s.LineLoop||e instanceof s.LineSegments)&&(o.push(e),e.visible=!1),!1===e.userData.ambientOcclusion&&(o.push(e),e.visible=!1))})),r(e,t,i,n,a);for(let e=0;e<o.length;e++)o[e].visible=!0},this._effectComposer.addPass(this._saoPass),this._saoPass.params.output=0,this._saoPass.params.saoBias=.5,this._saoPass.params.saoIntensity=.01*this._renderingEngine.ambientOcclusionIntensity,this._saoPass.params.saoScale=1,this._saoPass.params.saoKernelRadius=100,this._saoPass.params.saoMinResolution=0,this._saoPass.params.saoBlur=!0,this._saoPass.params.saoBlurRadius=8,this._saoPass.params.saoBlurStdDev=4,this._saoPass.params.saoBlurDepthCutoff=.001,this._gammaCorrectionPass=new h.ShaderPass(d.GammaCorrectionShader),this._effectComposer.addPass(this._gammaCorrectionPass),this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVEnd,1),this._renderingEngine.renderer.shadowMap.type=s.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials()}render(e,t,i,r){const n=this.setShaderProperties();if(this._renderingEngine.ambientOcclusion&&this._renderingEngine.ambientOcclusionIntensity>0&&!(this._systemInfo.isMacOS&&this._systemInfo.isChrome||this._systemInfo.isIOS||this._systemInfo.isMobile||this._systemInfo.isSafari)){this._ssaaPass.clearColor=this._renderingEngine.renderer.getClearColor(new s.Color),this._ssaaPass.clearAlpha=this._renderingEngine.renderer.getClearAlpha(),this._saoPass.params.saoIntensity=this._renderingEngine.ambientOcclusionIntensity;const a=.0025*this._saoPass.params.saoIntensity;this._saoPass.params.saoIntensity=n*a,this._renderPass.camera=t,this._saoPass.camera=t,this._ssaaPass.camera=t,this._gammaCorrectionPass.setSize(i,r),this._saoPass.setSize(i,r),this._ssaaPass.setSize(i,r),this._effectComposer.setSize(i,r),this._effectComposer.render(e),this._saoPass.params.saoIntensity=a}else this._renderingEngine.renderer.render(this._renderingEngine.scene,t)}startBeautyRenderCountdown(){this._beautyRenderingTimeout=setTimeout((()=>{this._beautyRenderingActive=!0,this._beautyRenderingDurationActive=0,this.activateBeautyRenderShaders()}),this._renderingEngine.beautyRenderDelay)}stopBeautyRenderCountdown(){this.beautyRenderingTimeout&&clearTimeout(this.beautyRenderingTimeout),this.deactivateBeautyRenderShaders()}setShaderProperties(){const e=Math.min(this._beautyRenderingDurationActive,this._renderingEngine.beautyRenderBlendingDuration)/this._renderingEngine.beautyRenderBlendingDuration;if(e<.25){const t=e/.25;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,t)}else{const t=(e-.25)/.75;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart+(this._lightSizeUVEnd-this._lightSizeUVStart)*t,1)}return e}}},7181:function(e,t,i){"use strict";var r,n,a=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraManager=void 0;const u=o(i(5232)),h=i(887),d=i(1990);t.CameraManager=class{constructor(e){this._renderingEngine=e,r.set(this,new u.PerspectiveCamera),n.set(this,{})}get camera(){return l(this,r,"f")}updateCamera(e,t){var i;return"perspective"===(null===(i=this._renderingEngine.cameraEngine.camera)||void 0===i?void 0:i.type)&&(this._renderingEngine.cameraEngine.camera.aspect=t),this._renderingEngine.cameraEngine.camera.update(e)}load(e,t){let i=l(this,n,"f")[e.id];if(e instanceof d.PerspectiveCamera){i?(e.threeJsObject[this._renderingEngine.id]=i,t&&!t.children.find((e=>e===i))&&t.add(i)):(i=new u.PerspectiveCamera,l(this,n,"f")[e.id]=i,e.threeJsObject[this._renderingEngine.id]=i,t&&t.add(i));const r=e,a=i;a.up.set(0,0,1),r.useNodeData&&(a.fov=r.fov,a.aspect=r.aspect,a.far=r.far,a.near=r.near,a.updateProjectionMatrix())}else{i?(e.threeJsObject[this._renderingEngine.id]=i,t&&!t.children.find((e=>e===i))&&t.add(i)):(i=new u.OrthographicCamera(0,0,0,0),l(this,n,"f")[e.id]=i,e.threeJsObject[this._renderingEngine.id]=i,t&&t.add(i));const r=e,a=i;a.up.set(r.up[0],r.up[1],r.up[2]),r.useNodeData&&(a.left=r.left,a.bottom=r.bottom,a.right=r.right,a.top=r.top,a.near=r.near,a.far=r.far,a.updateProjectionMatrix())}}adjustCamera(e){let t;const i=this._renderingEngine.cameraEngine.camera;if(i.useNodeData)t=i.node.threeJsObject[this._renderingEngine.id].children[0].children[0];else if(this._renderingEngine.cameraEngine.camera.type===d.CAMERA_TYPE.ORTHOGRAPHIC){const r=i;let n=r.threeJsObject[this._renderingEngine.id];n||this.load(r),n=r.threeJsObject[this._renderingEngine.id];const a=h.vec3.distance(r.position,r.target)/2;n.up.set(r.up[0],r.up[1],r.up[2]),n.left=r.left=-a*e,n.bottom=r.bottom=-a,n.right=r.right=a*e,n.top=r.top=a,n.near=r.near=.01,n.far=r.far=100*a,n.position.set(r.position[0],r.position[1],r.position[2]),n.lookAt(r.target[0],r.target[1],r.target[2]),n.updateProjectionMatrix(),t=n}else{const r=i;let n=r.threeJsObject[this._renderingEngine.id];n||this.load(r),n=r.threeJsObject[this._renderingEngine.id],n.up.set(0,0,1);const a=this._renderingEngine.cameraEngine.camera.fov,s=this._renderingEngine.sceneTreeManager.boundingBox.boundingSphere,o=s.radius>0?s.radius:2;n.fov=r.fov=a,n.aspect=r.aspect=e,n.far=r.far=a<10?100*a*100*o:100*o,n.near=r.near=a<10?100*a*.01*o:.01*o,n.position.set(r.position[0],r.position[1],r.position[2]),n.lookAt(r.target[0],r.target[1],r.target[2]),n.updateProjectionMatrix(),t=n}return c(this,r,t,"f"),t}init(){}},r=new WeakMap,n=new WeakMap},3689:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentGeometryManager=void 0;const s=a(i(5232)),o=i(7038),l=i(887),c=i(5174),u=i(8877),h=i(1786),d=i(9277);t.EnvironmentGeometryManager=class{constructor(e){this._renderingEngine=e,this._converter=u.Converter.instance,this._eventEngine=u.EventEngine.instance,this._groundPlaneColor="#d3d3d3ff",this._groundPlaneShadowColor="#d3d3d3ff",this._gridColor="#44444426",this._initialized=!1,this._eventEngine.addListener(u.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{this.updateEnvironmentGeometryPosition()}))}get gridColor(){return this._gridColor}set gridColor(e){this._gridColor=e,this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.material.needsUpdate=!0}get groundPlaneColor(){return this._groundPlaneColor}set groundPlaneColor(e){this._groundPlaneColor=e,this.assignGroundPlaneColor(e)}get groundPlaneShadowColor(){return this._groundPlaneShadowColor}set groundPlaneShadowColor(e){this._groundPlaneShadowColor=e,this.assignGroundPlaneShadowColor(e)}get grid(){return this._grid}get groundPlane(){return this._groundPlane}get groundPlaneShadow(){return this._groundPlaneShadow}assignGroundPlaneColor(e){this._groundPlane.material.opacity=this._converter.toAlpha(e),this._groundPlane.material.transparent=1!==this._groundPlane.material.opacity,this._groundPlane.material.depthWrite=!this._groundPlane.material.transparent,this._groundPlane.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlane.material.needsUpdate=!0}assignGroundPlaneShadowColor(e){this._groundPlaneShadow.material.opacity=this._converter.toAlpha(e),this._groundPlaneShadow.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlaneShadow.material.needsUpdate=!0}evaluateGridMeasurements(e){let t=.1,i=1;if(e>1){let r=Math.floor(e).toString(),n=Math.pow(10,r.length-1);i=Math.max(Math.ceil(e/n)*n,1),n/=10,t=i/n}else if(0!==e){let r=1-Math.floor(Math.log(e)/Math.log(10))-2,n=e.toFixed(r+1),a=parseInt(n.substr(n.length-1))+1,s="0.";for(let e=0;e<r;++e)s+="0";i=parseFloat(s+a),t=10*a}return{divisions:t,gridExtents:i}}changeSceneExtents(e){if(0===e.min[0]&&0===e.min[1]&&0===e.min[2]&&0===e.max[0]&&0===e.max[1]&&0===e.max[2]||e.isEmpty())return;this._initialized=!0;let t=l.vec3.distance(e.min,e.max);const{divisions:i,gridExtents:r}=this.evaluateGridMeasurements(t);this._gridObject.remove(this._grid),this._grid=new s.GridHelper(2*r,i),this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._groundPlane.geometry=new s.PlaneGeometry(2*r,2*r,2,2),this._groundPlaneShadow.geometry=new s.PlaneGeometry(2*r,2*r,2,2);let n=.005,a=e.boundingSphere;this._grid.position.set(a.center[0],a.center[1],e.min[2]-n),this._groundPlane.position.set(a.center[0],a.center[1],e.min[2]-n),this._groundPlaneShadow.position.set(a.center[0],a.center[1],e.min[2]-n)}init(){this._environmentGeometryObject=new d.SDObject("environmentGeometry",""),this._renderingEngine.sceneTreeManager.scene.add(this._environmentGeometryObject),this._gridObject=new h.SDData("grid",""),this._grid=new s.GridHelper,this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._gridObject.userData.ambientOcclusion=!1,this._environmentGeometryObject.add(this._gridObject),this._groundPlaneObject=new h.SDData("groundPlane","");let e=new o.MaterialStandardData;e.color=this._groundPlaneColor,e.side=o.MATERIAL_SIDE.FRONT,e.opacity=this._converter.toAlpha(this._groundPlaneColor),e.roughness=1,e.metalness=0,this._groundPlane=new s.Mesh(new s.PlaneGeometry,this._renderingEngine.materialLoader.load(e)),this._groundPlane.receiveShadow=!0,this._groundPlane.visible=this._renderingEngine.groundPlaneVisibility,this._groundPlaneObject.add(this._groundPlane),this._groundPlaneObject.userData.ambientOcclusion=!1,this._environmentGeometryObject.add(this._groundPlaneObject),this._groundPlaneShadowObject=new h.SDData("groundPlaneShadow","");let t=new o.MaterialShadowData;t.color=this._groundPlaneShadowColor,t.opacity=this._converter.toAlpha(this._groundPlaneShadowColor),this._groundPlaneShadow=new s.Mesh(new s.PlaneGeometry,this._renderingEngine.materialLoader.load(t)),this._groundPlaneShadow.receiveShadow=!0,this._groundPlaneShadow.visible=this._renderingEngine.groundPlaneShadowVisibility,this._groundPlaneShadowObject.add(this._groundPlaneShadow),this._groundPlaneShadowObject.userData.ambientOcclusion=!1,this._environmentGeometryObject.add(this._groundPlaneShadowObject);let i=.005;this._grid.position.set(0,0,-i),this._groundPlane.position.set(0,0,-i),this._groundPlaneShadow.position.set(0,0,-i)}updateEnvironmentGeometryPosition(){const e=new c.Box(this._renderingEngine.sceneTreeManager.boundingBox.min,this._renderingEngine.sceneTreeManager.boundingBox.max);if(!(0===e.min[0]&&0===e.min[1]&&0===e.min[2]&&0===e.max[0]&&0===e.max[1]&&0===e.max[2]||e.isEmpty()))if(this._initialized){let t=.005,i=e.boundingSphere,r=l.vec3.distance(e.min,e.max);const{divisions:n,gridExtents:a}=this.evaluateGridMeasurements(r);this._groundPlaneShadow.geometry=new s.PlaneGeometry(2*a,2*a,2,2),this._grid&&this._grid.position.set(i.center[0],i.center[1],e.min[2]-t),this._groundPlane&&this._groundPlane.position.set(i.center[0],i.center[1],e.min[2]-t),this._groundPlaneShadow&&this._groundPlaneShadow.position.set(i.center[0],i.center[1],e.min[2]-t)}else this.changeSceneExtents(e)}}},9346:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingManager=void 0;const s=a(i(3466)),o=a(i(5232)),l=i(1990),c=i(8877),u=i(887),h=i(2248),d=i(3858),f=i(8715),p=i(3289);t.RenderingManager=class{constructor(e){this._renderingEngine=e,this._animationEngine=p.AnimationEngine.instance,this._animationFrameEngine=f.AnimationFrameEngine.instance,this._converter=c.Converter.instance,this._eventEngine=c.EventEngine.instance,this._logger=c.Logger.instance,this._stateEngine=c.StateEngine.instance,this._systemInfo=c.SystemInfo.instance,this._tree=d.Tree.instance,this._activeRendering=!0,this._cameraChanged=!1,this._continuousRendering=!1,this._continuousShadowMapUpdate=!1,this._height=0,this._lastCameraMatrix=u.mat4.create(),this._lastSize={adjustedWidth:0,adjustedHeight:0,width:0,height:0},this._maxTextureUnits=0,this._minimalRendering=!1,this._noWebGL=!1,this._runningAnimation=!1,this._sizeChanged=!1,this._usingSwiftShader=!1,this._width=0}get continuousRendering(){return this._continuousRendering}set continuousRendering(e){this._continuousRendering=e}get continuousShadowMapUpdate(){return this._continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._continuousShadowMapUpdate=e}get minimalRendering(){return this._minimalRendering}get usingSwiftShader(){return this._usingSwiftShader}addLogo(e,t){var i,r;const n=document.createElement("div");if(n.style.backgroundColor=t.backgroundColor,n.style.position="relative",n.style.height="100%",n.style.width="100%",null===(i=e.parentElement)||void 0===i||i.insertBefore(n,null===(r=e.parentElement)||void 0===r?void 0:r.firstChild),t.logo){const e=new Image;e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translateX(-50%) translateY(-50%)",e.src=t.logo,n.appendChild(e)}return n}addSpinner(e,t){var i,r;const n=document.createElement("div");if(n.style.position="absolute",n.style.userSelect="none",n.style.cursor="default",n.style.pointerEvents="none",t.spinnerPositioning===h.SPINNER_POSITIONING.BOTTOM_RIGHT?(n.style.right="10px",n.style.bottom="10px"):t.spinnerPositioning===h.SPINNER_POSITIONING.BOTTOM_LEFT?(n.style.left="10px",n.style.bottom="10px"):t.spinnerPositioning===h.SPINNER_POSITIONING.TOP_RIGHT?(n.style.right="10px",n.style.top="10px"):t.spinnerPositioning===h.SPINNER_POSITIONING.TOP_LEFT?(n.style.left="10px",n.style.top="10px"):(n.style.height="100%",n.style.width="100%"),n.style.visibility="hidden",null===(i=e.parentElement)||void 0===i||i.insertBefore(n,null===(r=e.parentElement)||void 0===r?void 0:r.firstChild),t.busyModeSpinner){const e=new Image;e.src=t.busyModeSpinner,t.spinnerPositioning===h.SPINNER_POSITIONING.CENTER?(e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.transform="translateX(-50%) translateY(-50%)"):(t.spinnerPositioning===h.SPINNER_POSITIONING.BOTTOM_RIGHT||t.spinnerPositioning===h.SPINNER_POSITIONING.TOP_RIGHT?e.style.float="right":t.spinnerPositioning!==h.SPINNER_POSITIONING.BOTTOM_LEFT&&t.spinnerPositioning!==h.SPINNER_POSITIONING.TOP_LEFT||(e.style.float="left"),e.style.width="calc(100% * 0.75)",e.style.height="calc(100% * 0.75)"),n.appendChild(e)}return n}createRenderer(e){const t={alpha:!0,depth:!0,antialias:!0,preserveDrawingBuffer:!0,stencil:!0,premultipliedAlpha:!0,canvas:e},i=new o.WebGLRenderer(t);i.setPixelRatio(window.devicePixelRatio);const r=i.getContext();if(i.extensions.has("WEBGL_debug_renderer_info")){const e=i.extensions.get("WEBGL_debug_renderer_info");r.getParameter(e.UNMASKED_VENDOR_WEBGL),"Google SwiftShader"===r.getParameter(e.UNMASKED_RENDERER_WEBGL)&&(this._usingSwiftShader=!0,this._logger.warn("RenderingLogic.createWebGLContext: The current device is using Google SwiftShader, a CPU-based renderer. To achieve better rendering results, please enable GPU-rendering in your settings."))}return i.extensions.has("EXT_shader_texture_lod")||(this._minimalRendering=!0),i.physicallyCorrectLights=!1,i.outputEncoding=o.sRGBEncoding,i.toneMapping=o.NoToneMapping,i.shadowMap.enabled=!0,i.shadowMap.needsUpdate=!0,i.shadowMap.type=o.PCFSoftShadowMap,i.shadowMap.autoUpdate=!1,i.localClippingEnabled=!0,i.setSize(e.width,e.height),i.setClearColor(new o.Color("#ffffff"),1),this._maxTextureUnits=i.getContext().getParameter(i.getContext().MAX_TEXTURE_IMAGE_UNITS),i}evaluateTextureUnitCount(e){e>this._maxTextureUnits?(this._logger.warn("RenderingManager.evaluateTextureUnitCount: Maximum number of texture units exceeded. Disabling shadows."),this._renderingEngine.lightLoader.forceDisabledShadows=!0,this._renderingEngine.update("RenderingManager.evaluateTextureUnitCount")):this._renderingEngine.lightLoader.forceDisabledShadows=!1}getScreenshot(e="image/png",t=1){return this._renderingEngine.renderer.domElement.toDataURL(e,t)}init(){try{this._eventEngine.addListener(c.EVENTTYPE.CAMERA.CAMERA_START,(e=>{e.viewportId===this._renderingEngine.id&&this.startRendering()})),this._eventEngine.addListener(c.EVENTTYPE.CAMERA.CAMERA_END,(e=>{e.viewportId===this._renderingEngine.id&&this.stopRendering()})),window.onresize=()=>{this.render()},this._renderingEngine.canvas.onresize=()=>{this.render()},this._renderingEngine.canvas.parentElement.onresize=()=>{this.render()};const e=new s.default;e.showPanel(0),e.dom.style.cssText="position:absolute;top:0px;left:0px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(e.dom);const t=new s.default;t.showPanel(1),t.dom.style.cssText="position:absolute;top:0px;left:80px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(t.dom);const i=new s.default;i.showPanel(2),i.dom.style.cssText="position:absolute;top:0px;left:160px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(i.dom),this._stats={stats:[e,t,i],begin:()=>{e.begin(),t.begin(),i.begin()},end:()=>{e.end(),t.end(),i.end()}}}catch(e){throw this._noWebGL=!0,e}}render(){this.startAndStopRendering()}resize(e,t){this._width=e,this._height=t}start(){this._animationFrameEngine.addAnimationFrameCallback(this.animate.bind(this)),this.startAndStopRendering()}updateShadowMap(){this._renderingEngine.renderer.shadowMap.needsUpdate=!0}animate(e,t,i){if(this._renderingEngine.closed||this._noWebGL)return;this._renderingEngine.evaluateFlagState(),this._tree.root.version!==this._renderingEngine.sceneTreeManager.lastRootVersion&&(this._renderingEngine.sceneTreeManager.updateSceneTree(this._tree.root,this._renderingEngine.lightEngine),this.updateShadowMap(),this._animationEngine.updateAnimationData(),this.render(),this._eventEngine.emitEvent(c.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this._renderingEngine.id})),i!==this._runningAnimation&&this.render(),this._runningAnimation=i,this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateNode(void 0,void 0,{transformationOnly:!0}),this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateMorphWeights();const{width:r,height:n,adjustedWidth:a,adjustedHeight:s}=this.calculateSize(),l=r/n;this._sizeChanged=this._lastSize.adjustedHeight!==s||this._lastSize.adjustedWidth!==a||this._lastSize.height!==n||this._lastSize.width!==r,this._lastSize={width:r,height:n,adjustedWidth:a,adjustedHeight:s},this._cameraChanged=!!this._renderingEngine.cameraEngine.camera&&this._renderingEngine.cameraManager.updateCamera(t,l);const u=this.evaluateRenderingState();if(!1===u.showScene)return this.toggleLogo(!0),void this.toggleBusyMode(!1);if(this.toggleLogo(!1),!1===u.rendering)return;this._stats.begin(),this.showStatistics(),this.toggleBusyMode(u.busyMode);const d=new o.Vector2;this._renderingEngine.renderer.getSize(d),d.equals(new o.Vector2(a,s))||(this._renderingEngine.renderer.setSize(a,s),this._renderingEngine.renderer.domElement.style.width=r+"px",this._renderingEngine.renderer.domElement.style.height=n+"px",this._renderingEngine.materialLoader.assignPointSize(this._renderingEngine.pointSize));const f=this._renderingEngine.cameraManager.adjustCamera(l);this._renderingEngine.htmlElementAnchorLoader.adjustPositions(a/r,s/n);const p=this._renderingEngine.renderer.shadowMap.enabled;this._renderingEngine.renderer.shadowMap.enabled=!this._renderingEngine.usingSwiftShader&&this._renderingEngine.type!==h.RENDERER_TYPE.ATTRIBUTES&&this._renderingEngine.shadows,p!==this._renderingEngine.renderer.shadowMap.enabled&&this._renderingEngine.materialLoader.updateMaterials();let m,g=!0;if(!1===this._renderingEngine.lights){const e=this._renderingEngine.lightEngine.lightScene;e&&(m=e.node.threeJsObject[this._renderingEngine.id],m&&(g=m.visible,m.visible=!1))}u.updateShadowMap&&this._renderingEngine.renderer.shadowMap.enabled&&(this._renderingEngine.renderer.shadowMap.needsUpdate=!0),this._renderingEngine.sceneTreeManager.scene.background=this._renderingEngine.environmentMapAsBackground?this._renderingEngine.environmentMapLoader.environmentMap:null,this._renderingEngine.renderer.setClearColor(new o.Color(this._converter.toThreeJsColorInput(this._renderingEngine.clearColor)),this._renderingEngine.clearAlpha),!0===u.beautyRendering?(this._renderingEngine.beautyRenderingManager.render(t,f,r,n),this._renderingEngine.beautyRenderingManager.beautyRenderingDurationActive>=this._renderingEngine.beautyRenderBlendingDuration?(this._eventEngine.emitEvent(c.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this._renderingEngine.beautyRenderingManager.deactivateBeautyRenderShaders(),this._activeRendering=!1):this._renderingEngine.beautyRenderingManager.beautyRenderingDurationActive+=t):(this._renderingEngine.renderer.render(this._renderingEngine.sceneTreeManager.scene,f),this._renderingEngine.beautyRenderingManager.beautyRenderingActive&&(this._eventEngine.emitEvent(c.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this._renderingEngine.beautyRenderingManager.deactivateBeautyRenderShaders(),this._activeRendering=!1)),m&&(m.visible=g),this._stats.end()}calculateSize(){let e=this._width,t=this._height;this._renderingEngine.automaticResizing&&(e=this._renderingEngine.canvas.parentNode.clientWidth,t=this._renderingEngine.canvas.parentNode.clientHeight);const i=e/t;let r=e,n=t;return(e>this._renderingEngine.maximumRenderingSize.width||t>this._renderingEngine.maximumRenderingSize.height)&&((e-this._renderingEngine.maximumRenderingSize.width)/i>t-this._renderingEngine.maximumRenderingSize.height?(r=this._renderingEngine.maximumRenderingSize.width,n=this._renderingEngine.maximumRenderingSize.width/i):(r=this._renderingEngine.maximumRenderingSize.height*i,n=this._renderingEngine.maximumRenderingSize.height)),{width:e,adjustedWidth:r,height:t,adjustedHeight:n}}evaluateRenderingState(){let e=!1;this._renderingEngine.cameraEngine.camera&&!0===this._renderingEngine.show&&(e=!0);let t=!1;!0!==this._activeRendering&&!0!==this._cameraChanged&&!0!==this._sizeChanged&&!0!==this._runningAnimation&&!0!==this._continuousRendering||(t=!0);let i=!1;if(!0!==this._runningAnimation&&!0!==this._continuousShadowMapUpdate||(i=!0),this._renderingEngine.cameraEngine.camera){const t=this._renderingEngine.cameraEngine.camera;if(t.type===l.CAMERA_TYPE.PERSPECTIVE){const r=t.controls;if(!0===r.enableAutoRotation&&0!==r.autoRotationSpeed)return{showScene:e,rendering:!0,updateShadowMap:i,busyMode:this._renderingEngine.busy,beautyRendering:!1}}}else t=!1;let r=!1;this._renderingEngine.busy&&(r=!0);let n=!1;return!0===this._renderingEngine.beautyRenderingManager.beautyRenderingActive&&!1===r&&!1===this._continuousRendering&&(this._renderingEngine.shadows||this._renderingEngine.ambientOcclusion&&this._renderingEngine.ambientOcclusionIntensity>0&&!this._systemInfo.isIOS)&&!1===this._renderingEngine.usingSwiftShader&&!1===this._runningAnimation&&this._renderingEngine.type!==h.RENDERER_TYPE.ATTRIBUTES&&(n=!0),{showScene:e,rendering:t,updateShadowMap:i,busyMode:r,beautyRendering:n}}showStatistics(){if(this._renderingEngine.showStatistics)for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="";else for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="none"}startAndStopRendering(){this._activeRendering=!0,this._renderingEngine.beautyRenderingManager.stopBeautyRenderCountdown(),this._renderingEngine.beautyRenderingManager.startBeautyRenderCountdown()}startRendering(){this._activeRendering=!0,this._renderingEngine.beautyRenderingManager.stopBeautyRenderCountdown()}stopRendering(){this._renderingEngine.beautyRenderingManager.startBeautyRenderCountdown()}toggleBusyMode(e){if(this._renderingEngine.branding.busyModeDisplay===h.BUSY_MODE_DISPLAY.BLUR)if(this._renderingEngine.htmlElementAnchorLoader.toggleBusyMode(e),e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._renderingEngine.renderer.domElement.style.filter="blur(3px)"}else this._renderingEngine.renderer.domElement.style.filter="";else this._renderingEngine.branding.busyModeDisplay===h.BUSY_MODE_DISPLAY.SPINNER&&(this._renderingEngine.spinnerDivElement.style.visibility=e?"visible":"hidden")}toggleLogo(e){this._renderingEngine.logoDivElement&&(this._renderingEngine.logoDivElement.style.display=e?"inherit":"none"),this._renderingEngine.canvas&&(this._renderingEngine.canvas.style.display=e?"none":"inherit")}}},2465:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTracingManager=void 0;const r=i(887),n=i(1990),a=i(8877),s=i(2850);t.SceneTracingManager=class{constructor(e){this._renderingEngine=e,this._intersectionManager=s.IntersectionEngine.instance}convert3Dto2D(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.canvas.width,n=this._renderingEngine.canvas.height,s=this._renderingEngine.cameraEngine.camera;if(!s)throw new a.ShapeDiverViewerGeneralError("SceneTracingManager.convert3Dto2D: No camera is defined for this viewer.");const o=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),e,s.position)),l=this._intersectionManager.intersect({origin:s.position,direction:o}),c=s.project(r.vec3.clone(e));return c[0]=c[0]*(i/2)+i/2,c[1]=-c[1]*(n/2)+n/2,c[0]=c[0]/devicePixelRatio,c[1]=c[1]/devicePixelRatio,{hidden:l.length>0&&l[0].distance+1e-4<r.vec3.distance(s.position,e),container:r.vec2.clone(c),client:r.vec2.fromValues(c[0]+t.left,c[1]+t.top),page:r.vec2.fromValues(c[0]+t.left+window.pageXOffset,c[1]+t.top+window.pageYOffset)}}init(){}mouseEventToRay(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.cameraEngine.camera;if(!i)throw new a.ShapeDiverViewerGeneralError("SceneTracingManager.mouseEventToRay: No camera is defined for this viewer.");let s=(e.clientX-t.left)/t.width*2-1,o=-(e.clientY-t.top)/t.height*2+1,l=r.vec3.clone(i.position);return i instanceof n.OrthographicCamera&&(i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.right,o*i.top,0)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.left,o*i.top,0)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(0,s*i.left,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(0,s*i.right,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.right,0,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.left,0,o*i.top)))),{origin:l,direction:r.vec3.normalize(r.vec3.create(),r.vec3.sub(r.vec3.create(),i.unproject(r.vec3.fromValues(s,o,.5)),l))}}touchEventToRay(e){if(e.touches.length>1)throw new a.ShapeDiverViewerGeneralError("SceneTracingManager.touchEventToRay: No touches in this event.");const t=e.changedTouches[0],i=this._renderingEngine.canvas.getBoundingClientRect(),s=this._renderingEngine.cameraEngine.camera;if(!s)throw new a.ShapeDiverViewerGeneralError("SceneTracingManager.touchEventToRay: No camera is defined for this viewer.");let o=(t.clientX-i.left)/i.width*2-1,l=-(t.clientY-i.top)/i.height*2+1,c=r.vec3.clone(s.position);return s instanceof n.OrthographicCamera&&(s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(o*s.right,l*s.top,0)):s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(o*s.left,l*s.top,0)):s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(0,o*s.left,l*s.top)):s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(0,o*s.right,l*s.top)):s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(o*s.right,0,l*s.top)):s.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(c=r.vec3.add(r.vec3.create(),s.position,r.vec3.fromValues(o*s.left,0,l*s.top)))),{origin:c,direction:r.vec3.normalize(r.vec3.create(),r.vec3.sub(r.vec3.create(),s.unproject(r.vec3.fromValues(o,l,.5)),c))}}touchToRay(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.cameraEngine.camera;if(!i)throw new a.ShapeDiverViewerGeneralError("SceneTracingManager.touchToRay: No camera is defined for this viewer.");let s=(e.clientX-t.left)/t.width*2-1,o=-(e.clientY-t.top)/t.height*2+1,l=r.vec3.clone(i.position);return i instanceof n.OrthographicCamera&&(i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.right,o*i.top,0)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.left,o*i.top,0)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(0,s*i.left,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(0,s*i.right,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.right,0,o*i.top)):i.direction==n.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(l=r.vec3.add(r.vec3.create(),i.position,r.vec3.fromValues(s*i.left,0,o*i.top)))),{origin:l,direction:r.vec3.normalize(r.vec3.create(),r.vec3.sub(r.vec3.create(),i.unproject(r.vec3.fromValues(s,o,.5)),l))}}}},4323:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeManager=void 0;const s=a(i(5232)),o=i(7038),l=i(3858),c=i(5174),u=i(8877),h=i(3490),d=i(887),f=i(2248),p=i(6336),m=i(1990),g=i(1786),b=i(9277),v=i(1422);t.SceneTreeManager=class{constructor(e){this._renderingEngine=e,this._converter=u.Converter.instance,this._eventEngine=u.EventEngine.instance,this._inputValidator=u.InputValidator.instance,this._logger=u.Logger.instance,this._scene=new s.Scene,this._stateEngine=u.StateEngine.instance,this._tree=l.Tree.instance,this._boundingBox=new c.Box,this._boundingBoxSensitiveData=[],this._lastRendererType=f.RENDERER_TYPE.STANDARD,this._lastRootVersion="",this._scene.background=new s.Color("#ffffff")}get boundingBox(){return this._boundingBox}get lastRendererType(){return this._lastRendererType}get lastRootVersion(){return this._lastRootVersion}get scene(){return this._scene}init(){}isEmpty(){return 0===this._boundingBox.min[0]&&0===this._boundingBox.min[1]&&0===this._boundingBox.min[2]&&0===this._boundingBox.max[0]&&0===this._boundingBox.max[1]&&0===this._boundingBox.max[2]||this._boundingBox.isEmpty()}updateData(e,t,i,r,n){let a=t.children.find((e=>e.SDid===i.id&&e.SDversion===i.version)),l=!1;switch(a||(l=!0,a=new g.SDData(i.id,i.version),t.add(a)),this._renderingEngine.type===f.RENDERER_TYPE.ATTRIBUTES&&this.injectAttributeData(e,i),!0){case i instanceof o.GeometryData:a.SDtype=g.SD_DATA_TYPE.GEOMETRY,!1===r.transformationOnly&&this._renderingEngine.geometryLoader.load(i,a,l,n);const t=i.primitive.computeBoundingBox(e.worldMatrix);e.boundingBox.union(t),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new c.Box),e.boundingBoxViewport[this._renderingEngine.id].union(t);break;case i instanceof p.ThreejsData:a.SDtype=g.SD_DATA_TYPE.THREEJS,a.add(i.obj);const u=(new s.Box3).setFromObject(i.obj);e.boundingBox.union(new c.Box(d.vec3.fromValues(...u.min.toArray()),d.vec3.fromValues(...u.max.toArray()))),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new c.Box),e.boundingBoxViewport[this._renderingEngine.id].union(new c.Box(d.vec3.fromValues(...u.min.toArray()),d.vec3.fromValues(...u.max.toArray())));break;case i instanceof o.AbstractMaterialData:a.SDtype=g.SD_DATA_TYPE.MATERIAL;break;case i instanceof h.AbstractLight:a.SDtype=g.SD_DATA_TYPE.LIGHT,!1===r.transformationOnly&&this._renderingEngine.lightLoader.load(i,a),i instanceof h.DirectionalLight&&!1===i.useNodeData&&this._boundingBoxSensitiveData.push({data:i,dataChild:a});break;case i instanceof m.AbstractCamera:a.SDtype=g.SD_DATA_TYPE.CAMERA,!1===r.transformationOnly&&this._renderingEngine.cameraManager.load(i,a);break;case i instanceof o.HTMLElementAnchorData:a.SDtype=g.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR,!1===r.transformationOnly&&this._renderingEngine.htmlElementAnchorLoader.load(e,i);break;case i instanceof o.AnimationData:a.SDtype=g.SD_DATA_TYPE.ANIMATION}}updateMorphWeights(e=this._tree.root,t=this._mainNode){if(e&&t){for(let i=0,r=e.data.length;i<r;i++)if(e.data[i]instanceof o.GeometryData){const r=e.data[i];let n=t.children.find((e=>e.SDid===r.id&&e.SDversion===r.version));n&&n.traverse((e=>{(e instanceof s.Points||e instanceof s.LineSegments||e instanceof s.LineLoop||e instanceof s.Line||e instanceof s.Mesh)&&(e.morphTargetInfluences=r.morphWeights)}))}for(let i=0,r=e.children.length;i<r;i++){const r=e.children[i];if(!r)continue;const n=t.children.find((e=>e.SDid===r.id));n&&this.updateMorphWeights(r,n)}}}updateNode(e=this._tree.root,t=this._mainNode,i={transformationOnly:!1},r){const n=t;if(e.boundingBox.reset(),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new c.Box),e.boundingBoxViewport[this._renderingEngine.id].reset(),!1===i.transformationOnly){const t=e.data.map((e=>e.id));n.children.filter((i=>i instanceof g.SDData&&!(t.includes(i.SDid)&&e.data.find((e=>e.id===i.SDid)).version===i.SDversion))).forEach((e=>{this.removeData(e),n.remove(e)}));const i=e.children.filter((e=>!e.excludeViewports.includes(this._renderingEngine.id))).map((e=>e.id));n.children.filter((e=>e instanceof b.SDObject&&!(e instanceof g.SDData)&&!i.includes(e.SDid))).forEach((e=>{e.children.forEach((e=>{e instanceof g.SDData&&this.removeData(e)})),n.remove(e)}))}if(!0===e.skinNode){const t=[];for(let i=0;i<e.bones.length;i++)t.push(this.getBone(e.bones[i]));const i=[];for(let t=0;t<e.boneInverses.length;t++)i.push((new s.Matrix4).fromArray(e.boneInverses[t]));r=new s.Skeleton(t,i)}for(let t=0,a=e.data.length;t<a;t++)this.updateData(e,n,e.data[t],i,r);for(let t=0,a=e.children.length;t<a;t++){const a=e.children[t],s=n.children.find((e=>e.SDid===a.id));if(s)s.SDversion!==a.version?(this.updateNode(a,s,i,r),s.SDversion=a.version):this.updateNode(a,s,i,r);else{const t=e.data.find((e=>e instanceof o.BoneData))?new v.SDBone(a.id,a.version):new b.SDObject(a.id,a.version),s=a.threeJsObject[this._renderingEngine.id];a.threeJsObject[this._renderingEngine.id]=t,a.updateCallbackThreeJsObject&&a.updateCallbackThreeJsObject(t,s,this._renderingEngine.id),n.add(t),this.updateNode(a,t,i,r)}a.boundingBox.isEmpty()||e.boundingBox.union(a.boundingBox),a.boundingBoxViewport[this._renderingEngine.id]&&!a.boundingBoxViewport[this._renderingEngine.id].isEmpty()&&(!e.visible||e.excludeViewports.includes(this._renderingEngine.id)||e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)||e.boundingBoxViewport[this._renderingEngine.id].union(a.boundingBoxViewport[this._renderingEngine.id]))}n.visible=e.visible&&!e.excludeViewports.includes(this._renderingEngine.id)&&!(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)),n.applyTransformation(e.nodeMatrix)}updateSceneTree(e,t){if(this._tree.root.version===this._lastRootVersion&&this._renderingEngine.type===f.RENDERER_TYPE.STANDARD)return;if(this._lastRootVersion=this._tree.root.version,this._lastRendererType=this._renderingEngine.type,this._renderingEngine.closed)return;const i=this._boundingBox.clone();if(this._boundingBox=new c.Box,this._renderingEngine.lightLoader.shadowMapCount=0,!this._mainNode){this._mainNode=new b.SDObject(e.id,e.version);const t=e.threeJsObject[this._renderingEngine.id];e.threeJsObject[this._renderingEngine.id]=this._mainNode,e.updateCallbackThreeJsObject&&e.updateCallbackThreeJsObject(this._mainNode,t,this._renderingEngine.id),this._scene.add(this._mainNode)}this._boundingBoxSensitiveData=[],this._currentSDTFOverview=this.createSDTFOverview(),this.updateNode(e,this._mainNode),this._boundingBox=e.boundingBoxViewport[this._renderingEngine.id].clone();for(let e=0;e<this._boundingBoxSensitiveData.length;e++)this._renderingEngine.lightLoader.adjustToBoundingBox(this._boundingBoxSensitiveData[e].data,this._boundingBoxSensitiveData[e].dataChild,this._boundingBox);this._boundingBox.min[0]===i.min[0]&&this._boundingBox.min[1]===i.min[1]&&this._boundingBox.min[2]===i.min[2]&&this._boundingBox.max[0]===i.max[0]&&this._boundingBox.max[1]===i.max[1]&&this._boundingBox.max[2]===i.max[2]||(this._stateEngine.renderingEngines[this._renderingEngine.id].boundingBoxCreated.resolved||this._boundingBox.isEmpty()||this._stateEngine.renderingEngines[this._renderingEngine.id].boundingBoxCreated.resolve(!0),this._eventEngine.emitEvent(u.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,{viewportId:this._renderingEngine.id,boundingBox:{min:d.vec3.clone(this._boundingBox.min),max:d.vec3.clone(this._boundingBox.max)}})),this._renderingEngine.renderingManager.evaluateTextureUnitCount(this._renderingEngine.lightLoader.shadowMapCount+this._renderingEngine.materialLoader.maxMapCount)}collectSDTFItemData(e){for(let t=0,i=e.data.length;t<i;t++)if(e.data[t]instanceof o.SDTFItemData)return e.data[t];if(e.parent)return this.collectSDTFItemData(e.parent)}createSDTFOverview(e=this._tree.root){const t=new o.SDTFOverviewData({});for(let i=0,r=e.data.length;i<r;i++)e.data[i]instanceof o.SDTFOverviewData&&t.merge(e.data[i]);for(let i=0,r=e.children.length;i<r;i++)t.merge(new o.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return t.overview}getBone(e){let t;return this._mainNode.traverse((i=>{i.SDid===e.id&&(t=i)})),t}injectAttributeData(e,t){const i=this.collectSDTFItemData(e);let r={material:new o.MaterialStandardData({color:this._renderingEngine.defaultMaterialColor,opacity:1}),matrix:d.mat4.create()};if(this._renderingEngine.visualizeAttributes){const e=this._renderingEngine.visualizeAttributes(this._currentSDTFOverview,i);this._inputValidator.validateAndError("Viewer.visualizeAttributes",e,"object",!0),this._inputValidator.validateAndError("Viewer.visualizeAttributes",e.matrix,"mat4",!0),r.material=e.material,r.matrix=r.matrix}e.addTransformation({id:"sdtf",matrix:r.matrix}),t instanceof o.GeometryData&&(t.attributeMaterial=r.material)}removeData(e){switch(!0){case e.SDtype===g.SD_DATA_TYPE.GEOMETRY:e.traverse((e=>{if(e instanceof s.Mesh){this._renderingEngine.geometryLoader.removeFromGeometryCache(e.geometry.userData.SDid+"_"+e.geometry.userData.SDversion),this._renderingEngine.geometryLoader.removeFromPrimitiveCache(e.geometry.userData.primitiveSDid+"_"+e.geometry.userData.primitiveSDversion),this._renderingEngine.materialLoader.removeFromMaterialCache(e.material.userData.SDid+"_"+e.material.userData.SDversion);for(const t in e.geometry.attributes)e.geometry.deleteAttribute(t);e.geometry.setIndex(null),e.geometry.dispose();for(let t in e.material)e.material[t]instanceof s.Texture&&"envMap"!==t&&e.material[t].dispose();e.material.dispose()}}));break;case e.SDtype===g.SD_DATA_TYPE.THREEJS:case e.SDtype===g.SD_DATA_TYPE.MATERIAL:break;case e.SDtype===g.SD_DATA_TYPE.LIGHT:e.traverse((e=>{e instanceof s.Light&&e.dispose()}));break;case e.SDtype===g.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR:this._renderingEngine.htmlElementAnchorLoader.removeData(e.SDid,e.SDversion);case e.SDtype===g.SD_DATA_TYPE.ANIMATION:}}}},6064:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GemMaterial=void 0;const s=a(i(5232)),o=i(5232),l=i(4988);class c extends o.MeshPhysicalMaterial{constructor(e){super(),this.refractionIndex=2.4,this.impurityMap=null,this.impurityScale=1,this.colorTransferBegin=new s.Color(16777215),this.colorTransferEnd=new s.Color(16777215),this.center=new s.Vector3(0,0,0),this.tracingDepth=5,this.radius=1,this.sphericalNormalMap=null,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingOpacity=0,this.isGemMaterial=!0;const t={refractionIndex:{value:2.4},impurityMap:{value:null},impurityScale:{value:1},colorTransferBegin:{value:new s.Color(16777215)},colorTransferEnd:{value:new s.Color(16777215)},center:{value:new s.Vector3(0,0,0)},tracingDepth:{value:5},radius:{value:1},sphericalNormalMap:{value:null},gamma:{value:1},contrast:{value:1},brightness:{value:0},dispersion:{value:0},tracingOpacity:{value:0}};this._extraUniforms=t,this.onBeforeCompile=function(e){for(const i in t)e.uniforms[i]=t[i];e.vertexShader=l.vert,e.fragmentShader=l.frag},Object.defineProperties(this,{tracingDepth:{get:function(){return t.tracingDepth.value},set:function(e){t.tracingDepth.value=e,e?this.defines.TRACING_DEPTH=Math.floor(e):delete this.defines.TRACING_DEPTH}},refractionIndex:{get:function(){return t.refractionIndex.value},set:function(e){t.refractionIndex.value=e}},impurityMap:{get:function(){return t.impurityMap.value},set:function(e){t.impurityMap.value=e,e?(this.defines.USE_IMPURITYMAP="",this.defines.USE_UV=""):(delete this.defines.USE_IMPURITYMAP,delete this.defines.USE_UV)}},impurityScale:{get:function(){return t.impurityScale.value},set:function(e){t.impurityScale.value=e}},colorTransferBegin:{get:function(){return t.colorTransferBegin.value},set:function(e){t.colorTransferBegin.value=e}},colorTransferEnd:{get:function(){return t.colorTransferEnd.value},set:function(e){t.colorTransferEnd.value=e}},center:{get:function(){return t.center.value},set:function(e){t.center.value=e}},radius:{get:function(){return t.radius.value},set:function(e){t.radius.value=e}},sphericalNormalMap:{get:function(){return t.sphericalNormalMap.value},set:function(e){t.sphericalNormalMap.value=e,e?this.defines.USE_UV="":delete this.defines.USE_UV}},gamma:{get:function(){return t.gamma.value},set:function(e){t.gamma.value=e}},contrast:{get:function(){return t.contrast.value},set:function(e){t.contrast.value=e}},brightness:{get:function(){return t.brightness.value},set:function(e){t.brightness.value=e}},dispersion:{get:function(){return t.dispersion.value},set:function(e){t.dispersion.value=e,0!==e?this.defines.DISPERSION="":delete this.defines.DISPERSION}},tracingOpacity:{get:function(){return t.tracingOpacity.value},set:function(e){t.tracingOpacity.value=e}}}),this.refractionIndex=e.refractionIndex||2.4,this.impurityMap=e.impurityMap||null,this.impurityScale=e.impurityScale||1,this.colorTransferBegin.copy(e.colorTransferBegin||new s.Color(16777215)),this.colorTransferEnd.copy(e.colorTransferEnd||new s.Color(16777215)),this.center.copy(e.center||new s.Vector3(0,0,0)),this.tracingDepth=e.tracingDepth||5,this.radius=e.radius||1,this.sphericalNormalMap=e.sphericalNormalMap||null,this.gamma=e.gamma||1,this.contrast=e.contrast||1,this.brightness=e.brightness||0,this.dispersion=e.dispersion||0,this.tracingOpacity=e.tracingOpacity||0,this.setValues(e)}copy(e){return super.copy(e),this.refractionIndex=e.refractionIndex,this.impurityMap=e.impurityMap,this.impurityScale=e.impurityScale,this.colorTransferBegin.copy(e.colorTransferBegin),this.colorTransferEnd.copy(e.colorTransferEnd),this.center.copy(e.center),this.tracingDepth=e.tracingDepth,this.radius=e.radius,this.sphericalNormalMap=e.sphericalNormalMap,this.gamma=e.gamma,this.contrast=e.contrast,this.brightness=e.brightness,this.dispersion=e.dispersion,this.tracingOpacity=e.tracingOpacity,this}}t.GemMaterial=c},1560:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SpecularGlossinessMaterial=void 0;const s=a(i(5232)),o=i(5232);class l extends o.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),n=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new s.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(e){for(const t in o)e.uniforms[t]=o[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",n).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(e){o.specular.value=e}},specularMap:{get:function(){return o.specularMap.value},set:function(e){o.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(e){o.glossiness.value=e}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(e){o.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}t.SpecularGlossinessMaterial=l},1422:function(e,t,i){"use strict";var r,n,a=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDBone=void 0;const u=o(i(5232)),h=i(5232);class d extends h.Bone{constructor(e,t){super(),r.set(this,void 0),n.set(this,void 0),l(this,r,e,"f"),l(this,n,t,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4((new u.Matrix4).fromArray(e))}get SDid(){return c(this,r,"f")}set SDid(e){l(this,r,e,"f")}get SDversion(){return c(this,n,"f")}set SDversion(e){l(this,n,e,"f")}}t.SDBone=d,r=new WeakMap,n=new WeakMap},514:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDColor=void 0;const r=i(5232);class n extends r.Color{constructor(e,t){super(e),this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear","number"==typeof t||Array.isArray(t)&&(3==t.length||4==t.length)?(this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear"):(this._colorSpace="srgb",this._originalColorSpace="srgb")}colorCorrection(e){"srgb"===this._colorSpace&&!0===e?(this.convertSRGBToLinear(),this._colorSpace="srgb-linear"):"srgb-linear"===this._colorSpace&&!1===e&&"srgb-linear"!==this._originalColorSpace&&(this.convertLinearToSRGB(),this._colorSpace="srgb")}}t.SDColor=n},1786:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.SDData=t.SD_DATA_TYPE=void 0;const s=i(9277);var o;!function(e){e.GEOMETRY="geometry",e.MATERIAL="material",e.THREEJS="threejs",e.LIGHT="light",e.CAMERA="camera",e.ANIMATION="animation",e.INTERACTION="interaction",e.HTML_ELEMENT_ANCHOR="html_element_anchor",e.CUSTOM="custom"}(o=t.SD_DATA_TYPE||(t.SD_DATA_TYPE={}));class l extends s.SDObject{constructor(e,t){super(e,t),r.set(this,o.CUSTOM)}get SDtype(){return n(this,r,"f")}set SDtype(e){a(this,r,e,"f")}}t.SDData=l,r=new WeakMap},9277:function(e,t,i){"use strict";var r,n,a=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDObject=void 0;const u=o(i(5232)),h=i(5232);class d extends h.Object3D{constructor(e,t){super(),r.set(this,void 0),n.set(this,void 0),l(this,r,e,"f"),l(this,n,t,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4((new u.Matrix4).fromArray(e))}get SDid(){return c(this,r,"f")}set SDid(e){l(this,r,e,"f")}get SDversion(){return c(this,n,"f")}set SDversion(e){l(this,n,e,"f")}cloneObject(){const e=this.clone();return e.SDid=this.SDid,e.SDversion=this.SDversion,e}}t.SDObject=d,r=new WeakMap,n=new WeakMap},7863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entry=t.main=void 0,t.main="\n\nuniform float lightSizeUV;\nuniform float blending;\n\n#ifdef SHADOWMAP_TYPE_PCF\n\n#define NEAR_PLANE 0.1\n#define NUM_SAMPLES 20\n#define NUM_RINGS 11\n\nvec2 poissonDisk[NUM_SAMPLES];\n\nvoid initPoissonSamples( const in vec2 randomSeed ) {\n    float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\n    float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\n\n    // jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n    float angle = rand(randomSeed) * PI2;\n    float radius = INV_NUM_SAMPLES;\n    float radiusStep = radius;\n\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\n        radius += radiusStep;\n        angle += ANGLE_STEP;\n    }\n}\n\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n    return (zReceiver - zBlocker) / zBlocker;\n}\n\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver ) {\n    // This uses similar triangles to compute what\n    // area of the shadow map we should search\n    float searchRadius = lightSizeUV * (zReceiver - NEAR_PLANE) / zReceiver;\n    float blockerDepthSum = 0.0;\n    int numBlockers = 0;\n\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\n        if (shadowMapDepth < zReceiver) {\n            blockerDepthSum += shadowMapDepth;\n            numBlockers++;\n        }\n    }\n\n    if (numBlockers == 0) return -1.0;\n\n    return blockerDepthSum / float(numBlockers);\n}\n\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\n    float sum = 0.0;\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * filterRadius));\n        if (zReceiver <= depth) sum += 1.0;\n    }\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[i].yx * filterRadius));\n        if (zReceiver <= depth) sum += 1.0;\n    }\n    return sum / (2.0 * float(NUM_SAMPLES));\n}\n\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\n    vec2 uv = coords.xy;\n    float zReceiver = coords.z; // Assumed to be eye-space z in this code\n\n    initPoissonSamples(uv);\n    // STEP 1: blocker search\n    float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\n\n    //There are no occluders so early out (this saves filtering)\n    if (avgBlockerDepth == -1.0) return 1.0;\n\n    // STEP 2: penumbra size\n    float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n    float filterRadius = penumbraRatio * lightSizeUV * NEAR_PLANE / zReceiver;\n\n    // STEP 3: filtering\n    //return avgBlockerDepth;\n    return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\n}\n#endif\n",t.entry="\n// PCSS implementation\nvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\nfloat dx = texelSize.x;\nfloat dy = texelSize.y;\nvec2 uv = shadowCoord.xy;\nvec2 f = fract( uv * shadowMapSize + 0.5 );\nuv -= f * texelSize;\nfloat shadow1 = (\n    texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n         f.x ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n         f.x ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n         f.y ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n         f.y ) +\n    mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n              f.x ),\n         mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n              f.x ),\n         f.y )\n) * ( 1.0 / 9.0 );\nfloat shadow2 = PCSS( shadowMap, shadowCoord );\nshadow = shadow1 * (1.0 - blending) + blending * shadow2;\n            "},4988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frag=t.vert=void 0,t.vert="\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// CUSTOM START\nvarying vec3 frag_position;\nvarying vec3 frag_normal;\n// CUSTOM END\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n    #ifdef USE_TRANSMISSION\n        vWorldPosition = worldPosition.xyz;\n    #endif\n\n    // CUSTOM START\n    frag_position = position;\n    frag_normal = objectNormal;\n    // CUSTOM END\n}\n",t.frag="\n#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\n\n// CUSTOM START\n#ifdef USE_IMPURITYMAP\n\tuniform sampler2D impurityMap;\n#endif\n// CUSTOM END\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n\n\n// CUSTOM START\n\nvarying vec4 initialPosition;\nvarying vec3 initialNormal;\n\nvarying vec3 frag_position;\nvarying vec3 frag_normal;\n\nuniform vec3 center;\nuniform float radius;\nuniform samplerCube sphericalNormalMap;\nuniform mat3 normalMatrix;\nuniform mat4 modelMatrix;\n\nuniform float impurityScale;\nuniform vec3 colorTransferBegin;\nuniform vec3 colorTransferEnd;\nuniform float refractionIndex;\nuniform float gamma;\nuniform float contrast;\nuniform float brightness;\nuniform float dispersion;\nuniform float tracingOpacity;\n\n\nvec3 getIBLRadianceVariation( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\treturn min(envMapColor.rgb * envMapIntensity, vec3(1.0));\n\t#else\n\t\treturn vec3( 0.0 );\n\t#endif\n}\n\nvec3 calculateReflectedLight(vec3 position, vec3 normal, vec3 viewDir, PhysicalMaterial material, int depth) {\n\t\n\tGeometricContext currentGeometry;\n\tcurrentGeometry.position = (modelMatrix * vec4(position, 1.0)).xyz;\n\tmat3 inverseTransposeModelMatrix = mat3(transpose(inverse(modelMatrix)));\n\tcurrentGeometry.normal = normalize(inverseTransposeModelMatrix * normal);\n\tcurrentGeometry.viewDir = normalize(inverseTransposeModelMatrix * -viewDir);\n\n\n    #ifdef USE_CLEARCOAT\n        currentGeometry.clearcoatNormal = clearcoatNormal;\n    #endif\n\n\tReflectedLight rLight;\n\tIncidentLight dLight;\n\n\tfloat temp = material.roughness;\n\tmaterial.roughness = 0.5;\n\n\t#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\t\tPointLight pointLight;\n        #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n            PointLightShadow pointLightShadow;\n        #endif\n\n\t    #pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\tpointLight = pointLights[ i ];\n            getPointLightInfo( pointLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n                pointLightShadow = pointLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n            #endif\n\t\t    RE_Direct( dLight, currentGeometry, material, rLight );\n\t\t}\n        #pragma unroll_loop_end\n\t#endif\n\t#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n        SpotLight spotLight;\n        #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n            SpotLightShadow spotLightShadow;\n        #endif\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n            spotLight = spotLights[ i ];\n            getSpotLightInfo( spotLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n                spotLightShadow = spotLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n            #endif\n            RE_Direct( dLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n\t#endif\n\n    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n        DirectionalLight directionalLight;\n        #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n            DirectionalLightShadow directionalLightShadow;\n        #endif\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n            directionalLight = directionalLights[ i ];\n            getDirectionalLightInfo( directionalLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n                directionalLightShadow = directionalLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n            #endif\n            RE_Direct( dLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n    #endif\n\tmaterial.roughness = temp;\n\t\n    #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n        RectAreaLight rectAreaLight;\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n            rectAreaLight = rectAreaLights[ i ];\n            RE_Direct_RectArea( rectAreaLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n    #endif\n    #if defined( RE_IndirectDiffuse )\n        vec3 iblIrradiance = vec3( 0.0 );\n        vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n        irradiance += getLightProbeIrradiance( lightProbe, currentGeometry.normal );\n        #if ( NUM_HEMI_LIGHTS > 0 )\n            #pragma unroll_loop_start\n            for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n                irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], currentGeometry.normal );\n            }\n            #pragma unroll_loop_end\n        #endif\n    #endif\n    #if defined( RE_IndirectSpecular )\n        vec3 radiance = vec3( 0.0 );\n        vec3 clearcoatRadiance = vec3( 0.0 );\n    #endif\n\n\n    #if defined( RE_IndirectDiffuse )\n        #ifdef USE_LIGHTMAP\n            vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n            irradiance += lightMapIrradiance;\n        #endif\n        #if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n            iblIrradiance += getIBLIrradiance( currentGeometry.normal );\n        #endif\n    #endif\n    #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n        radiance += getIBLRadianceVariation( currentGeometry.viewDir, currentGeometry.normal, material.roughness );\n        #ifdef USE_CLEARCOAT\n            clearcoatRadiance += getIBLRadianceVariation( currentGeometry.viewDir, currentGeometry.clearcoatNormal, material.clearcoatRoughness );\n        #endif\n    #endif\n\n    #if defined( RE_IndirectDiffuse )\n        RE_IndirectDiffuse( irradiance, currentGeometry, material, rLight );\n    #endif\n    #if defined( RE_IndirectSpecular )\n        RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, currentGeometry, material, rLight );\n    #endif\n\n\tif(depth >= 0) {\n\t\tfloat frac = float(depth) / float(TRACING_DEPTH);\n\t\tvec3 colorTransfer = (1.0-frac) * colorTransferBegin + frac * colorTransferEnd;\n\t\trLight.indirectSpecular *= colorTransfer;\n\t\trLight.directSpecular *= colorTransfer;\n\t}\n\n\tvec3 color = rLight.indirectSpecular + rLight.directSpecular + rLight.indirectDiffuse + rLight.directDiffuse;\n\n\t// gamma\n\tcolor = pow(color, vec3(1.0/gamma)); \n\n\t// contrast\n\tcolor.rgb = ((color.rgb - 0.5) * max(contrast, 0.0)) + 0.5; \n\n\t// brightness\n\tcolor.r = min(max(color.r + brightness, 0.0), 1.0);\n\tcolor.g = min(max(color.g + brightness, 0.0), 1.0);\n\tcolor.b = min(max(color.b + brightness, 0.0), 1.0);\n\n\treturn color;\n}\n\nvec3 normalLookUp(vec3 dir) {\n\tvec4 s = textureCube(sphericalNormalMap, dir);\n\tif(s.a < 1.0/256.0) {\n\t\treturn normalize(vec3(-s.x, -s.y, -s.z));\n\t} else if(s.a < 3.0/256.0) {\n\t\treturn normalize(vec3(-s.x, -s.y, s.z));\n\t} else if(s.a < 5.0/256.0) {\n\t\treturn normalize(vec3(-s.x, s.y, -s.z));\n\t} else if(s.a < 7.0/256.0) {\n\t\treturn normalize(vec3(s.x, -s.y, -s.z));\n\t} else if(s.a < 9.0/256.0) {\n\t\treturn normalize(vec3(-s.x, s.y, s.z));\n\t} else if(s.a < 11.0/256.0) {\n\t\treturn normalize(vec3(s.x, -s.y, s.z));\n\t} else if(s.a < 13.0/256.0) {\n\t\treturn normalize(vec3(s.x, s.y, -s.z));\n\t} else {\n\t\treturn normalize(s.xyz);\n\t}\n}\n\n#ifdef USE_IMPURITYMAP\n\tfloat impurityLookUp(vec3 dir) {\n\t\tvec3 c = textureCube(impurityMap, dir.xy).rgb;\n\t\treturn (c.x + c.y + c.z) / 3.0;\n\t}\n#endif\n\nvec3 raySphereIntersection(vec3 o, vec3 d) {\n\n\tvec3 oc = o - center;\n    float a = dot(d, d);\n    float b = 2.0 * dot(oc, d);\n    float c = dot(oc,oc) - radius*radius;\n    float discriminant = b*b - 4.0*a*c;\n    if(discriminant < 0.0){\n        return vec3(0.0);\n    }\n    else{\n        return o +( (-b + sqrt(discriminant)) / (2.0*a)) * d;\n    }\n}\n\nvec3 hueToSaturatedColor(float hue) {\n    float r,g,b;\n    if (hue < 0.25){\n\t\tfloat t = 1.0 - (hue / 0.25);\n        r = 1.0;\n        g = 1.0;\n        b = t;    \n\t} else if (hue < 0.5){\n    \tfloat t = 1.0 - (hue - 0.25 / 0.25);\n\t\tr = 1.0;\n        g = t;\n        b = 0.0;\n\t} else if (hue < 0.75){\n    \tfloat t = 1.0 - (hue - 0.5 / 0.25);\n\t\tr = t;\n        g = 0.0;\n        b = 1.0 - t;\n    } else {\n    \tfloat t = hue - 0.75 / 0.25;\n        r = t;\n        g = t;\n        b = 1.0;\n    }\n    return vec3(r, g, b) / 0.5 + 0.5;\n}\n// CUSTOM END\n\nvoid main() {    \n    // CUSTOM START\n    vec3 frag_normal_normalized = frag_normal;\n    // CUSTOM END\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\n    // CUSTOM START\n    \n\tmat4 inverseMM = inverse( modelMatrix );\n    \n\tvec3 initialDirection = normalize( frag_position - (inverseMM*vec4(cameraPosition,1.0)).xyz );\n\n\tvec4 outgoingLight2;\n\tfloat r_0 = (1.0-refractionIndex)/(1.0+refractionIndex);\n\tr_0 = r_0*r_0;\n\n\tfloat cos_theta_0 = -dot(initialDirection, frag_normal_normalized);\n\tfloat r_0_outside = (refractionIndex-1.0)/(refractionIndex+1.0);\n\tr_0_outside = r_0_outside*r_0_outside;\n\tfloat initialProbability = r_0_outside + (1.0 - r_0_outside)*pow(1.0 - cos_theta_0, 5.0);\n\n\toutgoingLight2 = vec4(calculateReflectedLight(frag_position, frag_normal_normalized, initialDirection, material, -1), 1.0);\n\t// gl_FragColor = outgoingLight2;\n\t// return;\n\tif(TRACING_DEPTH > 0) \n\t\toutgoingLight2 *= initialProbability;\n\t\t\n\tvec3 tempColor;\n\n\t#ifdef DISPERSION\n\t\tconst int loop = 3;\n\t\tvec3 dispersionColor;\n\t#else\n\t\tconst int loop = 1;\n\t#endif\n\t\t#pragma unroll_loop_start\n\t\tfor(int j = 0; j < loop; j++){\n\t\t\tvec3 refractedDirection = refract(initialDirection, frag_normal_normalized, 1.0/refractionIndex + float(j)*dispersion * 0.025);\n\t\t\tvec3 newPosition = raySphereIntersection(frag_position, refractedDirection);\n\t\t\tvec3 lookUpVector = normalize(newPosition - center);\n\t\t\tvec3 newNormal = normalLookUp(lookUpVector);\n\t\t\tvec3 newDirection = reflect(refractedDirection, newNormal);\n\n\t\t\tfloat currentProbability = 1.0;\n\n\t\t\t#ifdef USE_IMPURITYMAP\n\t\t\t\tfloat impurityProbability = impurityLookUp(lookUpVector);\n\t\t\t\tcurrentProbability -= impurityProbability * impurityScale;\n\t\t\t\t// gl_FragColor = vec4(vec3(impurityProbability), 1.0);\n\t\t\t\t// return;\n\t\t\t#endif\n\t\t\t\n\t\t\t// if(0 == TRACING_DEPTH) {\n\t\t\t// \tgl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\ttempColor = vec3(0.0);\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor(int i = 0; i < TRACING_DEPTH; i++) {\n\t\t\t\t// small position correction to avoid artefacts\n\t\t\t\tnewPosition = newPosition - lookUpVector * 1e-6;\n\t\t\t\tnewPosition = raySphereIntersection(newPosition, newDirection);\n\t\t\t\tlookUpVector = normalize(newPosition - center);\n\t\t\t\tnewNormal = normalLookUp(lookUpVector);\n\t\t\t\n\t\t\t\tfloat cos_theta = dot(newDirection, newNormal);\n\t\t\t\tfloat ratio;\n\t\t\t\tif(cos_theta > 0.0) {\n\t\t\t\t\tratio = refractionIndex;\n\t\t\t\t} else {\n\t\t\t\t\tcos_theta = -cos_theta;\n\t\t\t\t\tratio = 1.0 / refractionIndex;\n\t\t\t\t}\n\t\t\t\tfloat cos_theta_2 = 1.0 - ratio*ratio * (1.0 - cos_theta*cos_theta);\n\t\t\t\tfloat probability = r_0 + (1.0 - r_0)*pow(1.0 - cos_theta, 5.0);\n\t\t\t\tif(cos_theta_2 < 0.0) probability = 0.0;\n\n\t\t\t\tvec3 refracted = refract(newDirection, newNormal*-1.0, 1.0/refractionIndex);\n\t\t\t\ttempColor += probability * currentProbability * calculateReflectedLight(newPosition, newNormal*-1.0, reflect(refracted, newNormal), material, i);\n\t\t\t\tif(i+1 == TRACING_DEPTH)\n\t\t\t\t\ttempColor += (1.0 - probability) * currentProbability * calculateReflectedLight(newPosition, newNormal, newDirection, material, i);\n\n\t\t\t\tnewDirection = reflect(newDirection, newNormal);\n\n\t\t\t\t// if(i+1 == TRACING_DEPTH) {\n\t\t\t\t// \tgl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);\n\t\t\t\t// \treturn;\n\t\t\t\t// }\n\n\t\t\t\tcurrentProbability *= (1.0 - probability);\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\n\t\t\t#ifdef DISPERSION\n\t\t\t\tif(j == 0) {\n\t\t\t\t\tdispersionColor.r = tempColor.r;\t\n\t\t\t\t} else if(j == 1) {\n\t\t\t\t\tdispersionColor.g = tempColor.g;\t\n\t\t\t\t} else if(j == 2) {\n\t\t\t\t\tdispersionColor.b = tempColor.b;\t\n\t\t\t\t}\n\t\t\t\ttempColor = dispersionColor;\n\t\t\t#endif\n\t\t}\t\n\t\t#pragma unroll_loop_end\n\n\tif(TRACING_DEPTH > 0)\n\t\toutgoingLight2.rgb += (1.0 - initialProbability) * tempColor;\n\n\tfloat alpha = (1.0 - initialProbability) + initialProbability*tracingOpacity;\n\tgl_FragColor = vec4(outgoingLight2.rgb, alpha*diffuseColor.a);\n\n    // CUSTOM END\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n\n"},4645:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBELoader=void 0;const r=i(5232);class n extends r.DataTextureLoader{constructor(e){super(e),this.type=r.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},i=function(e,t,i){t=t||1024;let r=e.pos,n=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(n=o.indexOf("\n"))&&a<t&&r<e.byteLength;)s+=o,a+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<n&&(!1!==i&&(e.pos+=a+n+1),s+o.slice(0,n))},n=function(e,t,i,r){const n=e[t+3],a=Math.pow(2,n-128)/255;i[r+0]=e[t+0]*a,i[r+1]=e[t+1]*a,i[r+2]=e[t+2]*a,i[r+3]=1},a=function(e,t,i,n){const a=e[t+3],s=Math.pow(2,a-128)/255;i[n+0]=r.DataUtils.toHalfFloat(Math.min(e[t+0]*s,65504)),i[n+1]=r.DataUtils.toHalfFloat(Math.min(e[t+1]*s,65504)),i[n+2]=r.DataUtils.toHalfFloat(Math.min(e[t+2]*s,65504)),i[n+3]=r.DataUtils.toHalfFloat(1)},s=new Uint8Array(e);s.pos=0;const o=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,n=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=i(e)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=i(e),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(o.gamma=parseFloat(c[1])),(c=l.match(n))&&(o.exposure=parseFloat(c[1])),(c=l.match(a))&&(o.valid|=2,o.format=c[1]),(c=l.match(s))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid?4&o.valid?o:t(3,"missing image size specifier"):t(3,"missing format specifier")}(s);if(-1!==o){const e=o.width,i=o.height,l=function(e,i,r){const n=i;if(n<8||n>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(n!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const a=new Uint8Array(4*i*r);if(!a.length)return t(4,"unable to allocate buffer space");let s=0,o=0;const l=4*n,c=new Uint8Array(4),u=new Uint8Array(l);let h=r;for(;h>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(c[0]=e[o++],c[1]=e[o++],c[2]=e[o++],c[3]=e[o++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=n)return t(3,"bad rgbe scanline format");let i,r=0;for(;r<l&&o<e.byteLength;){i=e[o++];const n=i>128;if(n&&(i-=128),0===i||r+i>l)return t(3,"bad scanline data");if(n){const t=e[o++];for(let e=0;e<i;e++)u[r++]=t}else u.set(e.subarray(o,o+i),r),r+=i,o+=i}const d=n;for(let e=0;e<d;e++){let t=0;a[s]=u[e+t],t+=n,a[s+1]=u[e+t],t+=n,a[s+2]=u[e+t],t+=n,a[s+3]=u[e+t],s+=4}h--}return a}(s.subarray(s.pos),e,i);if(-1!==l){let t,s,c,u;switch(this.type){case r.FloatType:u=l.length/4;const e=new Float32Array(4*u);for(let t=0;t<u;t++)n(l,4*t,e,4*t);t=e,c=r.FloatType;break;case r.HalfFloatType:u=l.length/4;const i=new Uint16Array(4*u);for(let e=0;e<u;e++)a(l,4*e,i,4*e);t=i,c=r.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:i,data:t,header:o.string,gamma:o.gamma,exposure:o.exposure,format:s,type:c}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,n){return super.load(e,(function(e,i){switch(e.type){case r.FloatType:case r.HalfFloatType:e.encoding=r.LinearEncoding,e.minFilter=r.LinearFilter,e.magFilter=r.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)}),i,n)}}t.RGBELoader=n},9513:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullScreenQuad=t.Pass=t.EffectComposer=void 0;const r=i(5232),n=i(9572),a=i(7735),s=i(7578),o=i(7578);t.EffectComposer=class{constructor(e,t){if(this.renderer=e,void 0===t){const i={minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat},n=e.getSize(new r.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,i)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===n.CopyShader&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===a.ShaderPass&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new a.ShaderPass(n.CopyShader),this.clock=new r.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),r.needsSwap){if(i){const t=this.renderer.getContext(),i=this.renderer.state.buffers.stencil;i.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),i.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==s.MaskPass&&(r instanceof s.MaskPass?i=!0:r instanceof o.ClearMaskPass&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},t.Pass=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}};const l=new r.OrthographicCamera(-1,1,1,-1,0,1),c=new r.BufferGeometry;c.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2)),t.FullScreenQuad=class{constructor(e){this._mesh=new r.Mesh(c,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,l)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},7578:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearMaskPass=t.MaskPass=void 0;const r=i(9349);class n extends r.Pass{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),n=e.state;let a,s;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0),this.inverse?(a=0,s=1):(a=1,s=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),n.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),n.buffers.stencil.setClear(s),n.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(r.EQUAL,1,4294967295),n.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),n.buffers.stencil.setLocked(!0)}}t.MaskPass=n;class a extends r.Pass{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}t.ClearMaskPass=a},9349:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullScreenQuad=t.Pass=void 0;const r=i(5232);t.Pass=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}};const n=new r.OrthographicCamera(-1,1,1,-1,0,1),a=new r.BufferGeometry;a.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2)),t.FullScreenQuad=class{constructor(e){this._mesh=new r.Mesh(a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,n)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},656:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderPass=void 0;const r=i(5232),n=i(9349);class a extends n.Pass{constructor(e,t,i,n,a){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Color}render(e,t,i){const r=e.autoClear;let n,a;e.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),n=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,n),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=r}}t.RenderPass=a},90:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAOPass=void 0;const r=i(5232),n=i(9349),a=i(7389),s=i(3026),o=i(3026),l=i(9572),c=i(381);class u extends n.Pass{constructor(e,t,i,o,u){let h;super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=void 0!==i&&i,this.supportsNormalTexture=void 0!==o&&o,this.originalClearColor=new r.Color,this._oldClearColor=new r.Color,this.oldClearAlpha=1,this.params={output:0,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=void 0!==u?new r.Vector2(u.x,u.y):new r.Vector2(256,256),this.saoRenderTarget=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,format:r.RGBAFormat,type:r.FloatType}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,format:r.RGBAFormat}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension&&(h=new r.DepthTexture,h.type=r.UnsignedShortType,this.beautyRenderTarget.depthTexture=h,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new r.MeshDepthMaterial,this.depthMaterial.depthPacking=r.RGBADepthPacking,this.depthMaterial.blending=r.NoBlending,this.depthMaterial.side=r.DoubleSide,this.normalMaterial=new r.MeshNormalMaterial,this.normalMaterial.blending=r.NoBlending,this.normalMaterial.side=r.DoubleSide,void 0===a.SAOShader&&console.error("THREE.SAOPass relies on SAOShader"),this.saoMaterial=new r.ShaderMaterial({defines:Object.assign({},a.SAOShader.defines),fragmentShader:a.SAOShader.fragmentShader,vertexShader:a.SAOShader.vertexShader,uniforms:r.UniformsUtils.clone(a.SAOShader.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?h:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=r.NoBlending,void 0===s.DepthLimitedBlurShader&&console.error("THREE.SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(s.DepthLimitedBlurShader.uniforms),defines:Object.assign({},s.DepthLimitedBlurShader.defines),vertexShader:s.DepthLimitedBlurShader.vertexShader,fragmentShader:s.DepthLimitedBlurShader.fragmentShader}),this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?h:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=r.NoBlending,this.hBlurMaterial=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(s.DepthLimitedBlurShader.uniforms),defines:Object.assign({},s.DepthLimitedBlurShader.defines),vertexShader:s.DepthLimitedBlurShader.vertexShader,fragmentShader:s.DepthLimitedBlurShader.fragmentShader}),this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?h:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=r.NoBlending,void 0===l.CopyShader&&console.error("THREE.SAOPass relies on CopyShader"),this.materialCopy=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(l.CopyShader.uniforms),vertexShader:l.CopyShader.vertexShader,fragmentShader:l.CopyShader.fragmentShader,blending:r.NoBlending}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=r.CustomBlending,this.materialCopy.blendSrc=r.DstColorFactor,this.materialCopy.blendDst=r.ZeroFactor,this.materialCopy.blendEquation=r.AddEquation,this.materialCopy.blendSrcAlpha=r.DstAlphaFactor,this.materialCopy.blendDstAlpha=r.ZeroFactor,this.materialCopy.blendEquationAlpha=r.AddEquation,void 0===c.UnpackDepthRGBAShader&&console.error("THREE.SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new r.ShaderMaterial({uniforms:r.UniformsUtils.clone(c.UnpackDepthRGBAShader.uniforms),vertexShader:c.UnpackDepthRGBAShader.vertexShader,fragmentShader:c.UnpackDepthRGBAShader.fragmentShader,blending:r.NoBlending}),this.fsQuad=new n.FullScreenQuad(null)}render(e,t,i){if(this.renderToScreen&&(this.materialCopy.blending=r.NoBlending,this.materialCopy.uniforms.tDiffuse.value=i.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),1===this.params.output)return;e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const n=e.autoClear;e.autoClear=!1,e.setRenderTarget(this.depthRenderTarget),e.clear(),this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const a=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);if(this.vBlurMaterial.uniforms.depthCutoff.value=a,this.hBlurMaterial.uniforms.depthCutoff.value=a,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(o.BlurShaderUtils.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new r.Vector2(0,1)),o.BlurShaderUtils.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new r.Vector2(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),!this.supportsDepthTextureExtension){const t=this.scene.background;this.scene.background=null,this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,16777215,1),this.scene.background=t}if(this.supportsNormalTexture){const t=this.scene.background;this.scene.background=null,this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.scene.background=t}this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let s=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?s.blending=r.CustomBlending:s.blending=r.NoBlending,this.renderPass(e,s,this.renderToScreen?null:i),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=n}renderPass(e,t,i,r,n){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,null!=r&&(e.setClearColor(r),e.setClearAlpha(n||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}renderOverride(e,t,i,r,n){e.getClearColor(this.originalClearColor);const a=e.getClearAlpha(),s=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=t.clearColor||r,n=t.clearAlpha||n,null!=r&&(e.setClearColor(r),e.setClearAlpha(n||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(this.originalClearColor),e.setClearAlpha(a)}setSize(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}}t.SAOPass=u,u.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4}},3860:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SSAARenderPass=void 0;const r=i(5232),n=i(9349),a=i(9572);class s extends n.Pass{constructor(e,t,i,s){super(),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==s?s:0,this._oldClearColor=new r.Color,void 0===a.CopyShader&&console.error("THREE.SSAARenderPass relies on CopyShader");const o=a.CopyShader;this.copyUniforms=r.UniformsUtils.clone(o.uniforms),this.copyMaterial=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.fsQuad=new n.FullScreenQuad(this.copyMaterial)}dispose(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)}setSize(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)}render(e,t,i){this.sampleRenderTarget||(this.sampleRenderTarget=new r.WebGLRenderTarget(i.width,i.height,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:r.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");const n=o[Math.max(0,Math.min(this.sampleLevel,5))],a=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const s=e.getClearAlpha(),l=1/n.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;const c={fullWidth:i.width,fullHeight:i.height,offsetX:0,offsetY:0,width:i.width,height:i.height},u=Object.assign({},this.camera.view);u.enabled&&Object.assign(c,u);for(let i=0;i<n.length;i++){const r=n[i];this.camera.setViewOffset&&this.camera.setViewOffset(c.fullWidth,c.fullHeight,c.offsetX+.0625*r[0],c.offsetY+.0625*r[1],c.width,c.height);let a=l;this.unbiased&&(a+=.03125*((i+.5)/n.length-.5)),this.copyUniforms.opacity.value=a,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===i&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.setViewOffset&&u.enabled?this.camera.setViewOffset(u.fullWidth,u.fullHeight,u.offsetX,u.offsetY,u.width,u.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=a,e.setClearColor(this._oldClearColor,s)}}t.SSAARenderPass=s;const o=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},7735:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShaderPass=void 0;const r=i(5232),n=i(9349);class a extends n.Pass{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new n.FullScreenQuad(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}t.ShaderPass=a},9572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyShader=void 0;t.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"}},3026:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlurShaderUtils=t.DepthLimitedBlurShader=void 0;const r=i(5232),n={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new r.Vector2(512,512)},sampleUvOffsets:{value:[new r.Vector2(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:"\n\n\t\t#include <common>\n\n\t\tuniform vec2 size;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tvInvSize = 1.0 / size;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform float depthCutoff;\n\n\t\tuniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\n\t\tuniform float sampleWeights[ KERNEL_RADIUS + 1 ];\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec2 vInvSize;\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\t\t\t#if DEPTH_PACKING == 1\n\t\t\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\n\t\t\t#else\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\t\t\t#endif\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tif( depth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = -getViewZ( depth );\n\t\t\tbool rBreak = false, lBreak = false;\n\n\t\t\tfloat weightSum = sampleWeights[0];\n\t\t\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\n\n\t\t\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n\t\t\t\tfloat sampleWeight = sampleWeights[i];\n\t\t\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\n\n\t\t\t\tvec2 sampleUv = vUv + sampleUvOffset;\n\t\t\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\n\n\t\t\t\tif( ! rBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t\tsampleUv = vUv - sampleUvOffset;\n\t\t\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\n\n\t\t\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\n\n\t\t\t\tif( ! lBreak ) {\n\t\t\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\n\t\t\t\t\tweightSum += sampleWeight;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = diffuseSum / weightSum;\n\t\t}"};t.DepthLimitedBlurShader=n;const a={createSampleWeights:function(e,t){const i=[];for(let r=0;r<=e;r++)i.push(s(r,t));return i},createSampleOffsets:function(e,t){const i=[];for(let r=0;r<=e;r++)i.push(t.clone().multiplyScalar(r));return i},configure:function(e,t,i,r){e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=a.createSampleOffsets(t,r),e.uniforms.sampleWeights.value=a.createSampleWeights(t,i),e.needsUpdate=!0}};function s(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)}t.BlurShaderUtils=a},9526:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GammaCorrectionShader=void 0;t.GammaCorrectionShader={uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = LinearTosRGB( tex );\n\n\t\t}"}},7389:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SAOShader=void 0;const r=i(5232),n={defines:{NUM_SAMPLES:8,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new r.Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new r.Matrix4},cameraInverseProjectionMatrix:{value:new r.Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}",fragmentShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\t#if DIFFUSE_TEXTURE == 1\n\t\tuniform sampler2D tDiffuse;\n\t\t#endif\n\n\t\tuniform sampler2D tDepth;\n\n\t\t#if NORMAL_TEXTURE == 1\n\t\tuniform sampler2D tNormal;\n\t\t#endif\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float scale;\n\t\tuniform float intensity;\n\t\tuniform float kernelRadius;\n\t\tuniform vec2 size;\n\n\t\t// RGBA depth\n\n\t\t#include <common>\n\t\t#include <packing>\n\n\t\tvec4 getDefaultColor( const in vec2 screenPosition ) {\n\t\t\t#if DIFFUSE_TEXTURE == 1\n\t\t\treturn texture2D( tDiffuse, vUv );\n\t\t\t#else\n\t\t\treturn vec4( 1.0 );\n\t\t\t#endif\n\t\t}\n\n\t\tvec3 getViewPosition(const in vec2 screenPosition, const in float depth, const in float viewZ) {\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\t\t\tvec4 clipPosition = vec4((vec3(screenPosition, depth) - 0.5) * 2.0, 1.0);\n\t\t\tclipPosition *= clipW; // unprojection\n\t\t\n\t\t\treturn (cameraInverseProjectionMatrix * clipPosition).xyz;\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#else\n\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\t\t\t#endif\n\t\t}\n\t\t\n\t\tfloat getOcclusion(const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition) {\n\t\t\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n\t\t\tfloat viewDistance = length(viewDelta);\n\t\t\tfloat scaledScreenDistance = scale * viewDistance;\n\t\t\treturn max(0.0, (dot(centerViewNormal, viewDelta))/scaledScreenDistance)/(1.0 + pow2(scaledScreenDistance));\n\t\t}\n\t\t\n\t\tfloat getAmbientOcclusion(const in vec3 centerViewPosition) {\n\t\t\tvec3 centerViewNormal = unpackRGBToNormal(texture2D(tNormal, vUv).xyz);\n\t\t\n\t\t\tfloat angle = rand(vUv) * PI2;\n\t\t\tvec2 radius = vec2(kernelRadius * (1.0/float(NUM_SAMPLES)))/size;\n\t\t\tvec2 radiusStep = radius;\n\t\t\tfloat occlusionSum = 0.0;\n\t\t\tfloat weightSum = 0.0;\n\t\t\tfloat angleStep = PI2 * 3.0/float(NUM_SAMPLES);\n\t\t\n\t\t\tfor(int i = 0; i < NUM_SAMPLES; i ++) {\n\t\t\t\tvec2 sampleUv = vUv + vec2(cos(angle), sin(angle)) * radius;\n\t\t\t\tradius += radiusStep;\n\t\t\t\tangle += PI2 * 3.0/float(NUM_SAMPLES);\n\t\t\n\t\t\t\tfloat sampleDepth = unpackRGBAToDepth(texture2D(tDepth, sampleUv));\n\t\t\t\tif(sampleDepth >= (1.0 - EPSILON)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\n\t\t\t\tfloat sampleViewZ = getViewZ(sampleDepth);\n\t\t\t\tvec3 sampleViewPosition = getViewPosition(sampleUv, sampleDepth, sampleViewZ);\n\t\t\t\tocclusionSum += getOcclusion(centerViewPosition, centerViewNormal, sampleViewPosition);\n\t\t\t\tweightSum += 1.0;\n\t\t\t}\n\t\t\n\t\t\tif(weightSum == 0.0) discard;\n\t\t\n\t\t\treturn occlusionSum * (intensity/weightSum);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tfloat centerDepth = unpackRGBAToDepth(texture2D(tDepth, vUv));\n\t\t\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n\t\t\t\tdiscard;\n\t\t\t}\n\n\t\t\tfloat centerViewZ = getViewZ( centerDepth );\n\t\t\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\n\t\t\tgl_FragColor = vec4(viewPosition, 1);\n\n\t\t\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n\n\t\t\tgl_FragColor = getDefaultColor( vUv );\n\t\t\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\n\t\t}"};t.SAOShader=n},381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnpackDepthRGBAShader=void 0;t.UnpackDepthRGBAShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\n\t\t\tgl_FragColor = vec4( vec3( depth ), opacity );\n\n\t\t}"}},6336:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ThreejsData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t){super(t),r.set(this,void 0),n(this,r,e,"f")}get obj(){return a(this,r,"f")}set obj(e){n(this,r,e,"f")}clone(){return new o(this.obj,this.id)}}t.ThreejsData=o,r=new WeakMap},6012:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEngine=void 0;const r=i(887),n=i(3858),a=i(7038);t.AnimationEngine=class{constructor(){this._tree=n.Tree.instance,this._animations={}}static get instance(){return this._instance||(this._instance=new this)}get animations(){return this._animations}init(){}update(e){const t=Object.values(this._animations);let i=!1;for(let n=0;n<t.length;n++){const s=t[n];if(-1===s.animationTime&&(i=!0,s.animationTime=0),!s.animate)continue;i=!0,s.animationTime+=e,s.animationTime/1e3>s.duration&&(s.repeat?s.startAnimation():s.stopAnimation());const o=s.duration,l=s.animationTime/1e3%o;for(let e=0;e<s.tracks.length;e++){const t=s.tracks[e],i=s.id+"_"+e;if(!(l<t.times[0]||l>t.times[t.times.length-1]))for(let e=1;e<t.times.length;e++)if(l<t.times[e]&&l>t.times[e-1]){const n=t.node.transformations.filter((e=>e.id===i));t.node.transformations=t.node.transformations.filter((e=>!n.includes(e)));const s=(l-t.times[e-1])/(t.times[e]-t.times[e-1]);let o=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));o||(o={id:"gltf_matrix_translation",matrix:r.mat4.create()},t.node.transformations.push(o));let c=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));c||(c={id:"gltf_matrix_rotation",matrix:r.mat4.create()},t.node.transformations.push(c));let u=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(u||(u={id:"gltf_matrix_scale",matrix:r.mat4.create()},t.node.transformations.push(u)),"rotation"===t.path){let i,n,a;t.pivot&&(i=r.mat4.fromTranslation(r.mat4.create(),r.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),n=r.mat4.fromTranslation(r.mat4.create(),r.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2]))),a="step"===t.interpolation?r.quat.fromValues(t.values[4*(e-1)+0],t.values[4*(e-1)+1],t.values[4*(e-1)+2],t.values[4*(e-1)+3]):r.quat.slerp(r.vec4.create(),r.vec4.fromValues(t.values[4*(e-1)+0],t.values[4*(e-1)+1],t.values[4*(e-1)+2],t.values[4*(e-1)+3]),r.vec4.fromValues(t.values[4*e+0],t.values[4*e+1],t.values[4*e+2],t.values[4*e+3]),s);const o=r.mat4.fromQuat(r.mat4.create(),a);c.matrix=i&&n?r.mat4.multiply(r.mat4.create(),r.mat4.multiply(r.mat4.create(),i,o),n):o}else if("translation"===t.path){let i;i="step"===t.interpolation?r.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]):r.vec3.lerp(r.vec3.create(),r.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]),r.vec3.fromValues(t.values[3*e+0],t.values[3*e+1],t.values[3*e+2]),s),o.matrix=r.mat4.fromTranslation(r.mat4.create(),i)}else if("scale"===t.path){let i,n,a;t.pivot&&(i=r.mat4.fromTranslation(r.mat4.create(),r.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),n=r.mat4.fromTranslation(r.mat4.create(),r.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2]))),a="step"===t.interpolation?r.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]):r.vec3.lerp(r.vec3.create(),r.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]),r.vec3.fromValues(t.values[3*e+0],t.values[3*e+1],t.values[3*e+2]),s);const o=r.mat4.fromScaling(r.mat4.create(),a);u.matrix=i&&n?r.mat4.multiply(r.mat4.create(),r.mat4.multiply(r.mat4.create(),i,o),n):o}else if("weights"===t.path){let i=[];const r=t.values.length/t.times.length;if("step"===t.interpolation)for(let n=0;n<r;n++)i.push(t.values[(e-1)*r+n]);else for(let n=0;n<r;n++)i.push(t.values[(e-1)*r+n]*(1-s)+s*t.values[(e-1)*r+n]);const n=e=>{for(let t=0;t<e.data.length;t++)e.data[t]instanceof a.GeometryData&&e.data[t].morphWeights.length===r&&(e.data[t].morphWeights=i);for(let t=0;t<e.children.length;t++)n(e.children[t])};n(t.node)}break}}}return i}updateAnimationData(){this._animations={};const e=this.gatherAnimations(),t=e.map((e=>e.name));for(let i=0;i<e.length;i++){const r=e[i].name,n=[];for(let e=0;e<t.length;e++)r===t[e]&&n.push(e);let a=r;if(n.length>1)for(a=r+"_"+n.indexOf(i);t.includes(a);)a+="_0";this._animations[a]=e[i]}}gatherAnimations(e=this._tree.root){let t=[];for(let i=0,r=e.data.length;i<r;i++)e.data[i]instanceof a.AnimationData&&t.push(e.data[i]);for(let i=0,r=e.children.length;i<r;i++)t=t.concat(this.gatherAnimations(e.children[i]));return t}}},3289:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEngine=void 0;const r=i(6012);Object.defineProperty(t,"AnimationEngine",{enumerable:!0,get:function(){return r.AnimationEngine}})},1314:function(e,t,i){"use strict";var r,n,a=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameEngine=void 0;const c=o(i(6194)),u=i(8877),h=i(3289);t.AnimationFrameEngine=class{constructor(){r.set(this,h.AnimationEngine.instance),n.set(this,u.UuidGenerator.instance),this._animationFrameCallbacks={},this._lastTime=0,this.animate(0)}static get instance(){return this._instance||(this._instance=new this)}addAnimationFrameCallback(e){const t=l(this,n,"f").create();return this._animationFrameCallbacks[t]=e,t}removeAnimationFrameCallback(e){return!!this._animationFrameCallbacks[e]&&(delete this._animationFrameCallbacks[e],this._animationFrameCallbacks[e]=void 0,!0)}animate(e){requestAnimationFrame((e=>this.animate(e))),c.update(e);const t=e-this._lastTime<0?0:e-this._lastTime;this._lastTime=e;const i=l(this,r,"f").update(t);for(let r in this._animationFrameCallbacks)this._animationFrameCallbacks[r](e,t,i)}},r=new WeakMap,n=new WeakMap},8715:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameEngine=void 0;const r=i(1314);Object.defineProperty(t,"AnimationFrameEngine",{enumerable:!0,get:function(){return r.AnimationFrameEngine}})},8551:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraEngine=void 0;const r=i(8877),n=i(5174),a=i(887),s=i(3858),o=i(4976),l=i(3164),c=i(8926),u=i(8065),h=i(5904);t.CameraEngine=class{constructor(e,t){this._renderingEngine=e,this._canvas=t,this._cameras={},this._camerasDomEventListenerToken={},this._cameraNode=new s.TreeNode("cameras"),this._eventEngine=r.EventEngine.instance,this._logger=r.Logger.instance,this._stateEngine=r.StateEngine.instance,this._tree=s.Tree.instance,this._uuidGenerator=r.UuidGenerator.instance,this._camera=null,this._settingsApplied=!1,this._boundingBox=new n.Box,this._tree.root.addChild(this._cameraNode),this._cameraNode.restrictViewports=[this._renderingEngine.id],this._eventEngine.addListener(r.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{const t=e;if(t.viewportId===this._renderingEngine.id){this._boundingBox=new n.Box(t.boundingBox.min,t.boundingBox.max);const e=this.cameras;for(let t in e)e[t].boundingBox=this._boundingBox.clone()}})),this._eventEngine.addListener(r.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(e=>{e.viewportId===this._renderingEngine.id&&this.searchForNewCameras()}))}get camera(){return this._camera}get cameras(){return this._cameras}get update(){return this._update}set update(e){this._update=e}activateCameraEvents(){const e=this.cameras;for(let t in e)e[t].controls.cameraControlsEventDistribution.activateCameraEvents()}applySettings(e){const t=this.cameras;for(let e in t)this.removeCamera(e);for(let t in e.settings.camera.cameras){const i=e.settings.camera.cameras[t];"perspective"===i.type?this.createCamera(o.CAMERA_TYPE.PERSPECTIVE,t):this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,t).direction=i.type}if(!this._settingsApplied)for(let i in t)t[i].applySettings(e);const i=Object.keys(e.settings.camera.cameras);i.length>0?e.settings.camera.cameraId?this.assignCamera(e.settings.camera.cameraId):this.assignCamera(i[0]):(this.createDefaultCameras(),this.camera.applySettings(e)),this._settingsApplied=!0,this._update&&this._update()}assignCamera(e){const t=this.cameras[e];if(!t)return!1;for(let e in this.cameras)this.cameras[e].active=!1;return this._camera=t,this._camera.active=!0,!0}createCamera(e,t){const i=this.cameras,n=t||this._uuidGenerator.create();if(i[n])throw new r.ShapeDiverViewerCameraError(`CameraEngine.createCamera: Camera (${e}) with this id (${n}) already exists.`);const a=o.CAMERA_TYPE.PERSPECTIVE===e?new c.PerspectiveCamera(n):new u.OrthographicCamera(n);return a.assignViewer(this._renderingEngine),i[n]=a,this._settingsApplied&&this._renderingEngine.settingsEngine?a.applySettings(this._renderingEngine.settingsEngine):a.zoomTo(void 0,{duration:0}),this._cameraNode.addData(a),this._update&&this._update(),a}createDefaultCameras(){this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"top").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"bottom").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"left").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"right").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"front").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"back").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK;const e=this.createCamera(o.CAMERA_TYPE.PERSPECTIVE,"perspective");this.assignCamera(e.id)}deactivateCameraEvents(){const e=this.cameras;for(let t in e)e[t].controls.cameraControlsEventDistribution.deactivateCameraEvents()}removeCamera(e){const t=this.cameras,i=t[e];return!!i&&(this._renderingEngine.domEventEngine.removeDomEventListener(this._camerasDomEventListenerToken[e]),this._camera&&this._camera.id===e&&(this._camera=null),delete t[e],delete this._camerasDomEventListenerToken[e],this._cameraNode.removeData(i),this._update&&this._update(),!0)}saveSettings(e){e.settings.camera.cameraId=this._camera?this._camera.id:"perspective",e.settings.camera.cameras={};for(let t in this.cameras){const i=this.cameras[t];if(i.type===o.CAMERA_TYPE.PERSPECTIVE){const t=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.type,fov:i.fov,controls:{autoRotationSpeed:t.autoRotationSpeed,damping:t.damping,enableAutoRotation:t.enableAutoRotation,enableKeyPan:t.enableKeyPan,enablePan:t.enablePan,enableRotation:t.enableRotation,enableZoom:t.enableZoom,input:t.input,keyPanSpeed:t.keyPanSpeed,movementSmoothness:t.movementSmoothness,rotationSpeed:t.rotationSpeed,panSpeed:t.panSpeed,zoomSpeed:t.zoomSpeed,restrictions:{position:{cube:{min:{x:t.cubePositionRestriction.min[0],y:t.cubePositionRestriction.min[1],z:t.cubePositionRestriction.min[2]},max:{x:t.cubePositionRestriction.max[0],y:t.cubePositionRestriction.max[1],z:t.cubePositionRestriction.max[2]}},sphere:{center:{x:t.spherePositionRestriction.center[0],y:t.spherePositionRestriction.center[1],z:t.spherePositionRestriction.center[2]},radius:t.spherePositionRestriction.radius}},target:{cube:{min:{x:t.cubeTargetRestriction.min[0],y:t.cubeTargetRestriction.min[1],z:t.cubeTargetRestriction.min[2]},max:{x:t.cubeTargetRestriction.max[0],y:t.cubeTargetRestriction.max[1],z:t.cubeTargetRestriction.max[2]}},sphere:{center:{x:t.sphereTargetRestriction.center[0],y:t.sphereTargetRestriction.center[1],z:t.sphereTargetRestriction.center[2]},radius:t.sphereTargetRestriction.radius}},rotation:t.rotationRestriction,zoom:t.zoomRestriction}}}}else{e.camera.cameras[i.id]&&e.camera.cameras[i.id].type!==i.type&&e.camera.cameras[i.id].position.x===i.defaultPosition[0]&&e.camera.cameras[i.id].position.y===i.defaultPosition[1]&&e.camera.cameras[i.id].position.z===i.defaultPosition[2]&&e.camera.cameras[i.id].target.x===i.defaultTarget[0]&&e.camera.cameras[i.id].target.y===i.defaultTarget[1]&&e.camera.cameras[i.id].target.z===i.defaultTarget[2]&&(i.defaultPosition=a.vec3.clone(i.position),i.defaultTarget=a.vec3.clone(i.target));const t=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.direction,controls:{damping:t.damping,enableKeyPan:t.enableKeyPan,enablePan:t.enablePan,enableZoom:t.enableZoom,input:t.input,keyPanSpeed:t.keyPanSpeed,movementSmoothness:t.movementSmoothness,panSpeed:t.panSpeed,zoomSpeed:t.zoomSpeed}}}}}searchForNewCameras(){const e=t=>{for(let e=0;e<t.data.length;e++)if(t.data[e]instanceof l.AbstractCamera&&!this._cameras[t.data[e].id]){const i=t.data[e];i.viewportId===this._renderingEngine.id&&(this._cameras[i.id]=i)}for(let i=0;i<t.children.length;i++)e(t.children[i])};e(this._tree.root),this._update&&this._update()}}},3164:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),_=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),y=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&v(t,e,i);return _(t,e),t},A=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},E=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},w=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCamera=void 0;const S=y(i(665)),T=i(887),x=i(8877),M=i(5174),R=i(3858);class P extends R.AbstractTreeNodeData{constructor(e,t,i){super(e,i),this._id=e,this._type=t,r.set(this,!1),n.set(this,!1),a.set(this,800),s.set(this,T.vec3.create()),o.set(this,T.vec3.create()),l.set(this,!0),c.set(this,1e3),u.set(this,void 0),h.set(this,1),d.set(this,void 0),f.set(this,!1),p.set(this,void 0),m.set(this,!1),g.set(this,800),b.set(this,1),this._eventEngine=x.EventEngine.instance,this._stateEngine=x.StateEngine.instance,this._boundingBox=new M.Box,this._position=T.vec3.create(),this._target=T.vec3.create()}get active(){return E(this,r,"f")}set active(e){w(this,r,e,"f")}get autoAdjust(){return E(this,n,"f")}set autoAdjust(e){w(this,n,e,"f")}set boundingBox(e){this._boundingBox=e}get cameraMovementDuration(){return E(this,a,"f")}set cameraMovementDuration(e){w(this,a,e,"f")}get controls(){return this._controls}get defaultPosition(){return E(this,s,"f")}set defaultPosition(e){w(this,s,e,"f")}get defaultTarget(){return E(this,o,"f")}set defaultTarget(e){w(this,o,e,"f")}get enableCameraControls(){return E(this,l,"f")}set enableCameraControls(e){w(this,l,e,"f")}get far(){return E(this,c,"f")}set far(e){w(this,c,e,"f")}get id(){return this._id}get name(){return E(this,u,"f")}set name(e){w(this,u,e,"f")}get near(){return E(this,h,"f")}set near(e){w(this,h,e,"f")}get node(){return E(this,d,"f")}set node(e){w(this,d,e,"f")}get useNodeData(){return E(this,f,"f")}set useNodeData(e){w(this,f,e,"f")}get order(){return E(this,p,"f")}set order(e){w(this,p,e,"f")}get position(){return this._position}set position(e){this._position=e,this._controls.position=e}get revertAtMouseUp(){return E(this,m,"f")}set revertAtMouseUp(e){w(this,m,e,"f")}get revertAtMouseUpDuration(){return E(this,g,"f")}set revertAtMouseUpDuration(e){w(this,g,e,"f")}get target(){return this._target}set target(e){this._target=e,this._controls.target=e}get type(){return this._type}get viewportId(){return this._viewportId}get zoomExtentsFactor(){return E(this,b,"f")}set zoomExtentsFactor(e){w(this,b,e,"f")}animate(e,t){return A(this,void 0,void 0,(function*(){if(0===e.length)return Promise.resolve(!1);t||(t={}),t.duration=t.duration>=0?t.duration:this.cameraMovementDuration;const i=yield this._controls.animate(e,t);return i&&(this._position=this._controls.position,this._target=this._controls.target),i}))}reset(e){return 0===this.defaultPosition[0]&&0===this.defaultPosition[1]&&0===this.defaultPosition[2]&&0===this.defaultTarget[0]&&0===this.defaultTarget[1]&&0===this.defaultTarget[2]?this.zoomTo(void 0,e):this.set(T.vec3.clone(this.defaultPosition),T.vec3.clone(this.defaultTarget),e)}set(e,t,i){return A(this,void 0,void 0,(function*(){i||(i={}),i.duration=i.duration>=0?i.duration:this.cameraMovementDuration;const r=yield this._controls.animate([{position:T.vec3.clone(this.position),target:T.vec3.clone(this.target)},{position:e,target:t}],i);return r&&(this._position=this._controls.position,this._target=this._controls.target),r}))}update(e){if(this.useNodeData&&this.node&&this._viewportId)return!0;{const{position:t,target:i}=this._controls.update(e);let r=!0;return T.vec3.equals(t,this.position)&&T.vec3.equals(i,this.target)&&(r=!1),this.position=T.vec3.clone(t),this.target=T.vec3.clone(i),r}}zoomTo(e,t){const{position:i,target:r}=this.calculateZoomTo(e);return this.set(i,r,t)}assignViewerInternal(e,t){this._viewportId=e,this._eventEngine.addListener(x.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,(e=>A(this,void 0,void 0,(function*(){if(!0===E(this,n,"f")){const e=this._eventEngine.addListener(x.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(t=>A(this,void 0,void 0,(function*(){this.zoomTo(),this._eventEngine.removeListener(e)}))))}}))));const i=()=>{!0===E(this,m,"f")&&this.reset({duration:E(this,g,"f")})};let r;t.addEventListener("mouseup",(()=>i()),!!S.supportsPassiveEvents&&{capture:!1,passive:!0}),t.addEventListener("mouseout",(()=>i()),!!S.supportsPassiveEvents&&{capture:!1,passive:!0}),t.addEventListener("touchend",(()=>i()),!!S.supportsPassiveEvents&&{capture:!1,passive:!0});let a=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";t.addEventListener(a,(()=>{clearTimeout(r),r=setTimeout(i,300)}),!!S.supportsPassiveEvents&&{capture:!1,passive:!0})}}t.AbstractCamera=P,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap},8065:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},g=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},b=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCamera=void 0;const v=i(8877),_=i(887),y=i(3858),A=i(4976),E=i(3164),w=i(8210),S=i(5904);class T extends E.AbstractCamera{constructor(e,t){super(e,A.CAMERA_TYPE.ORTHOGRAPHIC,t),r.set(this,v.Converter.instance),n.set(this,v.Logger.instance),a.set(this,y.Tree.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,-100),c.set(this,S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP),u.set(this,-100),h.set(this,100),d.set(this,100),f.set(this,{}),p.set(this,_.vec3.fromValues(0,1,0)),this._controls=new w.OrthographicCameraControls(this,!0)}get bottom(){return g(this,l,"f")}set bottom(e){b(this,l,e,"f")}get controls(){return this._controls}set controls(e){this._controls=e}get direction(){return g(this,c,"f")}set direction(e){const t=g(this,c,"f")!==e;switch(b(this,c,e,"f"),g(this,c,"f")){case S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:this.up=_.vec3.fromValues(0,1,0);break;case S.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:this.up=_.vec3.fromValues(0,0,1);break;default:this.up=_.vec3.fromValues(0,-1,0)}if(t){const{position:e,target:t}=this.calculateZoomTo(void 0);this.defaultPosition=_.vec3.clone(e),this.defaultTarget=_.vec3.clone(t),this.position=_.vec3.clone(e),this.target=_.vec3.clone(t)}}get left(){return g(this,u,"f")}set left(e){b(this,u,e,"f")}get right(){return g(this,h,"f")}set right(e){b(this,h,e,"f")}get top(){return g(this,d,"f")}set top(e){b(this,d,e,"f")}get up(){return g(this,p,"f")}set up(e){b(this,p,e,"f")}get threeJsObject(){return g(this,f,"f")}applySettings(e){const t=e.camera.cameras[this.id];if(t){this.name=t.name,this.autoAdjust=t.autoAdjust,this.cameraMovementDuration=t.cameraMovementDuration,this.enableCameraControls=t.enableCameraControls,this.revertAtMouseUp=t.revertAtMouseUp,this.revertAtMouseUpDuration=t.revertAtMouseUpDuration,this.zoomExtentsFactor=t.zoomExtentsFactor;let e=g(this,r,"f").toVec3(t.position),i=g(this,r,"f").toVec3(t.target);this.defaultPosition=_.vec3.clone(e),this.defaultTarget=_.vec3.clone(i),this.position=e,this.target=i}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.renderingEngines[this._viewportId].boundingBoxCreated.then((()=>m(this,void 0,void 0,(function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=_.vec3.clone(this._controls.position),this.defaultTarget=_.vec3.clone(this._controls.target)})))),this._controls.applySettings(e)}assignViewer(e){if(e.closed)throw new v.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${e.id} not found.`);this.assignViewerInternal(e.id,e.canvas),this._controls.assignViewer(e.id,e.canvas),g(this,s,"f")&&g(this,o,"f")&&g(this,o,"f").removeDomEventListener(g(this,s,"f")),b(this,o,e.domEventEngine,"f"),b(this,s,g(this,o,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),"f"),this.boundingBox=g(this,a,"f").root.boundingBox.clone(),this._stateEngine.renderingEngines[e.id].boundingBoxCreated.then((()=>m(this,void 0,void 0,(function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))))}clone(){return new T(this.id,this.version)}calculateZoomTo(e,t=this.position,i=this.target){let r;if(r=e?e.clone():this._boundingBox.clone(),r.isEmpty())return{position:_.vec3.create(),target:_.vec3.create()};const n=2*r.boundingSphere.radius*this.zoomExtentsFactor,a=_.vec3.clone(r.boundingSphere.center);switch(g(this,c,"f")){case S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:return{position:_.vec3.fromValues(a[0],a[1],a[2]+n),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:return{position:_.vec3.fromValues(a[0],a[1],a[2]-n),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:return{position:_.vec3.fromValues(a[0]+n,a[1],a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:return{position:_.vec3.fromValues(a[0]-n,a[1],a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:return{position:_.vec3.fromValues(a[0],a[1]+n,a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:return{position:_.vec3.fromValues(a[0],a[1]-n,a[2]),target:_.vec3.clone(a)};default:return{position:_.vec3.fromValues(a[0],a[1],a[2]+n),target:_.vec3.clone(a)}}}project(e){const t=_.mat4.targetTo(_.mat4.create(),this.position,this.target,this.up),i=_.mat4.ortho(_.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return _.vec3.transformMat4(e,e,_.mat4.invert(t,t)),_.vec3.transformMat4(e,e,i),_.vec2.fromValues(e[0],e[1])}unproject(e,t=this.position,i=this.target){const r=_.mat4.targetTo(_.mat4.create(),this.position,this.target,this.up),n=_.mat4.ortho(_.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return _.vec3.transformMat4(e,e,_.mat4.invert(n,n)),_.vec3.transformMat4(e,e,r),_.vec3.clone(e)}}t.OrthographicCamera=T,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap},8926:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},f=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCamera=void 0;const p=i(8877),m=i(887),g=i(5174),b=i(3858),v=i(4976),_=i(3164),y=i(9599);class A extends _.AbstractCamera{constructor(e,t){super(e,v.CAMERA_TYPE.PERSPECTIVE,t),r.set(this,p.Converter.instance),n.set(this,p.Logger.instance),a.set(this,b.Tree.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,60),u.set(this,{}),this._controls=new y.PerspectiveCameraControls(this,!0)}get aspect(){return d(this,l,"f")}set aspect(e){f(this,l,e,"f")}get controls(){return this._controls}set controls(e){this._controls=e}get fov(){return d(this,c,"f")}set fov(e){f(this,c,e,"f")}get threeJsObject(){return d(this,u,"f")}applySettings(e){const t=e.camera.cameras[this.id];if(t){this.name=t.name,this.autoAdjust=t.autoAdjust,this.cameraMovementDuration=t.cameraMovementDuration,this.enableCameraControls=t.enableCameraControls,this.revertAtMouseUp=t.revertAtMouseUp,this.revertAtMouseUpDuration=t.revertAtMouseUpDuration,this.zoomExtentsFactor=t.zoomExtentsFactor;let e=d(this,r,"f").toVec3(t.position),i=d(this,r,"f").toVec3(t.target);this.defaultPosition=m.vec3.clone(e),this.defaultTarget=m.vec3.clone(i),this.position=e,this.target=i,this.fov=t.fov}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.renderingEngines[this._viewportId].boundingBoxCreated.then((()=>h(this,void 0,void 0,(function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=m.vec3.clone(this._controls.position),this.defaultTarget=m.vec3.clone(this._controls.target)})))),this._controls.applySettings(e)}assignViewer(e){if(e.closed)throw new p.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${e.id} not found.`);this.assignViewerInternal(e.id,e.canvas),this._controls.assignViewer(e.id,e.canvas),d(this,s,"f")&&d(this,o,"f")&&d(this,o,"f").removeDomEventListener(d(this,s,"f")),f(this,o,e.domEventEngine,"f"),f(this,s,d(this,o,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),"f"),this.boundingBox=d(this,a,"f").root.boundingBox.clone(),this._stateEngine.renderingEngines[e.id].boundingBoxCreated.then((()=>h(this,void 0,void 0,(function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))))}clone(){return new A(this.id,this.version)}calculateZoomTo(e,t=this.position,i=this.target){let r;if(r=e?e.clone():this._boundingBox.clone(),r.isEmpty())return{position:m.vec3.create(),target:m.vec3.create()};const n=t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2];let a=m.vec3.fromValues((r.max[0]+r.min[0])/2,(r.max[1]+r.min[1])/2,(r.max[2]+r.min[2])/2);t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]&&(t=m.vec3.fromValues(a[0],a[1]-7.5,a[2]+5));const s=m.vec3.subtract(m.vec3.create(),r.max,a);m.vec3.multiply(s,s,n?m.vec3.fromValues(2,2,2):m.vec3.fromValues(this.zoomExtentsFactor,this.zoomExtentsFactor,this.zoomExtentsFactor)),r=new g.Box(m.vec3.subtract(m.vec3.create(),a,s),m.vec3.add(m.vec3.create(),a,s));const o=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),a,t));let l=m.vec3.normalize(m.vec3.create(),m.vec3.cross(m.vec3.create(),m.vec3.fromValues(0,0,1),o)),c=m.vec3.normalize(m.vec3.create(),m.vec3.cross(m.vec3.create(),l,o)),u=m.vec3.add(m.vec3.create(),a,m.vec3.multiply(m.vec3.create(),o,m.vec3.fromValues(-1e-8,-1e-8,-1e-8))),h=[];h.push(m.vec3.fromValues(r.min[0],r.min[1],r.min[2])),h.push(m.vec3.fromValues(r.min[0],r.min[1],r.max[2])),h.push(m.vec3.fromValues(r.min[0],r.max[1],r.min[2])),h.push(m.vec3.fromValues(r.min[0],r.max[1],r.max[2])),h.push(m.vec3.fromValues(r.max[0],r.min[1],r.min[2])),h.push(m.vec3.fromValues(r.max[0],r.min[1],r.max[2])),h.push(m.vec3.fromValues(r.max[0],r.max[1],r.min[2])),h.push(m.vec3.fromValues(r.max[0],r.max[1],r.max[2]));let d=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),l,this.fov/2*(Math.PI/180)))),f=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),l,-this.fov/2*(Math.PI/180))));const p=n?1.5:this.aspect||1.5;let b=2*Math.atan(Math.tan(this.fov*Math.PI/180/2)*p),v=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),c,b/2))),_=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),c,-b/2))),y=new g.Plane(m.vec3.clone(l),0);y.setFromNormalAndCoplanarPoint(m.vec3.clone(l),m.vec3.clone(a));let A=new g.Plane(m.vec3.fromValues(0,0,1),0);A.setFromNormalAndCoplanarPoint(m.vec3.clone(c),m.vec3.clone(a));let E=0;for(let e=0;e<h.length;e++){let t=y.clampPoint(h[e]),i=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),t,u));if(m.vec3.dot(o,d)>m.vec3.dot(o,i)){const e=m.vec3.multiply(m.vec3.create(),m.vec3.dot(d,i)>m.vec3.dot(f,i)?d:f,m.vec3.fromValues(-1,-1,-1)),r=A.intersect(t,e);if(r){const i=m.vec3.add(m.vec3.create(),m.vec3.multiply(m.vec3.create(),e,m.vec3.fromValues(r,r,r)),t);E=Math.max(E,m.vec3.distance(a,i))}}if(t=A.clampPoint(h[e]),i=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),t,u)),m.vec3.dot(o,v)>m.vec3.dot(o,i)){const e=m.vec3.multiply(m.vec3.create(),m.vec3.dot(v,i)>m.vec3.dot(_,i)?v:_,m.vec3.fromValues(-1,-1,-1)),r=y.intersect(t,e);if(r){const i=m.vec3.add(m.vec3.create(),m.vec3.multiply(m.vec3.create(),e,m.vec3.fromValues(r,r,r)),t);E=Math.max(E,m.vec3.distance(a,i))}}}return u=m.vec3.add(m.vec3.create(),a,m.vec3.multiply(m.vec3.create(),o,m.vec3.fromValues(-E,-E,-E))),{position:u,target:a}}project(e,t=this.position,i=this.target){const r=m.mat4.targetTo(m.mat4.create(),t,i,m.vec3.fromValues(0,0,1)),n=this.aspect||1.5,a=m.mat4.perspective(m.mat4.create(),this.fov/(180/Math.PI),n,this.near,this.far);return m.vec3.transformMat4(e,e,m.mat4.invert(r,r)),m.vec3.transformMat4(e,e,a),m.vec2.fromValues(e[0],e[1])}unproject(e,t=this.position,i=this.target){const r=m.mat4.targetTo(m.mat4.create(),t,i,m.vec3.fromValues(0,0,1)),n=this.aspect||1.5,a=m.mat4.perspective(m.mat4.create(),this.fov/(180/Math.PI),n,this.near,this.far);return m.vec3.transformMat4(e,e,m.mat4.invert(a,a)),m.vec3.transformMat4(e,e,r),m.vec3.clone(e)}}t.PerspectiveCamera=A,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap},7938:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCameraControls=void 0;const r=i(887),n=i(8877),a=i(1179);t.AbstractCameraControls=class{constructor(e,t,i){this._camera=e,this._enabled=t,this._eventEngine=n.EventEngine.instance,this._manualInteraction=!1,this._moving=!1,this._movingDuration=0,this._nonmanualInteraction=!1,this._position=r.vec3.create(),this._target=r.vec3.create(),this._cameraInterpolationManager=new a.CameraInterpolationManager(this._camera,this),this._manualInteractionTransformations={position:[],target:[]},this._nonmanualInteractionTransformations={position:[],target:[]}}assignViewer(e,t){this._canvas=t,this._viewportId=e}get cameraControlsEventDistribution(){return this._cameraControlsEventDistribution}get canvas(){return this._canvas}set canvas(e){this._canvas=e}get enabled(){return this._enabled}set enabled(e){e||(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[]},this._nonmanualInteraction=!1,this._nonmanualInteractionTransformations={position:[],target:[]},this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()),this._enabled=e}get camera(){return this._camera}set camera(e){this._camera=e}get position(){return this._position}set position(e){this._position=e}get target(){return this._target}set target(e){this._target=e}animate(e,t){return t&&0===t.duration?(this._position=e[e.length-1].position,this._target=e[e.length-1].target,new Promise((e=>e(!0)))):(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[]},this._cameraInterpolationManager.interpolate(e,t))}applyPositionVector(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({vector:e}))}applyTargetVector(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({vector:e}))}applyPositionMatrix(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({matrix:e}))}applyTargetMatrix(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({matrix:e}))}applyUpMatrix(e,t){throw new Error("Method not implemented.")}getPositionWithManualUpdates(){let e=r.vec3.clone(this._position);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.position.length-1;t>=0;t--)e=this._manualInteractionTransformations.position[t].matrix?r.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[t].matrix):r.vec3.add(e,e,this._manualInteractionTransformations.position[t].vector);return e}getTargetWithManualUpdates(){let e=r.vec3.clone(this._target);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.target.length-1;t>=0;t--)e=this._manualInteractionTransformations.target[t].matrix?r.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[t].matrix):r.vec3.add(e,e,this._manualInteractionTransformations.target[t].vector);return e}getPositionWithUpdates(){return this.getPosition()}getTargetWithUpdates(){return this.getTarget()}isMoving(){return this._manualInteraction||this._nonmanualInteraction}isWithinRestrictions(e,t){return this._cameraLogic.isWithinRestrictions(e,t)}reset(){this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()}update(e){if(!this._enabled)return{position:r.vec3.clone(this._position),target:r.vec3.clone(this._target)};!0===this._manualInteraction&&this._cameraInterpolationManager.active()&&this._cameraInterpolationManager.stop();let{position:t,target:i}=this._cameraLogic.restrict(this.getPosition(),this.getTarget());this._position=r.vec3.clone(t),this._target=r.vec3.clone(i),this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[]},this._nonmanualInteraction=this._cameraInterpolationManager.active(),this._nonmanualInteractionTransformations={position:[],target:[]},this._cameraLogic.update(e,this._nonmanualInteraction);const a=this._moving,s={position:r.vec3.clone(this._position),target:r.vec3.clone(this._target)};switch(this._movingDuration+=e,this._moving=this._manualInteraction||this._nonmanualInteraction,!0){case a!==this._moving&&!0===this._moving:this._eventEngine.emitEvent(n.EVENTTYPE.CAMERA.CAMERA_START,{viewportId:this._viewportId,cameraId:this.camera.id});break;case a!==this._moving&&!1===this._moving:this._eventEngine.emitEvent(n.EVENTTYPE.CAMERA.CAMERA_END,{viewportId:this._viewportId,cameraId:this.camera.id});break;default:this._eventEngine.emitEvent(n.EVENTTYPE.CAMERA.CAMERA_MOVE,{viewportId:this._viewportId,cameraId:this.camera.id})}return this._moving||(this._movingDuration=0),s}getPosition(){let e=r.vec3.clone(this._position);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.position.length-1;t>=0;t--)e=this._manualInteractionTransformations.position[t].matrix?r.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[t].matrix):r.vec3.add(e,e,this._manualInteractionTransformations.position[t].vector);else if(this._nonmanualInteraction)for(let t=this._nonmanualInteractionTransformations.position.length-1;t>=0;t--)e=this._nonmanualInteractionTransformations.position[t].matrix?r.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.position[t].matrix):r.vec3.add(e,e,this._nonmanualInteractionTransformations.position[t].vector);return e}getTarget(){let e=r.vec3.clone(this._target);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.target.length-1;t>=0;t--)e=this._manualInteractionTransformations.target[t].matrix?r.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[t].matrix):r.vec3.add(e,e,this._manualInteractionTransformations.target[t].vector);else if(this._nonmanualInteraction)for(let t=this._nonmanualInteractionTransformations.target.length-1;t>=0;t--)e=this._nonmanualInteractionTransformations.target[t].matrix?r.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.target[t].matrix):r.vec3.add(e,e,this._nonmanualInteractionTransformations.target[t].vector);return e}}},8210:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraControls=void 0;const r=i(8877),n=i(1990),a=i(7938),s=i(704),o=i(3726);class l extends a.AbstractCameraControls{constructor(e,t){super(e,t,n.CAMERA_TYPE.ORTHOGRAPHIC),this._damping=.1,this._enableKeyPan=!1,this._enablePan=!0,this._enableZoom=!0,this._input={keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},this._keyPanSpeed=.5,this._movementSmoothness=.5,this._panSpeed=.5,this._zoomSpeed=.5,this._stateEngine=r.StateEngine.instance,this._cameraLogic=new o.CameraControlsLogic(this),this._cameraControlsEventDistribution=new s.CameraControlsEventDistribution(this,this._cameraLogic)}applySettings(e){const t=e.camera.cameras[this.camera.id];if(!t)return;this.reset();const i=t.controls;this.damping=i.damping,this.enableKeyPan=i.enableKeyPan,this.enablePan=i.enablePan,this.enableZoom=i.enableZoom,this.input=i.input,this.keyPanSpeed=i.keyPanSpeed,this.movementSmoothness=i.movementSmoothness,this.panSpeed=i.panSpeed,this.zoomSpeed=i.zoomSpeed}get damping(){return this._damping}set damping(e){this._damping=e}get enableKeyPan(){return this._enableKeyPan}set enableKeyPan(e){this._enableKeyPan=e}get enablePan(){return this._enablePan}set enablePan(e){this._enablePan=e}get enableZoom(){return this._enableZoom}set enableZoom(e){this._enableZoom=e}get input(){return this._input}set input(e){this._input=e}get keyPanSpeed(){return this._keyPanSpeed}set keyPanSpeed(e){this._keyPanSpeed=e}get movementSmoothness(){return this._movementSmoothness}set movementSmoothness(e){this._movementSmoothness=e}get panSpeed(){return this._panSpeed}set panSpeed(e){this._panSpeed=e}get zoomSpeed(){return this._zoomSpeed}set zoomSpeed(e){this._zoomSpeed=e}}t.OrthographicCameraControls=l},9599:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCameraControls=void 0;const r=i(8877),n=i(887),a=i(1990),s=i(7938),o=i(5173),l=i(3118);class c extends s.AbstractCameraControls{constructor(e,t){super(e,t,a.CAMERA_TYPE.PERSPECTIVE),this._autoRotationSpeed=0,this._cubePositionRestriction={min:n.vec3.fromValues(-1/0,-1/0,-1/0),max:n.vec3.fromValues(1/0,1/0,1/0)},this._cubeTargetRestriction={min:n.vec3.fromValues(-1/0,-1/0,-1/0),max:n.vec3.fromValues(1/0,1/0,1/0)},this._damping=.1,this._enableAutoRotation=!1,this._enableKeyPan=!1,this._enablePan=!0,this._enableRotation=!0,this._enableZoom=!0,this._input={keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},this._keyPanSpeed=.5,this._movementSmoothness=.5,this._panSpeed=.5,this._rotationRestriction={minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},this._rotationSpeed=.5,this._spherePositionRestriction={center:n.vec3.create(),radius:1/0},this._sphereTargetRestriction={center:n.vec3.create(),radius:1/0},this._zoomRestriction={minDistance:0,maxDistance:1/0},this._zoomSpeed=.5,this._converter=r.Converter.instance,this._stateEngine=r.StateEngine.instance,this._cameraLogic=new l.CameraControlsLogic(this),this._cameraControlsEventDistribution=new o.CameraControlsEventDistribution(this,this._cameraLogic)}applySettings(e){const t=e.camera.cameras[this.camera.id];if(!t)return;this.reset();const i=t.controls;this.autoRotationSpeed=i.autoRotationSpeed,this.damping=i.damping,this.enableAutoRotation=i.enableAutoRotation,this.enableKeyPan=i.enableKeyPan,this.enablePan=i.enablePan,this.enableRotation=i.enableRotation,this.enableZoom=i.enableZoom,this.input=i.input,this.keyPanSpeed=i.keyPanSpeed,this.movementSmoothness=i.movementSmoothness,this.rotationSpeed=i.rotationSpeed,this.panSpeed=i.panSpeed,this.zoomSpeed=i.zoomSpeed,null===i.restrictions.position.cube.min.x&&(i.restrictions.position.cube.min.x=-1/0),null===i.restrictions.position.cube.min.y&&(i.restrictions.position.cube.min.y=-1/0),null===i.restrictions.position.cube.min.z&&(i.restrictions.position.cube.min.z=-1/0),null===i.restrictions.position.cube.max.x&&(i.restrictions.position.cube.max.x=1/0),null===i.restrictions.position.cube.max.y&&(i.restrictions.position.cube.max.y=1/0),null===i.restrictions.position.cube.max.z&&(i.restrictions.position.cube.max.z=1/0),null===i.restrictions.position.sphere.radius&&(i.restrictions.position.sphere.radius=1/0),null===i.restrictions.target.cube.min.x&&(i.restrictions.target.cube.min.x=-1/0),null===i.restrictions.target.cube.min.y&&(i.restrictions.target.cube.min.y=-1/0),null===i.restrictions.target.cube.min.z&&(i.restrictions.target.cube.min.z=-1/0),null===i.restrictions.target.cube.max.x&&(i.restrictions.target.cube.max.x=1/0),null===i.restrictions.target.cube.max.y&&(i.restrictions.target.cube.max.y=1/0),null===i.restrictions.target.cube.max.z&&(i.restrictions.target.cube.max.z=1/0),null===i.restrictions.target.sphere.radius&&(i.restrictions.target.sphere.radius=1/0),null===i.restrictions.rotation.minAzimuthAngle&&(i.restrictions.rotation.minAzimuthAngle=-1/0),null===i.restrictions.rotation.maxAzimuthAngle&&(i.restrictions.rotation.maxAzimuthAngle=1/0),null===i.restrictions.zoom.maxDistance&&(i.restrictions.zoom.maxDistance=1/0),this.cubePositionRestriction={min:this._converter.toVec3(i.restrictions.position.cube.min),max:this._converter.toVec3(i.restrictions.position.cube.max)},this.spherePositionRestriction={center:this._converter.toVec3(i.restrictions.position.sphere.center),radius:i.restrictions.position.sphere.radius},this.cubeTargetRestriction={min:this._converter.toVec3(i.restrictions.target.cube.min),max:this._converter.toVec3(i.restrictions.target.cube.max)},this.sphereTargetRestriction={center:this._converter.toVec3(i.restrictions.target.sphere.center),radius:i.restrictions.target.sphere.radius},this.rotationRestriction=i.restrictions.rotation,this.zoomRestriction=i.restrictions.zoom}get autoRotationSpeed(){return this._autoRotationSpeed}set autoRotationSpeed(e){this._autoRotationSpeed=e}get cubePositionRestriction(){return this._cubePositionRestriction}set cubePositionRestriction(e){this._cubePositionRestriction=e}get cubeTargetRestriction(){return this._cubeTargetRestriction}set cubeTargetRestriction(e){this._cubeTargetRestriction=e}get damping(){return this._damping}set damping(e){this._damping=e}get enableAutoRotation(){return this._enableAutoRotation}set enableAutoRotation(e){this._enableAutoRotation=e}get enableKeyPan(){return this._enableKeyPan}set enableKeyPan(e){this._enableKeyPan=e}get enablePan(){return this._enablePan}set enablePan(e){this._enablePan=e}get enableRotation(){return this._enableRotation}set enableRotation(e){this._enableRotation=e}get enableZoom(){return this._enableZoom}set enableZoom(e){this._enableZoom=e}get input(){return this._input}set input(e){this._input=e}get keyPanSpeed(){return this._keyPanSpeed}set keyPanSpeed(e){this._keyPanSpeed=e}get movementSmoothness(){return this._movementSmoothness}set movementSmoothness(e){this._movementSmoothness=e}get panSpeed(){return this._panSpeed}set panSpeed(e){this._panSpeed=e}get rotationRestriction(){return this._rotationRestriction}set rotationRestriction(e){this._rotationRestriction=e}get rotationSpeed(){return this._rotationSpeed}set rotationSpeed(e){this._rotationSpeed=e}get spherePositionRestriction(){return this._spherePositionRestriction}set spherePositionRestriction(e){this._spherePositionRestriction=e}get sphereTargetRestriction(){return this._sphereTargetRestriction}set sphereTargetRestriction(e){this._sphereTargetRestriction=e}get zoomRestriction(){return this._zoomRestriction}set zoomRestriction(e){this._zoomRestriction=e}get zoomSpeed(){return this._zoomSpeed}set zoomSpeed(e){this._zoomSpeed=e}}t.PerspectiveCameraControls=c},704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsEventDistribution=void 0,t.CameraControlsEventDistribution=class{constructor(e,t){this._controls=e,this._cameraLogic=t,this._active={zoom:!1,pan:!1},this._activeEvents=!0}activateCameraEvents(){this._activeEvents=!0}deactivateCameraEvents(){this._activeEvents=!1}onDown(e){if(!1===this._controls.camera.active)return;let{x:t,y:i}=this.convertInput(e),r=window.TouchEvent&&e instanceof TouchEvent?e.touches.length:e.button,n=window.TouchEvent&&e instanceof TouchEvent?this._controls.input.touch:this._controls.input.mouse;if(r===n.pan&&this._controls.enablePan&&(this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._active.pan=!0,this._active.zoom=!1),r===n.zoom&&this._controls.enableZoom){let r=t,n=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&(r=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),n=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(r,n,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent),this._active.pan=!1,this._active.zoom=!0}}onKey(e){if(!1!==this._controls.camera.active&&this._controls.enableKeyPan)switch(e.keyCode){case this._controls.input.keys.up:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.down:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*-this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.left:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.right:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*-this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation()}}onKeyDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onKey(e)}onMouseDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onMouseMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onMouseEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onMouseUp(e){this._controls.camera.active}onMouseOut(e){this._controls.camera.active}onMouseWheel(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onWheel(e)}onMove(e){if(!1===this._controls.camera.active)return;let{x:t,y:i}=this.convertInput(e);if(this._controls.enablePan&&this._active.pan&&this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._controls.enableZoom&&this._active.zoom){let r=t,n=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&(r=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),n=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(r,n,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent)}}onTouchEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onTouchMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onTouchStart(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onTouchCancel(e){this._controls.camera.active}onTouchUp(e){this._controls.camera.active}onUp(e){!1!==this._controls.camera.active&&(this._active.zoom=!1,this._active.pan=!1)}onWheel(e){if(!1===this._controls.camera.active)return;if(!this._controls.enableZoom)return;let t=0;void 0!==e.deltaY?t=-e.deltaY:void 0!==e.detail&&(t=-e.detail),Math.sign(t)>0?(this._cameraLogic.zoom(0,0,!1,!1),this._cameraLogic.zoom(1,0,!0,!1)):(this._cameraLogic.zoom(1,0,!1,!1),this._cameraLogic.zoom(0,0,!0,!1))}reset(){this._active={zoom:!1,pan:!1}}convertInput(e){let t=window.innerWidth/window.innerHeight;return e instanceof MouseEvent?{x:e.clientX/window.innerWidth*t,y:e.clientY/window.innerHeight}:{x:e.touches[0].pageX/window.innerWidth*t,y:e.touches[0].pageY/window.innerHeight}}}},3726:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsLogic=void 0;const r=i(887);t.CameraControlsLogic=class{constructor(e){this._controls=e,this._adjustedSettings={damping:()=>this._controls.damping*this._settingsAdjustments.damping,movementSmoothness:()=>this._controls.movementSmoothness*this._settingsAdjustments.movementSmoothness,panSpeed:()=>this._controls.panSpeed*this._settingsAdjustments.panSpeed,zoomSpeed:()=>this._controls.zoomSpeed*this._settingsAdjustments.zoomSpeed},this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:r.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=r.vec2.create(),this._panEnd=r.vec2.create(),this._panStart=r.vec2.create(),this._settingsAdjustments={damping:1,movementSmoothness:1,panSpeed:2,zoomSpeed:.025},this._touchAdjustments={damping:1,movementSmoothness:1,panSpeed:2,zoomSpeed:50}}isWithinRestrictions(e,t){return!0}pan(e,t,i,n){if(n&&(e/=window.devicePixelRatio,t/=window.devicePixelRatio),i){if(this._panEnd=r.vec2.fromValues(e,t),r.vec2.sub(this._panDelta,this._panEnd,this._panStart),0===this._panDelta[0]&&0===this._panDelta[1])return;r.vec2.copy(this._panStart,this._panEnd);const i=this._adjustedSettings.panSpeed()*(n?this._touchAdjustments.panSpeed:1);let a=this.panDeltaToOffset(r.vec2.mul(r.vec2.create(),this._panDelta,r.vec2.fromValues(i,i)));this._damping.pan.duration>0&&(a[0]<0?a[0]=Math.min(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]):a[0]=Math.max(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]),a[1]<0?a[1]=Math.min(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]):a[1]=Math.max(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]),a[2]<0?a[2]=Math.min(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]):a[2]=Math.max(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]));let s=1-Math.max(.01,Math.min(.99,this._adjustedSettings.damping())),o=(Math.log(1/Math.abs(a[0]))-5*Math.log(10))/Math.log(s),l=(Math.log(1/Math.abs(a[1]))-5*Math.log(10))/Math.log(s),c=(Math.log(1/Math.abs(a[2]))-5*Math.log(10))/Math.log(s);this._damping.pan.time=0,this._damping.pan.duration=16.6666*Math.max(o,Math.max(l,c)),this._damping.pan.offset=r.vec3.clone(a),this._damping.rotation.duration=0,this._damping.zoom.duration=0,this._controls.applyTargetVector(a,!0),this._controls.applyPositionVector(a,!0)}else this._panStart=r.vec2.fromValues(e,t)}reset(){this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:r.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=r.vec2.create(),this._panEnd=r.vec2.create(),this._panStart=r.vec2.create()}restrict(e,t){return{position:e,target:t}}update(e,t){!0===t&&(this._damping.zoom.duration=0,this._damping.pan.duration=0);let i=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping()));if(this._damping.pan.duration>0)if(this._damping.pan.time+e>this._damping.pan.duration)this._damping.pan.time=this._damping.pan.duration,this._damping.pan.duration=0;else{this._damping.pan.time+=e;let t=this._damping.pan.time/16.6666,n=Math.pow(i,t),a=r.vec3.multiply(r.vec3.create(),this._damping.pan.offset,r.vec3.fromValues(n,n,n));this._controls.applyTargetVector(a),this._controls.applyPositionVector(a)}else this._damping.pan.time=0;if(this._damping.zoom.duration>0)if(this._damping.zoom.time+e>this._damping.zoom.duration)this._damping.zoom.time=this._damping.zoom.duration,this._damping.zoom.duration=0;else{this._damping.zoom.time+=e;let t=this._damping.zoom.time/16.6666,n=this._damping.zoom.delta*Math.pow(i,t),a=r.vec3.distance(this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())*(1-n),s=r.vec3.create(),o=r.vec3.create();r.vec3.normalize(s,r.vec3.subtract(s,this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())),r.vec3.add(o,this._controls.getPositionWithManualUpdates(),r.vec3.multiply(o,s,r.vec3.fromValues(a,a,a))),r.vec3.subtract(o,o,this._controls.getTargetWithManualUpdates()),this._controls.applyTargetVector(o,!0)}else this._damping.zoom.time=0}zoom(e,t,i,n){var a=Math.sqrt(e*e+t*t);if(n&&(a/=window.devicePixelRatio),i){this._dollyEnd=a,this._dollyDelta=this._dollyEnd-this._dollyStart,this._dollyStart=this._dollyEnd,this._damping.zoom.duration>0&&(this._dollyDelta<0?this._dollyDelta=Math.min(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta):this._dollyDelta=Math.max(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta));let e=this._dollyDelta*this._adjustedSettings.zoomSpeed()*(n?this._touchAdjustments.zoomSpeed:1),t=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),i=(Math.log(1/Math.abs(this._dollyDelta))-5*Math.log(10))/Math.log(t);this._damping.zoom.time=0,this._damping.zoom.duration=16.6666*i,this._damping.zoom.delta=e,this._damping.pan.duration=0;let s=r.vec3.distance(this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())*(1-e),o=r.vec3.create(),l=r.vec3.create();r.vec3.normalize(o,r.vec3.subtract(o,this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())),r.vec3.add(l,this._controls.getPositionWithManualUpdates(),r.vec3.multiply(l,o,r.vec3.fromValues(s,s,s))),r.vec3.subtract(l,l,this._controls.getTargetWithManualUpdates()),this._controls.applyTargetVector(l,!0)}else this._dollyStart=a}panDeltaToOffset(e){let t=r.vec3.create(),i=r.vec3.create();r.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates());const n=this._controls.camera,a=r.mat4.targetTo(r.mat4.create(),n.position,n.target,n.up),s=r.vec3.fromValues(a[0],a[1],a[2]),o=-e[0]*(n.right-n.left)*.5/1;r.vec3.multiply(s,s,r.vec3.fromValues(o,o,o)),r.vec3.add(i,i,s);const l=r.vec3.fromValues(a[4],a[5],a[6]),c=e[1]*(n.right-n.left)*.5/1;return r.vec3.multiply(l,l,r.vec3.fromValues(c,c,c)),r.vec3.add(i,i,l),r.vec3.clone(i)}}},5173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsEventDistribution=void 0,t.CameraControlsEventDistribution=class{constructor(e,t){this._controls=e,this._cameraLogic=t,this._active={rotation:!1,zoom:!1,pan:!1},this._activeEvents=!0}activateCameraEvents(){this._activeEvents=!0}deactivateCameraEvents(){this._activeEvents=!1,this.reset()}onDown(e){if(!1===this._controls.camera.active)return;let{x:t,y:i}=this.convertInput(e),r=window.TouchEvent&&e instanceof TouchEvent?e.touches.length:e.button,n=window.TouchEvent&&e instanceof TouchEvent?this._controls.input.touch:this._controls.input.mouse;if(r===n.rotate&&this._controls.enableRotation&&(this._cameraLogic.rotate(t,i,this._active.rotation,window.TouchEvent&&e instanceof TouchEvent),this._active.rotation=!0,this._active.pan=!1,this._active.zoom=!1),r===n.pan&&this._controls.enablePan&&(this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._active.rotation=!1,this._active.pan=!0,this._active.zoom=!1),r===n.zoom&&this._controls.enableZoom){let r=t,n=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&(r=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),n=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(r,n,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent),this._active.rotation=!1,this._active.pan=!1,this._active.zoom=!0}}onKey(e){if(!1!==this._controls.camera.active&&this._controls.enableKeyPan)switch(e.keyCode){case this._controls.input.keys.up:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.down:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*-this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.left:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.right:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*-this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation()}}onKeyDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onKey(e)}onMouseDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onMouseMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onMouseEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onMouseWheel(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onWheel(e)}onMouseUp(e){this._controls.camera.active}onMouseOut(e){this._controls.camera.active}onMove(e){if(!1===this._controls.camera.active)return;let{x:t,y:i}=this.convertInput(e);if(this._controls.enableRotation&&this._active.rotation&&this._cameraLogic.rotate(t,i,this._active.rotation,window.TouchEvent&&e instanceof TouchEvent),this._controls.enablePan&&this._active.pan&&this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._controls.enableZoom&&this._active.zoom){let r=t,n=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&(r=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),n=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(r,n,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent)}}onTouchEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onTouchMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onTouchStart(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onTouchCancel(e){this._controls.camera.active}onTouchUp(e){this._controls.camera.active}onUp(e){!1!==this._controls.camera.active&&(this._active.rotation=!1,this._active.zoom=!1,this._active.pan=!1)}onWheel(e){if(!1===this._controls.camera.active)return;if(!this._activeEvents)return;if(!this._controls.enableZoom)return;let t=0;void 0!==e.deltaY?t=-e.deltaY:void 0!==e.detail&&(t=-e.detail),Math.sign(t)>0?(this._cameraLogic.zoom(0,0,!1,!1),this._cameraLogic.zoom(1,0,!0,!1)):(this._cameraLogic.zoom(1,0,!1,!1),this._cameraLogic.zoom(0,0,!0,!1))}reset(){this._active={rotation:!1,zoom:!1,pan:!1}}convertInput(e){let t=window.innerWidth/window.innerHeight;return e instanceof MouseEvent?{x:e.clientX/window.innerWidth*t,y:e.clientY/window.innerHeight}:{x:e.touches[0].pageX/window.innerWidth*t,y:e.touches[0].pageY/window.innerHeight}}}},3118:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsLogic=void 0;const r=i(887),n=i(5174);t.CameraControlsLogic=class{constructor(e){this._controls=e,this._adjustedSettings={autoRotationSpeed:()=>this._controls.autoRotationSpeed*this._settingsAdjustments.autoRotationSpeed,damping:()=>this._controls.damping*this._settingsAdjustments.damping,movementSmoothness:()=>this._controls.movementSmoothness*this._settingsAdjustments.movementSmoothness,panSpeed:()=>this._controls.panSpeed*this._settingsAdjustments.panSpeed,rotationSpeed:()=>this._controls.rotationSpeed*this._settingsAdjustments.rotationSpeed,zoomSpeed:()=>this._controls.zoomSpeed*this._settingsAdjustments.zoomSpeed},this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:r.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=r.vec2.create(),this._panEnd=r.vec2.create(),this._panStart=r.vec2.create(),this._rotateDelta=r.vec2.create(),this._rotateEnd=r.vec2.create(),this._rotateStart=r.vec2.create(),this._settingsAdjustments={autoRotationSpeed:2*Math.PI/60/60,damping:1,movementSmoothness:1,panSpeed:2,rotationSpeed:Math.PI,zoomSpeed:.025},this._touchAdjustments={autoRotationSpeed:1,damping:1,movementSmoothness:1,panSpeed:1.5,rotationSpeed:2,zoomSpeed:100},this._quat=r.quat.fromValues(-Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4)),this._quatInverse=r.quat.fromValues(Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4))}isWithinRestrictions(e,t){let i=new n.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),a=new n.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),s=new n.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),o=new n.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);if(!i.containsPoint(e)||!a.containsPoint(e))return!1;if(!s.containsPoint(t)||!o.containsPoint(t))return!1;let l=r.vec3.distance(e,t);if(l>this._controls.zoomRestriction.maxDistance||l<this._controls.zoomRestriction.minDistance)return!1;let c=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),u=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),h=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),d=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(h!==-1/0||d!==1/0||0!==c||180!==u){let i=r.vec3.sub(r.vec3.create(),e,t);r.vec3.transformQuat(i,i,this._quat);const a=(new n.Spherical).fromVec3(i);if(a.theta<h||a.theta>d||a.phi<c||a.phi>u)return!1}return!0}pan(e,t,i,n){if(n&&(e/=window.devicePixelRatio,t/=window.devicePixelRatio),i){if(this._panEnd=r.vec2.fromValues(e,t),r.vec2.sub(this._panDelta,this._panEnd,this._panStart),0===this._panDelta[0]&&0===this._panDelta[1])return;r.vec2.copy(this._panStart,this._panEnd);const i=this._adjustedSettings.panSpeed()*(n?this._touchAdjustments.panSpeed:1);let a=this.panDeltaToOffset(r.vec2.mul(r.vec2.create(),this._panDelta,r.vec2.fromValues(i,i)));this._damping.pan.duration>0&&(a[0]<0?a[0]=Math.min(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]):a[0]=Math.max(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]),a[1]<0?a[1]=Math.min(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]):a[1]=Math.max(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]),a[2]<0?a[2]=Math.min(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]):a[2]=Math.max(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]));let s=1-Math.max(.01,Math.min(.99,this._adjustedSettings.damping())),o=(Math.log(1/Math.abs(a[0]))-5*Math.log(10))/Math.log(s),l=(Math.log(1/Math.abs(a[1]))-5*Math.log(10))/Math.log(s),c=(Math.log(1/Math.abs(a[2]))-5*Math.log(10))/Math.log(s);this._damping.pan.time=0,this._damping.pan.duration=16.6666*Math.max(o,Math.max(l,c)),this._damping.pan.offset=r.vec3.clone(a),this._damping.rotation.duration=0,this._damping.zoom.duration=0,this._controls.applyTargetVector(a,!0),this._controls.applyPositionVector(a,!0)}else this._panStart=r.vec2.fromValues(e,t)}reset(){this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:r.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=r.vec2.create(),this._panEnd=r.vec2.create(),this._panStart=r.vec2.create(),this._rotateDelta=r.vec2.create(),this._rotateEnd=r.vec2.create(),this._rotateStart=r.vec2.create()}restrict(e,t){let i=new n.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),a=new n.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),s=new n.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),o=new n.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);i.containsPoint(e)||(e=i.clampPoint(e)),a.containsPoint(e)||(e=a.clampPoint(e)),s.containsPoint(t)||(t=s.clampPoint(t)),o.containsPoint(t)||(t=o.clampPoint(t));let l=r.vec3.distance(e,t);if(l>this._controls.zoomRestriction.maxDistance||l<this._controls.zoomRestriction.minDistance){let i=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),e,t)),n=Math.max(this._controls.zoomRestriction.minDistance,Math.min(this._controls.zoomRestriction.maxDistance,l));r.vec3.add(e,r.vec3.multiply(e,i,r.vec3.fromValues(n,n,n)),t)}let c=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),u=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),h=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),d=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(h!==-1/0||d!==1/0||0!==c||180!==u){let i=r.vec3.subtract(r.vec3.create(),e,t);r.vec3.transformQuat(i,i,this._quat);const a=(new n.Spherical).fromVec3(i);(a.theta<h||a.theta>d||a.phi<c||a.phi>u)&&(a.theta=Math.max(h,Math.min(d,a.theta)),a.phi=Math.max(c,Math.min(u,a.phi)),a.makeSafe(),i=a.toVec3(),r.vec3.transformQuat(i,i,this._quatInverse),r.vec3.add(e,i,t))}return{position:e,target:t}}rotate(e,t,i,a){if(a&&(e/=window.devicePixelRatio,t/=window.devicePixelRatio),i){if(this._rotateEnd=r.vec2.fromValues(e,t),r.vec2.subtract(this._rotateDelta,this._rotateEnd,this._rotateStart),r.vec2.copy(this._rotateStart,this._rotateEnd),!this._controls.canvas)return;if(0==this._controls.canvas.clientWidth||0==this._controls.canvas.clientHeight)return;const i=new n.Spherical;let s=this._adjustedSettings.rotationSpeed()*(a?this._touchAdjustments.rotationSpeed:1);if(i.theta-=s*this._rotateDelta[0],i.phi-=s*this._rotateDelta[1],this._damping.rotation.duration>0){let e=this._damping.rotation.theta-i.theta;i.theta+=e*this._adjustedSettings.movementSmoothness();let t=this._damping.rotation.phi-i.phi;i.phi+=t*this._adjustedSettings.movementSmoothness()}let o=this.rotationSphericalToOffset(i),l=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),c=(Math.log(1/Math.abs(i.theta))-5*Math.log(10))/Math.log(l),u=(Math.log(1/Math.abs(i.phi))-5*Math.log(10))/Math.log(l);this._damping.rotation.time=0,this._damping.rotation.duration=16.6666*Math.max(c,u),this._damping.rotation.theta=i.theta,this._damping.rotation.phi=i.phi,this._damping.pan.duration=0,this._damping.zoom.duration=0,this._controls.applyPositionVector(o,!0)}else this._rotateStart=r.vec2.fromValues(e,t)}update(e,t){!0===t&&(this._damping.zoom.duration=0,this._damping.pan.duration=0,this._damping.rotation.duration=0);let i=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping()));if(this._damping.pan.duration>0)if(this._damping.pan.time+e>this._damping.pan.duration)this._damping.pan.time=this._damping.pan.duration,this._damping.pan.duration=0;else{this._damping.pan.time+=e;let t=this._damping.pan.time/16.6666,n=Math.pow(i,t),a=r.vec3.multiply(r.vec3.create(),this._damping.pan.offset,r.vec3.fromValues(n,n,n));this._controls.applyTargetVector(a),this._controls.applyPositionVector(a)}else this._damping.pan.time=0;if(this._damping.rotation.duration>0)if(this._damping.rotation.time+e>this._damping.rotation.duration)this._damping.rotation.time=this._damping.rotation.duration,this._damping.rotation.duration=0;else{this._damping.rotation.time+=e;let t=this._damping.rotation.time/16.6666,r=new n.Spherical;r.theta=this._damping.rotation.theta*Math.pow(i,t),r.phi=this._damping.rotation.phi*Math.pow(i,t);let a=this.rotationSphericalToOffset(r);this._controls.applyPositionVector(a)}else this._damping.rotation.time=0;if(this._damping.zoom.duration>0)if(this._damping.zoom.time+e>this._damping.zoom.duration)this._damping.zoom.time=this._damping.zoom.duration,this._damping.zoom.duration=0;else{this._damping.zoom.time+=e;let t=this._damping.zoom.time/16.6666,r=this._damping.zoom.delta*Math.pow(i,t),n=this.zoomDistanceToOffset(r);this._controls.applyPositionVector(n)}else this._damping.zoom.time=0;if(this._controls.enableAutoRotation){let e=new n.Spherical(1,0,-this._adjustedSettings.autoRotationSpeed()),t=this.rotationSphericalToOffset(e);this._controls.applyPositionVector(t)}}zoom(e,t,i,r){var n=Math.sqrt(e*e+t*t);if(r&&(n/=window.devicePixelRatio),i){this._dollyEnd=n,this._dollyDelta=this._dollyEnd-this._dollyStart,this._dollyStart=this._dollyEnd,this._damping.zoom.duration>0&&(this._dollyDelta<0?this._dollyDelta=Math.min(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta):this._dollyDelta=Math.max(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta));let e=-this._dollyDelta*this._adjustedSettings.zoomSpeed()*(r?this._touchAdjustments.zoomSpeed:1),t=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),i=(Math.log(1/Math.abs(this._dollyDelta))-5*Math.log(10))/Math.log(t);this._damping.zoom.time=0,this._damping.zoom.duration=16.6666*i,this._damping.zoom.delta=e,this._damping.rotation.duration=0,this._damping.pan.duration=0;let a=this.zoomDistanceToOffset(e);this._controls.applyPositionVector(a,!0)}else this._dollyStart=n}panDeltaToOffset(e){let t=r.vec3.create(),i=r.vec3.create();r.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates());var n=r.vec3.length(t);n*=Math.tan(this._controls.camera.fov/2*Math.PI/180);const a=r.mat4.targetTo(r.mat4.create(),this._controls.camera.position,this._controls.camera.target,r.vec3.fromValues(0,0,1)),s=r.vec3.fromValues(a[0],a[1],a[2]),o=-2*e[0]*n;r.vec3.multiply(s,s,r.vec3.fromValues(o,o,o)),r.vec3.add(i,i,s);const l=r.vec3.fromValues(a[4],a[5],a[6]),c=2*e[1]*n;return r.vec3.multiply(l,l,r.vec3.fromValues(c,c,c)),r.vec3.add(i,i,l),r.vec3.clone(i)}rotationSphericalToOffset(e){let t=r.vec3.create();r.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),r.vec3.transformQuat(t,t,this._quat);let i=(new n.Spherical).fromVec3(t);i.theta+=e.theta,i.phi+=e.phi;let a=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),s=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);return i.theta>Math.PI?(i.theta-=2*Math.PI,a>i.theta&&(i.theta+=2*Math.PI)):i.theta<-Math.PI&&(i.theta+=2*Math.PI,s<i.theta&&(i.theta-=2*Math.PI)),i.makeSafe(),t=i.toVec3(),t=r.vec3.transformQuat(r.vec3.create(),t,this._quatInverse),t=r.vec3.add(r.vec3.create(),t,this._controls.getTargetWithManualUpdates()),t=r.vec3.subtract(r.vec3.create(),t,this._controls.getPositionWithManualUpdates()),r.vec3.clone(t)}zoomDistanceToOffset(e){let t=r.vec3.create();return r.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),r.vec3.multiply(r.vec3.create(),t,r.vec3.fromValues(e,e,e))}}},1179:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraInterpolationManager=void 0;const s=a(i(6194)),o=i(7198),l=i(6861),c=i(3042),u=i(365);t.CameraInterpolationManager=class{constructor(e,t){this._camera=e,this._cameraControls=t,this.TweenWrapper=class{constructor(e,t,i){this._properties={delta:0},this._tween=new s.Tween(this._properties),this._tween.easing(e.easing),this._tween.to({delta:1},e.duration),this._tween.onUpdate((e=>{t.onUpdate(e)})),this._tween.onStop((e=>{t.onStop&&t.onStop(e),this._resolve(!0)})),this._tween.onComplete((e=>{t.onComplete&&t.onComplete(e),i(),this._resolve(!0)}))}start(){return new Promise((e=>{this._resolve=e,this._tween.start()}))}stop(){this._tween.stop()}}}active(){return!!this._tween}interpolate(e,t={}){const i=[];for(let t=0;t<e.length;t++)i.push({position:e[t].position,target:e[t].target});this._tween&&(this._tween.stop(),this._tween=null);let r=this.optionsParser(t);return this._tween=new this.TweenWrapper(r,2===i.length?this.getCameraInterpolation(i[0],i[1],r.coordinates):new o.CameraMultipleInterpolation(this._camera,this._cameraControls,i,r.interpolation),(()=>{this._tween=null})),this._tween.start()}stop(){this._tween&&this._tween.stop(),this._tween=null}getCameraInterpolation(e,t,i){switch(i){case"linear":return new c.CameraLinearInterpolation(this._camera,this._cameraControls,e,t);case"spherical":return new l.CameraSphericalInterpolation(this._camera,this._cameraControls,e,t);case"cylindrical":return new u.CameraCylindricalInterpolation(this._camera,this._cameraControls,e,t);default:return new o.CameraMultipleInterpolation(this._camera,this._cameraControls,[e,t],s.Interpolation.CatmullRom)}}optionsParser(e){let t=s.Easing.Quartic.InOut;if("string"==typeof e.easing){const i=e.easing.split("."),r=s.Easing[i[0]];if(r){const e=r[i[1]];e&&(t=e)}}else"function"==typeof e.easing&&(t=e.easing);let i=s.Interpolation.CatmullRom;if("string"==typeof e.interpolation){const t=s.Interpolation[e.interpolation];t&&t!==s.Interpolation.Utils&&(i=t)}else"function"==typeof e.interpolation&&(i=e.interpolation);return{duration:e.duration&&e.duration>=0?e.duration:0,easing:t,coordinates:"spherical"!==e.coordinates&&"linear"!==e.coordinates&&"cylindrical"!==e.coordinates?"cylindrical":e.coordinates,interpolation:i}}}},365:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraCylindricalInterpolation=void 0;const r=i(887);t.CameraCylindricalInterpolation=class{constructor(e,t,i,n){this._camera=e,this._cameraControls=t,this._from=i,this._to=n,this._h_from=this._from.position[2]-this._from.target[2],this._from_position_heightAdjusted=r.vec3.fromValues(this._from.position[0],this._from.position[1],this._from.target[2]),this._r_from=r.vec3.distance(this._from_position_heightAdjusted,this._from.target),this._dir_from=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),this._from_position_heightAdjusted,this._from.target)),this._h_to=this._to.position[2]-this._to.target[2],this._to_position_heightAdjusted=r.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.target[2]),this._r_to=r.vec3.distance(this._to_position_heightAdjusted,this._to.target),this._dir_to=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),this._to_position_heightAdjusted,this._to.target)),0===this._dir_from[0]&&0===this._dir_from[1]&&0===this._dir_from[2]&&(this._dir_from=r.vec3.fromValues(1,0,0)),0===this._dir_to[0]&&0===this._dir_to[1]&&0===this._dir_to[2]&&(this._dir_to=r.vec3.fromValues(1,0,0)),this._lorr=r.vec3.cross(r.vec3.create(),this._dir_to,this._dir_from);let a=Math.min(1,Math.max(-1,r.vec3.dot(this._dir_to,this._dir_from))),s=Math.min(1,Math.max(-1,r.vec3.dot(this._lorr,r.vec3.fromValues(0,0,1))));this._shortest_angle=s>0?-Math.acos(a):Math.acos(a)}onComplete(e){let t=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),this._from.target,r.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),r.vec3.multiply(r.vec3.create(),this._to.target,r.vec3.fromValues(e.delta,e.delta,e.delta))),i=r.vec3.subtract(r.vec3.create(),t,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);let n=this._shortest_angle*e.delta,a=r.vec3.transformQuat(r.vec3.create(),this._dir_from,r.quat.setAxisAngle(r.quat.create(),r.vec3.fromValues(0,0,1),n)),s=this._r_from*(1-e.delta)+this._r_to*e.delta,o=r.vec3.add(r.vec3.create(),t,r.vec3.multiply(r.vec3.create(),a,r.vec3.fromValues(s,s,s)));r.vec3.add(o,o,r.vec3.fromValues(0,0,this._h_from*(1-e.delta)+this._h_to*e.delta));let l=r.vec3.subtract(r.vec3.create(),o,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(l)}}},3042:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraLinearInterpolation=void 0;const r=i(887);t.CameraLinearInterpolation=class{constructor(e,t,i,r){this._camera=e,this._cameraControls=t,this._from=i,this._to=r}onComplete(e){let t=r.vec3.subtract(r.vec3.create(),this._to.position,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=r.vec3.subtract(r.vec3.create(),this._to.target,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),this._from.position,r.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),r.vec3.multiply(r.vec3.create(),this._to.position,r.vec3.fromValues(e.delta,e.delta,e.delta))),i=r.vec3.subtract(r.vec3.create(),t,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);let n=r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),this._from.target,r.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),r.vec3.multiply(r.vec3.create(),this._to.target,r.vec3.fromValues(e.delta,e.delta,e.delta))),a=r.vec3.subtract(r.vec3.create(),n,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(a)}}},7198:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraMultipleInterpolation=void 0;const r=i(887);t.CameraMultipleInterpolation=class{constructor(e,t,i,r){this._camera=e,this._cameraControls=t,this._path=i,this._interpolationFunction=r,this.end={position:{x:[],y:[],z:[]},target:{x:[],y:[],z:[]}};for(let e=0;e<this._path.length;e++)this.end.position.x.push(this._path[e].position[0]),this.end.position.y.push(this._path[e].position[1]),this.end.position.z.push(this._path[e].position[2]),this.end.target.x.push(this._path[e].target[0]),this.end.target.y.push(this._path[e].target[1]),this.end.target.z.push(this._path[e].target[2])}onComplete(e){let t=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._path[this._path.length-1].position[0],this._path[this._path.length-1].position[1],this._path[this._path.length-1].position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._path[this._path.length-1].target[0],this._path[this._path.length-1].target[1],this._path[this._path.length-1].target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=r.vec3.fromValues(this._interpolationFunction(this.end.position.x,e.delta),this._interpolationFunction(this.end.position.y,e.delta),this._interpolationFunction(this.end.position.z,e.delta)),i=r.vec3.subtract(r.vec3.create(),t,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);let n=r.vec3.fromValues(this._interpolationFunction(this.end.target.x,e.delta),this._interpolationFunction(this.end.target.y,e.delta),this._interpolationFunction(this.end.target.z,e.delta)),a=r.vec3.subtract(r.vec3.create(),n,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(a)}}},6861:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraSphericalInterpolation=void 0;const r=i(887);t.CameraSphericalInterpolation=class{constructor(e,t,i,n){this._camera=e,this._cameraControls=t,this._from=i,this._to=n,this._radius_from=r.vec3.distance(this._from.position,this._from.target),this._direction_from=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),this._from.position,this._from.target)),this._radius_to=r.vec3.distance(this._to.position,this._to.target),this._direction_to=r.vec3.normalize(r.vec3.create(),r.vec3.subtract(r.vec3.create(),this._to.position,this._to.target)),this._axis=r.vec3.normalize(r.vec3.create(),r.vec3.cross(r.vec3.create(),this._direction_to,this._direction_from)),this._c_angle=-Math.acos(Math.min(1,Math.max(-1,r.vec3.dot(this._direction_to,this._direction_from))))}onComplete(e){let t=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=r.vec3.subtract(r.vec3.create(),r.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),this._from.target,r.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),r.vec3.multiply(r.vec3.create(),this._to.target,r.vec3.fromValues(e.delta,e.delta,e.delta))),i=r.vec3.subtract(r.vec3.create(),t,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);let n=this._c_angle*e.delta,a=r.vec3.normalize(r.vec3.create(),r.vec3.transformQuat(r.vec3.create(),this._direction_from,r.quat.setAxisAngle(r.quat.create(),this._axis,n))),s=this._radius_from*(1-e.delta)+this._radius_to*e.delta,o=r.vec3.add(r.vec3.create(),t,r.vec3.multiply(r.vec3.create(),a,r.vec3.fromValues(s,s,s))),l=r.vec3.subtract(r.vec3.create(),o,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(l)}}},1990:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraControls=t.PerspectiveCameraControls=t.OrthographicCamera=t.PerspectiveCamera=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.CAMERA_TYPE=t.AbstractCamera=t.CameraEngine=void 0;const r=i(3164);Object.defineProperty(t,"AbstractCamera",{enumerable:!0,get:function(){return r.AbstractCamera}});const n=i(8551);Object.defineProperty(t,"CameraEngine",{enumerable:!0,get:function(){return n.CameraEngine}});const a=i(4976);Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return a.CAMERA_TYPE}});const s=i(8065);Object.defineProperty(t,"OrthographicCamera",{enumerable:!0,get:function(){return s.OrthographicCamera}});const o=i(8926);Object.defineProperty(t,"PerspectiveCamera",{enumerable:!0,get:function(){return o.PerspectiveCamera}});const l=i(8210);Object.defineProperty(t,"OrthographicCameraControls",{enumerable:!0,get:function(){return l.OrthographicCameraControls}});const c=i(9599);Object.defineProperty(t,"PerspectiveCameraControls",{enumerable:!0,get:function(){return c.PerspectiveCameraControls}});const u=i(5904);Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return u.ORTHOGRAPHIC_CAMERA_DIRECTION}})},4976:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CAMERA_TYPE=void 0,(i=t.CAMERA_TYPE||(t.CAMERA_TYPE={})).PERSPECTIVE="perspective",i.ORTHOGRAPHIC="orthographic"},5904:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ORTHOGRAPHIC_CAMERA_DIRECTION=void 0,(i=t.ORTHOGRAPHIC_CAMERA_DIRECTION||(t.ORTHOGRAPHIC_CAMERA_DIRECTION={})).TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.FRONT="front",i.BACK="back"},8953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=void 0,t.Canvas=class{constructor(e,t,i){this._id=e,this._originalDefinition=t,this._canvasElement=i,this._originalDefinition&&this._originalDefinition instanceof HTMLCanvasElement&&(this._originalDefinition=this._originalDefinition.cloneNode(!0)),i?this._canvasElement=i:(this._canvasElement=document.createElement("canvas"),this._canvasElement.id=this._id)}get canvasElement(){return this._canvasElement}get id(){return this._id}reset(){var e;const t=null===(e=this._canvasElement)||void 0===e?void 0:e.parentElement;null==t||t.removeChild(this._canvasElement),this._originalDefinition instanceof HTMLCanvasElement&&(null==t||t.appendChild(this._canvasElement))}}},1382:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasEngine=void 0;const r=i(8877),n=i(8953);t.CanvasEngine=class{constructor(){this._canvasDictionary={},this._uuidGenerator=r.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}createCanvasObject(e,t){if(t=void 0!==t&&this._uuidGenerator.validate(t)?t:this._uuidGenerator.create(),e instanceof HTMLCanvasElement){const i=e;return i.id||(i.id=this._uuidGenerator.create()),this._canvasDictionary[t]=new n.Canvas(i.id,e,i),t}if(e){const i=e,r=document.getElementById(i);for(let e in this._canvasDictionary)if(this._canvasDictionary[e].id===i)return e;if(r instanceof HTMLCanvasElement)return this._canvasDictionary[t]=new n.Canvas(i,e,r),t;if(!r)return this._canvasDictionary[t]=new n.Canvas(i,e),t}return this._canvasDictionary[t]=new n.Canvas(t,e),t}getCanvas(e){return this._canvasDictionary[e]}}},420:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=t.CanvasEngine=void 0;const r=i(8953);Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return r.Canvas}});const n=i(1382);Object.defineProperty(t,"CanvasEngine",{enumerable:!0,get:function(){return n.CanvasEngine}})},9407:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionEngine=void 0;const r=i(7038),n=i(887),a=i(5174),s=i(3858),o=i(2248),l=i(8877);t.IntersectionEngine=class{constructor(){this._eventEngine=l.EventEngine.instance,this._tree=s.Tree.instance,this._intersectNodes=[],this.gatherNodes(),this._eventEngine.addListener(l.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(()=>{this.gatherNodes()}))}static get instance(){return this._instance||(this._instance=new this)}intersect(e,t,i,r=this._tree.root,n){let a=[];const s=(r,o,l,c)=>{if(!1!==o){if(void 0!==n){if(l.includes(n))return;if(c.length>0&&!c.includes(n))return}if(t){for(let n=0;n<t.length;n++)if(t[n](r)){const t=this.intersectNode(r,e,i);t&&(t.forEach((e=>e.node=r)),a=a.concat(t));break}}else{const t=this.intersectNode(r,e);t&&(t.forEach((e=>e.node=r)),a=a.concat(t))}for(let e=0;e<r.children.length;e++)s(r.children[e],o&&r.children[e].visible,l.concat(r.children[e].excludeViewports),c.concat(r.children[e].restrictViewports))}};for(let e=0;e<this._intersectNodes.length;e++)s(this._intersectNodes[e].node,this._intersectNodes[e].visible,this._intersectNodes[e].excludeViewports,this._intersectNodes[e].restrictViewports);return a.sort(((e,t)=>e.distance-t.distance)),a}intersectNode(e,t,i){if(!1===e.visible)return;const a=n.mat4.invert(n.mat4.create(),e.worldMatrix),s={origin:n.vec3.transformMat4(n.vec3.create(),t.origin,a),direction:n.vec3.normalize(n.vec3.create(),n.vec3.fromValues(a[0]*t.direction[0]+a[4]*t.direction[1]+a[8]*t.direction[2],a[1]*t.direction[0]+a[5]*t.direction[1]+a[9]*t.direction[2],a[2]*t.direction[0]+a[6]*t.direction[1]+a[10]*t.direction[2]))};let l;for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof r.GeometryData){l=e.data[t];break}if(l&&i){let e=null;if(e=l.effectMaterials.length>0?l.effectMaterials[l.effectMaterials.length-1].material:i.rendererType===o.RENDERER_TYPE.ATTRIBUTES?l.attributeMaterial:l.material,e&&e.opacity<=i.opacity)return}if(l){if(l.mode===r.PRIMITIVE_MODE.LINES){if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const i=l.primitive.indices,r=l.primitive.attributes.POSITION,a=.1;let o=[];if(null!==i)for(let t=0,c=+i.count;t<c;t+=2){const c=i.array[t*i.itemSize],u=i.array[(t+1)*i.itemSize];let h=this.checkLineIntersection(e,s,a,n.vec3.fromValues(r.array[c*r.itemSize],r.array[c*r.itemSize+1],r.array[c*r.itemSize+2]),n.vec3.fromValues(r.array[u*r.itemSize],r.array[u*r.itemSize+1],r.array[u*r.itemSize+2]));h&&o.push(Object.assign(h,{geometryData:l}))}else if(void 0!==r)for(let t=0,i=+r.count;t<i;t+=2){const i=t,c=t+1;let u=this.checkLineIntersection(e,s,a,n.vec3.fromValues(r.array[i*r.itemSize],r.array[i*r.itemSize+1],r.array[i*r.itemSize+2]),n.vec3.fromValues(r.array[c*r.itemSize],r.array[c*r.itemSize+1],r.array[c*r.itemSize+2]));u&&o.push(Object.assign(u,{geometryData:l}))}return o.sort(((e,t)=>e.distance-t.distance)),o.forEach((t=>t.point=n.vec3.transformMat4(t.point,t.point,e.worldMatrix))),o}if(l.mode===r.PRIMITIVE_MODE.LINE_LOOP||l.mode===r.PRIMITIVE_MODE.LINE_STRIP){if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const i=l.primitive.indices,r=l.primitive.attributes.POSITION,a=.1;let o=[];if(null!==i)for(let t=0,c=+i.count-1;t<c;t++){const c=i.array[t*i.itemSize],u=i.array[(t+1)*i.itemSize];let h=this.checkLineIntersection(e,s,a,n.vec3.fromValues(r.array[c*r.itemSize],r.array[c*r.itemSize+1],r.array[c*r.itemSize+2]),n.vec3.fromValues(r.array[u*r.itemSize],r.array[u*r.itemSize+1],r.array[u*r.itemSize+2]));h&&o.push(Object.assign(h,{geometryData:l}))}else if(void 0!==r)for(let t=0,i=+r.count;t<i;t+=2){const i=t,c=t+1;let u=this.checkLineIntersection(e,s,a,n.vec3.fromValues(r.array[i*r.itemSize],r.array[i*r.itemSize+1],r.array[i*r.itemSize+2]),n.vec3.fromValues(r.array[c*r.itemSize],r.array[c*r.itemSize+1],r.array[c*r.itemSize+2]));u&&o.push(Object.assign(u,{geometryData:l}))}return o.sort(((e,t)=>e.distance-t.distance)),o.forEach((t=>t.point=n.vec3.transformMat4(t.point,t.point,e.worldMatrix))),o}if(l.mode===r.PRIMITIVE_MODE.POINTS){const t=l.primitive.attributes.POSITION,i=.1;let r=[];if(void 0!==t)for(let a=0,o=+t.count;a<o;a++){let o=this.checkPointIntersection(e,s,i,n.vec3.fromValues(t.array[a*t.itemSize],t.array[a*t.itemSize+1],t.array[a*t.itemSize+2]));o&&r.push(Object.assign(o,{geometryData:l}))}return r.sort(((e,t)=>e.distance-t.distance)),r.forEach((t=>t.point=n.vec3.transformMat4(t.point,t.point,e.worldMatrix))),r}{let i=n.vec3.sub(n.vec3.create(),e.boundingBox.boundingSphere.center,t.origin),r=n.vec3.dot(i,t.direction);r=Math.max(r,0);let a=n.vec3.add(n.vec3.create(),t.origin,n.vec3.scale(n.vec3.create(),t.direction,r));if(n.vec3.squaredDistance(a,e.boundingBox.boundingSphere.center)>e.boundingBox.boundingSphere.radius*e.boundingBox.boundingSphere.radius)return;if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const o=l.material,c=l.primitive.indices,u=l.primitive.attributes.POSITION;let h=[];if(null!==c)for(let t=0,i=+c.count;t<i;t+=3){const i=c.array[t*c.itemSize],r=c.array[(t+1)*c.itemSize],a=c.array[(t+2)*c.itemSize];let d=this.checkIntersection(e,o,s,n.vec3.fromValues(u.array[i*u.itemSize],u.array[i*u.itemSize+1],u.array[i*u.itemSize+2]),n.vec3.fromValues(u.array[r*u.itemSize],u.array[r*u.itemSize+1],u.array[r*u.itemSize+2]),n.vec3.fromValues(u.array[a*u.itemSize],u.array[a*u.itemSize+1],u.array[a*u.itemSize+2]));d&&h.push(Object.assign(d,{geometryData:l}))}else if(void 0!==u)for(let t=0,i=+u.count;t<i;t+=3){const i=t,r=t+1,a=t+2;let c=this.checkIntersection(e,o,s,n.vec3.fromValues(u.array[i*u.itemSize],u.array[i*u.itemSize+1],u.array[i*u.itemSize+2]),n.vec3.fromValues(u.array[r*u.itemSize],u.array[r*u.itemSize+1],u.array[r*u.itemSize+2]),n.vec3.fromValues(u.array[a*u.itemSize],u.array[a*u.itemSize+1],u.array[a*u.itemSize+2]));c&&h.push(Object.assign(c,{geometryData:l}))}return h.sort(((e,t)=>e.distance-t.distance)),h.forEach((t=>t.point=n.vec3.transformMat4(t.point,t.point,e.worldMatrix))),h}}{let r=[];for(let n=0;n<e.children.length;n++){let a=this.intersectNode(e.children[n],t,i);a&&(r=r.concat(a))}return r.length>0?(r.sort(((e,t)=>e.distance-t.distance)),r):void 0}}checkIntersection(e,t,i,s,o,l){let c;if(c=t&&t.side===r.MATERIAL_SIDE.BACK?new a.Triangle(l,o,s).intersect(i.origin,i.direction):new a.Triangle(s,o,l).intersect(i.origin,i.direction),null!==c)return{distance:n.vec3.distance(i.origin,c),point:n.vec3.clone(c),node:e}}checkLineIntersection(e,t,i,r,a){const s=n.vec3.sub(n.vec3.create(),a,r),o=n.vec3.length(s),l={origin:r,direction:n.vec3.divide(n.vec3.create(),s,n.vec3.fromValues(o,o,o))},c=n.vec3.cross(n.vec3.create(),t.direction,l.direction),u=n.vec3.normalize(n.vec3.create(),n.vec3.cross(n.vec3.create(),t.direction,c)),h=n.vec3.normalize(n.vec3.create(),n.vec3.cross(n.vec3.create(),l.direction,c)),d=n.vec3.dot(n.vec3.sub(n.vec3.create(),r,t.origin),h)/n.vec3.dot(t.direction,h),f=n.vec3.dot(n.vec3.sub(n.vec3.create(),t.origin,r),u)/n.vec3.dot(l.direction,u);let p=n.vec3.create();d<0?n.vec3.copy(p,t.origin):p=n.vec3.add(n.vec3.create(),t.origin,n.vec3.mul(n.vec3.create(),t.direction,n.vec3.fromValues(d,d,d)));let m=n.vec3.create();f<0?n.vec3.copy(m,r):f<o?m=n.vec3.add(n.vec3.create(),r,n.vec3.mul(n.vec3.create(),l.direction,n.vec3.fromValues(f,f,f))):n.vec3.copy(m,a);const g=n.vec3.distance(p,m);return g<i?{distance:g,point:n.vec3.clone(m),node:e}:void 0}checkPointIntersection(e,t,i,r){const a=n.vec3.sub(n.vec3.create(),r,t.origin),s=n.vec3.dot(a,t.direction);s<0?n.vec3.copy(a,t.origin):(n.vec3.multiply(a,n.vec3.copy(a,t.direction),n.vec3.fromValues(s,s,s)),n.vec3.add(a,a,t.origin));const o=n.vec3.distance(a,r);return o<i?{distance:o,point:n.vec3.clone(a),node:e}:void 0}gatherNodes(){this._intersectNodes=[],this._tree.root.traverse((e=>{if(!1!==e.visible)for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof r.GeometryData){let t=e,i=!0,r=[],n=[];for(;t.parent;)i=t.visible&&i,r=r.concat(t.restrictViewports),n=n.concat(t.excludeViewports),t=t.parent;this._intersectNodes.push({node:e,visible:i,restrictViewports:[...new Set(r)],excludeViewports:[...new Set(n)]})}}))}}},2850:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionEngine=void 0;const r=i(9407);Object.defineProperty(t,"IntersectionEngine",{enumerable:!0,get:function(){return r.IntersectionEngine}})},3995:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractLight=void 0;const d=i(8877),f=i(3858);class p extends f.AbstractTreeNodeData{constructor(e){super(e.id,e.version),r.set(this,void 0),n.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,!1),c.set(this,void 0),this._uuidGenerator=d.UuidGenerator.instance,u(this,n,e.color,"f"),u(this,a,e.intensity,"f"),u(this,r,e.type,"f"),u(this,s,e.name,"f"),u(this,o,e.order,"f")}get color(){return h(this,n,"f")}set color(e){u(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get intensity(){return h(this,a,"f")}set intensity(e){u(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get name(){return h(this,s,"f")}set name(e){u(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get order(){return h(this,o,"f")}set order(e){u(this,o,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}set parentNode(e){u(this,c,e,"f")}get parentNode(){return h(this,c,"f")}get type(){return h(this,r,"f")}set useNodeData(e){u(this,l,e,"f")}get useNodeData(){return h(this,l,"f")}}t.AbstractLight=p,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap},4739:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightEngine=void 0;const r=i(887),n=i(8877),a=i(3955),s=i(3520),o=i(3447),l=i(1187),c=i(4410),u=i(4771),h=i(169),d=i(3858);t.LightEngine=class{constructor(e){this._renderingEngine=e,this._converter=n.Converter.instance,this._lightNode=new d.TreeNode("lights"),this._tree=d.Tree.instance,this._uuidGenerator=n.UuidGenerator.instance,this._lightScenes={},this._tree.root.addChild(this._lightNode),this._lightNode.restrictViewports=[this._renderingEngine.id]}get lightScene(){return this._lightScene}get lightScenes(){return this._lightScenes}get update(){return this._update}set update(e){this._update=e}applySettings(e){this._lightScenes={};for(let t in e.light.lightScenes){const i=this._uuidGenerator.validate(t)?t:this._uuidGenerator.create(),r=e.light.lightScenes[t].name?e.light.lightScenes[t].name:t,n=new u.LightScene(this._renderingEngine,{id:i,name:r});for(let i in e.light.lightScenes[t].lights){const r=this._uuidGenerator.validate(i)?i:this._uuidGenerator.create(),u=e.light.lightScenes[t].lights[i];let d;switch(u.type){case h.LIGHT_TYPE.DIRECTIONAL:d=new s.DirectionalLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,direction:this._converter.toVec3(u.properties.direction),castShadow:u.properties.castShadow,name:u.name?u.name:i,order:u.order,id:r});break;case h.LIGHT_TYPE.HEMISPHERE:d=new o.HemisphereLight({color:this._converter.toHexColor(u.properties.skyColor),intensity:u.properties.intensity,groundColor:this._converter.toHexColor(u.properties.groundColor),name:u.name?u.name:i,order:u.order,id:r});break;case h.LIGHT_TYPE.POINT:d=new l.PointLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,position:this._converter.toVec3(u.properties.position),distance:u.properties.distance,decay:u.properties.decay,name:u.name?u.name:i,order:u.order,id:r});break;case h.LIGHT_TYPE.SPOT:d=new c.SpotLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,position:this._converter.toVec3(u.properties.position),target:this._converter.toVec3(u.properties.target),distance:u.properties.distance,decay:u.properties.decay,angle:u.properties.angle,penumbra:u.properties.penumbra,name:u.name?u.name:i,order:u.order,id:r});break;case h.LIGHT_TYPE.AMBIENT:default:d=new a.AmbientLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,name:u.name?u.name:i,order:u.order,id:r})}n.addLight(d)}this._lightScenes[n.id]=n}if(void 0===e.light.lightSceneId&&Object.values(e.light.lightScenes).length>0){if(!1===this.assignLightScene(Object.keys(e.light.lightScenes)[0])){const t=this.createLightScene({name:"default"===e.light.lightSceneId?"default":"standard"});t.addLight(new a.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.75,direction:r.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.35,direction:r.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[t.id]=t}}else if(e.light.lightSceneId){if(!1===this.assignLightScene(e.light.lightSceneId)){const t=this.createLightScene({name:"default"===e.light.lightSceneId?"default":"standard"});t.addLight(new a.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.75,direction:r.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.35,direction:r.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[t.id]=t}}else if(JSON.stringify(e.settingsJson)==JSON.stringify({})){const e=this.createLightScene({name:"standard",standard:!0});this._lightScenes[e.id]=e}this._update&&this._update()}assignLightScene(e){if(!this._lightScenes[e]){for(let t in this._lightScenes)if((this._lightScenes[t].name||t)===e)return this.assignLightScene(t);return!1}for(this._lightScene=this._lightScenes[e];this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),!0}close(){this._tree.root.removeChild(this._lightNode)}createLightScene(e){const t=this._uuidGenerator.create(),i=new u.LightScene(this._renderingEngine,{id:t,name:e.name});for(!0===e.standard&&(i.addLight(new s.DirectionalLight({color:"#ffffff",intensity:2.5,direction:r.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),i.addLight(new a.AmbientLight({color:"#ffffff",intensity:.3,name:"ambient0"}))),this._lightScenes[t]=i,this._lightScene=i;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),this._update&&this._update(),i}removeLightScene(e){if(!this._lightScenes[e]){for(let t in this._lightScenes)if((this._lightScenes[t].name||t)===e)return this.removeLightScene(t);return!1}if(this._lightScene&&this._lightScene.id===e){for(this._lightScene=void 0;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);this._lightNode.updateVersion()}return delete this._lightScenes[e],this._update&&this._update(),!0}saveSettings(e){e.light.lightSceneId=this.lightScene?this.lightScene.id:void 0;const t={};for(let e in this._lightScenes){const i=this._lightScenes[e],r=i.name||e;t[e]={name:r,lights:{}};for(let r in i.lights){const n=i.lights[r];let a;switch(n.type){case h.LIGHT_TYPE.DIRECTIONAL:a={color:this._converter.toHexColor(n.color),intensity:n.intensity,direction:{x:n.direction[0],y:n.direction[1],z:n.direction[2]},castShadow:n.castShadow,shadowMapResolution:n.shadowMapResolution,shadowMapBias:n.shadowMapBias};break;case h.LIGHT_TYPE.HEMISPHERE:a={skyColor:this._converter.toHexColor(n.color),intensity:n.intensity,groundColor:this._converter.toHexColor(n.groundColor)};break;case h.LIGHT_TYPE.POINT:a={color:this._converter.toHexColor(n.color),intensity:n.intensity,position:{x:n.position[0],y:n.position[1],z:n.position[2]},distance:n.distance,decay:n.decay};break;case h.LIGHT_TYPE.SPOT:a={color:this._converter.toHexColor(n.color),intensity:n.intensity,position:{x:n.position[0],y:n.position[1],z:n.position[2]},target:{x:n.target[0],y:n.target[1],z:n.target[2]},distance:n.distance,decay:n.decay,angle:n.angle,penumbra:n.penumbra};break;case h.LIGHT_TYPE.AMBIENT:default:a={color:this._converter.toHexColor(n.color),intensity:n.intensity}}t[e].lights[r]={name:n.name,type:n.type,properties:a},void 0!==n.order&&(t[e].lights[r].order=n.order)}}e.light.lightScenes=t}}},4771:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightScene=void 0;const r=i(3858),n=i(3955),a=i(3520),s=i(3447),o=i(1187),l=i(4410);t.LightScene=class{constructor(e,t){this._renderingEngine=e,this._lights={},this._id=t.id,this._name=t.name,this._node=new r.TreeNode(t.name||t.id)}get id(){return this._id}get lights(){return this._lights}get name(){return this._name}set name(e){this._name=e}get node(){return this._node}get update(){return this._update}set update(e){this._update=e}addAmbientLight(e){const t=new n.AmbientLight(e);return this.addLight(t),t}addDirectionalLight(e){const t=new a.DirectionalLight(e);return this.addLight(t),t}addHemisphereLight(e){const t=new s.HemisphereLight(e);return this.addLight(t),t}addLight(e){const t=new r.TreeNode(e.id);e.parentNode=t,t.data.push(e),this._node.addChild(t),this._lights[e.id]=e,this._node.updateVersion(),this._update&&this._update()}addPointLight(e){const t=new o.PointLight(e);return this.addLight(t),t}addSpotLight(e){const t=new l.SpotLight(e);return this.addLight(t),t}removeLight(e){if(!this._lights[e])return!1;for(let t=0;t<this._node.children.length;t++){const i=this._node.children[t];if(i&&i.name===e){this._node.removeChild(i);break}}return delete this._lights[e],this._node.updateVersion(),this._update&&this._update(),!0}}},3955:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLight=void 0;const a=i(169),s=i(3995);class o extends s.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:a.LIGHT_TYPE.AMBIENT,name:e.name,order:e.order,id:e.id,version:e.version}),r.set(this,{})}get threeJsObject(){return n(this,r,"f")}clone(){return new o({color:this.color||"#ffffff",intensity:this.intensity||.5,name:this.name,order:this.order,id:this.id,version:this.version})}}t.AmbientLight=o,r=new WeakMap},3520:function(e,t,i){"use strict";var r,n,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLight=void 0;const u=i(887),h=i(169),d=i(3995);class f extends d.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:h.LIGHT_TYPE.DIRECTIONAL,name:e.name,order:e.order,id:e.id,version:e.version}),r.set(this,!0),n.set(this,u.vec3.fromValues(-1,0,1)),a.set(this,-.003),s.set(this,1024),o.set(this,{}),e.direction&&l(this,n,e.direction,"f"),void 0!==e.castShadow&&l(this,r,e.castShadow,"f"),e.shadowMapResolution&&l(this,s,e.shadowMapResolution,"f"),e.shadowMapBias&&l(this,a,e.shadowMapBias,"f")}get castShadow(){return c(this,r,"f")}set castShadow(e){l(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get direction(){return c(this,n,"f")}set direction(e){l(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapBias(){return c(this,a,"f")}set shadowMapBias(e){l(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapResolution(){return c(this,s,"f")}set shadowMapResolution(e){l(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return c(this,o,"f")}clone(){return new f({color:this.color,intensity:this.intensity,direction:this.direction,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution,shadowMapBias:this.shadowMapBias,name:this.name,order:this.order,id:this.id,version:this.version})}}t.DirectionalLight=f,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},3447:function(e,t,i){"use strict";var r,n,a=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},s=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLight=void 0;const o=i(169),l=i(3995);class c extends l.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:o.LIGHT_TYPE.HEMISPHERE,name:e.name,order:e.order,id:e.id,version:e.version}),r.set(this,"#000000"),n.set(this,{}),e.groundColor&&a(this,r,e.groundColor,"f")}get groundColor(){return s(this,r,"f")}set groundColor(e){a(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return s(this,n,"f")}clone(){return new c({color:this.color,groundColor:this.groundColor,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.HemisphereLight=c,r=new WeakMap,n=new WeakMap},1187:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PointLight=void 0;const c=i(887),u=i(169),h=i(3995);class d extends h.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:u.LIGHT_TYPE.POINT,name:e.name,order:e.order,id:e.id,version:e.version}),r.set(this,0),n.set(this,0),a.set(this,c.vec3.fromValues(0,0,0)),s.set(this,{}),e.position&&o(this,a,e.position,"f"),e.distance&&o(this,n,e.distance,"f"),e.decay&&o(this,r,e.decay,"f")}get decay(){return l(this,r,"f")}set decay(e){o(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return l(this,n,"f")}set distance(e){o(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return l(this,a,"f")}set position(e){o(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return l(this,s,"f")}clone(){return new d({color:this.color,position:this.position,distance:this.distance,decay:this.decay,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.PointLight=d,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},4410:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=void 0;const d=i(887),f=i(169),p=i(3995);class m extends p.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:f.LIGHT_TYPE.SPOT,name:e.name,order:e.order,id:e.id,version:e.version}),r.set(this,Math.PI/4),n.set(this,0),a.set(this,0),s.set(this,.5),o.set(this,d.vec3.fromValues(-1,0,1)),l.set(this,d.vec3.fromValues(0,0,0)),c.set(this,{}),e.position&&u(this,o,e.position,"f"),e.target&&u(this,l,e.target,"f"),e.distance&&u(this,a,e.distance,"f"),e.decay&&u(this,n,e.decay,"f"),e.angle&&u(this,r,e.angle,"f"),e.penumbra&&u(this,s,e.penumbra,"f")}get angle(){return h(this,r,"f")}set angle(e){u(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get decay(){return h(this,n,"f")}set decay(e){u(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return h(this,a,"f")}set distance(e){u(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get penumbra(){return h(this,s,"f")}set penumbra(e){u(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return h(this,o,"f")}set position(e){u(this,o,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get target(){return h(this,l,"f")}set target(e){u(this,l,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return h(this,c,"f")}clone(){return new m({color:this.color,position:this.position,target:this.target,distance:this.distance,decay:this.decay,angle:this.angle,penumbra:this.penumbra,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.SpotLight=m,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap},3490:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=t.PointLight=t.HemisphereLight=t.DirectionalLight=t.AmbientLight=t.AbstractLight=t.LightScene=t.LIGHT_TYPE=t.LightEngine=void 0;const r=i(3995);Object.defineProperty(t,"AbstractLight",{enumerable:!0,get:function(){return r.AbstractLight}});const n=i(4739);Object.defineProperty(t,"LightEngine",{enumerable:!0,get:function(){return n.LightEngine}});const a=i(4771);Object.defineProperty(t,"LightScene",{enumerable:!0,get:function(){return a.LightScene}});const s=i(3955);Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return s.AmbientLight}});const o=i(3520);Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return o.DirectionalLight}});const l=i(3447);Object.defineProperty(t,"HemisphereLight",{enumerable:!0,get:function(){return l.HemisphereLight}});const c=i(1187);Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return c.PointLight}});const u=i(4410);Object.defineProperty(t,"SpotLight",{enumerable:!0,get:function(){return u.SpotLight}});const h=i(169);Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return h.LIGHT_TYPE}})},169:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LIGHT_TYPE=void 0,(i=t.LIGHT_TYPE||(t.LIGHT_TYPE={})).AMBIENT="ambient",i.DIRECTIONAL="directional",i.HEMISPHERE="hemisphere",i.POINT="point",i.RECTANGLE="rectangle",i.SPOT="spot"},3673:(e,t)=>{"use strict";var i,r,n,a,s,o,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.SPINNER_POSITIONING=t.FLAG_TYPE=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.VISIBILITY_MODE=t.RENDERER_TYPE=void 0,(c=t.RENDERER_TYPE||(t.RENDERER_TYPE={})).STANDARD="standard",c.ATTRIBUTES="attributes",(l=t.VISIBILITY_MODE||(t.VISIBILITY_MODE={})).INSTANT="instant",l.SESSION="session",l.MANUAL="manual",(o=t.TEXTURE_ENCODING||(t.TEXTURE_ENCODING={})).LINEAR="linear",o.SRGB="srgb",o.RGBE="rgbe",o.RGBM7="rgbm7",o.RGBM16="rgbm16",o.RGBD="rgbd",o.GAMMA="gamma",(s=t.TONE_MAPPING||(t.TONE_MAPPING={})).NONE="none",s.LINEAR="linear",s.REINHARD="reinhard",s.CINEON="cineon",s.ACES_FILMIC="aces_filmic",(a=t.BUSY_MODE_DISPLAY||(t.BUSY_MODE_DISPLAY={})).BLUR="blur",a.SPINNER="spinner",a.NONE="none",(n=t.SESSION_SETTINGS_MODE||(t.SESSION_SETTINGS_MODE={})).NONE="none",n.FIRST="first",n.MANUAL="manual",(r=t.FLAG_TYPE||(t.FLAG_TYPE={})).BUSY_MODE="busy_mode",r.CAMERA_FREEZE="camera_freeze",r.CONTINUOUS_RENDERING="continuous_rendering",r.CONTINUOUS_SHADOW_MAP_UPDATE="continuous_shadow_map_update",(i=t.SPINNER_POSITIONING||(t.SPINNER_POSITIONING={})).CENTER="center",i.TOP_LEFT="top_left",i.TOP_RIGHT="top_right",i.BOTTOM_LEFT="bottom_left",i.BOTTOM_RIGHT="bottom_right"},2248:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPINNER_POSITIONING=t.FLAG_TYPE=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.VISIBILITY_MODE=t.RENDERER_TYPE=void 0;const r=i(3673);Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return r.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return r.FLAG_TYPE}}),Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return r.RENDERER_TYPE}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return r.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return r.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return r.TONE_MAPPING}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return r.VISIBILITY_MODE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return r.SPINNER_POSITIONING}})},5934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputDelayException=void 0;class i extends Error{constructor(e){super(),this._delay=e}get delay(){return this._delay}}t.OutputDelayException=i},4919:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputLoader=void 0;const n=i(7038),a=i(5254),s=i(3858),o=i(5934),l=i(3574),c=i(5414),u=i(8877);t.OutputLoader=class{constructor(e){this._sessionEngine=e,this._dataEngine=a.DataEngine.instance,this._eventEngine=u.EventEngine.instance,this._loadedOutputNodes={},this._lastOutputNodes={},this._performanceEvaluator=u.PerformanceEvaluator.instance}loadOutputs(e,t,i,n){return r(this,void 0,void 0,(function*(){this._performanceEvaluator.startSection("outputLoading");const r=new l.SessionTreeNode(e);let a={},s={},h=[],d=[],f=0,p={};const m=Object.keys(t),g=e=>{const t=e;if(m.includes(t.id)){p[t.id]=t.progress;let e=0;Object.values(p).forEach((t=>{e+=t}));const i=(n.progressRange.max-n.progressRange.min)*(e/m.length)+n.progressRange.min,r={type:n.type,id:n.eventId,progress:i,data:n.data,status:"Output content loading progress."};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,r)}};let b=[];b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_START,g)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_PROCESS,g)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_CANCEL,g)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_END,g));for(let e in t)if(s[e]={version:t[e].version,contentFormat:t[e].content?t[e].content.map((e=>e.format)):[]},a[e]={},this._loadedOutputNodes[e]||(this._loadedOutputNodes[e]={}),i[e])a[e][s[e].version]=this._lastOutputNodes[e],p[e]=1;else if(t[e].delay)f=Math.max(f,t[e].delay);else if(this._loadedOutputNodes[e][s[e].version])a[e][s[e].version]=this._loadedOutputNodes[e][s[e].version],p[e]=1;else if(a[e][s[e].version]=new l.SessionTreeNode(e),a[e][s[e].version].data.push(new c.SessionOutputData(t[e])),t[e].content)for(let i=0,r=t[e].content.length;i<r;i++)h.push(this._dataEngine.loadContent(t[e].content[i],this._sessionEngine.bearerToken,e)),d.push(a[e][s[e].version]);if(f)throw new o.OutputDelayException(f);yield Promise.all(h),b.forEach((e=>this._eventEngine.removeListener(e)));for(let e=0;e<h.length;e++)d[e].addChild(yield h[e]);for(let e in s)r.addChild(a[e][s[e].version]);for(let e in s)this._loadedOutputNodes[e]={},this._loadedOutputNodes[e][s[e].version]=a[e][s[e].version],this._lastOutputNodes[e]=a[e][s[e].version];for(let e in s)if(a[e][s[e].version].children.length>1)for(let t=0,i=s[e].contentFormat.length;t<i;t++)if("sdtf"===s[e].contentFormat[t]){this.mergeContentNodes(a[e][s[e].version]);break}return this.assignMaterials(r),this._performanceEvaluator.endSection("outputLoading"),r}))}assignMaterials(e){const t=(e,i)=>{for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof n.GeometryData){const r=e.data[t],n=r.material;null!==n&&!0!==n.materialOutput||(r.material=i)}for(let r=0;r<e.children.length;r++){const n=e.children[r];n&&t(n,i)}},i=(e,t=[])=>{for(let i=0;i<e.data.length;i++)if(e.data[i]instanceof n.AbstractMaterialData){const r=e.data[i];r.materialOutput=!0,t.push(r)}for(let r=0;r<e.children.length;r++){const n=e.children[r];n&&t.push(...i(n))}return t};for(let r=0;r<e.children.length;r++){const n=e.children[r];if(n)for(let r=0;r<n.data.length;r++){if(!(n.data[r]instanceof c.SessionOutputData))continue;const a=n.data[r];if(a.responseOutput.material){let r=[];for(let t=0;t<e.children.length;t++){const i=e.children[t];i&&i.name===a.responseOutput.material&&(r=i.children)}const s=n.children;if(r.length>=s.length)for(let e=0;e<s.length;e++)t(s[e],i(r[e])[0]);else if(r.length>=1)for(let e=0;e<s.length;e++)t(s[e],i(r[0])[0])}else{const e=a.responseOutput.content;if(void 0===e)continue;const r=[],s=[];for(let t=0;t<e.length;t++)"material"===e[t].format?r.push(n.children[t]):s.push(n.children[t]);if(r.length>=s.length)for(let e=0;e<s.length;e++)t(s[e],i(r[e])[0]);else if(r.length>=1)for(let e=0;e<s.length;e++)t(s[e],i(r[0])[0])}}}}mergeContentNodes(e){if(!(e.children.length>1))return;const t=[];for(;e.children.length>0;)t.push(...e.children[0].children),e.removeChild(e.children[0]);const i=(e,t)=>{for(let i=0;i<e.data.length;i++)t.data.push(e.data[i]);for(let r=0;r<e.children.length;r++){let n;for(let i=0;i<t.children.length;i++)if(e.children[r].name===t.children[i].name){n=t.children[i];break}n||(n=new s.TreeNode(e.children[r].name),t.addChild(n)),i(e.children[r],n)}},r=new s.TreeNode("content_array");e.addChild(r);for(let e=0;e<t.length;e++)i(t[e],r)}}},6042:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,void 0),n(this,r,e,"f")}get responseDto(){return a(this,r,"f")}set responseDto(e){n(this,r,e,"f")}clone(){return new o(this.responseDto,this.id,this.version)}}t.SessionData=o,r=new WeakMap},5446:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEngine=void 0;const u=i(8877),h=i(5934),d=i(4919),f=i(3574),p=i(4513),m=i(6042),g=i(7849),b=i(3858),v=i(7038),_=i(4615),y=i(3616),A=i(1602),E=i(3529),w=i(148);t.SessionEngine=class{constructor(e){this._converter=u.Converter.instance,this._eventEngine=u.EventEngine.instance,this._exports={},this._httpClient=u.HttpClient.instance,this._logger=u.Logger.instance,this._outputs={},this._outputsFreeze={},this._parameterValues={},this._parameters={},this._performanceEvaluator=u.PerformanceEvaluator.instance,this._sceneTree=b.Tree.instance,this._sessionEngineId=u.UuidGenerator.instance.create(),this._settingsEngine=new u.SettingsEngine,this._stateEngine=u.StateEngine.instance,this._uuidGenerator=u.UuidGenerator.instance,this._automaticSceneUpdate=!0,this._closeOnFailure=()=>o(this,void 0,void 0,(function*(){})),this._closed=!1,this._customizeOnParameterChange=!1,this._dataCache={},this._excludeViewports=[],this._headers={"X-ShapeDiver-Origin":u.SystemInfo.instance.origin,"X-ShapeDiver-SessionEngineId":this._sessionEngineId,"X-ShapeDiver-BuildVersion":"","X-ShapeDiver-BuildDate":""},this._initialized=!1,this._retryCounter=0,this._updateCallback=null,this._viewerSettingsVersion=w.latestVersion,this._viewerSettingsVersionBackend=w.latestVersion,r.set(this,void 0),n.set(this,[]),a.set(this,!1),s.set(this,[]),this._id=e.id,this._node=new b.TreeNode(e.id),this._ticket=e.ticket,this._modelViewUrl=e.modelViewUrl,this._excludeViewports=e.excludeViewports||[],this._bearerToken=e.bearerToken,this._headers["X-ShapeDiver-BuildDate"]=e.buildDate,this._headers["X-ShapeDiver-BuildVersion"]=e.buildVersion,this._outputLoader=new d.OutputLoader(this);try{this._sdk=(0,g.create)(this._modelViewUrl,this._bearerToken),this._sdk.setConfigurationValue(g.ShapeDiverSdkConfigType.REQUEST_HEADERS,this._headers)}catch(e){throw this._httpClient.convertError(e)}}get automaticSceneUpdate(){return this._automaticSceneUpdate}set automaticSceneUpdate(e){this._automaticSceneUpdate=e,e?this.addToSceneTree(this._node):this.removeFromSceneTree(this._node)}get bearerToken(){return this._bearerToken}set bearerToken(e){this._bearerToken=e;try{this._sdk.setConfigurationValue(g.ShapeDiverSdkConfigType.JWT_TOKEN,e)}catch(e){throw this._httpClient.convertError(e)}}get canUploadGLTF(){try{return this.checkAvailability("gltf-upload"),!0}catch(e){return!1}}get customizeOnParameterChange(){return this._customizeOnParameterChange}set customizeOnParameterChange(e){this._customizeOnParameterChange=e}get excludeViewports(){return this._excludeViewports}set excludeViewports(e){this._excludeViewports=JSON.parse(JSON.stringify(e)),this._node.excludeViewports=JSON.parse(JSON.stringify(e))}get exports(){return this._exports}get id(){return this._id}get initialized(){return this._initialized}get modelViewUrl(){return this._modelViewUrl}get node(){return this._node}get outputs(){return this._outputs}get outputsFreeze(){return this._outputsFreeze}get parameterValues(){return this._parameterValues}get parameters(){return this._parameters}get refreshBearerToken(){return this._refreshBearerToken}set refreshBearerToken(e){this._refreshBearerToken=e}get settingsEngine(){return this._settingsEngine}get ticket(){return this._ticket}get updateCallback(){return this._updateCallback}set updateCallback(e){this._updateCallback=e}get viewerSettings(){return this._viewerSettings}applySettings(e,t){let i;if(void 0===(t=t||{}).session&&(t.session={parameter:{displayname:!1,order:!1,hidden:!1},export:{displayname:!1,order:!1,hidden:!1}}),void 0===t.session.parameter&&(t.session.parameter={displayname:!1,order:!1,hidden:!1,value:!1}),void 0===t.session.export&&(t.session.export={displayname:!1,order:!1,hidden:!1}),void 0===t.viewport&&(t.viewport={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1}),void 0===e.viewer)throw new u.ShapeDiverViewerSettingsError("Session.applySettings: No config object available.");i=e.viewer.config;try{(0,w.validate)(i)}catch(e){throw new u.ShapeDiverViewerSettingsError("Session.applySettings: Was not able to validate config object.")}const r=(0,w.convert)(i,w.latestVersion),n={};if((t.session.export.displayname||t.session.export.order||t.session.export.hidden)&&e.exports)for(let t in e.exports)void 0!==e.exports[t].uid&&(n[e.exports[t].uid]=t);const a=this._settingsEngine.settings;if(t.session.parameter.displayname||t.session.parameter.order||t.session.parameter.hidden||t.session.parameter.value)for(let i in this.parameters)r.session[i]&&(t.session.parameter.displayname&&(this.parameters[i].displayname=r.session[i].displayname),t.session.parameter.order&&(this.parameters[i].order=r.session[i].order),t.session.parameter.hidden&&(this.parameters[i].hidden=r.session[i].hidden||!1)),e.parameters&&e.parameters[i]&&t.session.parameter.value&&(this.parameters[i].value=void 0!==e.parameters[i].defval?e.parameters[i].defval:this.parameters[i].value);if(t.session.export.displayname||t.session.export.order||t.session.export.hidden)for(let e in this.exports){let i="";if(r.session[e])i=e;else{const t=this.exports[e].uid;if(!t)continue;if(!n[t])continue;i=n[t]}r.session[i]&&(t.session.export.displayname&&(this.exports[e].displayname=r.session[i].displayname),t.session.export.order&&(this.exports[e].order=r.session[i].order),t.session.export.hidden&&(this.exports[e].hidden=r.session[i].hidden||!1))}t.viewport.ar&&(a.ar=r.ar,a.general.transformation=r.general.transformation),t.viewport.camera&&(a.camera=r.camera),t.viewport.light&&(a.light=r.light),t.viewport.scene&&(a.environmentGeometry.gridColor=r.environmentGeometry.gridColor,a.environmentGeometry.gridVisibility=r.environmentGeometry.gridVisibility,a.environmentGeometry.groundPlaneColor=r.environmentGeometry.groundPlaneColor,a.environmentGeometry.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,a.environmentGeometry.groundPlaneColor=r.environmentGeometry.groundPlaneColor,a.environmentGeometry.groundPlaneShadowColor=r.environmentGeometry.groundPlaneShadowColor,a.rendering.shadows=r.rendering.shadows,a.rendering.ambientOcclusion=r.rendering.ambientOcclusion,a.rendering.automaticColorAdjustment=r.rendering.automaticColorAdjustment,a.rendering.textureEncoding=r.rendering.textureEncoding,a.rendering.outputEncoding=r.rendering.outputEncoding,a.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,a.rendering.toneMapping=r.rendering.toneMapping,a.rendering.toneMappingExposure=r.rendering.toneMappingExposure),t.viewport.general&&(a.general.defaultMaterialColor=r.general.defaultMaterialColor,a.general.commitParameters=r.general.commitParameters,a.general.pointSize=r.general.pointSize),t.viewport.environment&&(a.environment.clearAlpha=r.environment.clearAlpha,a.environment.clearColor=r.environment.clearColor,a.environment.map=r.environment.map,a.environment.mapAsBackground=r.environment.mapAsBackground,a.environment.rotation=r.environment.rotation,a.environment.blurriness=r.environment.blurriness,a.environment.intensity=r.environment.intensity)}canGoBack(){return l(this,n,"f").length>1}canGoForward(){return l(this,s,"f").length>0}close(e=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("close");try{this._httpClient.removeDataLoading(this._sessionId),yield this._sdk.session.close(this._sessionId),this._automaticSceneUpdate&&this.removeFromSceneTree(this._node),this._closed=!0}catch(t){return yield this.handleError(t,e),yield this.close(!0)}}))}customize(e=!1){return o(this,void 0,void 0,(function*(){const t=this._uuidGenerator.create(),i=this._uuidGenerator.create();try{if(!1===e){let e=!1;for(const t in this.parameters)this.parameters[t].sessionValue!==this.parameters[t].value&&(e=!0);if(!1===e)return this.node}const o={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,o);const h=this.node.cloneInstance();c(this,r,i,"f"),this._logger.debugLow(`Session(${this.id}).customize: Customizing session.`);for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.push(i);const d={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:.1,data:{sessionId:this.id},status:"Uploading file parameters"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,d);const p={};for(const e in this.parameters)if(this.parameters[e]instanceof _.FileParameter&&(p[e]=yield this.parameters[e].upload(),l(this,r,"f")!==i)){for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(i)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(i),1);this._logger.debug(`Session(${this.id}).customize: Session customization was exceeded by other customization request.`);const e={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customization was exceeded by other customization request"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_CANCEL,e),new f.SessionTreeNode}if(l(this,r,"f")!==i){for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(i)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(i),1);const e={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customization was exceeded by other customization request"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_CANCEL,e),this._logger.debug(`Session(${this.id}).customize: Session customization was exceeded by other customization request.`),new f.SessionTreeNode}for(const e in p)this.parameters[e].value=p[e];const m={};for(const e in this.parameters)m[e]={value:this.parameters[e].value,valueString:this.parameters[e].stringify()};for(const e in this.parameters)this.parameterValues[e]=m[e].valueString;this._logger.info(`Session(${this.id}).customize: Customizing session with parameters ${JSON.stringify(this.parameterValues)}.`);const g={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:.1,data:{sessionId:this.id},status:"Sending customization request"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,g);const b=yield this.customizeInternal((()=>l(this,r,"f")!==i),{eventId:t,type:v.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:.1,max:.9},data:{sessionId:this.id}}),y={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:.9,data:{sessionId:this.id},status:"Updating scene"};if(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,y),l(this,r,"f")!==i){for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(i)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(i),1);const e={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customization was exceeded by other customization request"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_CANCEL,e),this._logger.debug(`Session(${this.id}).customize: Session customization was exceeded by other customization request.`),b}l(this,a,"f")||(l(this,n,"f").push(m),c(this,s,[],"f")),this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=b,this.automaticSceneUpdate&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).customize: Customization request finished, updating geometry.`);for(const e in this.parameters)this.parameters[e].sessionValue=m[e].value;this._updateCallback&&this._updateCallback(b,h);for(const e in this.outputs)this.outputs[e].updateOutput(b.children.find((t=>t.name===e)),h.children.find((t=>t.name===e)));for(const e in this.exports)this.exports[e].updateExport();this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports));for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(i)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(i),1);this._logger.debug(`Session(${this.id}).customize: Session customized.`),this._eventEngine.emitEvent(u.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,{sessionId:this.id});const A={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customized"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,A),this.node}catch(e){const r={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customization failed"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_CANCEL,r);for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(i)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(i),1);throw this._httpClient.convertError(e)}}))}customizeParallel(e){return o(this,void 0,void 0,(function*(){const t=this._uuidGenerator.create(),i={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,i);const r={};for(const t in this.parameters)r[t]=void 0!==e[t]?(" "+e[t]).slice(1):this.parameters[t].stringify();const n=yield this.customizeSession(r,(()=>!1),{eventId:t,type:v.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:0,max:1},data:{sessionId:this.id}},!0);n.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports));const a={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"Session customized"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,a),n}))}goBack(){return o(this,void 0,void 0,(function*(){if(!this.canGoBack())return this._logger.debug(`Session(${this.id}).goBack: Cannot go further back.`),new b.TreeNode;const e=l(this,n,"f").pop(),t=l(this,n,"f")[l(this,n,"f").length-1];for(const e in t)this.parameters[e].value=t[e].value;c(this,a,!0,"f");const i=yield this.customize();return c(this,a,!1,"f"),l(this,s,"f").push(e),i}))}goForward(){return o(this,void 0,void 0,(function*(){if(!this.canGoForward())return this._logger.debug(`Session(${this.id}).goForward: Cannot go further forward.`),new b.TreeNode;const e=l(this,s,"f").pop();for(const t in e)this.parameters[t].value=e[t].value;c(this,a,!0,"f");const t=yield this.customize();return c(this,a,!1,"f"),l(this,n,"f").push(e),t}))}init(e,t=!1){var i,r;return o(this,void 0,void 0,(function*(){if(!0===this._initialized)throw new u.ShapeDiverViewerSessionError("Session.init: Session already initialized.");try{this._performanceEvaluator.startSection("sessionResponse");const t={};for(const i in e)t[i]=(" "+e[i]).slice(1);if(this._responseDto=yield this._sdk.session.init(this._ticket,t),this._performanceEvaluator.endSection("sessionResponse"),this._viewerSettings=null===(i=this._responseDto.viewer)||void 0===i?void 0:i.config,this._viewerSettingsVersionBackend=this._responseDto.viewerSettingsVersion||w.latestVersion,this._sessionId=this._responseDto.sessionId,this._modelId=null===(r=this._responseDto.model)||void 0===r?void 0:r.id,this._httpClient.addDataLoading(this._sessionId,{getAsset:this._sdk.asset.getAsset.bind(this._sdk.asset),downloadTexture:this._sdk.asset.downloadImage.bind(this._sdk.asset)}),this._settingsEngine.loadSettings(this._viewerSettings),!this._sessionId)throw new u.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a sessionId.");if(!this._modelId)throw new u.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a model.id.");this.updateResponseDto(this._responseDto,t),this._initialized=!0}catch(i){return yield this.handleError(i,t),yield this.init(e,!0)}}))}loadOutputsParallel(e,t=(()=>!1),i,r=!1){var n;return o(this,void 0,void 0,(function*(){this.checkAvailability();let a={},s={};for(let t in e.outputs)e.outputs[t].id=t,void 0===this.outputsFreeze[t]&&(s[t]=!1),a[t]=new E.Output(e.outputs[t],this);try{const t=yield this._outputLoader.loadOutputs((null===(n=this._responseDto.model)||void 0===n?void 0:n.name)||"model",a,s,i);return t.data.push(new m.SessionData(e)),t}catch(n){if(!(n instanceof h.OutputDelayException))return yield this.handleError(n,r),t()?new f.SessionTreeNode:yield this.loadOutputsParallel(e,t,i,!0);if(yield this.timeout(n.delay),t())return new f.SessionTreeNode;let s={};for(let e in a)s[e]=a[e].version;try{const e=yield this._sdk.output.getCache(this._sessionId,s);return t()?new f.SessionTreeNode:(this.updateResponseDto(e),yield this.loadOutputsParallel(e,t,i))}catch(n){return yield this.handleError(n,r),t()?new f.SessionTreeNode:yield this.loadOutputsParallel(e,t,i,!0)}}}))}loadOutputs(e=(()=>!1),t,i=!1){var r;return o(this,void 0,void 0,(function*(){this.checkAvailability();const n=Object.assign({},this._outputs),a=Object.assign({},this._outputsFreeze);try{const i=yield this._outputLoader.loadOutputs((null===(r=this._responseDto.model)||void 0===r?void 0:r.name)||"model",n,a,t);return i.data.push(new m.SessionData(this._responseDto)),e()||(this._automaticSceneUpdate&&this.removeFromSceneTree(this._node),this._node=i,this._automaticSceneUpdate&&this.addToSceneTree(this._node),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports))),i}catch(r){if(!(r instanceof h.OutputDelayException))return yield this.handleError(r,i),e()?new f.SessionTreeNode:yield this.loadOutputs(e,t,!0);if(yield this.timeout(r.delay),e())return new f.SessionTreeNode;let a={};for(let e in n)a[e]=n[e].version;try{const i=yield this._sdk.output.getCache(this._sessionId,a);return e()?new f.SessionTreeNode:(this.updateResponseDto(i),yield this.loadOutputs(e,t))}catch(r){return yield this.handleError(r,i),e()?new f.SessionTreeNode:yield this.loadOutputs(e,t,!0)}}}))}requestExport(e,t,i,r=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("export");try{const r={};for(const e in t)r[e]=(" "+t[e]).slice(1);const n=yield this._sdk.utils.submitAndWaitForExport(this._sdk,this._sessionId,{exports:{id:e},parameters:r},i);return this.updateResponseDto(n),this.exports[e]}catch(n){return yield this.handleError(n,r),yield this.requestExport(e,t,i,!0)}}))}resetSettings(e){if(!this._responseDto)throw new u.ShapeDiverViewerSessionError("Session.resetSettings: responseDto not available.");return void 0===(e=e||{}).session&&(e.session={parameter:{displayname:!0,order:!0,hidden:!0},export:{displayname:!0,order:!0,hidden:!0}}),void 0===e.session.parameter&&(e.session.parameter={displayname:!0,order:!0,hidden:!0,value:!0}),void 0===e.session.export&&(e.session.export={displayname:!0,order:!0,hidden:!0}),void 0===e.viewport&&(e.viewport={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0}),this.applySettings(this._responseDto,e)}saveDefaultParameterValues(){return o(this,void 0,void 0,(function*(){this._logger.debugLow(`Session(${this.id}).saveDefaultParameters: Saving default parameters.`);const e=yield this.saveDefaultParameters();if(!e)throw new u.ShapeDiverViewerSessionError(`Session(${this.id}).saveDefaultParameters: Could not save default parameters.`);return this._logger.debug(`Session(${this.id}).saveDefaultParameters: Saved default parameters.`),e}))}saveDefaultParameters(e=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("defaultparam",!0);try{return yield this._sdk.model.setDefaultParams(this._modelId,this._parameterValues),!0}catch(t){return yield this.handleError(t,e),yield this.saveDefaultParameters(!0)}}))}saveExportProperties(e,t=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("export-definition",!0);try{return yield this._sdk.export.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveExportProperties(e,!0)}}))}saveOutputProperties(e,t=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("output-definition",!0);try{return yield this._sdk.output.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveOutputProperties(e,!0)}}))}saveParameterProperties(e,t=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("parameter-definition",!0);try{return yield this._sdk.model.updateParameterDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveParameterProperties(e,!0)}}))}saveSettings(e,t=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("configure",!0);try{(0,w.validate)(e,this._viewerSettingsVersion),+this._viewerSettingsVersion>+this._viewerSettingsVersionBackend&&(e=(0,w.convert)(e,this._viewerSettingsVersionBackend))}catch(e){throw new u.ShapeDiverViewerSettingsError("Session.saveSettings: Settings could not be validated. "+e.message,e)}try{return yield this._sdk.model.updateConfig(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveSettings(e,!0)}}))}saveUiProperties(e=!0){return o(this,void 0,void 0,(function*(){this._logger.debugLow(`Session(${this.id}).saveSessionProperties: Saving session properties.`),this._saveSessionSettings();let t={};for(let e in this.parameters)t[e]={displayname:void 0!==this.parameters[e].displayname?this.parameters[e].displayname:"",hidden:void 0!==this.parameters[e].hidden&&this.parameters[e].hidden,order:void 0!==this.parameters[e].order?this.parameters[e].order:0,tooltip:void 0!==this.parameters[e].tooltip?this.parameters[e].tooltip:""};const i=0===Object.values(t).length||(yield this.saveParameterProperties(t));t={};for(let e in this.exports)t[e]={displayname:void 0!==this.exports[e].displayname?this.exports[e].displayname:"",hidden:void 0!==this.exports[e].hidden&&this.exports[e].hidden,order:void 0!==this.exports[e].order?this.exports[e].order:0,tooltip:void 0!==this.exports[e].tooltip?this.exports[e].tooltip:""};const r=0===Object.values(t).length||(yield this.saveExportProperties(t));t={};for(let e in this.outputs)t[e]={displayname:void 0!==this.outputs[e].displayname?this.outputs[e].displayname:"",hidden:void 0!==this.outputs[e].hidden&&this.outputs[e].hidden,order:void 0!==this.outputs[e].order?this.outputs[e].order:0,tooltip:void 0!==this.outputs[e].tooltip?this.outputs[e].tooltip:""};const n=0===Object.values(t).length||(yield this.saveOutputProperties(t)),a=!e||(yield this.saveSettings(this._settingsEngine.settings));return a&&i&&n&&r?this._logger.debug(`Session(${this.id}).saveSessionProperties: Saved session properties.`):this._logger.warn(`Session(${this.id}).saveSessionProperties: Could not save session properties.`),a&&i&&n&&r}))}updateOutputs(e){return o(this,void 0,void 0,(function*(){const t=e?e.eventId:this._uuidGenerator.create(),i=e?e.type:v.TASK_TYPE.SESSION_OUTPUTS_UPDATE,n=e?e.data:{sessionId:this.id};if(!e){const e={type:i,id:t,progress:0,data:n,status:"Updating outputs"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,e)}const a=this._uuidGenerator.create(),s=this.node.cloneInstance();c(this,r,a,"f"),this._logger.debugLow(`Session(${this.id}).updateOutputs: Updating Outputs.`);for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.push(a);const o={type:i,id:t,progress:e?.1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.1,data:n,status:"Loading outputs"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,o);const h=yield this.loadOutputs((()=>l(this,r,"f")!==a),{eventId:t,type:i,progressRange:{min:e?.1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.1,max:e?.9*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.9},data:n}),d={type:i,id:t,progress:e?.9*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.9,data:n,status:"Updating scene"};if(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,d),l(this,r,"f")!==a){for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(a)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(a),1);const r={type:i,id:t,progress:e?1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:1,data:n,status:"Output updating was exceeded by other customization request"};return this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_CANCEL,r),this._logger.debug(`Session(${this.id}).updateOutputs: Output updating was exceeded by other request.`),h}this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=h,this.automaticSceneUpdate&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).updateOutputs: Updating outputs finished, updating geometry.`),this._updateCallback&&this._updateCallback(h,s);for(const e in this.outputs)this.outputs[e].updateOutput(h.children.find((t=>t.name===e)),s.children.find((t=>t.name===e)));for(const e in this.exports)this.exports[e].updateExport();this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports));for(let e in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[e].busy.includes(a)&&this._stateEngine.renderingEngines[e].busy.splice(this._stateEngine.renderingEngines[e].busy.indexOf(a),1);if(this._logger.debug(`Session(${this.id}).updateOutputs: Updated outputs.`),!e){const e={type:i,id:t,progress:1,data:n,status:"Outputs updated"};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,e)}return this.node}))}uploadFile(e,t,i,r=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("file-upload");try{const r=yield this._sdk.file.requestUpload(this._sessionId,{[e]:{size:t.size,format:i}});if(r&&r.asset&&r.asset.file&&r.asset.file[e]){const n=r.asset.file[e];return yield this._sdk.utils.upload(n.href,yield t.arrayBuffer(),i),n.id}throw new u.ShapeDiverViewerSessionError("Session.uploadFile: Upload reply has not the required format.")}catch(n){return yield this.handleError(n,r),yield this.uploadFile(e,t,i,!0)}}))}uploadGLTF(e,t=g.ShapeDiverRequestGltfUploadQueryConversion.NONE,i=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("gltf-upload");try{const i=yield this._sdk.gltf.upload(this._sessionId,yield e.arrayBuffer(),"model/gltf-binary",t);if(!i||!i.gltf||!i.gltf.href)throw new u.ShapeDiverViewerSessionError("Session.uploadGLTF: Upload reply has not the required format.");return i}catch(r){return yield this.handleError(r,i),yield this.uploadGLTF(e,t,!0)}}))}_saveSessionSettings(){const e=this.parameters,t=this.exports,i={};for(let t in e)i[t]={order:e[t].order||0,displayname:e[t].displayname||"",hidden:e[t].hidden};for(let e in t)i[e]={order:t[e].order||0,displayname:t[e].displayname||"",hidden:t[e].hidden};this._settingsEngine.session=i;let r=[];for(let e in this.outputs)r.push(this.outputs[e]);r.sort(((e,t)=>(e.order||1/0)-(t.order||1/0)));let n=r.filter((e=>0===e.order));r=r.filter((e=>!n.includes(e))),r=n.concat(r);const a=r.map((e=>e.id));for(let e=0;e<a.length;e++)this.outputs[a[e]]&&this.outputs[a[e]].order!==e&&(this.outputs[a[e]].order=e)}_warningCreator(){for(const e in this.outputs){let t="";this.outputs[e].msg&&(t+=`\n\t- ${this.outputs[e].msg}`),this.outputs[e].status_collect&&this.outputs[e].status_collect!==g.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_collect is ${this.outputs[e].status_collect}`),this.outputs[e].status_computation&&this.outputs[e].status_computation!==g.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_computation is ${this.outputs[e].status_computation}`),t&&this._logger.warn(`\nOutput(${e}):${t}`)}for(const e in this.exports){let t="";this.exports[e].msg&&(t+=`\n\t- ${this.exports[e].msg}`),this.exports[e].status_collect&&this.exports[e].status_collect!==g.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_collect is ${this.exports[e].status_collect}`),this.exports[e].status_computation&&this.exports[e].status_computation!==g.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_computation is ${this.exports[e].status_computation}`),t&&this._logger.warn(`\nExport(${e}):${t}`)}}checkAvailability(e,t=!1){var i;if(!this._responseDto)throw new u.ShapeDiverViewerSessionError("Session.checkAvailability: responseDto not available.");if(!this._sessionId)throw new u.ShapeDiverViewerSessionError("Session.checkAvailability: sessionId not available.");if(t&&!this._modelId)throw new u.ShapeDiverViewerSessionError("Session.checkAvailability: modelId not available.");if(e&&!this._responseDto.actions)throw new u.ShapeDiverViewerSessionError("Session.checkAvailability: actions not available.");const r=null===(i=this._responseDto.actions)||void 0===i?void 0:i.find((t=>t.name===e));if(e&&!r)throw new u.ShapeDiverViewerSessionError(`Session.checkAvailability: action ${e} not available.`)}customizeInternal(e,t){return o(this,void 0,void 0,(function*(){return this.customizeSession(this._parameterValues,e,t)}))}customizeSession(e,t,i,r=!1,n=!1){return o(this,void 0,void 0,(function*(){this.checkAvailability("customize");try{this._performanceEvaluator.startSection("sessionResponse");const n=yield this._sdk.utils.submitAndWaitForCustomization(this._sdk,this._sessionId,e);return this._performanceEvaluator.endSection("sessionResponse"),t()?new f.SessionTreeNode:(!1===r&&this.updateResponseDto(n),!1===r?this.loadOutputs(t,i):this.loadOutputsParallel(n,t,i))}catch(a){return yield this.handleError(a,n),t()?new f.SessionTreeNode:yield this.customizeSession(e,t,i,r,!0)}}))}handleError(e,t=!1){return o(this,void 0,void 0,(function*(){if(!(e instanceof g.ShapeDiverResponseError))throw this._httpClient.convertError(e);if(e.error===g.ShapeDiverResponseErrorType.SESSION_GONE_ERROR){if(this._logger.warn("The session has been closed, trying to re-initialize."),this._sessionId&&this._httpClient.removeDataLoading(this._sessionId),!(this._retryCounter<3)){this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}this._retryCounter=t?this._retryCounter+1:1,this._initialized=!1,yield this.init(this.parameterValues,!0)}else{if(e.error!==g.ShapeDiverResponseErrorType.JWT_VALIDATION_ERROR)throw this._httpClient.convertError(e);if(!(this._retryCounter<3)){this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}if(!this._refreshBearerToken){this._logger.warn("No retry possible, no new bearer token was supplied. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}this.bearerToken=yield this._refreshBearerToken(),this._retryCounter=t?this._retryCounter+1:1,this._logger.warn("Re-trying with new bearer token.")}}))}timeout(e){return o(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}updateResponseDto(e,t){if(!this._responseDto)return void(this._responseDto=e);if(e.parameters)for(let t in e.parameters)this._responseDto.parameters=this._responseDto.parameters||{},this._responseDto.parameters[t]=this._responseDto.parameters[t]||e.parameters[t];if(e.outputs)for(let t in e.outputs)this._responseDto.outputs=this._responseDto.outputs||{},!("version"in e.outputs[t])&&this._responseDto.outputs[t]&&"version"in this._responseDto.outputs[t]||(this._responseDto.outputs[t]=e.outputs[t]);if(e.exports)for(let t in e.exports)this._responseDto.exports=this._responseDto.exports||{},!("version"in e.exports[t])&&this._responseDto.exports[t]&&"version"in this._responseDto.exports[t]||(this._responseDto.exports[t]=e.exports[t]);const i={};for(let e in this._responseDto.parameters)if(!this.parameters[e]){switch(this._responseDto.parameters[e].id=e,!0){case this._responseDto.parameters[e].type===p.PARAMETER_TYPE.BOOL:case this._responseDto.parameters[e].type===p.PARAMETER_TYPE.COLOR:this.parameters[e]=new y.Parameter(this._responseDto.parameters[e],this);break;case this._responseDto.parameters[e].type===p.PARAMETER_TYPE.FILE:this.parameters[e]=new _.FileParameter(this._responseDto.parameters[e],this);break;case this._responseDto.parameters[e].type===p.PARAMETER_TYPE.EVEN||this._responseDto.parameters[e].type===p.PARAMETER_TYPE.FLOAT||this._responseDto.parameters[e].type===p.PARAMETER_TYPE.INT||this._responseDto.parameters[e].type===p.PARAMETER_TYPE.ODD:default:this.parameters[e]=new y.Parameter(this._responseDto.parameters[e],this)}t&&(void 0!==t[e]?this.parameters[e].value=t[e]:void 0!==t[this.parameters[e].name]&&(this.parameters[e].value=t[this.parameters[e].name])),i[e]={value:this.parameters[e].value,valueString:this.parameters[e].stringify()},this.initialized||(this.parameterValues[e]=i[e].valueString)}this.initialized||l(this,n,"f").push(i);for(let e in this._responseDto.exports)this._responseDto.exports[e].type!==g.ShapeDiverResponseExportDefinitionType.EMAIL&&this._responseDto.exports[e].type!==g.ShapeDiverResponseExportDefinitionType.DOWNLOAD||(this.exports[e]?this.exports[e].updateExportDefinition(this._responseDto.exports[e]):(this._responseDto.exports[e].id=e,this.exports[e]=new A.Export(this._responseDto.exports[e],this)));for(let e in this._responseDto.outputs)this.outputs[e]?this.outputs[e].updateOutputDefinition(this._responseDto.outputs[e]):(this._responseDto.outputs[e].id=e,void 0===this.outputsFreeze[e]&&(this.outputsFreeze[e]=!1),this.outputs[e]=new E.Output(this._responseDto.outputs[e],this))}addToSceneTree(e){this._sceneTree.addNode(e),this._sceneTree.root.updateVersion()}removeFromSceneTree(e){this._sceneTree.removeNode(e),this._sceneTree.root.updateVersion()}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},5414:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionOutputData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,void 0),n(this,r,e,"f")}get responseOutput(){return a(this,r,"f")}set responseOutput(e){n(this,r,e,"f")}clone(){return new o(this.responseOutput,this.id,this.version)}}t.SessionOutputData=o,r=new WeakMap},3574:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionTreeNode=void 0;const a=i(3858);class s extends a.TreeNode{constructor(e,t,i,n){super(e,t,i,n),r.set(this,!0)}get sessionNode(){return n(this,r,"f")}}t.SessionTreeNode=s,r=new WeakMap},1602:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E,w,S,T,x,M=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},R=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},P=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Export=void 0;const C=i(8877),k=i(7038);t.Export=class{constructor(e,t){r.set(this,C.EventEngine.instance),n.set(this,void 0),a.set(this,C.InputValidator.instance),s.set(this,C.Logger.instance),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,C.UuidGenerator.instance),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,!1),v.set(this,3e5),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,void 0),w.set(this,void 0),S.set(this,void 0),T.set(this,void 0),x.set(this,void 0),R(this,l,t,"f"),R(this,n,e.id,"f"),R(this,o,e.name,"f"),R(this,c,e.type,"f"),this.updateExportDefinition(e)}get content(){return P(this,h,"f")}get delay(){return P(this,d,"f")}get dependency(){return P(this,f,"f")}get displayname(){return P(this,p,"f")}set displayname(e){R(this,p,e,"f")}get filename(){return P(this,m,"f")}get group(){return P(this,g,"f")}get hidden(){return P(this,b,"f")}set hidden(e){R(this,b,e,"f")}get id(){return P(this,n,"f")}get maxWaitTime(){return P(this,v,"f")}set maxWaitTime(e){R(this,v,e,"f")}get msg(){return P(this,_,"f")}get name(){return P(this,o,"f")}get order(){return P(this,y,"f")}set order(e){R(this,y,e,"f")}get result(){return P(this,A,"f")}get status_collect(){return P(this,E,"f")}get status_computation(){return P(this,w,"f")}get tooltip(){return P(this,S,"f")}set tooltip(e){R(this,S,e,"f")}get type(){return P(this,c,"f")}get uid(){return P(this,T,"f")}get version(){return P(this,x,"f")}request(e={}){return M(this,void 0,void 0,(function*(){const t=P(this,u,"f").create();try{const i={type:k.TASK_TYPE.EXPORT_REQUEST,id:t,progress:0,status:"Requesting export"};P(this,r,"f").emitEvent(C.EVENTTYPE.TASK.TASK_START,i),P(this,s,"f").debugLow(`Export(${P(this,n,"f")}).request: Sending export request.`);const a=P(this,l,"f").parameterValues,o={};for(let t in a)o[t]=e[t]||""===e[t]?e[t]:a[t];P(this,s,"f").info(`Export(${P(this,n,"f")}).request: Sending export request with parameters ${JSON.stringify(o)}.`);const c=yield P(this,l,"f").requestExport(this.id,o,P(this,v,"f"));this.updateExportDefinition(c);const u={type:k.TASK_TYPE.EXPORT_REQUEST,id:t,progress:1,status:"Returning export"};return P(this,r,"f").emitEvent(C.EVENTTYPE.TASK.TASK_END,u),c}catch(e){const i={type:k.TASK_TYPE.EXPORT_REQUEST,id:t,progress:1,status:"Export request failed"};throw P(this,r,"f").emitEvent(C.EVENTTYPE.TASK.TASK_CANCEL,i),e}}))}updateExport(){const e=P(this,l,"f").exports[this.id];R(this,f,e.dependency,"f"),R(this,T,e.uid,"f"),R(this,p,e.displayname,"f"),R(this,y,e.order,"f"),R(this,b,e.hidden,"f"),R(this,S,e.tooltip,"f"),R(this,x,e.version,"f"),R(this,d,e.delay,"f"),R(this,h,e.content,"f"),R(this,_,e.msg,"f"),R(this,m,e.filename,"f"),R(this,A,e.result,"f"),R(this,w,e.status_computation,"f"),R(this,E,e.status_collect,"f"),R(this,g,e.group,"f")}updateExportDefinition(e){R(this,f,e.dependency,"f"),R(this,T,e.uid,"f"),R(this,p,e.displayname,"f"),R(this,y,e.order,"f"),R(this,b,e.hidden,"f"),R(this,S,e.tooltip,"f"),R(this,x,e.version,"f"),R(this,d,e.delay,"f"),R(this,h,e.content,"f"),R(this,_,e.msg,"f"),R(this,m,e.filename,"f"),R(this,A,e.result,"f"),R(this,w,e.status_computation,"f"),R(this,E,e.status_collect,"f"),R(this,g,e.group,"f")}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap},4615:function(e,t,i){"use strict";var r,n,a,s=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return o(t,e),t},c=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileParameter=void 0;const d=i(8877),f=i(3616),p=l(i(16));class m extends f.Parameter{constructor(e,t){super(e,t),r.set(this,d.Logger.instance),n.set(this,void 0),a.set(this,d.UuidGenerator.instance),u(this,n,t,"f")}upload(){var e;return c(this,void 0,void 0,(function*(){if(void 0===this.value)return this.defval;if("string"==typeof this.value&&(36===this.value.length&&h(this,a,"f").validate(this.value)||""===this.value))return this.value;const t=new File(["string"==typeof this.value?new Blob([this.value],{type:"text/plain"}):this.value],"upload",{type:this.value.type});let i,s=[t.type];p.mapMimeTypeToFileEndings(s).forEach((e=>s=s.concat(p.guessMimeTypeFromFilename(e))));let o=!1;for(let t=0;t<s.length;t++)if(null===(e=this.format)||void 0===e?void 0:e.includes(s[t])){o=!0,i=s[t];break}if(!o)throw new d.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${t.type}) is not a valid type. Has to be ${this.format}.`);return h(this,r,"f").debug(`Parameter(${this.id}).upload: Uploading FileParameter.`),yield h(this,n,"f").uploadFile(this.id,t,i)}))}}t.FileParameter=m,r=new WeakMap,n=new WeakMap,a=new WeakMap},3529:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E,w,S,T,x=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},M=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},R=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const P=i(8877);t.Output=class{constructor(e,t){r.set(this,void 0),n.set(this,P.InputValidator.instance),a.set(this,P.Logger.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,P.UuidGenerator.instance),c.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,!1),b.set(this,void 0),v.set(this,void 0),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,void 0),w.set(this,void 0),S.set(this,null),T.set(this,void 0),M(this,o,t,"f"),M(this,r,e.id,"f"),M(this,s,e.name,"f"),M(this,T,e.version,"f"),this.updateOutputDefinition(e)}get bbmax(){return R(this,c,"f")}get bbmin(){return R(this,u,"f")}get chunks(){return R(this,h,"f")}get content(){return R(this,d,"f")}set content(e){M(this,d,e,"f")}get delay(){return R(this,f,"f")}get dependency(){return R(this,p,"f")}get displayname(){return R(this,m,"f")}set displayname(e){M(this,m,e,"f")}get format(){return R(this,d,"f")?R(this,d,"f").map((e=>e.format)):[]}get freeze(){return R(this,o,"f").outputsFreeze[R(this,r,"f")]}set freeze(e){R(this,o,"f").outputsFreeze[R(this,r,"f")]=e}get hidden(){return R(this,g,"f")}set hidden(e){M(this,g,e,"f")}get id(){return R(this,r,"f")}get material(){return R(this,b,"f")}get msg(){return R(this,v,"f")}get name(){return R(this,s,"f")}get node(){return R(this,o,"f").node.children.find((e=>e.name===this.id))}get order(){return R(this,_,"f")}set order(e){M(this,_,e,"f")}get status_collect(){return R(this,y,"f")}get status_computation(){return R(this,A,"f")}get tooltip(){return R(this,E,"f")}set tooltip(e){M(this,E,e,"f")}get uid(){return R(this,w,"f")}get updateCallback(){return R(this,S,"f")}set updateCallback(e){M(this,S,e,"f")}get version(){return R(this,T,"f")}set version(e){M(this,T,e,"f")}updateOutput(e,t){const i=R(this,o,"f").outputs[this.id];if(this.updateOutputDefinition(i),this.chunks&&e)for(let t=0;t<e.children.length;t++)for(let i=0;i<this.chunks.length;i++)this.chunks[i].node=e.children[t].children.find((e=>e.name===this.chunks[i].id));R(this,S,"f")&&R(this,S,"f").call(this,e,t)}updateOutputContent(e,t=!1){return x(this,void 0,void 0,(function*(){return R(this,o,"f").outputs[this.id].content=e,R(this,o,"f").outputs[this.id].version=R(this,l,"f").create(),t||(yield R(this,o,"f").updateOutputs()),this.node}))}updateOutputDefinition(e){M(this,p,e.dependency,"f"),M(this,w,e.uid,"f"),M(this,b,e.material,"f"),M(this,h,e.chunks,"f"),M(this,v,e.msg,"f"),void 0!==R(this,v,"f")&&R(this,a,"f").warn(`Output(${this.id}): ${R(this,v,"f")}`),M(this,u,e.bbmin,"f"),M(this,c,e.bbmax,"f"),M(this,A,e.status_computation,"f"),M(this,y,e.status_collect,"f"),M(this,d,e.content,"f"),M(this,f,e.delay,"f"),M(this,T,e.version,"f"),M(this,m,e.displayname,"f"),M(this,_,e.order,"f"),M(this,g,e.hidden,"f")}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap},3616:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E,w,S,T,x,M,R=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),P=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),C=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&R(t,e,i);return P(t,e),t},k=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},O=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;const D=i(8877),N=i(4513),I=C(i(16));t.Parameter=class{constructor(e,t){r.set(this,void 0),n.set(this,D.Converter.instance),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,D.InputValidator.instance),f.set(this,D.Logger.instance),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),v.set(this,void 0),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,!1),w.set(this,void 0),S.set(this,void 0),T.set(this,void 0),x.set(this,void 0),M.set(this,void 0),k(this,b,t,"f"),k(this,h,e.id,"f"),k(this,o,e.defval,"f"),k(this,g,e.name,"f"),k(this,_,e.type,"f"),void 0!==e.choices&&k(this,r,e.choices,"f"),void 0!==e.decimalplaces&&k(this,a,+e.decimalplaces,"f"),void 0!==e.expression&&k(this,l,e.expression,"f"),void 0!==e.format&&k(this,c,I.extendMimeTypes(e.format),"f"),void 0!==e.min&&k(this,m,+e.min,"f"),void 0!==e.max&&k(this,p,+e.max,"f"),void 0!==e.visualization&&k(this,y,e.visualization,"f"),void 0!==e.structure&&k(this,v,e.structure,"f"),void 0!==e.group&&k(this,u,e.group,"f"),void 0!==e.tooltip&&k(this,x,e.tooltip,"f"),void 0!==e.displayname&&k(this,A,e.displayname,"f"),void 0!==e.order&&k(this,S,e.order,"f"),void 0!==e.hidden&&k(this,E,e.hidden,"f"),O(this,_,"f")===N.PARAMETER_TYPE.BOOL?k(this,s,"true"===O(this,o,"f"),"f"):O(this,_,"f")===N.PARAMETER_TYPE.EVEN||O(this,_,"f")===N.PARAMETER_TYPE.FLOAT||O(this,_,"f")===N.PARAMETER_TYPE.INT||O(this,_,"f")===N.PARAMETER_TYPE.ODD?k(this,s,+O(this,o,"f"),"f"):k(this,s,O(this,o,"f"),"f"),O(this,_,"f")===N.PARAMETER_TYPE.COLOR&&(this.convertColor=e=>O(this,n,"f").toHexColor(e)),k(this,M,O(this,s,"f"),"f"),k(this,T,O(this,M,"f"),"f"),k(this,w,O(this,M,"f"),"f")}get choices(){return O(this,r,"f")}get decimalplaces(){return O(this,a,"f")}get defval(){return O(this,o,"f")}get displayname(){return O(this,A,"f")}set displayname(e){k(this,A,e,"f")}get expression(){return O(this,l,"f")}get format(){return O(this,c,"f")}get group(){return O(this,u,"f")}get hidden(){return O(this,E,"f")}set hidden(e){k(this,E,e,"f")}get id(){return O(this,h,"f")}get lastValidatedValue(){return O(this,w,"f")}get max(){return O(this,p,"f")}get min(){return O(this,m,"f")}get name(){return O(this,g,"f")}get order(){return O(this,S,"f")}set order(e){k(this,S,e,"f")}get sessionValue(){return O(this,T,"f")}set sessionValue(e){k(this,T,e,"f")}get structure(){return O(this,v,"f")}get tooltip(){return O(this,x,"f")}set tooltip(e){k(this,x,e,"f")}get type(){return O(this,_,"f")}get value(){return O(this,M,"f")}set value(e){k(this,M,e,"f"),O(this,b,"f").customizeOnParameterChange&&O(this,b,"f").customize()}get visualization(){return O(this,y,"f")}isValid(e){switch(!0){case this.type===N.PARAMETER_TYPE.BOOL:if("string"==typeof e){if("true"!==e&&"false"!==e)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is a string that is neither true or false.`)}else O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"boolean");break;case this.type===N.PARAMETER_TYPE.COLOR:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"color");break;case this.type===N.PARAMETER_TYPE.FILE:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"file");break;case this.type===N.PARAMETER_TYPE.EVEN||this.type===N.PARAMETER_TYPE.FLOAT||this.type===N.PARAMETER_TYPE.INT||this.type===N.PARAMETER_TYPE.ODD:let t=e;if("string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),this.type===N.PARAMETER_TYPE.EVEN){if(t%2!=0)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not even.`)}else if(this.type===N.PARAMETER_TYPE.ODD){if(t%2==0)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not odd.`)}else if(this.type===N.PARAMETER_TYPE.INT&&!Number.isInteger(t))throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not an integer.`);if((this.min||0===this.min)&&t<this.min)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is smaller than the minimum ${this.min}.`);if((this.max||0===this.max)&&t>this.max)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is larger than the maximum ${this.max}.`);if(this.decimalplaces||0===this.decimalplaces){const i=t+"";let r=0;if(i.includes(".")&&(r=i.split(".")[1].length),this.decimalplaces<r)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} has not the correct number of decimalplaces (${this.decimalplaces}).`)}break;case this.type===N.PARAMETER_TYPE.STRINGLIST:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"string");const i=e=>{const t=+e;if(O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),t<0||t>this.choices.length-1)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not within the range of the defined number choices.`)};if(this.visualization===N.PARAMETER_VISUALIZATION.CHECKLIST)if(e.includes(",")){const t=e.split(",");for(let e=0;e<t.length;e++){if(1!==t.filter((i=>i===t[e])).length)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${t[e]} exists multiple times, but should only exist once.`);i(t[e])}}else{let t=e;"string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),i(e)}else{let t=e;"string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),i(e)}break;default:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"string")}return!0}resetToDefaultValue(){k(this,M,O(this,s,"f"),"f")}resetToSessionValue(){k(this,M,this.sessionValue,"f")}stringify(){switch(!0){case this.type===N.PARAMETER_TYPE.BOOL:return"string"==typeof this.value?this.value:this.value+"";case this.type===N.PARAMETER_TYPE.COLOR:return O(this,n,"f").toHex8Color(this.value);case this.type===N.PARAMETER_TYPE.FILE:if("string"!=typeof this.value)throw new D.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).stringify: Error in stringify. Cannot stringify FileParameter that has not been uploaded yet.`);return this.value;case this.type===N.PARAMETER_TYPE.EVEN||this.type===N.PARAMETER_TYPE.FLOAT||this.type===N.PARAMETER_TYPE.INT||this.type===N.PARAMETER_TYPE.ODD:return"string"==typeof this.value?this.decimalplaces||0===this.decimalplaces?(+this.value).toFixed(O(this,a,"f")):this.value:this.decimalplaces||0===this.decimalplaces?this.value.toFixed(O(this,a,"f")):this.value+"";default:return this.value}}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap},9878:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=t.Export=t.FileParameter=t.Parameter=t.Output=t.SessionEngine=t.SessionOutputData=t.SessionData=void 0;const r=i(5446);Object.defineProperty(t,"SessionEngine",{enumerable:!0,get:function(){return r.SessionEngine}});const n=i(4513);Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return n.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return n.PARAMETER_VISUALIZATION}});const a=i(5414);Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return a.SessionOutputData}});const s=i(6042);Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return s.SessionData}});const o=i(1602);Object.defineProperty(t,"Export",{enumerable:!0,get:function(){return o.Export}});const l=i(4615);Object.defineProperty(t,"FileParameter",{enumerable:!0,get:function(){return l.FileParameter}});const c=i(3529);Object.defineProperty(t,"Output",{enumerable:!0,get:function(){return c.Output}});const u=i(3616);Object.defineProperty(t,"Parameter",{enumerable:!0,get:function(){return u.Parameter}})},4513:(e,t)=>{"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=void 0,(r=t.PARAMETER_TYPE||(t.PARAMETER_TYPE={})).FLOAT="Float",r.INT="Int",r.EVEN="Even",r.ODD="Odd",r.STRING="String",r.COLOR="Color",r.STRINGLIST="StringList",r.BOOL="Bool",r.TIME="Time",r.FILE="File",r.SNUMBER="sNumber",r.SINTEGER="sInteger",r.SSTRING="sString",r.SCOLOR="sColor",r.SBOOL="sBool",r.STIME="sTime",r.SBITMAP="sBitmap",r.SDOMAIN="sDomain",r.SDOMAIN2D="sDomain2D",r.SPOINT="sPoint",r.SLINE="sLine",r.SVECTOR="sVector",r.SBOX="sBox",r.SPLANE="sPlane",r.SRECTANGLE="sRectangle",r.SCURVE="sCurve",r.SCIRCLE="sCircle",r.SMESH="sMesh",r.SSURFACE="sSurface",r.SBREP="sBrep",r.SSUBDIV="sSubdiv",(i=t.PARAMETER_VISUALIZATION||(t.PARAMETER_VISUALIZATION={})).SLIDER="slider",i.SEQUENCE="sequence",i.CYCLE="cycle",i.DROPDOWN="dropdown",i.CHECKLIST="checklist",i.CLOCK="color",i.CALENDAR="calendar",i.TOGGLE="toggle",i.SWATCH="swatch",i.BUTTON="button",i.DIAL="dial",i.TEXT="text"},148:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.latestVersion=t.evaluateSettingsVersion=t.validate=t.convert=t.DefaultsV3_4=t.DefaultsV3_3=t.DefaultsV3_2=t.DefaultsV3_1=t.DefaultsV3=t.DefaultsV2=t.DefaultsV1=void 0;const r=i(7317);Object.defineProperty(t,"DefaultsV1",{enumerable:!0,get:function(){return r.Defaults}});const n=i(865),a=i(1693);Object.defineProperty(t,"DefaultsV2",{enumerable:!0,get:function(){return a.Defaults}});const s=i(6024),o=i(4808),l=i(8719);Object.defineProperty(t,"DefaultsV3",{enumerable:!0,get:function(){return l.Defaults}});const c=i(3181),u=i(4307),h=i(3160);Object.defineProperty(t,"DefaultsV3_1",{enumerable:!0,get:function(){return h.Defaults}});const d=i(4612),f=i(2315),p=i(8897);Object.defineProperty(t,"DefaultsV3_2",{enumerable:!0,get:function(){return p.Defaults}});const m=i(9927),g=i(1079),b=i(4522);Object.defineProperty(t,"DefaultsV3_3",{enumerable:!0,get:function(){return b.Defaults}});const v=i(2025),_=i(767),y=i(9579);Object.defineProperty(t,"DefaultsV3_4",{enumerable:!0,get:function(){return y.Defaults}});const A=i(6835),E=i(3506);let w=[];w.push({version:"1.0",defaults:r.Defaults,convertToPrevious:e=>e,convertFromPrevious:e=>e,validate:n.validate}),w.push({version:"2.0",defaults:a.Defaults,convertToPrevious:o.convertToPrevious,convertFromPrevious:o.convertFromPrevious,validate:s.validate}),w.push({version:"3.0",defaults:l.Defaults,convertToPrevious:u.convertToPrevious,convertFromPrevious:u.convertFromPrevious,validate:c.validate}),w.push({version:"3.1",defaults:h.Defaults,convertToPrevious:f.convertToPrevious,convertFromPrevious:f.convertFromPrevious,validate:d.validate}),w.push({version:"3.2",defaults:p.Defaults,convertToPrevious:g.convertToPrevious,convertFromPrevious:g.convertFromPrevious,validate:m.validate}),w.push({version:"3.3",defaults:b.Defaults,convertToPrevious:_.convertToPrevious,convertFromPrevious:_.convertFromPrevious,validate:v.validate}),w.push({version:"3.4",defaults:y.Defaults,convertToPrevious:E.convertToPrevious,convertFromPrevious:E.convertFromPrevious,validate:A.validate}),t.convert=(e,t)=>{const i=e.settings_version||"1.0";if(i===t)return e;const r=w.findIndex((e=>e.version===t)),n=w.findIndex((e=>e.version===i));if(-1===r)throw new Error("ViewerSettings.convert: Target version not available");if(-1===n)throw new Error("ViewerSettings.convert: Settings version not available");let a=e;if(r<n)for(let e=n;r<e;e--)a=w[e].convertToPrevious(a,i);else for(let e=n+1;e<=r;e++)a=w[e].convertFromPrevious(a,i);return a},t.validate=(e,t)=>{const i=e.settings_version||"1.0";if(void 0!==t){const r=w.findIndex((e=>e.version===t));if(-1===r)throw new Error("ViewerSettings.validate: Target version was not found.");if(void 0!==i&&i!==t)throw new Error("ViewerSettings.validate: The settings do have a different version than the target version.");w[r].validate(e)}else{if(!i)throw new Error("ViewerSettings.validate: Settings do not have a version specified.");const t=w.findIndex((e=>e.version===i));w[t].validate(e)}},t.evaluateSettingsVersion=e=>{if(!e||e.startsWith("1"))return"1.0";if(e.startsWith("2"))return+e.split(".")[1]>=18?"2.0":"1.0";if(e.startsWith("3")){const t=e.split(".");return 2==+t[1]&&+t[2]>=9||+t[1]>2?"3.4":2==+t[1]&&+t[2]>=7||+t[1]>2?"3.3":2==+t[1]&&+t[2]>=6||+t[1]>2?"3.2":1==+t[1]&&+t[2]>=12||+t[1]>1?"3.1":"3.0"}return"1.0"},t.latestVersion="3.4"},7317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"1.0",ambientOcclusion:!0,autoRotateSpeed:0,backgroundColor:"#ffffff",bumpAmplitude:1,camera:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraAutoAdjust:!1,cameraMovementDuration:0,cameraOrtho:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraRevertAtMouseUp:!1,clearAlpha:1,clearColor:"#ffffff",commitParameters:!1,controlDamping:.1,controlNames:{},controlOrder:[],defaultMaterialColor:"#d3d3d3",disablePan:!1,disableZoom:!1,enableAutoRotation:!1,enableRotation:!0,environmentMap:"none",environmentMapResolution:"1024",fov:45,lightScene:"default",lightScenes:null,panSpeed:.5,parametersHidden:[],pointSize:1,revertAtMouseUpDuration:800,rotateSpeed:.25,showEnvironmentMap:!1,showGrid:!1,showGroundPlane:!1,showShadows:!0,topView:!1,zoomExtentFactor:1,zoomSpeed:1})},865:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({id:n.default.string().optional(),name:n.default.string().optional(),type:n.default.string().optional(),properties:n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),direction:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),position:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),target:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),castShadow:n.default.boolean().optional(),skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),intensity:n.default.number().unsafe().optional(),distance:n.default.number().unsafe().optional(),angle:n.default.number().unsafe().optional(),penumbra:n.default.number().unsafe().optional(),decay:n.default.number().unsafe().optional(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()})}).optional(),s=n.default.object().pattern(/^/,[a]),o=n.default.object().pattern(/^/,[n.default.object({id:n.default.string(),name:n.default.string().optional(),lights:s.schema()})]),l=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string().optional(),ambientOcclusion:n.default.boolean().optional(),autoRotateSpeed:n.default.number().unsafe().min(0).optional(),backgroundColor:n.default.string().optional(),bumpAmplitude:n.default.number().unsafe().min(0).optional(),camera:n.default.object({position:n.default.object({x:n.default.number().unsafe().optional(),y:n.default.number().unsafe().optional(),z:n.default.number().unsafe().optional()}).optional(),target:n.default.object({x:n.default.number().unsafe().optional(),y:n.default.number().unsafe().optional(),z:n.default.number().unsafe().optional()}).optional()}).optional(),cameraAutoAdjust:n.default.boolean().optional(),cameraMovementDuration:n.default.number().unsafe().min(0).optional(),cameraOrtho:n.default.object({position:n.default.object({x:n.default.number().unsafe().optional(),y:n.default.number().unsafe().optional(),z:n.default.number().unsafe().optional()}).optional(),target:n.default.object({x:n.default.number().unsafe().optional(),y:n.default.number().unsafe().optional(),z:n.default.number().unsafe().optional()}).optional()}).optional(),cameraRevertAtMouseUp:n.default.boolean().optional(),clearAlpha:n.default.number().unsafe().min(0).max(1).optional(),clearColor:n.default.string().optional(),commitParameters:n.default.boolean().optional(),controlDamping:n.default.number().unsafe().min(0).optional(),controlNames:n.default.object().pattern(/.*/,[n.default.string()]).optional(),controlOrder:n.default.array().items(n.default.string()).optional(),defaultMaterialColor:n.default.alternatives([n.default.string(),n.default.array().items(n.default.number().unsafe())]).optional(),disablePan:n.default.boolean().optional(),disableZoom:n.default.boolean().optional(),enableAutoRotation:n.default.boolean().optional(),enableRotation:n.default.boolean().optional(),environmentMap:n.default.alternatives([n.default.string(),n.default.array().items(n.default.string())]).optional(),environmentMapResolution:n.default.string().optional(),fov:n.default.number().unsafe().positive().max(180).optional(),lightScene:n.default.string().optional(),lightScenes:o.allow(null).optional(),panSpeed:n.default.number().unsafe().min(0).optional(),parametersHidden:n.default.array().items(n.default.string()).optional(),pointSize:n.default.number().unsafe().min(0).optional(),revertAtMouseUpDuration:n.default.number().unsafe().min(0).optional(),rotateSpeed:n.default.number().unsafe().min(0).optional(),showEnvironmentMap:n.default.boolean().optional(),showGrid:n.default.boolean().optional(),showGroundPlane:n.default.boolean().optional(),showShadows:n.default.boolean().optional(),topView:n.default.boolean().optional(),zoomExtentFactor:n.default.number().unsafe().min(0).optional(),zoomSpeed:n.default.number().unsafe().min(0).optional()}).options({allowUnknown:!0});t.validate=e=>{e=n.default.attempt(e,l).value}},4808:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(7317),n=i(1693);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;return void 0!==r.clearAlpha&&(i.viewer.scene.render.clearAlpha=r.clearAlpha),void 0!==r.clearColor&&(i.viewer.scene.render.clearColor=r.clearColor),void 0===r.clearAlpha&&void 0===r.clearColor&&void 0!==r.backgroundColor&&(i.viewer.scene.render.clearColor=r.backgroundColor),void 0!==r.defaultMaterialColor&&(i.defaultMaterial.color=r.defaultMaterialColor),i.build_date=r.build_date,i.build_version=r.build_version,void 0!==r.camera&&void 0!==r.camera.position&&void 0!==r.camera.target&&void 0!==r.camera.position.x&&void 0!==r.camera.position.y&&void 0!==r.camera.position.z&&void 0!==r.camera.target.x&&void 0!==r.camera.target.y&&void 0!==r.camera.target.z&&(5===r.camera.position.x&&5===r.camera.position.y&&5===r.camera.position.z&&0===r.camera.target.x&&0===r.camera.target.y&&0===r.camera.target.z||0===r.camera.position.x&&0===r.camera.position.y&&0===r.camera.position.z&&0===r.camera.target.x&&0===r.camera.target.y&&0===r.camera.target.z||(i.viewer.scene.camera.cameraTypes.perspective.default.position=r.camera.position,i.viewer.scene.camera.cameraTypes.perspective.default.target=r.camera.target)),void 0!==r.cameraOrtho&&void 0!==r.cameraOrtho.position&&void 0!==r.cameraOrtho.target&&void 0!==r.cameraOrtho.position.x&&void 0!==r.cameraOrtho.position.y&&void 0!==r.cameraOrtho.position.z&&void 0!==r.cameraOrtho.target.x&&void 0!==r.cameraOrtho.target.y&&void 0!==r.cameraOrtho.target.z&&(5===r.cameraOrtho.position.x&&5===r.cameraOrtho.position.y&&5===r.cameraOrtho.position.z&&0===r.cameraOrtho.target.x&&0===r.cameraOrtho.target.y&&0===r.cameraOrtho.target.z||0===r.cameraOrtho.position.x&&0===r.cameraOrtho.position.y&&0===r.cameraOrtho.position.z&&0===r.cameraOrtho.target.x&&0===r.cameraOrtho.target.y&&0===r.cameraOrtho.target.z?!r.topView||5===r.cameraOrtho.position.x&&5===r.cameraOrtho.position.y&&5===r.cameraOrtho.position.z&&0===r.cameraOrtho.target.x&&0===r.cameraOrtho.target.y&&0===r.cameraOrtho.target.z||0===r.cameraOrtho.position.x&&0===r.cameraOrtho.position.y&&0===r.cameraOrtho.position.z&&0===r.cameraOrtho.target.x&&0===r.cameraOrtho.target.y&&0===r.cameraOrtho.target.z||void 0!==r.camera&&void 0!==r.camera.position&&void 0!==r.camera.target&&void 0!==r.camera.position.x&&void 0!==r.camera.position.y&&void 0!==r.camera.position.z&&void 0!==r.camera.target.x&&void 0!==r.camera.target.y&&void 0!==r.camera.target.z&&(i.viewer.scene.camera.cameraTypes.orthographic.default.position=r.camera.position,i.viewer.scene.camera.cameraTypes.orthographic.default.target=r.camera.target):(i.viewer.scene.camera.cameraTypes.orthographic.default.position=r.cameraOrtho.position,i.viewer.scene.camera.cameraTypes.orthographic.default.target=r.cameraOrtho.target)),void 0!==r.ambientOcclusion&&(i.viewer.scene.render.ambientOcclusion=r.ambientOcclusion),void 0!==r.autoRotateSpeed&&(i.viewer.scene.camera.controls.orbit.autoRotationSpeed=r.autoRotateSpeed),void 0!==r.bumpAmplitude&&(i.defaultMaterial.bumpAmplitude=r.bumpAmplitude),void 0!==r.cameraAutoAdjust&&(i.viewer.scene.camera.autoAdjust=r.cameraAutoAdjust),void 0!==r.cameraMovementDuration&&(i.viewer.scene.camera.cameraMovementDuration=r.cameraMovementDuration),void 0!==r.cameraRevertAtMouseUp&&(i.viewer.scene.camera.revertAtMouseUp=r.cameraRevertAtMouseUp),void 0!==r.commitParameters&&(i.viewer.commitParameters=r.commitParameters),void 0!==r.controlDamping&&(i.viewer.scene.camera.controls.orbit.damping=r.controlDamping),void 0!==r.controlDamping&&(i.viewer.scene.camera.controls.orthographic.damping=r.controlDamping),void 0!==r.controlNames&&(i.parameters.controlNames=r.controlNames),void 0!==r.controlOrder&&(i.parameters.controlOrder=r.controlOrder),void 0!==r.disablePan&&(i.viewer.scene.camera.controls.orbit.enablePan=!r.disablePan),void 0!==r.disablePan&&(i.viewer.scene.camera.controls.orthographic.enablePan=!r.disablePan),void 0!==r.disableZoom&&(i.viewer.scene.camera.controls.orbit.enableZoom=!r.disableZoom),void 0!==r.disableZoom&&(i.viewer.scene.camera.controls.orthographic.enableZoom=!r.disableZoom),void 0!==r.enableAutoRotation&&(i.viewer.scene.camera.controls.orbit.enableAutoRotation=r.enableAutoRotation),void 0!==r.enableRotation&&(i.viewer.scene.camera.controls.orbit.enableRotation=r.enableRotation),void 0!==r.environmentMap&&(i.viewer.scene.material.environmentMap=r.environmentMap),void 0!==r.environmentMapResolution&&(i.viewer.scene.material.environmentMapResolution=r.environmentMapResolution),void 0!==r.fov&&(i.viewer.scene.camera.cameraTypes.perspective.fov=r.fov),void 0!==r.lightScene&&(i.viewer.scene.lights.lightScene=r.lightScene),void 0!==r.lightScenes&&(i.viewer.scene.lights.lightScenes=r.lightScenes),void 0!==r.panSpeed&&(i.viewer.scene.camera.controls.orbit.panSpeed=r.panSpeed),void 0!==r.parametersHidden&&(i.parameters.parametersHidden=r.parametersHidden),void 0!==r.pointSize&&(i.viewer.scene.render.pointSize=r.pointSize),void 0!==r.revertAtMouseUpDuration&&(i.viewer.scene.camera.revertAtMouseUpDuration=r.revertAtMouseUpDuration),void 0!==r.rotateSpeed&&(i.viewer.scene.camera.controls.orbit.rotationSpeed=r.rotateSpeed),void 0!==r.showEnvironmentMap&&(i.viewer.scene.material.environmentMapAsBackground=r.showEnvironmentMap),void 0!==r.showGrid&&(i.viewer.scene.gridVisibility=r.showGrid),void 0!==r.showGroundPlane&&(i.viewer.scene.groundPlaneVisibility=r.showGroundPlane),void 0!==r.showShadows&&(i.viewer.scene.render.shadows=r.showShadows),r.topView&&(i.viewer.scene.camera.cameraTypes.active=1),void 0!==r.zoomExtentFactor&&(i.viewer.scene.camera.zoomExtentsFactor=r.zoomExtentFactor),void 0!==r.zoomSpeed&&(i.viewer.scene.camera.controls.orbit.zoomSpeed=r.zoomSpeed),void 0!==r.zoomSpeed&&(i.viewer.scene.camera.controls.orthographic.zoomSpeed=r.zoomSpeed),i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.build_date=n.build_date,i.build_version=n.build_version,i.ambientOcclusion=n.viewer.scene.render.ambientOcclusion,i.autoRotateSpeed=n.viewer.scene.camera.controls.orbit.autoRotationSpeed,i.bumpAmplitude=n.defaultMaterial.bumpAmplitude,i.camera={position:n.viewer.scene.camera.cameraTypes.perspective.default.position,target:n.viewer.scene.camera.cameraTypes.perspective.default.target},i.cameraAutoAdjust=n.viewer.scene.camera.autoAdjust,i.cameraMovementDuration=n.viewer.scene.camera.cameraMovementDuration,i.cameraOrtho={position:n.viewer.scene.camera.cameraTypes.orthographic.default.position,target:n.viewer.scene.camera.cameraTypes.orthographic.default.target},i.cameraRevertAtMouseUp=n.viewer.scene.camera.revertAtMouseUp,i.clearAlpha=n.viewer.scene.render.clearAlpha,i.clearColor=n.viewer.scene.render.clearColor,i.commitParameters=n.viewer.commitParameters,i.controlDamping=n.viewer.scene.camera.controls.orbit.damping,n.parameters&&n.parameters.controlNames&&(i.controlNames=n.parameters.controlNames),n.parameters&&n.parameters.controlOrder&&(i.controlOrder=n.parameters.controlOrder),i.defaultMaterialColor=n.defaultMaterial.color,i.disablePan=!n.viewer.scene.camera.controls.orbit.enablePan,i.disableZoom=!n.viewer.scene.camera.controls.orbit.enableZoom,i.enableAutoRotation=n.viewer.scene.camera.controls.orbit.enableAutoRotation,i.enableRotation=n.viewer.scene.camera.controls.orbit.enableRotation,i.environmentMap=n.viewer.scene.material.environmentMap,i.environmentMapResolution=n.viewer.scene.material.environmentMapResolution,i.fov=n.viewer.scene.camera.cameraTypes.perspective.fov,i.lightScene=n.viewer.scene.lights.lightScene,i.lightScenes=n.viewer.scene.lights.lightScenes,i.panSpeed=n.viewer.scene.camera.controls.orbit.panSpeed,n.parameters&&n.parameters.parametersHidden&&(i.parametersHidden=n.parameters.parametersHidden),i.pointSize=n.viewer.scene.render.pointSize,i.revertAtMouseUpDuration=n.viewer.scene.camera.revertAtMouseUpDuration,i.rotateSpeed=n.viewer.scene.camera.controls.orbit.rotationSpeed,i.showEnvironmentMap=n.viewer.scene.material.environmentMapAsBackground,i.showGrid=n.viewer.scene.gridVisibility,i.showGroundPlane=n.viewer.scene.groundPlaneVisibility,i.showShadows=n.viewer.scene.render.shadows,i.topView=1===n.viewer.scene.camera.cameraTypes.active,i.zoomExtentFactor=n.viewer.scene.camera.zoomExtentsFactor,i.zoomSpeed=n.viewer.scene.camera.controls.orbit.zoomSpeed,i.backgroundColor=n.viewer.scene.render.clearColor,i}},1693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"2.0",ar:{enableCameraSync:!1,enableCameraSyncInitial:!1,enableLightingEstimation:!0,enableTouchControls:!0,enableTouchControlRotation:!0,enableAutomaticPlacement:!0,defaultHitTestType:"existingPlaneUsingGeometry"},defaultMaterial:{bumpAmplitude:1,color:"#d3d3d3",metalness:0,roughness:1},parameters:{controlOrder:[],controlNames:{},parametersHidden:[]},viewer:{blurSceneWhenBusy:!0,ignoreSuperseded:!0,loggingLevel:-1,messageLoggingLevel:-1,showMessages:!0,hasRestoredSettings:!1,useModelSettings:!1,commitParameters:!1,commitSettings:!1,viewerRuntimeId:"",scene:{show:!1,showSceneTransition:"1s",camera:{autoAdjust:!1,cameraMovementDuration:800,cameraTypes:{perspective:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},fov:45,controls:0},orthographic:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}}},active:0},controls:{orbit:{autoRotationSpeed:0,damping:.1,enableAutoRotation:!1,enableKeyPan:!1,enablePan:!0,enableRotation:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,restrictions:{position:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},target:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},rotation:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},zoom:{minDistance:0,maxDistance:1/0}},rotationSpeed:.5,panSpeed:.5,zoomSpeed:.5},fps:{},orthographic:{damping:.1,enableKeyPan:!1,enablePan:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,panSpeed:.5,zoomSpeed:.5}},enableCameraControls:!0,revertAtMouseUp:!1,revertAtMouseUpDuration:800,zoomExtentsFactor:1},duration:0,fullscreen:!1,gridVisibility:!0,groundPlaneReflectionThreshold:.01,groundPlaneReflectionVisibility:!1,groundPlaneVisibility:!0,lights:{helper:!1,lightScene:"default",lightScenes:{}},material:{environmentMap:"none",environmentMapAsBackground:!1,environmentMapResolution:"1024"},render:{ambientOcclusion:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,clearColor:"#ffffff",clearAlpha:1,pointSize:1,shadows:!0,sao:{samples:8,intensity:.1,kernelRadius:8,standardDev:25}}}}})},6024:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({id:n.default.string(),name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:{color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),direction:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),position:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),target:n.default.object({x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}).optional(),castShadow:n.default.boolean().optional(),skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]).optional(),intensity:n.default.number().unsafe().optional(),distance:n.default.number().unsafe().optional(),angle:n.default.number().unsafe().optional(),penumbra:n.default.number().unsafe().optional(),decay:n.default.number().unsafe().optional(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}}),s=n.default.object().pattern(/^/,[n.default.object({id:n.default.string(),name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[a])})]),o=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enableCameraSync:n.default.boolean().optional(),enableCameraSyncInitial:n.default.boolean().optional(),enableLightingEstimation:n.default.boolean().optional(),enableTouchControls:n.default.boolean().optional(),enableTouchControlRotation:n.default.boolean().optional(),enableAutomaticPlacement:n.default.boolean().optional(),defaultHitTestType:n.default.string().optional()}).optional(),defaultMaterial:{bumpAmplitude:n.default.number().unsafe().optional(),color:n.default.alternatives([n.default.string(),n.default.array().items(n.default.number().unsafe())]).optional(),metalness:n.default.number().unsafe().optional(),roughness:n.default.number().unsafe().optional()},parameters:n.default.object({controlOrder:n.default.array().items(n.default.string()).optional(),controlNames:n.default.object().pattern(/.*/,[n.default.string()]).optional(),parametersHidden:n.default.array().items(n.default.string()).optional()}).optional(),viewer:{blurSceneWhenBusy:n.default.boolean(),ignoreSuperseded:n.default.boolean().optional(),loggingLevel:n.default.number().unsafe().optional(),messageLoggingLevel:n.default.number().unsafe().optional(),viewerRuntimeId:n.default.string().allow("").optional(),hasRestoredSettings:n.default.boolean().optional(),useModelSettings:n.default.boolean().optional(),showMessages:n.default.boolean().optional(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),scene:{show:n.default.boolean().optional(),showSceneTransition:n.default.string().optional(),duration:n.default.number().unsafe().optional(),fullscreen:n.default.boolean().optional(),gridVisibility:n.default.boolean(),groundPlaneReflectionThreshold:n.default.number().unsafe().optional(),groundPlaneReflectionVisibility:n.default.boolean().optional(),groundPlaneVisibility:n.default.boolean(),camera:{autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),cameraTypes:{perspective:{default:{position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},fov:n.default.number().unsafe().min(0).max(180),controls:n.default.number().unsafe().optional()},orthographic:{default:{position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}}},active:n.default.number().unsafe().min(0).max(6)},controls:{orbit:{autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:{position:n.default.object({cube:n.default.object({min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}}).optional(),sphere:n.default.object({center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}).optional()}).optional(),target:n.default.object({cube:n.default.object({min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}}).optional(),sphere:n.default.object({center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}).optional()}).optional(),rotation:n.default.object({minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)}).optional(),zoom:n.default.object({minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}).optional()},rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)},fps:{},orthographic:{damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}},enableCameraControls:n.default.boolean(),revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),zoomExtentsFactor:n.default.number().unsafe().positive()},lights:{helper:n.default.boolean().optional(),lightScene:n.default.string().allow(""),lightScenes:s.allow(null)},material:{environmentMap:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),environmentMapAsBackground:n.default.boolean(),environmentMapResolution:n.default.string().valid("256","512","1024","2048")},render:{ambientOcclusion:n.default.boolean(),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0).optional(),clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),pointSize:n.default.number().unsafe().min(0),shadows:n.default.boolean(),sao:{samples:n.default.number().unsafe().positive().optional(),kernelRadius:n.default.number().unsafe().positive().optional(),intensity:n.default.number().unsafe().positive().optional(),standardDev:n.default.number().unsafe().min(0).optional()}}}}}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,o).value}},4307:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(1693),n=i(8719),a=i(493);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;if(i.build_date=r.build_date,i.build_version=r.build_version,r.parameters&&r.parameters.controlNames)for(let e in r.parameters.controlNames)i.session[e]={order:0,displayname:r.parameters.controlNames[e],hidden:!1};if(r.parameters&&r.parameters.controlOrder)for(let e=0;e<r.parameters.controlOrder.length;e++){const t=r.parameters.controlOrder[e];i.session[t]?i.session[t].order=e:i.session[t]={order:e,displayname:"",hidden:!1}}if(r.parameters&&r.parameters.parametersHidden)for(let e=0;e<r.parameters.parametersHidden.length;e++){const t=r.parameters.parametersHidden[e];i.session[t]?i.session[t].hidden=!0:i.session[t]={order:0,displayname:"",hidden:!0}}i.general.blurWhenBusy=r.viewer.blurSceneWhenBusy,i.general.commitParameters=r.viewer.commitParameters,i.general.commitSettings=r.viewer.commitSettings,r.viewer.showMessages&&(i.general.showMessages=r.viewer.showMessages),i.environmentGeometry.gridVisibility=r.viewer.scene.gridVisibility,i.environmentGeometry.groundPlaneVisibility=r.viewer.scene.groundPlaneVisibility;const s=a.v4();if(i.camera.cameraId=s,0===r.viewer.scene.camera.cameraTypes.active){const e=r.viewer.scene.camera.controls.orbit.restrictions,t=e.position&&e.position.cube?{min:{x:e.position.cube.min.x,y:e.position.cube.min.y,z:e.position.cube.min.z},max:{x:e.position.cube.max.x,y:e.position.cube.max.y,z:e.position.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},n=e.target&&e.target.cube?{min:{x:e.target.cube.min.x,y:e.target.cube.min.y,z:e.target.cube.min.z},max:{x:e.target.cube.max.x,y:e.target.cube.max.y,z:e.target.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},a={position:{cube:t,sphere:e.position&&e.position.sphere?{center:{x:e.position.sphere.center.x,y:e.position.sphere.center.y,z:e.position.sphere.center.z},radius:e.position.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0}},target:{cube:n,sphere:e.target&&e.target.sphere?{center:{x:e.target.sphere.center.x,y:e.target.sphere.center.y,z:e.target.sphere.center.z},radius:e.target.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0}},rotation:e.rotation?{minPolarAngle:e.rotation.minPolarAngle,maxPolarAngle:e.rotation.maxPolarAngle,minAzimuthAngle:e.rotation.minAzimuthAngle,maxAzimuthAngle:e.rotation.maxAzimuthAngle}:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},zoom:e.zoom?{minDistance:e.zoom.minDistance,maxDistance:e.zoom.maxDistance}:{minDistance:0,maxDistance:1/0}};i.camera.cameras={[s]:{type:"perspective",autoAdjust:r.viewer.scene.camera.autoAdjust,cameraMovementDuration:r.viewer.scene.camera.cameraMovementDuration,controls:{autoRotationSpeed:r.viewer.scene.camera.controls.orbit.autoRotationSpeed,damping:r.viewer.scene.camera.controls.orbit.damping,enableAutoRotation:r.viewer.scene.camera.controls.orbit.enableAutoRotation,enableKeyPan:r.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:r.viewer.scene.camera.controls.orbit.enablePan,enableRotation:r.viewer.scene.camera.controls.orbit.enableRotation,enableZoom:r.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:r.viewer.scene.camera.controls.orbit.input.keys.up,down:r.viewer.scene.camera.controls.orbit.input.keys.down,left:r.viewer.scene.camera.controls.orbit.input.keys.left,right:r.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:r.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:r.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:r.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:r.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:r.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:r.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:r.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:r.viewer.scene.camera.controls.orbit.movementSmoothness,restrictions:a,rotationSpeed:r.viewer.scene.camera.controls.orbit.rotationSpeed,panSpeed:r.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:r.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:r.viewer.scene.camera.enableCameraControls,fov:r.viewer.scene.camera.cameraTypes.perspective.fov,position:{x:r.viewer.scene.camera.cameraTypes.perspective.default.position.x,y:r.viewer.scene.camera.cameraTypes.perspective.default.position.y,z:r.viewer.scene.camera.cameraTypes.perspective.default.position.z},revertAtMouseUp:r.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:r.viewer.scene.camera.revertAtMouseUpDuration,target:{x:r.viewer.scene.camera.cameraTypes.perspective.default.target.x,y:r.viewer.scene.camera.cameraTypes.perspective.default.target.y,z:r.viewer.scene.camera.cameraTypes.perspective.default.target.z},zoomExtentsFactor:r.viewer.scene.camera.zoomExtentsFactor}}}else{let e="top";switch(r.viewer.scene.camera.cameraTypes.active){case 2:e="bottom";break;case 3:e="right";break;case 4:e="left";break;case 5:e="back";break;case 6:e="front";break;default:e="top"}i.camera.cameras={[s]:{type:e,autoAdjust:r.viewer.scene.camera.autoAdjust,cameraMovementDuration:r.viewer.scene.camera.cameraMovementDuration,controls:{damping:r.viewer.scene.camera.controls.orbit.damping,enableKeyPan:r.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:r.viewer.scene.camera.controls.orbit.enablePan,enableZoom:r.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:r.viewer.scene.camera.controls.orbit.input.keys.up,down:r.viewer.scene.camera.controls.orbit.input.keys.down,left:r.viewer.scene.camera.controls.orbit.input.keys.left,right:r.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:r.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:r.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:r.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:r.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:r.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:r.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:r.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:r.viewer.scene.camera.controls.orbit.movementSmoothness,panSpeed:r.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:r.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:r.viewer.scene.camera.enableCameraControls,position:{x:r.viewer.scene.camera.cameraTypes.orthographic.default.position.x,y:r.viewer.scene.camera.cameraTypes.orthographic.default.position.y,z:r.viewer.scene.camera.cameraTypes.orthographic.default.position.z},revertAtMouseUp:r.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:r.viewer.scene.camera.revertAtMouseUpDuration,target:{x:r.viewer.scene.camera.cameraTypes.orthographic.default.target.x,y:r.viewer.scene.camera.cameraTypes.orthographic.default.target.y,z:r.viewer.scene.camera.cameraTypes.orthographic.default.target.z},zoomExtentsFactor:r.viewer.scene.camera.zoomExtentsFactor}}}if(i.environment.map=r.viewer.scene.material.environmentMap,i.environment.mapAsBackground=r.viewer.scene.material.environmentMapAsBackground,i.environment.mapResolution=r.viewer.scene.material.environmentMapResolution,r.viewer.scene.lights,i.light.lightSceneId=r.viewer.scene.lights.lightScene,r.viewer.scene.lights.lightScenes)for(let e in r.viewer.scene.lights.lightScenes){const t=r.viewer.scene.lights.lightScenes[e],n={};for(let i in t.lights){const t=r.viewer.scene.lights.lightScenes[e].lights[i];switch(t.type){case"ambient":n[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity}};break;case"directional":n[i]={name:t.name,type:t.type,properties:{direction:{x:t.properties.direction.x,y:t.properties.direction.y,z:t.properties.direction.z},color:t.properties.color,intensity:t.properties.intensity,castShadow:t.properties.castShadow,shadowMapResolution:t.properties.shadowMapResolution,shadowMapBias:t.properties.shadowMapBias}};break;case"hemisphere":n[i]={name:t.name,type:t.type,properties:{skyColor:t.properties.skyColor,intensity:t.properties.intensity,groundColor:t.properties.groundColor}};break;case"point":n[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity,position:{x:t.properties.position.x,y:t.properties.position.y,z:t.properties.position.z},distance:t.properties.distance,decay:t.properties.decay}};break;case"spot":n[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity,position:{x:t.properties.position.x,y:t.properties.position.y,z:t.properties.position.z},target:{x:t.properties.target.x,y:t.properties.target.y,z:t.properties.target.z},distance:t.properties.distance,decay:t.properties.decay,angle:t.properties.angle,penumbra:t.properties.penumbra}}}t.order&&(n[i].order=t.order)}i.light.lightScenes[e]={name:t.name,lights:n}}return i.rendering.ambientOcclusion=r.viewer.scene.render.ambientOcclusion,void 0!==r.viewer.scene.render.beautyRenderBlendingDuration&&(i.rendering.beautyRenderBlendingDuration=r.viewer.scene.render.beautyRenderBlendingDuration),i.rendering.beautyRenderDelay=r.viewer.scene.render.beautyRenderDelay,i.environment.clearAlpha=r.viewer.scene.render.clearAlpha,i.environment.clearColor=r.viewer.scene.render.clearColor,i.general.pointSize=r.viewer.scene.render.pointSize,i.rendering.shadows=r.viewer.scene.render.shadows,i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;if(i.build_date=n.build_date,i.build_version=n.build_version,n.camera.cameras[n.camera.cameraId]){const e=n.camera.cameras[n.camera.cameraId];switch(e.type){case"top":i.viewer.scene.camera.cameraTypes.active=1;break;case"bottom":i.viewer.scene.camera.cameraTypes.active=2;break;case"right":i.viewer.scene.camera.cameraTypes.active=3;break;case"left":i.viewer.scene.camera.cameraTypes.active=4;break;case"back":i.viewer.scene.camera.cameraTypes.active=5;break;case"front":i.viewer.scene.camera.cameraTypes.active=6;break;default:i.viewer.scene.camera.cameraTypes.active=0}if(i.viewer.scene.camera.autoAdjust=e.autoAdjust,i.viewer.scene.camera.cameraMovementDuration=e.cameraMovementDuration,i.viewer.scene.camera.enableCameraControls=e.enableCameraControls,i.viewer.scene.camera.revertAtMouseUp=e.revertAtMouseUp,i.viewer.scene.camera.revertAtMouseUpDuration=e.revertAtMouseUpDuration,i.viewer.scene.camera.zoomExtentsFactor=e.zoomExtentsFactor,"perspective"===e.type){const t=e;i.viewer.scene.camera.cameraTypes.perspective.default.position={x:e.position.x,y:e.position.y,z:e.position.z},i.viewer.scene.camera.cameraTypes.perspective.default.target={x:e.target.x,y:e.target.y,z:e.target.z},i.viewer.scene.camera.cameraTypes.perspective.fov=t.fov,i.viewer.scene.camera.controls.orbit={autoRotationSpeed:t.controls.autoRotationSpeed,damping:t.controls.damping,enableAutoRotation:t.controls.enableAutoRotation,enableKeyPan:t.controls.enableKeyPan,enablePan:t.controls.enablePan,enableRotation:t.controls.enableRotation,enableZoom:t.controls.enableZoom,input:{keys:{up:t.controls.input.keys.up,down:t.controls.input.keys.down,left:t.controls.input.keys.left,right:t.controls.input.keys.right},mouse:{rotate:t.controls.input.mouse.rotate,zoom:t.controls.input.mouse.zoom,pan:t.controls.input.mouse.pan},touch:{rotate:t.controls.input.touch.rotate,zoom:t.controls.input.touch.zoom,pan:t.controls.input.touch.pan}},keyPanSpeed:t.controls.keyPanSpeed,movementSmoothness:t.controls.movementSmoothness,restrictions:{position:{cube:{min:{x:t.controls.restrictions.position.cube.min.x,y:t.controls.restrictions.position.cube.min.y,z:t.controls.restrictions.position.cube.min.z},max:{x:t.controls.restrictions.position.cube.max.x,y:t.controls.restrictions.position.cube.max.y,z:t.controls.restrictions.position.cube.max.z}},sphere:{center:{x:t.controls.restrictions.position.sphere.center.x,y:t.controls.restrictions.position.sphere.center.y,z:t.controls.restrictions.position.sphere.center.z},radius:t.controls.restrictions.position.sphere.radius}},target:{cube:{min:{x:t.controls.restrictions.target.cube.min.x,y:t.controls.restrictions.target.cube.min.y,z:t.controls.restrictions.target.cube.min.z},max:{x:t.controls.restrictions.target.cube.max.x,y:t.controls.restrictions.target.cube.max.y,z:t.controls.restrictions.target.cube.max.z}},sphere:{center:{x:t.controls.restrictions.target.sphere.center.x,y:t.controls.restrictions.target.sphere.center.y,z:t.controls.restrictions.target.sphere.center.z},radius:t.controls.restrictions.target.sphere.radius}},rotation:{minPolarAngle:t.controls.restrictions.rotation.minPolarAngle,maxPolarAngle:t.controls.restrictions.rotation.maxPolarAngle,minAzimuthAngle:t.controls.restrictions.rotation.minAzimuthAngle,maxAzimuthAngle:t.controls.restrictions.rotation.maxAzimuthAngle},zoom:{minDistance:t.controls.restrictions.zoom.minDistance,maxDistance:t.controls.restrictions.zoom.maxDistance}},rotationSpeed:t.controls.rotationSpeed,panSpeed:t.controls.panSpeed,zoomSpeed:t.controls.zoomSpeed}}else{const t=e;i.viewer.scene.camera.cameraTypes.orthographic.default.position={x:e.position.x,y:e.position.y,z:e.position.z},i.viewer.scene.camera.cameraTypes.orthographic.default.target={x:e.target.x,y:e.target.y,z:e.target.z},i.viewer.scene.camera.controls.orthographic={damping:t.controls.damping,enableKeyPan:t.controls.enableKeyPan,enablePan:t.controls.enablePan,enableZoom:t.controls.enableZoom,input:{keys:{up:t.controls.input.keys.up,down:t.controls.input.keys.down,left:t.controls.input.keys.left,right:t.controls.input.keys.right},mouse:{rotate:t.controls.input.mouse.rotate,zoom:t.controls.input.mouse.zoom,pan:t.controls.input.mouse.pan},touch:{rotate:t.controls.input.touch.rotate,zoom:t.controls.input.touch.zoom,pan:t.controls.input.touch.pan}},keyPanSpeed:t.controls.keyPanSpeed,movementSmoothness:t.controls.movementSmoothness,panSpeed:t.controls.panSpeed,zoomSpeed:t.controls.zoomSpeed}}}i.viewer.scene.render.clearAlpha=n.environment.clearAlpha,i.viewer.scene.render.clearColor=n.environment.clearColor,i.viewer.scene.material.environmentMap=n.environment.map,i.viewer.scene.material.environmentMapAsBackground=n.environment.mapAsBackground,i.viewer.scene.material.environmentMapResolution=n.environment.mapResolution,i.viewer.scene.gridVisibility=n.environmentGeometry.gridVisibility,i.viewer.scene.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,i.viewer.blurSceneWhenBusy=n.general.blurWhenBusy,i.viewer.commitParameters=n.general.commitParameters,i.viewer.commitSettings=n.general.commitSettings,i.viewer.scene.render.pointSize=n.general.pointSize,i.viewer.showMessages=n.general.showMessages,i.viewer.scene.lights.lightScene=n.light.lightSceneId||"default";for(let e in n.light.lightScenes){const t=n.light.lightScenes[e],r={};for(let e in t.lights){const i=t.lights[e];switch(i.type){case"ambient":r[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity}};break;case"directional":r[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{direction:{x:i.properties.direction.x,y:i.properties.direction.y,z:i.properties.direction.z},color:i.properties.color,intensity:i.properties.intensity,castShadow:i.properties.castShadow,shadowMapResolution:i.properties.shadowMapResolution,shadowMapBias:i.properties.shadowMapBias}};break;case"hemisphere":r[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{skyColor:i.properties.skyColor,intensity:i.properties.intensity,groundColor:i.properties.groundColor}};break;case"point":r[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity,position:{x:i.properties.position.x,y:i.properties.position.y,z:i.properties.position.z},distance:i.properties.distance,decay:i.properties.decay}};break;case"spot":r[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity,position:{x:i.properties.position.x,y:i.properties.position.y,z:i.properties.position.z},target:{x:i.properties.target.x,y:i.properties.target.y,z:i.properties.target.z},distance:i.properties.distance,decay:i.properties.decay,angle:i.properties.angle,penumbra:i.properties.penumbra}}}}i.viewer.scene.lights.lightScenes[e]={id:e,name:t.name,lights:r}}i.viewer.scene.render.ambientOcclusion=n.rendering.ambientOcclusion,i.viewer.scene.render.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.viewer.scene.render.beautyRenderDelay=n.rendering.beautyRenderDelay,i.viewer.scene.render.shadows=n.rendering.shadows;let a=[];for(let e in n.session)n.session[e].displayname&&(i.parameters.controlNames[e]=n.session[e].displayname),n.session[e].hidden&&i.parameters.parametersHidden.push(e),a.push({id:e,order:n.session[e].order||0});a.sort(((e,t)=>(e.order||1/0)-(t.order||1/0)));let s=a.filter((e=>0===e.order));return a=a.filter((e=>!s.includes(e))),a=s.concat(a),i.parameters.controlOrder=a.map((e=>e.id)),i}},8719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.0",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"none",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridVisibility:!0,groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!0,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,shadows:!0},session:{}})},3181:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:n.default.object({position:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),s=n.default.object({damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),o=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:s,enableCameraControls:n.default.boolean(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),l=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:a,enableCameraControls:n.default.boolean(),fov:n.default.number().unsafe().positive(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),c=n.default.object().pattern(/^/,[l,o]),u=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0)}),h=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),direction:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},castShadow:n.default.boolean(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}),d=n.default.object({skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()])}),f=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0)}),p=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0),angle:n.default.number().unsafe().min(0),penumbra:n.default.number().unsafe().min(0)}),m=n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:n.default.alternatives([u,h,d,f,p])})])})]),g=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enable:n.default.boolean(),autoScaling:n.default.boolean()}).optional(),camera:{cameraId:n.default.string().allow(""),cameras:c},environment:{clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),map:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),mapAsBackground:n.default.boolean(),mapResolution:n.default.string()},environmentGeometry:{gridVisibility:n.default.boolean(),groundPlaneVisibility:n.default.boolean()},general:{transformation:{scale:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},translation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},blurWhenBusy:n.default.boolean(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),pointSize:n.default.number().unsafe().min(0),showMessages:n.default.boolean()},light:{lightSceneId:n.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:n.default.boolean(),ambientOcclusionIntensity:n.default.number().unsafe().positive().max(1),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0),shadows:n.default.boolean()},session:n.default.object().pattern(/^/,[n.default.object({order:n.default.number().unsafe().optional(),displayname:n.default.string().allow("").optional(),hidden:n.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,g).value}},2315:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(8719),n=i(3160);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.environment=r.environment,i.general=r.general,i.light=r.light,i.environmentGeometry.gridVisibility=r.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.shadows=r.rendering.shadows,i.session=r.session,"3.0"===t?(i.environmentGeometry.gridColor="#ffffff",i.environmentGeometry.groundPlaneColor="#d3d3d3",i.rendering.outputEncoding="linear",i.rendering.physicallyCorrectLights=!1,i.rendering.textureEncoding="linear",i.rendering.toneMapping="none",i.rendering.toneMappingExposure=1):(i.environmentGeometry.gridColor="#ffffff",i.environmentGeometry.groundPlaneColor="#d3d3d3",i.rendering.outputEncoding="srgb",i.rendering.physicallyCorrectLights=!1,i.rendering.textureEncoding="srgb",i.rendering.toneMapping="none",i.rendering.toneMappingExposure=1),i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.environment=n.environment,i.environmentGeometry.gridVisibility=n.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,i.general=n.general,i.light=n.light,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.shadows=n.rendering.shadows,i.session=n.session,i}},3160:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},4612:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:n.default.object({position:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),s=n.default.object({damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),o=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:s,enableCameraControls:n.default.boolean(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),l=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:a,enableCameraControls:n.default.boolean(),fov:n.default.number().unsafe().positive(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),c=n.default.object().pattern(/^/,[l,o]),u=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0)}),h=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),direction:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},castShadow:n.default.boolean(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}),d=n.default.object({skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()])}),f=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0)}),p=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0),angle:n.default.number().unsafe().min(0),penumbra:n.default.number().unsafe().min(0)}),m=n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:n.default.alternatives([u,h,d,f,p])})])})]),g=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enable:n.default.boolean(),autoScaling:n.default.boolean()}).optional(),camera:{cameraId:n.default.string().allow(""),cameras:c},environment:{clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),map:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),mapAsBackground:n.default.boolean(),mapResolution:n.default.string()},environmentGeometry:{gridColor:n.default.string(),gridVisibility:n.default.boolean(),groundPlaneColor:n.default.string(),groundPlaneVisibility:n.default.boolean()},general:{transformation:{scale:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},translation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},blurWhenBusy:n.default.boolean(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),pointSize:n.default.number().unsafe().min(0),showMessages:n.default.boolean()},light:{lightSceneId:n.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:n.default.boolean(),ambientOcclusionIntensity:n.default.number().unsafe().positive().max(1),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0),outputEncoding:n.default.string(),physicallyCorrectLights:n.default.boolean(),shadows:n.default.boolean(),textureEncoding:n.default.string(),toneMapping:n.default.string(),toneMappingExposure:n.default.number().unsafe().min(0)},session:n.default.object().pattern(/^/,[n.default.object({order:n.default.number().unsafe().optional(),displayname:n.default.string().allow("").optional(),hidden:n.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,g).value}},1079:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(3160),n=i(8897);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.session=r.session,i.environment.clearAlpha=r.environment.clearAlpha,i.environment.clearColor=r.environment.clearColor,i.environment.map=r.environment.map,i.environment.mapAsBackground=r.environment.mapAsBackground,i.environment.mapResolution=r.environment.mapResolution,i.environmentGeometry.gridColor=r.environmentGeometry.gridColor,i.environmentGeometry.gridVisibility=r.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneColor=r.environmentGeometry.groundPlaneColor,i.environmentGeometry.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.outputEncoding=r.rendering.outputEncoding,i.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,i.rendering.shadows=r.rendering.shadows,i.rendering.textureEncoding=r.rendering.textureEncoding,i.rendering.toneMapping=r.rendering.toneMapping,i.rendering.toneMappingExposure=r.rendering.toneMappingExposure,i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment.clearAlpha=n.environment.clearAlpha,i.environment.clearColor=n.environment.clearColor,i.environment.map=n.environment.map,i.environment.mapAsBackground=n.environment.mapAsBackground,i.environment.mapResolution=n.environment.mapResolution,i.environmentGeometry.gridColor=n.environmentGeometry.gridColor,i.environmentGeometry.gridVisibility=n.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneColor=n.environmentGeometry.groundPlaneColor,i.environmentGeometry.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.outputEncoding=n.rendering.outputEncoding,i.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,i.rendering.shadows=n.rendering.shadows,i.rendering.textureEncoding=n.rendering.textureEncoding,i.rendering.toneMapping=n.rendering.toneMapping,i.rendering.toneMappingExposure=n.rendering.toneMappingExposure,i}},8897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.2",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},9927:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:n.default.object({position:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),s=n.default.object({damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),o=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:s,enableCameraControls:n.default.boolean(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),l=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:a,enableCameraControls:n.default.boolean(),fov:n.default.number().unsafe().positive(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),c=n.default.object().pattern(/^/,[l,o]),u=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0)}),h=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),direction:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},castShadow:n.default.boolean(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}),d=n.default.object({skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()])}),f=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0)}),p=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0),angle:n.default.number().unsafe().min(0),penumbra:n.default.number().unsafe().min(0)}),m=n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:n.default.alternatives([u,h,d,f,p])})])})]),g=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enable:n.default.boolean(),autoScaling:n.default.boolean()}).optional(),camera:{cameraId:n.default.string().allow(""),cameras:c},environment:{clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),map:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),mapAsBackground:n.default.boolean(),mapResolution:n.default.string()},environmentGeometry:{gridColor:n.default.string(),gridVisibility:n.default.boolean(),groundPlaneColor:n.default.string(),groundPlaneVisibility:n.default.boolean(),groundPlaneShadowColor:n.default.string(),groundPlaneShadowVisibility:n.default.boolean()},general:{transformation:{scale:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},translation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},blurWhenBusy:n.default.boolean(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),pointSize:n.default.number().unsafe().min(0),showMessages:n.default.boolean()},light:{lightSceneId:n.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:n.default.boolean(),ambientOcclusionIntensity:n.default.number().unsafe().positive().max(1),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0),lights:n.default.boolean(),outputEncoding:n.default.string(),physicallyCorrectLights:n.default.boolean(),shadows:n.default.boolean(),textureEncoding:n.default.string(),toneMapping:n.default.string(),toneMappingExposure:n.default.number().unsafe().min(0)},session:n.default.object().pattern(/^/,[n.default.object({order:n.default.number().unsafe().optional(),displayname:n.default.string().allow("").optional(),hidden:n.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,g).value}},767:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(8897),n=i(4522);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.session=r.session,i.environment=r.environment,i.environmentGeometry=r.environmentGeometry,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.automaticColorAdjustment=!1,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.outputEncoding=r.rendering.outputEncoding,i.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,i.rendering.shadows=r.rendering.shadows,i.rendering.textureEncoding=r.rendering.textureEncoding,i.rendering.toneMapping=r.rendering.toneMapping,i.rendering.toneMappingExposure=r.rendering.toneMappingExposure,i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment=n.environment,i.environmentGeometry=n.environmentGeometry,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.outputEncoding=n.rendering.outputEncoding,i.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,i.rendering.shadows=n.rendering.shadows,i.rendering.textureEncoding=n.rendering.textureEncoding,i.rendering.toneMapping=n.rendering.toneMapping,i.rendering.toneMappingExposure=n.rendering.toneMappingExposure,i}},4522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.3",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},2025:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:n.default.object({position:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),s=n.default.object({damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),o=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:s,enableCameraControls:n.default.boolean(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),l=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:a,enableCameraControls:n.default.boolean(),fov:n.default.number().unsafe().positive(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),c=n.default.object().pattern(/^/,[l,o]),u=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0)}),h=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),direction:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},castShadow:n.default.boolean(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}),d=n.default.object({skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()])}),f=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0)}),p=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0),angle:n.default.number().unsafe().min(0),penumbra:n.default.number().unsafe().min(0)}),m=n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:n.default.alternatives([u,h,d,f,p])})])})]),g=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enable:n.default.boolean(),autoScaling:n.default.boolean()}).optional(),camera:{cameraId:n.default.string().allow(""),cameras:c},environment:{clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),map:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),mapAsBackground:n.default.boolean(),mapResolution:n.default.string()},environmentGeometry:{gridColor:n.default.string(),gridVisibility:n.default.boolean(),groundPlaneColor:n.default.string(),groundPlaneVisibility:n.default.boolean(),groundPlaneShadowColor:n.default.string(),groundPlaneShadowVisibility:n.default.boolean()},general:{transformation:{scale:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},translation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},blurWhenBusy:n.default.boolean(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),pointSize:n.default.number().unsafe().min(0),showMessages:n.default.boolean()},light:{lightSceneId:n.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:n.default.boolean(),ambientOcclusionIntensity:n.default.number().unsafe().positive().max(1),automaticColorAdjustment:n.default.boolean(),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0),lights:n.default.boolean(),outputEncoding:n.default.string(),physicallyCorrectLights:n.default.boolean(),shadows:n.default.boolean(),textureEncoding:n.default.string(),toneMapping:n.default.string(),toneMappingExposure:n.default.number().unsafe().min(0)},session:n.default.object().pattern(/^/,[n.default.object({order:n.default.number().unsafe().optional(),displayname:n.default.string().allow("").optional(),hidden:n.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,g).value}},3506:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const r=i(4522),n=i(9579);t.convertFromPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.light=r.light,i.session=r.session,i.environmentGeometry=r.environmentGeometry,i.rendering=r.rendering,i.general.transformation=r.general.transformation,i.general.blurWhenBusy=r.general.blurWhenBusy,i.general.commitSettings=r.general.commitSettings,i.general.commitParameters=r.general.commitParameters,i.general.pointSize=r.general.pointSize,i.general.showMessages=r.general.showMessages,i.general.defaultMaterialColor="#199b9bff",i.environment.clearAlpha=r.environment.clearAlpha,i.environment.clearColor=r.environment.clearColor,i.environment.map=r.environment.map,i.environment.mapAsBackground=r.environment.mapAsBackground,i.environment.mapResolution=r.environment.mapResolution,i.environment.rotation={x:0,y:0,z:0,w:1},i.environment.blurriness=0,i.environment.intensity=1,i},t.convertToPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.light=n.light,i.session=n.session,i.environmentGeometry=n.environmentGeometry,i.rendering=n.rendering,i.general.transformation=n.general.transformation,i.general.blurWhenBusy=n.general.blurWhenBusy,i.general.commitSettings=n.general.commitSettings,i.general.commitParameters=n.general.commitParameters,i.general.pointSize=n.general.pointSize,i.general.showMessages=n.general.showMessages,i.environment.clearAlpha=n.environment.clearAlpha,i.environment.clearColor=n.environment.clearColor,i.environment.map=n.environment.map,i.environment.mapAsBackground=n.environment.mapAsBackground,i.environment.mapResolution=n.environment.mapResolution,i}},9579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.4",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},6835:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=r(i(2705)),a=n.default.object({autoRotationSpeed:n.default.number().unsafe(),damping:n.default.number().unsafe().min(0),enableAutoRotation:n.default.boolean(),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableRotation:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),restrictions:n.default.object({position:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:n.default.number().unsafe().allow(-1/0).allow(null),y:n.default.number().unsafe().allow(-1/0).allow(null),z:n.default.number().unsafe().allow(-1/0).allow(null)},max:{x:n.default.number().unsafe().allow(1/0).allow(null),y:n.default.number().unsafe().allow(1/0).allow(null),z:n.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},radius:n.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:n.default.number().unsafe(),maxPolarAngle:n.default.number().unsafe(),minAzimuthAngle:n.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:n.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:n.default.number().unsafe(),maxDistance:n.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),s=n.default.object({damping:n.default.number().unsafe().min(0).max(1),enableKeyPan:n.default.boolean(),enablePan:n.default.boolean(),enableZoom:n.default.boolean(),input:{keys:{up:n.default.number().unsafe(),down:n.default.number().unsafe(),left:n.default.number().unsafe(),right:n.default.number().unsafe()},mouse:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()},touch:{rotate:n.default.number().unsafe(),zoom:n.default.number().unsafe(),pan:n.default.number().unsafe()}},keyPanSpeed:n.default.number().unsafe().min(0).max(1),movementSmoothness:n.default.number().unsafe().min(0).max(1),panSpeed:n.default.number().unsafe().min(0).max(1),zoomSpeed:n.default.number().unsafe().min(0).max(1)}),o=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:s,enableCameraControls:n.default.boolean(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),l=n.default.object({name:n.default.string().optional(),type:n.default.string(),autoAdjust:n.default.boolean(),cameraMovementDuration:n.default.number().unsafe().min(0),controls:a,enableCameraControls:n.default.boolean(),fov:n.default.number().unsafe().positive(),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},revertAtMouseUp:n.default.boolean(),revertAtMouseUpDuration:n.default.number().unsafe().min(0),target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},zoomExtentsFactor:n.default.number().unsafe().positive()}),c=n.default.object().pattern(/^/,[l,o]),u=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0)}),h=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),direction:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},castShadow:n.default.boolean(),shadowMapResolution:n.default.number().unsafe().optional(),shadowMapBias:n.default.number().unsafe().optional()}),d=n.default.object({skyColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),groundColor:n.default.alternatives([n.default.number().unsafe(),n.default.string()])}),f=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0)}),p=n.default.object({color:n.default.alternatives([n.default.number().unsafe(),n.default.string()]),intensity:n.default.number().unsafe().min(0),position:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},target:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},distance:n.default.number().unsafe().min(0),decay:n.default.number().unsafe().min(0),angle:n.default.number().unsafe().min(0),penumbra:n.default.number().unsafe().min(0)}),m=n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),lights:n.default.object().pattern(/^/,[n.default.object({name:n.default.string().optional(),type:n.default.string(),order:n.default.number().unsafe().optional(),properties:n.default.alternatives([u,h,d,f,p])})])})]),g=n.default.object({build_date:n.default.string().allow("").optional(),build_version:n.default.string().allow("").optional(),settings_version:n.default.string(),ar:n.default.object({enable:n.default.boolean(),autoScaling:n.default.boolean()}).optional(),camera:{cameraId:n.default.string().allow(""),cameras:c},environment:{clearAlpha:n.default.number().unsafe().min(0).max(1),clearColor:n.default.string(),map:n.default.alternatives([n.default.string().allow(""),n.default.array().items(n.default.string())]),mapAsBackground:n.default.boolean(),mapResolution:n.default.string(),rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe(),w:n.default.number().unsafe()},blurriness:n.default.number().unsafe().min(0).max(1),intensity:n.default.number().unsafe().min(0)},environmentGeometry:{gridColor:n.default.string(),gridVisibility:n.default.boolean(),groundPlaneColor:n.default.string(),groundPlaneVisibility:n.default.boolean(),groundPlaneShadowColor:n.default.string(),groundPlaneShadowVisibility:n.default.boolean()},general:{transformation:{scale:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},translation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()},rotation:{x:n.default.number().unsafe(),y:n.default.number().unsafe(),z:n.default.number().unsafe()}},blurWhenBusy:n.default.boolean(),commitSettings:n.default.boolean(),commitParameters:n.default.boolean(),pointSize:n.default.number().unsafe().min(0),showMessages:n.default.boolean(),defaultMaterialColor:n.default.string()},light:{lightSceneId:n.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:n.default.boolean(),ambientOcclusionIntensity:n.default.number().unsafe().positive().max(1),automaticColorAdjustment:n.default.boolean(),beautyRenderDelay:n.default.number().unsafe().min(0),beautyRenderBlendingDuration:n.default.number().unsafe().min(0),lights:n.default.boolean(),outputEncoding:n.default.string(),physicallyCorrectLights:n.default.boolean(),shadows:n.default.boolean(),textureEncoding:n.default.string(),toneMapping:n.default.string(),toneMappingExposure:n.default.number().unsafe().min(0)},session:n.default.object().pattern(/^/,[n.default.object({order:n.default.number().unsafe().optional(),displayname:n.default.string().allow("").optional(),hidden:n.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=n.default.attempt(e,g).value}},493:(e,t,i)=>{"use strict";var r;i.r(t),i.d(t,{NIL:()=>C,parse:()=>g,stringify:()=>u,v1:()=>m,v3:()=>T,v4:()=>x,v5:()=>P,validate:()=>o,version:()=>k});var n=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=function(e){return"string"==typeof e&&s.test(e)};for(var l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!o(i))throw TypeError("Stringified UUID is invalid");return i};var h,d,f=0,p=0;const m=function(e,t,i){var r=t&&i||0,n=t||new Array(16),s=(e=e||{}).node||h,o=void 0!==e.clockseq?e.clockseq:d;if(null==s||null==o){var l=e.random||(e.rng||a)();null==s&&(s=h=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==o&&(o=d=16383&(l[6]<<8|l[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:p+1,g=c-f+(m-p)/1e4;if(g<0&&void 0===e.clockseq&&(o=o+1&16383),(g<0||c>f)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,p=m,d=o;var b=(1e4*(268435455&(c+=122192928e5))+m)%4294967296;n[r++]=b>>>24&255,n[r++]=b>>>16&255,n[r++]=b>>>8&255,n[r++]=255&b;var v=c/4294967296*1e4&268435455;n[r++]=v>>>8&255,n[r++]=255&v,n[r++]=v>>>24&15|16,n[r++]=v>>>16&255,n[r++]=o>>>8|128,n[r++]=255&o;for(var _=0;_<6;++_)n[r+_]=s[_];return t||u(n)},g=function(e){if(!o(e))throw TypeError("Invalid UUID");var t,i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i};function b(e,t,i){function r(e,r,n,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=i(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,n){a=a||0;for(var o=0;o<16;++o)n[a+o]=s[o];return n}return u(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function v(e){return 14+(e+64>>>9<<4)+1}function _(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function y(e,t,i,r,n,a){return _((s=_(_(t,e),_(r,a)))<<(o=n)|s>>>32-o,i);var s,o}function A(e,t,i,r,n,a,s){return y(t&i|~t&r,e,t,n,a,s)}function E(e,t,i,r,n,a,s){return y(t&r|i&~r,e,t,n,a,s)}function w(e,t,i,r,n,a,s){return y(t^i^r,e,t,n,a,s)}function S(e,t,i,r,n,a,s){return y(i^(t|~r),e,t,n,a,s)}const T=b("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],i=32*e.length,r="0123456789abcdef",n=0;n<i;n+=8){var a=e[n>>5]>>>n%32&255,s=parseInt(r.charAt(a>>>4&15)+r.charAt(15&a),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var i=1732584193,r=-271733879,n=-1732584194,a=271733878,s=0;s<e.length;s+=16){var o=i,l=r,c=n,u=a;i=A(i,r,n,a,e[s],7,-680876936),a=A(a,i,r,n,e[s+1],12,-389564586),n=A(n,a,i,r,e[s+2],17,606105819),r=A(r,n,a,i,e[s+3],22,-1044525330),i=A(i,r,n,a,e[s+4],7,-176418897),a=A(a,i,r,n,e[s+5],12,1200080426),n=A(n,a,i,r,e[s+6],17,-1473231341),r=A(r,n,a,i,e[s+7],22,-45705983),i=A(i,r,n,a,e[s+8],7,1770035416),a=A(a,i,r,n,e[s+9],12,-1958414417),n=A(n,a,i,r,e[s+10],17,-42063),r=A(r,n,a,i,e[s+11],22,-1990404162),i=A(i,r,n,a,e[s+12],7,1804603682),a=A(a,i,r,n,e[s+13],12,-40341101),n=A(n,a,i,r,e[s+14],17,-1502002290),i=E(i,r=A(r,n,a,i,e[s+15],22,1236535329),n,a,e[s+1],5,-165796510),a=E(a,i,r,n,e[s+6],9,-1069501632),n=E(n,a,i,r,e[s+11],14,643717713),r=E(r,n,a,i,e[s],20,-373897302),i=E(i,r,n,a,e[s+5],5,-701558691),a=E(a,i,r,n,e[s+10],9,38016083),n=E(n,a,i,r,e[s+15],14,-660478335),r=E(r,n,a,i,e[s+4],20,-405537848),i=E(i,r,n,a,e[s+9],5,568446438),a=E(a,i,r,n,e[s+14],9,-1019803690),n=E(n,a,i,r,e[s+3],14,-187363961),r=E(r,n,a,i,e[s+8],20,1163531501),i=E(i,r,n,a,e[s+13],5,-1444681467),a=E(a,i,r,n,e[s+2],9,-51403784),n=E(n,a,i,r,e[s+7],14,1735328473),i=w(i,r=E(r,n,a,i,e[s+12],20,-1926607734),n,a,e[s+5],4,-378558),a=w(a,i,r,n,e[s+8],11,-2022574463),n=w(n,a,i,r,e[s+11],16,1839030562),r=w(r,n,a,i,e[s+14],23,-35309556),i=w(i,r,n,a,e[s+1],4,-1530992060),a=w(a,i,r,n,e[s+4],11,1272893353),n=w(n,a,i,r,e[s+7],16,-155497632),r=w(r,n,a,i,e[s+10],23,-1094730640),i=w(i,r,n,a,e[s+13],4,681279174),a=w(a,i,r,n,e[s],11,-358537222),n=w(n,a,i,r,e[s+3],16,-722521979),r=w(r,n,a,i,e[s+6],23,76029189),i=w(i,r,n,a,e[s+9],4,-640364487),a=w(a,i,r,n,e[s+12],11,-421815835),n=w(n,a,i,r,e[s+15],16,530742520),i=S(i,r=w(r,n,a,i,e[s+2],23,-995338651),n,a,e[s],6,-198630844),a=S(a,i,r,n,e[s+7],10,1126891415),n=S(n,a,i,r,e[s+14],15,-1416354905),r=S(r,n,a,i,e[s+5],21,-57434055),i=S(i,r,n,a,e[s+12],6,1700485571),a=S(a,i,r,n,e[s+3],10,-1894986606),n=S(n,a,i,r,e[s+10],15,-1051523),r=S(r,n,a,i,e[s+1],21,-2054922799),i=S(i,r,n,a,e[s+8],6,1873313359),a=S(a,i,r,n,e[s+15],10,-30611744),n=S(n,a,i,r,e[s+6],15,-1560198380),r=S(r,n,a,i,e[s+13],21,1309151649),i=S(i,r,n,a,e[s+4],6,-145523070),a=S(a,i,r,n,e[s+11],10,-1120210379),n=S(n,a,i,r,e[s+2],15,718787259),r=S(r,n,a,i,e[s+9],21,-343485551),i=_(i,o),r=_(r,l),n=_(n,c),a=_(a,u)}return[i,r,n,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,i=new Uint32Array(v(t)),r=0;r<t;r+=8)i[r>>5]|=(255&e[r/8])<<r%32;return i}(e),8*e.length))})),x=function(e,t,i){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var n=0;n<16;++n)t[i+n]=r[n];return t}return u(r)};function M(e,t,i,r){switch(e){case 0:return t&i^~t&r;case 1:case 3:return t^i^r;case 2:return t&i^t&r^i&r}}function R(e,t){return e<<t|e>>>32-t}const P=b("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var n=0;n<r.length;++n)e.push(r.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];o[l]=c}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=o[h][f];for(var p=16;p<80;++p)d[p]=R(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var m=i[0],g=i[1],b=i[2],v=i[3],_=i[4],y=0;y<80;++y){var A=Math.floor(y/20),E=R(m,5)+M(A,g,b,v)+_+t[A]+d[y]>>>0;_=v,v=b,b=R(g,30)>>>0,g=m,m=E}i[0]=i[0]+m>>>0,i[1]=i[1]+g>>>0,i[2]=i[2]+b>>>0,i[3]=i[3]+v>>>0,i[4]=i[4]+_>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]})),C="00000000-0000-0000-0000-000000000000",k=function(e){if(!o(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},5139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.build_data=void 0,t.build_data={build_version:"3.2.9.0",build_date:"2023-05-24T14:33:49.910Z",build_branch:"development",build_commit:"687f253596efdea61a73661c8276a6b6157acbed"}},3441:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.build_data=void 0;const r=i(5139);Object.defineProperty(t,"build_data",{enumerable:!0,get:function(){return r.build_data}})},996:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;const r=i(887),n=i(5174);class a{constructor(e=r.vec3.fromValues(1/0,1/0,1/0),t=r.vec3.fromValues(-1/0,-1/0,-1/0)){this._min=e,this._max=t,this._boundingSphere=new n.Sphere,this._boundingSphereState={min:r.vec3.create(),max:r.vec3.create()}}intersect(e,t){let i,r,n,a,s,o,l,c;const u=1/t[0],h=1/t[1],d=1/t[2];return n=u>=0?(this.min[0]-e[0])*u:(this.max[0]-e[0])*u,a=u>=0?(this.max[0]-e[0])*u:(this.min[0]-e[0])*u,i=n,r=a,s=h>=0?(this.min[1]-e[1])*h:(this.max[1]-e[1])*h,o=h>=0?(this.max[1]-e[1])*h:(this.min[1]-e[1])*h,i>o||s>r?null:((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),l=d>=0?(this.min[2]-e[2])*d:(this.max[2]-e[2])*d,c=d>=0?(this.max[2]-e[2])*d:(this.min[2]-e[2])*d,i>c||l>r?null:((l>i||i!=i)&&(i=l),(c<r||r!=r)&&(r=c),r<0?null:i>=0?i:r))}intersects(e,t){return null!==this.intersect(e,t)}get boundingSphere(){return this._boundingSphereState.min[0]===this.min[0]&&this._boundingSphereState.min[1]===this.min[1]&&this._boundingSphereState.min[2]===this.min[2]&&this._boundingSphereState.max[0]===this.max[0]&&this._boundingSphereState.max[1]===this.max[1]&&this._boundingSphereState.max[2]===this.max[2]||(this._boundingSphere.setFromBox(this),this._boundingSphereState={min:r.vec3.clone(this.min),max:r.vec3.clone(this.max)}),this._boundingSphere}get max(){return this._max}set max(e){this._max=e}get min(){return this._min}set min(e){this._min=e}applyMatrix(e){const t=[];t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.min[0],this.min[1],this.min[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.min[0],this.min[1],this.max[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.min[0],this.max[1],this.min[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.min[0],this.max[1],this.max[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.max[0],this.min[1],this.min[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.max[0],this.min[1],this.max[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.max[0],this.max[1],this.min[2]),e)),t.push(r.vec3.transformMat4(r.vec3.create(),r.vec3.fromValues(this.max[0],this.max[1],this.max[2]),e)),this.min=r.vec3.fromValues(1/0,1/0,1/0),this.max=r.vec3.fromValues(-1/0,-1/0,-1/0);for(let e=0,i=t.length;e<i;e++)this.min=r.vec3.fromValues(Math.min(this.min[0],t[e][0]),Math.min(this.min[1],t[e][1]),Math.min(this.min[2],t[e][2])),this.max=r.vec3.fromValues(Math.max(this.max[0],t[e][0]),Math.max(this.max[1],t[e][1]),Math.max(this.max[2],t[e][2]));return this}clone(){return new a(r.vec3.clone(this.min),r.vec3.clone(this.max))}containsPoint(e){return!(e[0]<this.min[0]||e[0]>this.max[0]||e[1]<this.min[1]||e[1]>this.max[1]||e[2]<this.min[2]||e[2]>this.max[2])}clampPoint(e){return e[0]=Math.max(this.min[0],Math.min(this.max[0],e[0])),e[1]=Math.max(this.min[1],Math.min(this.max[1],e[1])),e[2]=Math.max(this.min[2],Math.min(this.max[2],e[2])),e}setFromAttributeArray(e,t,i,n=r.mat4.create()){let a=[];const s=3*Math.floor(e.length/3),o=t&&t!==i?+t:3;for(let t=0;t<s;t+=o){let i=r.vec4.transformMat4(r.vec4.create(),r.vec4.fromValues(e[t],e[t+1],e[t+2],1),n);a.push([i[0]/i[3],i[1]/i[3],i[2]/i[3]])}let l=a.map((e=>e[0])),c=a.map((e=>e[1])),u=a.map((e=>e[2]));return this.min=r.vec3.fromValues(Math.min(...l),Math.min(...c),Math.min(...u)),this.max=r.vec3.fromValues(Math.max(...l),Math.max(...c),Math.max(...u)),this}union(e){return e.min[0]<this.min[0]&&(this.min[0]=e.min[0]),e.min[1]<this.min[1]&&(this.min[1]=e.min[1]),e.min[2]<this.min[2]&&(this.min[2]=e.min[2]),e.max[0]>this.max[0]&&(this.max[0]=e.max[0]),e.max[1]>this.max[1]&&(this.max[1]=e.max[1]),e.max[2]>this.max[2]&&(this.max[2]=e.max[2]),this}isEmpty(){return this.min[0]===1/0&&this.min[1]===1/0&&this.min[2]===1/0&&this.max[0]===-1/0&&this.max[1]===-1/0&&this.max[2]===-1/0}reset(){r.vec3.zero(this._boundingSphere.center),this._boundingSphere.radius=0,r.vec3.zero(this._boundingSphereState.min),r.vec3.zero(this._boundingSphereState.max),r.vec3.set(this._min,1/0,1/0,1/0),r.vec3.set(this._max,-1/0,-1/0,-1/0)}}t.Box=a},118:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;const r=i(887);class n{constructor(e=r.vec3.fromValues(1,0,0),t=0){this._normal=e,this._constant=t}get constant(){return this._constant}set constant(e){this._constant=e}get normal(){return this._normal}set normal(e){this._normal=e}applyMatrix(e){const t=r.mat3.transpose(r.mat3.create(),r.mat3.invert(r.mat3.create(),r.mat3.fromMat4(r.mat3.create(),e))),i=r.vec3.transformMat4(r.vec3.create(),r.vec3.multiply(r.vec3.create(),r.vec3.clone(this.normal),r.vec3.fromValues(this._constant,this._constant,this._constant)),e);return this._normal=r.vec3.normalize(r.vec3.create(),r.vec3.transformMat3(r.vec3.create(),this._normal,t)),this.constant=-r.vec3.dot(i,this._normal),this}clampPoint(e){const t=-this.distanceToPoint(e);return r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),this.normal,r.vec3.fromValues(t,t,t)),e)}clone(){return new n(this._normal,this._constant)}containsPoint(e){return 0===this.distanceToPoint(e)}distanceToPoint(e){return r.vec3.dot(this.normal,e)+this.constant}intersect(e,t){const i=r.vec3.dot(this.normal,t);if(0===i)return 0===this.distanceToPoint(e)?0:null;const n=-(r.vec3.dot(e,this.normal)+this.constant)/i;return n<0?null:n}setFromNormalAndCoplanarPoint(e,t){return r.vec3.copy(this.normal,e),this.constant=-r.vec3.dot(t,this.normal),this}reset(){this._normal=r.vec3.fromValues(1,0,0),this._constant=0}}t.Plane=n},1594:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;const r=i(887);class n{constructor(e=r.vec3.create(),t=0){this._center=e,this._radius=t}get center(){return this._center}set center(e){this._center=e}get radius(){return this._radius}set radius(e){this._radius=e}applyMatrix(e){this._center=r.vec3.transformMat4(r.vec3.create(),this._center,e);const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10],a=Math.sqrt(Math.max(t,i,n));return this.radius=this.radius*a,this}clone(){return new n(r.vec3.clone(this._center),this._radius)}containsPoint(e){return r.vec3.squaredDistance(e,this.center)<=this.radius*this.radius}clampPoint(e){return e}intersect(e,t){const i=r.vec3.sub(r.vec3.create(),this.center,e),n=r.vec3.dot(i,t),a=r.vec3.squaredDistance(i,r.vec3.multiply(r.vec3.create(),t,r.vec3.fromValues(n,n,n)));return a<=this.radius*this.radius?n-Math.sqrt(this.radius*this.radius-a):null}intersects(e,t){const i=r.vec3.sub(r.vec3.create(),this.center,e),n=r.vec3.dot(i,t);return r.vec3.squaredDistance(i,r.vec3.multiply(r.vec3.create(),t,r.vec3.fromValues(n,n,n)))<=this.radius*this.radius}setFromBox(e){return r.vec3.add(this.center,e.min,e.max),r.vec3.scale(this.center,this.center,.5),this.radius=.5*r.vec3.dist(e.min,e.max),this}reset(){this._center=r.vec3.create(),this._radius=0}}t.Sphere=n},212:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spherical=void 0;const r=i(887);t.Spherical=class{constructor(e=1,t=0,i=0){this._radius=e,this._phi=t,this._theta=i}get radius(){return this._radius}set radius(e){this._radius=e}get phi(){return this._phi}set phi(e){this._phi=e}get theta(){return this._theta}set theta(e){this._theta=e}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}fromVec3(e){return this.radius=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[2]),this.phi=Math.acos(Math.max(-1,Math.min(1,e[1]/this.radius)))),this}toVec3(){const e=Math.sin(this.phi)*this.radius;return r.vec3.fromValues(e*Math.sin(this.theta),Math.cos(this.phi)*this.radius,e*Math.cos(this.theta))}}},7065:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;const r=i(887);class n{constructor(e=r.vec3.create(),t=r.vec3.create(),i=r.vec3.create()){this._v0=e,this._v1=t,this._v2=i}applyMatrix(e){return r.vec3.transformMat4(this._v0,this._v0,e),r.vec3.transformMat4(this._v1,this._v1,e),r.vec3.transformMat4(this._v2,this._v2,e),this}clone(){return new n(r.vec3.clone(this._v0),r.vec3.clone(this._v1),r.vec3.clone(this._v2))}intersect(e,t){const i=r.vec3.sub(r.vec3.create(),this._v1,this._v0),n=r.vec3.sub(r.vec3.create(),this._v2,this._v0),a=r.vec3.cross(r.vec3.create(),t,n),s=r.vec3.dot(i,a);if(s>-1e-7&&s<1e-7)return null;const o=1/s,l=r.vec3.sub(r.vec3.create(),e,this._v0),c=o*r.vec3.dot(l,a);if(c<0||c>1)return null;const u=r.vec3.cross(r.vec3.create(),l,i),h=o*r.vec3.dot(t,u);if(h<0||c+h>1)return null;const d=o*r.vec3.dot(n,u);return d>1e-7?r.vec3.add(r.vec3.create(),r.vec3.multiply(r.vec3.create(),t,r.vec3.fromValues(d,d,d)),e):null}reset(){this._v0=r.vec3.create(),this._v1=r.vec3.create(),this._v2=r.vec3.create()}}t.Triangle=n},5174:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=t.Plane=t.Spherical=t.Sphere=t.Box=void 0;const r=i(996);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return r.Box}});const n=i(118);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return n.Plane}});const a=i(1594);Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return a.Sphere}});const s=i(212);Object.defineProperty(t,"Spherical",{enumerable:!0,get:function(){return s.Spherical}});const o=i(7065);Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return o.Triangle}})},5752:function(e,t){"use strict";var i,r=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTree=void 0,t.AbstractTree=class{constructor(e){i.set(this,void 0),r(this,i,e,"f")}get root(){return n(this,i,"f")}addNode(e,t=n(this,i,"f"),r=n(this,i,"f")){if(r===t)return r.addChild(e),!0;for(let i=0;i<r.children.length;i++){const n=r.children[i];if(n&&this.addNode(e,t,n))return!0}return!1}addNodeAtPath(e,t=this.root.getPath(),r=n(this,i,"f")){if(r.name===t)return r.addChild(e),!0;const a=t.substr(0,t.indexOf("."));if(r.name===a){const i=t.substr(a.length+1,t.length);for(let t=0;t<r.children.length;t++){const n=r.children[t];if(n&&this.addNodeAtPath(e,i,n))return!0}}return!1}getNodeAtPath(e=this.root.getPath(),t=n(this,i,"f")){if(t.name===e)return t;const r=e.substr(0,e.indexOf("."));if(t.name===r){const i=e.substr(r.length+1,e.length);for(let e=0;e<t.children.length;e++){const r=t.children[e],n=this.getNodeAtPath(i,r);if(n)return n}}return null}removeNode(e,t=n(this,i,"f")){if(t.hasChild(e))return t.removeChild(e),!0;for(let i=0;i<t.children.length;i++){const r=t.children[i];if(r&&this.removeNode(e,r))return!0}return!1}removeNodeAtPath(e,t=n(this,i,"f")){var r;if(t.name===e)return null===(r=t.parent)||void 0===r||r.removeChild(t),!0;const a=e.substr(0,e.indexOf("."));if(t.name===a){const i=e.substr(a.length+1,e.length);for(let e=0;e<t.children.length;e++){const r=t.children[e];if(r&&this.removeNodeAtPath(i,r))return!0}}return!1}},i=new WeakMap},678:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},A=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNode=void 0;const E=i(887),w=i(8877),S=i(5174);t.AbstractTreeNode=class{constructor(e="node",t,i=[],E=[]){var T;r.set(this,w.UuidGenerator.instance),n.set(this,[]),a.set(this,[]),s.set(this,[]),o.set(this,void 0),l.set(this,""),c.set(this,void 0),u.set(this,void 0),h.set(this,new S.Box),d.set(this,{}),f.set(this,[]),p.set(this,[]),m.set(this,!0),g.set(this,!1),b.set(this,[]),v.set(this,[]),_.set(this,void 0),y(this,l,e.replace(/\./g,"_"),"f"),y(this,u,t,"f"),y(this,a,i,"f"),y(this,s,E,"f"),y(this,o,A(this,r,"f").create(),"f"),y(this,_,A(this,o,"f"),"f"),y(this,c,A(this,r,"f").create(),"f"),null===(T=A(this,u,"f"))||void 0===T||T.addChild(this)}get bones(){return A(this,b,"f")}set bones(e){y(this,b,e,"f")}get boneInverses(){return A(this,v,"f")}set boneInverses(e){y(this,v,e,"f")}get boundingBox(){return A(this,h,"f")}get boundingBoxViewport(){return A(this,d,"f")}get children(){return A(this,n,"f")}get originalId(){return A(this,_,"f")}set originalId(e){y(this,_,e,"f")}get data(){return A(this,a,"f")}get excludeViewports(){return A(this,f,"f")}set excludeViewports(e){y(this,f,e,"f")}get id(){return A(this,o,"f")}get name(){return A(this,l,"f")}set name(e){y(this,l,e,"f")}get nodeMatrix(){const e=E.mat4.create();for(let t of A(this,s,"f"))"sdtf"!==t.id&&E.mat4.multiply(e,e,t.matrix);return e}get parent(){return A(this,u,"f")}set parent(e){A(this,u,"f")&&A(this,u,"f").removeChild(this),e&&e.addChild(this),y(this,u,e,"f")}get restrictViewports(){return A(this,p,"f")}set restrictViewports(e){y(this,p,e,"f")}get skinNode(){return A(this,g,"f")}set skinNode(e){y(this,g,e,"f")}get transformations(){return A(this,s,"f")}set transformations(e){y(this,s,e,"f")}get version(){return A(this,c,"f")}set version(e){y(this,c,e,"f")}get visible(){return A(this,m,"f")}set visible(e){y(this,m,e,"f")}get worldMatrix(){const e=E.mat4.create();for(let t of A(this,s,"f"))E.mat4.multiply(e,e,t.matrix);let t=this;for(;t.parent;)E.mat4.multiply(e,t.parent.nodeMatrix,e),t=t.parent;return e}addChild(e){return!this.hasChild(e)&&(A(this,n,"f").push(e),e.parent&&e.parent.removeChild(e),e.parent=this,!0)}addData(e){return A(this,a,"f").push(e),!0}addTransformation(e){return A(this,s,"f").push(e),!0}clone(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(let t of A(this,n,"f"))e.addChild(t.clone());for(let t of A(this,a,"f"))e.data.push(t.clone());for(let t of A(this,s,"f"))e.addTransformation({id:t.id,matrix:E.mat4.clone(t.matrix)});return e}cloneInstance(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(let t of A(this,n,"f"))e.addChild(t.cloneInstance());for(let t of A(this,a,"f"))e.data.push(t);for(let t of A(this,s,"f"))e.addTransformation({id:t.id,matrix:E.mat4.clone(t.matrix)});return e}getChild(e){for(let t=0;t<A(this,n,"f").length;t++)if(A(this,n,"f")[t].id===e)return A(this,n,"f")[t]}getData(e){for(let t=0;t<A(this,a,"f").length;t++)if(A(this,a,"f")[t].id===e)return A(this,a,"f")[t]}getPath(){let e=this.name,t=this.parent;for(;t;)e=t.name+"."+e,t=t.parent;return e}getTransformation(e){for(let t=0;t<A(this,s,"f").length;t++)if(A(this,s,"f")[t].id===e)return A(this,s,"f")[t]}hasChild(e){return A(this,n,"f").includes(e)}hasData(e){return A(this,a,"f").includes(e)}hasTransformation(e){return A(this,s,"f").includes(e)}removeChild(e){const t=A(this,n,"f").indexOf(e);return-1!==t&&(A(this,n,"f").splice(t,1),e.parent=void 0,!0)}removeData(e){const t=A(this,a,"f").indexOf(e);return-1!==t&&(A(this,a,"f").splice(t,1),!0)}removeTransformation(e){const t=A(this,s,"f").indexOf(e);return-1!==t&&(A(this,s,"f").splice(t,1),!0)}traverse(e){e(this);for(let t=0;t<this.children.length;t++)this.children[t].traverse(e)}traverseData(e){for(let t=0;t<this.data.length;t++)e(this.data[t]);for(let t=0;t<this.children.length;t++)this.children[t].traverseData(e)}updateVersion(){let e=this;for(;e.parent;)e=e.parent,e.version=A(this,r,"f").create();for(let e=0;e<A(this,n,"f").length;e++)A(this,n,"f")[e].updateVersion();y(this,c,A(this,r,"f").create(),"f")}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap},6574:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeData=void 0;const c=i(8877);t.AbstractTreeNodeData=class{constructor(e,t){r.set(this,void 0),n.set(this,void 0),a.set(this,c.UuidGenerator.instance),s.set(this,c.EventEngine.instance),l(this,n,e||o(this,a,"f").create(),"f"),l(this,r,t||o(this,a,"f").create(),"f")}get id(){return o(this,n,"f")}get version(){return o(this,r,"f")}updateVersion(){l(this,r,o(this,a,"f").create(),"f")}clone(){return new this.constructor}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},5027:function(e,t,i){"use strict";var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeDataThreeJs=void 0;const s=i(6574);class o extends s.AbstractTreeNodeData{constructor(){super(...arguments),r.set(this,{}),n.set(this,null)}get threeJsObject(){return a(this,r,"f")}}t.AbstractTreeNodeDataThreeJs=o,r=new WeakMap,n=new WeakMap},3523:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;const r=i(5752),n=i(317);class a extends r.AbstractTree{constructor(){super(new n.TreeNodeThreeJs("root"))}static get instance(){return this._instance||(this._instance=new this)}}t.Tree=a},317:function(e,t,i){"use strict";var r,n,a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeNodeThreeJs=void 0;const o=i(678);class l extends o.AbstractTreeNode{constructor(){super(...arguments),r.set(this,{}),n.set(this,null)}get threeJsObject(){return a(this,r,"f")}get updateCallbackThreeJsObject(){return a(this,n,"f")}set updateCallbackThreeJsObject(e){s(this,n,e,"f")}}t.TreeNodeThreeJs=l,r=new WeakMap,n=new WeakMap},3858:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeData=t.TreeNode=t.Tree=void 0;const r=i(317);Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return r.TreeNodeThreeJs}});const n=i(3523);Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return n.Tree}});const a=i(5027);Object.defineProperty(t,"AbstractTreeNodeData",{enumerable:!0,get:function(){return a.AbstractTreeNodeDataThreeJs}})},4411:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;const n=i(887),a=i(9521),s=i(4442);t.Converter=class{constructor(){this._httpClient=s.HttpClient.instance}static get instance(){return this._instance||(this._instance=new this)}processSVG(e){return r(this,void 0,void 0,(function*(){let t=yield new Promise(((t,i)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=i,r.readAsDataURL(e)}));t=t.replace("data:image/svg+xml;base64,",""),t=atob(t);let i=document.createElement("DIV");i.id="svgc",i.innerHTML=t;let n=i.getElementsByTagName("svg"),a=[],s=[];for(let e=0;e<n.length;++e){for(let t=0;t<2;++t){let i=n[e].getElementsByTagName(["image","img"][t]);for(let e=0;e<i.length;++e)"data:"!=i[e].href.baseVal.substring(0,5)&&a.push(i[e].href.baseVal)}let t=n[e].getElementsByTagName("style");for(let e=0;e<t.length;++e){let i,r=/@import\x20url\(\s*(.*?)\s*\);/g;for(;null!==(i=r.exec(t[e].innerHTML));)s.push(i[1]);s=s.filter((function(e,t,i){return i.indexOf(e)===t}))}}let o=[],l=e=>r(this,void 0,void 0,(function*(){if(e.length>0){const i=yield this._httpClient.loadTexture(e);let r=new Uint8Array(i.data),n=r.length,a=[];for(;n--;)a[n]=String.fromCharCode(r[n]);let s=window.btoa(a.join("")),o="data:"+i.headers["content-type"]+";base64,"+s;t=t.replace(e,o)}}));for(let e=0;e<a.length;++e)o.push(l(a[e]));let c=e=>r(this,void 0,void 0,(function*(){let i,n=(yield this._httpClient.get(e,{responseType:"text"})).data,a=[],s=/url\(\s*(.*?)\s*\)/g;for(;null!==(i=s.exec(n));)a.push(i[1]);let o=[],l=e=>r(this,void 0,void 0,(function*(){const t=yield this._httpClient.get(e,{responseType:"arraybuffer"});let i=new Uint8Array(t.data),r=i.length,a=[];for(;r--;)a[r]=String.fromCharCode(i[r]);let s=window.btoa(a.join("")),o="data:"+t.headers["content-type"]+";base64,"+s;e.length>0&&(n=n.replace(e,o))}));for(let e=0;e<a.length;++e)o.push(l(a[e]));yield Promise.all(o),t=t.replace("@import url("+e+");",n)}));for(let e=0;e<s.length;++e)o.push(c(s[e]));yield Promise.all(o);let u="data:image/svg+xml,"+encodeURIComponent(t),h=new Image;h.crossOrigin="Anonymous";const d=new Promise(((e,t)=>{h.onload=()=>e(),h.onerror=t}));return h.src=u,yield d,h}))}responseToImage(e){return r(this,void 0,void 0,(function*(){const t=new Uint8Array(e.data),i=new Blob([t],{type:e.headers["content-type"]});if("image/svg+xml"===e.headers["content-type"])return yield this.processSVG(i);{const e=new Image,t=new Promise(((t,i)=>{e.onload=()=>t(),e.onerror=i}));return e.crossOrigin="anonymous",e.src=URL.createObjectURL(i),yield t,URL.revokeObjectURL(e.src),e}}))}toAlpha(e){const t=this.toHexColor(e);return t.length<=8?1:parseInt(t.slice(t.length-2,t.length),16)/255}toColorArray(e){"string"==typeof e&&e.startsWith("#")||(e=this.toHexColor(e));const t=new a.TinyColor(e).toRgb();return[t.r/255,t.g/255,t.b/255]}toHex8Color(e,t="#000"){const i=this.toHexColor(e,t);return new a.TinyColor(i).toHex8String().replace("#","0x")}toHexColor(e,t="#000"){if(!e||"default"===e)return t;e.constructor===Float32Array&&(e=Array.from(e));const i=new a.TinyColor(e);if(e instanceof a.TinyColor)return this.tinyColorToString(i);if("number"==typeof e){let i=e.toString(16),r=i.length;r<3?i=i.padStart(3,"0"):r<6?i=i.padStart(6,"0"):r<8&&(i=i.padEnd(8,"0"));let n=new a.TinyColor(i);return n.isValid?this.tinyColorToString(n):t}if(e.isColor&&"function"==typeof e.getHexString){let i=new a.TinyColor(e.getHexString());return i.isValid?this.tinyColorToString(i):t}if(Array.isArray(e)&&(3==e.length||4==e.length)){let i=!0;for(let t=0;t<3;++t)e[t]=parseFloat(e[t]),isNaN(e[t])&&(i=!1);if(!i)return t;let r=new a.TinyColor({r:Math.max(0,Math.min(e[0],255)),g:Math.max(0,Math.min(e[1],255)),b:Math.max(0,Math.min(e[2],255))});if(4==e.length){let t=parseFloat(e[3]);isNaN(t)||r.setAlpha(Math.max(0,Math.min(t,255))/255)}return r.isValid?this.tinyColorToString(r):t}if("string"!=typeof e){let i=new a.TinyColor(e);return i.isValid?this.tinyColorToString(i):t}let r=e.replace("0x","#");if(null!==r.match(/^#[a-f0-9]{6}$/i)){let e=new a.TinyColor(r+"ff");return e.isValid?this.tinyColorToString(e):t}if(null!==r.match(/^#[a-f0-9]{8}$/i)){let e=new a.TinyColor(r);return e.isValid?this.tinyColorToString(e):t}if(null!==r.match(/^#[a-f0-9]{7}$/i)){let e=new a.TinyColor(r.slice(0,7)+"0"+r.slice(-1));return e.isValid?this.tinyColorToString(e):t}let n=new a.TinyColor(r);return n.isValid?this.tinyColorToString(n):t}toThreeJsColorInput(e){const t=this.toHexColor(e);return t.slice(0,t.length-2)}toVec3(e){return Array.isArray(e)&&e.length>=3&&"number"==typeof e[0]&&"number"==typeof e[1]&&"number"==typeof e[2]?n.vec3.fromValues(e[0],e[1],e[2]):!e.x&&0!==e.x||"number"!=typeof e.x||!e.y&&0!==e.y||"number"!=typeof e.y||!e.z&&0!==e.z||"number"!=typeof e.z?!e.X&&0!==e.X||"number"!=typeof e.X||!e.Y&&0!==e.Y||"number"!=typeof e.Y||!e.Z&&0!==e.Z||"number"!=typeof e.Z?n.vec3.create():n.vec3.fromValues(e.X,e.Y,e.Z):n.vec3.fromValues(e.x,e.y,e.z)}tinyColorToString(e){return e.toHex8String()}}},4529:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomEventEngine=void 0;const r=i(6629),n=i(5383);t.DomEventEngine=class{constructor(e){this._domEventListeners={},this._uuidGenerator=n.UuidGenerator.instance,this._systemInfo=r.SystemInfo.instance,this._allowListeners={mousewheel:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseout:!0,touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,keydown:!0,contextmenu:!0},this._currentMousePosition={x:0,y:0},this._canvas=e,this._onMouseWheel=this.onMouseWheel.bind(this),this._onMouseDown=this.onMouseDown.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onKeyDownMousePositionHelper=this.onKeyDownMousePositionHelper.bind(this),this._onMouseUp=this.onMouseUp.bind(this),this._onMouseOut=this.onMouseOut.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchUp=this.onTouchUp.bind(this),this._onTouchCancel=this.onTouchCancel.bind(this),this._onKeyDown=this.onKeyDown.bind(this),this._onContextMenu=this.onContextMenu.bind(this),this.addEventListeners()}addDomEventListener(e){const t=this._uuidGenerator.create();return this._domEventListeners[t]=e,t}allowEventListeners(e){void 0!==e.mousewheel&&this._allowListeners.mousewheel!==e.mousewheel&&(e.mousewheel?(this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel)):(this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel)),this._allowListeners.mousewheel=e.mousewheel),void 0!==e.mousedown&&this._allowListeners.mousedown!==e.mousedown&&(e.mousedown?this._canvas.addEventListener("mousedown",this._onMouseDown):this._canvas.removeEventListener("mousedown",this._onMouseDown),this._allowListeners.mousedown=e.mousedown),void 0!==e.mousemove&&this._allowListeners.mousemove!==e.mousemove&&(e.mousemove?(this._canvas.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mousemove",this._onKeyDownMousePositionHelper)):(this._canvas.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mousemove",this._onKeyDownMousePositionHelper)),this._allowListeners.mousemove=e.mousemove),void 0!==e.mouseup&&this._allowListeners.mouseup!==e.mouseup&&(e.mouseup?this._canvas.addEventListener("mouseup",this._onMouseUp):this._canvas.removeEventListener("mouseup",this._onMouseUp),this._allowListeners.mouseup=e.mouseup),void 0!==e.mouseout&&this._allowListeners.mouseout!==e.mouseout&&(e.mouseout?this._canvas.addEventListener("mouseout",this._onMouseOut):this._canvas.removeEventListener("mouseout",this._onMouseOut),this._allowListeners.mouseout=e.mouseout),void 0!==e.touchstart&&this._allowListeners.touchstart!==e.touchstart&&(e.touchstart?window.addEventListener("touchstart",this._onTouchStart,{passive:!1}):window.removeEventListener("touchstart",this._onTouchStart),this._allowListeners.touchstart=e.touchstart),void 0!==e.touchmove&&this._allowListeners.touchmove!==e.touchmove&&(e.touchmove?window.addEventListener("touchmove",this._onTouchMove,{passive:!1}):window.removeEventListener("touchmove",this._onTouchMove),this._allowListeners.touchmove=e.touchmove),void 0!==e.touchend&&this._allowListeners.touchend!==e.touchend&&(e.touchend?window.addEventListener("touchend",this._onTouchUp,{passive:!1}):window.removeEventListener("touchend",this._onTouchUp),this._allowListeners.touchend=e.touchend),void 0!==e.touchcancel&&this._allowListeners.touchcancel!==e.touchcancel&&(e.touchcancel?window.addEventListener("touchcancel",this._onTouchCancel,{passive:!1}):window.removeEventListener("touchcancel",this._onTouchCancel),this._allowListeners.touchcancel=e.touchcancel),void 0!==e.keydown&&this._allowListeners.keydown!==e.keydown&&(e.keydown?window.addEventListener("keydown",this._onKeyDown):window.removeEventListener("keydown",this._onKeyDown),this._allowListeners.keydown=e.keydown),void 0!==e.contextmenu&&this._allowListeners.contextmenu!==e.contextmenu&&(e.contextmenu?this._canvas.addEventListener("contextmenu",this._onContextMenu):this._canvas.removeEventListener("contextmenu",this._onContextMenu),this._allowListeners.contextmenu=e.contextmenu)}dispose(){this.removeEventListeners()}removeAllDomEventListener(){for(let e in this._domEventListeners)delete this._domEventListeners[e]}removeDomEventListener(e){return!!this._domEventListeners[e]&&(delete this._domEventListeners[e],!0)}addEventListeners(){this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.addEventListener("mousedown",this._onMouseDown),this._canvas.addEventListener("mousemove",this._onMouseMove),this._canvas.addEventListener("mouseup",this._onMouseUp),this._canvas.addEventListener("mouseout",this._onMouseOut),window.addEventListener("touchstart",this._onTouchStart,{passive:!1}),window.addEventListener("touchmove",this._onTouchMove,{passive:!1}),window.addEventListener("touchend",this._onTouchUp,{passive:!1}),window.addEventListener("touchcancel",this._onTouchCancel,{passive:!1}),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("mousemove",this._onKeyDownMousePositionHelper),this._canvas.addEventListener("contextmenu",this._onContextMenu)}onContextMenu(e){!0!==this._systemInfo.isMobile&&e.preventDefault()}onKeyDown(e){this._canvas===document.elementFromPoint(this._currentMousePosition.x,this._currentMousePosition.y)&&Object.values(this._domEventListeners).forEach((t=>t.onKeyDown(e)))}onKeyDownMousePositionHelper(e){!0!==this._systemInfo.isMobile&&(this._currentMousePosition={x:e.pageX,y:e.pageY})}onMouseDown(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseDown(e))))}onMouseMove(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseMove(e))))}onMouseUp(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseUp(e))),Object.values(this._domEventListeners).forEach((t=>t.onMouseEnd(e))))}onMouseOut(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseOut(e))),Object.values(this._domEventListeners).forEach((t=>t.onMouseEnd(e))))}onMouseWheel(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onMouseWheel(e))))}onTouchUp(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchUp(e))),Object.values(this._domEventListeners).forEach((t=>t.onTouchEnd(e))))}onTouchCancel(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchCancel(e))),Object.values(this._domEventListeners).forEach((t=>t.onTouchEnd(e))))}onTouchMove(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchMove(e))))}onTouchStart(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchStart(e))))}removeEventListeners(){this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.removeEventListener("mousedown",this._onMouseDown),this._canvas.removeEventListener("mousemove",this._onMouseMove),this._canvas.removeEventListener("mouseup",this._onMouseUp),this._canvas.removeEventListener("mouseout",this._onMouseOut),window.removeEventListener("touchstart",this._onTouchStart),window.removeEventListener("touchmove",this._onTouchMove),window.removeEventListener("touchend",this._onTouchUp),window.removeEventListener("touchcancel",this._onTouchCancel),window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("mousemove",this._onKeyDownMousePositionHelper),this._canvas.removeEventListener("contextmenu",this._onContextMenu)}}},4345:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEngine=void 0;const r=i(5488),n=i(5383),a=i(1525);t.EventEngine=class{constructor(){this._logger=a.Logger.instance,this._uuidGenerator=n.UuidGenerator.instance,this._eventListeners={};for(const e in r.EVENTTYPE){const t=r.EVENTTYPE[e];this._eventListeners[e.toLowerCase()]=[];for(const e in t)this._eventListeners[t[e]]=[]}}static get instance(){return this._instance||(this._instance=new this)}addListener(e,t){var i;const r=this.convertTypeToString(e);if(!r)return"";const n=this._uuidGenerator.create();return null===(i=this._eventListeners[r])||void 0===i||i.push({token:n,cb:t}),n}emitEvent(e,t){const i=this.convertTypeToString(e);if(this._eventListeners[i]&&0!==this._eventListeners[i].length){const e=this._eventListeners[i].map((e=>e.cb));for(let i=0;i<e.length;i++)e[i](t)}i.includes(".")&&this.emitEvent(i.substr(0,i.indexOf(".")),t)}removeListener(e){for(const t in r.EVENTTYPE){const i=r.EVENTTYPE[t],n=t.toLowerCase();for(let t=0;t<this._eventListeners[n].length;t++)if(this._eventListeners[n][t].token===e)return this._eventListeners[n].splice(t,1),!0;for(const t in i)for(let r=0;r<this._eventListeners[i[t]].length;r++)if(this._eventListeners[i[t]][r].token===e)return this._eventListeners[i[t]].splice(r,1),!0}return!1}convertTypeToString(e){let t="";"string"==typeof e&&(t=e);for(const i in r.EVENTTYPE)e===r.EVENTTYPE[i]&&(t=i.toLowerCase());return t&&this._eventListeners[t]?t:(this._logger.warn("EventEngine.convertTypeToString: No valid type provided."),"")}}},5488:(e,t)=>{"use strict";var i,r,n,a,s,o,l;Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTTYPE=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_TASK=t.EVENTTYPE_SESSION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_CAMERA=void 0,function(e){e.CAMERA_START="camera.start",e.CAMERA_MOVE="camera.move",e.CAMERA_END="camera.end"}(i=t.EVENTTYPE_CAMERA||(t.EVENTTYPE_CAMERA={})),function(e){e.BEAUTY_RENDERING_FINISHED="rendering.beautyRenderingFinished"}(r=t.EVENTTYPE_RENDERING||(t.EVENTTYPE_RENDERING={})),function(e){e.SCENE_BOUNDING_BOX_CHANGE="scene.boundingBoxChange"}(n=t.EVENTTYPE_SCENE||(t.EVENTTYPE_SCENE={})),function(e){e.BUSY_MODE_ON="viewport.busy.on",e.BUSY_MODE_OFF="viewport.busy.off",e.VIEWPORT_CREATED="viewport.created",e.VIEWPORT_UPDATED="viewport.updated",e.VIEWPORT_CLOSED="viewport.closed",e.VIEWPORT_SETTINGS_LOADED="viewport.settingsLoaded"}(a=t.EVENTTYPE_VIEWPORT||(t.EVENTTYPE_VIEWPORT={})),function(e){e.SESSION_CREATED="session.created",e.SESSION_CUSTOMIZED="session.customized",e.SESSION_CLOSED="session.closed",e.SESSION_INITIAL_OUTPUTS_LOADED="session.initialOutputsLoaded"}(s=t.EVENTTYPE_SESSION||(t.EVENTTYPE_SESSION={})),function(e){e.TASK_START="task.start",e.TASK_PROCESS="task.process",e.TASK_END="task.end",e.TASK_CANCEL="task.cancel"}(o=t.EVENTTYPE_TASK||(t.EVENTTYPE_TASK={})),function(e){e.DRAG_START="interaction.drag.start",e.DRAG_MOVE="interaction.drag.move",e.DRAG_END="interaction.drag.end",e.HOVER_ON="interaction.hover.on",e.HOVER_OFF="interaction.hover.off",e.SELECT_ON="interaction.select.on",e.SELECT_OFF="interaction.select.off"}(l=t.EVENTTYPE_INTERACTION||(t.EVENTTYPE_INTERACTION={})),t.EVENTTYPE={CAMERA:i,RENDERING:r,SCENE:n,SESSION:s,VIEWPORT:a,INTERACTION:l,TASK:o}},4442:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const a=n(i(7218)),s=i(7849),o=i(9481);t.HttpClient=class{constructor(){this._sessionLoading={}}static get instance(){return this._instance||(this._instance=new this)}addDataLoading(e,t){this._sessionLoading[e]=t}convertError(e){throw e instanceof s.ShapeDiverResponseError?new o.ShapeDiverGeometryBackendResponseError(e.message,e.status,e.error,e.desc):e instanceof s.ShapeDiverRequestError?new o.ShapeDiverGeometryBackendRequestError(e.message,e.desc):e}get(e,t={responseType:"arraybuffer"},i=!1){return r(this,void 0,void 0,(function*(){let r,n=this.getSessionId(e);return!n&&Object.keys(this._sessionLoading).length>0&&(n=Object.keys(this._sessionLoading)[0]),n&&(r=this._sessionLoading[n]),i?void 0===r||void 0===n||e.startsWith("blob:")||e.startsWith("data:")?(0,a.default)(e,Object.assign({method:"get"},t)).catch((e=>{throw this.convertError(e)})):new Promise(((t,i)=>{r.downloadTexture(n,e).then((e=>{t({data:e[0],headers:{"content-type":e[1]}})})).catch((e=>i(e)))})).catch((e=>{throw this.convertError(e)})):r?new Promise(((i,n)=>{r.getAsset(e).then((e=>{i({data:e[0],headers:{"content-type":e[1]}})})).catch((()=>{const r=(0,a.default)(e,Object.assign({method:"get"},t));r.catch((e=>n(e))),i(r)}))})).catch((e=>{throw this.convertError(e)})):(0,a.default)(e,Object.assign({method:"get"},t)).catch((e=>{throw this.convertError(e)}))}))}loadTexture(e){return r(this,void 0,void 0,(function*(){return this.get(e,void 0,!0)}))}removeDataLoading(e){delete this._sessionLoading[e]}getSessionId(e){const t=e.split("/"),i=t.indexOf("session");if(-1!==i&&t.length===i+4){const e=t[i+1];if(!this._sessionLoading[e])return;return e}}}},8877:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceEvaluator=t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerGeneralError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.LOGGING_LEVEL=t.Logger=t.InputValidator=t.TypeChecker=t.Converter=t.UuidGenerator=t.HttpClient=t.DomEventEngine=t.SystemInfo=t.StatePromise=t.StateEngine=t.SettingsEngine=t.EVENTTYPE_TASK=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.EventEngine=void 0;const r=i(4345);Object.defineProperty(t,"EventEngine",{enumerable:!0,get:function(){return r.EventEngine}});const n=i(5488);Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return n.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return n.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return n.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return n.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return n.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return n.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return n.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return n.EVENTTYPE_VIEWPORT}});const a=i(8979);Object.defineProperty(t,"SettingsEngine",{enumerable:!0,get:function(){return a.SettingsEngine}});const s=i(2100);Object.defineProperty(t,"StateEngine",{enumerable:!0,get:function(){return s.StateEngine}});const o=i(6629);Object.defineProperty(t,"SystemInfo",{enumerable:!0,get:function(){return o.SystemInfo}});const l=i(4529);Object.defineProperty(t,"DomEventEngine",{enumerable:!0,get:function(){return l.DomEventEngine}});const c=i(4411);Object.defineProperty(t,"Converter",{enumerable:!0,get:function(){return c.Converter}});const u=i(4442);Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return u.HttpClient}});const h=i(633);Object.defineProperty(t,"InputValidator",{enumerable:!0,get:function(){return h.InputValidator}});const d=i(1227);Object.defineProperty(t,"TypeChecker",{enumerable:!0,get:function(){return d.TypeChecker}});const f=i(5383);Object.defineProperty(t,"UuidGenerator",{enumerable:!0,get:function(){return f.UuidGenerator}});const p=i(5436);Object.defineProperty(t,"PerformanceEvaluator",{enumerable:!0,get:function(){return p.PerformanceEvaluator}});const m=i(1525);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return m.Logger}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return m.LOGGING_LEVEL}});const g=i(3262);Object.defineProperty(t,"StatePromise",{enumerable:!0,get:function(){return g.StatePromise}});const b=i(2707);Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return b.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return b.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return b.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return b.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return b.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return b.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return b.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return b.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return b.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerGeneralError",{enumerable:!0,get:function(){return b.ShapeDiverViewerGeneralError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return b.ShapeDiverViewerWebGLError}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return b.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return b.ShapeDiverViewerViewportError}});const v=i(7878);Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return v.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return v.ShapeDiverViewerErrorType}});const _=i(9481);Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendResponseError}});const y=i(7849);Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return y.ShapeDiverResponseErrorType}})},633:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputValidator=void 0;const n=r(i(7856)),a=i(1525),s=i(2707),o=i(1227);t.InputValidator=class{constructor(){this._logger=a.Logger.instance,this._typeChecker=o.TypeChecker.instance}static get instance(){return this._instance||(this._instance=new this)}sanitize(e){return n.default.sanitize(e)}validateAndError(e,t,i,r=!0,n=[]){if(!this.validate(t,i,r,n))throw new s.ShapeDiverViewerValidationError(`${e}: Input could not be validated. ${t} is not of type ${i}.${!1===r?" (Can also be undefined)":""}`,t,i)}validate(e,t,i=!0,r=[]){if(!1===i&&void 0===e)return!0;switch(t){case"array":if(Array.isArray(e))return!0;break;case"string":if(this._typeChecker.isTypeOf(e,"string"))return!0;break;case"boolean":if(this._typeChecker.isTypeOf(e,"boolean"))return!0;break;case"function":if(this._typeChecker.isTypeOf(e,"function"))return!0;break;case"number":if(this._typeChecker.isTypeOf(e,"number")&&!isNaN(e))return!0;break;case"factor":if(this._typeChecker.isTypeOf(e,"number")&&e>=0&&e<=1)return!0;break;case"positive":if(this._typeChecker.isTypeOf(e,"number")&&e>=0)return!0;break;case"HTMLCanvasElement":if(this._typeChecker.isHTMLCanvasElement(e))return!0;break;case"enum":if(this._typeChecker.isTypeOf(e,"string")&&r.includes(e))return!0;break;case"vec3":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number"))return!0;break;case"quat":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number"))return!0;break;case"cubeMap":if(Array.isArray(e)&&6===e.length&&this._typeChecker.isTypeOf(e[0],"string")&&this._typeChecker.isTypeOf(e[1],"string")&&this._typeChecker.isTypeOf(e[2],"string")&&this._typeChecker.isTypeOf(e[3],"string")&&this._typeChecker.isTypeOf(e[4],"string")&&this._typeChecker.isTypeOf(e[5],"string"))return!0;if(this._typeChecker.isTypeOf(e,"string"))return!0;break;case"stringArray":if(Array.isArray(e)){let t=!0;for(let i=0;i<e.length;i++)"string"!=typeof e[i]&&(t=!1);if(!0===t)return!0}break;case"object":if(this._typeChecker.isTypeOf(e,"object"))return!0;break;case"file":if(this._typeChecker.isTypeOf(e,"string")||e instanceof File||e instanceof Blob)return!0;break;case"color":if(this._typeChecker.isTypeOf(e,"string")||Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")||this._typeChecker.isTypeOf(e,"number"))return!0;break;case"mat4":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number")&&this._typeChecker.isTypeOf(e[4],"number")&&this._typeChecker.isTypeOf(e[5],"number")&&this._typeChecker.isTypeOf(e[6],"number")&&this._typeChecker.isTypeOf(e[7],"number")&&this._typeChecker.isTypeOf(e[8],"number")&&this._typeChecker.isTypeOf(e[9],"number")&&this._typeChecker.isTypeOf(e[10],"number")&&this._typeChecker.isTypeOf(e[11],"number")&&this._typeChecker.isTypeOf(e[12],"number")&&this._typeChecker.isTypeOf(e[13],"number")&&this._typeChecker.isTypeOf(e[14],"number")&&this._typeChecker.isTypeOf(e[15],"number"))return!0;break;default:return!1}return!1}}},1525:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LOGGING_LEVEL=void 0,function(e){e.NONE="none",e.ERROR="error",e.FATAL="fatal",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e.DEBUG_HIGH="debug_high",e.DEBUG_MEDIUM="debug_medium",e.DEBUG_LOW="debug_low"}(i=t.LOGGING_LEVEL||(t.LOGGING_LEVEL={})),t.Logger=class{constructor(){this._loggingLevel=i.WARN,this._showMessages=!0}static get instance(){return this._instance||(this._instance=new this)}get loggingLevel(){return this._loggingLevel}set loggingLevel(e){this._loggingLevel=e}get showMessages(){return this._showMessages}set showMessages(e){this._showMessages=e}debug(e){this.canLog(i.DEBUG)&&!0===this.showMessages&&console.debug("(DEBUG) "+this.messageConstruction(e))}debugHigh(e){this.canLog(i.DEBUG_HIGH)&&!0===this.showMessages&&console.debug("(DEBUG_HIGH) "+this.messageConstruction(e))}debugLow(e){this.canLog(i.DEBUG_LOW)&&!0===this.showMessages&&console.debug("(DEBUG_LOW) "+this.messageConstruction(e))}debugMedium(e){this.canLog(i.DEBUG_MEDIUM)&&!0===this.showMessages&&console.debug("(DEBUG_MEDIUM) "+this.messageConstruction(e))}error(e){this.canLog(i.ERROR)&&!0===this.showMessages&&console.error("(ERROR) "+this.messageConstruction(e))}fatal(e){this.canLog(i.FATAL)&&!0===this.showMessages&&console.error("(FATAL) "+this.messageConstruction(e))}info(e){this.canLog(i.INFO)&&!0===this.showMessages&&console.info("(INFO) "+this.messageConstruction(e))}warn(e){this.canLog(i.WARN)&&!0===this.showMessages&&console.warn("(WARN) "+this.messageConstruction(e))}canLog(e){switch(this.loggingLevel){case i.ERROR:if(e===i.FATAL)return!1;if(e===i.WARN)return!1;if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.FATAL:if(e===i.WARN)return!1;if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.WARN:if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.INFO:if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.DEBUG_HIGH:if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.DEBUG_MEDIUM:if(e===i.DEBUG_LOW)return!1;case i.DEBUG_LOW:case i.DEBUG:default:return!0}}messageConstruction(e){return(new Date).toISOString()+": "+e}}},9481:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=void 0;const r=i(7878);class n extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR,t,e),this.desc=t}}t.ShapeDiverGeometryBackendRequestError=n;class a extends r.ShapeDiverViewerError{constructor(e,t,i,n){super(r.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_RESPONSE_ERROR,n,e),this.status=t,this.geometryBackendErrorType=i,this.desc=n}}t.ShapeDiverGeometryBackendResponseError=a},7878:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverViewerError=t.ShapeDiverError=t.ShapeDiverViewerErrorType=void 0,function(e){e.AR_ERROR="SdARError",e.GEOMETRY_BACKEND_REQUEST_ERROR="SdGeometryBackendRequestError",e.GEOMETRY_BACKEND_RESPONSE_ERROR="SdGeometryBackendResponseError",e.CAMERA_ERROR="SdCameraError",e.CONNECTION_ERROR="SdConnectionError",e.DATA_PROCESSING_ERROR="SdDataProcessingError",e.ENVIRONMENT_MAP_ERROR="SdEnvironmentMapError",e.GENERAL_VIEWPORT_ERROR="SdGeneralViewerError",e.INTERACTION_ERROR="SdInteractionError",e.LIGHT_ERROR="SdLightError",e.SESSION_ERROR="SdSessionError",e.SETTINGS_ERROR="SdSettingsError",e.VALIDATION_ERROR="SdValidationError",e.WEBGL_ERROR="SdWebGLError",e.UNKNOWN=""}(i=t.ShapeDiverViewerErrorType||(t.ShapeDiverViewerErrorType={}));class r extends Error{constructor(e){super(e)}}t.ShapeDiverError=r,t.ShapeDiverViewerError=class extends r{constructor(e,t,r){super(r),this.errorType=e,this.desc=t,this.errorType=Object.values(i).includes(e)?e:i.UNKNOWN}}},2707:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerArError=t.ShapeDiverViewerGeneralError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerUnknownError=void 0;const r=i(7878);class n extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.UNKNOWN,"An unknown error occurred.",e),this.message=e,this.errorObject=t,void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.ShapeDiverViewerUnknownError=n;class a extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.DATA_PROCESSING_ERROR,"An error occurred while processing data.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerDataProcessingError=a;class s extends r.ShapeDiverViewerError{constructor(e,t,i){super(r.ShapeDiverViewerErrorType.ENVIRONMENT_MAP_ERROR,"An error occurred while loading the environment map.",e),this.message=e,this.url=t,this.errorObject=i}}t.ShapeDiverViewerEnvironmentMapError=s;class o extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.WEBGL_ERROR,"An error occurred regarding to the WebGL context.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerWebGLError=o;class l extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.SETTINGS_ERROR,"An error occurred while loading the settings.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerSettingsError=l;class c extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.SESSION_ERROR,"An error occurred while working with the session.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerSessionError=c;class u extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.SESSION_ERROR,"An error occurred while working with the viewport.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerViewportError=u;class h extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.LIGHT_ERROR,"An error occurred while working with the lights.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerLightError=h;class d extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.CAMERA_ERROR,"An error occurred while working with the cameras.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerCameraError=d;class f extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.GENERAL_VIEWPORT_ERROR,"An error occurred while working with the viewer.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerGeneralError=f;class p extends r.ShapeDiverViewerError{constructor(e,t){super(r.ShapeDiverViewerErrorType.AR_ERROR,"An error occurred while working with AR.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerArError=p;class m extends r.ShapeDiverViewerError{constructor(e,t,i,n){super(r.ShapeDiverViewerErrorType.VALIDATION_ERROR,"An error occurred while validating the value.",e),this.message=e,this.value=t,this.requestedType=i,this.errorObject=n}}t.ShapeDiverViewerValidationError=m;class g extends r.ShapeDiverViewerError{constructor(e){super(r.ShapeDiverViewerErrorType.INTERACTION_ERROR,"An error occurred with interactions.",e),this.message=e}}t.ShapeDiverViewerInteractionError=g},5436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceEvaluator=void 0,t.PerformanceEvaluator=class{static get instance(){return this._instance||(this._instance=new this)}end(){this._eval&&(this._eval.end||(this._eval.end=performance.now(),this._eval.duration=this._eval.end-this._eval.start))}endSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].end=performance.now(),this._eval.section[e].duration=this._eval.section[e].end-this._eval.section[e].start)))}getEvaluation(){return this._eval}getEvaluationToString(){return`Performance Evaluation: ${this._eval.duration}ms\n`}start(e){this._eval={start:e||performance.now(),section:{}}}startSection(e,t){this._eval&&(this._eval.end||(this._eval.section[e]={start:t||performance.now()}))}}},8979:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsEngine=void 0;const r=i(148),n=i(4345),a=i(1525),s=i(2707);t.SettingsEngine=class{constructor(){this._eventEngine=n.EventEngine.instance,this._logger=a.Logger.instance,this._settings=(0,r.DefaultsV3_4)()}get ar(){return this._settings.ar}get camera(){return this._settings.camera}get environment(){return this._settings.environment}get environmentGeometry(){return this._settings.environmentGeometry}get general(){return this._settings.general}get light(){return this._settings.light}get rendering(){return this._settings.rendering}get session(){return this._settings.session}set session(e){this._settings.session=e}get settings(){return this._settings}get settingsJson(){return this._settingsJson}flatten(){const e=t=>{const i={};for(let n in t)if(t.hasOwnProperty(n))if("object"==typeof t[n]){const a=e(t[n]);for(var r in a)a.hasOwnProperty(r)&&(i[n+"."+r]=a[r])}else i[n]=t[n];return i};return e(this.settings)}loadSettings(e){if(this._settingsJson=e,JSON.stringify(e)!==JSON.stringify({})){const t=["1.0","2.0","3.0","3.1","3.2","3.3"];for(let i=0;i<t.length;i++){const n=t[i];try{return(0,r.validate)(e,n),this._settings=(0,r.convert)(e,r.latestVersion),void this.cleanSettings(this._settings)}catch(e){}}try{return(0,r.validate)(e,r.latestVersion),this._settings=(0,r.convert)(e,r.latestVersion),void this.cleanSettings(this._settings)}catch(e){throw new s.ShapeDiverViewerSettingsError("SettingsEngine.loadSettings: Settings could not be validated. "+e.message,e)}}else this._settings=(0,r.DefaultsV3_4)()}reset(){this._settings=(0,r.DefaultsV3_4)()}cleanSettings(e){for(let t in e.camera.cameras){const i=e.camera.cameras[t];if("perspective"===i.type){const e=i.controls.restrictions;null===e.position.cube.min.x&&(e.position.cube.min.x=-1/0),null===e.position.cube.min.y&&(e.position.cube.min.y=-1/0),null===e.position.cube.min.z&&(e.position.cube.min.z=-1/0),null===e.position.cube.max.x&&(e.position.cube.max.x=1/0),null===e.position.cube.max.y&&(e.position.cube.max.y=1/0),null===e.position.cube.max.z&&(e.position.cube.max.z=1/0),null===e.position.sphere.radius&&(e.position.sphere.radius=1/0),null===e.target.cube.min.x&&(e.target.cube.min.x=-1/0),null===e.target.cube.min.y&&(e.target.cube.min.y=-1/0),null===e.target.cube.min.z&&(e.target.cube.min.z=-1/0),null===e.target.cube.max.x&&(e.target.cube.max.x=1/0),null===e.target.cube.max.y&&(e.target.cube.max.y=1/0),null===e.target.cube.max.z&&(e.target.cube.max.z=1/0),null===e.target.sphere.radius&&(e.target.sphere.radius=1/0),null===e.rotation.minAzimuthAngle&&(e.rotation.minAzimuthAngle=-1/0),null===e.rotation.maxAzimuthAngle&&(e.rotation.maxAzimuthAngle=1/0),null===e.zoom.maxDistance&&(e.zoom.maxDistance=1/0)}}}}},2100:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateEngine=void 0;const r=i(3262);t.StateEngine=class{constructor(){this._fontLoaded=new r.StatePromise,this._renderingEngines={},this._sessionEngines={},this._fontLoaded=new r.StatePromise}static get instance(){return this._instance||(this._instance=new this)}get fontLoaded(){return this._fontLoaded}get renderingEngines(){return this._renderingEngines}get sessionEngines(){return this._sessionEngines}}},3262:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatePromise=void 0,t.StatePromise=class{constructor(){this._resolved=!1,this._callbacks=[],this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._promise.finally((()=>{this._resolved=!0}))}get resolved(){return this._resolved}get resolve(){return this._resolve}get reject(){return this._reject}then(e){return i(this,void 0,void 0,(function*(){this._callbacks.push(e),!0===this.resolved?e():this._promise.then(e)}))}reset(){this._resolved=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._promise.finally((()=>{this._resolved=!0}));const e=[...this._callbacks];this._callbacks=[];for(let t=0;t<e.length;t++)this.then(e[t])}}},6629:function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemInfo=void 0;const n=r(i(2238));t.SystemInfo=class{constructor(){this._parser=new n.default;const e="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent.indexOf("Trident")>-1;this._isBrowser=e||"undefined"!=typeof document&&"function"==typeof document.getElementById&&window&&"function"==typeof window.Event,this._isIframe=!1,this._isBrowser?(this._isIframe=parent!==window,this._origin=this._isIframe?document.referrer:window.location.origin):this._origin="direct"}static get instance(){return this._instance||(this._instance=new this)}get isAndroid(){return"Android"===this._parser.getOS().name}get isBrowser(){return this._isBrowser}get isChrome(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Chrome"))}get isFirefox(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Firefox"))}get isIE(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("IE"))}get isIOS(){return"iOS"===this._parser.getOS().name||window.navigator&&5===window.navigator.maxTouchPoints&&"MacIntel"===window.navigator.platform}get isIframe(){return this._isIframe}get isInstagram(){return"Instagram"===this._parser.getBrowser().name}get isMacOS(){return"Mac OS"===this._parser.getOS().name}get isMobile(){const e=this._parser.getDevice().type;return"mobile"===e||"tablet"===e}get isSafari(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Safari"))}get origin(){return this._origin+""}}},1227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeChecker=void 0,t.TypeChecker=class{static get instance(){return this._instance||(this._instance=new this)}isHTMLCanvasElement(e){return e instanceof HTMLCanvasElement}isTypeOf(e,t){return typeof e===t}}},5383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UuidGenerator=void 0;const r=i(7429);t.UuidGenerator=class{static get instance(){return this._instance||(this._instance=new this)}create(){return(0,r.v4)()}parse(e){return(0,r.parse)(e)}stringify(e){return(0,r.stringify)(e)}validate(e){return(0,r.validate)(e)}}},7484:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},p=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationData=void 0;const m=i(3858),g=i(887),b=i(5108);class v extends m.AbstractTreeNodeData{constructor(e,t,i,p,m,g){super(m,g),r.set(this,!1),n.set(this,0),a.set(this,void 0),s.set(this,void 0),o.set(this,!1),l.set(this,void 0),c.set(this,!1),u.set(this,void 0),h.set(this,!0),d.set(this,[]),f(this,s,e,"f"),f(this,u,t,"f"),f(this,l,i,"f"),f(this,a,p,"f")}get animate(){return p(this,r,"f")}get animationTime(){return p(this,n,"f")}set animationTime(e){f(this,n,e,"f")}get duration(){return p(this,a,"f")}get name(){return p(this,s,"f")}get repeat(){return p(this,o,"f")}set repeat(e){f(this,o,e,"f")}get reset(){return p(this,h,"f")}set reset(e){f(this,h,e,"f")}get start(){return p(this,l,"f")}get tracks(){return p(this,u,"f")}set tracks(e){f(this,u,e,"f")}clone(){return new v(this.name,p(this,u,"f"),this.start,this.duration,this.id,this.version)}continueAnimation(){p(this,c,"f")&&f(this,r,!0,"f")}pauseAnimation(){p(this,c,"f")&&f(this,r,!1,"f")}startAnimation(){f(this,n,0,"f"),f(this,r,!0,"f"),f(this,c,!0,"f"),f(this,d,[],"f");for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e];if(p(this,d,"f").includes(t.node.id))continue;p(this,d,"f").push(t.node.id);const i=t.node.transformations.find((e=>"gltf_matrix"===e.id));if(i)t.previousMatrix={id:i.id,matrix:g.mat4.clone(i.matrix)},i.matrix=g.mat4.create();else switch(t.path){case"scale":const e=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(e){t.previousMatrix={id:e.id,matrix:g.mat4.clone(e.matrix)};continue}break;case"rotation":const i=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));if(i){t.previousMatrix={id:i.id,matrix:g.mat4.clone(i.matrix)};continue}break;case"translation":const r=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));if(r){t.previousMatrix={id:r.id,matrix:g.mat4.clone(r.matrix)};continue}}}}stopAnimation(){if(this.reset)for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e],i=this.id+"_"+e,r=t.node.transformations.filter((e=>e.id===i));if(t.node.transformations=t.node.transformations.filter((e=>!r.includes(e))),t.previousMatrix){if("gltf_matrix"===t.previousMatrix.id){t.node.transformations.find((e=>"gltf_matrix"===e.id)).matrix=t.previousMatrix.matrix,t.node.transformations.find((e=>"gltf_matrix_translation"===e.id)).matrix=g.mat4.create(),t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id)).matrix=g.mat4.create(),t.node.transformations.find((e=>"gltf_matrix_scale"===e.id)).matrix=g.mat4.create();continue}switch(t.path){case"scale":t.node.transformations.find((e=>"gltf_matrix_scale"===e.id)).matrix=t.previousMatrix.matrix;continue;case"rotation":t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id)).matrix=t.previousMatrix.matrix;continue;case"translation":t.node.transformations.find((e=>"gltf_matrix_translation"===e.id)).matrix=t.previousMatrix.matrix;continue}}else if(!p(this,d,"f").includes(t.node.id)){const e=t.node.transformations.find((e=>"gltf_matrix"===e.id));if(e)e.matrix=g.mat4.create();else{const e=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));e&&(e.matrix=g.mat4.create());const i=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));i&&(i.matrix=g.mat4.create());const r=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));r&&(r.matrix=g.mat4.create())}}}else for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e],i=this.id+"_"+e,r=t.node.transformations.filter((e=>e.id===i));t.node.transformations=t.node.transformations.filter((e=>!r.includes(e)));const n=t.times.length-1;let a=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));a||(a={id:"gltf_matrix_translation",matrix:g.mat4.create()},t.node.transformations.push(a));let s=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));s||(s={id:"gltf_matrix_rotation",matrix:g.mat4.create()},t.node.transformations.push(s));let o=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(o||(o={id:"gltf_matrix_scale",matrix:g.mat4.create()},t.node.transformations.push(o)),"rotation"===t.path){let e,i;t.pivot&&(e=g.mat4.fromTranslation(g.mat4.create(),g.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),i=g.mat4.fromTranslation(g.mat4.create(),g.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2])));let r=g.quat.fromValues(t.values[4*n+0],t.values[4*n+1],t.values[4*n+2],t.values[4*n+3]);const a=g.mat4.fromQuat(g.mat4.create(),r);s.matrix=e&&i?g.mat4.multiply(g.mat4.create(),g.mat4.multiply(g.mat4.create(),e,a),i):a}else if("translation"===t.path){let e=g.vec3.fromValues(t.values[3*n+0],t.values[3*n+1],t.values[3*n+2]);a.matrix=g.mat4.fromTranslation(g.mat4.create(),e)}else if("scale"===t.path){let e=g.vec3.fromValues(t.values[3*n+0],t.values[3*n+1],t.values[3*n+2]);o.matrix=g.mat4.fromScaling(g.mat4.create(),e)}else if("weights"===t.path){let e=[];const i=t.values.length/t.times.length;for(let r=0;r<i;r++)e.push(t.values[n*i+r]);const r=t=>{for(let r=0;r<t.data.length;r++)t.data[r]instanceof b.GeometryData&&t.data[r].morphWeights.length===i&&(t.data[r].morphWeights=e);for(let e=0;e<t.children.length;e++)r(t.children[e])};r(t.node)}}f(this,n,-1,"f"),f(this,c,!1,"f"),f(this,r,!1,"f")}}t.AnimationData=v,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap},1676:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoneData=void 0;const r=i(3858);class n extends r.AbstractTreeNodeData{constructor(e,t){super(e,t)}clone(){return new n(this.id,this.version)}}t.BoneData=n},4725:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,void 0),n(this,r,e,"f")}get data(){return a(this,r,"f")}set data(e){n(this,r,e,"f")}clone(){return new o(Object.assign({},this.data),this.id,this.version)}}t.CustomData=o,r=new WeakMap},5108:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E,w,S,T,x,M,R,P,C,k,O,D=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},N=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryData=t.PrimitiveData=t.AttributeData=void 0;const I=i(887),L=i(3858),U=i(5174),V=i(339);class F extends L.AbstractTreeNodeData{constructor(e,t,i,v,_,y,A,E=[],w=[],S,T,x,M,R,P=[],C,k){super(C,k),r.set(this,void 0),n.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,[]),h.set(this,[]),d.set(this,[]),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,void 0),D(this,r,e,"f"),D(this,c,t,"f"),D(this,l,i,"f"),D(this,n,v,"f"),D(this,o,_,"f"),D(this,f,y,"f"),D(this,s,A,"f"),D(this,h,E,"f"),D(this,u,w,"f"),D(this,a,S,"f"),D(this,b,T,"f"),D(this,p,x,"f"),D(this,m,M,"f"),D(this,g,R,"f"),D(this,d,P,"f")}get array(){return N(this,r,"f")}get byteOffset(){return N(this,n,"f")}get byteStride(){return N(this,a,"f")}get count(){return N(this,s,"f")}get elementBytes(){return N(this,o,"f")}get itemBytes(){return N(this,l,"f")}get itemSize(){return N(this,c,"f")}get max(){return N(this,u,"f")}get min(){return N(this,h,"f")}get morphAttributeData(){return N(this,d,"f")}get normalized(){return N(this,f,"f")}get sparse(){return N(this,p,"f")}get sparseIndices(){return N(this,m,"f")}get sparseValues(){return N(this,g,"f")}get target(){return N(this,b,"f")}clone(){return new F(N(this,r,"f"),N(this,c,"f"),N(this,l,"f"),N(this,n,"f"),N(this,o,"f"),N(this,f,"f"),N(this,s,"f"),N(this,h,"f"),N(this,u,"f"),N(this,a,"f"),N(this,b,"f"),N(this,p,"f"),N(this,m,"f"),N(this,g,"f"),N(this,d,"f"),this.id,this.version)}}t.AttributeData=F,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap;class G extends L.AbstractTreeNodeData{constructor(e={},t=null,i,r){super(i,r),v.set(this,{}),_.set(this,[]),y.set(this,null),A.set(this,{}),D(this,v,e,"f"),D(this,y,t,"f")}get attributes(){return N(this,v,"f")}get boundingBox(){return this.computeBoundingBox(I.mat4.create())}get indices(){return N(this,y,"f")}set indices(e){D(this,y,e,"f")}get threeJsObject(){return N(this,A,"f")}clone(){let e={};for(let t in N(this,v,"f"))e[t]=N(this,v,"f")[t].clone();return new G(e,N(this,y,"f"),this.id,this.version)}computeBoundingBox(e){const t=N(this,_,"f").find((t=>I.mat4.equals(e,t.matrix)));if(t)return t.boundingBox;if(N(this,v,"f").POSITION){if(3===N(this,v,"f").POSITION.min.length&&3===N(this,v,"f").POSITION.max.length&&I.mat4.equals(e,I.mat4.create())){const t=new U.Box(I.vec3.fromValues(N(this,v,"f").POSITION.min[0],N(this,v,"f").POSITION.min[1],N(this,v,"f").POSITION.min[2]),I.vec3.fromValues(N(this,v,"f").POSITION.max[0],N(this,v,"f").POSITION.max[1],N(this,v,"f").POSITION.max[2]));return N(this,_,"f").push({boundingBox:t,matrix:I.mat4.clone(e)}),t}if(!I.mat4.equals(e,I.mat4.create())){if(I.quat.equals(I.mat4.getRotation(I.quat.create(),e),I.quat.create())){const t=this.computeBoundingBox(I.mat4.create()).clone().applyMatrix(e);return N(this,_,"f").push({boundingBox:t,matrix:I.mat4.clone(e)}),t}{const t=new U.Box;return t.setFromAttributeArray(N(this,v,"f").POSITION.array,N(this,v,"f").POSITION.byteStride,N(this,v,"f").POSITION.itemBytes,e),N(this,_,"f").push({boundingBox:t,matrix:I.mat4.clone(e)}),t}}{const t=new U.Box;t.setFromAttributeArray(N(this,v,"f").POSITION.array,N(this,v,"f").POSITION.byteStride,N(this,v,"f").POSITION.itemBytes,e),N(this,_,"f").push({boundingBox:t,matrix:I.mat4.clone(e)})}}return new U.Box}}t.PrimitiveData=G,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap;class B extends L.AbstractTreeNodeData{constructor(e,t=V.PRIMITIVE_MODE.TRIANGLES,i=null,r=[],n=null,a,s){super(a,s),E.set(this,V.PRIMITIVE_MODE.TRIANGLES),w.set(this,void 0),S.set(this,null),T.set(this,new U.Box),x.set(this,[]),M.set(this,null),R.set(this,[]),P.set(this,[]),C.set(this,0),k.set(this,null),O.set(this,{}),D(this,w,e,"f"),D(this,T,this.primitive.boundingBox.clone(),"f"),D(this,P,r,"f"),D(this,E,t,"f"),D(this,M,i,"f"),D(this,k,i,"f"),D(this,S,n,"f")}get attributeMaterial(){return N(this,S,"f")}set attributeMaterial(e){D(this,S,e,"f")}get boundingBox(){return N(this,T,"f")}get effectMaterials(){return N(this,x,"f")}get material(){return N(this,M,"f")}set material(e){D(this,M,e,"f")}get materialVariants(){return N(this,R,"f")}get mode(){return N(this,E,"f")}get morphWeights(){return N(this,P,"f")}set morphWeights(e){D(this,P,e,"f")}get primitive(){return N(this,w,"f")}get renderOrder(){return N(this,C,"f")}set renderOrder(e){D(this,C,e,"f")}get standardMaterial(){return N(this,k,"f")}set standardMaterial(e){D(this,k,e,"f")}get threeJsObject(){return N(this,O,"f")}clone(){return new B(N(this,w,"f"),N(this,E,"f"),N(this,M,"f"),N(this,P,"f"),N(this,S,"f"))}intersect(e,t){return this.mode!==V.PRIMITIVE_MODE.TRIANGLES?null:this.boundingBox.intersect(e,t)}}t.GeometryData=B,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap,R=new WeakMap,P=new WeakMap,C=new WeakMap,k=new WeakMap,O=new WeakMap},5005:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},f=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorCustomData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorData=void 0;const p=i(3858);class m extends p.AbstractTreeNodeData{constructor(e){super(e.id,e.version),r.set(this,{}),n.set(this,void 0),a.set(this,void 0),s.set(this,!0),o.set(this,void 0),l.set(this,void 0),c.set(this,[]),d(this,l,e.location,"f"),d(this,n,e.data,"f"),d(this,a,e.format,"f"),d(this,s,void 0===e.hideable||e.hideable,"f"),d(this,c,e.viewports||[],"f"),d(this,o,e.intersectionTarget,"f"),this.internalHtmlElement=document.createElement("div"),this.internalHtmlElement.style.position="absolute",this.internalHtmlElement.style.whiteSpace="nowrap",this.internalHtmlElement.style.textOverflow="clip",this.internalHtmlElement.style.fontFamily='"Helvetica Neue", Helvetica, Arial, sans-serif'}get data(){return f(this,n,"f")}set data(e){d(this,n,e,"f")}get format(){return f(this,a,"f")}set format(e){d(this,a,e,"f")}get hideable(){return f(this,s,"f")}set hideable(e){d(this,s,e,"f")}get intersectionTarget(){return f(this,o,"f")}set intersectionTarget(e){d(this,o,e,"f")}get location(){return f(this,l,"f")}set location(e){d(this,l,e,"f")}get viewports(){return f(this,c,"f")}set viewports(e){d(this,c,e,"f")}createViewerHtmlElement(e){return f(this,r,"f")[e]?f(this,r,"f")[e]:this.viewports.includes(e)||0===this.viewports.length?(f(this,r,"f")[e]=this.internalHtmlElement.cloneNode(!0),this.create({anchor:this,parent:f(this,r,"f")[e]}),f(this,r,"f")[e]):null}getViewerHtmlElement(e){return f(this,r,"f")[e]?f(this,r,"f")[e]:null}update(e){let t,i;e.htmlElement.style.display="",(this.hideable&&e.hidden||!1===e.visible)&&(e.htmlElement.style.display="none"),t=this.data.position&&"right"===this.data.position.horizontal?e.container[0]-e.htmlElement.offsetWidth:this.data.position&&"left"===this.data.position.horizontal?e.container[0]:e.container[0]-e.htmlElement.offsetWidth/2,i=this.data.position&&"bottom"===this.data.position.vertical?e.container[1]-e.htmlElement.offsetHeight:this.data.position&&"top"===this.data.position.vertical?e.container[1]:e.container[1]-e.htmlElement.offsetHeight/2,t/=e.scale[0],i/=e.scale[1],e.htmlElement.style.left=t+"px",e.htmlElement.style.top=i+"px"}}t.HTMLElementAnchorData=m,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap;class g extends m{constructor(e){super({location:e.location,data:e.data,format:"text",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new g({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){var t;const i=document.createElement("span");i.style.display="none",i.style.userSelect="none",i.style.cursor="default",i.style.pointerEvents="none",i.style.color=null===(t=e.anchor.data.color)||void 0===t?void 0:t.toString(),i.innerHTML=e.anchor.data.text,i.style.display="block",i.style.textOverflow="clip",i.style.overflow="hidden",e.parent.appendChild(i),!e.anchor.data.textAlign||"right"!==e.anchor.data.textAlign&&"center"!==e.anchor.data.textAlign?i.style.textAlign="left":i.style.textAlign=e.anchor.data.textAlign}}t.HTMLElementAnchorTextData=g;class b extends m{constructor(e){super({location:e.location,data:e.data,format:"image",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new b({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){const t=document.createElement("img");t.style.userSelect="none",t.style.cursor="default",t.style.pointerEvents="none",e.parent.appendChild(t),t.src=e.anchor.data.src,e.anchor.data.height&&(t.height=e.anchor.data.height),e.anchor.data.width&&(t.width=e.anchor.data.width),e.anchor.data.alt&&(t.alt=e.anchor.data.alt)}}t.HTMLElementAnchorImageData=b;class v extends m{constructor(e){super({location:e.location,data:e.data,format:"custom",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version}),u.set(this,void 0),h.set(this,void 0),d(this,u,e.create,"f"),d(this,h,e.update,"f")}create(e){f(this,u,"f").call(this,e)}update(e){f(this,h,"f").call(this,e)}clone(){return new v({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version,create:f(this,u,"f"),update:f(this,h,"f")})}}t.HTMLElementAnchorCustomData=v,u=new WeakMap,h=new WeakMap},5329:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},w=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMaterialData=void 0;const S=i(3858),T=i(7030);class x extends S.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,0),n.set(this,void 0),a.set(this,T.MATERIAL_ALPHA.OPAQUE),s.set(this,void 0),o.set(this,1),l.set(this,void 0),c.set(this,1),u.set(this,"#ffffff"),h.set(this,void 0),d.set(this,"#000000"),f.set(this,!1),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),b.set(this,1),v.set(this,1),_.set(this,T.MATERIAL_SHADING.SMOOTH),y.set(this,T.MATERIAL_SIDE.DOUBLE),A.set(this,{}),e&&(void 0!==e.alphaMap&&(this.alphaMap=e.alphaMap),void 0!==e.alphaCutoff&&(this.alphaCutoff=e.alphaCutoff),void 0!==e.alphaMode&&(this.alphaMode=e.alphaMode),void 0!==e.aoMap&&(this.aoMap=e.aoMap),void 0!==e.aoMapIntensity&&(this.aoMapIntensity=e.aoMapIntensity),void 0!==e.bumpMap&&(this.bumpMap=e.bumpMap),void 0!==e.bumpScale&&(this.bumpScale=e.bumpScale),void 0!==e.color&&(this.color=e.color),void 0!==e.emissiveMap&&(this.emissiveMap=e.emissiveMap),void 0!==e.emissiveness&&(this.emissiveness=e.emissiveness),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.map&&(this.map=e.map),void 0!==e.name&&(this.name=e.name),void 0!==e.normalMap&&(this.normalMap=e.normalMap),void 0!==e.normalScale&&(this.normalScale=e.normalScale),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.side&&(this.side=e.side))}get alphaCutoff(){return E(this,r,"f")}set alphaCutoff(e){w(this,r,e,"f")}get alphaMap(){return E(this,n,"f")}set alphaMap(e){w(this,n,e,"f")}get alphaMode(){return E(this,a,"f")}set alphaMode(e){w(this,a,e,"f")}get aoMap(){return E(this,s,"f")}set aoMap(e){w(this,s,e,"f")}get aoMapIntensity(){return E(this,o,"f")}set aoMapIntensity(e){w(this,o,e,"f")}get bumpMap(){return E(this,l,"f")}set bumpMap(e){w(this,l,e,"f")}get bumpScale(){return E(this,c,"f")}set bumpScale(e){w(this,c,e,"f")}get color(){return E(this,u,"f")}set color(e){w(this,u,e,"f")}get emissiveMap(){return E(this,h,"f")}set emissiveMap(e){w(this,h,e,"f")}get emissiveness(){return E(this,d,"f")}set emissiveness(e){w(this,d,e,"f")}get map(){return E(this,p,"f")}set map(e){w(this,p,e,"f")}get materialOutput(){return E(this,f,"f")}set materialOutput(e){w(this,f,e,"f")}get name(){return E(this,m,"f")}set name(e){w(this,m,e,"f")}get normalMap(){return E(this,g,"f")}set normalMap(e){w(this,g,e,"f")}get normalScale(){return E(this,b,"f")}set normalScale(e){w(this,b,e,"f")}get opacity(){return E(this,v,"f")}set opacity(e){w(this,v,e,"f")}get shading(){return E(this,_,"f")}set shading(e){w(this,_,e,"f")}get side(){return E(this,y,"f")}set side(e){w(this,y,e,"f")}get threeJsObject(){return E(this,A,"f")}}t.AbstractMaterialData=x,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap},8218:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},m=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.MapData=void 0;const g=i(887),b=i(3858),v=i(6814);class _ extends b.AbstractTreeNodeData{constructor(e,t=v.TEXTURE_WRAPPING.REPEAT,i=v.TEXTURE_WRAPPING.REPEAT,m=v.TEXTURE_FILTERING.NONE,b=v.TEXTURE_FILTERING.NONE,_=g.vec2.fromValues(0,0),y,A=g.vec2.fromValues(0,0),E=g.vec2.fromValues(1,1),w=0,S=!0,T,x){super(T,x),r.set(this,g.vec2.fromValues(0,0)),n.set(this,void 0),a.set(this,!0),s.set(this,void 0),o.set(this,v.TEXTURE_FILTERING.NONE),l.set(this,v.TEXTURE_FILTERING.NONE),c.set(this,g.vec2.fromValues(0,0)),u.set(this,g.vec2.fromValues(1,1)),h.set(this,0),d.set(this,v.TEXTURE_WRAPPING.REPEAT),f.set(this,v.TEXTURE_WRAPPING.REPEAT),p(this,s,e,"f"),p(this,d,t,"f"),p(this,f,i,"f"),p(this,l,m,"f"),p(this,o,b,"f"),p(this,r,_,"f"),p(this,n,y,"f"),p(this,c,A,"f"),p(this,u,E,"f"),p(this,h,w,"f"),p(this,a,S,"f")}get center(){return m(this,r,"f")}set center(e){p(this,r,e,"f")}get color(){return m(this,n,"f")}set color(e){p(this,n,e,"f")}get flipY(){return m(this,a,"f")}set flipY(e){p(this,a,e,"f")}get image(){return m(this,s,"f")}set image(e){p(this,s,e,"f")}get magFilter(){return m(this,o,"f")}set magFilter(e){p(this,o,e,"f")}get minFilter(){return m(this,l,"f")}set minFilter(e){p(this,l,e,"f")}get offset(){return m(this,c,"f")}set offset(e){p(this,c,e,"f")}get repeat(){return m(this,u,"f")}set repeat(e){p(this,u,e,"f")}get rotation(){return m(this,h,"f")}set rotation(e){p(this,h,e,"f")}get wrapS(){return m(this,d,"f")}set wrapS(e){p(this,d,e,"f")}get wrapT(){return m(this,f,"f")}set wrapT(e){p(this,f,e,"f")}clone(){return new _(this.image,this.wrapS,this.wrapT,this.minFilter,this.magFilter,this.center,this.color,this.offset,this.repeat,this.rotation,this.flipY,this.id,this.version)}}t.MapData=_,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap},7493:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},_=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialGemData=void 0;const y=i(5329),A=i(7030),E=i(887);class w extends y.AbstractMaterialData{constructor(e,t,i){super(e,t,i),r.set(this,2.4),n.set(this,void 0),a.set(this,1),s.set(this,"#ffffff"),o.set(this,"#ffffff"),l.set(this,E.vec3.create()),c.set(this,1),u.set(this,void 0),h.set(this,1),d.set(this,1),f.set(this,0),p.set(this,0),m.set(this,5),g.set(this,0),b.set(this,void 0),e&&(void 0!==e.refractionIndex&&(this.refractionIndex=e.refractionIndex),void 0!==e.impurityMap&&(this.impurityMap=e.impurityMap),void 0!==e.impurityScale&&(this.impurityScale=e.impurityScale),void 0!==e.colorTransferBegin&&(this.colorTransferBegin=e.colorTransferBegin),void 0!==e.colorTransferEnd&&(this.colorTransferEnd=e.colorTransferEnd),void 0!==e.center&&(this.center=e.center),void 0!==e.tracingDepth&&(this.tracingDepth=e.tracingDepth),void 0!==e.radius&&(this.radius=e.radius),void 0!==e.sphericalNormalMap&&(this.sphericalNormalMap=e.sphericalNormalMap),void 0!==e.gamma&&(this.gamma=e.gamma),void 0!==e.contrast&&(this.contrast=e.contrast),void 0!==e.brightness&&(this.brightness=e.brightness),void 0!==e.dispersion&&(this.dispersion=e.dispersion),void 0!==e.tracingOpacity&&(this.tracingOpacity=e.tracingOpacity),void 0!==e.envMap&&(this.envMap=e.envMap))}get refractionIndex(){return v(this,r,"f")}set refractionIndex(e){_(this,r,e,"f")}get impurityMap(){return v(this,n,"f")}set impurityMap(e){_(this,n,e,"f")}get impurityScale(){return v(this,a,"f")}set impurityScale(e){_(this,a,e,"f")}get colorTransferBegin(){return v(this,s,"f")}set colorTransferBegin(e){_(this,s,e,"f")}get colorTransferEnd(){return v(this,o,"f")}set colorTransferEnd(e){_(this,o,e,"f")}get center(){return v(this,l,"f")}set center(e){_(this,l,e,"f")}get tracingDepth(){return v(this,m,"f")}set tracingDepth(e){_(this,m,e,"f")}get radius(){return v(this,c,"f")}set radius(e){_(this,c,e,"f")}get sphericalNormalMap(){return v(this,u,"f")}set sphericalNormalMap(e){_(this,u,e,"f")}get gamma(){return v(this,h,"f")}set gamma(e){_(this,h,e,"f")}get contrast(){return v(this,d,"f")}set contrast(e){_(this,d,e,"f")}get brightness(){return v(this,f,"f")}set brightness(e){_(this,f,e,"f")}get dispersion(){return v(this,p,"f")}set dispersion(e){_(this,p,e,"f")}get tracingOpacity(){return v(this,g,"f")}set tracingOpacity(e){_(this,g,e,"f")}get envMap(){return v(this,b,"f")}set envMap(e){_(this,b,e,"f")}clone(){return new w({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,refractionIndex:this.refractionIndex,impurityMap:this.impurityMap,impurityScale:this.impurityScale,colorTransferBegin:this.colorTransferBegin,colorTransferEnd:this.colorTransferEnd,center:this.center,tracingDepth:this.tracingDepth,radius:this.radius,sphericalNormalMap:this.sphericalNormalMap,gamma:this.gamma,contrast:this.contrast,brightness:this.brightness,dispersion:this.dispersion,tracingOpacity:this.tracingOpacity,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.refractionIndex=this.refractionIndex,this.impurityMap=this.impurityMap,this.impurityScale=this.impurityScale,this.colorTransferBegin=this.colorTransferBegin,this.colorTransferEnd=this.colorTransferEnd,this.center=this.center,this.tracingDepth=this.tracingDepth,this.radius=this.radius,this.sphericalNormalMap=this.sphericalNormalMap,this.gamma=this.gamma,this.contrast=this.contrast,this.brightness=this.brightness,this.dispersion=this.dispersion,this.tracingOpacity=this.tracingOpacity,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=A.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=A.MATERIAL_SHADING.SMOOTH,this.side=A.MATERIAL_SIDE.DOUBLE,this.refractionIndex=2.4,this.impurityMap=void 0,this.impurityScale=1,this.colorTransferBegin="#ffffff",this.colorTransferEnd="#ffffff",this.center=E.vec3.create(),this.radius=1,this.sphericalNormalMap=void 0,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingDepth=5,this.tracingOpacity=0,this.envMap=void 0}}t.MaterialGemData=w,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap},3923:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialShadowData=void 0;const r=i(5329);class n extends r.AbstractMaterialData{constructor(e,t,i){super(e,t,i)}reset(){this.color="#000000",this.opacity=1}clone(){return new n({color:this.color,opacity:this.opacity},this.id,this.version)}copy(e){this.color=e.color,this.opacity=e.opacity}}t.MaterialShadowData=n},4015:function(e,t,i){"use strict";var r,n,a,s,o,l,c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialSpecularGlossinessData=void 0;const h=i(5329),d=i(7030);class f extends h.AbstractMaterialData{constructor(e,t,i){super(e,t,i),r.set(this,1),n.set(this,void 0),a.set(this,"#ffffff"),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),e&&(void 0!==e.glossiness&&(this.glossiness=e.glossiness),void 0!==e.specular&&(this.specular=e.specular),void 0!==e.specularGlossinessMap&&(this.specularGlossinessMap=e.specularGlossinessMap),void 0!==e.specularMap&&(this.specularMap=e.specularMap),void 0!==e.glossinessMap&&(this.glossinessMap=e.glossinessMap),void 0!==e.envMap&&(this.envMap=e.envMap))}get envMap(){return c(this,l,"f")}set envMap(e){u(this,l,e,"f")}get glossiness(){return c(this,r,"f")}set glossiness(e){u(this,r,e,"f")}get glossinessMap(){return c(this,n,"f")}set glossinessMap(e){u(this,n,e,"f")}get specular(){return c(this,a,"f")}set specular(e){u(this,a,e,"f")}get specularGlossinessMap(){return c(this,s,"f")}set specularGlossinessMap(e){u(this,s,e,"f")}get specularMap(){return c(this,o,"f")}set specularMap(e){u(this,o,e,"f")}clone(){return new f({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,specular:this.specular,specularMap:this.specularMap,specularGlossinessMap:this.specularGlossinessMap,glossiness:this.glossiness,glossinessMap:this.glossinessMap,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.glossiness=e.glossiness,this.specular=e.specular,this.specularGlossinessMap=e.specularGlossinessMap,this.specularMap=e.specularMap,this.glossinessMap=e.glossinessMap,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=d.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=d.MATERIAL_SHADING.SMOOTH,this.side=d.MATERIAL_SIDE.DOUBLE,this.glossiness=1,this.specular="#ffffff",this.specularGlossinessMap=void 0,this.specularMap=void 0,this.glossinessMap=void 0,this.envMap=void 0}}t.MaterialSpecularGlossinessData=f,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap},4439:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f,p,m,g,b,v,_,y,A,E,w,S,T,x,M,R,P,C,k,O,D=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},N=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialStandardData=void 0;const I=i(5329),L=i(7030);class U extends I.AbstractMaterialData{constructor(e,t,i){super(e,t,i),r.set(this,"#ffffff"),n.set(this,1/0),a.set(this,0),s.set(this,void 0),o.set(this,void 0),l.set(this,0),c.set(this,void 0),u.set(this,void 0),h.set(this,1),d.set(this,0),f.set(this,void 0),p.set(this,1.5),m.set(this,1),g.set(this,void 0),b.set(this,void 0),v.set(this,1),_.set(this,void 0),y.set(this,0),A.set(this,"#ffffff"),E.set(this,void 0),w.set(this,1),S.set(this,void 0),T.set(this,"#ffffff"),x.set(this,void 0),M.set(this,1),R.set(this,void 0),P.set(this,0),C.set(this,void 0),k.set(this,0),O.set(this,void 0),e&&(void 0!==e.metalness&&(this.metalness=e.metalness),void 0!==e.metalnessMap&&(this.metalnessMap=e.metalnessMap),void 0!==e.metalnessRoughnessMap&&(this.metalnessRoughnessMap=e.metalnessRoughnessMap),void 0!==e.roughness&&(this.roughness=e.roughness),void 0!==e.roughnessMap&&(this.roughnessMap=e.roughnessMap),void 0!==e.clearcoat&&(this.clearcoat=e.clearcoat),void 0!==e.clearcoatMap&&(this.clearcoatMap=e.clearcoatMap),void 0!==e.clearcoatNormalMap&&(this.clearcoatNormalMap=e.clearcoatNormalMap),void 0!==e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.clearcoatRoughnessMap&&(this.clearcoatRoughnessMap=e.clearcoatRoughnessMap),void 0!==e.displacementMap&&(this.displacementMap=e.displacementMap),void 0!==e.displacementScale&&(this.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(this.displacementBias=e.displacementBias),void 0!==e.ior&&(this.ior=e.ior),void 0!==e.transmission&&(this.transmission=e.transmission),void 0!==e.transmissionMap&&(this.transmissionMap=e.transmissionMap),void 0!==e.thickness&&(this.thickness=e.thickness),void 0!==e.thicknessMap&&(this.thicknessMap=e.thicknessMap),void 0!==e.attenuationDistance&&(this.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&(this.attenuationColor=e.attenuationColor),void 0!==e.sheen&&(this.sheen=e.sheen),void 0!==e.sheenColor&&(this.sheenColor=e.sheenColor),void 0!==e.sheenRoughness&&(this.sheenRoughness=e.sheenRoughness),void 0!==e.sheenColorMap&&(this.sheenColorMap=e.sheenColorMap),void 0!==e.sheenRoughnessMap&&(this.sheenRoughnessMap=e.sheenRoughnessMap),void 0!==e.specularColor&&(this.specularColor=e.specularColor),void 0!==e.specularColorMap&&(this.specularColorMap=e.specularColorMap),void 0!==e.specularIntensity&&(this.specularIntensity=e.specularIntensity),void 0!==e.specularIntensityMap&&(this.specularIntensityMap=e.specularIntensityMap),void 0!==e.envMap&&(this.envMap=e.envMap))}get attenuationColor(){return D(this,r,"f")}set attenuationColor(e){N(this,r,e,"f")}get attenuationDistance(){return D(this,n,"f")}set attenuationDistance(e){N(this,n,e,"f")}get clearcoat(){return D(this,a,"f")}set clearcoat(e){N(this,a,e,"f")}get clearcoatMap(){return D(this,s,"f")}set clearcoatMap(e){N(this,s,e,"f")}get clearcoatNormalMap(){return D(this,o,"f")}set clearcoatNormalMap(e){N(this,o,e,"f")}get clearcoatRoughness(){return D(this,l,"f")}set clearcoatRoughness(e){N(this,l,e,"f")}get clearcoatRoughnessMap(){return D(this,c,"f")}set clearcoatRoughnessMap(e){N(this,c,e,"f")}get displacementMap(){return D(this,u,"f")}set displacementMap(e){N(this,u,e,"f")}get displacementScale(){return D(this,h,"f")}set displacementScale(e){N(this,h,e,"f")}get displacementBias(){return D(this,d,"f")}set displacementBias(e){N(this,d,e,"f")}get envMap(){return D(this,f,"f")}set envMap(e){N(this,f,e,"f")}get ior(){return D(this,p,"f")}set ior(e){N(this,p,e,"f")}get metalness(){return D(this,m,"f")}set metalness(e){N(this,m,e,"f")}get metalnessMap(){return D(this,g,"f")}set metalnessMap(e){N(this,g,e,"f")}get metalnessRoughnessMap(){return D(this,b,"f")}set metalnessRoughnessMap(e){N(this,b,e,"f")}get roughness(){return D(this,v,"f")}set roughness(e){N(this,v,e,"f")}get roughnessMap(){return D(this,_,"f")}set roughnessMap(e){N(this,_,e,"f")}get sheen(){return D(this,y,"f")}set sheen(e){N(this,y,e,"f")}get sheenColor(){return D(this,A,"f")}set sheenColor(e){N(this,A,e,"f")}get sheenColorMap(){return D(this,E,"f")}set sheenColorMap(e){N(this,E,e,"f")}get sheenRoughness(){return D(this,w,"f")}set sheenRoughness(e){N(this,w,e,"f")}get sheenRoughnessMap(){return D(this,S,"f")}set sheenRoughnessMap(e){N(this,S,e,"f")}get specularColor(){return D(this,T,"f")}set specularColor(e){N(this,T,e,"f")}get specularColorMap(){return D(this,x,"f")}set specularColorMap(e){N(this,x,e,"f")}get specularIntensity(){return D(this,M,"f")}set specularIntensity(e){N(this,M,e,"f")}get specularIntensityMap(){return D(this,R,"f")}set specularIntensityMap(e){N(this,R,e,"f")}get thickness(){return D(this,P,"f")}set thickness(e){N(this,P,e,"f")}get thicknessMap(){return D(this,C,"f")}set thicknessMap(e){N(this,C,e,"f")}get transmission(){return D(this,k,"f")}set transmission(e){N(this,k,e,"f")}get transmissionMap(){return D(this,O,"f")}set transmissionMap(e){N(this,O,e,"f")}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=L.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=L.MATERIAL_SHADING.SMOOTH,this.side=L.MATERIAL_SIDE.DOUBLE,this.attenuationColor="#ffffff",this.attenuationDistance=1/0,this.clearcoat=0,this.clearcoatMap=void 0,this.clearcoatNormalMap=void 0,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=void 0,this.displacementMap=void 0,this.displacementScale=1,this.displacementBias=0,this.envMap=void 0,this.ior=1,this.metalness=0,this.metalnessMap=void 0,this.metalnessRoughnessMap=void 0,this.roughness=.5,this.roughnessMap=void 0,this.sheen=0,this.sheenColor="#ffffff",this.sheenColorMap=void 0,this.sheenRoughness=0,this.sheenRoughnessMap=void 0,this.specularColor="#ffffff",this.specularColorMap=void 0,this.specularIntensity=1,this.specularIntensityMap=void 0,this.thickness=.1,this.thicknessMap=void 0,this.transmission=0,this.transmissionMap=void 0}clone(){return new U({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,metalness:this.metalness,metalnessMap:this.metalnessMap,metalnessRoughnessMap:this.metalnessRoughnessMap,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,roughness:this.roughness,roughnessMap:this.roughnessMap,side:this.side,clearcoat:this.clearcoat,clearcoatMap:this.clearcoatMap,clearcoatNormalMap:this.clearcoatNormalMap,clearcoatRoughness:this.clearcoatRoughness,clearcoatRoughnessMap:this.clearcoatRoughnessMap,displacementMap:this.displacementMap,displacementScale:this.displacementScale,displacementBias:this.displacementBias,envMap:this.envMap,ior:this.ior,transmission:this.transmission,transmissionMap:this.transmissionMap,thickness:this.thickness,thicknessMap:this.thicknessMap,attenuationDistance:this.attenuationDistance,attenuationColor:this.attenuationColor,sheen:this.sheen,sheenColor:this.sheenColor,sheenColorMap:this.sheenColorMap,sheenRoughness:this.sheenRoughness,sheenRoughnessMap:this.sheenRoughnessMap,specularColor:this.specularColor,specularColorMap:this.specularColorMap,specularIntensity:this.specularIntensity,specularIntensityMap:this.specularIntensityMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.attenuationColor=e.attenuationColor,this.attenuationDistance=e.attenuationDistance,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.envMap=e.envMap,this.ior=e.ior,this.metalness=e.metalness,this.metalnessMap=e.metalnessMap,this.metalnessRoughnessMap=e.metalnessRoughnessMap,this.roughness=e.roughness,this.roughnessMap=e.roughnessMap,this.sheen=e.sheen,this.sheenColor=e.sheenColor,this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.specularColor=e.specularColor,this.specularColorMap=e.specularColorMap,this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap}}t.MaterialStandardData=U,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,b=new WeakMap,v=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap,R=new WeakMap,P=new WeakMap,C=new WeakMap,k=new WeakMap,O=new WeakMap},4586:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialUnlitData=void 0;const s=i(7030),o=i(5329);class l extends o.AbstractMaterialData{constructor(e,t,i){super(e,t,i),r.set(this,void 0),e&&void 0!==e.envMap&&(this.envMap=e.envMap)}get envMap(){return n(this,r,"f")}set envMap(e){a(this,r,e,"f")}clone(){return new l({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=s.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=s.MATERIAL_SHADING.SMOOTH,this.side=s.MATERIAL_SIDE.DOUBLE,this.envMap=void 0}}t.MaterialUnlitData=l,r=new WeakMap},6006:function(e,t,i){"use strict";var r,n,a,s=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialVariantsData=void 0;const l=i(3858);class c extends l.AbstractTreeNodeData{constructor(e,t){super(e,t),r.set(this,[]),n.set(this,[]),a.set(this,void 0)}get geometryData(){return s(this,n,"f")}get variants(){return s(this,r,"f")}get variantIndex(){return s(this,a,"f")}set variantIndex(e){o(this,a,e,"f");for(let e=0;e<this.geometryData.length;e++){const t=this.geometryData[e].materialVariants.find((e=>e.variant===s(this,a,"f")));this.geometryData[e].material=t?t.material:this.geometryData[e].standardMaterial}}clone(){return new c(this.id,this.version)}}t.MaterialVariantsData=c,r=new WeakMap,n=new WeakMap,a=new WeakMap},8516:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFAttributesData=t.SDTFAttributeData=void 0;const c=i(3858);t.SDTFAttributeData=class{constructor(e,t){r.set(this,void 0),n.set(this,void 0),a.set(this,void 0),o(this,r,e,"f"),o(this,n,t,"f")}get typeHint(){return l(this,r,"f")}get value(){return l(this,n,"f")instanceof Function&&!l(this,a,"f")?(o(this,a,l(this,n,"f").call(this),"f"),l(this,a,"f")):l(this,n,"f")instanceof Function?l(this,a,"f"):l(this,n,"f")}},r=new WeakMap,n=new WeakMap,a=new WeakMap;class u extends c.AbstractTreeNodeData{constructor(e={},t,i){super(t,i),s.set(this,{}),o(this,s,e,"f")}get attributes(){return l(this,s,"f")}clone(){return new u(this.attributes,this.id,this.version)}}t.SDTFAttributesData=u,s=new WeakMap},2904:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFItemData=void 0;const c=i(3858);class u extends c.AbstractTreeNodeData{constructor(e,t,i,l,c){super(l,c),r.set(this,void 0),n.set(this,void 0),a.set(this,{}),s.set(this,void 0),o(this,a,i,"f"),o(this,r,e,"f"),o(this,n,t,"f")}get attributes(){return l(this,a,"f")}get typeHint(){return l(this,r,"f")}get value(){return l(this,n,"f")instanceof Function&&!l(this,s,"f")?(o(this,s,l(this,n,"f").call(this),"f"),l(this,s,"f")):l(this,n,"f")instanceof Function?l(this,s,"f"):l(this,n,"f")}clone(){return new u(this.typeHint,this.value,this.attributes,this.id,this.version)}}t.SDTFItemData=u,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},1763:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFOverviewData=void 0;const s=i(3858),o=i(9116);class l extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,{}),n(this,r,e,"f")}get overview(){return a(this,r,"f")}clone(){return new l(a(this,r,"f"),this.id,this.version)}merge(e){var t;for(let i in e.overview)for(let r=0;r<e.overview[i].length;r++){const n=e.overview[i][r],a=this.overview[i]?this.overview[i].filter((e=>e.typeHint===n.typeHint)):[];if(this.overview[i]&&a.length>0){const e=a[0];e.count++,o.SdtfPrimitiveTypeGuard.isStringType(n.typeHint)&&(e.values=null===(t=e.values)||void 0===t?void 0:t.concat(n.values.filter((t=>e.values.indexOf(t)<0)))),o.SdtfPrimitiveTypeGuard.isNumberType(n.typeHint)&&(e.min=Math.min(n.min,e.min),e.max=Math.max(n.max,e.max))}else this.overview[i]?this.overview[i].push({typeHint:n.typeHint,count:n.count,values:n.values,min:n.min,max:n.max}):this.overview[i]=[{typeHint:n.typeHint,count:n.count,values:n.values,min:n.min,max:n.max}]}}}t.SDTFOverviewData=l,r=new WeakMap},7038:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeGuard=t.SDTF_TYPEHINT=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.TASK_TYPE=t.BoneData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.PRIMITIVE_MODE=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialShadowData=t.MaterialUnlitData=t.AbstractMaterialData=t.MaterialStandardData=void 0;const r=i(4725);Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return r.CustomData}});const n=i(5108);Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return n.AttributeData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return n.GeometryData}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return n.PrimitiveData}});const a=i(4439);Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return a.MaterialStandardData}});const s=i(5005);Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return s.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return s.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return s.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return s.HTMLElementAnchorTextData}});const o=i(2904);Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return o.SDTFItemData}});const l=i(7484);Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return l.AnimationData}});const c=i(9329);Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return c.TASK_TYPE}});const u=i(6006);Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return u.MaterialVariantsData}});const h=i(8218);Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return h.MapData}});const d=i(4015);Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return d.MaterialSpecularGlossinessData}});const f=i(4586);Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return f.MaterialUnlitData}});const p=i(7030);Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return p.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return p.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return p.MATERIAL_SIDE}});const m=i(339);Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return m.PRIMITIVE_MODE}});const g=i(6814);Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return g.TEXTURE_WRAPPING}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return g.TEXTURE_FILTERING}});const b=i(5329);Object.defineProperty(t,"AbstractMaterialData",{enumerable:!0,get:function(){return b.AbstractMaterialData}});const v=i(8516);Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return v.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return v.SDTFAttributesData}});const _=i(1763);Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return _.SDTFOverviewData}});const y=i(1676);Object.defineProperty(t,"BoneData",{enumerable:!0,get:function(){return y.BoneData}});const A=i(4767);Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return A.SdtfTypeHintName}});const E=i(9116);Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return E.SdtfPrimitiveTypeGuard}});const w=i(7493);Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return w.MaterialGemData}});const S=i(3923);Object.defineProperty(t,"MaterialShadowData",{enumerable:!0,get:function(){return S.MaterialShadowData}})},339:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMITIVE_MODE=void 0,(i=t.PRIMITIVE_MODE||(t.PRIMITIVE_MODE={}))[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"},6814:(e,t)=>{"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=void 0,(r=t.TEXTURE_WRAPPING||(t.TEXTURE_WRAPPING={}))[r.REPEAT=10497]="REPEAT",r[r.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(i=t.TEXTURE_FILTERING||(t.TEXTURE_FILTERING={}))[i.NONE=0]="NONE",i[i.NEAREST=9728]="NEAREST",i[i.LINEAR=9729]="LINEAR",i[i.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",i[i.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",i[i.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",i[i.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"},7030:(e,t)=>{"use strict";var i,r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=void 0,(n=t.MATERIAL_SIDE||(t.MATERIAL_SIDE={})).DOUBLE="double",n.FRONT="front",n.BACK="back",(r=t.MATERIAL_ALPHA||(t.MATERIAL_ALPHA={})).OPAQUE="opaque",r.MASK="mask",r.BLEND="blend",(i=t.MATERIAL_SHADING||(t.MATERIAL_SHADING={})).FLAT="flat",i.SMOOTH="smooth"},9329:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TASK_TYPE=void 0,(i=t.TASK_TYPE||(t.TASK_TYPE={})).AR_LOADING="ar_loading",i.ENVIRONMENT_MAP_LOADING="environment_map_loading",i.CUSTOM_CONTENT_LOADING="custom_content_loading",i.GLTF_CREATION="gltf_creation",i.GLTF_CONTENT_LOADING="gltf_content_loading",i.MATERIAL_CONTENT_LOADING="material_content_loading",i.TAG_CONTENT_LOADING="tag_content_loading",i.SDTF_CONTENT_LOADING="sdtf_content_loading",i.SESSION_CUSTOMIZATION="session_customization",i.SESSION_CREATION="session_creation",i.SESSION_OUTPUTS_UPDATE="session_outputs_update",i.SESSION_OUTPUTS_LOADING="session_outputs_loading",i.VIEWPORT_CREATION="viewer_creation",i.EXPORT_REQUEST="export_request"},16:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendMimeTypes=t.mapMimeTypeToFileEndings=t.guessMimeTypeFromFilename=t.extensionToMimeTypeMapping=void 0,t.extensionToMimeTypeMapping={svg:["image/svg+xml"],svgz:["image/svg+xml"],jpg:["image/jpeg"],jpeg:["image/jpeg"],png:["image/png"],gif:["image/gif"],bmp:["image/bmp"],tif:["image/tif"],tiff:["image/tiff"],gltf:["gltf+json","model/gltf-binary"],glb:["application/octet-stream","model/gltf-binary"],bin:["application/octet-stream","application/gltf-buffer"],"3dm":["model/vnd.3dm","application/3dm","x-world/x-3dmf"],"3ds":["application/x-3ds","image/x-3ds","application/3ds"],fbx:["application/fbx"],dxf:["application/dxf","application/x-autocad","application/x-dxf","drawing/x-dxf","image/vnd.dxf","image/x-autocad","image/x-dxf","zz-application/zz-winassoc-dxf"],dwg:["application/dwg"],pdf:["application/pdf"],"3mf":["model/3mf"],stl:["model/stl","application/sla"],amf:["application/amf"],ai:["application/ai"],dgn:["application/dgn"],ply:["application/ply"],ps:["application/postscript"],eps:["application/postscript"],skp:["application/skp"],slc:["application/slc"],sldprt:["application/sldprt"],sldasm:["application/sldasm"],stp:["application/step"],step:["application/step"],vda:["application/vda"],gdf:["application/gdf"],vrml:["model/vrml","model/x3d-vrml"],wrl:["model/vrml","model/x3d-vrml"],vi:["model/vrml","model/x3d-vrml"],igs:["model/iges","application/iges"],iges:["model/iges","application/iges"],obj:["model/obj","application/wavefront-obj"],off:["application/off"],txt:["text/plain"],mtl:["text/plain"],g:["text/plain"],gcode:["text/plain"],glsl:["text/plain"],csv:["text/csv","application/vnd.ms-excel"],xls:["application/vnd.ms-excel"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],xml:["application/xml","text/xml"],json:["application/json"],ifc:["application/x-step"],ifcxml:["application/xml"],ifczip:["application/zip"],sdtf:["model/vnd.sdtf"],sddtf:["model/vnd.sdtf"],hdr:["image/vnd.radiance"]},t.guessMimeTypeFromFilename=e=>{const i=e.split(".");if(!(i.length>0))return[];const r=i[i.length-1];return Object.keys(t.extensionToMimeTypeMapping).includes(r)?t.extensionToMimeTypeMapping[r]:[]},t.mapMimeTypeToFileEndings=e=>{const i=[];for(let r=0;r<e.length;r++){const n=Object.keys(t.extensionToMimeTypeMapping).find((i=>t.extensionToMimeTypeMapping[i].includes(e[r])));n&&i.push("."+n)}return i},t.extendMimeTypes=e=>{let i=e;return(0,t.mapMimeTypeToFileEndings)(i).forEach((e=>i=i.concat((0,t.guessMimeTypeFromFilename)(e)))),i=i.filter((function(e,t){return i.indexOf(e)==t})),i}},7502:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.combineTextures=void 0;const o=a(i(5232));let l,c,u,h,d;t.combineTextures=(e,t,i)=>s(void 0,void 0,void 0,(function*(){if(!e&&!t&&!i)throw new Error("No maps supplied.");d||(l=new o.ShaderMaterial({uniforms:{tRed:{value:null},activeRed:{value:!1},defaultRed:{value:1},tGreen:{value:null},activeGreen:{value:!1},defaultGreen:{value:1},tBlue:{value:null},activeBlue:{value:!1},defaultBlue:{value:1}},vertexShader:"// @author Michael Oppitz \n    \n        uniform sampler2D tRed;\n        uniform bool activeRed;\n        uniform float defaultRed;\n        \n        uniform sampler2D tGreen;\t\t\n        uniform bool activeGreen;\n        uniform float defaultGreen;\n        \n        uniform sampler2D tBlue;\t\t\n        uniform bool activeBlue;\n        uniform float defaultBlue;\n    \n        varying vec2 vUv;\n        \n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"// @author Michael Oppitz \n    \n        uniform sampler2D tRed;\n        uniform bool activeRed;\n        uniform float defaultRed;\n        \n        uniform sampler2D tGreen;\t\t\n        uniform bool activeGreen;\n        uniform float defaultGreen;\n        \n        uniform sampler2D tBlue;\t\t\n        uniform bool activeBlue;\n        uniform float defaultBlue;\n        \n        varying vec2 vUv;\n        \n        void main() {\n            vec4 outColor = vec4(0.0, 0.0, 0.0, 1.0);\n    \n            if(activeRed == true) {\n                outColor.r = texture2D(tRed, vUv).r;\n            } else {\n                outColor.r = defaultRed;\n            }\n        \n            if(activeGreen == true) {\n                outColor.g = texture2D(tGreen, vUv).g;\n            } else {\n                outColor.g = defaultGreen;\n            }\n        \n            if(activeBlue == true) {\n                outColor.b = texture2D(tBlue, vUv).b;\n            } else {\n                outColor.b = defaultBlue;\n            }\n        \n            gl_FragColor = outColor;\n        }"}),c=new o.OrthographicCamera(-1,1,1,-1,0,1),u=new o.Scene,h=new o.Mesh(new o.PlaneGeometry(2,2),l),u.add(h),d=new o.WebGLRenderer);let r=0,n=0;const a=[e,t,i];for(let e of a)if(e)if(0===r&&0===n)r=e.width,n=e.height;else if(e.width!==r&&e.height!==n)throw new Error("Maps have different sizes. Combining not supported.");if(e){const t=new o.Texture(e);t.needsUpdate=!0,l.uniforms.tRed.value=t,l.uniforms.activeRed.value=!0}else l.uniforms.activeRed.value=!1;if(t){const e=new o.Texture(t);e.needsUpdate=!0,l.uniforms.tGreen.value=e,l.uniforms.activeGreen.value=!0}else l.uniforms.activeGreen.value=!1;if(i){const e=new o.Texture(i);e.needsUpdate=!0,l.uniforms.tBlue.value=e,l.uniforms.activeBlue.value=!0}else l.uniforms.activeBlue.value=!1;const s=new o.WebGLRenderTarget(r,n,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat});s.texture.name="target.rt",d.setRenderTarget(s),d.render(u,c);const f=new Uint8ClampedArray(4*r*n);d.readRenderTargetPixels(s,0,0,r,n,f);let p=new ImageData(f,r,n);var m=document.createElement("canvas"),g=m.getContext("2d");m.width=p.width,m.height=p.height,g.putImageData(p,0,0);const b=new Image,v=new Promise((e=>{b.onload=()=>e()}));return b.crossOrigin="anonymous",b.src=m.toDataURL("image/jpeg",1),yield v,b}))},3253:function(e,t,i){"use strict";var r,n,a,s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportApi=void 0;const c=i(8877);t.ExportApi=class{constructor(e){r.set(this,c.InputValidator.instance),n.set(this,c.Logger.instance),a.set(this,void 0),o(this,a,e,"f")}get content(){return l(this,a,"f").content}get delay(){return l(this,a,"f").delay}get dependency(){return l(this,a,"f").dependency}get displayname(){return l(this,a,"f").displayname}set displayname(e){const t="displayname";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"string",!1),l(this,a,"f").displayname=e,l(this,n,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").displayname}.`)}get filename(){return l(this,a,"f").filename}get group(){return l(this,a,"f").group}get hidden(){return l(this,a,"f").hidden}set hidden(e){const t="hidden";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"boolean"),l(this,a,"f").hidden=e,l(this,n,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").hidden}.`)}get id(){return l(this,a,"f").id}get maxWaitTime(){return l(this,a,"f").maxWaitTime}set maxWaitTime(e){const t="maxWaitTime";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"number"),l(this,a,"f").maxWaitTime=e,l(this,n,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").maxWaitTime}.`)}get msg(){return l(this,a,"f").msg}get name(){return l(this,a,"f").name}get order(){return l(this,a,"f").order}set order(e){const t="order";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"number",!1),l(this,a,"f").order=e,l(this,n,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").order}.`)}get result(){return l(this,a,"f").result}get status_collect(){return l(this,a,"f").status_collect}get status_computation(){return l(this,a,"f").status_computation}get tooltip(){return l(this,a,"f").tooltip}set tooltip(e){const t="tooltip";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"string",!1),l(this,a,"f").tooltip=e,l(this,n,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").tooltip}.`)}get type(){return l(this,a,"f").type}get uid(){return l(this,a,"f").uid}get version(){return l(this,a,"f").version}request(e={}){return s(this,void 0,void 0,(function*(){const t="request";l(this,r,"f").validateAndError(`ExportApi.${t}`,e,"object");for(let i in e)l(this,r,"f").validateAndError(`ExportApi.${t}`,e[i],"string");return l(this,a,"f").request(e)}))}updateExport(){l(this,a,"f").updateExport()}},r=new WeakMap,n=new WeakMap,a=new WeakMap},9949:function(e,t,i){"use strict";var r,n,a=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},s=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileParameterApi=void 0;const o=i(2147),l=i(8877);class c extends o.ParameterApi{constructor(e){super(e),r.set(this,void 0),n.set(this,l.Logger.instance),a(this,r,e,"f")}upload(){return s(this,r,"f").upload()}}t.FileParameterApi=c,r=new WeakMap,n=new WeakMap},3740:function(e,t,i){"use strict";var r,n,a,s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputApi=void 0;const c=i(8877),u=i(9252);t.OutputApi=class{constructor(e){r.set(this,c.InputValidator.instance),n.set(this,c.Logger.instance),a.set(this,void 0),o(this,a,e,"f"),l(this,a,"f").updateCallback=(e,t)=>{e&&-1===e.data.findIndex((e=>e instanceof u.OutputApiData))&&e.addData(new u.OutputApiData(this))},l(this,a,"f").updateCallback(this.node)}get bbmax(){return l(this,a,"f").bbmax}get bbmin(){return l(this,a,"f").bbmin}get chunks(){return l(this,a,"f").chunks}get content(){return l(this,a,"f").content}get delay(){return l(this,a,"f").delay}get dependency(){return l(this,a,"f").dependency}get displayname(){return l(this,a,"f").displayname}set displayname(e){const t="displayname";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"string",!1),l(this,a,"f").displayname=e,l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").displayname}.`)}get format(){return l(this,a,"f").format}get freeze(){return l(this,a,"f").freeze}set freeze(e){const t="freeze";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"boolean"),l(this,a,"f").freeze=e,l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").freeze}.`)}get hidden(){return l(this,a,"f").hidden}set hidden(e){const t="hidden";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"boolean"),l(this,a,"f").hidden=e,l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").hidden}.`)}get id(){return l(this,a,"f").id}get material(){return l(this,a,"f").material}get msg(){return l(this,a,"f").msg}get name(){return l(this,a,"f").name}get node(){return l(this,a,"f").node}get order(){return l(this,a,"f").order}set order(e){const t="order";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"number",!1),l(this,a,"f").order=e,l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").order}.`)}get status_collect(){return l(this,a,"f").status_collect}get status_computation(){return l(this,a,"f").status_computation}get tooltip(){return l(this,a,"f").tooltip}set tooltip(e){const t="tooltip";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"string",!1),l(this,a,"f").tooltip=e,l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").tooltip}.`)}get uid(){return l(this,a,"f").uid}get updateCallback(){return l(this,a,"f").updateCallback}set updateCallback(e){const t="updateCallback";l(this,r,"f").validateAndError(`OutputApi.${t}`,e,"function",!1),l(this,a,"f").updateCallback=(t,i)=>{t&&-1===t.data.findIndex((e=>e instanceof u.OutputApiData))&&t.addData(new u.OutputApiData(this)),e&&e(t,i)},l(this,n,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").updateCallback}.`)}get version(){return l(this,a,"f").version}updateOutputContent(e,t=!1){return s(this,void 0,void 0,(function*(){const i="updateOutputContent";return l(this,r,"f").validateAndError(`OutputApi.${i}`,e,"array"),l(this,r,"f").validateAndError(`OutputApi.${i}`,t,"boolean"),l(this,a,"f").updateOutputContent(e,t)}))}},r=new WeakMap,n=new WeakMap,a=new WeakMap},2147:function(e,t,i){"use strict";var r,n,a,s=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},o=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterApi=void 0;const l=i(8877);t.ParameterApi=class{constructor(e){r.set(this,l.InputValidator.instance),n.set(this,l.Logger.instance),a.set(this,void 0),s(this,a,e,"f")}get choices(){return o(this,a,"f").choices}get decimalplaces(){return o(this,a,"f").decimalplaces}get defval(){return o(this,a,"f").defval}get displayname(){return o(this,a,"f").displayname}set displayname(e){const t="displayname";o(this,r,"f").validateAndError(`ParameterApi.${t}`,e,"string",!1),o(this,a,"f").displayname=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").displayname}.`)}get expression(){return o(this,a,"f").expression}get format(){return o(this,a,"f").format}get group(){return o(this,a,"f").group}get hidden(){return o(this,a,"f").hidden}set hidden(e){const t="hidden";o(this,r,"f").validateAndError(`ParameterApi.${t}`,e,"boolean"),o(this,a,"f").hidden=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").hidden}.`)}get id(){return o(this,a,"f").id}get max(){return o(this,a,"f").max}get min(){return o(this,a,"f").min}get name(){return o(this,a,"f").name}get order(){return o(this,a,"f").order}set order(e){const t="order";o(this,r,"f").validateAndError(`ParameterApi.${t}`,e,"number",!1),o(this,a,"f").order=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").order}.`)}get sessionValue(){return o(this,a,"f").sessionValue}set sessionValue(e){const t="sessionValue";o(this,a,"f").sessionValue=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").value}.`)}get structure(){return o(this,a,"f").structure}get tooltip(){return o(this,a,"f").tooltip}set tooltip(e){const t="tooltip";o(this,r,"f").validateAndError(`ParameterApi.${t}`,e,"string",!1),o(this,a,"f").tooltip=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").tooltip}.`)}get type(){return o(this,a,"f").type}get value(){return o(this,a,"f").value}set value(e){const t="value";o(this,a,"f").value=e,o(this,n,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").value}.`)}get visualization(){return o(this,a,"f").visualization}isValid(e,t){return o(this,r,"f").validateAndError("ParameterApi.isValid",t,"boolean",!1),o(this,a,"f").isValid(e,t)}resetToDefaultValue(){return o(this,a,"f").resetToDefaultValue()}resetToSessionValue(){return o(this,a,"f").resetToSessionValue()}stringify(){return o(this,a,"f").stringify()}},r=new WeakMap,n=new WeakMap,a=new WeakMap},2387:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},f=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionApi=void 0;const p=i(9878),m=i(5094),g=i(8877),b=i(3740),v=i(3253),_=i(2147),y=i(9949),A=i(7163),E=i(8729);t.SessionApi=class{constructor(e){if(r.set(this,m.CreationControlCenter.instance),n.set(this,void 0),a.set(this,g.Logger.instance),s.set(this,g.InputValidator.instance),o.set(this,A.GLTFConverter.instance),l.set(this,{}),c.set(this,{}),u.set(this,{}),d(this,n,e,"f"),!f(this,n,"f").initialized)throw new g.ShapeDiverViewerSessionError("Session could not be initialized.");f(this,n,"f").updateCallback=(e,t)=>{-1===e.data.findIndex((e=>e instanceof E.SessionApiData))&&e.addData(new E.SessionApiData(this))},f(this,n,"f").updateCallback(this.node,this.node);for(let e in f(this,n,"f").outputs)f(this,l,"f")[e]=new b.OutputApi(f(this,n,"f").outputs[e]);for(let e in f(this,n,"f").exports)f(this,u,"f")[e]=new v.ExportApi(f(this,n,"f").exports[e]);for(let e in f(this,n,"f").parameters)f(this,n,"f").parameters[e]instanceof p.FileParameter?f(this,c,"f")[e]=new y.FileParameterApi(f(this,n,"f").parameters[e]):f(this,c,"f")[e]=new _.ParameterApi(f(this,n,"f").parameters[e])}get automaticSceneUpdate(){return f(this,n,"f").automaticSceneUpdate}set automaticSceneUpdate(e){const t="automaticSceneUpdate";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,n,"f").automaticSceneUpdate=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get commitParameters(){return f(this,n,"f").settingsEngine.general.commitParameters}set commitParameters(e){const t="commitParameters";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,n,"f").settingsEngine.general.commitParameters=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get commitSettings(){return f(this,n,"f").settingsEngine.general.commitSettings}set commitSettings(e){const t="commitSettings";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,n,"f").settingsEngine.general.commitSettings=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get customizeOnParameterChange(){return f(this,n,"f").customizeOnParameterChange}set customizeOnParameterChange(e){const t="customizeOnParameterChange";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,n,"f").customizeOnParameterChange=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get excludeViewports(){return f(this,n,"f").excludeViewports}set excludeViewports(e){const t="excludeViewports";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"stringArray"),f(this,n,"f").excludeViewports=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get exports(){return f(this,u,"f")}get id(){return f(this,n,"f").id}get initialized(){return f(this,n,"f").initialized}get jwtToken(){return f(this,n,"f").bearerToken}set jwtToken(e){const t="jwtToken";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"string",!1),f(this,n,"f").bearerToken=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get modelViewUrl(){return f(this,n,"f").modelViewUrl}get node(){return f(this,n,"f").node}get outputs(){return f(this,l,"f")}get parameters(){return f(this,c,"f")}get updateCallback(){return f(this,n,"f").updateCallback}set updateCallback(e){const t="updateCallback";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"function",!1),f(this,n,"f").updateCallback=(t,i)=>{-1===t.data.findIndex((e=>e instanceof E.SessionApiData))&&t.addData(new E.SessionApiData(this)),e&&e(t,i)},f(this,a,"f").debug(`SessionApi.${t}: ${t} was updated to ${e}.`)}get refreshJwtToken(){return f(this,n,"f").refreshBearerToken}set refreshJwtToken(e){const t="refreshJwtToken";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"function",!1),f(this,n,"f").refreshBearerToken=e,f(this,a,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get ticket(){return f(this,n,"f").ticket}applySettings(e,t){const i="applySettings";return f(this,s,"f").validateAndError(`SessionApi.${i}`,e,"object"),f(this,s,"f").validateAndError(`SessionApi.${i}`,t,"object",!1),f(this,r,"f").applySettings(this.id,e,t)}canGoBack(){return f(this,n,"f").canGoBack()}canGoForward(){return f(this,n,"f").canGoForward()}close(){return h(this,void 0,void 0,(function*(){return yield f(this,r,"f").closeSessionEngine(this.id)}))}convertToGlTF(){return h(this,void 0,void 0,(function*(){for(let e in f(this,r,"f").renderingEngines)f(this,r,"f").renderingEngines[e].update("SessionApi.convertToGlTF");const e=yield f(this,o,"f").convert(this.node,!1);return new Blob([e],{type:"application/octet-stream"})}))}customize(e=!1){return f(this,s,"f").validateAndError("SessionApi.customize",e,"boolean",!1),f(this,n,"f").customize(e)}customizeParallel(e){const t="customizeParallel";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"object");for(let i in e)f(this,s,"f").validateAndError(`SessionApi.${t}`,e[i],"string");return f(this,n,"f").customizeParallel(e)}getExportById(e){return f(this,s,"f").validateAndError("SessionApi.getExportById",e,"string"),f(this,u,"f")[e]}getExportByName(e){return f(this,s,"f").validateAndError("SessionApi.getExportByName",e,"string"),Object.values(f(this,u,"f")).filter((t=>t.name===e))}getExportByType(e){return f(this,s,"f").validateAndError("SessionApi.getExportByType",e,"string"),Object.values(f(this,u,"f")).filter((t=>t.type===e))}getOutputByFormat(e){return f(this,s,"f").validateAndError("SessionApi.getOutputByFormat",e,"string"),Object.values(f(this,l,"f")).filter((t=>t.format.includes(e)))}getOutputById(e){return f(this,s,"f").validateAndError("SessionApi.getOutputById",e,"string"),f(this,l,"f")[e]}getOutputByName(e){return f(this,s,"f").validateAndError("SessionApi.getOutputByName",e,"string"),Object.values(f(this,l,"f")).filter((t=>t.name===e))}getParameterById(e){return f(this,s,"f").validateAndError("SessionApi.getParameterById",e,"string"),f(this,c,"f")[e]}getParameterByName(e){return f(this,s,"f").validateAndError("SessionApi.getParameterByName",e,"string"),Object.values(f(this,c,"f")).filter((t=>t.name===e))}getParameterByType(e){return f(this,s,"f").validateAndError("SessionApi.getParameterByType",e,"string"),Object.values(f(this,c,"f")).filter((t=>t.type===e))}goBack(){return f(this,n,"f").goBack()}goForward(){return f(this,n,"f").goForward()}resetParameterValues(e=!1){for(let e in this.parameters)this.parameters[e].value=this.parameters[e].defval;return f(this,s,"f").validateAndError("SessionApi.resetParameterValues",e,"boolean",!1),f(this,n,"f").customize(e)}resetSettings(e){return f(this,s,"f").validateAndError("SessionApi.applySettings",e,"object",!1),f(this,r,"f").resetSettings(this.id,e)}saveDefaultParameterValues(){return f(this,n,"f").saveDefaultParameterValues()}saveSettings(e){return f(this,s,"f").validateAndError("SessionApi.saveDefaultParameterValues",e,"string",!1),f(this,r,"f").saveSettings(this.id,e)}saveUiProperties(){return f(this,n,"f").saveUiProperties()}updateOutputs(){return f(this,n,"f").updateOutputs()}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap},9252:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputApiData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,void 0),n(this,r,e,"f")}get api(){return a(this,r,"f")}set api(e){n(this,r,e,"f")}clone(){return new o(this.api,this.id,this.version)}}t.OutputApiData=o,r=new WeakMap},8729:function(e,t,i){"use strict";var r,n=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionApiData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),r.set(this,void 0),n(this,r,e,"f")}get api(){return a(this,r,"f")}set api(e){n(this,r,e,"f")}clone(){return new o(this.api,this.id,this.version)}}t.SessionApiData=o,r=new WeakMap},9766:function(e,t,i){"use strict";var r,n,a,s,o,l,c,u,h,d,f=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),p=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),m=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&f(t,e,i);return p(t,e),t},g=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))},b=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},v=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportApi=void 0;const _=i(887),y=i(5094),A=i(8877),E=i(2248),w=i(1990),S=i(3612),T=i(2380),x=i(2183),M=i(7163),R=i(7849),P=i(3858),C=i(7977),k=i(3441),O=m(i(2592)),D=i(3289);t.ViewportApi=class{constructor(e){r.set(this,D.AnimationEngine.instance),n.set(this,void 0),a.set(this,y.CreationControlCenter.instance),s.set(this,A.Converter.instance),o.set(this,M.GLTFConverter.instance),l.set(this,A.InputValidator.instance),c.set(this,A.Logger.instance),u.set(this,A.SystemInfo.instance),h.set(this,{}),d.set(this,{}),b(this,n,e,"f"),v(this,n,"f").cameraEngine.update=()=>{for(let e in v(this,n,"f").cameraEngine.cameras)v(this,h,"f")[e]||(v(this,n,"f").cameraEngine.cameras[e].type===w.CAMERA_TYPE.PERSPECTIVE?v(this,h,"f")[e]=new S.PerspectiveCameraApi(this,v(this,n,"f").cameraEngine.cameras[e]):v(this,h,"f")[e]=new T.OrthographicCameraApi(this,v(this,n,"f").cameraEngine.cameras[e]));for(let e in v(this,h,"f"))v(this,n,"f").cameraEngine.cameras[e]||delete v(this,h,"f")[e]},v(this,n,"f").cameraEngine.update(),v(this,n,"f").lightEngine.update=()=>{for(let e in v(this,n,"f").lightEngine.lightScenes)v(this,d,"f")[e]||(v(this,d,"f")[e]=new x.LightSceneApi(this,v(this,n,"f").lightEngine.lightScenes[e]));for(let e in v(this,d,"f"))v(this,n,"f").lightEngine.lightScenes[e]||delete v(this,d,"f")[e]},v(this,n,"f").lightEngine.update()}get ambientOcclusion(){return v(this,n,"f").ambientOcclusion}set ambientOcclusion(e){const t="ambientOcclusion";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").ambientOcclusion=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("ambientOcclusion")}get ambientOcclusionIntensity(){return v(this,n,"f").ambientOcclusionIntensity}set ambientOcclusionIntensity(e){const t="ambientOcclusionIntensity";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").ambientOcclusionIntensity=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("ambientOcclusionIntensity")}get animations(){return v(this,r,"f").animations}get arRotation(){return v(this,n,"f").arRotation}set arRotation(e){const t="arRotation";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),v(this,n,"f").arRotation=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arRotation")}get arScale(){return v(this,n,"f").arScale}set arScale(e){const t="arScale";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),v(this,n,"f").arScale=_.vec3.max(_.vec3.create(),e,_.vec3.fromValues(.001,.001,.001)),v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arScale")}get arTranslation(){return v(this,n,"f").arTranslation}set arTranslation(e){const t="arTranslation";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),v(this,n,"f").arTranslation=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arTranslation")}get automaticColorAdjustment(){return v(this,n,"f").automaticColorAdjustment}set automaticColorAdjustment(e){const t="automaticColorAdjustment";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").automaticColorAdjustment=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("automaticColorAdjustment")}get automaticResizing(){return v(this,n,"f").automaticResizing}set automaticResizing(e){const t="automaticResizing";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").automaticResizing=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("automaticResizing")}get beautyRenderBlendingDuration(){return v(this,n,"f").beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){const t="beautyRenderBlendingDuration";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").beautyRenderBlendingDuration=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("beautyRenderBlendingDuration")}get beautyRenderDelay(){return v(this,n,"f").beautyRenderDelay}set beautyRenderDelay(e){const t="beautyRenderDelay";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").beautyRenderDelay=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("beautyRenderDelay")}get camera(){return v(this,n,"f").cameraEngine.camera?v(this,h,"f")[v(this,n,"f").cameraEngine.camera.id]:null}get cameras(){return v(this,h,"f")}get canvas(){return v(this,n,"f").canvas}get clearAlpha(){return v(this,n,"f").clearAlpha}set clearAlpha(e){const t="clearAlpha";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").clearAlpha=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("clearAlpha")}get clearColor(){return v(this,n,"f").clearColor}set clearColor(e){const t="clearColor";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),v(this,n,"f").clearColor=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("clearColor")}get defaultMaterialColor(){return v(this,n,"f").defaultMaterialColor}set defaultMaterialColor(e){const t="defaultMaterialColor";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),v(this,n,"f").defaultMaterialColor=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("defaultMaterialColor")}get enableAR(){return v(this,n,"f").enableAR}set enableAR(e){const t="enableAR";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").enableAR=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("enableAR")}get environmentMap(){return v(this,n,"f").environmentMap}set environmentMap(e){const t="environmentMap";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"cubeMap"),v(this,n,"f").environmentMap=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMap")}get environmentMapAsBackground(){return v(this,n,"f").environmentMapAsBackground}set environmentMapAsBackground(e){const t="environmentMapAsBackground";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").environmentMapAsBackground=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapAsBackground")}get environmentMapBlurriness(){return v(this,n,"f").environmentMapBlurriness}set environmentMapBlurriness(e){const t="environmentMapBlurriness";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").environmentMapBlurriness=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapBlurriness")}get environmentMapIntensity(){return v(this,n,"f").environmentMapIntensity}set environmentMapIntensity(e){const t="environmentMapIntensity";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").environmentMapIntensity=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapIntensity")}get environmentMapResolution(){return v(this,n,"f").environmentMapResolution}set environmentMapResolution(e){const t="environmentMapResolution";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"string"),v(this,n,"f").environmentMapResolution=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapResolution")}get environmentMapForUnlitMaterials(){return v(this,n,"f").environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){const t="environmentMapForUnlitMaterials";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").environmentMapForUnlitMaterials=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapForUnlitMaterials")}get environmentMapRotation(){return v(this,n,"f").environmentMapRotation}set environmentMapRotation(e){const t="environmentMapRotation";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"quat"),v(this,n,"f").environmentMapRotation=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapRotation")}get gridColor(){return v(this,n,"f").gridColor}set gridColor(e){const t="gridColor";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),v(this,n,"f").gridColor=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("gridColor")}get gridVisibility(){return v(this,n,"f").gridVisibility}set gridVisibility(e){const t="gridVisibility";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").gridVisibility=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("gridVisibility")}get groundPlaneColor(){return v(this,n,"f").groundPlaneColor}set groundPlaneColor(e){const t="groundPlaneColor";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),v(this,n,"f").groundPlaneColor=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneColor")}get groundPlaneVisibility(){return v(this,n,"f").groundPlaneVisibility}set groundPlaneVisibility(e){const t="groundPlaneVisibility";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").groundPlaneVisibility=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneVisibility")}get groundPlaneShadowColor(){return v(this,n,"f").groundPlaneShadowColor}set groundPlaneShadowColor(e){const t="groundPlaneShadowColor";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),v(this,n,"f").groundPlaneShadowColor=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneShadowColor")}get groundPlaneShadowVisibility(){return v(this,n,"f").groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){const t="groundPlaneShadowVisibility";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").groundPlaneShadowVisibility=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneShadowVisibility")}get id(){return v(this,n,"f").id}get lights(){return v(this,n,"f").lights}set lights(e){const t="lights";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").lights=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("lights")}get lightScene(){return v(this,n,"f").lightEngine.lightScene?v(this,d,"f")[v(this,n,"f").lightEngine.lightScene.id]:null}get lightScenes(){return v(this,d,"f")}get maximumRenderingSize(){return v(this,n,"f").maximumRenderingSize}set maximumRenderingSize(e){const t="maximumRenderingSize";v(this,l,"f").validateAndError(`SessionApi.${t}`,e,"object"),v(this,l,"f").validateAndError(`SessionApi.${t}`,e.width,"number"),v(this,l,"f").validateAndError(`SessionApi.${t}`,e.height,"number"),v(this,n,"f").maximumRenderingSize=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("maximumRenderingSize")}get outputEncoding(){return v(this,n,"f").outputEncoding}set outputEncoding(e){const t="outputEncoding";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(E.TEXTURE_ENCODING)),v(this,n,"f").outputEncoding=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("outputEncoding")}get physicallyCorrectLights(){return v(this,n,"f").physicallyCorrectLights}set physicallyCorrectLights(e){const t="physicallyCorrectLights";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").physicallyCorrectLights=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("physicallyCorrectLights")}get pointSize(){return v(this,n,"f").pointSize}set pointSize(e){const t="pointSize";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").pointSize=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("pointSize")}get sessionSettingsId(){return v(this,n,"f").sessionSettingsId}get sessionSettingsMode(){return v(this,n,"f").sessionSettingsMode}get shadows(){return v(this,n,"f").shadows}set shadows(e){const t="shadows";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").shadows=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("shadows")}get show(){return v(this,n,"f").show}set show(e){const t="show";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").show=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("show")}get showStatistics(){return v(this,n,"f").showStatistics}set showStatistics(e){const t="showStatistics";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),v(this,n,"f").showStatistics=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("showStatistics")}get textureEncoding(){return v(this,n,"f").textureEncoding}set textureEncoding(e){const t="textureEncoding";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(E.TEXTURE_ENCODING)),v(this,n,"f").textureEncoding=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("textureEncoding")}get threeJsCoreObjects(){return{scene:v(this,n,"f").sceneTreeManager.scene,renderer:v(this,n,"f").renderer,camera:v(this,n,"f").cameraManager.camera}}get toneMapping(){return v(this,n,"f").toneMapping}set toneMapping(e){const t="toneMapping";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(E.TONE_MAPPING)),v(this,n,"f").toneMapping=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("toneMapping")}get toneMappingExposure(){return v(this,n,"f").toneMappingExposure}set toneMappingExposure(e){const t="toneMappingExposure";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),v(this,n,"f").toneMappingExposure=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("toneMappingExposure")}get type(){return v(this,n,"f").type}set type(e){const t="type";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(E.RENDERER_TYPE)),v(this,n,"f").type=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("type")}get visualizeAttributes(){return v(this,n,"f").visualizeAttributes}set visualizeAttributes(e){const t="visualizeAttributes";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"function",!1),v(this,n,"f").visualizeAttributes=e,v(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("visualizeAttributes")}addCanvasEventListener(e){return v(this,l,"f").validateAndError("ViewportApi.addCanvasEventListener",e,"object"),v(this,n,"f").domEventEngine.addDomEventListener(e)}addFlag(e){return v(this,l,"f").validateAndError("ViewportApi.addFlag",e,"enum",!0,Object.values(E.FLAG_TYPE)),v(this,n,"f").addFlag(e)}restrictEventListeners(e){v(this,n,"f").domEventEngine.allowEventListeners(e)}assignCamera(e){v(this,l,"f").validateAndError("ViewportApi.assignCamera",e,"string");const t=v(this,n,"f").cameraEngine.assignCamera(e);return this.update("assignCamera"),t}assignLightScene(e){v(this,l,"f").validateAndError("ViewportApi.assignLightScene",e,"string");const t=v(this,n,"f").lightEngine.assignLightScene(e);return this.update("assignLightScene"),t}applyViewportSettings(e,t){const i="applyViewportSettings";return v(this,l,"f").validateAndError(`SessionApi.${i}`,e,"object"),v(this,l,"f").validateAndError(`SessionApi.${i}`,t,"object",!1),v(this,a,"f").applyViewportSettings(this.id,e,t)}close(){return g(this,void 0,void 0,(function*(){return yield v(this,a,"f").closeRenderingEngine(this.id)}))}convert3Dto2D(e){return v(this,l,"f").validateAndError("ViewportApi.convert3Dto2D",e,"vec3"),v(this,n,"f").convert3Dto2D(e)}convertToGlTF(e=C.sceneTree.root){return g(this,void 0,void 0,(function*(){if(!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`convertToGlTF: Input could not be validated. ${e} is not of type node.`,e,"node");this.update("convertToGlTF.start");const t=yield v(this,o,"f").convert(e,!1,this.id);return this.update("convertToGlTF.end"),new Blob([t],{type:"application/octet-stream"})}))}createLightScene(e){const t="createLightScene";v(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"object",!1);const i=Object.assign({},e);v(this,l,"f").validateAndError(`ViewportApi.${t}`,i.name,"string",!1),v(this,l,"f").validateAndError(`ViewportApi.${t}`,i.standard,"boolean",!1);const r=v(this,n,"f").lightEngine.createLightScene(e||{});return this.update("createLightScene"),v(this,d,"f")[r.id]}createOrthographicCamera(e){v(this,l,"f").validateAndError("ViewportApi.createOrthographicCamera",e,"string",!1);const t=v(this,n,"f").cameraEngine.createCamera(w.CAMERA_TYPE.ORTHOGRAPHIC,e);return this.update("createOrthographicCamera"),v(this,h,"f")[t.id]}createPerspectiveCamera(e){v(this,l,"f").validateAndError("ViewportApi.createPerspectiveCamera",e,"string",!1);const t=v(this,n,"f").cameraEngine.createCamera(w.CAMERA_TYPE.PERSPECTIVE,e);return this.update("createPerspectiveCamera"),v(this,h,"f")[t.id]}createSDTFOverview(e){if(!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`createSDTFOverview: Input could not be validated. ${e} is not of type node.`,e,"node");return this.update("createSDTFOverview"),v(this,n,"f").createSDTFOverview(e)}displayErrorMessage(e){v(this,l,"f").validateAndError("ViewportApi.displayErrorMessage",e,"string"),v(this,n,"f").displayErrorMessage(e),this.update("displayErrorMessage")}getEnvironmentMapImageUrl(){return v(this,n,"f").getEnvironmentMapImageUrl()}getScreenshot(e,t){const i="getScreenshot";return v(this,l,"f").validateAndError(`ViewportApi.${i}`,e,"string",!1),v(this,l,"f").validateAndError(`ViewportApi.${i}`,t,"number",!1),this.update("getScreenshot"),v(this,n,"f").getScreenshot(e,t)}getViewportSettings(){return v(this,a,"f").getViewportSettings(this.id)}isMobileDeviceWithoutBrowserARSupport(){return v(this,n,"f").isMobileDeviceWithoutBrowserARSupport()}mouseEventToRay(e){return v(this,n,"f").mouseEventToRay(e)}raytraceScene(e,t,i){const r="raytraceScene";return v(this,l,"f").validateAndError(`ViewportApi.${r}`,e,"vec3"),v(this,l,"f").validateAndError(`ViewportApi.${r}`,t,"vec3"),v(this,n,"f").raytraceScene(e,t,i)}removeCamera(e){v(this,l,"f").validateAndError("ViewportApi.removeCamera",e,"string");const t=v(this,n,"f").cameraEngine.removeCamera(e);return this.update("removeCamera"),t}removeCanvasEventListener(e){return v(this,l,"f").validateAndError("ViewportApi.removeCanvasEventListener",e,"string"),v(this,n,"f").domEventEngine.removeDomEventListener(e)}removeFlag(e){return v(this,l,"f").validateAndError("ViewportApi.removeFlag",e,"string"),v(this,n,"f").removeFlag(e)}removeLightScene(e){v(this,l,"f").validateAndError("ViewportApi.removeLightScene",e,"string");const t=v(this,n,"f").lightEngine.removeLightScene(e);return this.update("removeLightScene"),t}render(){v(this,n,"f").renderingManager.render()}resetToDefaultCameras(){for(let e in this.cameras)v(this,n,"f").cameraEngine.removeCamera(e);v(this,n,"f").cameraEngine.createDefaultCameras(),this.update("resetToDefaultCameras")}resize(e,t){const i="resize";v(this,l,"f").validateAndError(`ViewportApi.${i}`,e,"number"),v(this,l,"f").validateAndError(`ViewportApi.${i}`,t,"number"),v(this,n,"f").resize(e,t),this.update("resize")}touchToRay(e){return v(this,n,"f").touchToRay(e)}touchEventToRay(e){return v(this,n,"f").touchEventToRay(e)}update(e){v(this,n,"f").update(e||"ViewportApi")}updateNode(e){if(!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`updateNode: Input could not be validated. ${e} is not of type node.`,e,"node");v(this,n,"f").sceneTreeManager.updateNode(e,e.threeJsObject[this.id])}updateNodeTransformation(e){if(!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`updateNodeTransformation: Input could not be validated. ${e} is not of type node.`,e,"node");v(this,n,"f").sceneTreeManager.updateNode(e,e.threeJsObject[this.id],{transformationOnly:!0})}updateEnvironmentGeometry(){v(this,n,"f").updateEnvironmentGeometry()}createArSessionLink(e,t=!0,i){return g(this,void 0,void 0,(function*(){if(e&&!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`createArSessionLink: Input could not be validated. ${e} is not of type node.`,e,"node");const r=v(this,a,"f").getARSessionEngine();if(!r)throw new A.ShapeDiverViewerArError("ViewportApi.createArSessionLink: None of the sessions that are registered are capable of using the AR feature.");const n=e||C.sceneTree.root;let s=_.mat4.fromScaling(_.mat4.create(),this.arScale);n.transformations.push({id:"ar_scaling",matrix:s}),this.update("createArSessionLink.start");const l=yield v(this,o,"f").convert(n,!0,this.id);for(let e=0;e<n.transformations.length;e++)"ar_scaling"===n.transformations[e].id&&n.transformations.splice(e,1);this.update("createArSessionLink.end");const c=yield r.uploadGLTF(new Blob([l],{type:"application/octet-stream"}),R.ShapeDiverRequestGltfUploadQueryConversion.SCENE),u={sddev3:"https://sddev3.eu-central-1.shapediver.com",sddev2:"https://sddev2.eu-central-1.shapediver.com",sddev:"https://sddev.eu-central-1.shapediver.com",sdtest:"https://sdtest.us-east-1.shapediver.com",sdeuc1:"https://sdeuc1.eu-central-1.shapediver.com",sdr7euc1:"https://sdr7euc1.eu-central-1.shapediver.com",sduse1:"https://model-view.shapediver.com"};let h=Object.keys(u).find((e=>u[e]===r.modelViewUrl));h||(h=r.modelViewUrl.replace("https://","").replace(".shapediver.com",""));let d=i?`fb=${encodeURIComponent(i)}&`:"";if(!c.gltf||!c.gltf.sceneId)throw new A.ShapeDiverViewerArError("ViewportApi.createArSessionLink: There was an unexpected error with the ar scene response. Please contact us if this happens again.");let f=c.gltf.sceneId;const p=`https://viewer.shapediver.com/v3/${k.build_data.build_version.replace("3.","")}/ar.html?${d}b=${encodeURIComponent(h)}&id=${encodeURIComponent(f)}`;return!1===t?p:yield new Promise(((e,t)=>{O.toDataURL(p,((i,r)=>{i?t(i):e(r)}))}))}))}viewInAR(e){return g(this,void 0,void 0,(function*(){if(e&&!(e instanceof P.TreeNode))throw new A.ShapeDiverViewerValidationError(`viewInAR: Input could not be validated. ${e} is not of type node.`,e,"node");const t=v(this,a,"f").getARSessionEngine();if(!t)throw new A.ShapeDiverViewerArError("Api.viewInAR: None of the sessions that are registered are capable of using the AR feature.");const i=e||C.sceneTree.root;let r=_.mat4.fromScaling(_.mat4.create(),this.arScale);i.transformations.push({id:"ar_scaling",matrix:r}),this.update("viewInAR.start");const s=yield v(this,o,"f").convert(i,!0,this.id);for(let e=0;e<i.transformations.length;e++)"ar_scaling"===i.transformations[e].id&&i.transformations.splice(e,1);this.update("viewInAR.end");const l=yield t.uploadGLTF(new Blob([s],{type:"application/octet-stream"}),v(this,u,"f").isIOS?R.ShapeDiverRequestGltfUploadQueryConversion.USDZ:R.ShapeDiverRequestGltfUploadQueryConversion.NONE);return v(this,n,"f").viewInAR(l.gltf.href)}))}viewableInAR(){return v(this,n,"f").viewableInAR()}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap},3778:function(e,t,i){"use strict";var r,n,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCameraApi=void 0;const u=i(8877),h=i(5174);t.AbstractCameraApi=class{constructor(e,t){r.set(this,void 0),n.set(this,void 0),a.set(this,u.InputValidator.instance),s.set(this,u.Logger.instance),o.set(this,((e,t)=>{c(this,a,"f").validateAndError(`${this.scope}.${e}`,t,"object",!1);const i=Object.assign({},t);c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.easing,"string",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.duration,"number",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.coordinates,"string",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.interpolation,"string",!1)})),this.scope="AbstractCameraApi",l(this,n,e,"f"),l(this,r,t,"f")}get autoAdjust(){return c(this,r,"f").autoAdjust}set autoAdjust(e){const t="autoAdjust";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,r,"f").autoAdjust=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get cameraMovementDuration(){return c(this,r,"f").cameraMovementDuration}set cameraMovementDuration(e){const t="cameraMovementDuration";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,r,"f").cameraMovementDuration=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get defaultPosition(){return c(this,r,"f").defaultPosition}set defaultPosition(e){const t="defaultPosition";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,r,"f").defaultPosition=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get defaultTarget(){return c(this,r,"f").defaultTarget}set defaultTarget(e){const t="defaultTarget";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,r,"f").defaultTarget=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get enabled(){return c(this,r,"f").controls.enabled}set enabled(e){const t="enabled";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,r,"f").controls.enabled=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get id(){return c(this,r,"f").id}get name(){return c(this,r,"f").name}set name(e){const t="name";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"string",!1),c(this,r,"f").name=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get order(){return c(this,r,"f").order}set order(e){const t="order";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number",!1),c(this,r,"f").order=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get position(){return c(this,r,"f").position}set position(e){const t="position";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,r,"f").position=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get revertAtMouseUp(){return c(this,r,"f").revertAtMouseUp}set revertAtMouseUp(e){const t="revertAtMouseUp";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,r,"f").revertAtMouseUp=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get revertAtMouseUpDuration(){return c(this,r,"f").revertAtMouseUpDuration}set revertAtMouseUpDuration(e){const t="revertAtMouseUpDuration";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,r,"f").revertAtMouseUpDuration=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get target(){return c(this,r,"f").target}set target(e){const t="target";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,r,"f").target=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}get type(){return c(this,r,"f").type}get zoomToFactor(){return c(this,r,"f").zoomExtentsFactor}set zoomToFactor(e){const t="zoomToFactor";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,r,"f").zoomExtentsFactor=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,n,"f").update()}animate(e,t){const i="animate";c(this,a,"f").validateAndError(`${this.scope}.${i}`,e,"array");for(let t=0;t<e.length;t++)c(this,a,"f").validateAndError(`${this.scope}.${i}`,e[t].position,"vec3"),c(this,a,"f").validateAndError(`${this.scope}.${i}`,e[t].target,"vec3");return c(this,o,"f").call(this,i,t),c(this,r,"f").animate(e,t)}calculateZoomTo(e,t,i){const n="calculateZoomTo";if(void 0!==e&&!(e instanceof h.Box))throw new u.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return c(this,a,"f").validateAndError(`${this.scope}.${n}`,t,"vec3",!1),c(this,a,"f").validateAndError(`${this.scope}.${n}`,i,"vec3",!1),c(this,r,"f").calculateZoomTo(e,t,i)}project(e){return c(this,a,"f").validateAndError(`${this.scope}.project`,e,"vec3"),c(this,r,"f").project(e)}reset(e){return c(this,o,"f").call(this,"reset",e),c(this,r,"f").reset(e)}set(e,t,i){const n="set";return c(this,a,"f").validateAndError(`${this.scope}.${n}`,e,"vec3",!1),c(this,a,"f").validateAndError(`${this.scope}.${n}`,t,"vec3",!1),c(this,o,"f").call(this,n,i),c(this,r,"f").set(e,t,i)}unproject(e){return c(this,a,"f").validateAndError(`${this.scope}.unproject`,e,"vec3",!1),c(this,r,"f").unproject(e)}zoomTo(e,t){const i="zoomTo";if(void 0!==e&&!(e instanceof h.Box))throw new u.ShapeDiverViewerValidationError(`${i}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return c(this,o,"f").call(this,i,t),c(this,r,"f").zoomTo(e,t)}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},2380:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraApi=void 0;const c=i(1990),u=i(3778),h=i(8877);class d extends u.AbstractCameraApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,h.InputValidator.instance),a.set(this,h.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="OrthographicCameraApi"}get damping(){return l(this,r,"f").controls.damping}set damping(e){const t="damping";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.damping=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get direction(){return l(this,r,"f").direction}set direction(e){const t="direction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"enum",!0,Object.values(c.ORTHOGRAPHIC_CAMERA_DIRECTION)),l(this,r,"f").direction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableKeyPan(){return l(this,r,"f").controls.enableKeyPan}set enableKeyPan(e){const t="enableKeyPan";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableKeyPan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enablePan(){return l(this,r,"f").controls.enablePan}set enablePan(e){const t="enablePan";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enablePan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableZoom(){return l(this,r,"f").controls.enableZoom}set enableZoom(e){const t="enableZoom";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableZoom=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get keyPanSpeed(){return l(this,r,"f").controls.keyPanSpeed}set keyPanSpeed(e){const t="keyPanSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.keyPanSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get movementSmoothness(){return l(this,r,"f").controls.movementSmoothness}set movementSmoothness(e){const t="movementSmoothness";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.movementSmoothness=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get panSpeed(){return l(this,r,"f").controls.panSpeed}set panSpeed(e){const t="panSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.panSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomSpeed(){return l(this,r,"f").controls.zoomSpeed}set zoomSpeed(e){const t="zoomSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.zoomSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.OrthographicCameraApi=d,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},3612:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCameraApi=void 0;const c=i(3778),u=i(8877);class h extends c.AbstractCameraApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="PerspectiveCameraApi"}get autoRotationSpeed(){return l(this,r,"f").controls.autoRotationSpeed}set autoRotationSpeed(e){const t="autoRotationSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.autoRotationSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get cubePositionRestriction(){return l(this,r,"f").controls.cubePositionRestriction}set cubePositionRestriction(e){const t="cubePositionRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.min,"vec3"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.max,"vec3"),l(this,r,"f").controls.cubePositionRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get cubeTargetRestriction(){return l(this,r,"f").controls.cubeTargetRestriction}set cubeTargetRestriction(e){const t="cubeTargetRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.min,"vec3"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.max,"vec3"),l(this,r,"f").controls.cubeTargetRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get damping(){return l(this,r,"f").controls.damping}set damping(e){const t="damping";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.damping=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableAutoRotation(){return l(this,r,"f").controls.enableAutoRotation}set enableAutoRotation(e){const t="enableAutoRotation";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableAutoRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableKeyPan(){return l(this,r,"f").controls.enableKeyPan}set enableKeyPan(e){const t="enableKeyPan";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableKeyPan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enablePan(){return l(this,r,"f").controls.enablePan}set enablePan(e){const t="enablePan";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enablePan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableRotation(){return l(this,r,"f").controls.enableRotation}set enableRotation(e){const t="enableRotation";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableZoom(){return l(this,r,"f").controls.enableZoom}set enableZoom(e){const t="enableZoom";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").controls.enableZoom=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get fov(){return l(this,r,"f").fov}set fov(e){const t="fov";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").fov=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get keyPanSpeed(){return l(this,r,"f").controls.keyPanSpeed}set keyPanSpeed(e){const t="keyPanSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.keyPanSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get movementSmoothness(){return l(this,r,"f").controls.movementSmoothness}set movementSmoothness(e){const t="movementSmoothness";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.movementSmoothness=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get panSpeed(){return l(this,r,"f").controls.panSpeed}set panSpeed(e){const t="panSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.panSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get rotationRestriction(){return l(this,r,"f").controls.rotationRestriction}set rotationRestriction(e){const t="rotationRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.minAzimuthAngle,"number"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.maxAzimuthAngle,"number"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.minPolarAngle,"number"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.maxPolarAngle,"number"),l(this,r,"f").controls.rotationRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get rotationSpeed(){return l(this,r,"f").controls.rotationSpeed}set rotationSpeed(e){const t="rotationSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.rotationSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get spherePositionRestriction(){return l(this,r,"f").controls.spherePositionRestriction}set spherePositionRestriction(e){const t="spherePositionRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.center,"vec3"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.radius,"number"),l(this,r,"f").controls.spherePositionRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get sphereTargetRestriction(){return l(this,r,"f").controls.sphereTargetRestriction}set sphereTargetRestriction(e){const t="sphereTargetRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.center,"vec3"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.radius,"number"),l(this,r,"f").controls.sphereTargetRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomRestriction(){return l(this,r,"f").controls.zoomRestriction}set zoomRestriction(e){const t="zoomRestriction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.minDistance,"number"),l(this,n,"f").validateAndError(`${this.scope}.${t}`,e.maxDistance,"number"),l(this,r,"f").controls.zoomRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomSpeed(){return l(this,r,"f").controls.zoomSpeed}set zoomSpeed(e){const t="zoomSpeed";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").controls.zoomSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.PerspectiveCameraApi=h,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},2192:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractLightApi=void 0;const c=i(8877);t.AbstractLightApi=class{constructor(e,t){r.set(this,void 0),n.set(this,c.InputValidator.instance),a.set(this,c.Logger.instance),s.set(this,void 0),this.scope="AbstractLightApi",o(this,s,e,"f"),o(this,r,t,"f")}get color(){return l(this,r,"f").color}set color(e){const t="color";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"color"),l(this,r,"f").color=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get id(){return l(this,r,"f").id}get intensity(){return l(this,r,"f").intensity}set intensity(e){const t="intensity";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").intensity=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get name(){return l(this,r,"f").name}set name(e){const t="name";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"string",!1),l(this,r,"f").name=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get order(){return l(this,r,"f").order}set order(e){const t="order";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number",!1),l(this,r,"f").order=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get type(){return l(this,r,"f").type}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},2183:function(e,t,i){"use strict";var r,n,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.LightSceneApi=void 0;const u=i(3490),h=i(7200),d=i(5707),f=i(273),p=i(3658),m=i(5942),g=i(8877);t.LightSceneApi=class{constructor(e,t){r.set(this,void 0),n.set(this,{}),a.set(this,g.InputValidator.instance),s.set(this,g.Logger.instance),o.set(this,void 0),l(this,o,e,"f"),l(this,r,t,"f"),c(this,r,"f").update=()=>{for(let e in c(this,r,"f").lights)if(!c(this,n,"f")[e])switch(c(this,r,"f").lights[e].type){case u.LIGHT_TYPE.AMBIENT:c(this,n,"f")[e]=new h.AmbientLightApi(c(this,o,"f"),c(this,r,"f").lights[e]);break;case u.LIGHT_TYPE.DIRECTIONAL:c(this,n,"f")[e]=new d.DirectionalLightApi(c(this,o,"f"),c(this,r,"f").lights[e]);break;case u.LIGHT_TYPE.HEMISPHERE:c(this,n,"f")[e]=new f.HemisphereLightApi(c(this,o,"f"),c(this,r,"f").lights[e]);break;case u.LIGHT_TYPE.POINT:c(this,n,"f")[e]=new p.PointLightApi(c(this,o,"f"),c(this,r,"f").lights[e]);break;case u.LIGHT_TYPE.SPOT:c(this,n,"f")[e]=new m.SpotLightApi(c(this,o,"f"),c(this,r,"f").lights[e])}for(let e in c(this,n,"f"))c(this,r,"f").lights[e]||delete c(this,n,"f")[e]},c(this,r,"f").update()}get id(){return c(this,r,"f").id}get lights(){return c(this,n,"f")}get name(){return c(this,r,"f").name}set name(e){const t="name";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"string",!1),c(this,r,"f").name=e,c(this,s,"f").debug(`LightSceneApi.${t}: ${t} was set to: ${e}`)}get node(){return c(this,r,"f").node}addAmbientLight(e){const t="addAmbientLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,r,"f").addAmbientLight(e);return c(this,o,"f").update(),c(this,n,"f")[s.id]}addDirectionalLight(e){const t="addDirectionalLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.direction,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.castShadow,"boolean",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.shadowMapResolution,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.shadowMapBias,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,r,"f").addDirectionalLight(e);return c(this,o,"f").update(),c(this,n,"f")[s.id]}addHemisphereLight(e){const t="addHemisphereLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.groundColor,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,r,"f").addHemisphereLight(e);return c(this,o,"f").update(),c(this,n,"f")[s.id]}addPointLight(e){const t="addPointLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.position,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.distance,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.decay,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,r,"f").addPointLight(e);return c(this,o,"f").update(),c(this,n,"f")[s.id]}addSpotLight(e){const t="addSpotLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.position,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.target,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.distance,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.decay,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.angle,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.penumbra,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,r,"f").addSpotLight(e);return c(this,o,"f").update(),c(this,n,"f")[s.id]}removeLight(e){const t=c(this,r,"f").removeLight(e);return c(this,o,"f").update(),t}},r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},7200:function(e,t,i){"use strict";var r,n,a=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLightApi=void 0;const s=i(2192);class o extends s.AbstractLightApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,void 0),a(this,n,e,"f"),a(this,r,t,"f"),this.scope="AmbientLightApi"}}t.AmbientLightApi=o,r=new WeakMap,n=new WeakMap},5707:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),r.set(this,u.InputValidator.instance),n.set(this,void 0),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="DirectionalLightApi"}get castShadow(){return l(this,n,"f").castShadow}set castShadow(e){const t="castShadow";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").castShadow=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get direction(){return l(this,n,"f").direction}set direction(e){const t="direction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,n,"f").direction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get shadowMapBias(){return l(this,n,"f").shadowMapBias}set shadowMapBias(e){const t="shadowMapBias";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").shadowMapBias=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get shadowMapResolution(){return l(this,n,"f").shadowMapResolution}set shadowMapResolution(e){const t="shadowMapResolution";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").shadowMapResolution=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.DirectionalLightApi=h,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},273:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="HemisphereLightApi"}get groundColor(){return l(this,r,"f").groundColor}set groundColor(e){const t="groundColor";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"color"),l(this,r,"f").groundColor=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.HemisphereLightApi=h,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},3658:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PointLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="PointLightApi"}get decay(){return l(this,r,"f").decay}set decay(e){const t="decay";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").decay=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get distance(){return l(this,r,"f").distance}set distance(e){const t="distance";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").distance=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get position(){return l(this,r,"f").position}set position(e){const t="position";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,r,"f").position=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.PointLightApi=h,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},5942:function(e,t,i){"use strict";var r,n,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),r.set(this,void 0),n.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="SpotLightApi"}get angle(){return l(this,r,"f").angle}set angle(e){const t="angle";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").angle=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get decay(){return l(this,r,"f").decay}set decay(e){const t="decay";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").decay=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get distance(){return l(this,r,"f").distance}set distance(e){const t="distance";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").distance=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get penumbra(){return l(this,r,"f").penumbra}set penumbra(e){const t="penumbra";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").penumbra=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get position(){return l(this,r,"f").position}set position(e){const t="position";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,r,"f").position=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get target(){return l(this,r,"f").target}set target(e){const t="target";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,r,"f").target=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.SpotLightApi=h,r=new WeakMap,n=new WeakMap,a=new WeakMap,s=new WeakMap},3256:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialStandardData=t.ThreejsData=t.Sphere=t.Box=t.EVENTTYPE_TASK=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.TASK_TYPE=t.SPINNER_POSITIONING=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.SDTF_TYPEHINT=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.PRIMITIVE_MODE=t.LOGGING_LEVEL=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.VISIBILITY_MODE=t.RENDERER_TYPE=t.LIGHT_TYPE=t.CAMERA_TYPE=t.TAG3D_JUSTIFICATION=t.PARAMETER_VISUALIZATION=t.EXPORT_TYPE=t.PARAMETER_TYPE=t.FLAG_TYPE=t.TreeNode=t.Tree=t.version=t.generalOptions=t.sceneTree=t.viewports=t.sessions=t.removeListener=t.addListener=t.createSession=t.createViewport=void 0,t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerGeneralError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.OutputApiData=t.SessionApiData=t.SessionOutputData=t.SessionData=t.MaterialEngine=t.GeometryEngine=t.DataEngine=t.SdtfPrimitiveTypeGuard=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialUnlitData=void 0;const r=i(3858);Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return r.Tree}}),Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return r.TreeNode}});const n=i(4465);Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return n.TAG3D_JUSTIFICATION}});const a=i(1990);Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return a.CAMERA_TYPE}}),Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return a.ORTHOGRAPHIC_CAMERA_DIRECTION}});const s=i(3490);Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return s.LIGHT_TYPE}});const o=i(2248);Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return o.RENDERER_TYPE}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return o.VISIBILITY_MODE}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return o.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return o.TONE_MAPPING}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return o.FLAG_TYPE}}),Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return o.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return o.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return o.SPINNER_POSITIONING}});const l=i(8877);Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return l.EVENTTYPE}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return l.LOGGING_LEVEL}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return l.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return l.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return l.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return l.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return l.EVENTTYPE_VIEWPORT}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return l.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return l.EVENTTYPE_TASK}}),Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return l.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return l.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return l.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return l.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return l.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerGeneralError",{enumerable:!0,get:function(){return l.ShapeDiverViewerGeneralError}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return l.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return l.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return l.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return l.ShapeDiverViewerViewportError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return l.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return l.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return l.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return l.ShapeDiverViewerWebGLError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return l.ShapeDiverViewerErrorType}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendResponseError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendResponseErrorType}});const c=i(7038);Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return c.PRIMITIVE_MODE}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return c.MATERIAL_SIDE}}),Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return c.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return c.MATERIAL_SHADING}}),Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return c.TEXTURE_WRAPPING}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return c.TEXTURE_FILTERING}}),Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return c.SDTF_TYPEHINT}}),Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return c.TASK_TYPE}}),Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return c.AnimationData}}),Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return c.MaterialStandardData}}),Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return c.MaterialUnlitData}}),Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return c.MaterialSpecularGlossinessData}}),Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return c.SdtfPrimitiveTypeGuard}}),Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return c.AttributeData}}),Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return c.CustomData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return c.GeometryData}}),Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return c.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return c.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return c.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return c.HTMLElementAnchorTextData}}),Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return c.MapData}}),Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return c.MaterialVariantsData}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return c.PrimitiveData}}),Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return c.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return c.SDTFAttributesData}}),Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return c.SDTFItemData}}),Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return c.SDTFOverviewData}}),Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return c.MaterialGemData}});const u=i(6041);Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return u.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return u.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return u.ENVIRONMENT_MAP_EMPTY}}),Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return u.ThreejsData}});const h=i(7977);Object.defineProperty(t,"addListener",{enumerable:!0,get:function(){return h.addListener}}),Object.defineProperty(t,"createSession",{enumerable:!0,get:function(){return h.createSession}}),Object.defineProperty(t,"createViewport",{enumerable:!0,get:function(){return h.createViewport}}),Object.defineProperty(t,"generalOptions",{enumerable:!0,get:function(){return h.generalOptions}}),Object.defineProperty(t,"removeListener",{enumerable:!0,get:function(){return h.removeListener}}),Object.defineProperty(t,"sceneTree",{enumerable:!0,get:function(){return h.sceneTree}}),Object.defineProperty(t,"sessions",{enumerable:!0,get:function(){return h.sessions}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return h.version}}),Object.defineProperty(t,"viewports",{enumerable:!0,get:function(){return h.viewports}});const d=i(5174);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return d.Box}}),Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return d.Sphere}});const f=i(9878);Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return f.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return f.PARAMETER_VISUALIZATION}}),Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return f.SessionData}}),Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return f.SessionOutputData}});const p=i(7849);Object.defineProperty(t,"EXPORT_TYPE",{enumerable:!0,get:function(){return p.ShapeDiverResponseExportDefinitionType}});const m=i(5254);Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return m.DataEngine}});const g=i(6538);Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return g.GeometryEngine}});const b=i(4320);Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return b.MaterialEngine}});const v=i(9252);Object.defineProperty(t,"OutputApiData",{enumerable:!0,get:function(){return v.OutputApiData}});const _=i(8729);Object.defineProperty(t,"SessionApiData",{enumerable:!0,get:function(){return _.SessionApiData}})},7977:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createViewport=t.createSession=t.generalOptions=t.version=t.sessions=t.viewports=t.sceneTree=t.removeListener=t.addListener=void 0;const n=i(2248),a=i(3858),s=i(8877),o=i(8877),l=i(8877),c=i(5094),u=i(9766),h=i(2387),d=i(3441),f=i(6538),p=c.CreationControlCenter.instance,m=l.InputValidator.instance,g=o.Logger.instance,b=s.EventEngine.instance,v=f.GeometryEngine.instance;let _=!1,y=!0;t.addListener=(e,t)=>(m.validateAndError("addListener",e,"string"),m.validateAndError("addListener",t,"function"),g.debug(`addListener: Event Listener was registered for ${e}.`),b.addListener(e,t)),t.removeListener=e=>(m.validateAndError("removeListener",e,"string"),g.debug(`removeListener: Removing event listener with id ${e}.`),b.removeListener(e)),t.sceneTree=a.Tree.instance,t.viewports={},t.sessions={},t.version=d.build_data.build_version.replace("3.",""),p.update=(e,i)=>{for(let i in e)t.sessions[i]||(t.sessions[i]=new h.SessionApi(e[i]));for(let i in t.sessions)e[i]||delete t.sessions[i];for(let e in i)t.viewports[e]||(t.viewports[e]=new u.ViewportApi(i[e]));for(let e in t.viewports)i[e]||delete t.viewports[e]};const A=()=>{_=!0,!0===y?console.log(`Powered by:\n   _____  __                         ____   _                   \n  / ___/ / /_   ____ _ ____   ___   / __ \\ (_)_   __ ___   _____\n  \\__ \\ / __ \\ / __ '// __ \\ / _ \\ / / / // /| | / // _ \\ / ___/\n ___/ // / / // /_/ // /_/ //  __// /_/ // / | |/ //  __// /    \n/____//_/ /_/ \\__,_// .___/ \\___//_____//_/  |___/ \\___//_/     \n                   /_/                                          \nShapeDiver Viewer 3, Version ${d.build_data.build_version.replace("3.","")}\nVisit us at https://shapediver.com/ and find out more!\n`):console.log(`ShapeDiver Viewer 3, Version ${d.build_data.build_version.replace("3.","")}`)};t.generalOptions=new class{get loggingLevel(){return g.loggingLevel}set loggingLevel(e){m.validateAndError("loggingLevel",e,"enum",!0,Object.values(s.LOGGING_LEVEL)),g.loggingLevel=e,g.debug(`loggingLevel: LoggingLevel was set to: ${e}`)}get showMessages(){return g.showMessages}set showMessages(e){m.validateAndError("showMessages",e,"boolean"),g.showMessages=e,g.debug(`showMessages: ShowMessages was set to: ${e}`)}get parallelGlTFProcessing(){return v.parallelGlTFProcessing}set parallelGlTFProcessing(e){m.validateAndError("parallelGlTFProcessing",e,"number"),v.parallelGlTFProcessing=e,g.debug(`parallelGlTFProcessing: ParallelGlTFProcessing was set to: ${e}`)}get consoleBranding(){return y}set consoleBranding(e){m.validateAndError("consoleBranding",e,"boolean"),y=e,g.debug(`consoleBranding: ConsoleBranding was set to: ${e}`)}},t.createSession=e=>r(void 0,void 0,void 0,(function*(){if(!1===_&&A(),g.info(`createSession: Creating and initializing session with properties ${JSON.stringify(e)}.`),m.validateAndError("createSession",e,"object"),m.validateAndError("createSession",e.ticket,"string"),m.validateAndError("createSession",e.modelViewUrl,"string"),m.validateAndError("createSession",e.jwtToken,"string",!1),m.validateAndError("createSession",e.id,"string",!1),m.validateAndError("createSession",e.waitForOutputs,"boolean",!1),m.validateAndError("createSession",e.loadOutputs,"boolean",!1),m.validateAndError("createSession",e.excludeViewports,"stringArray",!1),m.validateAndError("createSession",e.initialParameterValues,"object",!1),e.initialParameterValues)for(let t in e.initialParameterValues)m.validateAndError("createSession",e.initialParameterValues[t],"string");void 0===e.waitForOutputs&&(e.waitForOutputs=!0),void 0===e.loadOutputs&&(e.loadOutputs=!0);const i=yield p.createSessionEngine(e);return t.sessions[i.id]=new h.SessionApi(i),t.sessions[i.id]})),t.createViewport=e=>r(void 0,void 0,void 0,(function*(){!1===_&&A(),m.validateAndError("createViewport",e,"object",!1);const i=Object.assign({},e);m.validateAndError("createViewport",i.canvas,"HTMLCanvasElement",!1),m.validateAndError("createViewport",i.id,"string",!1),m.validateAndError("createViewport",i.sessionSettingsId,"string",!1),m.validateAndError("createViewport",i.sessionSettingsMode,"enum",!1,Object.values(n.SESSION_SETTINGS_MODE)),m.validateAndError("createViewport",i.visibility,"enum",!1,Object.values(n.VISIBILITY_MODE)),m.validateAndError("createViewport",i.branding,"object",!1);const r=Object.assign({},i.branding);if(null!==r.logo&&m.validateAndError("createViewport",r.logo,"string",!1),m.validateAndError("createViewport",r.backgroundColor,"string",!1),m.validateAndError("createViewport",r.busyModeSpinner,"string",!1),m.validateAndError("createViewport",r.busyModeDisplay,"enum",!1,Object.values(n.BUSY_MODE_DISPLAY)),m.validateAndError("createViewport",r.spinnerPositioning,"enum",!1,Object.values(n.SPINNER_POSITIONING)),i.sessionSettingsMode=void 0!==i.sessionSettingsMode?i.sessionSettingsMode:n.SESSION_SETTINGS_MODE.FIRST,i.sessionSettingsMode===n.SESSION_SETTINGS_MODE.MANUAL&&!i.sessionSettingsId)throw new s.ShapeDiverViewerValidationError("createViewport: Input could not be validated. sessionSettingsId has to point to a valid and created session when using SESSION_SETTINGS_MODE.MANUAL",i.sessionSettingsId,"string");const a=yield p.createRenderingEngineThreeJs(i);return t.viewports[a.id]=new u.ViewportApi(a),t.viewports[a.id]}))},6194:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Easing:()=>n,Group:()=>s,Interpolation:()=>o,Sequence:()=>l,Tween:()=>u,VERSION:()=>h,add:()=>g,default:()=>_,getAll:()=>p,nextId:()=>d,now:()=>a,remove:()=>b,removeAll:()=>m,update:()=>v});var r,n={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-n.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*n.Bounce.In(2*e):.5*n.Bounce.Out(2*e-1)+.5}}},a="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=a()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var n=this._tweens[i[r]],s=!t;n&&!1===n.update(e,s)&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),a=o.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[i],e[i-1],i-r):a(e[n],e[n+1>i?i:n+1],r-n)},Bezier:function(e,t){for(var i=0,r=e.length-1,n=Math.pow,a=o.Utils.Bernstein,s=0;s<=r;s++)i+=n(1-t,r-s)*n(t,s)*e[s]*a(r,s);return i},CatmullRom:function(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),a=o.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(n=Math.floor(r=i*(1+t))),a(e[(n-1+i)%i],e[n],e[(n+1)%i],e[(n+2)%i],r-n)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[i]-(a(e[i],e[i],e[i-1],e[i-1],r-i)-e[i]):a(e[n?n-1:0],e[n],e[i<n+1?i:n+1],e[i<n+2?i:n+2],r-n)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=o.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:(r=[1],function(e){var t=1;if(r[e])return r[e];for(var i=e;i>1;i--)t*=i;return r[e]=t,t}),CatmullRom:function(e,t,i,r,n){var a=.5*(i-e),s=.5*(r-t),o=n*n;return(2*t-2*i+a+s)*(n*o)+(-3*t+3*i-2*a-s)*o+a*n+t}}},l=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new s,u=function(){function e(e,t){void 0===t&&(t=c),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=n.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=l.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?a()+parseFloat(e):e:a(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,r){for(var n in i){var a=e[n],s=Array.isArray(a),o=s?"array":typeof a,l=!s&&Array.isArray(i[n]);if("undefined"!==o&&"function"!==o){if(l){var c=i[n];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,a)),i[n]=[a].concat(c)}if("object"!==o&&!s||!a||l)void 0===t[n]&&(t[n]=a),s||(t[n]*=1),r[n]=l?i[n].slice().reverse():t[n]||0;else{for(var u in t[n]=s?[]:{},a)t[n][u]=a[u];r[n]=s?[]:{},this._setupProperties(a,t[n],i[n],r[n])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=a()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=a()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=a()),void 0===t&&(t=!0),this._isPaused)return!0;var i,r,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>n)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var s=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,l=this._chainedTweens.length;o<l;o++)this._chainedTweens[o].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,r){for(var n in i)if(void 0!==t[n]){var a=t[n]||0,s=i[n],o=Array.isArray(e[n]),l=Array.isArray(s);!o&&l?e[n]=this._interpolationFunction(s,r):"object"==typeof s&&s?this._updateProperties(e[n],a,s,r):"number"==typeof(s=this._handleRelativeValue(a,s))&&(e[n]=a+(s-a)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),h="18.6.4",d=l.nextId,f=c,p=f.getAll.bind(f),m=f.removeAll.bind(f),g=f.add.bind(f),b=f.remove.bind(f),v=f.update.bind(f);const _={Easing:n,Group:s,Interpolation:o,now:a,Sequence:l,nextId:d,Tween:u,VERSION:h,getAll:p,removeAll:m,add:g,remove:b,update:v}},3818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="undefined"!=typeof window&&void 0!==window.document,n="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,a="object"===("undefined"==typeof self?"undefined":i(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,s="undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),o="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno;t.isBrowser=r,t.isWebWorker=a,t.isNode=n,t.isJsDom=s,t.isDeno=o},3776:function(e,t,i){var r;!function(n){"use strict";var a,s,o,l=9e15,c=1e9,u="0123456789abcdef",h="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},p=!0,m="[DecimalError] ",g=m+"Invalid argument: ",b=m+"Precision limit exceeded",v=m+"crypto unavailable",_="[object Decimal]",y=Math.floor,A=Math.pow,E=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,T=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=1e7,M=7,R=h.length-1,P=d.length-1,C={toStringTag:_};function k(e){var t,i,r,n=e.length-1,a="",s=e[0];if(n>0){for(a+=s,t=1;t<n;t++)r=e[t]+"",(i=M-r.length)&&(a+=j(i)),a+=r;s=e[t],(i=M-(r=s+"").length)&&(a+=j(i))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}function O(e,t,i){if(e!==~~e||e<t||e>i)throw Error(g+e)}function D(e,t,i,r){var n,a,s,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=M,n=0):(n=Math.ceil((t+1)/M),t%=M),a=A(10,M-t),o=e[n]%a|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=i<4&&99999==o||i>3&&49999==o||5e4==o||0==o):s=(i<4&&o+1==a||i>3&&o+1==a/2)&&(e[n+1]/a/100|0)==A(10,t-2)-1||(o==a/2||0==o)&&0==(e[n+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(r||i<4)&&9999==o||!r&&i>3&&4999==o):s=((r||i<4)&&o+1==a||!r&&i>3&&o+1==a/2)&&(e[n+1]/a/1e3|0)==A(10,t-3)-1,s}function N(e,t,i){for(var r,n,a=[0],s=0,o=e.length;s<o;){for(n=a.length;n--;)a[n]*=t;for(a[0]+=u.indexOf(e.charAt(s++)),r=0;r<a.length;r++)a[r]>i-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/i|0,a[r]%=i)}return a.reverse()}C.absoluteValue=C.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),L(e)},C.ceil=function(){return L(new this.constructor(this),this.e+1,2)},C.clampedTo=C.clamp=function(e,t){var i=this,r=i.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(g+t);return i.cmp(e)<0?e:i.cmp(t)>0?t:new r(i)},C.comparedTo=C.cmp=function(e){var t,i,r,n,a=this,s=a.d,o=(e=new a.constructor(e)).d,l=a.s,c=e.s;if(!s||!o)return l&&c?l!==c?l:s===o?0:!s^l<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?l:o[0]?-c:0;if(l!==c)return l;if(a.e!==e.e)return a.e>e.e^l<0?1:-1;for(t=0,i=(r=s.length)<(n=o.length)?r:n;t<i;++t)if(s[t]!==o[t])return s[t]>o[t]^l<0?1:-1;return r===n?0:r>n^l<0?1:-1},C.cosine=C.cos=function(){var e,t,i=this,r=i.constructor;return i.d?i.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(i.e,i.sd())+M,r.rounding=1,i=function(e,t){var i,r,n;if(t.isZero())return t;(r=t.d.length)<32?n=(1/K(4,i=Math.ceil(r/3))).toString():(i=16,n="2.3283064365386962890625e-10"),e.precision+=i,t=J(e,1,t.times(n),new e(1));for(var a=i;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=i,t}(r,Q(r,i)),r.precision=e,r.rounding=t,L(2==o||3==o?i.neg():i,e,t,!0)):new r(1):new r(NaN)},C.cubeRoot=C.cbrt=function(){var e,t,i,r,n,a,s,o,l,c,u=this,h=u.constructor;if(!u.isFinite()||u.isZero())return new h(u);for(p=!1,(a=u.s*A(u.s*u,1/3))&&Math.abs(a)!=1/0?r=new h(a.toString()):(i=k(u.d),(a=((e=u.e)-i.length+1)%3)&&(i+=1==a||-2==a?"0":"00"),a=A(i,1/3),e=y((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(i=a==1/0?"5e"+e:(i=a.toExponential()).slice(0,i.indexOf("e")+1)+e)).s=u.s),s=(e=h.precision)+3;;)if(c=(l=(o=r).times(o).times(o)).plus(u),r=I(c.plus(u).times(o),c.plus(l),s+2,1),k(o.d).slice(0,s)===(i=k(r.d)).slice(0,s)){if("9999"!=(i=i.slice(s-3,s+1))&&(n||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(L(r,e+1,1),t=!r.times(r).times(r).eq(u));break}if(!n&&(L(o,e+1,0),o.times(o).times(o).eq(u))){r=o;break}s+=4,n=1}return p=!0,L(r,e,h.rounding,t)},C.decimalPlaces=C.dp=function(){var e,t=this.d,i=NaN;if(t){if(i=((e=t.length-1)-y(this.e/M))*M,e=t[e])for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i},C.dividedBy=C.div=function(e){return I(this,new this.constructor(e))},C.dividedToIntegerBy=C.divToInt=function(e){var t=this.constructor;return L(I(this,new t(e),0,1,1),t.precision,t.rounding)},C.equals=C.eq=function(e){return 0===this.cmp(e)},C.floor=function(){return L(new this.constructor(this),this.e+1,3)},C.greaterThan=C.gt=function(e){return this.cmp(e)>0},C.greaterThanOrEqualTo=C.gte=function(e){var t=this.cmp(e);return 1==t||0===t},C.hyperbolicCosine=C.cosh=function(){var e,t,i,r,n,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;i=s.precision,r=s.rounding,s.precision=i+Math.max(a.e,a.sd())+4,s.rounding=1,(n=a.d.length)<32?t=(1/K(4,e=Math.ceil(n/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=J(s,1,a.times(t),new s(1),!0);for(var l,c=e,u=new s(8);c--;)l=a.times(a),a=o.minus(l.times(u.minus(l.times(u))));return L(a,s.precision=i,s.rounding=r,!0)},C.hyperbolicSine=C.sinh=function(){var e,t,i,r,n=this,a=n.constructor;if(!n.isFinite()||n.isZero())return new a(n);if(t=a.precision,i=a.rounding,a.precision=t+Math.max(n.e,n.sd())+4,a.rounding=1,(r=n.d.length)<3)n=J(a,2,n,n,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,n=J(a,2,n=n.times(1/K(5,e)),n,!0);for(var s,o=new a(5),l=new a(16),c=new a(20);e--;)s=n.times(n),n=n.times(o.plus(s.times(l.times(s).plus(c))))}return a.precision=t,a.rounding=i,L(n,t,i,!0)},C.hyperbolicTangent=C.tanh=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,I(i.sinh(),i.cosh(),r.precision=e,r.rounding=t)):new r(i.s)},C.inverseCosine=C.acos=function(){var e,t=this,i=t.constructor,r=t.abs().cmp(1),n=i.precision,a=i.rounding;return-1!==r?0===r?t.isNeg()?G(i,n,a):new i(0):new i(NaN):t.isZero()?G(i,n+4,a).times(.5):(i.precision=n+6,i.rounding=1,t=t.asin(),e=G(i,n+4,a).times(.5),i.precision=n,i.rounding=a,e.minus(t))},C.inverseHyperbolicCosine=C.acosh=function(){var e,t,i=this,r=i.constructor;return i.lte(1)?new r(i.eq(1)?0:NaN):i.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(i.e),i.sd())+4,r.rounding=1,p=!1,i=i.times(i).minus(1).sqrt().plus(i),p=!0,r.precision=e,r.rounding=t,i.ln()):new r(i)},C.inverseHyperbolicSine=C.asinh=function(){var e,t,i=this,r=i.constructor;return!i.isFinite()||i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,r.rounding=1,p=!1,i=i.times(i).plus(1).sqrt().plus(i),p=!0,r.precision=e,r.rounding=t,i.ln())},C.inverseHyperbolicTangent=C.atanh=function(){var e,t,i,r,n=this,a=n.constructor;return n.isFinite()?n.e>=0?new a(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=a.precision,t=a.rounding,r=n.sd(),Math.max(r,e)<2*-n.e-1?L(new a(n),e,t,!0):(a.precision=i=r-n.e,n=I(n.plus(1),new a(1).minus(n),i+e,1),a.precision=e+4,a.rounding=1,n=n.ln(),a.precision=e,a.rounding=t,n.times(.5))):new a(NaN)},C.inverseSine=C.asin=function(){var e,t,i,r,n=this,a=n.constructor;return n.isZero()?new a(n):(t=n.abs().cmp(1),i=a.precision,r=a.rounding,-1!==t?0===t?((e=G(a,i+4,r).times(.5)).s=n.s,e):new a(NaN):(a.precision=i+6,a.rounding=1,n=n.div(new a(1).minus(n.times(n)).sqrt().plus(1)).atan(),a.precision=i,a.rounding=r,n.times(2)))},C.inverseTangent=C.atan=function(){var e,t,i,r,n,a,s,o,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&h+4<=P)return(s=G(u,h+4,d).times(.25)).s=c.s,s}else{if(!c.s)return new u(NaN);if(h+4<=P)return(s=G(u,h+4,d).times(.5)).s=c.s,s}for(u.precision=o=h+10,u.rounding=1,e=i=Math.min(28,o/M+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(p=!1,t=Math.ceil(o/M),r=1,l=c.times(c),s=new u(c),n=c;-1!==e;)if(n=n.times(l),a=s.minus(n.div(r+=2)),n=n.times(l),void 0!==(s=a.plus(n.div(r+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;);return i&&(s=s.times(2<<i-1)),p=!0,L(s,u.precision=h,u.rounding=d,!0)},C.isFinite=function(){return!!this.d},C.isInteger=C.isInt=function(){return!!this.d&&y(this.e/M)>this.d.length-2},C.isNaN=function(){return!this.s},C.isNegative=C.isNeg=function(){return this.s<0},C.isPositive=C.isPos=function(){return this.s>0},C.isZero=function(){return!!this.d&&0===this.d[0]},C.lessThan=C.lt=function(e){return this.cmp(e)<0},C.lessThanOrEqualTo=C.lte=function(e){return this.cmp(e)<1},C.logarithm=C.log=function(e){var t,i,r,n,a,s,o,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(null==e)e=new u(10),t=!0;else{if(i=(e=new u(e)).d,e.s<0||!i||!i[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(i=c.d,c.s<0||!i||!i[0]||c.eq(1))return new u(i&&!i[0]?-1/0:1!=c.s?NaN:i?0:1/0);if(t)if(i.length>1)a=!0;else{for(n=i[0];n%10==0;)n/=10;a=1!==n}if(p=!1,s=Y(c,o=h+5),r=t?F(u,o+10):Y(e,o),D((l=I(s,r,o,1)).d,n=h,d))do{if(s=Y(c,o+=10),r=t?F(u,o+10):Y(e,o),l=I(s,r,o,1),!a){+k(l.d).slice(n+1,n+15)+1==1e14&&(l=L(l,h+1,0));break}}while(D(l.d,n+=10,d));return p=!0,L(l,h,d)},C.minus=C.sub=function(e){var t,i,r,n,a,s,o,l,c,u,h,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,d=e.d,o=m.precision,l=m.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new m(3===l?-0:0);e=new m(f)}return p?L(e,o,l):e}if(i=y(e.e/M),u=y(f.e/M),c=c.slice(),a=u-i){for((h=a<0)?(t=c,a=-a,s=d.length):(t=d,i=u,s=c.length),a>(r=Math.max(Math.ceil(o/M),s)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((h=(r=c.length)<(s=d.length))&&(s=r),r=0;r<s;r++)if(c[r]!=d[r]){h=c[r]<d[r];break}a=0}for(h&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,r=d.length-s;r>0;--r)c[s++]=0;for(r=d.length;r>a;){if(c[--r]<d[r]){for(n=r;n&&0===c[--n];)c[n]=x-1;--c[n],c[r]+=x}c[r]-=d[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--i;return c[0]?(e.d=c,e.e=V(c,i),p?L(e,o,l):e):new m(3===l?-0:0)},C.modulo=C.mod=function(e){var t,i=this,r=i.constructor;return e=new r(e),!i.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||i.d&&!i.d[0]?L(new r(i),r.precision,r.rounding):(p=!1,9==r.modulo?(t=I(i,e.abs(),0,3,1)).s*=e.s:t=I(i,e,0,r.modulo,1),t=t.times(e),p=!0,i.minus(t))},C.naturalExponential=C.exp=function(){return $(this)},C.naturalLogarithm=C.ln=function(){return Y(this)},C.negated=C.neg=function(){var e=new this.constructor(this);return e.s=-e.s,L(e)},C.plus=C.add=function(e){var t,i,r,n,a,s,o,l,c,u,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,u=e.d,o=d.precision,l=d.rounding,!c[0]||!u[0])return u[0]||(e=new d(h)),p?L(e,o,l):e;if(a=y(h.e/M),r=y(e.e/M),c=c.slice(),n=a-r){for(n<0?(i=c,n=-n,s=u.length):(i=u,r=a,s=c.length),n>(s=(a=Math.ceil(o/M))>s?a+1:s+1)&&(n=s,i.length=1),i.reverse();n--;)i.push(0);i.reverse()}for((s=c.length)-(n=u.length)<0&&(n=s,i=u,u=c,c=i),t=0;n;)t=(c[--n]=c[n]+u[n]+t)/x|0,c[n]%=x;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=V(c,r),p?L(e,o,l):e},C.precision=C.sd=function(e){var t,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return i.d?(t=B(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t},C.round=function(){var e=this,t=e.constructor;return L(new t(e),e.e+1,t.rounding)},C.sine=C.sin=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+Math.max(i.e,i.sd())+M,r.rounding=1,i=function(e,t){var i,r=t.d.length;if(r<3)return t.isZero()?t:J(e,2,t,t);i=(i=1.4*Math.sqrt(r))>16?16:0|i,t=J(e,2,t=t.times(1/K(5,i)),t);for(var n,a=new e(5),s=new e(16),o=new e(20);i--;)n=t.times(t),t=t.times(a.plus(n.times(s.times(n).minus(o))));return t}(r,Q(r,i)),r.precision=e,r.rounding=t,L(o>2?i.neg():i,e,t,!0)):new r(NaN)},C.squareRoot=C.sqrt=function(){var e,t,i,r,n,a,s=this,o=s.d,l=s.e,c=s.s,u=s.constructor;if(1!==c||!o||!o[0])return new u(!c||c<0&&(!o||o[0])?NaN:o?s:1/0);for(p=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=k(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=y((l+1)/2)-(l<0||l%2),r=new u(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new u(c.toString()),i=(l=u.precision)+3;;)if(r=(a=r).plus(I(s,a,i+2,1)).times(.5),k(a.d).slice(0,i)===(t=k(r.d)).slice(0,i)){if("9999"!=(t=t.slice(i-3,i+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(L(r,l+1,1),e=!r.times(r).eq(s));break}if(!n&&(L(a,l+1,0),a.times(a).eq(s))){r=a;break}i+=4,n=1}return p=!0,L(r,l,u.rounding,e)},C.tangent=C.tan=function(){var e,t,i=this,r=i.constructor;return i.isFinite()?i.isZero()?new r(i):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(i=i.sin()).s=1,i=I(i,new r(1).minus(i.times(i)).sqrt(),e+10,0),r.precision=e,r.rounding=t,L(2==o||4==o?i.neg():i,e,t,!0)):new r(NaN)},C.times=C.mul=function(e){var t,i,r,n,a,s,o,l,c,u=this,h=u.constructor,d=u.d,f=(e=new h(e)).d;if(e.s*=u.s,!(d&&d[0]&&f&&f[0]))return new h(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(i=y(u.e/M)+y(e.e/M),(l=d.length)<(c=f.length)&&(a=d,d=f,f=a,s=l,l=c,c=s),a=[],r=s=l+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,n=l+r;n>r;)o=a[n]+f[r]*d[n-r-1]+t,a[n--]=o%x|0,t=o/x|0;a[n]=(a[n]+t)%x|0}for(;!a[--s];)a.pop();return t?++i:a.shift(),e.d=a,e.e=V(a,i),p?L(e,h.precision,h.rounding):e},C.toBinary=function(e,t){return ee(this,2,e,t)},C.toDecimalPlaces=C.toDP=function(e,t){var i=this,r=i.constructor;return i=new r(i),void 0===e?i:(O(e,0,c),void 0===t?t=r.rounding:O(t,0,8),L(i,e+i.e+1,t))},C.toExponential=function(e,t){var i,r=this,n=r.constructor;return void 0===e?i=U(r,!0):(O(e,0,c),void 0===t?t=n.rounding:O(t,0,8),i=U(r=L(new n(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+i:i},C.toFixed=function(e,t){var i,r,n=this,a=n.constructor;return void 0===e?i=U(n):(O(e,0,c),void 0===t?t=a.rounding:O(t,0,8),i=U(r=L(new a(n),e+n.e+1,t),!1,e+r.e+1)),n.isNeg()&&!n.isZero()?"-"+i:i},C.toFraction=function(e){var t,i,r,n,a,s,o,l,c,u,h,d,f=this,m=f.d,b=f.constructor;if(!m)return new b(f);if(c=i=new b(1),r=l=new b(0),s=(a=(t=new b(r)).e=B(m)-f.e-1)%M,t.d[0]=A(10,s<0?M+s:s),null==e)e=a>0?t:c;else{if(!(o=new b(e)).isInt()||o.lt(c))throw Error(g+o);e=o.gt(t)?a>0?t:c:o}for(p=!1,o=new b(k(m)),u=b.precision,b.precision=a=m.length*M*2;h=I(o,t,0,1,1),1!=(n=i.plus(h.times(r))).cmp(e);)i=r,r=n,n=c,c=l.plus(h.times(n)),l=n,n=t,t=o.minus(h.times(n)),o=n;return n=I(e.minus(i),r,0,1,1),l=l.plus(n.times(c)),i=i.plus(n.times(r)),l.s=c.s=f.s,d=I(c,r,a,1).minus(f).abs().cmp(I(l,i,a,1).minus(f).abs())<1?[c,r]:[l,i],b.precision=u,p=!0,d},C.toHexadecimal=C.toHex=function(e,t){return ee(this,16,e,t)},C.toNearest=function(e,t){var i=this,r=i.constructor;if(i=new r(i),null==e){if(!i.d)return i;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:O(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(p=!1,i=I(i,e,0,t,1).times(e),p=!0,L(i)):(e.s=i.s,i=e),i},C.toNumber=function(){return+this},C.toOctal=function(e,t){return ee(this,8,e,t)},C.toPower=C.pow=function(e){var t,i,r,n,a,s,o=this,l=o.constructor,c=+(e=new l(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new l(A(+o,c));if((o=new l(o)).eq(1))return o;if(r=l.precision,a=l.rounding,e.eq(1))return L(o,r,a);if((t=y(e.e/M))>=e.d.length-1&&(i=c<0?-c:c)<=9007199254740991)return n=z(l,o,i,r),e.s<0?new l(1).div(n):L(n,r,a);if((s=o.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o}return(t=0!=(i=A(+o,c))&&isFinite(i)?new l(i+"").e:y(c*(Math.log("0."+k(o.d))/Math.LN10+o.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?s/0:0):(p=!1,l.rounding=o.s=1,i=Math.min(12,(t+"").length),(n=$(e.times(Y(o,r+i)),r)).d&&D((n=L(n,r+5,1)).d,r,a)&&(t=r+10,+k((n=L($(e.times(Y(o,t+i)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(n=L(n,r+1,0))),n.s=s,p=!0,l.rounding=a,L(n,r,a))},C.toPrecision=function(e,t){var i,r=this,n=r.constructor;return void 0===e?i=U(r,r.e<=n.toExpNeg||r.e>=n.toExpPos):(O(e,1,c),void 0===t?t=n.rounding:O(t,0,8),i=U(r=L(new n(r),e,t),e<=r.e||r.e<=n.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+i:i},C.toSignificantDigits=C.toSD=function(e,t){var i=this.constructor;return void 0===e?(e=i.precision,t=i.rounding):(O(e,1,c),void 0===t?t=i.rounding:O(t,0,8)),L(new i(this),e,t)},C.toString=function(){var e=this,t=e.constructor,i=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i},C.truncated=C.trunc=function(){return L(new this.constructor(this),this.e+1,1)},C.valueOf=C.toJSON=function(){var e=this,t=e.constructor,i=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};var I=function(){function e(e,t,i){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%i|0,n=r/i|0;return n&&e.unshift(n),e}function t(e,t,i,r){var n,a;if(i!=r)a=i>r?1:-1;else for(n=a=0;n<i;n++)if(e[n]!=t[n]){a=e[n]>t[n]?1:-1;break}return a}function i(e,t,i,r){for(var n=0;i--;)e[i]-=n,n=e[i]<t[i]?1:0,e[i]=n*r+e[i]-t[i];for(;!e[0]&&e.length>1;)e.shift()}return function(r,n,a,o,l,c){var u,h,d,f,p,m,g,b,v,_,A,E,w,S,T,R,P,C,k,O,D=r.constructor,N=r.s==n.s?1:-1,I=r.d,U=n.d;if(!(I&&I[0]&&U&&U[0]))return new D(r.s&&n.s&&(I?!U||I[0]!=U[0]:U)?I&&0==I[0]||!U?0*N:N/0:NaN);for(c?(p=1,h=r.e-n.e):(c=x,p=M,h=y(r.e/p)-y(n.e/p)),k=U.length,P=I.length,_=(v=new D(N)).d=[],d=0;U[d]==(I[d]||0);d++);if(U[d]>(I[d]||0)&&h--,null==a?(S=a=D.precision,o=D.rounding):S=l?a+(r.e-n.e)+1:a,S<0)_.push(1),m=!0;else{if(S=S/p+2|0,d=0,1==k){for(f=0,U=U[0],S++;(d<P||f)&&S--;d++)T=f*c+(I[d]||0),_[d]=T/U|0,f=T%U|0;m=f||d<P}else{for((f=c/(U[0]+1)|0)>1&&(U=e(U,f,c),I=e(I,f,c),k=U.length,P=I.length),R=k,E=(A=I.slice(0,k)).length;E<k;)A[E++]=0;(O=U.slice()).unshift(0),C=U[0],U[1]>=c/2&&++C;do{f=0,(u=t(U,A,k,E))<0?(w=A[0],k!=E&&(w=w*c+(A[1]||0)),(f=w/C|0)>1?(f>=c&&(f=c-1),1==(u=t(g=e(U,f,c),A,b=g.length,E=A.length))&&(f--,i(g,k<b?O:U,b,c))):(0==f&&(u=f=1),g=U.slice()),(b=g.length)<E&&g.unshift(0),i(A,g,E,c),-1==u&&(u=t(U,A,k,E=A.length))<1&&(f++,i(A,k<E?O:U,E,c)),E=A.length):0===u&&(f++,A=[0]),_[d++]=f,u&&A[0]?A[E++]=I[R]||0:(A=[I[R]],E=1)}while((R++<P||void 0!==A[0])&&S--);m=void 0!==A[0]}_[0]||_.shift()}if(1==p)v.e=h,s=m;else{for(d=1,f=_[0];f>=10;f/=10)d++;v.e=d+h*p-1,L(v,l?a+v.e+1:a,o,m)}return v}}();function L(e,t,i,r){var n,a,s,o,l,c,u,h,d,f=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(n=1,o=h[0];o>=10;o/=10)n++;if((a=t-n)<0)a+=M,s=t,l=(u=h[d=0])/A(10,n-s-1)%10|0;else if((d=Math.ceil((a+1)/M))>=(o=h.length)){if(!r)break e;for(;o++<=d;)h.push(0);u=l=0,n=1,s=(a%=M)-M+1}else{for(u=o=h[d],n=1;o>=10;o/=10)n++;l=(s=(a%=M)-M+n)<0?0:u/A(10,n-s-1)%10|0}if(r=r||t<0||void 0!==h[d+1]||(s<0?u:u%A(10,n-s-1)),c=i<4?(l||r)&&(0==i||i==(e.s<0?3:2)):l>5||5==l&&(4==i||r||6==i&&(a>0?s>0?u/A(10,n-s):0:h[d-1])%10&1||i==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=A(10,(M-t%M)%M),e.e=-t||0):h[0]=e.e=0,e;if(0==a?(h.length=d,o=1,d--):(h.length=d+1,o=A(10,M-a),h[d]=s>0?(u/A(10,n-s)%A(10,s)|0)*o:0),c)for(;;){if(0==d){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(e.e++,h[0]==x&&(h[0]=1));break}if(h[d]+=o,h[d]!=x)break;h[d--]=0,o=1}for(a=h.length;0===h[--a];)h.pop()}return p&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function U(e,t,i){if(!e.isFinite())return X(e);var r,n=e.e,a=k(e.d),s=a.length;return t?(i&&(r=i-s)>0?a=a.charAt(0)+"."+a.slice(1)+j(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):n<0?(a="0."+j(-n-1)+a,i&&(r=i-s)>0&&(a+=j(r))):n>=s?(a+=j(n+1-s),i&&(r=i-n-1)>0&&(a=a+"."+j(r))):((r=n+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),i&&(r=i-s)>0&&(n+1===s&&(a+="."),a+=j(r))),a}function V(e,t){var i=e[0];for(t*=M;i>=10;i/=10)t++;return t}function F(e,t,i){if(t>R)throw p=!0,i&&(e.precision=i),Error(b);return L(new e(h),t,1,!0)}function G(e,t,i){if(t>P)throw Error(b);return L(new e(d),t,i,!0)}function B(e){var t=e.length-1,i=t*M+1;if(t=e[t]){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function j(e){for(var t="";e--;)t+="0";return t}function z(e,t,i,r){var n,a=new e(1),s=Math.ceil(r/M+4);for(p=!1;;){if(i%2&&te((a=a.times(t)).d,s)&&(n=!0),0===(i=y(i/2))){i=a.d.length-1,n&&0===a.d[i]&&++a.d[i];break}te((t=t.times(t)).d,s)}return p=!0,a}function H(e){return 1&e.d[e.d.length-1]}function W(e,t,i){for(var r,n=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){n=r;break}n[i](r)&&(n=r)}return n}function $(e,t){var i,r,n,a,s,o,l,c=0,u=0,h=0,d=e.constructor,f=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(p=!1,l=m):l=t,o=new d(.03125);e.e>-2;)e=e.times(o),h+=5;for(l+=r=Math.log(A(2,h))/Math.LN10*2+5|0,i=a=s=new d(1),d.precision=l;;){if(a=L(a.times(e),l,1),i=i.times(++u),k((o=s.plus(I(a,i,l,1))).d).slice(0,l)===k(s.d).slice(0,l)){for(n=h;n--;)s=L(s.times(s),l,1);if(null!=t)return d.precision=m,s;if(!(c<3&&D(s.d,l-r,f,c)))return L(s,d.precision=m,f,p=!0);d.precision=l+=10,i=a=o=new d(1),u=0,c++}s=o}}function Y(e,t){var i,r,n,a,s,o,l,c,u,h,d,f=1,m=e,g=m.d,b=m.constructor,v=b.rounding,_=b.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new b(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==t?(p=!1,u=_):u=t,b.precision=u+=10,r=(i=k(g)).charAt(0),!(Math.abs(a=m.e)<15e14))return c=F(b,u+2,_).times(a+""),m=Y(new b(r+"."+i.slice(1)),u-10).plus(c),b.precision=_,null==t?L(m,_,v,p=!0):m;for(;r<7&&1!=r||1==r&&i.charAt(1)>3;)r=(i=k((m=m.times(e)).d)).charAt(0),f++;for(a=m.e,r>1?(m=new b("0."+i),a++):m=new b(r+"."+i.slice(1)),h=m,l=s=m=I(m.minus(1),m.plus(1),u,1),d=L(m.times(m),u,1),n=3;;){if(s=L(s.times(d),u,1),k((c=l.plus(I(s,new b(n),u,1))).d).slice(0,u)===k(l.d).slice(0,u)){if(l=l.times(2),0!==a&&(l=l.plus(F(b,u+2,_).times(a+""))),l=I(l,new b(f),u,1),null!=t)return b.precision=_,l;if(!D(l.d,u-10,v,o))return L(l,b.precision=_,v,p=!0);b.precision=u+=10,c=s=m=I(h.minus(1),h.plus(1),u,1),d=L(m.times(m),u,1),n=o=1}l=c,n+=2}}function X(e){return String(e.s*e.s/0)}function q(e,t){var i,r,n;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(i<0&&(i=r),i+=+t.slice(r+1),t=t.substring(0,r)):i<0&&(i=t.length),r=0;48===t.charCodeAt(r);r++);for(n=t.length;48===t.charCodeAt(n-1);--n);if(t=t.slice(r,n)){if(n-=r,e.e=i=i-r-1,e.d=[],r=(i+1)%M,i<0&&(r+=M),r<n){for(r&&e.d.push(+t.slice(0,r)),n-=M;r<n;)e.d.push(+t.slice(r,r+=M));t=t.slice(r),r=M-t.length}else r-=n;for(;r--;)t+="0";e.d.push(+t),p&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Z(e,t){var i,r,n,s,o,l,c,u,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),T.test(t))return q(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(t))i=16,t=t.toLowerCase();else if(E.test(t))i=2;else{if(!S.test(t))throw Error(g+t);i=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(l=(t=t.replace(".","")).length)-s,n=z(r,new r(i),s,2*s)),s=h=(u=N(t,i,x)).length-1;0===u[s];--s)u.pop();return s<0?new r(0*e.s):(e.e=V(u,h),e.d=u,p=!1,o&&(e=I(e,n,4*l)),c&&(e=e.times(Math.abs(c)<54?A(2,c):a.pow(2,c))),p=!0,e)}function J(e,t,i,r,n){var a,s,o,l,c=e.precision,u=Math.ceil(c/M);for(p=!1,l=i.times(i),o=new e(r);;){if(s=I(o.times(l),new e(t++*t++),c,1),o=n?r.plus(s):r.minus(s),r=I(s.times(l),new e(t++*t++),c,1),void 0!==(s=o.plus(r)).d[u]){for(a=u;s.d[a]===o.d[a]&&a--;);if(-1==a)break}a=o,o=r,r=s,s=a}return p=!0,s.d.length=u+1,s}function K(e,t){for(var i=e;--t;)i*=e;return i}function Q(e,t){var i,r=t.s<0,n=G(e,e.precision,1),a=n.times(.5);if((t=t.abs()).lte(a))return o=r?4:1,t;if((i=t.divToInt(n)).isZero())o=r?3:2;else{if((t=t.minus(i.times(n))).lte(a))return o=H(i)?r?2:3:r?4:1,t;o=H(i)?r?1:4:r?3:2}return t.minus(n).abs()}function ee(e,t,i,r){var n,a,o,l,h,d,f,p,m,g=e.constructor,b=void 0!==i;if(b?(O(i,1,c),void 0===r?r=g.rounding:O(r,0,8)):(i=g.precision,r=g.rounding),e.isFinite()){for(b?(n=2,16==t?i=4*i-3:8==t&&(i=3*i-2)):n=t,(o=(f=U(e)).indexOf("."))>=0&&(f=f.replace(".",""),(m=new g(1)).e=f.length-o,m.d=N(U(m),10,n),m.e=m.d.length),a=h=(p=N(f,10,n)).length;0==p[--h];)p.pop();if(p[0]){if(o<0?a--:((e=new g(e)).d=p,e.e=a,p=(e=I(e,m,i,r,0,n)).d,a=e.e,d=s),o=p[i],l=n/2,d=d||void 0!==p[i+1],d=r<4?(void 0!==o||d)&&(0===r||r===(e.s<0?3:2)):o>l||o===l&&(4===r||d||6===r&&1&p[i-1]||r===(e.s<0?8:7)),p.length=i,d)for(;++p[--i]>n-1;)p[i]=0,i||(++a,p.unshift(1));for(h=p.length;!p[h-1];--h);for(o=0,f="";o<h;o++)f+=u.charAt(p[o]);if(b){if(h>1)if(16==t||8==t){for(o=16==t?4:3,--h;h%o;h++)f+="0";for(h=(p=N(f,n,t)).length;!p[h-1];--h);for(o=1,f="1.";o<h;o++)f+=u.charAt(p[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>h)for(a-=h;a--;)f+="0";else a<h&&(f=f.slice(0,a)+"."+f.slice(a))}else f=b?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=X(e);return e.s<0?"-"+f:f}function te(e,t){if(e.length>t)return e.length=t,!0}function ie(e){return new this(e).abs()}function re(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function ae(e,t){return new this(e).plus(t)}function se(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ce(e){return new this(e).atanh()}function ue(e,t){e=new this(e),t=new this(t);var i,r=this.precision,n=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(i=t.s<0?G(this,r,n):new this(0)).s=e.s:!e.d||t.isZero()?(i=G(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,i=this.atan(I(e,t,a,1)),t=G(this,a,1),this.precision=r,this.rounding=n,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(I(e,t,a,1)):(i=G(this,a,1).times(t.s>0?.25:.75)).s=e.s:i=new this(NaN),i}function he(e){return new this(e).cbrt()}function de(e){return L(e=new this(e),e.e+1,2)}function fe(e,t,i){return new this(e).clamp(t,i)}function pe(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,i,r,n=!0===e.defaults,a=["precision",1,c,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(i=a[t],n&&(this[i]=f[i]),void 0!==(r=e[i])){if(!(y(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(g+i+": "+r);this[i]=r}if(i="crypto",n&&(this[i]=f[i]),void 0!==(r=e[i])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(g+i+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[i]=!0}else this[i]=!1}return this}function me(e){return new this(e).cos()}function ge(e){return new this(e).cosh()}function be(e,t){return new this(e).div(t)}function ve(e){return new this(e).exp()}function _e(e){return L(e=new this(e),e.e+1,3)}function ye(){var e,t,i=new this(0);for(p=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return p=!0,new this(1/0);i=t}return p=!0,i.sqrt()}function Ae(e){return e instanceof a||e&&e.toStringTag===_||!1}function Ee(e){return new this(e).ln()}function we(e,t){return new this(e).log(t)}function Se(e){return new this(e).log(2)}function Te(e){return new this(e).log(10)}function xe(){return W(this,arguments,"lt")}function Me(){return W(this,arguments,"gt")}function Re(e,t){return new this(e).mod(t)}function Pe(e,t){return new this(e).mul(t)}function Ce(e,t){return new this(e).pow(t)}function ke(e){var t,i,r,n,a=0,s=new this(1),o=[];if(void 0===e?e=this.precision:O(e,1,c),r=Math.ceil(e/M),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(n=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=n%1e7;else{if(!crypto.randomBytes)throw Error(v);for(t=crypto.randomBytes(r*=4);a<r;)(n=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(n%1e7),a+=4);a=r/4}else for(;a<r;)o[a++]=1e7*Math.random()|0;for(r=o[--a],e%=M,r&&e&&(n=A(10,M-e),o[a]=(r/n|0)*n);0===o[a];a--)o.pop();if(a<0)i=0,o=[0];else{for(i=-1;0===o[0];i-=M)o.shift();for(r=1,n=o[0];n>=10;n/=10)r++;r<M&&(i-=M-r)}return s.e=i,s.d=o,s}function Oe(e){return L(e=new this(e),e.e+1,this.rounding)}function De(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ne(e){return new this(e).sin()}function Ie(e){return new this(e).sinh()}function Le(e){return new this(e).sqrt()}function Ue(e,t){return new this(e).sub(t)}function Ve(){var e=0,t=arguments,i=new this(t[e]);for(p=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return p=!0,L(i,this.precision,this.rounding)}function Fe(e){return new this(e).tan()}function Ge(e){return new this(e).tanh()}function Be(e){return L(e=new this(e),e.e+1,1)}(a=function e(t){var i,r,n;function a(e){var t,i,r,n=this;if(!(n instanceof a))return new a(e);if(n.constructor=a,Ae(e))return n.s=e.s,void(p?!e.d||e.e>a.maxE?(n.e=NaN,n.d=null):e.e<a.minE?(n.e=0,n.d=[0]):(n.e=e.e,n.d=e.d.slice()):(n.e=e.e,n.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return n.s=1/e<0?-1:1,n.e=0,void(n.d=[0]);if(e<0?(e=-e,n.s=-1):n.s=1,e===~~e&&e<1e7){for(t=0,i=e;i>=10;i/=10)t++;return void(p?t>a.maxE?(n.e=NaN,n.d=null):t<a.minE?(n.e=0,n.d=[0]):(n.e=t,n.d=[e]):(n.e=t,n.d=[e]))}return 0*e!=0?(e||(n.s=NaN),n.e=NaN,void(n.d=null)):q(n,e.toString())}if("string"!==r)throw Error(g+e);return 45===(i=e.charCodeAt(0))?(e=e.slice(1),n.s=-1):(43===i&&(e=e.slice(1)),n.s=1),T.test(e)?q(n,e):Z(n,e)}if(a.prototype=C,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=pe,a.clone=e,a.isDecimal=Ae,a.abs=ie,a.acos=re,a.acosh=ne,a.add=ae,a.asin=se,a.asinh=oe,a.atan=le,a.atanh=ce,a.atan2=ue,a.cbrt=he,a.ceil=de,a.clamp=fe,a.cos=me,a.cosh=ge,a.div=be,a.exp=ve,a.floor=_e,a.hypot=ye,a.ln=Ee,a.log=we,a.log10=Te,a.log2=Se,a.max=xe,a.min=Me,a.mod=Re,a.mul=Pe,a.pow=Ce,a.random=ke,a.round=Oe,a.sign=De,a.sin=Ne,a.sinh=Ie,a.sqrt=Le,a.sub=Ue,a.sum=Ve,a.tan=Fe,a.tanh=Ge,a.trunc=Be,void 0===t&&(t={}),t&&!0!==t.defaults)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<n.length;)t.hasOwnProperty(r=n[i++])||(t[r]=this[r]);return a.config(t),a}(f)).prototype.constructor=a,a.default=a.Decimal=a,h=new a(h),d=new a(d),void 0===(r=function(){return a}.call(t,i,t,e))||(e.exports=r)}()},665:(e,t,i)=>{"use strict";i.r(t),i.d(t,{deviceType:()=>b,primaryInput:()=>v,supportsPassiveEvents:()=>l,supportsPointerEvents:()=>c,supportsTouchEvents:()=>h});var r="undefined"!=typeof window?window:{screen:{},navigator:{}},n=(r.matchMedia||function(){return{matches:!1}}).bind(r),a=!1,s={get passive(){return a=!0}},o=function(){};r.addEventListener&&r.addEventListener("p",o,s),r.removeEventListener&&r.removeEventListener("p",o,!1);var l=a,c="PointerEvent"in r,u="ontouchstart"in r,h=u||"TouchEvent"in r&&n("(any-pointer: coarse)").matches,d=(r.navigator.maxTouchPoints||0)>0||h,f=r.navigator.userAgent||"",p=n("(pointer: coarse)").matches&&/iPad|Macintosh/.test(f)&&Math.min(r.screen.width||0,r.screen.height||0)>=768,m=(n("(pointer: coarse)").matches||!n("(pointer: fine)").matches&&u)&&!/Windows.*Firefox/.test(f),g=n("(any-pointer: fine)").matches||n("(any-hover: hover)").matches||p||!u,b=!d||!g&&m?d?"touchOnly":"mouseOnly":"hybrid",v="mouseOnly"===b?"mouse":"touchOnly"===b||m?"touch":"mouse"},5987:e=>{"use strict";var t={single_source_shortest_paths:function(e,i,r){var n={},a={};a[i]=0;var s,o,l,c,u,h,d,f=t.PriorityQueue.make();for(f.push(i,0);!f.empty();)for(l in o=(s=f.pop()).value,c=s.cost,u=e[o]||{})u.hasOwnProperty(l)&&(h=c+u[l],d=a[l],(void 0===a[l]||d>h)&&(a[l]=h,f.push(l,h),n[l]=o));if(void 0!==r&&void 0===a[r]){var p=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(p)}return n},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],r=t;r;)i.push(r),e[r],r=e[r];return i.reverse(),i},find_path:function(e,i,r){var n=t.single_source_shortest_paths(e,i,r);return t.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(e){var i,r=t.PriorityQueue,n={};for(i in e=e||{},r)r.hasOwnProperty(i)&&(n[i]=r[i]);return n.queue=[],n.sorter=e.sorter||r.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var i={value:e,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7856:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,i){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,i)}function i(e,r,n){return i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,i,r){var n=[null];n.push.apply(n,i);var a=new(Function.bind.apply(e,n));return r&&t(a,r.prototype),a},i.apply(null,arguments)}function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var a=Object.hasOwnProperty,s=Object.setPrototypeOf,o=Object.isFrozen,l=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,u=Object.freeze,h=Object.seal,d=Object.create,f="undefined"!=typeof Reflect&&Reflect,p=f.apply,m=f.construct;p||(p=function(e,t,i){return e.apply(t,i)}),u||(u=function(e){return e}),h||(h=function(e){return e}),m||(m=function(e,t){return i(e,r(t))});var g,b=R(Array.prototype.forEach),v=R(Array.prototype.pop),_=R(Array.prototype.push),y=R(String.prototype.toLowerCase),A=R(String.prototype.toString),E=R(String.prototype.match),w=R(String.prototype.replace),S=R(String.prototype.indexOf),T=R(String.prototype.trim),x=R(RegExp.prototype.test),M=(g=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m(g,t)});function R(e){return function(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return p(e,t,r)}}function P(e,t,i){i=i||y,s&&s(e,null);for(var r=t.length;r--;){var n=t[r];if("string"==typeof n){var a=i(n);a!==n&&(o(t)||(t[r]=a),n=a)}e[n]=!0}return e}function C(e){var t,i=d(null);for(t in e)!0===p(a,e,[t])&&(i[t]=e[t]);return i}function k(e,t){for(;null!==e;){var i=c(e,t);if(i){if(i.get)return R(i.get);if("function"==typeof i.value)return R(i.value)}e=l(e)}return function(e){return console.warn("fallback value for",e),null}}var O=u(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=u(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=u(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=u(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=u(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U=u(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),V=u(["#text"]),F=u(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=u(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B=u(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),j=u(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),z=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),H=h(/<%[\w\W]*|[\w\W]*%>/gm),W=h(/\${[\w\W]*}/gm),$=h(/^data-[\-\w.\u00B7-\uFFFF]/),Y=h(/^aria-[\-\w]+$/),X=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=h(/^(?:\w+script|data):/i),Z=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),J=h(/^html$/i),K=function(){return"undefined"==typeof window?null:window};return function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K(),n=function(e){return t(e)};if(n.version="2.4.5",n.removed=[],!i||!i.document||9!==i.document.nodeType)return n.isSupported=!1,n;var a=i.document,s=i.document,o=i.DocumentFragment,l=i.HTMLTemplateElement,c=i.Node,h=i.Element,d=i.NodeFilter,f=i.NamedNodeMap,p=void 0===f?i.NamedNodeMap||i.MozNamedAttrMap:f,m=i.HTMLFormElement,g=i.DOMParser,R=i.trustedTypes,Q=h.prototype,ee=k(Q,"cloneNode"),te=k(Q,"nextSibling"),ie=k(Q,"childNodes"),re=k(Q,"parentNode");if("function"==typeof l){var ne=s.createElement("template");ne.content&&ne.content.ownerDocument&&(s=ne.content.ownerDocument)}var ae=function(t,i){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var r=null,n="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(n)&&(r=i.currentScript.getAttribute(n));var a="dompurify"+(r?"#"+r:"");try{return t.createPolicy(a,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(R,a),se=ae?ae.createHTML(""):"",oe=s,le=oe.implementation,ce=oe.createNodeIterator,ue=oe.createDocumentFragment,he=oe.getElementsByTagName,de=a.importNode,fe={};try{fe=C(s).documentMode?s.documentMode:{}}catch(e){}var pe={};n.isSupported="function"==typeof re&&le&&void 0!==le.createHTMLDocument&&9!==fe;var me,ge,be=z,ve=H,_e=W,ye=$,Ae=Y,Ee=q,we=Z,Se=X,Te=null,xe=P({},[].concat(r(O),r(D),r(N),r(L),r(V))),Me=null,Re=P({},[].concat(r(F),r(G),r(B),r(j))),Pe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,ke=null,Oe=!0,De=!0,Ne=!1,Ie=!0,Le=!1,Ue=!1,Ve=!1,Fe=!1,Ge=!1,Be=!1,je=!1,ze=!0,He=!1,We=!0,$e=!1,Ye={},Xe=null,qe=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ze=null,Je=P({},["audio","video","img","source","image","track"]),Ke=null,Qe=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",rt=it,nt=!1,at=null,st=P({},[et,tt,it],A),ot=["application/xhtml+xml","text/html"],lt=null,ct=s.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},ht=function(t){lt&&lt===t||(t&&"object"===e(t)||(t={}),t=C(t),me=me=-1===ot.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===me?A:y,Te="ALLOWED_TAGS"in t?P({},t.ALLOWED_TAGS,ge):xe,Me="ALLOWED_ATTR"in t?P({},t.ALLOWED_ATTR,ge):Re,at="ALLOWED_NAMESPACES"in t?P({},t.ALLOWED_NAMESPACES,A):st,Ke="ADD_URI_SAFE_ATTR"in t?P(C(Qe),t.ADD_URI_SAFE_ATTR,ge):Qe,Ze="ADD_DATA_URI_TAGS"in t?P(C(Je),t.ADD_DATA_URI_TAGS,ge):Je,Xe="FORBID_CONTENTS"in t?P({},t.FORBID_CONTENTS,ge):qe,Ce="FORBID_TAGS"in t?P({},t.FORBID_TAGS,ge):{},ke="FORBID_ATTR"in t?P({},t.FORBID_ATTR,ge):{},Ye="USE_PROFILES"in t&&t.USE_PROFILES,Oe=!1!==t.ALLOW_ARIA_ATTR,De=!1!==t.ALLOW_DATA_ATTR,Ne=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Le=t.SAFE_FOR_TEMPLATES||!1,Ue=t.WHOLE_DOCUMENT||!1,Ge=t.RETURN_DOM||!1,Be=t.RETURN_DOM_FRAGMENT||!1,je=t.RETURN_TRUSTED_TYPE||!1,Fe=t.FORCE_BODY||!1,ze=!1!==t.SANITIZE_DOM,He=t.SANITIZE_NAMED_PROPS||!1,We=!1!==t.KEEP_CONTENT,$e=t.IN_PLACE||!1,Se=t.ALLOWED_URI_REGEXP||Se,rt=t.NAMESPACE||it,Pe=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ut(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pe.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ut(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pe.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Pe.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(De=!1),Be&&(Ge=!0),Ye&&(Te=P({},r(V)),Me=[],!0===Ye.html&&(P(Te,O),P(Me,F)),!0===Ye.svg&&(P(Te,D),P(Me,G),P(Me,j)),!0===Ye.svgFilters&&(P(Te,N),P(Me,G),P(Me,j)),!0===Ye.mathMl&&(P(Te,L),P(Me,B),P(Me,j))),t.ADD_TAGS&&(Te===xe&&(Te=C(Te)),P(Te,t.ADD_TAGS,ge)),t.ADD_ATTR&&(Me===Re&&(Me=C(Me)),P(Me,t.ADD_ATTR,ge)),t.ADD_URI_SAFE_ATTR&&P(Ke,t.ADD_URI_SAFE_ATTR,ge),t.FORBID_CONTENTS&&(Xe===qe&&(Xe=C(Xe)),P(Xe,t.FORBID_CONTENTS,ge)),We&&(Te["#text"]=!0),Ue&&P(Te,["html","head","body"]),Te.table&&(P(Te,["tbody"]),delete Ce.tbody),u&&u(t),lt=t)},dt=P({},["mi","mo","mn","ms","mtext"]),ft=P({},["foreignobject","desc","title","annotation-xml"]),pt=P({},["title","style","font","a","script"]),mt=P({},D);P(mt,N),P(mt,I);var gt=P({},L);P(gt,U);var bt=function(e){_(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=se}catch(t){e.remove()}}},vt=function(e,t){try{_(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){_(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Me[e])if(Ge||Be)try{bt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_t=function(e){var t,i;if(Fe)e="<remove></remove>"+e;else{var r=E(e,/^[\r\n\t ]+/);i=r&&r[0]}"application/xhtml+xml"===me&&rt===it&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var n=ae?ae.createHTML(e):e;if(rt===it)try{t=(new g).parseFromString(n,me)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(rt,"template",null);try{t.documentElement.innerHTML=nt?se:n}catch(e){}}var a=t.body||t.documentElement;return e&&i&&a.insertBefore(s.createTextNode(i),a.childNodes[0]||null),rt===it?he.call(t,Ue?"html":"body")[0]:Ue?t.documentElement:a},yt=function(e){return ce.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},At=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Et=function(e,t,i){pe[e]&&b(pe[e],(function(e){e.call(n,t,i,lt)}))},wt=function(e){var t,i;if(Et("beforeSanitizeElements",e,null),(i=e)instanceof m&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof p)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return bt(e),!0;if(x(/[\u0080-\uFFFF]/,e.nodeName))return bt(e),!0;var r=ge(e.nodeName);if(Et("uponSanitizeElement",e,{tagName:r,allowedTags:Te}),e.hasChildNodes()&&!At(e.firstElementChild)&&(!At(e.content)||!At(e.content.firstElementChild))&&x(/<[/\w]/g,e.innerHTML)&&x(/<[/\w]/g,e.textContent))return bt(e),!0;if("select"===r&&x(/<template/i,e.innerHTML))return bt(e),!0;if(!Te[r]||Ce[r]){if(!Ce[r]&&Tt(r)){if(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,r))return!1;if(Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(r))return!1}if(We&&!Xe[r]){var a=re(e)||e.parentNode,s=ie(e)||e.childNodes;if(s&&a)for(var o=s.length-1;o>=0;--o)a.insertBefore(ee(s[o],!0),te(e))}return bt(e),!0}return e instanceof h&&!function(e){var t=re(e);t&&t.tagName||(t={namespaceURI:rt,tagName:"template"});var i=y(e.tagName),r=y(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===it?"svg"===i:t.namespaceURI===et?"svg"===i&&("annotation-xml"===r||dt[r]):Boolean(mt[i]):e.namespaceURI===et?t.namespaceURI===it?"math"===i:t.namespaceURI===tt?"math"===i&&ft[r]:Boolean(gt[i]):e.namespaceURI===it?!(t.namespaceURI===tt&&!ft[r])&&!(t.namespaceURI===et&&!dt[r])&&!gt[i]&&(pt[i]||!mt[i]):!("application/xhtml+xml"!==me||!at[e.namespaceURI]))}(e)?(bt(e),!0):"noscript"!==r&&"noembed"!==r||!x(/<\/no(script|embed)/i,e.innerHTML)?(Le&&3===e.nodeType&&(t=e.textContent,t=w(t,be," "),t=w(t,ve," "),t=w(t,_e," "),e.textContent!==t&&(_(n.removed,{element:e.cloneNode()}),e.textContent=t)),Et("afterSanitizeElements",e,null),!1):(bt(e),!0)},St=function(e,t,i){if(ze&&("id"===t||"name"===t)&&(i in s||i in ct))return!1;if(De&&!ke[t]&&x(ye,t));else if(Oe&&x(Ae,t));else if(!Me[t]||ke[t]){if(!(Tt(e)&&(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,e)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(e))&&(Pe.attributeNameCheck instanceof RegExp&&x(Pe.attributeNameCheck,t)||Pe.attributeNameCheck instanceof Function&&Pe.attributeNameCheck(t))||"is"===t&&Pe.allowCustomizedBuiltInElements&&(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,i)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(i))))return!1}else if(Ke[t]);else if(x(Se,w(i,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==S(i,"data:")||!Ze[e])if(Ne&&!x(Ee,w(i,we,"")));else if(i)return!1;return!0},Tt=function(e){return e.indexOf("-")>0},xt=function(t){var i,r,a,s;Et("beforeSanitizeAttributes",t,null);var o=t.attributes;if(o){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me};for(s=o.length;s--;){var c=i=o[s],u=c.name,h=c.namespaceURI;if(r="value"===u?i.value:T(i.value),a=ge(u),l.attrName=a,l.attrValue=r,l.keepAttr=!0,l.forceKeepAttr=void 0,Et("uponSanitizeAttribute",t,l),r=l.attrValue,!l.forceKeepAttr&&(vt(u,t),l.keepAttr))if(Ie||!x(/\/>/i,r)){Le&&(r=w(r,be," "),r=w(r,ve," "),r=w(r,_e," "));var d=ge(t.nodeName);if(St(d,a,r)){if(!He||"id"!==a&&"name"!==a||(vt(u,t),r="user-content-"+r),ae&&"object"===e(R)&&"function"==typeof R.getAttributeType)if(h);else switch(R.getAttributeType(d,a)){case"TrustedHTML":r=ae.createHTML(r);break;case"TrustedScriptURL":r=ae.createScriptURL(r)}try{h?t.setAttributeNS(h,u,r):t.setAttribute(u,r),v(n.removed)}catch(e){}}}else vt(u,t)}Et("afterSanitizeAttributes",t,null)}},Mt=function e(t){var i,r=yt(t);for(Et("beforeSanitizeShadowDOM",t,null);i=r.nextNode();)Et("uponSanitizeShadowNode",i,null),wt(i)||(i.content instanceof o&&e(i.content),xt(i));Et("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(t){var r,s,l,u,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((nt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!At(t)){if("function"!=typeof t.toString)throw M("toString is not a function");if("string"!=typeof(t=t.toString()))throw M("dirty is not a string, aborting")}if(!n.isSupported){if("object"===e(i.toStaticHTML)||"function"==typeof i.toStaticHTML){if("string"==typeof t)return i.toStaticHTML(t);if(At(t))return i.toStaticHTML(t.outerHTML)}return t}if(Ve||ht(d),n.removed=[],"string"==typeof t&&($e=!1),$e){if(t.nodeName){var f=ge(t.nodeName);if(!Te[f]||Ce[f])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(s=(r=_t("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Ge&&!Le&&!Ue&&-1===t.indexOf("<"))return ae&&je?ae.createHTML(t):t;if(!(r=_t(t)))return Ge?null:je?se:""}r&&Fe&&bt(r.firstChild);for(var p=yt($e?t:r);l=p.nextNode();)3===l.nodeType&&l===u||wt(l)||(l.content instanceof o&&Mt(l.content),xt(l),u=l);if(u=null,$e)return t;if(Ge){if(Be)for(h=ue.call(r.ownerDocument);r.firstChild;)h.appendChild(r.firstChild);else h=r;return(Me.shadowroot||Me.shadowrootmod)&&(h=de.call(a,h,!0)),h}var m=Ue?r.outerHTML:r.innerHTML;return Ue&&Te["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&x(J,r.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+m),Le&&(m=w(m,be," "),m=w(m,ve," "),m=w(m,_e," ")),ae&&je?ae.createHTML(m):m},n.setConfig=function(e){ht(e),Ve=!0},n.clearConfig=function(){lt=null,Ve=!1},n.isValidAttribute=function(e,t,i){lt||ht({});var r=ge(e),n=ge(t);return St(r,n,i)},n.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],_(pe[e],t))},n.removeHook=function(e){if(pe[e])return v(pe[e])},n.removeHooks=function(e){pe[e]&&(pe[e]=[])},n.removeAllHooks=function(){pe={}},n}()}()},2378:e=>{"use strict";e.exports=function(e){for(var t=[],i=e.length,r=0;r<i;r++){var n=e.charCodeAt(r);if(n>=55296&&n<=56319&&i>r+1){var a=e.charCodeAt(r+1);a>=56320&&a<=57343&&(n=1024*(n-55296)+a-56320+65536,r+=1)}n<128?t.push(n):n<2048?(t.push(n>>6|192),t.push(63&n|128)):n<55296||n>=57344&&n<65536?(t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)):n>=65536&&n<=1114111?(t.push(n>>18|240),t.push(n>>12&63|128),t.push(n>>6&63|128),t.push(63&n|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},887:(e,t,i)=>{"use strict";i.r(t),i.d(t,{glMatrix:()=>r,mat2:()=>n,mat2d:()=>a,mat3:()=>s,mat4:()=>o,quat:()=>u,quat2:()=>h,vec2:()=>d,vec3:()=>l,vec4:()=>c});var r={};i.r(r),i.d(r,{ARRAY_TYPE:()=>p,EPSILON:()=>f,RANDOM:()=>m,equals:()=>_,setMatrixArrayType:()=>g,toRadian:()=>v});var n={};i.r(n),i.d(n,{LDU:()=>U,add:()=>V,adjoint:()=>R,clone:()=>A,copy:()=>E,create:()=>y,determinant:()=>P,equals:()=>B,exactEquals:()=>G,frob:()=>L,fromRotation:()=>D,fromScaling:()=>N,fromValues:()=>S,identity:()=>w,invert:()=>M,mul:()=>H,multiply:()=>C,multiplyScalar:()=>j,multiplyScalarAndAdd:()=>z,rotate:()=>k,scale:()=>O,set:()=>T,str:()=>I,sub:()=>W,subtract:()=>F,transpose:()=>x});var a={};i.r(a),i.d(a,{add:()=>ce,clone:()=>Y,copy:()=>X,create:()=>$,determinant:()=>Q,equals:()=>pe,exactEquals:()=>fe,frob:()=>le,fromRotation:()=>ne,fromScaling:()=>ae,fromTranslation:()=>se,fromValues:()=>Z,identity:()=>q,invert:()=>K,mul:()=>me,multiply:()=>ee,multiplyScalar:()=>he,multiplyScalarAndAdd:()=>de,rotate:()=>te,scale:()=>ie,set:()=>J,str:()=>oe,sub:()=>ge,subtract:()=>ue,translate:()=>re});var s={};i.r(s),i.d(s,{add:()=>Be,adjoint:()=>xe,clone:()=>_e,copy:()=>ye,create:()=>be,determinant:()=>Me,equals:()=>$e,exactEquals:()=>We,frob:()=>Ge,fromMat2d:()=>Ie,fromMat4:()=>ve,fromQuat:()=>Le,fromRotation:()=>De,fromScaling:()=>Ne,fromTranslation:()=>Oe,fromValues:()=>Ae,identity:()=>we,invert:()=>Te,mul:()=>Ye,multiply:()=>Re,multiplyScalar:()=>ze,multiplyScalarAndAdd:()=>He,normalFromMat4:()=>Ue,projection:()=>Ve,rotate:()=>Ce,scale:()=>ke,set:()=>Ee,str:()=>Fe,sub:()=>Xe,subtract:()=>je,translate:()=>Pe,transpose:()=>Se});var o={};i.r(o),i.d(o,{add:()=>Nt,adjoint:()=>rt,clone:()=>Ze,copy:()=>Je,create:()=>qe,determinant:()=>nt,equals:()=>Ft,exactEquals:()=>Vt,frob:()=>Dt,fromQuat:()=>Tt,fromQuat2:()=>_t,fromRotation:()=>pt,fromRotationTranslation:()=>vt,fromRotationTranslationScale:()=>wt,fromRotationTranslationScaleOrigin:()=>St,fromScaling:()=>ft,fromTranslation:()=>dt,fromValues:()=>Ke,fromXRotation:()=>mt,fromYRotation:()=>gt,fromZRotation:()=>bt,frustum:()=>xt,getRotation:()=>Et,getScaling:()=>At,getTranslation:()=>yt,identity:()=>et,invert:()=>it,lookAt:()=>Ct,mul:()=>Gt,multiply:()=>at,multiplyScalar:()=>Lt,multiplyScalarAndAdd:()=>Ut,ortho:()=>Pt,perspective:()=>Mt,perspectiveFromFieldOfView:()=>Rt,rotate:()=>lt,rotateX:()=>ct,rotateY:()=>ut,rotateZ:()=>ht,scale:()=>ot,set:()=>Qe,str:()=>Ot,sub:()=>Bt,subtract:()=>It,targetTo:()=>kt,translate:()=>st,transpose:()=>tt});var l={};i.r(l),i.d(l,{add:()=>Xt,angle:()=>wi,bezier:()=>mi,ceil:()=>Kt,clone:()=>zt,copy:()=>$t,create:()=>jt,cross:()=>di,dist:()=>Oi,distance:()=>ai,div:()=>ki,divide:()=>Jt,dot:()=>hi,equals:()=>Mi,exactEquals:()=>xi,floor:()=>Qt,forEach:()=>Li,fromValues:()=>Wt,hermite:()=>pi,inverse:()=>ci,len:()=>Ni,length:()=>Ht,lerp:()=>fi,max:()=>ti,min:()=>ei,mul:()=>Ci,multiply:()=>Zt,negate:()=>li,normalize:()=>ui,random:()=>gi,rotateX:()=>yi,rotateY:()=>Ai,rotateZ:()=>Ei,round:()=>ii,scale:()=>ri,scaleAndAdd:()=>ni,set:()=>Yt,sqrDist:()=>Di,sqrLen:()=>Ii,squaredDistance:()=>si,squaredLength:()=>oi,str:()=>Ti,sub:()=>Pi,subtract:()=>qt,transformMat3:()=>vi,transformMat4:()=>bi,transformQuat:()=>_i,zero:()=>Si});var c={};i.r(c),i.d(c,{add:()=>ji,ceil:()=>$i,clone:()=>Vi,copy:()=>Gi,create:()=>Ui,cross:()=>or,dist:()=>_r,distance:()=>Qi,div:()=>vr,divide:()=>Wi,dot:()=>sr,equals:()=>mr,exactEquals:()=>pr,floor:()=>Yi,forEach:()=>wr,fromValues:()=>Fi,inverse:()=>nr,len:()=>Ar,length:()=>tr,lerp:()=>lr,max:()=>qi,min:()=>Xi,mul:()=>br,multiply:()=>Hi,negate:()=>rr,normalize:()=>ar,random:()=>cr,round:()=>Zi,scale:()=>Ji,scaleAndAdd:()=>Ki,set:()=>Bi,sqrDist:()=>yr,sqrLen:()=>Er,squaredDistance:()=>er,squaredLength:()=>ir,str:()=>fr,sub:()=>gr,subtract:()=>zi,transformMat4:()=>ur,transformQuat:()=>hr,zero:()=>dr});var u={};i.r(u),i.d(u,{add:()=>en,calculateW:()=>Dr,clone:()=>Zr,conjugate:()=>Gr,copy:()=>Kr,create:()=>Sr,dot:()=>nn,equals:()=>dn,exactEquals:()=>hn,exp:()=>Nr,fromEuler:()=>jr,fromMat3:()=>Br,fromValues:()=>Jr,getAngle:()=>Rr,getAxisAngle:()=>Mr,identity:()=>Tr,invert:()=>Fr,len:()=>on,length:()=>sn,lerp:()=>an,ln:()=>Ir,mul:()=>tn,multiply:()=>Pr,normalize:()=>un,pow:()=>Lr,random:()=>Vr,rotateX:()=>Cr,rotateY:()=>kr,rotateZ:()=>Or,rotationTo:()=>fn,scale:()=>rn,set:()=>Qr,setAxes:()=>mn,setAxisAngle:()=>xr,slerp:()=>Ur,sqlerp:()=>pn,sqrLen:()=>cn,squaredLength:()=>ln,str:()=>zr});var h={};i.r(h),i.d(h,{add:()=>Fn,clone:()=>bn,conjugate:()=>$n,copy:()=>Sn,create:()=>gn,dot:()=>zn,equals:()=>ea,exactEquals:()=>Qn,fromMat4:()=>wn,fromRotation:()=>En,fromRotationTranslation:()=>yn,fromRotationTranslationValues:()=>_n,fromTranslation:()=>An,fromValues:()=>vn,getDual:()=>Rn,getReal:()=>Mn,getTranslation:()=>kn,identity:()=>Tn,invert:()=>Wn,len:()=>Xn,length:()=>Yn,lerp:()=>Hn,mul:()=>Bn,multiply:()=>Gn,normalize:()=>Jn,rotateAroundAxis:()=>Vn,rotateByQuatAppend:()=>Ln,rotateByQuatPrepend:()=>Un,rotateX:()=>Dn,rotateY:()=>Nn,rotateZ:()=>In,scale:()=>jn,set:()=>xn,setDual:()=>Cn,setReal:()=>Pn,sqrLen:()=>Zn,squaredLength:()=>qn,str:()=>Kn,translate:()=>On});var d={};i.r(d),i.d(d,{add:()=>sa,angle:()=>Da,ceil:()=>ua,clone:()=>ia,copy:()=>na,create:()=>ta,cross:()=>Ta,dist:()=>ja,distance:()=>ba,div:()=>Ba,divide:()=>ca,dot:()=>Sa,equals:()=>Ua,exactEquals:()=>La,floor:()=>ha,forEach:()=>Wa,fromValues:()=>ra,inverse:()=>Ea,len:()=>Va,length:()=>_a,lerp:()=>xa,max:()=>fa,min:()=>da,mul:()=>Ga,multiply:()=>la,negate:()=>Aa,normalize:()=>wa,random:()=>Ma,rotate:()=>Oa,round:()=>pa,scale:()=>ma,scaleAndAdd:()=>ga,set:()=>aa,sqrDist:()=>za,sqrLen:()=>Ha,squaredDistance:()=>va,squaredLength:()=>ya,str:()=>Ia,sub:()=>Fa,subtract:()=>oa,transformMat2:()=>Ra,transformMat2d:()=>Pa,transformMat3:()=>Ca,transformMat4:()=>ka,zero:()=>Na});var f=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function g(e){p=e}var b=Math.PI/180;function v(e){return e*b}function _(e,t){return Math.abs(e-t)<=f*Math.max(1,Math.abs(e),Math.abs(t))}function y(){var e=new p(4);return p!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function A(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function E(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function S(e,t,i,r){var n=new p(4);return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function T(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function x(e,t){if(e===t){var i=t[1];e[1]=t[2],e[2]=i}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function M(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i*a-n*r;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-n*s,e[3]=i*s,e):null}function R(e,t){var i=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=i,e}function P(e){return e[0]*e[3]-e[2]*e[1]}function C(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=r*o+a*l,e[1]=n*o+s*l,e[2]=r*c+a*u,e[3]=n*c+s*u,e}function k(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l+a*o,e[1]=n*l+s*o,e[2]=r*-o+a*l,e[3]=n*-o+s*l,e}function O(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=i[0],l=i[1];return e[0]=r*o,e[1]=n*o,e[2]=a*l,e[3]=s*l,e}function D(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e}function N(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function I(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function L(e){return Math.hypot(e[0],e[1],e[2],e[3])}function U(e,t,i,r){return e[2]=r[2]/r[0],i[0]=r[0],i[1]=r[1],i[3]=r[3]-e[2]*i[1],[e,t,i]}function V(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function F(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function G(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function B(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=t[0],o=t[1],l=t[2],c=t[3];return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))}function j(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function z(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var H=C,W=F;function $(){var e=new p(6);return p!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function Y(e){var t=new p(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function q(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Z(e,t,i,r,n,a){var s=new p(6);return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s[4]=n,s[5]=a,s}function J(e,t,i,r,n,a,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=a,e[5]=s,e}function K(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=i*a-r*n;return l?(l=1/l,e[0]=a*l,e[1]=-r*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*o-a*s)*l,e[5]=(r*s-i*o)*l,e):null}function Q(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1],h=i[2],d=i[3],f=i[4],p=i[5];return e[0]=r*c+a*u,e[1]=n*c+s*u,e[2]=r*h+a*d,e[3]=n*h+s*d,e[4]=r*f+a*p+o,e[5]=n*f+s*p+l,e}function te(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=Math.sin(i),u=Math.cos(i);return e[0]=r*u+a*c,e[1]=n*u+s*c,e[2]=r*-c+a*u,e[3]=n*-c+s*u,e[4]=o,e[5]=l,e}function ie(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1];return e[0]=r*c,e[1]=n*c,e[2]=a*u,e[3]=s*u,e[4]=o,e[5]=l,e}function re(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1];return e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=r*c+a*u+o,e[5]=n*c+s*u+l,e}function ne(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function ae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function se(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function oe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function le(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function ce(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function ue(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function he(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function de(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function fe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pe(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=t[0],c=t[1],u=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(i-l)<=f*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=f*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-p)<=f*Math.max(1,Math.abs(o),Math.abs(p))}var me=ee,ge=ue;function be(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function _e(e){var t=new p(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ae(e,t,i,r,n,a,s,o,l){var c=new p(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=r,c[4]=n,c[5]=a,c[6]=s,c[7]=o,c[8]=l,c}function Ee(e,t,i,r,n,a,s,o,l,c){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e}function we(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Se(e,t){if(e===t){var i=t[1],r=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Te(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=u*s-o*c,d=-u*a+o*l,f=c*a-s*l,p=i*h+r*d+n*f;return p?(p=1/p,e[0]=h*p,e[1]=(-u*r+n*c)*p,e[2]=(o*r-n*s)*p,e[3]=d*p,e[4]=(u*i-n*l)*p,e[5]=(-o*i+n*a)*p,e[6]=f*p,e[7]=(-c*i+r*l)*p,e[8]=(s*i-r*a)*p,e):null}function xe(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8];return e[0]=s*u-o*c,e[1]=n*c-r*u,e[2]=r*o-n*s,e[3]=o*l-a*u,e[4]=i*u-n*l,e[5]=n*a-i*o,e[6]=a*c-s*l,e[7]=r*l-i*c,e[8]=i*s-r*a,e}function Me(e){var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*(c*a-s*l)+i*(-c*n+s*o)+r*(l*n-a*o)}function Re(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],f=i[1],p=i[2],m=i[3],g=i[4],b=i[5],v=i[6],_=i[7],y=i[8];return e[0]=d*r+f*s+p*c,e[1]=d*n+f*o+p*u,e[2]=d*a+f*l+p*h,e[3]=m*r+g*s+b*c,e[4]=m*n+g*o+b*u,e[5]=m*a+g*l+b*h,e[6]=v*r+_*s+y*c,e[7]=v*n+_*o+y*u,e[8]=v*a+_*l+y*h,e}function Pe(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],f=i[1];return e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=d*r+f*s+c,e[7]=d*n+f*o+u,e[8]=d*a+f*l+h,e}function Ce(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(i),f=Math.cos(i);return e[0]=f*r+d*s,e[1]=f*n+d*o,e[2]=f*a+d*l,e[3]=f*s-d*r,e[4]=f*o-d*n,e[5]=f*l-d*a,e[6]=c,e[7]=u,e[8]=h,e}function ke(e,t,i){var r=i[0],n=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Oe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function De(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Le(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i+i,o=r+r,l=n+n,c=i*s,u=r*s,h=r*o,d=n*s,f=n*o,p=n*l,m=a*s,g=a*o,b=a*l;return e[0]=1-h-p,e[3]=u-b,e[6]=d+g,e[1]=u+b,e[4]=1-c-p,e[7]=f-m,e[2]=d-g,e[5]=f+m,e[8]=1-c-h,e}function Ue(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],b=t[15],v=i*o-r*s,_=i*l-n*s,y=i*c-a*s,A=r*l-n*o,E=r*c-a*o,w=n*c-a*l,S=u*m-h*p,T=u*g-d*p,x=u*b-f*p,M=h*g-d*m,R=h*b-f*m,P=d*b-f*g,C=v*P-_*R+y*M+A*x-E*T+w*S;return C?(C=1/C,e[0]=(o*P-l*R+c*M)*C,e[1]=(l*x-s*P-c*T)*C,e[2]=(s*R-o*x+c*S)*C,e[3]=(n*R-r*P-a*M)*C,e[4]=(i*P-n*x+a*T)*C,e[5]=(r*x-i*R-a*S)*C,e[6]=(m*w-g*E+b*A)*C,e[7]=(g*y-p*w-b*_)*C,e[8]=(p*E-m*y+b*v)*C,e):null}function Ve(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Fe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ge(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Be(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function je(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function ze(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function He(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function We(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function $e(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=t[0],d=t[1],p=t[2],m=t[3],g=t[4],b=t[5],v=t[6],_=t[7],y=t[8];return Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-d)<=f*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=f*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-m)<=f*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-b)<=f*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(l-v)<=f*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-_)<=f*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(u-y)<=f*Math.max(1,Math.abs(u),Math.abs(y))}var Ye=Re,Xe=je;function qe(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ze(e){var t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Je(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ke(e,t,i,r,n,a,s,o,l,c,u,h,d,f,m,g){var b=new p(16);return b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=n,b[5]=a,b[6]=s,b[7]=o,b[8]=l,b[9]=c,b[10]=u,b[11]=h,b[12]=d,b[13]=f,b[14]=m,b[15]=g,b}function Qe(e,t,i,r,n,a,s,o,l,c,u,h,d,f,p,m,g){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=m,e[15]=g,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var i=t[1],r=t[2],n=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=n,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function it(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],b=t[15],v=i*o-r*s,_=i*l-n*s,y=i*c-a*s,A=r*l-n*o,E=r*c-a*o,w=n*c-a*l,S=u*m-h*p,T=u*g-d*p,x=u*b-f*p,M=h*g-d*m,R=h*b-f*m,P=d*b-f*g,C=v*P-_*R+y*M+A*x-E*T+w*S;return C?(C=1/C,e[0]=(o*P-l*R+c*M)*C,e[1]=(n*R-r*P-a*M)*C,e[2]=(m*w-g*E+b*A)*C,e[3]=(d*E-h*w-f*A)*C,e[4]=(l*x-s*P-c*T)*C,e[5]=(i*P-n*x+a*T)*C,e[6]=(g*y-p*w-b*_)*C,e[7]=(u*w-d*y+f*_)*C,e[8]=(s*R-o*x+c*S)*C,e[9]=(r*x-i*R-a*S)*C,e[10]=(p*E-m*y+b*v)*C,e[11]=(h*y-u*E-f*v)*C,e[12]=(o*T-s*M-l*S)*C,e[13]=(i*M-r*T+n*S)*C,e[14]=(m*_-p*A-g*v)*C,e[15]=(u*A-h*_+d*v)*C,e):null}function rt(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],b=t[15];return e[0]=o*(d*b-f*g)-h*(l*b-c*g)+m*(l*f-c*d),e[1]=-(r*(d*b-f*g)-h*(n*b-a*g)+m*(n*f-a*d)),e[2]=r*(l*b-c*g)-o*(n*b-a*g)+m*(n*c-a*l),e[3]=-(r*(l*f-c*d)-o*(n*f-a*d)+h*(n*c-a*l)),e[4]=-(s*(d*b-f*g)-u*(l*b-c*g)+p*(l*f-c*d)),e[5]=i*(d*b-f*g)-u*(n*b-a*g)+p*(n*f-a*d),e[6]=-(i*(l*b-c*g)-s*(n*b-a*g)+p*(n*c-a*l)),e[7]=i*(l*f-c*d)-s*(n*f-a*d)+u*(n*c-a*l),e[8]=s*(h*b-f*m)-u*(o*b-c*m)+p*(o*f-c*h),e[9]=-(i*(h*b-f*m)-u*(r*b-a*m)+p*(r*f-a*h)),e[10]=i*(o*b-c*m)-s*(r*b-a*m)+p*(r*c-a*o),e[11]=-(i*(o*f-c*h)-s*(r*f-a*h)+u*(r*c-a*o)),e[12]=-(s*(h*g-d*m)-u*(o*g-l*m)+p*(o*d-l*h)),e[13]=i*(h*g-d*m)-u*(r*g-n*m)+p*(r*d-n*h),e[14]=-(i*(o*g-l*m)-s*(r*g-n*m)+p*(r*l-n*o)),e[15]=i*(o*d-l*h)-s*(r*d-n*h)+u*(r*l-n*o),e}function nt(e){var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15];return(t*s-i*a)*(h*g-d*m)-(t*o-r*a)*(u*g-d*p)+(t*l-n*a)*(u*m-h*p)+(i*o-r*s)*(c*g-d*f)-(i*l-n*s)*(c*m-h*f)+(r*l-n*o)*(c*p-u*f)}function at(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],b=t[14],v=t[15],_=i[0],y=i[1],A=i[2],E=i[3];return e[0]=_*r+y*o+A*h+E*m,e[1]=_*n+y*l+A*d+E*g,e[2]=_*a+y*c+A*f+E*b,e[3]=_*s+y*u+A*p+E*v,_=i[4],y=i[5],A=i[6],E=i[7],e[4]=_*r+y*o+A*h+E*m,e[5]=_*n+y*l+A*d+E*g,e[6]=_*a+y*c+A*f+E*b,e[7]=_*s+y*u+A*p+E*v,_=i[8],y=i[9],A=i[10],E=i[11],e[8]=_*r+y*o+A*h+E*m,e[9]=_*n+y*l+A*d+E*g,e[10]=_*a+y*c+A*f+E*b,e[11]=_*s+y*u+A*p+E*v,_=i[12],y=i[13],A=i[14],E=i[15],e[12]=_*r+y*o+A*h+E*m,e[13]=_*n+y*l+A*d+E*g,e[14]=_*a+y*c+A*f+E*b,e[15]=_*s+y*u+A*p+E*v,e}function st(e,t,i){var r,n,a,s,o,l,c,u,h,d,f,p,m=i[0],g=i[1],b=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*b+t[12],e[13]=t[1]*m+t[5]*g+t[9]*b+t[13],e[14]=t[2]*m+t[6]*g+t[10]*b+t[14],e[15]=t[3]*m+t[7]*g+t[11]*b+t[15]):(r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*m+o*g+h*b+t[12],e[13]=n*m+l*g+d*b+t[13],e[14]=a*m+c*g+f*b+t[14],e[15]=s*m+u*g+p*b+t[15]),e}function ot(e,t,i){var r=i[0],n=i[1],a=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function lt(e,t,i,r){var n,a,s,o,l,c,u,h,d,p,m,g,b,v,_,y,A,E,w,S,T,x,M,R,P=r[0],C=r[1],k=r[2],O=Math.hypot(P,C,k);return O<f?null:(P*=O=1/O,C*=O,k*=O,n=Math.sin(i),s=1-(a=Math.cos(i)),o=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],p=t[6],m=t[7],g=t[8],b=t[9],v=t[10],_=t[11],y=P*P*s+a,A=C*P*s+k*n,E=k*P*s-C*n,w=P*C*s-k*n,S=C*C*s+a,T=k*C*s+P*n,x=P*k*s+C*n,M=C*k*s-P*n,R=k*k*s+a,e[0]=o*y+h*A+g*E,e[1]=l*y+d*A+b*E,e[2]=c*y+p*A+v*E,e[3]=u*y+m*A+_*E,e[4]=o*w+h*S+g*T,e[5]=l*w+d*S+b*T,e[6]=c*w+p*S+v*T,e[7]=u*w+m*S+_*T,e[8]=o*x+h*M+g*R,e[9]=l*x+d*M+b*R,e[10]=c*x+p*M+v*R,e[11]=u*x+m*M+_*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ct(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+c*r,e[5]=s*n+u*r,e[6]=o*n+h*r,e[7]=l*n+d*r,e[8]=c*n-a*r,e[9]=u*n-s*r,e[10]=h*n-o*r,e[11]=d*n-l*r,e}function ut(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],o=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-c*r,e[1]=s*n-u*r,e[2]=o*n-h*r,e[3]=l*n-d*r,e[8]=a*r+c*n,e[9]=s*r+u*n,e[10]=o*r+h*n,e[11]=l*r+d*n,e}function ht(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+c*r,e[1]=s*n+u*r,e[2]=o*n+h*r,e[3]=l*n+d*r,e[4]=c*n-a*r,e[5]=u*n-s*r,e[6]=h*n-o*r,e[7]=d*n-l*r,e}function dt(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ft(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t,i){var r,n,a,s=i[0],o=i[1],l=i[2],c=Math.hypot(s,o,l);return c<f?null:(s*=c=1/c,o*=c,l*=c,r=Math.sin(t),a=1-(n=Math.cos(t)),e[0]=s*s*a+n,e[1]=o*s*a+l*r,e[2]=l*s*a-o*r,e[3]=0,e[4]=s*o*a-l*r,e[5]=o*o*a+n,e[6]=l*o*a+s*r,e[7]=0,e[8]=s*l*a+o*r,e[9]=o*l*a-s*r,e[10]=l*l*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mt(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gt(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vt(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=r+r,l=n+n,c=a+a,u=r*o,h=r*l,d=r*c,f=n*l,p=n*c,m=a*c,g=s*o,b=s*l,v=s*c;return e[0]=1-(f+m),e[1]=h+v,e[2]=d-b,e[3]=0,e[4]=h-v,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=d+b,e[9]=p-g,e[10]=1-(u+f),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function _t(e,t){var i=new p(3),r=-t[0],n=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=r*r+n*n+a*a+s*s;return h>0?(i[0]=2*(o*s+u*r+l*a-c*n)/h,i[1]=2*(l*s+u*n+c*r-o*a)/h,i[2]=2*(c*s+u*a+o*n-l*r)/h):(i[0]=2*(o*s+u*r+l*a-c*n),i[1]=2*(l*s+u*n+c*r-o*a),i[2]=2*(c*s+u*a+o*n-l*r)),vt(e,t,i),e}function yt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function At(e,t){var i=t[0],r=t[1],n=t[2],a=t[4],s=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(i,r,n),e[1]=Math.hypot(a,s,o),e[2]=Math.hypot(l,c,u),e}function Et(e,t){var i=new p(3);At(i,t);var r=1/i[0],n=1/i[1],a=1/i[2],s=t[0]*r,o=t[1]*n,l=t[2]*a,c=t[4]*r,u=t[5]*n,h=t[6]*a,d=t[8]*r,f=t[9]*n,m=t[10]*a,g=s+u+m,b=0;return g>0?(b=2*Math.sqrt(g+1),e[3]=.25*b,e[0]=(h-f)/b,e[1]=(d-l)/b,e[2]=(o-c)/b):s>u&&s>m?(b=2*Math.sqrt(1+s-u-m),e[3]=(h-f)/b,e[0]=.25*b,e[1]=(o+c)/b,e[2]=(d+l)/b):u>m?(b=2*Math.sqrt(1+u-s-m),e[3]=(d-l)/b,e[0]=(o+c)/b,e[1]=.25*b,e[2]=(h+f)/b):(b=2*Math.sqrt(1+m-s-u),e[3]=(o-c)/b,e[0]=(d+l)/b,e[1]=(h+f)/b,e[2]=.25*b),e}function wt(e,t,i,r){var n=t[0],a=t[1],s=t[2],o=t[3],l=n+n,c=a+a,u=s+s,h=n*l,d=n*c,f=n*u,p=a*c,m=a*u,g=s*u,b=o*l,v=o*c,_=o*u,y=r[0],A=r[1],E=r[2];return e[0]=(1-(p+g))*y,e[1]=(d+_)*y,e[2]=(f-v)*y,e[3]=0,e[4]=(d-_)*A,e[5]=(1-(h+g))*A,e[6]=(m+b)*A,e[7]=0,e[8]=(f+v)*E,e[9]=(m-b)*E,e[10]=(1-(h+p))*E,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function St(e,t,i,r,n){var a=t[0],s=t[1],o=t[2],l=t[3],c=a+a,u=s+s,h=o+o,d=a*c,f=a*u,p=a*h,m=s*u,g=s*h,b=o*h,v=l*c,_=l*u,y=l*h,A=r[0],E=r[1],w=r[2],S=n[0],T=n[1],x=n[2],M=(1-(m+b))*A,R=(f+y)*A,P=(p-_)*A,C=(f-y)*E,k=(1-(d+b))*E,O=(g+v)*E,D=(p+_)*w,N=(g-v)*w,I=(1-(d+m))*w;return e[0]=M,e[1]=R,e[2]=P,e[3]=0,e[4]=C,e[5]=k,e[6]=O,e[7]=0,e[8]=D,e[9]=N,e[10]=I,e[11]=0,e[12]=i[0]+S-(M*S+C*T+D*x),e[13]=i[1]+T-(R*S+k*T+N*x),e[14]=i[2]+x-(P*S+O*T+I*x),e[15]=1,e}function Tt(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i+i,o=r+r,l=n+n,c=i*s,u=r*s,h=r*o,d=n*s,f=n*o,p=n*l,m=a*s,g=a*o,b=a*l;return e[0]=1-h-p,e[1]=u+b,e[2]=d-g,e[3]=0,e[4]=u-b,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+g,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xt(e,t,i,r,n,a,s){var o=1/(i-t),l=1/(n-r),c=1/(a-s);return e[0]=2*a*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(i+t)*o,e[9]=(n+r)*l,e[10]=(s+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*c,e[15]=0,e}function Mt(e,t,i,r,n){var a,s=1/Math.tan(t/2);return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(a=1/(r-n),e[10]=(n+r)*a,e[14]=2*n*r*a):(e[10]=-1,e[14]=-2*r),e}function Rt(e,t,i,r){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(s+o),c=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-o)*l*.5,e[9]=(n-a)*c*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function Pt(e,t,i,r,n,a,s){var o=1/(t-i),l=1/(r-n),c=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(n+r)*l,e[14]=(s+a)*c,e[15]=1,e}function Ct(e,t,i,r){var n,a,s,o,l,c,u,h,d,p,m=t[0],g=t[1],b=t[2],v=r[0],_=r[1],y=r[2],A=i[0],E=i[1],w=i[2];return Math.abs(m-A)<f&&Math.abs(g-E)<f&&Math.abs(b-w)<f?et(e):(u=m-A,h=g-E,d=b-w,n=_*(d*=p=1/Math.hypot(u,h,d))-y*(h*=p),a=y*(u*=p)-v*d,s=v*h-_*u,(p=Math.hypot(n,a,s))?(n*=p=1/p,a*=p,s*=p):(n=0,a=0,s=0),o=h*s-d*a,l=d*n-u*s,c=u*a-h*n,(p=Math.hypot(o,l,c))?(o*=p=1/p,l*=p,c*=p):(o=0,l=0,c=0),e[0]=n,e[1]=o,e[2]=u,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=d,e[11]=0,e[12]=-(n*m+a*g+s*b),e[13]=-(o*m+l*g+c*b),e[14]=-(u*m+h*g+d*b),e[15]=1,e)}function kt(e,t,i,r){var n=t[0],a=t[1],s=t[2],o=r[0],l=r[1],c=r[2],u=n-i[0],h=a-i[1],d=s-i[2],f=u*u+h*h+d*d;f>0&&(u*=f=1/Math.sqrt(f),h*=f,d*=f);var p=l*d-c*h,m=c*u-o*d,g=o*h-l*u;return(f=p*p+m*m+g*g)>0&&(p*=f=1/Math.sqrt(f),m*=f,g*=f),e[0]=p,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-d*m,e[5]=d*p-u*g,e[6]=u*m-h*p,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=n,e[13]=a,e[14]=s,e[15]=1,e}function Ot(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Dt(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Nt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function It(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Lt(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Ut(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function Vt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ft(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],b=e[14],v=e[15],_=t[0],y=t[1],A=t[2],E=t[3],w=t[4],S=t[5],T=t[6],x=t[7],M=t[8],R=t[9],P=t[10],C=t[11],k=t[12],O=t[13],D=t[14],N=t[15];return Math.abs(i-_)<=f*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(r-y)<=f*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-A)<=f*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(a-E)<=f*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-w)<=f*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-S)<=f*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(l-T)<=f*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-x)<=f*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-M)<=f*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-R)<=f*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-P)<=f*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-C)<=f*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-k)<=f*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(g-O)<=f*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(b-D)<=f*Math.max(1,Math.abs(b),Math.abs(D))&&Math.abs(v-N)<=f*Math.max(1,Math.abs(v),Math.abs(N))}var Gt=at,Bt=It;function jt(){var e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function zt(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ht(e){var t=e[0],i=e[1],r=e[2];return Math.hypot(t,i,r)}function Wt(e,t,i){var r=new p(3);return r[0]=e,r[1]=t,r[2]=i,r}function $t(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Yt(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function Xt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function qt(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Zt(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Jt(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Kt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Qt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ei(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function ti(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function ii(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function ri(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function ni(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function ai(e,t){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return Math.hypot(i,r,n)}function si(e,t){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function oi(e){var t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function li(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ci(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ui(e,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function hi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function di(e,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],o=i[1],l=i[2];return e[0]=n*l-a*o,e[1]=a*s-r*l,e[2]=r*o-n*s,e}function fi(e,t,i,r){var n=t[0],a=t[1],s=t[2];return e[0]=n+r*(i[0]-n),e[1]=a+r*(i[1]-a),e[2]=s+r*(i[2]-s),e}function pi(e,t,i,r,n,a){var s=a*a,o=s*(2*a-3)+1,l=s*(a-2)+a,c=s*(a-1),u=s*(3-2*a);return e[0]=t[0]*o+i[0]*l+r[0]*c+n[0]*u,e[1]=t[1]*o+i[1]*l+r[1]*c+n[1]*u,e[2]=t[2]*o+i[2]*l+r[2]*c+n[2]*u,e}function mi(e,t,i,r,n,a){var s=1-a,o=s*s,l=a*a,c=o*s,u=3*a*o,h=3*l*s,d=l*a;return e[0]=t[0]*c+i[0]*u+r[0]*h+n[0]*d,e[1]=t[1]*c+i[1]*u+r[1]*h+n[1]*d,e[2]=t[2]*c+i[2]*u+r[2]*h+n[2]*d,e}function gi(e,t){t=t||1;var i=2*m()*Math.PI,r=2*m()-1,n=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=r*t,e}function bi(e,t,i){var r=t[0],n=t[1],a=t[2],s=i[3]*r+i[7]*n+i[11]*a+i[15];return s=s||1,e[0]=(i[0]*r+i[4]*n+i[8]*a+i[12])/s,e[1]=(i[1]*r+i[5]*n+i[9]*a+i[13])/s,e[2]=(i[2]*r+i[6]*n+i[10]*a+i[14])/s,e}function vi(e,t,i){var r=t[0],n=t[1],a=t[2];return e[0]=r*i[0]+n*i[3]+a*i[6],e[1]=r*i[1]+n*i[4]+a*i[7],e[2]=r*i[2]+n*i[5]+a*i[8],e}function _i(e,t,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=t[0],l=t[1],c=t[2],u=n*c-a*l,h=a*o-r*c,d=r*l-n*o,f=n*d-a*h,p=a*u-r*d,m=r*h-n*u,g=2*s;return u*=g,h*=g,d*=g,f*=2,p*=2,m*=2,e[0]=o+u+f,e[1]=l+h+p,e[2]=c+d+m,e}function yi(e,t,i,r){var n=[],a=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],a[0]=n[0],a[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),a[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function Ai(e,t,i,r){var n=[],a=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],a[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),a[1]=n[1],a[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function Ei(e,t,i,r){var n=[],a=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],a[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),a[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),a[2]=n[2],e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function wi(e,t){var i=e[0],r=e[1],n=e[2],a=t[0],s=t[1],o=t[2],l=Math.sqrt(i*i+r*r+n*n)*Math.sqrt(a*a+s*s+o*o),c=l&&hi(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function Si(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ti(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function xi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Mi(e,t){var i=e[0],r=e[1],n=e[2],a=t[0],s=t[1],o=t[2];return Math.abs(i-a)<=f*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))}var Ri,Pi=qt,Ci=Zt,ki=Jt,Oi=ai,Di=si,Ni=Ht,Ii=oi,Li=(Ri=jt(),function(e,t,i,r,n,a){var s,o;for(t||(t=3),i||(i=0),o=r?Math.min(r*t+i,e.length):e.length,s=i;s<o;s+=t)Ri[0]=e[s],Ri[1]=e[s+1],Ri[2]=e[s+2],n(Ri,Ri,a),e[s]=Ri[0],e[s+1]=Ri[1],e[s+2]=Ri[2];return e});function Ui(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Vi(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Fi(e,t,i,r){var n=new p(4);return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function Gi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Bi(e,t,i,r,n){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}function ji(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function zi(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function Hi(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Wi(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function $i(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Yi(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Xi(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function qi(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Zi(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Ji(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Ki(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function Qi(e,t){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return Math.hypot(i,r,n,a)}function er(e,t){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2],a=t[3]-e[3];return i*i+r*r+n*n+a*a}function tr(e){var t=e[0],i=e[1],r=e[2],n=e[3];return Math.hypot(t,i,r,n)}function ir(e){var t=e[0],i=e[1],r=e[2],n=e[3];return t*t+i*i+r*r+n*n}function rr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function nr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function ar(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i*i+r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=i*s,e[1]=r*s,e[2]=n*s,e[3]=a*s,e}function sr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function or(e,t,i,r){var n=i[0]*r[1]-i[1]*r[0],a=i[0]*r[2]-i[2]*r[0],s=i[0]*r[3]-i[3]*r[0],o=i[1]*r[2]-i[2]*r[1],l=i[1]*r[3]-i[3]*r[1],c=i[2]*r[3]-i[3]*r[2],u=t[0],h=t[1],d=t[2],f=t[3];return e[0]=h*c-d*l+f*o,e[1]=-u*c+d*s-f*a,e[2]=u*l-h*s+f*n,e[3]=-u*o+h*a-d*n,e}function lr(e,t,i,r){var n=t[0],a=t[1],s=t[2],o=t[3];return e[0]=n+r*(i[0]-n),e[1]=a+r*(i[1]-a),e[2]=s+r*(i[2]-s),e[3]=o+r*(i[3]-o),e}function cr(e,t){var i,r,n,a,s,o;t=t||1;do{s=(i=2*m()-1)*i+(r=2*m()-1)*r}while(s>=1);do{o=(n=2*m()-1)*n+(a=2*m()-1)*a}while(o>=1);var l=Math.sqrt((1-s)/o);return e[0]=t*i,e[1]=t*r,e[2]=t*n*l,e[3]=t*a*l,e}function ur(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*s,e[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*s,e[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*s,e[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*s,e}function hr(e,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],o=i[1],l=i[2],c=i[3],u=c*r+o*a-l*n,h=c*n+l*r-s*a,d=c*a+s*n-o*r,f=-s*r-o*n-l*a;return e[0]=u*c+f*-s+h*-l-d*-o,e[1]=h*c+f*-o+d*-s-u*-l,e[2]=d*c+f*-l+u*-o-h*-s,e[3]=t[3],e}function dr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function fr(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function pr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function mr(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=t[0],o=t[1],l=t[2],c=t[3];return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))}var gr=zi,br=Hi,vr=Wi,_r=Qi,yr=er,Ar=tr,Er=ir,wr=function(){var e=Ui();return function(t,i,r,n,a,s){var o,l;for(i||(i=4),r||(r=0),l=n?Math.min(n*i+r,t.length):t.length,o=r;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],a(e,e,s),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}}();function Sr(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Tr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function xr(e,t,i){i*=.5;var r=Math.sin(i);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i),e}function Mr(e,t){var i=2*Math.acos(t[3]),r=Math.sin(i/2);return r>f?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),i}function Rr(e,t){var i=nn(e,t);return Math.acos(2*i*i-1)}function Pr(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=r*u+s*o+n*c-a*l,e[1]=n*u+s*l+a*o-r*c,e[2]=a*u+s*c+r*l-n*o,e[3]=s*u-r*o-n*l-a*c,e}function Cr(e,t,i){i*=.5;var r=t[0],n=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l+s*o,e[1]=n*l+a*o,e[2]=a*l-n*o,e[3]=s*l-r*o,e}function kr(e,t,i){i*=.5;var r=t[0],n=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l-a*o,e[1]=n*l+s*o,e[2]=a*l+r*o,e[3]=s*l-n*o,e}function Or(e,t,i){i*=.5;var r=t[0],n=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*o,e[1]=n*l-r*o,e[2]=a*l+s*o,e[3]=s*l-a*o,e}function Dr(e,t){var i=t[0],r=t[1],n=t[2];return e[0]=i,e[1]=r,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-r*r-n*n)),e}function Nr(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=Math.sqrt(i*i+r*r+n*n),o=Math.exp(a),l=s>0?o*Math.sin(s)/s:0;return e[0]=i*l,e[1]=r*l,e[2]=n*l,e[3]=o*Math.cos(s),e}function Ir(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=Math.sqrt(i*i+r*r+n*n),o=s>0?Math.atan2(s,a)/s:0;return e[0]=i*o,e[1]=r*o,e[2]=n*o,e[3]=.5*Math.log(i*i+r*r+n*n+a*a),e}function Lr(e,t,i){return Ir(e,t),rn(e,e,i),Nr(e,e),e}function Ur(e,t,i,r){var n,a,s,o,l,c=t[0],u=t[1],h=t[2],d=t[3],p=i[0],m=i[1],g=i[2],b=i[3];return(a=c*p+u*m+h*g+d*b)<0&&(a=-a,p=-p,m=-m,g=-g,b=-b),1-a>f?(n=Math.acos(a),s=Math.sin(n),o=Math.sin((1-r)*n)/s,l=Math.sin(r*n)/s):(o=1-r,l=r),e[0]=o*c+l*p,e[1]=o*u+l*m,e[2]=o*h+l*g,e[3]=o*d+l*b,e}function Vr(e){var t=m(),i=m(),r=m(),n=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*i),e[1]=n*Math.cos(2*Math.PI*i),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e}function Fr(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i*i+r*r+n*n+a*a,o=s?1/s:0;return e[0]=-i*o,e[1]=-r*o,e[2]=-n*o,e[3]=a*o,e}function Gr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Br(e,t){var i,r=t[0]+t[4]+t[8];if(r>0)i=Math.sqrt(r+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var a=(n+1)%3,s=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*a+a]-t[3*s+s]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*a+s]-t[3*s+a])*i,e[a]=(t[3*a+n]+t[3*n+a])*i,e[s]=(t[3*s+n]+t[3*n+s])*i}return e}function jr(e,t,i,r){var n=.5*Math.PI/180;t*=n,i*=n,r*=n;var a=Math.sin(t),s=Math.cos(t),o=Math.sin(i),l=Math.cos(i),c=Math.sin(r),u=Math.cos(r);return e[0]=a*l*u-s*o*c,e[1]=s*o*u+a*l*c,e[2]=s*l*c-a*o*u,e[3]=s*l*u+a*o*c,e}function zr(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Hr,Wr,$r,Yr,Xr,qr,Zr=Vi,Jr=Fi,Kr=Gi,Qr=Bi,en=ji,tn=Pr,rn=Ji,nn=sr,an=lr,sn=tr,on=sn,ln=ir,cn=ln,un=ar,hn=pr,dn=mr,fn=(Hr=jt(),Wr=Wt(1,0,0),$r=Wt(0,1,0),function(e,t,i){var r=hi(t,i);return r<-.999999?(di(Hr,Wr,t),Ni(Hr)<1e-6&&di(Hr,$r,t),ui(Hr,Hr),xr(e,Hr,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(di(Hr,t,i),e[0]=Hr[0],e[1]=Hr[1],e[2]=Hr[2],e[3]=1+r,un(e,e))}),pn=(Yr=Sr(),Xr=Sr(),function(e,t,i,r,n,a){return Ur(Yr,t,n,a),Ur(Xr,i,r,a),Ur(e,Yr,Xr,2*a*(1-a)),e}),mn=(qr=be(),function(e,t,i,r){return qr[0]=i[0],qr[3]=i[1],qr[6]=i[2],qr[1]=r[0],qr[4]=r[1],qr[7]=r[2],qr[2]=-t[0],qr[5]=-t[1],qr[8]=-t[2],un(e,Br(e,qr))});function gn(){var e=new p(8);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function bn(e){var t=new p(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function vn(e,t,i,r,n,a,s,o){var l=new p(8);return l[0]=e,l[1]=t,l[2]=i,l[3]=r,l[4]=n,l[5]=a,l[6]=s,l[7]=o,l}function _n(e,t,i,r,n,a,s){var o=new p(8);o[0]=e,o[1]=t,o[2]=i,o[3]=r;var l=.5*n,c=.5*a,u=.5*s;return o[4]=l*r+c*i-u*t,o[5]=c*r+u*e-l*i,o[6]=u*r+l*t-c*e,o[7]=-l*e-c*t-u*i,o}function yn(e,t,i){var r=.5*i[0],n=.5*i[1],a=.5*i[2],s=t[0],o=t[1],l=t[2],c=t[3];return e[0]=s,e[1]=o,e[2]=l,e[3]=c,e[4]=r*c+n*l-a*o,e[5]=n*c+a*s-r*l,e[6]=a*c+r*o-n*s,e[7]=-r*s-n*o-a*l,e}function An(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function En(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function wn(e,t){var i=Sr();Et(i,t);var r=new p(3);return yt(r,t),yn(e,i,r),e}function Sn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Tn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function xn(e,t,i,r,n,a,s,o,l){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e}var Mn=Kr;function Rn(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Pn=Kr;function Cn(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function kn(e,t){var i=t[4],r=t[5],n=t[6],a=t[7],s=-t[0],o=-t[1],l=-t[2],c=t[3];return e[0]=2*(i*c+a*s+r*l-n*o),e[1]=2*(r*c+a*o+n*s-i*l),e[2]=2*(n*c+a*l+i*o-r*s),e}function On(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=.5*i[0],l=.5*i[1],c=.5*i[2],u=t[4],h=t[5],d=t[6],f=t[7];return e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=s*o+n*c-a*l+u,e[5]=s*l+a*o-r*c+h,e[6]=s*c+r*l-n*o+d,e[7]=-r*o-n*l-a*c+f,e}function Dn(e,t,i){var r=-t[0],n=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*r+l*a-c*n,d=l*s+u*n+c*r-o*a,f=c*s+u*a+o*n-l*r,p=u*s-o*r-l*n-c*a;return Cr(e,t,i),r=e[0],n=e[1],a=e[2],s=e[3],e[4]=h*s+p*r+d*a-f*n,e[5]=d*s+p*n+f*r-h*a,e[6]=f*s+p*a+h*n-d*r,e[7]=p*s-h*r-d*n-f*a,e}function Nn(e,t,i){var r=-t[0],n=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*r+l*a-c*n,d=l*s+u*n+c*r-o*a,f=c*s+u*a+o*n-l*r,p=u*s-o*r-l*n-c*a;return kr(e,t,i),r=e[0],n=e[1],a=e[2],s=e[3],e[4]=h*s+p*r+d*a-f*n,e[5]=d*s+p*n+f*r-h*a,e[6]=f*s+p*a+h*n-d*r,e[7]=p*s-h*r-d*n-f*a,e}function In(e,t,i){var r=-t[0],n=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*r+l*a-c*n,d=l*s+u*n+c*r-o*a,f=c*s+u*a+o*n-l*r,p=u*s-o*r-l*n-c*a;return Or(e,t,i),r=e[0],n=e[1],a=e[2],s=e[3],e[4]=h*s+p*r+d*a-f*n,e[5]=d*s+p*n+f*r-h*a,e[6]=f*s+p*a+h*n-d*r,e[7]=p*s-h*r-d*n-f*a,e}function Ln(e,t,i){var r=i[0],n=i[1],a=i[2],s=i[3],o=t[0],l=t[1],c=t[2],u=t[3];return e[0]=o*s+u*r+l*a-c*n,e[1]=l*s+u*n+c*r-o*a,e[2]=c*s+u*a+o*n-l*r,e[3]=u*s-o*r-l*n-c*a,o=t[4],l=t[5],c=t[6],u=t[7],e[4]=o*s+u*r+l*a-c*n,e[5]=l*s+u*n+c*r-o*a,e[6]=c*s+u*a+o*n-l*r,e[7]=u*s-o*r-l*n-c*a,e}function Un(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=r*u+s*o+n*c-a*l,e[1]=n*u+s*l+a*o-r*c,e[2]=a*u+s*c+r*l-n*o,e[3]=s*u-r*o-n*l-a*c,o=i[4],l=i[5],c=i[6],u=i[7],e[4]=r*u+s*o+n*c-a*l,e[5]=n*u+s*l+a*o-r*c,e[6]=a*u+s*c+r*l-n*o,e[7]=s*u-r*o-n*l-a*c,e}function Vn(e,t,i,r){if(Math.abs(r)<f)return Sn(e,t);var n=Math.hypot(i[0],i[1],i[2]);r*=.5;var a=Math.sin(r),s=a*i[0]/n,o=a*i[1]/n,l=a*i[2]/n,c=Math.cos(r),u=t[0],h=t[1],d=t[2],p=t[3];e[0]=u*c+p*s+h*l-d*o,e[1]=h*c+p*o+d*s-u*l,e[2]=d*c+p*l+u*o-h*s,e[3]=p*c-u*s-h*o-d*l;var m=t[4],g=t[5],b=t[6],v=t[7];return e[4]=m*c+v*s+g*l-b*o,e[5]=g*c+v*o+b*s-m*l,e[6]=b*c+v*l+m*o-g*s,e[7]=v*c-m*s-g*o-b*l,e}function Fn(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e}function Gn(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=i[4],l=i[5],c=i[6],u=i[7],h=t[4],d=t[5],f=t[6],p=t[7],m=i[0],g=i[1],b=i[2],v=i[3];return e[0]=r*v+s*m+n*b-a*g,e[1]=n*v+s*g+a*m-r*b,e[2]=a*v+s*b+r*g-n*m,e[3]=s*v-r*m-n*g-a*b,e[4]=r*u+s*o+n*c-a*l+h*v+p*m+d*b-f*g,e[5]=n*u+s*l+a*o-r*c+d*v+p*g+f*m-h*b,e[6]=a*u+s*c+r*l-n*o+f*v+p*b+h*g-d*m,e[7]=s*u-r*o-n*l-a*c+p*v-h*m-d*g-f*b,e}var Bn=Gn;function jn(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e}var zn=nn;function Hn(e,t,i,r){var n=1-r;return zn(t,i)<0&&(r=-r),e[0]=t[0]*n+i[0]*r,e[1]=t[1]*n+i[1]*r,e[2]=t[2]*n+i[2]*r,e[3]=t[3]*n+i[3]*r,e[4]=t[4]*n+i[4]*r,e[5]=t[5]*n+i[5]*r,e[6]=t[6]*n+i[6]*r,e[7]=t[7]*n+i[7]*r,e}function Wn(e,t){var i=qn(t);return e[0]=-t[0]/i,e[1]=-t[1]/i,e[2]=-t[2]/i,e[3]=t[3]/i,e[4]=-t[4]/i,e[5]=-t[5]/i,e[6]=-t[6]/i,e[7]=t[7]/i,e}function $n(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Yn=sn,Xn=Yn,qn=ln,Zn=qn;function Jn(e,t){var i=qn(t);if(i>0){i=Math.sqrt(i);var r=t[0]/i,n=t[1]/i,a=t[2]/i,s=t[3]/i,o=t[4],l=t[5],c=t[6],u=t[7],h=r*o+n*l+a*c+s*u;e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=(o-r*h)/i,e[5]=(l-n*h)/i,e[6]=(c-a*h)/i,e[7]=(u-s*h)/i}return e}function Kn(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Qn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ea(e,t){var i=e[0],r=e[1],n=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=t[0],h=t[1],d=t[2],p=t[3],m=t[4],g=t[5],b=t[6],v=t[7];return Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-p)<=f*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-m)<=f*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-g)<=f*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(l-b)<=f*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-v)<=f*Math.max(1,Math.abs(c),Math.abs(v))}function ta(){var e=new p(2);return p!=Float32Array&&(e[0]=0,e[1]=0),e}function ia(e){var t=new p(2);return t[0]=e[0],t[1]=e[1],t}function ra(e,t){var i=new p(2);return i[0]=e,i[1]=t,i}function na(e,t){return e[0]=t[0],e[1]=t[1],e}function aa(e,t,i){return e[0]=t,e[1]=i,e}function sa(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function oa(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function la(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function ca(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function ua(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ha(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function da(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function fa(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function pa(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ma(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function ga(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function ba(e,t){var i=t[0]-e[0],r=t[1]-e[1];return Math.hypot(i,r)}function va(e,t){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function _a(e){var t=e[0],i=e[1];return Math.hypot(t,i)}function ya(e){var t=e[0],i=e[1];return t*t+i*i}function Aa(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Ea(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function wa(e,t){var i=t[0],r=t[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e}function Sa(e,t){return e[0]*t[0]+e[1]*t[1]}function Ta(e,t,i){var r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function xa(e,t,i,r){var n=t[0],a=t[1];return e[0]=n+r*(i[0]-n),e[1]=a+r*(i[1]-a),e}function Ma(e,t){t=t||1;var i=2*m()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Ra(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n,e[1]=i[1]*r+i[3]*n,e}function Pa(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[2]*n+i[4],e[1]=i[1]*r+i[3]*n+i[5],e}function Ca(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[3]*n+i[6],e[1]=i[1]*r+i[4]*n+i[7],e}function ka(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e}function Oa(e,t,i,r){var n=t[0]-i[0],a=t[1]-i[1],s=Math.sin(r),o=Math.cos(r);return e[0]=n*o-a*s+i[0],e[1]=n*s+a*o+i[1],e}function Da(e,t){var i=e[0],r=e[1],n=t[0],a=t[1],s=Math.sqrt(i*i+r*r)*Math.sqrt(n*n+a*a),o=s&&(i*n+r*a)/s;return Math.acos(Math.min(Math.max(o,-1),1))}function Na(e){return e[0]=0,e[1]=0,e}function Ia(e){return"vec2("+e[0]+", "+e[1]+")"}function La(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ua(e,t){var i=e[0],r=e[1],n=t[0],a=t[1];return Math.abs(i-n)<=f*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))}var Va=_a,Fa=oa,Ga=la,Ba=ca,ja=ba,za=va,Ha=ya,Wa=function(){var e=ta();return function(t,i,r,n,a,s){var o,l;for(i||(i=2),r||(r=0),l=n?Math.min(n*i+r,t.length):t.length,o=r;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],a(e,e,s),t[o]=e[0],t[o+1]=e[1];return t}}()},2705:e=>{var t;self,t=()=>{return e={7629:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(9474),s=i(1687),o=i(8652),l=i(8160),c=i(3292),u=i(6354),h=i(8901),d=i(9708),f=i(6914),p=i(2294),m=i(6133),g=i(1152),b=i(8863),v=i(2036),_={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new p.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return r("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"allow"),this._values(t,"_valids")}alter(e){r(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),r(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const i in e){const n=e[i];r("function"==typeof n,"Alteration adjuster for",i,"must be a function"),t.$_terms.alterations.push({target:i,adjuster:n})}return t.$_temp.ruleset=!1,t}artifact(e){return r(void 0!==e,"Artifact cannot be undefined"),r(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return r(!1===e||"string"==typeof e,"Invalid to value"),r(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return r(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return r(e,"Missing error"),r(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(r(!t,"Cannot combine options with description"),t=e.description,e=e.method),r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(r("string"==typeof e,"id must be a non-empty string"),r(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._values(t,"_invalids")}label(e){return r(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return r(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r(t.length,"Missing notes");for(const e of t)r(e&&"string"==typeof e,"Notes must be non-empty strings");return this._inner("notes",t)}only(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){r(e,"Missing preferences"),r(void 0===e.context,"Cannot override context"),r(void 0===e.externals,"Cannot override externals"),r(void 0===e.warnings,"Cannot override warnings"),r(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return r(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}result(e){return r(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),i=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:i}),t}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}tag(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r(t.length,"Missing tags");for(const e of t)r(e&&"string"==typeof e,"Tags must be non-empty strings");return this._inner("tags",t)}unit(e){return r(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];l.verifyFlat(t,"valid");const r=this.allow(...t);return r.$_setFlag("only",!!r._valids,{clone:!1}),r}when(e,t){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const n=c.when(i,e,t);if(!["any","link"].includes(i.type)){const e=n.is?[n]:n.switch;for(const t of e)r(!t.then||"any"===t.then.type||t.then.type===i.type,"Cannot combine",i.type,"with",t.then&&t.then.type),r(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===i.type,"Cannot combine",i.type,"with",t.otherwise&&t.otherwise.type)}return i.$_terms.whens.push(n),i.$_mutateRebuild()}cache(e){r(!this._inRuleset(),"Cannot set caching inside a ruleset"),r(!this._cache,"Cannot override schema cache"),r(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||o.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){r(l.isSchema(e),"Invalid schema object"),r("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),r(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),r(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const i=e.clone();for(const e of Object.keys(t))"type"!==e&&(i[e]=t[e]);t=i}t._ids.concat(e._ids),t._refs.register(e,m.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=v.merge(t._valids,e._valids,e._invalids),t._invalids=v.merge(t._invalids,e._invalids,e._valids);for(const i of e._singleRules.keys())t._singleRules.has(i)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==i)),t._singleRules.delete(i));for(const i of e._rules)e._definition.rules[i.method].multi||t._singleRules.set(i.name,i),t._rules.push(i);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const i=Object.assign({},e._flags);delete i.empty,s(t._flags,i)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const i=Object.assign({},e._flags);delete i.empty,s(t._flags,i)}else s(t._flags,e._flags);for(const i in e.$_terms){const r=e.$_terms[i];r?t.$_terms[i]?t.$_terms[i]=t.$_terms[i].concat(r):t.$_terms[i]=r.slice():t.$_terms[i]||(t.$_terms[i]=r)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return r(!e.base,"Cannot extend type with another base"),h.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){r(!this._inRuleset(),"Cannot fork inside a ruleset");let i=this;for(let r of[].concat(e))r=Array.isArray(r)?r:r.split("."),i=i._ids.fork(r,t,i);return i.$_temp.ruleset=!1,i}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),r(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;r(i>=0&&i<this._rules.length,"Cannot apply rules to empty ruleset");const a=this.clone();for(let s=i;s<a._rules.length;++s){const i=a._rules[s],o=n(i);for(const n in e)t.modifiers[n](o,e[n]),r(o.name===i.name,"Cannot change rule name");a._rules[s]=o,a._singleRules.get(o.name)===i&&a._singleRules.set(o.name,o)}return a.$_temp.ruleset=!1,a.$_mutateRebuild()}get ruleset(){r(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),r(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:i,adjuster:n}of this.$_terms.alterations)e.includes(i)&&(t=n(t),r(l.isSchema(t),"Alteration adjuster for",i,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(e,t){return b.entry(e,this,t)}validateAsync(e,t){return b.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),r(e&&"object"==typeof e,"Invalid options"),r(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)r("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const i=this._definition.rules[t.method],n=t.args;r(i,"Unknown rule",t.method);const a=this.clone();if(n){r(1===Object.keys(n).length||Object.keys(n).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in n){let s=n[e];if(i.argsByName){const o=i.argsByName.get(e);if(o.ref&&l.isResolvable(s))t._resolve.push(e),a.$_mutateRegister(s);else if(o.normalize&&(s=o.normalize(s),n[e]=s),o.assert){const t=l.validateArg(s,e,o);r(!t,t,"or reference")}}void 0!==s?n[e]=s:delete n[e]}}return i.multi||(a._ruleRemove(t.name,{clone:!1}),a._singleRules.set(t.name,t)),!1===a.$_temp.ruleset&&(a.$_temp.ruleset=null),i.priority?a._rules.unshift(t):a._rules.push(t),a}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,i,r,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=!1!==a.flags?this._flags:{},o=a.messages?f.merge(this._definition.messages,a.messages):this._definition.messages;return new u.Report(e,t,i,s,o,r,n)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,i,r){(i=Object.assign({},i)).abortEarly=!0,i._externals=!1,t.snapshot();const n=!b.validate(e,this,t,i,r).errors;return t.restore(),n}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),p.schema(this,e)||this}$_mutateRebuild(){return r(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,t)=>{let{source:i,name:r,path:n,key:a}=t;const s=this._definition[i][r]&&this._definition[i][r].register;!1!==s&&this.$_mutateRegister(e,{family:s,key:a})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e){let{family:t,key:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(e,t),this._ids.register(e,{key:i})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const n=this._definition.flags[e]||{};if(a(t,n.default)&&(t=void 0),a(t,this._flags[e]))return this;const s=!1!==i.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return this[e][l.symbols.parent].call(this,...i)}$_validate(e,t,i){return b.validate(e,this,t,i)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=n(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const i in t){const r=t[i];e.$_terms[i]=r.init}return e.$_mutateRebuild()}_default(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.assertOptions(i,"literal"),r(void 0!==t,"Missing",e,"value"),r("function"==typeof t||!i.literal,"Only function value supports literal option"),"function"==typeof t&&i.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,i){if(!this.$_terms.whens)return{schema:this};const r=[],n=[];for(let a=0;a<this.$_terms.whens.length;++a){const s=this.$_terms.whens[a];if(s.concat){r.push(s.concat),n.push(`${a}.concat`);continue}const o=s.ref?s.ref.resolve(e,t,i):e,l=s.is?[s]:s.switch,c=n.length;for(let c=0;c<l.length;++c){const{is:u,then:h,otherwise:d}=l[c],f=`${a}${s.switch?"."+c:""}`;if(u.$_match(o,t.nest(u,`${f}.is`),i)){if(h){const a=t.localize([...t.path,`${f}.then`],t.ancestors,t.schemas),{schema:s,id:o}=h._generate(e,a,i);r.push(s),n.push(`${f}.then${o?`(${o})`:""}`);break}}else if(d){const a=t.localize([...t.path,`${f}.otherwise`],t.ancestors,t.schemas),{schema:s,id:o}=d._generate(e,a,i);r.push(s),n.push(`${f}.otherwise${o?`(${o})`:""}`);break}}if(s.break&&n.length>c)break}const a=n.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",a),!a)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[a])return{schema:this.$_temp.whens[a],id:a};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,i));for(const e of r)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...r]),this.$_temp.whens[a]=s,{schema:s,id:a}}_inner(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const n=this.clone();return n.$_terms[e]&&!i.override||(n.$_terms[e]=[]),i.single?n.$_terms[e].push(t):n.$_terms[e].push(...t),n.$_temp.ruleset=!1,n}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;const i=!1!==t.clone?this.clone():this;i._singleRules.delete(e);const r=[];for(let t=0;t<i._rules.length;++t){const n=i._rules[t];n.name!==e||n.keep?r.push(n):i._inRuleset()&&t<i.$_temp.ruleset&&--i.$_temp.ruleset}return i._rules=r,i}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const i=this.clone(),n=e[0]===l.symbols.override;if(n&&(e=e.slice(1)),!i[t]&&e.length?i[t]=new v:n&&(i[t]=e.length?new v:null,i.$_mutateRebuild()),!i[t])return i;n&&i[t].override();for(const n of e){r(void 0!==n,"Cannot call allow/valid/invalid with undefined"),r(n!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";i[e]&&(i[e].remove(n),i[e].length||(r("_valids"===t||!i._flags.only,"Setting invalid value",n,"leaves schema rejecting all values due to previous valid rule"),i[e]=null)),i[t].add(n,i._refs)}return i}}};_.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},_.Base.prototype.isImmutable=!0,_.Base.prototype.deny=_.Base.prototype.invalid,_.Base.prototype.disallow=_.Base.prototype.invalid,_.Base.prototype.equal=_.Base.prototype.valid,_.Base.prototype.exist=_.Base.prototype.required,_.Base.prototype.not=_.Base.prototype.invalid,_.Base.prototype.options=_.Base.prototype.prefs,_.Base.prototype.preferences=_.Base.prototype.prefs,e.exports=new _.Base},8652:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(e,["max"]),r(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let i=this._map.get(e);if(i)return i.value=t,void this._list.first(i);i=this._list.unshift({key:e,value:t}),this._map.set(e,i),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),n(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:i}=e;return t.prev=i,i&&(i.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,i)=>{"use strict";const r=i(375),n=i(7916),a=i(5934);let s,o;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=a.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";r(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const n=Object.keys(e).filter((e=>!t.includes(e)));r(0===n.length,`${i} contain unknown keys: ${n}`)},t.checkPreferences=function(e){o=o||i(3378);const t=o.preferences.validate(e);if(t.error)throw new n([t.error.details[0].message])},t.compare=function(e,t,i){switch(i){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e&&e[t.symbols.any];return!!n&&(r(i.legacy||n.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,r){s=s||i(6914),e=e||{},r=r||{};const n=Object.assign({},e,r);return r.errors&&e.errors&&(n.errors=Object.assign({},e.errors,r.errors),n.errors.wrap=Object.assign({},e.errors.wrap,r.errors.wrap)),r.messages&&(n.messages=s.compile(r.messages,e.messages)),delete n[t.symbols.prefs],n},t.tryWithPath=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,i.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,i,r){let{assert:n,message:a}=r;if(t.isSchema(n)){const t=n.validate(e);if(!t.error)return;return t.error.message}if(!n(e))return i?`${i} ${a}`:a},t.verifyFlat=function(e,t){for(const i of e)r(!Array.isArray(i),"Method no longer accepts array arguments:",t)}},3292:(e,t,i)=>{"use strict";const r=i(375),n=i(8160),a=i(6133),s={};t.schema=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.assertOptions(i,["appendPath","override"]);try{return s.schema(e,t,i)}catch(e){throw i.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,i){r(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(r(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const a=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return!1!==i.override?t.valid(e.override,...n):t.valid(...n)};if(s.simple(t))return a(e,t);if("function"==typeof t)return e.custom(t);if(r("object"==typeof t,"Invalid schema content:",typeof t),n.isResolvable(t))return a(e,t);if(n.isSchema(t))return t;if(Array.isArray(t)){for(const i of t)if(!s.simple(i))return e.alternatives().try(...t);return a(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?a(e.date(),t):(r(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return a.isRef(e)?e:a.create(e,t)},t.compile=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.assertOptions(a,["legacy"]);const o=i&&i[n.symbols.any];if(o)return r(a.legacy||o.version===n.version,"Cannot mix different versions of joi schemas:",o.version,n.version),i;if("object"!=typeof i||!a.legacy)return t.schema(e,i,{appendPath:!0});const l=s.walk(i);return l?l.compile(l.root,i):t.schema(e,i,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[n.symbols.any];if(t)return{root:e[t.root],compile:t.compile};r(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const i=s.walk(e[t]);if(i)return i}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,i,o){if(void 0===o&&(r(i&&"object"==typeof i,"Missing options"),o=i,i=a.create(".")),Array.isArray(o)&&(o={switch:o}),n.assertOptions(o,["is","not","then","otherwise","switch","break"]),n.isSchema(i))return r(void 0===o.is,'"is" can not be used with a schema condition'),r(void 0===o.not,'"not" can not be used with a schema condition'),r(void 0===o.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:i,then:o.then,otherwise:o.otherwise,break:o.break});if(r(a.isRef(i)||"string"==typeof i,"Invalid condition:",i),r(void 0===o.not||void 0===o.is,'Cannot combine "is" with "not"'),void 0===o.switch){let l=o;void 0!==o.not&&(l={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return r(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),r(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===o.is||a.isRef(o.is)||n.isSchema(o.is)||(c=c.required()),s.condition(e,{ref:t.ref(i),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}r(Array.isArray(o.switch),'"switch" must be an array'),r(void 0===o.is,'Cannot combine "switch" with "is"'),r(void 0===o.not,'Cannot combine "switch" with "not"'),r(void 0===o.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(i),switch:[],break:o.break};for(let t=0;t<o.switch.length;++t){const i=o.switch[t],s=t===o.switch.length-1;n.assertOptions(i,s?["is","then","otherwise"]:["is","then"]),r(void 0!==i.is,'Switch statement missing "is"'),r(void 0!==i.then,'Switch statement missing "then"');const c={is:e.$_compile(i.is),then:e.$_compile(i.then)};if(a.isRef(i.is)||n.isSchema(i.is)||(c.is=c.is.required()),s){r(void 0===o.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==o.otherwise?o.otherwise:i.otherwise;void 0!==t&&(r(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}l.switch.push(c)}return l},s.condition=function(e,t){for(const i of["then","otherwise"])void 0===t[i]?delete t[i]:t[i]=e.$_compile(t[i]);return t}},6354:(e,t,i)=>{"use strict";const r=i(5688),n=i(8160),a=i(3328);t.Report=class{constructor(e,i,r,n,a,s,o){if(this.code=e,this.flags=n,this.messages=a,this.path=s.path,this.prefs=o,this.state=s,this.value=i,this.message=null,this.template=null,this.local=r||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,i){return t.template(this.value,e,i||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const i of e)"object"!=typeof i&&("string"==typeof i?(t&&(t+="."),t+=i):t+=`[${i}]`);return t},t.template=function(e,t,i,r,s){if(!t)return;if(a.isTemplate(t))return"root"!==i?t:null;let o=s.errors.language;if(n.isResolvable(o)&&(o=o.resolve(e,r,s)),o&&t[o]){if(void 0!==t[o][i])return t[o][i];if(void 0!==t[o]["*"])return t[o]["*"]}return t[i]?t[i]:t["*"]},t.label=function(e,i,r,n){if(e.label)return e.label;if(!r.errors.label)return"";let a=i.path;return"key"===r.errors.label&&i.path.length>1&&(a=i.path.slice(-1)),t.path(a)||t.template(null,r.messages,"root",i,r)||n&&t.template(null,n,"root",i,r)||"value"},t.process=function(e,i,r){if(!e)return null;const{override:n,message:a,details:s}=t.details(e);if(n)return n;if(r.errors.stack)return new t.ValidationError(a,s,i);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(a,s,i);return Error.stackTraceLimit=o,l},t.details=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];const r=[];for(const n of e){if(n instanceof Error){if(!1!==t.override)return{override:n};const e=n.toString();i.push(e),r.push({message:e,type:"override",context:{error:n}});continue}const e=n.toString();i.push(e),r.push({message:e,path:n.path.filter((e=>"object"!=typeof e)),type:n.code,context:n.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:r}},t.ValidationError=class extends Error{constructor(e,t,i){super(e),this._original=i,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=r.error},8901:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(8160),s=i(6914),o={};t.type=function(e,t){const i=Object.getPrototypeOf(e),l=n(i),c=e._assign(Object.create(l)),u=Object.assign({},t);delete u.base,l._definition=u;const h=i._definition||{};u.messages=s.merge(h.messages,u.messages),u.properties=Object.assign({},h.properties,u.properties),c.type=u.type,u.flags=Object.assign({},h.flags,u.flags);const d=Object.assign({},h.terms);if(u.terms)for(const e in u.terms){const t=u.terms[e];r(void 0===c.$_terms[e],"Invalid term override for",u.type,e),c.$_terms[e]=t.init,d[e]=t}u.terms=d,u.args||(u.args=h.args),u.prepare=o.prepare(u.prepare,h.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=o.coerce(u.coerce,h.coerce),u.validate=o.validate(u.validate,h.validate);const f=Object.assign({},h.rules);if(u.rules)for(const e in u.rules){const t=u.rules[e];r("object"==typeof t,"Invalid rule definition for",u.type,e);let i=t.method;if(void 0===i&&(i=function(){return this.$_addRule(e)}),i&&(r(!l[e],"Rule conflict in",u.type,e),l[e]=i),r(!f[e],"Rule conflict in",u.type,e),f[e]=t,t.alias){const e=[].concat(t.alias);for(const i of e)l[i]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),r(!t.argsByName.has(e.name),"Duplicated argument name",e.name),a.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}u.rules=f;const p=Object.assign({},h.modifiers);if(u.modifiers)for(const e in u.modifiers){r(!l[e],"Rule conflict in",u.type,e);const t=u.modifiers[e];r("function"==typeof t,"Invalid modifier definition for",u.type,e);const i=function(t){return this.rule({[e]:t})};l[e]=i,p[e]=t}if(u.modifiers=p,u.overrides){l._super=i,c.$_super={};for(const e in u.overrides)r(i[e],"Cannot override missing",e),u.overrides[e][a.symbols.parent]=i[e],c.$_super[e]=i[e].bind(c);Object.assign(l,u.overrides)}u.cast=Object.assign({},h.cast,u.cast);const m=Object.assign({},h.manifest,u.manifest);return m.build=o.build(u.manifest&&u.manifest.build,h.manifest&&h.manifest.build),u.manifest=m,u.rebuild=o.rebuild(u.rebuild,h.rebuild),c},o.build=function(e,t){return e&&t?function(i,r){return t(e(i,r),r)}:e||t},o.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(i,r){let n;if((!t.from||t.from.includes(typeof i))&&(n=t.method(i,r),n)){if(n.errors||void 0===n.value)return n;i=n.value}if(!e.from||e.from.includes(typeof i)){const t=e.method(i,r);if(t)return t}return n}}:e||t},o.prepare=function(e,t){return e&&t?function(i,r){const n=e(i,r);if(n){if(n.errors||void 0===n.value)return n;i=n.value}return t(i,r)||n}:e||t},o.rebuild=function(e,t){return e&&t?function(i){t(i),e(i)}:e||t},o.validate=function(e,t){return e&&t?function(i,r){const n=t(i,r);if(n){if(n.errors&&(!Array.isArray(n.errors)||n.errors.length))return n;i=n.value}return e(i,r)||n}:e||t}},5107:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(8652),s=i(8160),o=i(3292),l=i(6354),c=i(8901),u=i(9708),h=i(6133),d=i(3328),f=i(1152);let p;const m={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(m.types))};for(const t of e._types)e[t]=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return r(!i.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),m.generate(this,m.types[t],i)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(){return this.any()[t](...arguments)};Object.assign(e,m.methods);for(const t in m.aliases){const i=m.aliases[t];e[t]=e[i]}return e.x=e.expression,f.setup&&f.setup(e),e}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:a.provider,assert(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];m.assert(e,t,!0,r)},attempt(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];return m.assert(e,t,!1,r)},build(e){return r("function"==typeof u.build,"Manifest functionality disabled"),u.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return o.compile(this,e,t)},defaults(e){r("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const i of t._types){const n=e(t[i]());r(s.isSchema(n),"modifier must return a valid schema object"),t[i]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m.generate(this,n,t)}}return t},expression(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new d(...t)},extend(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.verifyFlat(t,"extend"),p=p||i(3378),r(t.length,"You need to provide at least one extension"),this.assert(t,p.extensions);const a=Object.assign({},this);a._types=new Set(a._types);for(let e of t){"function"==typeof e&&(e=e(a)),this.assert(e,p.extension);const t=m.expandExtension(e,a);for(const e of t){r(void 0===a[e.type]||a._types.has(e.type),"Cannot override name",e.type);const t=e.base||this.any(),i=c.type(t,e);a._types.add(e.type),a[e.type]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.generate(this,i,t)}}}return a},isError:l.ValidationError.isError,isExpression:d.isTemplate,isRef:h.isRef,isSchema:s.isSchema,in(){return h.in(...arguments)},override:s.symbols.override,ref(){return h.create(...arguments)},types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in m.aliases)e[t]=this[t]();return e}},m.assert=function(e,t,i,r){const a=r[0]instanceof Error||"string"==typeof r[0]?r[0]:null,o=null!==a?r[1]:r[0],c=t.validate(e,s.preferences({errors:{stack:!0}},o||{}));let u=c.error;if(!u)return c.value;if(a instanceof Error)throw a;const h=i&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof l.ValidationError==0&&(u=n(u)),u.message=a?`${a} ${h}`:h,u},m.generate=function(e,t,i){return r(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&i.length?t._definition.args(t,...i):t},m.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const i=[];for(const r of t._types)if(e.type.test(r)){const n=Object.assign({},e);n.type=r,n.base=t[r](),i.push(n)}return i},e.exports=m.root()},6914:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(3328);t.compile=function(e,t){if("string"==typeof e)return r(!t,"Cannot set single message string"),new a(e);if(a.isTemplate(e))return r(!t,"Cannot set single message template"),e;r("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?n(t):{};for(let i in e){const n=e[i];if("root"===i||a.isTemplate(n)){t[i]=n;continue}if("string"==typeof n){t[i]=new a(n);continue}r("object"==typeof n&&!Array.isArray(n),"Invalid message for",i);const s=i;for(i in t[s]=t[s]||{},n){const e=n[i];"root"===i||a.isTemplate(e)?t[s][i]=e:(r("string"==typeof e,"Invalid message for",i,"in",s),t[s][i]=new a(e))}}return t},t.decompile=function(e){const t={};for(let i in e){const r=e[i];if("root"===i){t.root=r;continue}if(a.isTemplate(r)){t[i]=r.describe({compact:!0});continue}const n=i;for(i in t[n]={},r){const e=r[i];"root"!==i?t[n][i]=e.describe({compact:!0}):t[n].root=e}}return t},t.merge=function(e,i){if(!e)return t.compile(i);if(!i)return e;if("string"==typeof i)return new a(i);if(a.isTemplate(i))return i;const s=n(e);for(let e in i){const t=i[e];if("root"===e||a.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new a(t);continue}r("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const n=e;for(e in s[n]=s[n]||{},t){const i=t[e];"root"===e||a.isTemplate(i)?s[n][e]=i:(r("string"==typeof i,"Invalid message for",e,"in",n),s[n][e]=new a(i))}}return s}},2294:(e,t,i)=>{"use strict";const r=i(375),n=i(8160),a=i(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,i]of e._byId.entries())r(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,i);for(const[t,i]of e._byKey.entries())r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,i)}fork(e,t,i){const a=this._collect(e);a.push({schema:i});const o=a.shift();let l={id:o.id,schema:t(o.schema)};r(n.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of a)l={id:e.id,schema:s.fork(e.schema,l.id,l.schema)};return l.schema}labels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e[0],r=this._get(i);if(!r)return[...t,...e].join(".");const n=e.slice(1);return t=[...t,r.schema._flags.label||i],n.length?r.schema._ids.labels(n,t):t.join(".")}reach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e[0],n=this._get(i);r(n,"Schema does not contain path",[...t,...e].join("."));const a=e.slice(1);return a.length?n.schema._ids.reach(a,[...t,i]):n.schema}register(e){let{key:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!n.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const i=e._flags.id;if(i){const t=this._byId.get(i);r(!t||t.schema===e,"Cannot add different schemas with the same id:",i),r(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}t&&(r(!this._byKey.has(t),"Schema already contains key:",t),r(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=e[0],a=this._get(n);r(a,"Schema does not contain path",[...t,...e].join(".")),i=[a,...i];const s=e.slice(1);return s.length?a.schema._ids._collect(s,[...t,n],i):i}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,i,r){const n=t.schema(e,{each:(e,t)=>{let{key:n}=t;if(i===(e._flags.id||n))return r},ref:!1});return n?n.$_mutateRebuild():e},t.schema=function(e,t){let i;for(const r in e._flags){if("_"===r[0])continue;const n=s.scan(e._flags[r],{source:"flags",name:r},t);void 0!==n&&(i=i||e.clone(),i._flags[r]=n)}for(let r=0;r<e._rules.length;++r){const n=e._rules[r],a=s.scan(n.args,{source:"rules",name:n.name},t);if(void 0!==a){i=i||e.clone();const t=Object.assign({},n);t.args=a,i._rules[r]=t,i._singleRules.get(n.name)===n&&i._singleRules.set(n.name,t)}}for(const r in e.$_terms){if("_"===r[0])continue;const n=s.scan(e.$_terms[r],{source:"terms",name:r},t);void 0!==n&&(i=i||e.clone(),i.$_terms[r]=n)}return i},s.scan=function(e,t,i,r,o){const l=r||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let r=0;r<e.length;++r){const n="terms"===t.source&&"keys"===t.name&&e[r].key,a=s.scan(e[r],t,i,[r,...l],n);void 0!==a&&(c=c||e.slice(),c[r]=a)}return c}if(!1!==i.schema&&n.isSchema(e)||!1!==i.ref&&a.isRef(e)){const r=i.each(e,{...t,path:l,key:o});if(r===e)return;return r}for(const r in e){if("_"===r[0])continue;const n=s.scan(e[r],t,i,[r,...l],o);void 0!==n&&(c=c||Object.assign({},e),c[r]=n)}return c}},6133:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(9621),s=i(8160);let o;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),r(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const i=Object.assign({},l.defaults,t);delete i.prefix;const n=i.separator,a=l.context(e,n,t.prefix);if(i.type=a.type,e=a.key,"value"===i.type)if(a.root&&(r(!n||e[0]!==n,"Cannot specify relative path with root prefix"),i.ancestor="root",e||(e=null)),n&&n===e)e=null,i.ancestor=0;else if(void 0!==i.ancestor)r(!n||!e||e[0]!==n,"Cannot combine prefix with ancestor option");else{const[t,r]=l.ancestor(e,n);r&&""===(e=e.slice(r))&&(e=null),i.ancestor=t}return i.path=n?null===e?[]:e.split(n):[e],new l.Ref(i)},t.in=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,{...i,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},l.Ref=class{constructor(e){r("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),r([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),r(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),r(!e.map||Array.isArray(e.map),"options.map must be an array"),r(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),r("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,i,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return r(!this.in||a.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(i.context,t,a):"local"===this.type?this._resolve(n,t,a):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,a):(r(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,a)):this._resolve(e,t,a)}_resolve(e,t,i){let r;if("value"===this.type&&t.mainstay.shadow&&!1!==i.shadow&&(r=t.mainstay.shadow.get(this.absolute(t))),void 0===r&&(r=a(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(r=this.adjust(r)),this.map){const e=this.map.get(r);void 0!==e&&(r=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,r),r}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),i){const r=void 0===i.global?"$":i.global;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"global"};const n=void 0===i.local?"#":i.local;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"local"};const a=void 0===i.root?"/":i.root;if(a!==t&&e.startsWith(a))return{key:e.slice(a.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let i=2;for(;e[i]===t;)++i;return[i-1,i]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,r){if(e)if(r=void 0===r?t.toParent:r,Array.isArray(e))for(const t of e)this.register(t,r);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-r>=0&&this.refs.push({ancestor:t.ancestor-r,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-r>=0&&this.refs.push({ancestor:e.ancestor-r,root:e.root}),o=o||i(3328),o.isTemplate(e)&&this.register(e.refs(),r)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=n(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,i)=>{"use strict";const r=i(5107),n={};n.wrap=r.string().min(1).max(2).allow(!1),t.preferences=r.object({allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),context:r.object(),convert:r.boolean(),dateFormat:r.valid("date","iso","string","time","utc"),debug:r.boolean(),errors:{escapeHtml:r.boolean(),label:r.valid("path","key",!1),language:[r.string(),r.object().ref()],render:r.boolean(),stack:r.boolean(),wrap:{label:n.wrap,array:n.wrap,string:n.wrap}},externals:r.boolean(),messages:r.object(),noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:r.valid("required","optional","forbidden"),skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()}).strict(),n.nameRx=/^[a-zA-Z0-9]\w*$/,n.rule=r.object({alias:r.array().items(r.string().pattern(n.nameRx)).single(),args:r.array().items(r.string(),r.object({name:r.string().pattern(n.nameRx).required(),ref:r.boolean(),assert:r.alternatives([r.function(),r.object().schema()]).conditional("ref",{is:!0,then:r.required()}),normalize:r.function(),message:r.string().when("assert",{is:r.function(),then:r.required()})})),convert:r.boolean(),manifest:r.boolean(),method:r.function().allow(!1),multi:r.boolean(),validate:r.function()}),t.extension=r.object({type:r.alternatives([r.string(),r.object().regex()]).required(),args:r.function(),cast:r.object().pattern(n.nameRx,r.object({from:r.function().maxArity(1).required(),to:r.function().minArity(1).maxArity(2).required()})),base:r.object().schema().when("type",{is:r.object().regex(),then:r.forbidden()}),coerce:[r.function().maxArity(3),r.object({method:r.function().maxArity(3).required(),from:r.array().items(r.string()).single()})],flags:r.object().pattern(n.nameRx,r.object({setter:r.string(),default:r.any()})),manifest:{build:r.function().arity(2)},messages:[r.object(),r.string()],modifiers:r.object().pattern(n.nameRx,r.function().minArity(1).maxArity(2)),overrides:r.object().pattern(n.nameRx,r.function()),prepare:r.function().maxArity(3),rebuild:r.function().arity(1),rules:r.object().pattern(n.nameRx,n.rule),terms:r.object().pattern(n.nameRx,r.object({init:r.array().allow(null).required(),manifest:r.object().pattern(/.+/,[r.valid("schema","single"),r.object({mapped:r.object({from:r.string().required(),to:r.string().required()}).required()})])})),validate:r.function().maxArity(3)}).strict(),t.extensions=r.array().items(r.object(),r.function().arity(1)).strict(),n.desc={buffer:r.object({buffer:r.string()}),func:r.object({function:r.function().required(),options:{literal:!0}}),override:r.object({override:!0}),ref:r.object({ref:r.object({type:r.valid("value","global","local"),path:r.array().required(),separator:r.string().length(1).allow(!1),ancestor:r.number().min(0).integer().allow("root"),map:r.array().items(r.array().length(2)).min(1),adjust:r.function(),iterables:r.boolean(),in:r.boolean(),render:r.boolean()}).required()}),regex:r.object({regex:r.string().min(3)}),special:r.object({special:r.valid("deep").required()}),template:r.object({template:r.string().required(),options:r.object()}),value:r.object({value:r.alternatives([r.object(),r.array()]).required()})},n.desc.entity=r.alternatives([r.array().items(r.link("...")),r.boolean(),r.function(),r.number(),r.string(),n.desc.buffer,n.desc.func,n.desc.ref,n.desc.regex,n.desc.special,n.desc.template,n.desc.value,r.link("/")]),n.desc.values=r.array().items(null,r.boolean(),r.function(),r.number().allow(1/0,-1/0),r.string().allow(""),r.symbol(),n.desc.buffer,n.desc.func,n.desc.override,n.desc.ref,n.desc.regex,n.desc.template,n.desc.value),n.desc.messages=r.object().pattern(/.+/,[r.string(),n.desc.template,r.object().pattern(/.+/,[r.string(),n.desc.template])]),t.description=r.object({type:r.string().required(),flags:r.object({cast:r.string(),default:r.any(),description:r.string(),empty:r.link("/"),failover:n.desc.entity,id:r.string(),label:r.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:r.boolean(),unit:r.string()}).unknown(),preferences:{allowUnknown:r.boolean(),abortEarly:r.boolean(),artifacts:r.boolean(),cache:r.boolean(),convert:r.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:r.boolean(),label:["path","key"],language:[r.string(),n.desc.ref],wrap:{label:n.wrap,array:n.wrap}},externals:r.boolean(),messages:n.desc.messages,noDefaults:r.boolean(),nonEnumerables:r.boolean(),presence:["required","optional","forbidden"],skipFunctions:r.boolean(),stripUnknown:r.object({arrays:r.boolean(),objects:r.boolean()}).or("arrays","objects").allow(!0,!1),warnings:r.boolean()},allow:n.desc.values,invalid:n.desc.values,rules:r.array().min(1).items({name:r.string().required(),args:r.object().min(1),keep:r.boolean(),message:[r.string(),n.desc.messages],warn:r.boolean()}),keys:r.object().pattern(/.*/,r.link("/")),link:n.desc.ref}).pattern(/^[a-z]\w*$/,r.any())},493:(e,t,i)=>{"use strict";const r=i(8571),n=i(9621),a=i(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,i){this.path=e,this.ancestors=t,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}localize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=new s.State(e,t,this);return i&&r.schemas&&(r.schemas=[s.schemas(i),...r.schemas]),r}nest(e,t){const i=new s.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[s.schemas(e),...i.schemas],i.debug=t,i}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=r(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return a.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,i){if(!e.length)return;if("strip"===i&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let r=this._values;for(let t=0;t<e.length;++t){const i=e[t];let n=r.get(i);n||(n=new Map,r.set(i,n)),r=n}r[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return n(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const i=e.slice(0,-1),r=e[e.length-1],a=n(this._values,i,{iterables:!0});t?a.set(r,t):a&&a.delete(r)}}},3328:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(5277),s=i(1447),o=i(8160),l=i(6354),c=i(6133),u={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=u.Template=class{constructor(e,t){r("string"==typeof e,"Template source must be a string"),r(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,this._settings=n(t),this._parse()}_parse(){if(!this.source.includes("{"))return;const e=u.encode(this.source),t=u.split(e);let i=!1;const r=[],n=t.shift();n&&r.push(n);for(const e of t){const t="{"!==e[0],n=t?"}":"}}",a=e.indexOf(n);if(-1===a||"{"===e[1]){r.push(`{${u.decode(e)}`);continue}let s=e.slice(t?0:1,a);const o=":"===s[0];o&&(s=s.slice(1));const l=this._ref(u.decode(s),{raw:t,wrapped:o});r.push(l),"string"!=typeof l&&(i=!0);const c=e.slice(a+n.length);c&&r.push(u.decode(c))}i?this._template=r:this.rendered=r.join("")}static date(e,t){return u.dateFormat[t.dateFormat].call(e)}describe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),t}static build(e){return new u.Template(e.template,e.options)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[o.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,i,r){return this._template&&1===this._template.length?this._part(this._template[0],e,t,i,r,{}):this.render(e,t,i,r)}_part(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return e.ref?e.ref.resolve(...i):e.formula.evaluate(i)}render(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;const s=[];for(const o of this._template)if("string"==typeof o)s.push(o);else{const l=this._part(o,e,t,i,r,n),c=u.stringify(l,e,t,i,r,n);if(void 0!==c){const e=o.raw||!1===(n.errors&&n.errors.escapeHtml)?c:a(c);s.push(u.wrap(e,o.wrapped&&i.errors.wrap.label))}}return s.join("")}_ref(e,t){let{raw:i,wrapped:r}=t;const n=[],a=e=>{const t=c.create(e,this._settings);return n.push(t),e=>t.resolve(...e)};try{var o=new s.Parser(e,{reference:a,functions:u.functions,constants:u.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(o.single){if("reference"===o.single.type){const e=n[0];return{ref:e,raw:i,refs:n,wrapped:r||"local"===e.type&&"label"===e.key}}return u.stringify(o.single.value)}return{formula:o,raw:i,refs:n}}toString(){return this.source}},u.Template.prototype[o.symbols.template]=!0,u.Template.prototype.isImmutable=!0,u.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>u.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>u.closes.slice(0,t.length)))},u.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},u.split=function(e){const t=[];let i="";for(let r=0;r<e.length;++r){const n=e[r];if("{"===n){let n="";for(;r+1<e.length&&"{"===e[r+1];)n+="{",++r;t.push(i),i=n}else i+=n}return t.push(i),t},u.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},u.stringify=function(e,t,i,r,n){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=typeof e,o=r&&r.errors&&r.errors.wrap||{};let l=!1;if(c.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,i,r,n,{in:e.in,...a})),null===e)return"null";if("string"===s)return u.wrap(e,a.arrayItems&&o.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return u.Template.date(e,r);if(e instanceof Map){const t=[];for(const[i,r]of e.entries())t.push(`${i.toString()} -> ${r.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const h=[];for(const s of e)h.push(u.stringify(s,t,i,r,n,{arrayItems:!0,...a}));return u.wrap(h.join(", "),!l&&o.array)},u.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},u.functions={if:(e,t,i)=>e?t:i,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,i,r,n,a]=this,s=a.messages;if(!s)return"";const o=l.template(t,s[0],e,i,r)||l.template(t,s[1],e,i,r);return o?o.render(t,i,r,n,a):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,i)=>{"use strict";const r=i(375),n=i(1687),a=i(8068),s=i(8160),o=i(3292),l=i(6354),c=i(6133),u={};e.exports=a.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return 1===i.length&&Array.isArray(i[0])?e.try(...i[0]):e.try(...i)},validate(e,t){const{schema:i,error:r,state:a,prefs:s}=t;if(i._flags.match){const t=[],o=[];for(let r=0;r<i.$_terms.matches.length;++r){const n=i.$_terms.matches[r],l=a.nest(n.schema,`match.${r}`);l.snapshot();const c=n.schema.$_validate(e,l,s);c.errors?(o.push(c.errors),l.restore()):(t.push(c.value),l.commit())}if(0===t.length)return{errors:r("alternatives.any",{details:o.map((e=>l.details(e,{override:!1})))})};if("one"===i._flags.match)return 1===t.length?{value:t[0]}:{errors:r("alternatives.one")};if(t.length!==i.$_terms.matches.length)return{errors:r("alternatives.all",{details:o.map((e=>l.details(e,{override:!1})))})};const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(i)?{value:t.reduce(((e,t)=>n(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const o=[];for(let t=0;t<i.$_terms.matches.length;++t){const r=i.$_terms.matches[t];if(r.schema){const i=a.nest(r.schema,`match.${t}`);i.snapshot();const n=r.schema.$_validate(e,i,s);if(!n.errors)return i.commit(),n;i.restore(),o.push({schema:r.schema,reports:n.errors});continue}const n=r.ref?r.ref.resolve(e,a,s):e,l=r.is?[r]:r.switch;for(let i=0;i<l.length;++i){const o=l[i],{is:c,then:u,otherwise:h}=o,d=`match.${t}${r.switch?"."+i:""}`;if(c.$_match(n,a.nest(c,`${d}.is`),s)){if(u)return u.$_validate(e,a.nest(u,`${d}.then`),s)}else if(h)return h.$_validate(e,a.nest(h,`${d}.otherwise`),s)}}return u.errors(o,t)},rules:{conditional:{method(e,t){r(!this._flags._endedSwitch,"Unreachable condition"),r(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),r(void 0===t.break,"Cannot use break option with alternatives conditional");const i=this.clone(),n=o.when(i,e,t),a=n.is?[n]:n.switch;for(const e of a)if(e.then&&e.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}return i.$_terms.matches.push(n),i.$_mutateRebuild()}},match:{method(e){if(r(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)r(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r(t.length,"Missing alternative schemas"),s.verifyFlat(t,"try"),r(!this._flags._endedSwitch,"Unreachable condition");const n=this.clone();for(const e of t)n.$_terms.matches.push({schema:n.$_compile(e)});return n.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,i)=>"is"!==i.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const i of t.matches){const{schema:t,ref:r,is:n,not:a,then:s,otherwise:o}=i;e=t?e.try(t):r?e.conditional(r,{is:n,then:s,not:a,otherwise:o,switch:i.switch}):e.conditional(n,{then:s,otherwise:o})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),u.errors=function(e,t){let{error:i,state:r}=t;if(!e.length)return{errors:i("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const n=new Set,a=[];for(const{reports:t,schema:s}of e){if(t.length>1)return u.unmatched(e,i);const o=t[0];if(o instanceof l.Report==0)return u.unmatched(e,i);if(o.state.path.length!==r.path.length){a.push({type:s.type,report:o});continue}if("any.only"===o.code){for(const e of o.local.valids)n.add(e);continue}const[c,h]=o.code.split(".");"base"===h?n.add(c):a.push({type:s.type,report:o})}return a.length?1===a.length?{errors:a[0].report}:u.unmatched(e,i):{errors:i("alternatives.types",{types:[...n]})}},u.unmatched=function(e,t){const i=[];for(const t of e)i.push(...t.reports);return{errors:t("alternatives.match",l.details(i,{override:!1}))}}},8068:(e,t,i)=>{"use strict";const r=i(375),n=i(7629),a=i(8160),s=i(6914);e.exports=n.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return r("function"==typeof e,"Method must be a function"),r(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,i){let{method:r}=i;try{return r(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){r(a.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return r(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate(e,t,i){let{code:r,local:n}=i;return t.error(r,n)},args:["code","local"],multi:!0}},modifiers:{keep(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message(e,t){e.message=s.compile(t)},warn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build(e,t){for(const i in t){const r=t[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const t of r)e=e[i.slice(0,-1)](t);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const t of r)e=e.shared(t)}else for(const t of r){const{ref:i,is:r,not:n,then:a,otherwise:s,concat:o}=t;e=o?e.concat(o):i?e.when(i,{is:r,not:n,then:a,otherwise:s,switch:t.switch,break:t.break}):e.when(r,{then:a,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:i}of r)t[e]=i;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,i)=>{"use strict";const r=i(375),n=i(9474),a=i(9621),s=i(8068),o=i(8160),l=i(3292),c={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,t){let{schema:i,state:r,prefs:n}=t;if(!Array.isArray(e))return;const a=i.$_getRule("sort");return a?c.sort(i,e,a.args.options,r,n):void 0}},validate(e,t){let{schema:i,error:r}=t;if(!Array.isArray(e)){if(i._flags.single){const t=[e];return t[o.symbols.arraySingle]=!0,{value:t}}return{errors:r("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,t,i){let{state:r,prefs:n,error:a}=t,{schema:s}=i;const o=[e,...r.ancestors];for(let t=0;t<e.length;++t){const i=r.localize([...r.path,t],o,s);if(s.$_match(e[t],i,n))return e}const l=s._flags.label;return l?a("array.hasKnown",{patternLabel:l}):a("array.hasUnknown",null)},multi:!0},items:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.verifyFlat(t,"items");const r=this.$_addRule("items");for(let e=0;e<t.length;++e){const i=o.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});r.$_terms.items.push(i)}return r.$_mutateRebuild()},validate(e,t){let{schema:i,error:r,state:n,prefs:a,errorsArray:s}=t;const l=i.$_terms._requireds.slice(),u=i.$_terms.ordered.slice(),h=[...i.$_terms._inclusions,...l],d=!e[o.symbols.arraySingle];delete e[o.symbols.arraySingle];const f=s();let p=e.length;for(let t=0;t<p;++t){const s=e[t];let o=!1,m=!1;const g=d?t:new Number(t),b=[...n.path,g];if(!i._flags.sparse&&void 0===s){if(f.push(r("array.sparse",{key:g,path:b,pos:t,value:void 0},n.localize(b))),a.abortEarly)return f;u.shift();continue}const v=[e,...n.ancestors];for(const e of i.$_terms._exclusions)if(e.$_match(s,n.localize(b,v,e),a,{presence:"ignore"})){if(f.push(r("array.excludes",{pos:t,value:s},n.localize(b))),a.abortEarly)return f;o=!0,u.shift();break}if(o)continue;if(i.$_terms.ordered.length){if(u.length){const o=u.shift(),l=o.$_validate(s,n.localize(b,v,o),a);if(l.errors){if(f.push(...l.errors),a.abortEarly)return f}else if("strip"===o._flags.result)c.fastSplice(e,t),--t,--p;else{if(!i._flags.sparse&&void 0===l.value){if(f.push(r("array.sparse",{key:g,path:b,pos:t,value:void 0},n.localize(b))),a.abortEarly)return f;continue}e[t]=l.value}continue}if(!i.$_terms.items.length){if(f.push(r("array.orderedLength",{pos:t,limit:i.$_terms.ordered.length})),a.abortEarly)return f;break}}const _=[];let y=l.length;for(let o=0;o<y;++o){const u=n.localize(b,v,l[o]);u.snapshot();const h=l[o].$_validate(s,u,a);if(_[o]=h,!h.errors){if(u.commit(),e[t]=h.value,m=!0,c.fastSplice(l,o),--o,--y,!i._flags.sparse&&void 0===h.value&&(f.push(r("array.sparse",{key:g,path:b,pos:t,value:void 0},n.localize(b))),a.abortEarly))return f;break}u.restore()}if(m)continue;const A=a.stripUnknown&&!!a.stripUnknown.arrays||!1;y=h.length;for(const u of h){let h;const d=l.indexOf(u);if(-1!==d)h=_[d];else{const l=n.localize(b,v,u);if(l.snapshot(),h=u.$_validate(s,l,a),!h.errors){l.commit(),"strip"===u._flags.result?(c.fastSplice(e,t),--t,--p):i._flags.sparse||void 0!==h.value?e[t]=h.value:(f.push(r("array.sparse",{key:g,path:b,pos:t,value:void 0},n.localize(b))),o=!0),m=!0;break}l.restore()}if(1===y){if(A){c.fastSplice(e,t),--t,--p,m=!0;break}if(f.push(...h.errors),a.abortEarly)return f;o=!0;break}}if(!o&&(i.$_terms._inclusions.length||i.$_terms._requireds.length)&&!m){if(A){c.fastSplice(e,t),--t,--p;continue}if(f.push(r("array.includes",{pos:t,value:s},n.localize(b))),a.abortEarly)return f}}return l.length&&c.fillMissedErrors(i,f,l,e,n,a),u.length&&(c.fillOrderedErrors(i,f,u,e,n,a),f.length||c.fillDefault(u,e,n,a)),f.length?f:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,r){let{limit:n}=i,{name:a,operator:s,args:l}=r;return o.compare(e.length,n,s)?e:t.error("array."+a,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:o.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.verifyFlat(t,"ordered");const r=this.$_addRule("items");for(let e=0;e<t.length;++e){const i=o.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});c.validateSingle(i,r),r.$_mutateRegister(i),r.$_terms.ordered.push(i)}return r.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return r(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),r(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,t,i){let{error:r,state:n,prefs:a,schema:s}=t,{options:o}=i;const{value:l,errors:u}=c.sort(s,e,o,n,a);if(u)return u;for(let t=0;t<e.length;++t)if(e[t]!==l[t])return r("array.sort",{order:o.order,by:o.by?o.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),o.assertOptions(t,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const r=o.default(t.separator,".");i.path=r?e.split(r):[e]}else i.comparator=e;return this.$_addRule(i)},validate(e,t,i,s){let{state:o,error:l,schema:c}=t,{comparator:u,options:h}=i,{comparator:d,path:f}=s;const p={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=d||n,g=h.ignoreUndefined;for(let t=0;t<e.length;++t){const i=f?a(e[t],f):e[t],n=d?p.custom:p[typeof i];if(r(n,"Failed to find unique map container for type",typeof i),n instanceof Map){const r=n.entries();let a;for(;!(a=r.next()).done;)if(m(a.value[0],i)){const i=o.localize([...o.path,t],[e,...o.ancestors]),r={pos:t,value:e[t],dupePos:a.value[1],dupeValue:e[a.value[1]]};return f&&(r.path=u),l("array.unique",r,i)}n.set(i,t)}else{if((!g||void 0!==i)&&void 0!==n[i]){const r={pos:t,value:e[t],dupePos:n[i],dupeValue:e[n[i]]};return f&&(r.path=u),l("array.unique",r,o.localize([...o.path,t],[e,...o.ancestors]))}n[i]=t}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,i,r,n,a){const s=[];let o=0;for(const e of i){const t=e._flags.label;t?s.push(t):++o}s.length?o?t.push(e.$_createError("array.includesRequiredBoth",r,{knownMisses:s,unknownMisses:o},n,a)):t.push(e.$_createError("array.includesRequiredKnowns",r,{knownMisses:s},n,a)):t.push(e.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:o},n,a))},c.fillOrderedErrors=function(e,t,i,r,n,a){const s=[];for(const e of i)"required"===e._flags.presence&&s.push(e);s.length&&c.fillMissedErrors(e,t,s,r,n,a)},c.fillDefault=function(e,t,i,r){const n=[];let a=!0;for(let s=e.length-1;s>=0;--s){const o=e[s],l=[t,...i.ancestors],c=o.$_validate(void 0,i.localize(i.path,l,o),r).value;if(a){if(void 0===c)continue;a=!1}n.unshift(c)}n.length&&t.push(...n)},c.fastSplice=function(e,t){let i=t;for(;i<e.length;)e[i++]=e[i];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(r(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,i,r,n){const a="ascending"===i.order?1:-1,s=-1*a,o=a,l=(l,u)=>{let h=c.compare(l,u,s,o);if(null!==h)return h;if(i.by&&(l=i.by.resolve(l,r,n),u=i.by.resolve(u,r,n)),h=c.compare(l,u,s,o),null!==h)return h;const d=typeof l;if(d!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,r,n);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},r,n);return"number"===d?(l-u)*a:l<u?s:o};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,i,r){return e===t?0:void 0===e?1:void 0===t?-1:null===e?r:null===t?i:null}},4937:(e,t,i)=>{"use strict";const r=i(375),n=i(8068),a=i(8160),s=i(2036),o={isBool:function(e){return"boolean"==typeof e}};e.exports=n.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,t){let{schema:i}=t;if("boolean"!=typeof e){if("string"==typeof e){const t=i._flags.sensitive?e:e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e&&(e=i.$_terms.truthy&&i.$_terms.truthy.has(e,null,null,!i._flags.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(e,null,null,!i._flags.sensitive))&&e),{value:e}}},validate(e,t){let{error:i}=t;if("boolean"!=typeof e)return{value:e,errors:i("boolean.base")}},rules:{truthy:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.verifyFlat(t,"truthy");const n=this.clone();n.$_terms.truthy=n.$_terms.truthy||new s;for(let e=0;e<t.length;++e){const i=t[e];r(void 0!==i,"Cannot call truthy with undefined"),n.$_terms.truthy.add(i)}return n}},falsy:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.verifyFlat(t,"falsy");const n=this.clone();n.$_terms.falsy=n.$_terms.falsy||new s;for(let e=0;e<t.length;++e){const i=t[e];r(void 0!==i,"Cannot call falsy with undefined"),n.$_terms.falsy.add(i)}return n}},sensitive:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:o.isBool,to:(e,t)=>e?1:0},string:{from:o.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,i)=>{"use strict";const r=i(375),n=i(8068),a=i(8160),s=i(3328),o={isDate:function(e){return e instanceof Date}};e.exports=n.extend({type:"date",coerce:{from:["number","string"],method(e,t){let{schema:i}=t;return{value:o.parse(e,i._flags.format)||e}}},validate(e,t){let{schema:i,error:r,prefs:n}=t;if(e instanceof Date&&!isNaN(e.getTime()))return;const a=i._flags.format;return n.convert&&a&&"string"==typeof e?{value:e,errors:r("date.format",{format:a})}:{value:e,errors:r("date.base")}},rules:{compare:{method:!1,validate(e,t,i,r){let{date:n}=i,{name:s,operator:o,args:l}=r;const c="now"===n?Date.now():n.getTime();return a.compare(e.getTime(),c,o)?e:t.error("date."+s,{limit:l.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:o.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return r(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return r(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:o.isDate,to:(e,t)=>e.getTime()},string:{from:o.isDate,to(e,t){let{prefs:i}=t;return s.date(e,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),o.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return a.isIsoDate(e)?o.date(e.toString()):null;const i=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return o.date(1*e);if("unix"===t)return o.date(1e3*e);if("string"==typeof i)return null}return o.date(e)},o.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,i)=>{"use strict";const r=i(375),n=i(7824);e.exports=n.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,i){let{n:r}=i;return e.length===r?e:t.error("function.arity",{n:r})}},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return r(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,i){let{n:r}=i;return e.length>=r?e:t.error("function.minArity",{n:r})}},maxArity:{method(e){return r(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,i){let{n:r}=i;return e.length<=r?e:t.error("function.maxArity",{n:r})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,i)=>{"use strict";const r=i(978),n=i(375),a=i(8571),s=i(3652),o=i(8068),l=i(8160),c=i(3292),u=i(6354),h=i(6133),d=i(3328),f={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=o.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,t){let{schema:i,error:r,state:n,prefs:a}=t;if(!e||typeof e!==i.$_property("typeof")||Array.isArray(e))return{value:e,errors:r("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;e=f.clone(e,a);const s=[];if(i.$_terms.renames&&!f.rename(i,e,n,a,s))return{value:e,errors:s};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:e,errors:s};const o=new Set(Object.keys(e));if(i.$_terms.keys){const t=[e,...n.ancestors];for(const r of i.$_terms.keys){const i=r.key,l=e[i];o.delete(i);const c=n.localize([...n.path,i],t,r),u=r.schema.$_validate(l,c,a);if(u.errors){if(a.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[i]=u.value),s.push(...u.errors)}else"strip"===r.schema._flags.result||void 0===u.value&&void 0!==l?delete e[i]:void 0!==u.value&&(e[i]=u.value)}}if(o.size||i._flags._hasPatternMatch){const t=f.unknown(i,e,o,s,n,a);if(t)return t}if(i.$_terms.dependencies)for(const t of i.$_terms.dependencies){if(null!==t.key&&!1===f.isPresent(t.options)(t.key.resolve(e,n,a,null,{shadow:!1})))continue;const r=f.dependencies[t.rel](i,t,e,n,a);if(r){const t=i.$_createError(r.code,e,r.context,n,a);if(a.abortEarly)return{value:e,errors:t};s.push(t)}}return{value:e,errors:s}},rules:{and:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"and"),f.dependency(this,"and",null,t)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,i){d.isTemplate(e)||(e=c.ref(e)),n(void 0===i||"string"==typeof i,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const r=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:i}});return r.$_mutateRegister(e),r.$_mutateRegister(t),r},validate(e,t,i){let{error:r,prefs:n,state:a}=t,{subject:s,schema:o,message:l}=i;const c=s.resolve(e,a,n),u=h.isRef(s)?s.absolute(a):[];return o.$_match(c,a.localize(u,[e,...a.ancestors],o),n)?e:r("object.assert",{subject:s,message:l})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return n("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,i){let{constructor:r,name:n}=i;return e instanceof r?e:t.error("object.instance",{type:n,value:e})},args:["constructor","name"]},keys:{method(e){n(void 0===e||"object"==typeof e,"Object schema must be a valid object"),n(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new f.Keys;for(const i in e)l.tryWithPath((()=>t.$_terms.keys.push({key:i,schema:this.$_compile(e[i])})),i)}else t.$_terms.keys=new f.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,r){let{limit:n}=i,{name:a,operator:s,args:o}=r;return l.compare(Object.keys(e).length,n,s)?e:t.error("object."+a,{limit:o.limit,value:e})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"nand"),f.dependency(this,"nand",null,t)}},or:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"or"),f.dependency(this,"or",null,t)}},oxor:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return f.dependency(this,"oxor",null,t)}},pattern:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e instanceof RegExp;r||(e=this.$_compile(e,{appendPath:!0})),n(void 0!==t,"Invalid rule"),l.assertOptions(i,["fallthrough","matches"]),r&&n(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const a=this.clone();a.$_terms.patterns=a.$_terms.patterns||[];const s={[r?"regex":"schema"]:e,rule:t};return i.matches&&(s.matches=this.$_compile(i.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),a.$_mutateRegister(s.matches),a.$_setFlag("_hasPatternMatch",!0,{clone:!1})),i.fallthrough&&(s.fallthrough=!0),a.$_terms.patterns.push(s),a.$_mutateRegister(t),a}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>h.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),n("string"==typeof t||t instanceof d,"Invalid rename to argument"),n(t!==e,"Cannot rename key to same name:",e),l.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const a=this.clone();a.$_terms.renames=a.$_terms.renames||[];for(const t of a.$_terms.renames)n(t.from!==e,"Cannot rename the same key multiple times");return t instanceof d&&a.$_mutateRegister(t),a.$_terms.renames.push({from:e,to:t,options:r(f.renameDefaults,i)}),a}},schema:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,i){let{type:r}=i;return!l.isSchema(e)||"any"!==r&&e.type!==r?t.error("object.schema",{type:r}):e}},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"with",e,t,i)}},without:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"without",e,t,i)}},xor:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"xor"),f.dependency(this,"xor",null,t)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const i of e.$_terms.keys)l.tryWithPath((()=>t.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);e.$_terms.keys=new f.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:i,key:r=null,peers:n,options:a}of t.dependencies)e=f.dependency(e,i,r,n,a);if(t.patterns)for(const{regex:i,schema:r,rule:n,fallthrough:a,matches:s}of t.patterns)e=e.pattern(i||r,n,{fallthrough:a,matches:s});if(t.renames)for(const{from:i,to:r,options:n}of t.renames)e=e.rename(i,r,n);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),f.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return a(e,{shallow:!0});const i=Object.create(Object.getPrototypeOf(e));return Object.assign(i,e),i}const i=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.apply(this,i)};return i.prototype=a(e.prototype),Object.defineProperty(i,"name",{value:e.name,writable:!1}),Object.defineProperty(i,"length",{value:e.length,writable:!1}),Object.assign(i,e),i},f.dependency=function(e,t,i,r,a){n(null===i||"string"==typeof i,t,"key must be a strings"),a||(a=r.length>1&&"object"==typeof r[r.length-1]?r.pop():{}),l.assertOptions(a,["separator","isPresent"]),r=[].concat(r);const s=l.default(a.separator,"."),o=[];for(const e of r)n("string"==typeof e,t,"peers must be strings"),o.push(c.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==i&&(i=c.ref(i,{separator:s,ancestor:0,prefix:!1}));const u=e.clone();return u.$_terms.dependencies=u.$_terms.dependencies||[],u.$_terms.dependencies.push(new f.Dependency(t,i,o,r,a)),u},f.dependencies={and(e,t,i,r,n){const a=[],s=[],o=t.peers.length,l=f.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(i,r,n,null,{shadow:!1}))?a.push(e.key):s.push(e.key);if(a.length!==o&&s.length!==o)return{code:"object.and",context:{present:s,presentWithLabels:f.keysToLabels(e,s),missing:a,missingWithLabels:f.keysToLabels(e,a)}}},nand(e,t,i,r,n){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,r,n,null,{shadow:!1}))&&a.push(e.key);if(a.length!==t.peers.length)return;const o=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:o,mainWithLabel:f.keysToLabels(e,o),peers:l,peersWithLabels:f.keysToLabels(e,l)}}},or(e,t,i,r,n){const a=f.isPresent(t.options);for(const e of t.peers)if(a(e.resolve(i,r,n,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)}}},oxor(e,t,i,r,n){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,r,n,null,{shadow:!1}))&&a.push(e.key);if(!a.length||1===a.length)return;const o={peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)};return o.present=a,o.presentWithLabels=f.keysToLabels(e,a),{code:"object.oxor",context:o}},with(e,t,i,r,n){const a=f.isPresent(t.options);for(const s of t.peers)if(!1===a(s.resolve(i,r,n,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:f.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:f.keysToLabels(e,s.key)}}},without(e,t,i,r,n){const a=f.isPresent(t.options);for(const s of t.peers)if(a(s.resolve(i,r,n,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:f.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:f.keysToLabels(e,s.key)}}},xor(e,t,i,r,n){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,r,n,null,{shadow:!1}))&&a.push(e.key);if(1===a.length)return;const o={peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)};return 0===a.length?{code:"object.missing",context:o}:(o.present=a,o.presentWithLabels=f.keysToLabels(e,a),{code:"object.xor",context:o})}},f.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},f.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},f.rename=function(e,t,i,r,n){const a={};for(const s of e.$_terms.renames){const o=[],l="string"!=typeof s.from;if(l)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const i=s.from.exec(e);i&&o.push({from:e,to:s.to,match:i})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||o.push(s);for(const c of o){const o=c.from;let u=c.to;if(u instanceof d&&(u=u.render(t,i,r,c.match)),o!==u){if(!s.options.multiple&&a[u]&&(n.push(e.$_createError("object.rename.multiple",t,{from:o,to:u,pattern:l},i,r)),r.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!s.options.override&&!a[u]&&(n.push(e.$_createError("object.rename.override",t,{from:o,to:u,pattern:l},i,r)),r.abortEarly))return!1;void 0===t[o]?delete t[u]:t[u]=t[o],a[u]=!0,s.options.alias||delete t[o]}}}return!0},f.unknown=function(e,t,i,r,n,a){if(e.$_terms.patterns){let s=!1;const o=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),l=[t,...n.ancestors];for(const s of i){const c=t[s],u=[...n.path,s];for(let h=0;h<e.$_terms.patterns.length;++h){const d=e.$_terms.patterns[h];if(d.regex){const e=d.regex.test(s);if(n.mainstay.tracer.debug(n,"rule",`pattern.${h}`,e?"pass":"error"),!e)continue}else if(!d.schema.$_match(s,n.nest(d.schema,`pattern.${h}`),a))continue;i.delete(s);const f=n.localize(u,l,{schema:d.rule,key:s}),p=d.rule.$_validate(c,f,a);if(p.errors){if(a.abortEarly)return{value:t,errors:p.errors};r.push(...p.errors)}if(d.matches&&o[h].push(s),t[s]=p.value,!d.fallthrough)break}}if(s)for(let i=0;i<o.length;++i){const s=o[i];if(!s)continue;const c=e.$_terms.patterns[i].matches,h=n.localize(n.path,l,c),d=c.$_validate(s,h,a);if(d.errors){const i=u.details(d.errors,{override:!1});i.matches=s;const o=e.$_createError("object.pattern.match",t,i,n,a);if(a.abortEarly)return{value:t,errors:o};r.push(o)}}}if(i.size&&(e.$_terms.keys||e.$_terms.patterns)){if(a.stripUnknown&&!e._flags.unknown||a.skipFunctions){const e=!(!a.stripUnknown||!0!==a.stripUnknown&&!a.stripUnknown.objects);for(const r of i)e?(delete t[r],i.delete(r)):"function"==typeof t[r]&&i.delete(r)}if(!l.default(e._flags.unknown,a.allowUnknown))for(const s of i){const i=n.localize([...n.path,s],[]),o=e.$_createError("object.unknown",t[s],{child:s},i,a,{flags:!1});if(a.abortEarly)return{value:t,errors:o};r.push(o)}}},f.Dependency=class{constructor(e,t,i,r,n){this.rel=e,this.key=t,this.peers=i,this.paths=r,this.options=n}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},f.Keys=class extends Array{concat(e){const t=this.slice(),i=new Map;for(let e=0;e<t.length;++e)i.set(t[e].key,e);for(const r of e){const e=r.key,n=i.get(e);void 0!==n?t[n]={key:e,schema:t[n].schema.concat(r.schema)}:t.push(r)}return t}}},8785:(e,t,i)=>{"use strict";const r=i(375),n=i(8068),a=i(8160),s=i(3292),o=i(6354),l={};e.exports=n.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,t){let{schema:i,state:n,prefs:a}=t;r(i.$_terms.link,"Uninitialized link schema");const s=l.generate(i,e,n,a),o=i.$_terms.link[0].ref;return s.$_validate(e,n.nest(s,`link:${o.display}:${s.type}`),a)},generate:(e,t,i,r)=>l.generate(e,t,i,r),rules:{ref:{method(e){r(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),r("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),r("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat(e){r(this.$_terms.link,"Uninitialized link schema"),r(a.isSchema(e),"Invalid schema object"),r("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(r(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,i,r){let n=i.mainstay.links.get(e);if(n)return n._generate(t,i,r).schema;const a=e.$_terms.link[0].ref,{perspective:s,path:o}=l.perspective(a,i);l.assert(s,"which is outside of schema boundaries",a,e,i,r);try{n=o.length?s.$_reach(o):s}catch(t){l.assert(!1,"to non-existing schema",a,e,i,r)}return l.assert("link"!==n.type,"which is another link",a,e,i,r),e._flags.relative||i.mainstay.links.set(e,n),n._generate(t,i,r).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:i,key:r}of t.schemas){if((i._flags.id||r)===e.path[0])return{perspective:i,path:e.path.slice(1)};if(i.$_terms.shared)for(const t of i.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,i,n,a,s){e||r(!1,`"${o.label(n._flags,a,s)}" contains link reference "${i.display}" ${t}`)}},3832:(e,t,i)=>{"use strict";const r=i(375),n=i(8068),a=i(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=n.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,t){let{schema:i,error:r}=t;if(!e.match(s.numberRx))return;e=e.trim();const n={value:parseFloat(e)};if(0===n.value&&(n.value=0),!i._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(n.value)))return n.errors=r("number.unsafe"),n}else{const t=n.value.toString();if(t.match(/e/i))return n;if(t!==s.normalizeDecimal(e))return n.errors=r("number.unsafe"),n}return n}},validate(e,t){let{schema:i,error:r,prefs:n}=t;if(e===1/0||e===-1/0)return{value:e,errors:r("number.infinity")};if(!a.isNumber(e))return{value:e,errors:r("number.base")};const s={value:e};if(n.convert){const e=i.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);s.value=Math.round(s.value*t)/t}}return 0===s.value&&(s.value=0),!i._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=r("number.unsafe")),s},rules:{compare:{method:!1,validate(e,t,i,r){let{limit:n}=i,{name:s,operator:o,args:l}=r;return a.compare(e,n,o)?e:t.error("number."+s,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:a.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,i,r){let{base:n}=i;return e*(1/n)%1==0?e:t.error("number.multiple",{multiple:r.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return r(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,i){let{limit:r}=i;const n=e.toString().match(s.precisionRx);return Math.max((n[1]?n[1].length:0)-(n[2]?parseInt(n[2],10):0),0)<=r?e:t.error("number.precision",{limit:r,value:e})},convert:!0},sign:{method(e){return r(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,i){let{sign:r}=i;return"negative"===r&&e<0||"positive"===r&&e>0?e:t.error(`number.${r}`)}},unsafe:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,i)=>{"use strict";const r=i(7824);e.exports=r.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,i)=>{"use strict";const r=i(375),n=i(5380),a=i(1745),s=i(9959),o=i(6064),l=i(9926),c=i(5752),u=i(8068),h=i(8160),d={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=u.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,t){let{schema:i,state:r,prefs:n}=t;const a=i.$_getRule("normalize");a&&(e=e.normalize(a.args.form));const s=i.$_getRule("case");s&&(e="upper"===s.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const o=i.$_getRule("trim");if(o&&o.args.enabled&&(e=e.trim()),i.$_terms.replacements)for(const t of i.$_terms.replacements)e=e.replace(t.pattern,t.replacement);const l=i.$_getRule("hex");if(l&&l.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),i.$_getRule("isoDate")){const t=d.isoDate(e);t&&(e=t)}if(i._flags.truncate){const t=i.$_getRule("max");if(t){let a=t.args.limit;if(h.isResolvable(a)&&(a=a.resolve(e,r,n),!h.limit(a)))return{value:e,errors:i.$_createError("any.ref",a,{ref:t.args.limit,arg:"limit",reason:"must be a positive integer"},r,n)};e=e.slice(0,a)}}return{value:e}}},validate(e,t){let{schema:i,error:r}=t;if("string"!=typeof e)return{value:e,errors:r("string.base")};if(""===e){const t=i.$_getRule("min");if(t&&0===t.args.limit)return;return{value:e,errors:r("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),r("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,i){let{options:r}=i;return d.base64Regex[r.paddingRequired][r.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return r(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,i){let{direction:r}=i;return"lower"===r&&e===e.toLocaleLowerCase()||"upper"===r&&e===e.toLocaleUpperCase()?e:t.error(`string.${r}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let i=e.length,r=0,n=1;for(;i--;){const t=e.charAt(i)*n;r+=t-9*(t>9),n^=3}return r>0&&r%10==0?e:t.error("string.creditCard")}},dataUri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},r("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,i){let{options:r}=i;const n=e.match(d.dataUriRegex);if(n){if(!n[2])return e;if("base64"!==n[2])return e;if(d.base64Regex[r.paddingRequired].false.test(n[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&h.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=d.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate(e,t,i,r){let{address:a}=r;return n.isValid(e,a)?e:t.error("string.domain")}},email:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),r(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=d.addressOptions(e),i=new RegExp(`\\s*[${e.separator?o(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:i,address:t})},validate(e,t,i,r){let{options:n}=i,{regex:s,address:o}=r;const l=n.multiple?e.split(s):[e],c=[];for(const e of l)a.isValid(e,o)||c.push(e);return c.length?t.error("string.email",{value:e,invalids:c}):e}},guid:{alias:"uuid",method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["version","separator"]);let t="";if(e.version){const i=[].concat(e.version);r(i.length>=1,"version must have at least 1 valid version specified");const n=new Set;for(let e=0;e<i.length;++e){const a=i[e];r("string"==typeof a,"version at position "+e+" must be a string");const s=d.guidVersions[a.toLowerCase()];r(s,"version at position "+e+" must be one of "+Object.keys(d.guidVersions).join(", ")),r(!n.has(s),"version at position "+e+" must not be a duplicate"),t+=s,n.add(s)}}r(d.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,n=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${i})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:n})},validate(e,t,i,r){let{regex:n}=r;const a=n.exec(e);return a?d.guidBrackets[a[1]]!==a[a.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["byteAligned"]),e={byteAligned:!1,...e},r("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,i){let{options:r}=i;return d.hexRegex.test(e)?r.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>n.isValid(e,{minDomainSegments:1})||d.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["cidr","version"]);const{cidr:t,versions:i,regex:r}=s.regex(e),n=e.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:n}},regex:r})},validate(e,t,i,r){let{options:n}=i,{regex:a}=r;return a.test(e)?e:n.version?t.error("string.ipVersion",{value:e,cidr:n.cidr,version:n.version}):t.error("string.ip",{value:e,cidr:n.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,t){let{error:i}=t;return d.isoDate(e)?e:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>d.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return d.length(this,"length",e,"=",t)},validate(e,t,i,r){let{limit:n,encoding:a}=i,{name:s,operator:o,args:l}=r;const c=!a&&e.length;return h.compare(c,n,o)?e:t.error("string."+s,{limit:l.limit,value:e,encoding:a})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return d.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return d.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return r(d.normalizationForms.includes(e),"normalization form must be one of "+d.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,t,i){let{error:r}=t,{form:n}=i;return e===e.normalize(n)?e:r("string.normalize",{value:e,form:n})},convert:!0},pattern:{alias:"regex",method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(e instanceof RegExp,"regex must be a RegExp"),r(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),h.assertOptions(t,["invert","name"]);const i=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:i})},validate(e,t,i,r){let{regex:n,options:a}=i,{errorCode:s}=r;return n.test(e)^a.invert?e:t.error(s,{name:a.name,regex:n,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(o(e),"g")),r(e instanceof RegExp,"pattern must be a RegExp"),r("string"==typeof t,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:e,replacement:t}),i}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,i){let{enabled:r}=i;return r&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&h.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:i}=c.regex(e),r=e.domain?d.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:r,scheme:i})},validate(e,t,i,r){let{options:a}=i,{regex:s,domain:o,scheme:l}=r;if(["http:/","https:/"].includes(e))return t.error("string.uri");const c=s.exec(e);if(c){const i=c[1]||c[2];return!o||a.allowRelative&&!i||n.isValid(i,o)?e:t.error("string.domain",{value:i})}return a.relativeOnly?t.error("string.uriRelativeOnly"):a.scheme?t.error("string.uriCustomScheme",{scheme:l,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:i,replacement:r}of t.replacements)e=e.replace(i,r);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),d.addressOptions=function(e){if(!e)return e;if(r(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),r(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return r(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds);r("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),r(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),r(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),d.validateTlds(e.tlds.deny,"tlds.deny"),e;const i=e.tlds.allow;return i?!0===i?(r(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds)):(Array.isArray(i)&&(e=Object.assign({},e,{tlds:{allow:new Set(i)}})),r(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),d.validateTlds(e.tlds.allow,"tlds.allow"),e):e},d.validateTlds=function(e,t){for(const i of e)r(n.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},d.isoDate=function(e){if(!h.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},d.length=function(e,t,i,n,a){return r(!a||!1,"Invalid encoding:",a),e.$_addRule({name:t,method:"length",args:{limit:i,encoding:a},operator:n})}},8826:(e,t,i)=>{"use strict";const r=i(375),n=i(8068),a={};a.Map=class extends Map{slice(){return new a.Map(this)}},e.exports=n.extend({type:"symbol",terms:{map:{init:new a.Map}},coerce:{method(e,t){let{schema:i,error:r}=t;const n=i.$_terms.map.get(e);return n&&(e=n),i._flags.only&&"symbol"!=typeof e?{value:e,errors:r("symbol.map",{map:i.$_terms.map})}:{value:e}}},validate(e,t){let{error:i}=t;if("symbol"!=typeof e)return{value:e,errors:i("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),r(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),i=[];for(const n of e){r(n&&n[Symbol.iterator],"Entry must be an iterable");const[e,a]=n;r("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),r("symbol"==typeof a,"Value must be a Symbol"),t.$_terms.map.set(e,a),i.push(a)}return t.valid(...i)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(738),s=i(9621),o=i(8160),l=i(6354),c=i(493),u={result:Symbol("result")};t.entry=function(e,t,i){let n=o.defaults;i&&(r(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),r(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),n=o.preferences(o.defaults,i));const a=u.entry(e,t,n);r(!a.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:a.value};return a.error&&(s.error=a.error),a.mainstay.warnings.length&&(s.warning=l.details(a.mainstay.warnings)),a.mainstay.debug&&(s.debug=a.mainstay.debug),a.mainstay.artifacts&&(s.artifacts=a.mainstay.artifacts),s},t.entryAsync=async function(e,t,i){let r=o.defaults;i&&(r=o.preferences(o.defaults,i));const n=u.entry(e,t,r),a=n.mainstay;if(n.error)throw a.debug&&(n.error.debug=a.debug),n.error;if(a.externals.length){let t=n.value;const c=[];for(const n of a.externals){const h=n.state.path,d="link"===n.schema.type?a.links.get(n.schema):null;let f,p,m=t;const g=h.length?[t]:[],b=h.length?s(e,h):e;if(h.length){f=h[h.length-1];let e=t;for(const t of h.slice(0,-1))e=e[t],g.unshift(e);p=g[0],m=p[f]}try{const e=(e,t)=>(d||n.schema).$_createError(e,m,t,n.state,r),s=await n.method(m,{schema:n.schema,linked:d,state:n.state,prefs:i,original:b,error:e,errorsArray:u.errorsArray,warn:(e,t)=>a.warnings.push((d||n.schema).$_createError(e,m,t,n.state,r)),message:(e,t)=>(d||n.schema).$_createError("external",m,t,n.state,r,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(a.tracer.log(n.schema,n.state,"rule","external","error"),c.push(s),r.abortEarly)break;continue}if(Array.isArray(s)&&s[o.symbols.errors]){if(a.tracer.log(n.schema,n.state,"rule","external","error"),c.push(...s),r.abortEarly)break;continue}p?(a.tracer.value(n.state,"rule",m,s,"external"),p[f]=s):(a.tracer.value(n.state,"rule",t,s,"external"),t=s)}catch(e){throw r.errors.label&&(e.message+=` (${n.label})`),e}}if(n.value=t,c.length)throw n.error=l.process(c,e,r),a.debug&&(n.error.debug=a.debug),n.error}if(!r.warnings&&!r.debug&&!r.artifacts)return n.value;const c={value:n.value};return a.warnings.length&&(c.warning=l.details(a.warnings)),a.debug&&(c.debug=a.debug),a.artifacts&&(c.artifacts=a.artifacts),c},u.Mainstay=class{constructor(e,t,i){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=i,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},u.entry=function(e,i,r){const{tracer:n,cleanup:a}=u.tracer(i,r),s=r.debug?[]:null,o=i._ids._schemaChain?new Map:null,h=new u.Mainstay(n,s,o),d=i._ids._schemaChain?[{schema:i}]:null,f=new c([],[],{mainstay:h,schemas:d}),p=t.validate(e,i,f,r);a&&i.$_root.untrace();const m=l.process(p.errors,e,r);return{value:p.value,error:m,mainstay:h}},u.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(r(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:u.ignore}},t.validate=function(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,i,r).schema),t._preferences&&(r=u.prefs(t,r)),t._cache&&r.cache){const r=t._cache.get(e);if(i.mainstay.tracer.debug(i,"validate","cached",!!r),r)return r}const a=(n,a,s)=>t.$_createError(n,e,a,s||i,r),s={original:e,prefs:r,schema:t,state:i,error:a,errorsArray:u.errorsArray,warn:(e,t,r)=>i.mainstay.warnings.push(a(e,t,r)),message:(n,a)=>t.$_createError("custom",e,a,i,r,{messages:n})};i.mainstay.tracer.entry(t,i);const l=t._definition;if(l.prepare&&void 0!==e&&r.convert){const t=l.prepare(e,s);if(t){if(i.mainstay.tracer.value(i,"prepare",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(l.coerce&&void 0!==e&&r.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,s);if(t){if(i.mainstay.tracer.value(i,"coerced",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}const c=t._flags.empty;c&&c.$_match(u.trim(e,t),i.nest(c),o.defaults)&&(i.mainstay.tracer.value(i,"empty",e,void 0),e=void 0);const h=n.presence||t._flags.presence||(t._flags._endedSwitch?null:r.presence);if(void 0===e){if("forbidden"===h)return u.finalize(e,null,s);if("required"===h)return u.finalize(e,[t.$_createError("any.required",e,null,i,r)],s);if("optional"===h){if(t._flags.default!==o.symbols.deepDefault)return u.finalize(e,null,s);i.mainstay.tracer.value(i,"default",e,{}),e={}}}else if("forbidden"===h)return u.finalize(e,[t.$_createError("any.unknown",e,null,i,r)],s);const d=[];if(t._valids){const n=t._valids.get(e,i,r,t._flags.insensitive);if(n)return r.convert&&(i.mainstay.tracer.value(i,"valids",e,n.value),e=n.value),i.mainstay.tracer.filter(t,i,"valid",n),u.finalize(e,null,s);if(t._flags.only){const n=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},i,r);if(r.abortEarly)return u.finalize(e,[n],s);d.push(n)}}if(t._invalids){const n=t._invalids.get(e,i,r,t._flags.insensitive);if(n){i.mainstay.tracer.filter(t,i,"invalid",n);const a=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},i,r);if(r.abortEarly)return u.finalize(e,[a],s);d.push(a)}}if(l.validate){const t=l.validate(e,s);if(t&&(i.mainstay.tracer.value(i,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return d.push(t.errors),u.finalize(e,d,s);if(t.errors.length)return d.push(...t.errors),u.finalize(e,d,s)}}return t._rules.length?u.rules(e,d,s):u.finalize(e,d,s)},u.rules=function(e,t,i){const{schema:r,state:n,prefs:a}=i;for(const s of r._rules){const l=r._definition.rules[s.method];if(l.convert&&a.convert){n.mainstay.tracer.log(r,n,"rule",s.name,"full");continue}let c,h=s.args;if(s._resolve.length){h=Object.assign({},h);for(const t of s._resolve){const i=l.argsByName.get(t),s=h[t].resolve(e,n,a),u=i.normalize?i.normalize(s):s,d=o.validateArg(u,null,i);if(d){c=r.$_createError("any.ref",s,{arg:t,ref:h[t],reason:d},n,a);break}h[t]=u}}c=c||l.validate(e,i,h,s);const d=u.rule(c,s);if(d.errors){if(n.mainstay.tracer.log(r,n,"rule",s.name,"error"),s.warn){n.mainstay.warnings.push(...d.errors);continue}if(a.abortEarly)return u.finalize(e,d.errors,i);t.push(...d.errors)}else n.mainstay.tracer.log(r,n,"rule",s.name,"pass"),n.mainstay.tracer.value(n,"rule",e,d.value,s.name),e=d.value}return u.finalize(e,t,i)},u.rule=function(e,t){return e instanceof l.Report?(u.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[o.symbols.errors]?(e.forEach((e=>u.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},u.error=function(e,t){return t.message&&e._setTemplate(t.message),e},u.finalize=function(e,t,i){t=t||[];const{schema:n,state:a,prefs:s}=i;if(t.length){const r=u.default("failover",void 0,t,i);void 0!==r&&(a.mainstay.tracer.value(a,"failover",e,r),e=r,t=[])}if(t.length&&n._flags.error)if("function"==typeof n._flags.error){t=n._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)r(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[n._flags.error];if(void 0===e){const r=u.default("default",e,t,i);a.mainstay.tracer.value(a,"default",e,r),e=r}if(n._flags.cast&&void 0!==e){const t=n._definition.cast[n._flags.cast];if(t.from(e)){const r=t.to(e,i);a.mainstay.tracer.value(a,"cast",e,r,n._flags.cast),e=r}}if(n.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of n.$_terms.externals)a.mainstay.externals.push({method:e,schema:n,state:a,label:l.label(n._flags,a,s)});const o={value:e,errors:t.length?t:null};return n._flags.result&&(o.value="strip"===n._flags.result?void 0:i.original,a.mainstay.tracer.value(a,n._flags.result,e,o.value),a.shadow(e,n._flags.result)),n._cache&&!1!==s.cache&&!n._refs.length&&n._cache.set(i.original,o),void 0===e||o.errors||void 0===n._flags.artifact||(a.mainstay.artifacts=a.mainstay.artifacts||new Map,a.mainstay.artifacts.has(n._flags.artifact)||a.mainstay.artifacts.set(n._flags.artifact,[]),a.mainstay.artifacts.get(n._flags.artifact).push(a.path)),o},u.prefs=function(e,t){const i=t===o.defaults;return i&&e._preferences[o.symbols.prefs]?e._preferences[o.symbols.prefs]:(t=o.preferences(t,e._preferences),i&&(e._preferences[o.symbols.prefs]=t),t)},u.default=function(e,t,i,r){const{schema:a,state:s,prefs:l}=r,c=a._flags[e];if(l.noDefaults||void 0===c)return t;if(s.mainstay.tracer.log(a,s,"rule",e,"full"),!c)return c;if("function"==typeof c){const o=c.length?[n(s.ancestors[0]),r]:[];try{return c(...o)}catch(t){return void i.push(a.$_createError(`any.${e}`,null,{error:t},s,l))}}return"object"!=typeof c?c:c[o.symbols.literal]?c.literal:o.isResolvable(c)?c.resolve(t,s,l):n(c)},u.trim=function(e,t){if("string"!=typeof e)return e;const i=t.$_getRule("trim");return i&&i.args.enabled?e.trim():e},u.ignore={active:!1,debug:a,entry:a,filter:a,log:a,resolve:a,value:a},u.errorsArray=function(){const e=[];return e[o.symbols.errors]=!0,e}},2036:(e,t,i)=>{"use strict";const r=i(375),n=i(9474),a=i(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){a.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,i){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const i of[...t._values,...t._refs])e.add(i)}if(i)for(const t of[...i._values,...i._refs])e.remove(t);return e.length?e:null}remove(e){a.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,i,r){return!!this.get(e,t,i,r)}get(e,t,i,r){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&r){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(n(t,e))return{value:t};if(t)for(const a of this._refs){const s=a.resolve(e,t,i,null,{in:!0});if(void 0===s)continue;const o=a.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of o)if(typeof t==typeof e)if(r&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:a}}else if(n(t,e))return{value:t,ref:a}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){r(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[a.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const i of e)"string"==typeof i&&t.set(i.toLowerCase(),i);return t}},978:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(1687),s=i(9621),o={};e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(e&&"object"==typeof e,"Invalid defaults value: must be an object"),r(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),r("object"==typeof i,"Invalid options: must be an object"),!t)return null;if(i.shallow)return o.applyToDefaultsWithShallow(e,t,i);const s=n(e);if(!0===t)return s;const l=void 0!==i.nullOverride&&i.nullOverride;return a(s,t,{nullOverride:l,mergeArrays:!1})},o.applyToDefaultsWithShallow=function(e,t,i){const l=i.shallow;r(Array.isArray(l),"Invalid keys");const c=new Map,u=!0===t?null:new Set;for(let i of l){i=Array.isArray(i)?i:i.split(".");const r=s(e,i);r&&"object"==typeof r?c.set(r,u&&s(t,i)||r):u&&u.add(i)}const h=n(e,{},c);if(!u)return h;for(const e of u)o.reachCopy(h,t,e);const d=void 0!==i.nullOverride&&i.nullOverride;return a(h,t,{nullOverride:d,mergeArrays:!1})},o.reachCopy=function(e,t,i){for(const e of i){if(!(e in t))return;const i=t[e];if("object"!=typeof i||null===i)return;t=i}const r=t;let n=e;for(let e=0;e<i.length-1;++e){const t=i[e];"object"!=typeof n[t]&&(n[t]={}),n=n[t]}n[i[i.length-1]]=r}},375:(e,t,i)=>{"use strict";const r=i(7916);e.exports=function(e){if(!e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(1===i.length&&i[0]instanceof Error)throw i[0];throw new r(i)}}},8571:(e,t,i)=>{"use strict";const r=i(9621),n=i(4277),a=i(7043),s={needsProtoHack:new Set([n.set,n.map,n.weakSet,n.weakMap])};e.exports=s.clone=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;let r=s.clone,o=i;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);r=e=>e}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const l=n.getInternalProto(e);if(l===n.buffer)return!1;if(l===n.date)return new Date(e.getTime());if(l===n.regex)return new RegExp(e);const c=s.base(e,l,t);if(c===e)return e;if(o&&o.set(e,c),l===n.set)for(const i of e)c.add(r(i,t,o));else if(l===n.map)for(const[i,n]of e)c.set(i,r(n,t,o));const u=a.keys(e,t);for(const i of u){if("__proto__"===i)continue;if(l===n.array&&"length"===i){c.length=e.length;continue}const a=Object.getOwnPropertyDescriptor(e,i);a?a.get||a.set?Object.defineProperty(c,i,a):a.enumerable?c[i]=r(e[i],t,o):Object.defineProperty(c,i,{enumerable:!1,writable:!0,configurable:!0,value:r(e[i],t,o)}):Object.defineProperty(c,i,{enumerable:!0,writable:!0,configurable:!0,value:r(e[i],t,o)})}return c},s.cloneWithShallow=function(e,t){const i=t.shallow;(t=Object.assign({},t)).shallow=!1;const n=new Map;for(const t of i){const i=r(e,t);"object"!=typeof i&&"function"!=typeof i||n.set(i,i)}return s.clone(e,t,n)},s.base=function(e,t,i){if(!1===i.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===n.array?[]:{};const r=Object.getPrototypeOf(e);if(r&&r.isImmutable)return e;if(t===n.array){const e=[];return r!==t&&Object.setPrototypeOf(e,r),e}if(s.needsProtoHack.has(t)){const e=new r.constructor;return r!==t&&Object.setPrototypeOf(e,r),e}return Object.create(r)}},9474:(e,t,i)=>{"use strict";const r=i(4277),n={mismatched:null};e.exports=function(e,t,i){return i=Object.assign({prototype:!0},i),!!n.isDeepEqual(e,t,i,[])},n.isDeepEqual=function(e,t,i,a){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!i.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const o=n.getSharedType(e,t,!!i.prototype);switch(o){case r.buffer:return!1;case r.promise:return e===t;case r.regex:return e.toString()===t.toString();case n.mismatched:return!1}for(let i=a.length-1;i>=0;--i)if(a[i].isSame(e,t))return!0;a.push(new n.SeenEntry(e,t));try{return!!n.isDeepEqualObj(o,e,t,i,a)}finally{a.pop()}},n.getSharedType=function(e,t,i){if(i)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?n.mismatched:r.getInternalProto(e);const a=r.getInternalProto(e);return a!==r.getInternalProto(t)?n.mismatched:a},n.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},n.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},n.isSetSimpleEqual=function(e,t){for(const i of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,i))return!1;return!0},n.isDeepEqualObj=function(e,t,i,a,s){const{isDeepEqual:o,valueOf:l,hasOwnEnumerableProperty:c}=n,{keys:u,getOwnPropertySymbols:h}=Object;if(e===r.array){if(!a.part){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!o(t[e],i[e],a,s))return!1;return!0}for(const e of t)for(const t of i)if(o(e,t,a,s))return!0}else if(e===r.set){if(t.size!==i.size)return!1;if(!n.isSetSimpleEqual(t,i)){const e=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(t)){if(e.delete(i))continue;let t=!1;for(const r of e)if(o(i,r,a,s)){e.delete(r),t=!0;break}if(!t)return!1}}}else if(e===r.map){if(t.size!==i.size)return!1;for(const[e,r]of Map.prototype.entries.call(t)){if(void 0===r&&!Map.prototype.has.call(i,e))return!1;if(!o(r,Map.prototype.get.call(i,e),a,s))return!1}}else if(e===r.error&&(t.name!==i.name||t.message!==i.message))return!1;const d=l(t),f=l(i);if((t!==d||i!==f)&&!o(d,f,a,s))return!1;const p=u(t);if(!a.part&&p.length!==u(i).length&&!a.skip)return!1;let m=0;for(const e of p)if(a.skip&&a.skip.includes(e))void 0===i[e]&&++m;else{if(!c(i,e))return!1;if(!o(t[e],i[e],a,s))return!1}if(!a.part&&p.length-m!==u(i).length)return!1;if(!1!==a.symbols){const e=h(t),r=new Set(h(i));for(const n of e){if(!a.skip||!a.skip.includes(n))if(c(t,n)){if(!c(i,n))return!1;if(!o(t[n],i[n],a,s))return!1}else if(c(i,n))return!1;r.delete(n)}for(const e of r)if(c(i,e))return!1}return!0},n.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,i)=>{"use strict";const r=i(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:r(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let i="";for(let r=0;r<e.length;++r){const n=e.charCodeAt(r);t.isSafe(n)?i+=e[r]:i+=t.escapeHtmlChar(n)}return i},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,i)=>{"use strict";const r=i(375),n=i(8571),a=i(7043),s={};e.exports=s.merge=function(e,t,i){if(r(e&&"object"==typeof e,"Invalid target value: must be an object"),r(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(i=Object.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(t)){r(Array.isArray(e),"Cannot merge array onto an object"),i.mergeArrays||(e.length=0);for(let r=0;r<t.length;++r)e.push(n(t[r],{symbols:i.symbols}));return e}const o=a.keys(t,i);for(let r=0;r<o.length;++r){const a=o[r];if("__proto__"===a||!Object.prototype.propertyIsEnumerable.call(t,a))continue;const l=t[a];if(l&&"object"==typeof l){if(e[a]===l)continue;!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[a]=n(l,{symbols:i.symbols}):s.merge(e[a],l,i)}else(null!=l||i.nullOverride)&&(e[a]=l)}return e}},9621:(e,t,i)=>{"use strict";const r=i(375),n={};e.exports=function(e,t,i){if(!1===t||null==t)return e;"string"==typeof(i=i||{})&&(i={separator:i});const a=Array.isArray(t);r(!a||!i.separator,"Separator option is not valid for array-based chain");const s=a?t:t.split(i.separator||".");let o=e;for(let e=0;e<s.length;++e){let a=s[e];const l=i.iterables&&n.iterables(o);if(Array.isArray(o)||"set"===l){const e=Number(a);Number.isInteger(e)&&(a=e<0?o.length+e:e)}if(!o||"function"==typeof o&&!1===i.functions||!l&&void 0===o[a]){r(!i.strict||e+1===s.length,"Missing segment",a,"in reach path ",t),r("object"==typeof o||!0===i.functions||"function"!=typeof o,"Invalid segment",a,"in reach path ",t),o=i.default;break}o=l?"set"===l?[...o][a]:o.get(a):o[a]}return o},n.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(){try{return JSON.stringify(...arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const i={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const r=Object.prototype.toString.call(e);return i.typeMap.get(r)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,i)=>{"use strict";const r=i(375),n={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const i=[].concat((t=t||{}).before||[]),n=[].concat(t.after||[]),a=t.group||"?",s=t.sort||0;r(!i.includes(a),`Item cannot come before itself: ${a}`),r(!i.includes("?"),"Item cannot come before unassociated items"),r(!n.includes(a),`Item cannot come after itself: ${a}`),r(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:i,after:n,group:a,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();r(e,"item","?"!==a?`added into group ${a}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(n.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return r(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return r(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),i=Object.create(null);for(const r of this._items){const n=r.seq,a=r.group;i[a]=i[a]||[],i[a].push(n),e[n]=r.before;for(const e of r.after)t[e]=t[e]||[],t[e].push(n)}for(const t in e){const r=[];for(const n in e[t]){const a=e[t][n];i[a]=i[a]||[],r.push(...i[a])}e[t]=r}for(const r in t)if(i[r])for(const n of i[r])e[n].push(...t[r]);const r={};for(const t in e){const i=e[t];for(const e of i)r[e]=r[e]||[],r[e].push(t)}const n={},a=[];for(let e=0;e<this._items.length;++e){let t=e;if(r[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===n[e])continue;r[e]||(r[e]=[]);const i=r[e].length;let a=0;for(let t=0;t<i;++t)n[r[e][t]]&&++a;if(a===i){t=e;break}}}null!==t&&(n[t]=!0,a.push(t))}if(a.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of a){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},n.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,i)=>{"use strict";const r=i(443),n=i(2178),a={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:r.URL||URL};t.analyze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return n.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return n.code("DOMAIN_TOO_LONG");if(a.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return n.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(a.domainControlRx.test(e))return n.code("DOMAIN_INVALID_CHARS");e=a.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const i=t.minDomainSegments||a.minDomainSegments,r=e.split(".");if(r.length<i)return n.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&r.length>t.maxDomainSegments)return n.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=r[r.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return n.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<r.length;++e){const t=r[e];if(!t.length)return n.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return n.code("DOMAIN_LONG_SEGMENT");if(e<r.length-1){if(!a.domainSegmentRx.test(t))return n.code("DOMAIN_INVALID_CHARS")}else if(!a.tldSegmentRx.test(t))return n.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,i){return!t.analyze(e,i)},a.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new a.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,i)=>{"use strict";const r=i(9848),n=i(5380),a=i(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(r.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return a.code("EMPTY_STRING");const i=!s.nonAsciiRx.test(e);if(!i){if(!1===t.allowUnicode)return a.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const r=e.split("@");if(2!==r.length)return r.length>2?a.code("MULTIPLE_AT_CHAR"):a.code("MISSING_AT_CHAR");const[o,l]=r;if(!o)return a.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return a.code("ADDRESS_TOO_LONG");if(s.encoder.encode(o).length>64)return a.code("LOCAL_TOO_LONG")}return s.local(o,i)||n.analyze(l,t)},s.local=function(e,t){const i=e.split(".");for(const e of i){if(!e.length)return a.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return a.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return a.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,i)=>{"use strict";const r=i(375),n=i(5752);t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";r(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),r(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let i=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),r(i.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<i.length;++e)r("string"==typeof i[e],"options.version must only contain strings"),i[e]=i[e].toLowerCase(),r(["ipv4","ipv6","ipvfuture"].includes(i[e]),"options.version contains unknown version "+i[e]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const a=`(?:${i.map((e=>{if("forbidden"===t)return n.ip[e];const i=`\\/${"ipv4"===e?n.ip.v4Cidr:n.ip.v6Cidr}`;return"required"===t?`${n.ip[e]}${i}`:`${n.ip[e]}(?:${i})?`})).join("|")})`,s=new RegExp(`^${a}$`);return{cidr:t,versions:i,regex:s,raw:a}}},5752:(e,t,i)=>{"use strict";const r=i(375),n=i(6064),a={generate:function(){const e={},t="\\dA-Fa-f",i="["+t+"]",r="\\w-\\.~",n="!\\$&'\\(\\)\\*\\+,;=",a="%"+t,s=r+a+n+":@",o="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const c=i+"{1,4}",u="(?:"+c+":"+c+"|"+e.ipv4address+")",h="(?:"+c+":){6}"+u,d="::(?:"+c+":){5}"+u,f="(?:"+c+")?::(?:"+c+":){4}"+u,p="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+u,m="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+u,g="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+u,b="(?:(?:"+c+":){0,4}"+c+")?::"+u,v="(?:(?:"+c+":){0,5}"+c+")?::"+c,_="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+h+"|"+d+"|"+f+"|"+p+"|"+m+"|"+g+"|"+b+"|"+v+"|"+_+")",e.ipvFuture="v"+i+"+\\.["+r+n+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const y="["+r+a+n+":]*",A="["+r+a+n+"]{1,255}",E="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+A+")",w="(?:"+y+"@)?"+E+"(?::\\d*)?",S="(?:"+y+"@)?("+E+")(?::\\d*)?",T=o+"*",x=o+"+",M="(?:\\/"+T+")*",R="\\/(?:"+x+M+")?",P=x+M,C="["+r+a+n+"@]+"+M,k="(?:\\/\\/\\/"+T+M+")";return e.hierPart="(?:(?:\\/\\/"+w+M+")|"+R+"|"+P+"|"+k+")",e.hierPartCapture="(?:(?:\\/\\/"+S+M+")|"+R+"|"+P+")",e.relativeRef="(?:(?:\\/\\/"+w+M+")|"+R+"|"+C+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+S+M+")|"+R+"|"+C+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};a.rfc3986=a.generate(),t.ip={v4Cidr:a.rfc3986.ipv4Cidr,v6Cidr:a.rfc3986.ipv6Cidr,ipv4:a.rfc3986.ipv4address,ipv6:a.rfc3986.ipv6address,ipvfuture:a.rfc3986.ipvFuture},a.createRegex=function(e){const t=a.rfc3986,i="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return a.wrap(s+i);let o="";if(e.scheme){r(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(e.scheme);r(i.length>=1,"scheme must have at least 1 scheme specified");const a=[];for(let e=0;e<i.length;++e){const s=i[e];r(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?a.push(s.source.toString()):(r(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),a.push(n(s)))}o=a.join("|")}const l="(?:"+(o?"(?:"+o+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+l+"|"+s+")":l;return a.wrap(c+i,o)},a.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},a.uriRegex=a.createRegex({}),t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?a.createRegex(e):a.uriRegex}},1447:(e,t)=>{"use strict";const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t[i.settings]&&t.constants)for(const e in t.constants){const i=t.constants[e];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new Error(`Formula constant ${e} contains invalid ${typeof i} value type`)}this.settings=t[i.settings]?t:Object.assign({[i.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let r=[],n="",a=0,s=!1;const o=e=>{if(a)throw new Error("Formula missing closing parenthesis");const o=r.length?r[r.length-1]:null;if(s||n||e){if(o&&"reference"===o.type&&")"===e)return o.type="function",o.value=this._subFormula(n,o.value),void(n="");if(")"===e){const e=new t.Parser(n,this.settings);r.push({type:"segment",value:e})}else if(s){if("]"===s)return r.push({type:"reference",value:n}),void(n="");r.push({type:"literal",value:n})}else if(i.operatorCharacters.includes(n))o&&"operator"===o.type&&i.operators.includes(o.value+n)?o.value+=n:r.push({type:"operator",value:n});else if(n.match(i.numberRx))r.push({type:"constant",value:parseFloat(n)});else if(void 0!==this.settings.constants[n])r.push({type:"constant",value:this.settings.constants[n]});else{if(!n.match(i.tokenRx))throw new Error(`Formula contains invalid token: ${n}`);r.push({type:"reference",value:n})}n=""}};for(const t of e)s?t===s?(o(),s=!1):n+=t:a?"("===t?(n+=t,++a):")"===t?(--a,a?n+=t:o(t)):n+=t:t in i.literals?s=i.literals[t]:"("===t?(o(),++a):i.operatorCharacters.includes(t)?(o(),n=t,o()):" "!==t?n+=t:o();o(),r=r.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==r[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of r){if("operator"===e.type){if(i.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!i.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===r.length&&["reference","literal","constant"].includes(r[0].type)&&(this.single={type:"reference"===r[0].type?"reference":"value",value:r[0].value}),this._parts=r.map((e=>{if("operator"===e.type)return i.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):i.reference(e.value)}))}_subFormula(e,r){const n=this.settings.functions[r];if("function"!=typeof n)throw new Error(`Formula contains unknown function ${r}`);let a=[];if(e){let t="",n=0,s=!1;const o=()=>{if(!t)throw new Error(`Formula contains function ${r} with invalid arguments ${e}`);a.push(t),t=""};for(let r=0;r<e.length;++r){const a=e[r];s?(t+=a,a===s&&(s=!1)):a in i.literals&&!n?(t+=a,s=i.literals[a]):","!==a||n?(t+=a,"("===a?++n:")"===a&&--n):o()}o()}return a=a.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const i of a)t.push(i.evaluate(e));return n.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let r=t.length-2;r>=0;--r){const n=t[r];if(n&&"operator"===n.type){const a=t[r+1];t.splice(r+1,1);const s=i.evaluate(a,e);t[r]=i.single(n.value,s)}}return i.operatorsOrder.forEach((r=>{for(let n=1;n<t.length-1;)if(r.includes(t[n])){const r=t[n],a=i.evaluate(t[n-1],e),s=i.evaluate(t[n+1],e);t.splice(n,2);const o=i.calculate(r,a,s);t[n-1]=0===o?0:o}else n+=2})),i.evaluate(t[0],e)}},t.Parser.prototype[i.symbol]=!0,i.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},i.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[i.symbol]?e.evaluate(t):e},i.single=function(e,t){if("!"===e)return!t;const i=-t;return 0===i?0:i},i.calculate=function(e,t,r){if("??"===e)return i.exists(t)?t:r;if("string"==typeof t||"string"==typeof r){if("+"===e)return(t=i.exists(t)?t:"")+(i.exists(r)?r:"")}else switch(e){case"^":return Math.pow(t,r);case"*":return t*r;case"/":return t/r;case"%":return t%r;case"+":return t+r;case"-":return t-r}switch(e){case"<":return t<r;case"<=":return t<=r;case">":return t>r;case">=":return t>=r;case"==":return t===r;case"!=":return t!==r;case"&&":return t&&r;case"||":return t||r}return null},i.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports={version:"17.9.2"}}},t={},function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}(5107);var e,t},e.exports=t()},2592:(e,t,i)=>{const r=i(7138),n=i(5115),a=i(6907),s=i(3005);function o(e,t,i,a,s){const o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!r())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=t,t=a=void 0):2!==l||t.getContext||(a=i,i=t,t=void 0),new Promise((function(r,s){try{const s=n.create(i,a);r(e(s,t,a))}catch(e){s(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=i,i=t,t=a=void 0):3===l&&(t.getContext&&void 0===s?(s=a,a=void 0):(s=a,a=i,i=t,t=void 0));try{const r=n.create(i,a);s(null,e(r,t,a))}catch(e){s(e)}}t.create=n.create,t.toCanvas=o.bind(null,a.render),t.toDataURL=o.bind(null,a.renderToDataURL),t.toString=o.bind(null,(function(e,t,i){return s.render(e,i)}))},7138:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1845:(e,t,i)=>{const r=i(242).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,i=r(e),n=145===i?26:2*Math.ceil((i-13)/(2*t-2)),a=[i-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-n;return a.push(6),a.reverse()},t.getPositions=function(e){const i=[],r=t.getRowColCoords(e),n=r.length;for(let e=0;e<n;e++)for(let t=0;t<n;t++)0===e&&0===t||0===e&&t===n-1||e===n-1&&0===t||i.push([r[e],r[t]]);return i}},8260:(e,t,i)=>{const r=i(6910),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=r.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let i=45*n.indexOf(this.data[t]);i+=n.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=a},7245:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},3280:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,i,r){const n=e*this.size+t;this.data[n]=i,r&&(this.reservedBit[n]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},3424:(e,t,i)=>{const r=i(2378),n=i(6910);function a(e){this.mode=n.BYTE,"string"==typeof e&&(e=r(e)),this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=a},5393:(e,t,i)=>{const r=i(4908),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return n[4*(e-1)+0];case r.M:return n[4*(e-1)+1];case r.Q:return n[4*(e-1)+2];case r.H:return n[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return a[4*(e-1)+0];case r.M:return a[4*(e-1)+1];case r.Q:return a[4*(e-1)+2];case r.H:return a[4*(e-1)+3];default:return}}},4908:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return i}}},6526:(e,t,i)=>{const r=i(242).getSymbolSize;t.getPositions=function(e){const t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},1642:(e,t,i)=>{const r=i(242),n=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){const i=e.bit<<3|t;let a=i<<10;for(;r.getBCHDigit(a)-n>=0;)a^=1335<<r.getBCHDigit(a)-n;return 21522^(i<<10|a)}},9729:(e,t)=>{const i=new Uint8Array(512),r=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)i[t]=e,r[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},t.exp=function(e){return i[e]},t.mul=function(e,t){return 0===e||0===t?0:i[r[e]+r[t]]}},5442:(e,t,i)=>{const r=i(6910),n=i(242);function a(e){this.mode=r.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=n.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13)}},e.exports=a},7126:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(e,i,r){switch(e){case t.Patterns.PATTERN000:return(i+r)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(i+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return i*r%2+i*r%3==0;case t.Patterns.PATTERN110:return(i*r%2+i*r%3)%2==0;case t.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let i=0,r=0,n=0,a=null,s=null;for(let o=0;o<t;o++){r=n=0,a=s=null;for(let l=0;l<t;l++){let t=e.get(o,l);t===a?r++:(r>=5&&(i+=r-5+3),a=t,r=1),t=e.get(l,o),t===s?n++:(n>=5&&(i+=n-5+3),s=t,n=1)}r>=5&&(i+=r-5+3),n>=5&&(i+=n-5+3)}return i},t.getPenaltyN2=function(e){const t=e.size;let i=0;for(let r=0;r<t-1;r++)for(let n=0;n<t-1;n++){const t=e.get(r,n)+e.get(r,n+1)+e.get(r+1,n)+e.get(r+1,n+1);4!==t&&0!==t||i++}return 3*i},t.getPenaltyN3=function(e){const t=e.size;let i=0,r=0,n=0;for(let a=0;a<t;a++){r=n=0;for(let s=0;s<t;s++)r=r<<1&2047|e.get(a,s),s>=10&&(1488===r||93===r)&&i++,n=n<<1&2047|e.get(s,a),s>=10&&(1488===n||93===n)&&i++}return 40*i},t.getPenaltyN4=function(e){let t=0;const i=e.data.length;for(let r=0;r<i;r++)t+=e.data[r];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},t.applyMask=function(e,t){const r=t.size;for(let n=0;n<r;n++)for(let a=0;a<r;a++)t.isReserved(a,n)||t.xor(a,n,i(e,a,n))},t.getBestMask=function(e,i){const r=Object.keys(t.Patterns).length;let n=0,a=1/0;for(let s=0;s<r;s++){i(s),t.applyMask(s,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(s,e),r<a&&(a=r,n=s)}return n}},6910:(e,t,i)=>{const r=i(3114),n=i(7007);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return i}}},1085:(e,t,i)=>{const r=i(6910);function n(e){this.mode=r.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,i,r;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),r=parseInt(i,10),e.put(r,10);const n=this.data.length-t;n>0&&(i=this.data.substr(t),r=parseInt(i,10),e.put(r,3*n+1))},e.exports=n},6143:(e,t,i)=>{const r=i(9729);t.mul=function(e,t){const i=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let a=0;a<t.length;a++)i[n+a]^=r.mul(e[n],t[a]);return i},t.mod=function(e,t){let i=new Uint8Array(e);for(;i.length-t.length>=0;){const e=i[0];for(let n=0;n<t.length;n++)i[n]^=r.mul(t[n],e);let n=0;for(;n<i.length&&0===i[n];)n++;i=i.slice(n)}return i},t.generateECPolynomial=function(e){let i=new Uint8Array([1]);for(let n=0;n<e;n++)i=t.mul(i,new Uint8Array([1,r.exp(n)]));return i}},5115:(e,t,i)=>{const r=i(242),n=i(4908),a=i(7245),s=i(3280),o=i(1845),l=i(6526),c=i(7126),u=i(5393),h=i(2882),d=i(3103),f=i(1642),p=i(6910),m=i(6130);function g(e,t,i){const r=e.size,n=f.getEncodedBits(t,i);let a,s;for(a=0;a<15;a++)s=1==(n>>a&1),a<6?e.set(a,8,s,!0):a<8?e.set(a+1,8,s,!0):e.set(r-15+a,8,s,!0),a<8?e.set(8,r-a-1,s,!0):a<9?e.set(8,15-a-1+1,s,!0):e.set(8,15-a-1,s,!0);e.set(r-8,8,1,!0)}function b(e,t,i,n){let f;if(Array.isArray(e))f=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=m.rawSplit(e);r=d.getBestVersionForData(t,i)}f=m.fromString(e,r||40)}}const b=d.getBestVersionForData(f,i);if(!b)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<b)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+b+".\n")}else t=b;const v=function(e,t,i){const n=new a;i.forEach((function(t){n.put(t.mode.bit,4),n.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(n)}));const s=8*(r.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(n.getLengthInBits()+4<=s&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);const o=(s-n.getLengthInBits())/8;for(let e=0;e<o;e++)n.put(e%2?17:236,8);return function(e,t,i){const n=r.getSymbolTotalCodewords(t),a=n-u.getTotalCodewordsCount(t,i),s=u.getBlocksCount(t,i),o=s-n%s,l=Math.floor(n/s),c=Math.floor(a/s),d=c+1,f=l-c,p=new h(f);let m=0;const g=new Array(s),b=new Array(s);let v=0;const _=new Uint8Array(e.buffer);for(let e=0;e<s;e++){const t=e<o?c:d;g[e]=_.slice(m,m+t),b[e]=p.encode(g[e]),m+=t,v=Math.max(v,t)}const y=new Uint8Array(n);let A,E,w=0;for(A=0;A<v;A++)for(E=0;E<s;E++)A<g[E].length&&(y[w++]=g[E][A]);for(A=0;A<f;A++)for(E=0;E<s;E++)y[w++]=b[E][A];return y}(n,e,t)}(t,i,f),_=r.getSymbolSize(t),y=new s(_);return function(e,t){const i=e.size,r=l.getPositions(t);for(let t=0;t<r.length;t++){const n=r[t][0],a=r[t][1];for(let t=-1;t<=7;t++)if(!(n+t<=-1||i<=n+t))for(let r=-1;r<=7;r++)a+r<=-1||i<=a+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(n+t,a+r,!0,!0):e.set(n+t,a+r,!1,!0))}}(y,t),function(e){const t=e.size;for(let i=8;i<t-8;i++){const t=i%2==0;e.set(i,6,t,!0),e.set(6,i,t,!0)}}(y),function(e,t){const i=o.getPositions(t);for(let t=0;t<i.length;t++){const r=i[t][0],n=i[t][1];for(let t=-2;t<=2;t++)for(let i=-2;i<=2;i++)-2===t||2===t||-2===i||2===i||0===t&&0===i?e.set(r+t,n+i,!0,!0):e.set(r+t,n+i,!1,!0)}}(y,t),g(y,i,0),t>=7&&function(e,t){const i=e.size,r=d.getEncodedBits(t);let n,a,s;for(let t=0;t<18;t++)n=Math.floor(t/3),a=t%3+i-8-3,s=1==(r>>t&1),e.set(n,a,s,!0),e.set(a,n,s,!0)}(y,t),function(e,t){const i=e.size;let r=-1,n=i-1,a=7,s=0;for(let o=i-1;o>0;o-=2)for(6===o&&o--;;){for(let i=0;i<2;i++)if(!e.isReserved(n,o-i)){let r=!1;s<t.length&&(r=1==(t[s]>>>a&1)),e.set(n,o-i,r),a--,-1===a&&(s++,a=7)}if(n+=r,n<0||i<=n){n-=r,r=-r;break}}}(y,v),isNaN(n)&&(n=c.getBestMask(y,g.bind(null,y,i))),c.applyMask(n,y),g(y,i,n),{modules:y,version:t,errorCorrectionLevel:i,maskPattern:n,segments:f}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let i,a,s=n.M;return void 0!==t&&(s=n.from(t.errorCorrectionLevel,n.M),i=d.from(t.version),a=c.from(t.maskPattern),t.toSJISFunc&&r.setToSJISFunction(t.toSJISFunc)),b(e,i,s,a)}},2882:(e,t,i)=>{const r=i(6143);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=r.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const i=r.mod(t,this.genPoly),n=this.degree-i.length;if(n>0){const e=new Uint8Array(this.degree);return e.set(i,n),e}return i},e.exports=n},7007:(e,t)=>{const i="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";t.KANJI=new RegExp(r,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(n,"g"),t.NUMERIC=new RegExp(i,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+r+"$"),s=new RegExp("^"+i+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return s.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},6130:(e,t,i)=>{const r=i(6910),n=i(1085),a=i(8260),s=i(3424),o=i(5442),l=i(7007),c=i(242),u=i(5987);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,i){const r=[];let n;for(;null!==(n=e.exec(i));)r.push({data:n[0],index:n.index,mode:t,length:n[0].length});return r}function f(e){const t=d(l.NUMERIC,r.NUMERIC,e),i=d(l.ALPHANUMERIC,r.ALPHANUMERIC,e);let n,a;return c.isKanjiModeEnabled()?(n=d(l.BYTE,r.BYTE,e),a=d(l.KANJI,r.KANJI,e)):(n=d(l.BYTE_KANJI,r.BYTE,e),a=[]),t.concat(i,n,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case r.NUMERIC:return n.getBitsLength(e);case r.ALPHANUMERIC:return a.getBitsLength(e);case r.KANJI:return o.getBitsLength(e);case r.BYTE:return s.getBitsLength(e)}}function m(e,t){let i;const l=r.getBestModeForData(e);if(i=r.from(t,l),i!==r.BYTE&&i.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+r.toString(i)+".\n Suggested mode is: "+r.toString(l));switch(i!==r.KANJI||c.isKanjiModeEnabled()||(i=r.BYTE),i){case r.NUMERIC:return new n(e);case r.ALPHANUMERIC:return new a(e);case r.KANJI:return new o(e);case r.BYTE:return new s(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,i){const n=function(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i];switch(n.mode){case r.NUMERIC:t.push([n,{data:n.data,mode:r.ALPHANUMERIC,length:n.length},{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.ALPHANUMERIC:t.push([n,{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.KANJI:t.push([n,{data:n.data,mode:r.BYTE,length:h(n.data)}]);break;case r.BYTE:t.push([{data:n.data,mode:r.BYTE,length:h(n.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),a=function(e,t){const i={},n={start:{}};let a=["start"];for(let s=0;s<e.length;s++){const o=e[s],l=[];for(let e=0;e<o.length;e++){const c=o[e],u=""+s+e;l.push(u),i[u]={node:c,lastCount:0},n[u]={};for(let e=0;e<a.length;e++){const s=a[e];i[s]&&i[s].node.mode===c.mode?(n[s][u]=p(i[s].lastCount+c.length,c.mode)-p(i[s].lastCount,c.mode),i[s].lastCount+=c.length):(i[s]&&(i[s].lastCount=c.length),n[s][u]=p(c.length,c.mode)+4+r.getCharCountIndicator(c.mode,t))}}a=l}for(let e=0;e<a.length;e++)n[a[e]].end=0;return{map:n,table:i}}(n,i),s=u.find_path(a.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(a.table[s[e]].node);return t.fromArray(o.reduce((function(e,t){const i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},242:(e,t)=>{let i;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},3114:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3103:(e,t,i)=>{const r=i(242),n=i(5393),a=i(4908),s=i(6910),o=i(3114),l=r.getBCHDigit(7973);function c(e,t){return s.getCharCountIndicator(e,t)+4}function u(e,t){let i=0;return e.forEach((function(e){const r=c(e.mode,t);i+=r+e.getBitsLength()})),i}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=s.BYTE);const a=8*(r.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t));if(i===s.MIXED)return a;const l=a-c(i,e);switch(i){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,i){let r;const n=a.from(i,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,i){for(let r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,i,s.MIXED))return r}(e,n);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,i,r){for(let n=1;n<=40;n++)if(i<=t.getCapacity(n,r,e))return n}(r.mode,r.getLength(),n)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},6907:(e,t,i)=>{const r=i(9653);t.render=function(e,t,i){let n=i,a=t;void 0!==n||t&&t.getContext||(n=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),n=r.getOptions(n);const s=r.getImageWidth(e.modules.size,n),o=a.getContext("2d"),l=o.createImageData(s,s);return r.qrToImageData(l.data,e,n),function(e,t,i){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}(o,a,s),o.putImageData(l,0,0),a},t.renderToDataURL=function(e,i,r){let n=r;void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={});const a=t.render(e,i,n),s=n.type||"image/png",o=n.rendererOpts||{};return a.toDataURL(s,o.quality)}},3005:(e,t,i)=>{const r=i(9653);function n(e,t){const i=e.a/255,r=t+'="'+e.hex+'"';return i<1?r+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':r}function a(e,t,i){let r=e+t;return void 0!==i&&(r+=" "+i),r}t.render=function(e,t,i){const s=r.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*s.margin,u=s.color.light.a?"<path "+n(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+n(s.color.dark,"stroke")+' d="'+function(e,t,i){let r="",n=0,s=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||s||(s=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(r+=s?a("M",c+i,.5+u+i):a("m",n,0),n=0,s=!1),c+1<t&&e[l+1]||(r+=a("h",o),o=0)):n++}return r}(l,o,s.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof i&&i(null,f),f}},9653:(e,t)=>{function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){const r=t.getScale(e,i);return Math.floor((e+2*i.margin)*r)},t.qrToImageData=function(e,i,r){const n=i.modules.size,a=i.modules.data,s=t.getScale(n,r),o=Math.floor((n+2*r.margin)*s),l=r.margin*s,c=[r.color.light,r.color.dark];for(let t=0;t<o;t++)for(let i=0;i<o;i++){let u=4*(t*o+i),h=r.color.light;t>=l&&i>=l&&t<o-l&&i<o-l&&(h=c[a[Math.floor((t-l)/s)*n+Math.floor((i-l)/s)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}},8660:(e,t,i)=>{var r;!function(e){!function(t){var r="object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=a(e);function a(e,t){return function(i,r){"function"!=typeof e[i]&&Object.defineProperty(e,i,{configurable:!0,writable:!0,value:r}),t&&t(i,r)}}void 0===r.Reflect?r.Reflect=e:n=a(r.Reflect,n),function(e){var t=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,r=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,o=!a&&!s,l={create:a?function(){return I(Object.create(null))}:s?function(){return I({__proto__:null})}:function(){return I({})},has:o?function(e,i){return t.call(e,i)}:function(e,t){return t in e},get:o?function(e,i){return t.call(e,i)?e[i]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],i=function(){function e(e,t,i){this._index=0,this._keys=e,this._values=t,this._selector=i}return e.prototype["@@iterator"]=function(){return this},e.prototype[n]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var i=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var i=this._find(e,!0);return this._values[i]=t,this},t.prototype.delete=function(t){var i=this._find(t,!1);if(i>=0){for(var r=this._keys.length,n=i+1;n<r;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new i(this._keys,this._values,r)},t.prototype.values=function(){return new i(this._keys,this._values,a)},t.prototype.entries=function(){return new i(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[n]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function a(e,t){return t}function s(e,t){return[e,t]}}():Map,d=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[n]=function(){return this.keys()},e}():Set,f=new(u||"function"!=typeof WeakMap?function(){var e=16,i=l.create(),r=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var e;do{e="@@WeakMap@@"+o()}while(l.has(i,e));return i[e]=!0,e}function a(e,i){if(!t.call(e,r)){if(!i)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function s(e,t){for(var i=0;i<t;++i)e[i]=255*Math.random()|0;return e}function o(){var t,i=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));i[6]=79&i[6]|64,i[8]=191&i[8]|128;for(var r="",n=0;n<e;++n){var a=i[n];4!==n&&6!==n&&8!==n||(r+="-"),a<16&&(r+="0"),r+=a.toString(16).toLowerCase()}return r}}():WeakMap);function p(e,t,i){var r=f.get(e);if(w(r)){if(!i)return;r=new h,f.set(e,r)}var n=r.get(t);if(w(n)){if(!i)return;n=new h,r.set(t,n)}return n}function m(e,t,i){if(g(e,t,i))return!0;var r=N(t);return!S(r)&&m(e,r,i)}function g(e,t,i){var r=p(t,i,!1);return!w(r)&&!!r.has(e)}function b(e,t,i){if(g(e,t,i))return v(e,t,i);var r=N(t);return S(r)?void 0:b(e,r,i)}function v(e,t,i){var r=p(t,i,!1);if(!w(r))return r.get(e)}function _(e,t,i,r){p(i,r,!0).set(e,t)}function y(e,t){var i=A(e,t),r=N(e);if(null===r)return i;var n=y(r,t);if(n.length<=0)return i;if(i.length<=0)return n;for(var a=new d,s=[],o=0,l=i;o<l.length;o++){var c=l[o];a.has(c)||(a.add(c),s.push(c))}for(var u=0,h=n;u<h.length;u++)c=h[u],a.has(c)||(a.add(c),s.push(c));return s}function A(e,t){var i=[],r=p(e,t,!1);if(w(r))return i;for(var a=function(e){var t=k(e,n);if(!P(t))throw new TypeError;var i=t.call(e);if(!T(i))throw new TypeError;return i}(r.keys()),s=0;;){var o=O(a);if(!o)return i.length=s,i;var l=o.value;try{i[s]=l}catch(e){try{D(a)}finally{throw e}}s++}}function E(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function w(e){return void 0===e}function S(e){return null===e}function T(e){return"object"==typeof e?null!==e:"function"==typeof e}function x(e,t){switch(E(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var i=3===t?"string":5===t?"number":"default",n=k(e,r);if(void 0!==n){var a=n.call(e,i);if(T(a))throw new TypeError;return a}return function(e,t){if("string"===t){var i=e.toString;if(P(i)&&!T(n=i.call(e)))return n;if(P(r=e.valueOf)&&!T(n=r.call(e)))return n}else{var r;if(P(r=e.valueOf)&&!T(n=r.call(e)))return n;var n,a=e.toString;if(P(a)&&!T(n=a.call(e)))return n}throw new TypeError}(e,"default"===i?"number":i)}function M(e){var t=x(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function R(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function P(e){return"function"==typeof e}function C(e){return"function"==typeof e}function k(e,t){var i=e[t];if(null!=i){if(!P(i))throw new TypeError;return i}}function O(e){var t=e.next();return!t.done&&t}function D(e){var t=e.return;t&&t.call(e)}function N(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var i=e.prototype,r=i&&Object.getPrototypeOf(i);if(null==r||r===Object.prototype)return t;var n=r.constructor;return"function"!=typeof n||n===e?t:n}function I(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,i,r){if(w(i)){if(!R(e))throw new TypeError;if(!C(t))throw new TypeError;return function(e,t){for(var i=e.length-1;i>=0;--i){var r=(0,e[i])(t);if(!w(r)&&!S(r)){if(!C(r))throw new TypeError;t=r}}return t}(e,t)}if(!R(e))throw new TypeError;if(!T(t))throw new TypeError;if(!T(r)&&!w(r)&&!S(r))throw new TypeError;return S(r)&&(r=void 0),function(e,t,i,r){for(var n=e.length-1;n>=0;--n){var a=(0,e[n])(t,i,r);if(!w(a)&&!S(a)){if(!T(a))throw new TypeError;r=a}}return r}(e,t,i=M(i),r)})),e("metadata",(function(e,t){return function(i,r){if(!T(i))throw new TypeError;if(!w(r)&&!function(e){switch(E(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;_(e,t,i,r)}})),e("defineMetadata",(function(e,t,i,r){if(!T(i))throw new TypeError;return w(r)||(r=M(r)),_(e,t,i,r)})),e("hasMetadata",(function(e,t,i){if(!T(t))throw new TypeError;return w(i)||(i=M(i)),m(e,t,i)})),e("hasOwnMetadata",(function(e,t,i){if(!T(t))throw new TypeError;return w(i)||(i=M(i)),g(e,t,i)})),e("getMetadata",(function(e,t,i){if(!T(t))throw new TypeError;return w(i)||(i=M(i)),b(e,t,i)})),e("getOwnMetadata",(function(e,t,i){if(!T(t))throw new TypeError;return w(i)||(i=M(i)),v(e,t,i)})),e("getMetadataKeys",(function(e,t){if(!T(e))throw new TypeError;return w(t)||(t=M(t)),y(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!T(e))throw new TypeError;return w(t)||(t=M(t)),A(e,t)})),e("deleteMetadata",(function(e,t,i){if(!T(t))throw new TypeError;w(i)||(i=M(i));var r=p(t,i,!1);if(w(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var n=f.get(t);return n.delete(i),n.size>0||f.delete(t),!0}))}(n)}()}(r||(r={}))},3466:function(e){var t;e.exports=((t=function(){function e(e){return n.appendChild(e.dom),e}function i(e){for(var t=0;t<n.children.length;t++)n.children[t].style.display=t===e?"block":"none";r=e}var r=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),i(++r%n.children.length)}),!1);var a=(performance||Date).now(),s=a,o=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:e,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(c.update(e-a,200),e>s+1e3&&(l.update(1e3*o/(e-s),100),s=e,o=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:n,setMode:i}}).Panel=function(e,t,i){var r=1/0,n=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,c=3*s,u=2*s,h=3*s,d=15*s,f=74*s,p=30*s,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,o,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(h,d,f,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h,d,f,p),{dom:m,update:function(l,b){r=Math.min(r,l),n=Math.max(n,l),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,o,d),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(r)+"-"+a(n)+")",c,u),g.drawImage(m,h+s,d,f-s,p,h,d,f-s,p),g.fillRect(h+f-s,d,s,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h+f-s,d,s,a((1-l/b)*p))}}},t)},2238:function(e,t,i){var r;!function(n,a){"use strict";var s="function",o="undefined",l="object",c="string",u="major",h="model",d="name",f="type",p="vendor",m="version",g="architecture",b="console",v="mobile",_="tablet",y="smarttv",A="wearable",E="embedded",w="Amazon",S="Apple",T="ASUS",x="BlackBerry",M="Browser",R="Chrome",P="Firefox",C="Google",k="Huawei",O="LG",D="Microsoft",N="Motorola",I="Opera",L="Samsung",U="Sharp",V="Sony",F="Xiaomi",G="Zebra",B="Facebook",j="Chromium OS",z="Mac OS",H=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},W=function(e,t){return typeof e===c&&-1!==$(t).indexOf($(e))},$=function(e){return e.toLowerCase()},Y=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},X=function(e,t){for(var i,r,n,o,c,u,h=0;h<t.length&&!c;){var d=t[h],f=t[h+1];for(i=r=0;i<d.length&&!c&&d[i];)if(c=d[i++].exec(e))for(n=0;n<f.length;n++)u=c[++r],typeof(o=f[n])===l&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):a:this[o[0]]=u?o[1].call(this,u,o[2]):a:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):a):this[o]=u||a;h+=2}},q=function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(W(t[i][r],e))return"?"===i?a:i}else if(W(t[i],e))return"?"===i?a:i;return e},Z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,m],[/opios[\/ ]+([\w\.]+)/i],[m,[d,I+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[d,I]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[d,"UC"+M]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+M],m],[/\bfocus\/([\w\.]+)/i],[m,[d,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[d,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[d,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[d,"MIUI "+M]],[/fxios\/([-\w\.]+)/i],[m,[d,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+M]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+M],m],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,B],m],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[d,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,R+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[d,"Android "+M]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[m,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[d,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,m],[/(cobalt)\/([\w\.]+)/i],[d,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,$]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",$]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[p,L],[f,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[p,L],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[p,S],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[p,S],[f,_]],[/(macintosh);/i],[h,[p,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[p,U],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[p,k],[f,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[p,k],[f,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[p,F],[f,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[p,F],[f,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[p,"OPPO"],[f,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[p,"Vivo"],[f,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[h,[p,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[p,N],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[p,N],[f,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[p,O],[f,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[p,O],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[p,"Lenovo"],[f,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[p,"Nokia"],[f,v]],[/(pixel c)\b/i],[h,[p,C],[f,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[p,C],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[p,V],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[p,V],[f,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[p,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[p,w],[f,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[p,w],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[h,p,[f,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[p,x],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[p,T],[f,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[p,T],[f,v]],[/(nexus 9)/i],[h,[p,"HTC"],[f,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[h,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[p,"Acer"],[f,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[p,"Meizu"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,h,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,h,[f,_]],[/(surface duo)/i],[h,[p,D],[f,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[p,"Fairphone"],[f,v]],[/(u304aa)/i],[h,[p,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[h,[p,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[h,[p,"RCA"],[f,_]],[/\b(venue[\d ]{2,7}) b/i],[h,[p,"Dell"],[f,_]],[/\b(q(?:mv|ta)\w+) b/i],[h,[p,"Verizon"],[f,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[p,"Barnes & Noble"],[f,_]],[/\b(tm\d{3}\w+) b/i],[h,[p,"NuVision"],[f,_]],[/\b(k88) b/i],[h,[p,"ZTE"],[f,_]],[/\b(nx\d{3}j) b/i],[h,[p,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[h,[p,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[h,[p,"Swiss"],[f,_]],[/\b((zeki)?tb.*\b) b/i],[h,[p,"Zeki"],[f,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],h,[f,_]],[/\b(ns-?\w{0,9}) b/i],[h,[p,"Insignia"],[f,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[p,"NextBook"],[f,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],h,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],h,[f,v]],[/\b(ph-1) /i],[h,[p,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[p,"Envizen"],[f,_]],[/\b(trio[-\w\. ]+) b/i],[h,[p,"MachSpeed"],[f,_]],[/\btu_(1491) b/i],[h,[p,"Rotor"],[f,_]],[/(shield[\w ]+) b/i],[h,[p,"Nvidia"],[f,_]],[/(sprint) (\w+)/i],[p,h,[f,v]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[p,D],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[p,G],[f,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[p,G],[f,v]],[/smart-tv.+(samsung)/i],[p,[f,y]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[p,L],[f,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,O],[f,y]],[/(apple) ?tv/i],[p,[h,S+" TV"],[f,y]],[/crkey/i],[[h,R+"cast"],[p,C],[f,y]],[/droid.+aft(\w)( bui|\))/i],[h,[p,w],[f,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[p,U],[f,y]],[/(bravia[\w ]+)( bui|\))/i],[h,[p,V],[f,y]],[/(mitv-\w{5}) bui/i],[h,[p,F],[f,y]],[/Hbbtv.*(technisat) (.*);/i],[p,h,[f,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,Y],[h,Y],[f,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,h,[f,b]],[/droid.+; (shield) bui/i],[h,[p,"Nvidia"],[f,b]],[/(playstation [345portablevi]+)/i],[h,[p,V],[f,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[p,D],[f,b]],[/((pebble))app/i],[p,h,[f,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[p,S],[f,A]],[/droid.+; (glass) \d/i],[h,[p,C],[f,A]],[/droid.+; (wt63?0{2,3})\)/i],[h,[p,G],[f,A]],[/(quest( 2| pro)?)/i],[h,[p,B],[f,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[f,E]],[/(aeobc)\b/i],[h,[p,w],[f,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[h,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[f,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[m,q,Z]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[m,q,Z]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,z],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,m],[/\(bb(10);/i],[m,[d,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[d,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[d,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,j],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,m],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,m]]},K=function(e,t){if(typeof e===l&&(t=e,e=a),!(this instanceof K))return new K(e,t).getResult();var i=typeof n!==o&&n.navigator?n.navigator:a,r=e||(i&&i.userAgent?i.userAgent:""),b=i&&i.userAgentData?i.userAgentData:a,y=t?function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i}(J,t):J,A=i&&i.userAgent==r;return this.getBrowser=function(){var e,t={};return t[d]=a,t[m]=a,X.call(t,r,y.browser),t[u]=typeof(e=t[m])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:a,A&&i&&i.brave&&typeof i.brave.isBrave==s&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,X.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[p]=a,e[h]=a,e[f]=a,X.call(e,r,y.device),A&&!e[f]&&b&&b.mobile&&(e[f]=v),A&&"Macintosh"==e[h]&&i&&typeof i.standalone!==o&&i.maxTouchPoints&&i.maxTouchPoints>2&&(e[h]="iPad",e[f]=_),e},this.getEngine=function(){var e={};return e[d]=a,e[m]=a,X.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[d]=a,e[m]=a,X.call(e,r,y.os),A&&!e[d]&&b&&"Unknown"!=b.platform&&(e[d]=b.platform.replace(/chrome os/i,j).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>350?Y(e,350):e,this},this.setUA(r),this};K.VERSION="0.7.35",K.BROWSER=H([d,m,u]),K.CPU=H([g]),K.DEVICE=H([h,p,f,b,v,y,_,A,E]),K.ENGINE=K.OS=H([d,m]),typeof t!==o?(e.exports&&(t=e.exports=K),t.UAParser=K):i.amdO?(r=function(){return K}.call(t,i,t,e))===a||(e.exports=r):typeof n!==o&&(n.UAParser=K);var Q=typeof n!==o&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var ee=new K;Q.ua=ee.getResult(),Q.ua.get=function(){return ee.getUA()},Q.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var i in t)Q.ua[i]=t[i]}}}("object"==typeof window?window:this)},7429:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var r=d(i(3990)),n=d(i(8237)),a=d(i(5355)),s=d(i(3764)),o=d(i(6314)),l=d(i(8464)),c=d(i(6435)),u=d(i(4008)),h=d(i(8222));function d(e){return e&&e.__esModule?e:{default:e}}},4163:(e,t)=>{"use strict";function i(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function n(e,t,i,n,a,s){return r((o=r(r(t,e),r(n,s)))<<(l=a)|o>>>32-l,i);var o,l}function a(e,t,i,r,a,s,o){return n(t&i|~t&r,e,t,a,s,o)}function s(e,t,i,r,a,s,o){return n(t&r|i&~r,e,t,a,s,o)}function o(e,t,i,r,a,s,o){return n(t^i^r,e,t,a,s,o)}function l(e,t,i,r,a,s,o){return n(i^(t|~r),e,t,a,s,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){const t=[],i=32*e.length,r="0123456789abcdef";for(let n=0;n<i;n+=8){const i=e[n>>5]>>>n%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[i(t)-1]=t;let n=1732584193,c=-271733879,u=-1732584194,h=271733878;for(let t=0;t<e.length;t+=16){const i=n,d=c,f=u,p=h;n=a(n,c,u,h,e[t],7,-680876936),h=a(h,n,c,u,e[t+1],12,-389564586),u=a(u,h,n,c,e[t+2],17,606105819),c=a(c,u,h,n,e[t+3],22,-1044525330),n=a(n,c,u,h,e[t+4],7,-176418897),h=a(h,n,c,u,e[t+5],12,1200080426),u=a(u,h,n,c,e[t+6],17,-1473231341),c=a(c,u,h,n,e[t+7],22,-45705983),n=a(n,c,u,h,e[t+8],7,1770035416),h=a(h,n,c,u,e[t+9],12,-1958414417),u=a(u,h,n,c,e[t+10],17,-42063),c=a(c,u,h,n,e[t+11],22,-1990404162),n=a(n,c,u,h,e[t+12],7,1804603682),h=a(h,n,c,u,e[t+13],12,-40341101),u=a(u,h,n,c,e[t+14],17,-1502002290),c=a(c,u,h,n,e[t+15],22,1236535329),n=s(n,c,u,h,e[t+1],5,-165796510),h=s(h,n,c,u,e[t+6],9,-1069501632),u=s(u,h,n,c,e[t+11],14,643717713),c=s(c,u,h,n,e[t],20,-373897302),n=s(n,c,u,h,e[t+5],5,-701558691),h=s(h,n,c,u,e[t+10],9,38016083),u=s(u,h,n,c,e[t+15],14,-660478335),c=s(c,u,h,n,e[t+4],20,-405537848),n=s(n,c,u,h,e[t+9],5,568446438),h=s(h,n,c,u,e[t+14],9,-1019803690),u=s(u,h,n,c,e[t+3],14,-187363961),c=s(c,u,h,n,e[t+8],20,1163531501),n=s(n,c,u,h,e[t+13],5,-1444681467),h=s(h,n,c,u,e[t+2],9,-51403784),u=s(u,h,n,c,e[t+7],14,1735328473),c=s(c,u,h,n,e[t+12],20,-1926607734),n=o(n,c,u,h,e[t+5],4,-378558),h=o(h,n,c,u,e[t+8],11,-2022574463),u=o(u,h,n,c,e[t+11],16,1839030562),c=o(c,u,h,n,e[t+14],23,-35309556),n=o(n,c,u,h,e[t+1],4,-1530992060),h=o(h,n,c,u,e[t+4],11,1272893353),u=o(u,h,n,c,e[t+7],16,-155497632),c=o(c,u,h,n,e[t+10],23,-1094730640),n=o(n,c,u,h,e[t+13],4,681279174),h=o(h,n,c,u,e[t],11,-358537222),u=o(u,h,n,c,e[t+3],16,-722521979),c=o(c,u,h,n,e[t+6],23,76029189),n=o(n,c,u,h,e[t+9],4,-640364487),h=o(h,n,c,u,e[t+12],11,-421815835),u=o(u,h,n,c,e[t+15],16,530742520),c=o(c,u,h,n,e[t+2],23,-995338651),n=l(n,c,u,h,e[t],6,-198630844),h=l(h,n,c,u,e[t+7],10,1126891415),u=l(u,h,n,c,e[t+14],15,-1416354905),c=l(c,u,h,n,e[t+5],21,-57434055),n=l(n,c,u,h,e[t+12],6,1700485571),h=l(h,n,c,u,e[t+3],10,-1894986606),u=l(u,h,n,c,e[t+10],15,-1051523),c=l(c,u,h,n,e[t+1],21,-2054922799),n=l(n,c,u,h,e[t+8],6,1873313359),h=l(h,n,c,u,e[t+15],10,-30611744),u=l(u,h,n,c,e[t+6],15,-1560198380),c=l(c,u,h,n,e[t+13],21,1309151649),n=l(n,c,u,h,e[t+4],6,-145523070),h=l(h,n,c,u,e[t+11],10,-1120210379),u=l(u,h,n,c,e[t+2],15,718787259),c=l(c,u,h,n,e[t+9],21,-343485551),n=r(n,i),c=r(c,d),u=r(u,f),h=r(h,p)}return[n,c,u,h]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(i(t));for(let i=0;i<t;i+=8)r[i>>5]|=(255&e[i/8])<<i%32;return r}(e),8*e.length))}},4790:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=i},6314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},8222:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(6435))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}},58:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},3319:(e,t)=>{"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)};const r=new Uint8Array(16)},3757:(e,t)=>{"use strict";function i(e,t,i,r){switch(e){case 0:return t&i^~t&r;case 1:case 3:return t^i^r;case 2:return t&i^t&r^i&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s);for(let t=0;t<s;++t){const i=new Uint32Array(16);for(let r=0;r<16;++r)i[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];o[t]=i}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=o[e][t];for(let e=16;e<80;++e)a[e]=r(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let s=n[0],l=n[1],c=n[2],u=n[3],h=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),o=r(s,5)+i(n,l,c,u)+h+t[n]+a[e]>>>0;h=u,u=c,c=r(l,30)>>>0,l=s,s=o}n[0]=n[0]+s>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+h>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},4008:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var r,n=(r=i(6435))&&r.__esModule?r:{default:r};const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function s(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}t.default=function(e,t=0){const i=s(e,t);if(!(0,n.default)(i))throw TypeError("Stringified UUID is invalid");return i}},3990:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(3319))&&r.__esModule?r:{default:r},a=i(4008);let s,o,l=0,c=0;t.default=function(e,t,i){let r=t&&i||0;const u=t||new Array(16);let h=(e=e||{}).node||s,d=void 0!==e.clockseq?e.clockseq:o;if(null==h||null==d){const t=e.random||(e.rng||n.default)();null==h&&(h=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=o=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const m=f-l+(p-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||f>l)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=f,c=p,o=d,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[r++]=g>>>24&255,u[r++]=g>>>16&255,u[r++]=g>>>8&255,u[r++]=255&g;const b=f/4294967296*1e4&268435455;u[r++]=b>>>8&255,u[r++]=255&b,u[r++]=b>>>24&15|16,u[r++]=b>>>16&255,u[r++]=d>>>8|128,u[r++]=255&d;for(let e=0;e<6;++e)u[r+e]=h[e];return t||(0,a.unsafeStringify)(u)}},8237:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i(7925)),n=a(i(4163));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,n.default);t.default=s},7925:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,i){function r(e,r,s,o){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof r&&(r=(0,a.default)(r)),16!==(null===(l=r)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),c=i(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=c[e];return s}return(0,n.unsafeStringify)(c)}try{r.name=e}catch(e){}return r.DNS=s,r.URL=o,r};var r,n=i(4008),a=(r=i(8222))&&r.__esModule?r:{default:r};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=o},5355:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(i(4790)),n=s(i(3319)),a=i(4008);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,i){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const s=(e=e||{}).random||(e.rng||n.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=s[e];return t}return(0,a.unsafeStringify)(s)}},3764:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i(7925)),n=a(i(3757));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,n.default);t.default=s},6435:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(58))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&n.default.test(e)}},8464:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=i(6435))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},2165:()=>{},5138:()=>{},6125:()=>{},7356:()=>{},7218:(e,t,i)=>{"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}const{toString:n}=Object.prototype,{getPrototypeOf:a}=Object,s=(o=Object.create(null),e=>{const t=n.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())});var o;const l=e=>(e=e.toLowerCase(),t=>s(t)===e),c=e=>t=>typeof t===e,{isArray:u}=Array,h=c("undefined"),d=l("ArrayBuffer"),f=c("string"),p=c("function"),m=c("number"),g=e=>null!==e&&"object"==typeof e,b=e=>{if("object"!==s(e))return!1;const t=a(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=l("Date"),_=l("File"),y=l("Blob"),A=l("FileList"),E=l("URLSearchParams");function w(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let r,n;if("object"!=typeof e&&(e=[e]),u(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let s;for(r=0;r<a;r++)s=n[r],t.call(null,e[s],s,e)}}function S(e,t){t=t.toLowerCase();const i=Object.keys(e);let r,n=i.length;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:i.g,x=e=>!h(e)&&e!==T,M=(R="undefined"!=typeof Uint8Array&&a(Uint8Array),e=>R&&e instanceof R);var R;const P=l("HTMLFormElement"),C=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),k=l("RegExp"),O=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};w(i,((i,n)=>{!1!==t(i,n,e)&&(r[n]=i)})),Object.defineProperties(e,r)},D="abcdefghijklmnopqrstuvwxyz",N="0123456789",I={DIGIT:N,ALPHA:D,ALPHA_DIGIT:D+D.toUpperCase()+N},L=l("AsyncFunction");var U={isArray:u,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=s(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:f,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:b,isUndefined:h,isDate:v,isFile:_,isBlob:y,isRegExp:k,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:M,isFileList:A,forEach:w,merge:function e(){const{caseless:t}=x(this)&&this||{},i={},r=(r,n)=>{const a=t&&S(i,n)||n;b(i[a])&&b(r)?i[a]=e(i[a],r):b(r)?i[a]=e({},r):u(r)?i[a]=r.slice():i[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&w(arguments[e],r);return i},extend:(e,t,i,{allOwnKeys:n}={})=>(w(t,((t,n)=>{i&&p(t)?e[n]=r(t,i):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,r)=>{let n,s,o;const l={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)o=n[s],r&&!r(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==i&&a(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:l,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return-1!==r&&r===i},toArray:e=>{if(!e)return null;if(u(e))return e;let t=e.length;if(!m(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const r=[];for(;null!==(i=e.exec(t));)r.push(i);return r},isHTMLForm:P,hasOwnProperty:C,hasOwnProp:C,reduceDescriptors:O,freezeMethods:e=>{O(e,((t,i)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const r=e[i];p(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},r=e=>{e.forEach((e=>{i[e]=!0}))};return u(e)?r(e):r(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:S,global:T,isContextDefined:x,ALPHABET:I,generateString:(e=16,t=I.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,r)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const n=u(e)?[]:{};return w(e,((e,t)=>{const a=i(e,r+1);!h(a)&&(n[t]=a)})),t[r]=void 0,n}}return e};return i(e,0)},isAsyncFn:L,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch)};function V(e,t,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n)}U.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const F=V.prototype,G={};function B(e){return U.isPlainObject(e)||U.isArray(e)}function j(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function z(e,t,i){return e?e.concat(t).map((function(e,t){return e=j(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{G[e]={value:e}})),Object.defineProperties(V,G),Object.defineProperty(F,"isAxiosError",{value:!0}),V.from=(e,t,i,r,n,a)=>{const s=Object.create(F);return U.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),V.call(s,e.message,t,i,r,n),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const H=U.toFlatObject(U,{},null,(function(e){return/^is[A-Z]/.test(e)}));function W(e,t,i){if(!U.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(i=U.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!U.isUndefined(t[e])}))).metaTokens,n=i.visitor||c,a=i.dots,s=i.indexes,o=(i.Blob||"undefined"!=typeof Blob&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(U.isDate(e))return e.toISOString();if(!o&&U.isBlob(e))throw new V("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(e)||U.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,n){let o=e;if(e&&!n&&"object"==typeof e)if(U.endsWith(i,"{}"))i=r?i:i.slice(0,-2),e=JSON.stringify(e);else if(U.isArray(e)&&function(e){return U.isArray(e)&&!e.some(B)}(e)||(U.isFileList(e)||U.endsWith(i,"[]"))&&(o=U.toArray(e)))return i=j(i),o.forEach((function(e,r){!U.isUndefined(e)&&null!==e&&t.append(!0===s?z([i],r,a):null===s?i:i+"[]",l(e))})),!1;return!!B(e)||(t.append(z(n,i,a),l(e)),!1)}const u=[],h=Object.assign(H,{defaultVisitor:c,convertValue:l,isVisitable:B});if(!U.isObject(e))throw new TypeError("data must be an object");return function e(i,r){if(!U.isUndefined(i)){if(-1!==u.indexOf(i))throw Error("Circular reference detected in "+r.join("."));u.push(i),U.forEach(i,(function(i,a){!0===(!(U.isUndefined(i)||null===i)&&n.call(t,i,U.isString(a)?a.trim():a,r,h))&&e(i,r?r.concat(a):[a])})),u.pop()}}(e),t}function $(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Y(e,t){this._pairs=[],e&&W(e,this,t)}const X=Y.prototype;function q(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Z(e,t,i){if(!t)return e;const r=i&&i.encode||q,n=i&&i.serialize;let a;if(a=n?n(t,i):U.isURLSearchParams(t)?t.toString():new Y(t,i).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}X.append=function(e,t){this._pairs.push([e,t])},X.toString=function(e){const t=e?function(t){return e.call(this,t,$)}:$;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var J=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},K={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Y,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function ee(e){function t(e,i,r,n){let a=e[n++];const s=Number.isFinite(+a),o=n>=e.length;return a=!a&&U.isArray(r)?r.length:a,o?(U.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!s):(r[a]&&U.isObject(r[a])||(r[a]=[]),t(e,i,r[a],n)&&U.isArray(r[a])&&(r[a]=function(e){const t={},i=Object.keys(e);let r;const n=i.length;let a;for(r=0;r<n;r++)a=i[r],t[a]=e[a];return t}(r[a])),!s)}if(U.isFormData(e)&&U.isFunction(e.entries)){const i={};return U.forEachEntry(e,((e,r)=>{t(function(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,i,0)})),i}return null}const te={"Content-Type":void 0},ie={transitional:K,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,n=U.isObject(e);if(n&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return r&&r?JSON.stringify(ee(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return W(e,new Q.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,r){return Q.isNode&&U.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=U.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return W(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,i){if(U.isString(e))try{return(0,JSON.parse)(e),U.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ie.transitional,i=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&U.isString(e)&&(i&&!this.responseType||r)){const i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw V.from(e,V.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q.classes.FormData,Blob:Q.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};U.forEach(["delete","get","head"],(function(e){ie.headers[e]={}})),U.forEach(["post","put","patch"],(function(e){ie.headers[e]=U.merge(te)}));var re=ie;const ne=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ae=Symbol("internals");function se(e){return e&&String(e).trim().toLowerCase()}function oe(e){return!1===e||null==e?e:U.isArray(e)?e.map(oe):String(e)}function le(e,t,i,r,n){return U.isFunction(r)?r.call(this,t,i):(n&&(t=i),U.isString(t)?U.isString(r)?-1!==t.indexOf(r):U.isRegExp(r)?r.test(t):void 0:void 0)}class ce{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function n(e,t,i){const n=se(t);if(!n)throw new Error("header name must be a non-empty string");const a=U.findKey(r,n);(!a||void 0===r[a]||!0===i||void 0===i&&!1!==r[a])&&(r[a||t]=oe(e))}const a=(e,t)=>U.forEach(e,((e,i)=>n(e,i,t)));return U.isPlainObject(e)||e instanceof this.constructor?a(e,t):U.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let i,r,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!i||t[i]&&ne[i]||("set-cookie"===i?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)})),t})(e),t):null!=e&&n(t,e,i),this}get(e,t){if(e=se(e)){const i=U.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}(e);if(U.isFunction(t))return t.call(this,e,i);if(U.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=se(e)){const i=U.findKey(this,e);return!(!i||void 0===this[i]||t&&!le(0,this[i],i,t))}return!1}delete(e,t){const i=this;let r=!1;function n(e){if(e=se(e)){const n=U.findKey(i,e);!n||t&&!le(0,i[n],n,t)||(delete i[n],r=!0)}}return U.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const n=t[i];e&&!le(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,i={};return U.forEach(this,((r,n)=>{const a=U.findKey(i,n);if(a)return t[a]=oe(r),void delete t[n];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(n):String(n).trim();s!==n&&delete t[n],t[s]=oe(r),i[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return U.forEach(this,((i,r)=>{null!=i&&!1!==i&&(t[r]=e&&U.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach((e=>i.set(e))),i}static accessor(e){const t=(this[ae]=this[ae]={accessors:{}}).accessors,i=this.prototype;function r(e){const r=se(e);t[r]||(function(e,t){const i=U.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+i,{value:function(e,i,n){return this[r].call(this,t,e,i,n)},configurable:!0})}))}(i,e),t[r]=!0)}return U.isArray(e)?e.forEach(r):r(e),this}}ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),U.freezeMethods(ce.prototype),U.freezeMethods(ce);var ue=ce;function he(e,t){const i=this||re,r=t||i,n=ue.from(r.headers);let a=r.data;return U.forEach(e,(function(e){a=e.call(i,a,n.normalize(),t?t.status:void 0)})),n.normalize(),a}function de(e){return!(!e||!e.__CANCEL__)}function fe(e,t,i){V.call(this,null==e?"canceled":e,V.ERR_CANCELED,t,i),this.name="CanceledError"}U.inherits(fe,V,{__CANCEL__:!0});var pe=Q.isStandardBrowserEnv?{write:function(e,t,i,r,n,a){const s=[];s.push(e+"="+encodeURIComponent(t)),U.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),U.isString(r)&&s.push("path="+r),U.isString(n)&&s.push("domain="+n),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function me(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var ge=Q.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(i){let r=i;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(e){const t=U.isString(e)?r(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function(){return!0};function be(e,t){let i=0;const r=function(e,t){e=e||10;const i=new Array(e),r=new Array(e);let n,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];n||(n=l),i[a]=o,r[a]=l;let u=s,h=0;for(;u!==a;)h+=i[u++],u%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-n<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}(50,250);return n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-i,l=r(o);i=a;const c={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n};c[t?"download":"upload"]=!0,e(c)}}const ve={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){let r=e.data;const n=ue.from(e.headers).normalize(),a=e.responseType;let s;function o(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}U.isFormData(r)&&(Q.isStandardBrowserEnv||Q.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.set("Authorization","Basic "+btoa(t+":"+i))}const c=me(e.baseURL,e.url);function u(){if(!l)return;const r=ue.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,i){const r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(new V("Request failed with status code "+i.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}((function(e){t(e),o()}),(function(e){i(e),o()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),Z(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(i(new V("Request aborted",V.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new V("Network Error",V.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||K;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new V(t,r.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,l)),l=null},Q.isStandardBrowserEnv){const t=(e.withCredentials||ge(c))&&e.xsrfCookieName&&pe.read(e.xsrfCookieName);t&&n.set(e.xsrfHeaderName,t)}void 0===r&&n.setContentType(null),"setRequestHeader"in l&&U.forEach(n.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),U.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",be(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",be(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{l&&(i(!t||t.type?new fe(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);h&&-1===Q.protocols.indexOf(h)?i(new V("Unsupported protocol "+h+":",V.ERR_BAD_REQUEST,e)):l.send(r||null)}))}};U.forEach(ve,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function _e(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fe(null,e)}function ye(e){return _e(e),e.headers=ue.from(e.headers),e.data=he.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=U.isArray(e)?e:[e];const{length:t}=e;let i,r;for(let n=0;n<t&&(i=e[n],!(r=U.isString(i)?ve[i.toLowerCase()]:i));n++);if(!r){if(!1===r)throw new V(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(U.hasOwnProp(ve,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`)}if(!U.isFunction(r))throw new TypeError("adapter is not a function");return r})(e.adapter||re.adapter)(e).then((function(t){return _e(e),t.data=he.call(e,e.transformResponse,t),t.headers=ue.from(t.headers),t}),(function(t){return de(t)||(_e(e),t&&t.response&&(t.response.data=he.call(e,e.transformResponse,t.response),t.response.headers=ue.from(t.response.headers))),Promise.reject(t)}))}const Ae=e=>e instanceof ue?e.toJSON():e;function Ee(e,t){t=t||{};const i={};function r(e,t,i){return U.isPlainObject(e)&&U.isPlainObject(t)?U.merge.call({caseless:i},e,t):U.isPlainObject(t)?U.merge({},t):U.isArray(t)?t.slice():t}function n(e,t,i){return U.isUndefined(t)?U.isUndefined(e)?void 0:r(void 0,e,i):r(e,t,i)}function a(e,t){if(!U.isUndefined(t))return r(void 0,t)}function s(e,t){return U.isUndefined(t)?U.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(i,n,a){return a in t?r(i,n):a in e?r(void 0,i):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t)=>n(Ae(e),Ae(t),!0)};return U.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||n,s=a(e[r],t[r],r);U.isUndefined(s)&&a!==o||(i[r]=s)})),i}const we={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{we[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const Se={};we.transitional=function(e,t,i){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,a)=>{if(!1===e)throw new V(r(n," has been removed"+(t?" in "+t:"")),V.ERR_DEPRECATED);return t&&!Se[n]&&(Se[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,a)}};var Te={assertOptions:function(e,t,i){if("object"!=typeof e)throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const a=r[n],s=t[a];if(s){const t=e[a],i=void 0===t||s(t,a,e);if(!0!==i)throw new V("option "+a+" must be "+i,V.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new V("Unknown option "+a,V.ERR_BAD_OPTION)}},validators:we};const xe=Te.validators;class Me{constructor(e){this.defaults=e,this.interceptors={request:new J,response:new J}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ee(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:n}=t;let a;void 0!==i&&Te.assertOptions(i,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),null!=r&&(U.isFunction(r)?t.paramsSerializer={serialize:r}:Te.assertOptions(r,{encode:xe.function,serialize:xe.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),a=n&&U.merge(n.common,n[t.method]),a&&U.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=ue.concat(a,n);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!o){const e=[ye.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=s.length;let d=t;for(h=0;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{c=ye.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Z(me((e=Ee(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],(function(e){Me.prototype[e]=function(t,i){return this.request(Ee(i||{},{method:e,url:t,data:(i||{}).data}))}})),U.forEach(["post","put","patch"],(function(e){function t(t){return function(i,r,n){return this.request(Ee(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}Me.prototype[e]=t(),Me.prototype[e+"Form"]=t(!0)}));var Re=Me;class Pe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{i.subscribe(e),t=e})).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e((function(e,r,n){i.reason||(i.reason=new fe(e,r,n),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Pe((function(t){e=t})),cancel:e}}}var Ce=Pe;const ke={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ke).forEach((([e,t])=>{ke[t]=e}));var Oe=ke;const De=function e(t){const i=new Re(t),n=r(Re.prototype.request,i);return U.extend(n,Re.prototype,i,{allOwnKeys:!0}),U.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return e(Ee(t,i))},n}(re);De.Axios=Re,De.CanceledError=fe,De.CancelToken=Ce,De.isCancel=de,De.VERSION="1.4.0",De.toFormData=W,De.AxiosError=V,De.Cancel=De.CanceledError,De.all=function(e){return Promise.all(e)},De.spread=function(e){return function(t){return e.apply(null,t)}},De.isAxiosError=function(e){return U.isObject(e)&&!0===e.isAxiosError},De.mergeConfig=Ee,De.AxiosHeaders=ue,De.formToJSON=e=>ee(U.isHTMLForm(e)?new FormData(e):e),De.HttpStatusCode=Oe,De.default=De,e.exports=De},5232:(e,t)=>{"use strict";const i="149",r=0,n=1,a=2,s=1,o=2,l=3,c=0,u=1,h=2,d=0,f=1,p=2,m=3,g=4,b=5,v=100,_=101,y=102,A=103,E=104,w=200,S=201,T=202,x=203,M=204,R=205,P=206,C=207,k=208,O=209,D=210,N=0,I=1,L=2,U=3,V=4,F=5,G=6,B=7,j=0,z=1,H=2,W=0,$=1,Y=2,X=3,q=4,Z=5,J=300,K=301,Q=302,ee=303,te=304,ie=306,re=1e3,ne=1001,ae=1002,se=1003,oe=1004,le=1005,ce=1006,ue=1007,he=1008,de=1009,fe=1010,pe=1011,me=1012,ge=1013,be=1014,ve=1015,_e=1016,ye=1017,Ae=1018,Ee=1020,we=1021,Se=1023,Te=1024,xe=1025,Me=1026,Re=1027,Pe=1028,Ce=1029,ke=1030,Oe=1031,De=1033,Ne=33776,Ie=33777,Le=33778,Ue=33779,Ve=35840,Fe=35841,Ge=35842,Be=35843,je=36196,ze=37492,He=37496,We=37808,$e=37809,Ye=37810,Xe=37811,qe=37812,Ze=37813,Je=37814,Ke=37815,Qe=37816,et=37817,tt=37818,it=37819,rt=37820,nt=37821,at=36492,st=36283,ot=36284,lt=36285,ct=36286,ut=2300,ht=2301,dt=2302,ft=2400,pt=2401,mt=2402,gt=2501,bt=3e3,vt=3001,_t=3201,yt=0,At=1,Et="srgb",wt="srgb-linear",St=7680,Tt=35044,xt="300 es",Mt=1035;class Rt{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,r=i.length;t<r;t++)i[t].call(this,e);e.target=null}}}const Pt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ct=1234567;const kt=Math.PI/180,Ot=180/Math.PI;function Dt(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Pt[255&e]+Pt[e>>8&255]+Pt[e>>16&255]+Pt[e>>24&255]+"-"+Pt[255&t]+Pt[t>>8&255]+"-"+Pt[t>>16&15|64]+Pt[t>>24&255]+"-"+Pt[63&i|128]+Pt[i>>8&255]+"-"+Pt[i>>16&255]+Pt[i>>24&255]+Pt[255&r]+Pt[r>>8&255]+Pt[r>>16&255]+Pt[r>>24&255]).toLowerCase()}function Nt(e,t,i){return Math.max(t,Math.min(i,e))}function It(e,t){return(e%t+t)%t}function Lt(e,t,i){return(1-i)*e+i*t}function Ut(e){return 0==(e&e-1)&&0!==e}function Vt(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Ft(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Gt(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Bt(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var jt=Object.freeze({__proto__:null,DEG2RAD:kt,RAD2DEG:Ot,ceilPowerOfTwo:Vt,clamp:Nt,damp:function(e,t,i,r){return Lt(e,t,1-Math.exp(-i*r))},degToRad:function(e){return e*kt},denormalize:Gt,euclideanModulo:It,floorPowerOfTwo:Ft,generateUUID:Dt,inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},isPowerOfTwo:Ut,lerp:Lt,mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},normalize:Bt,pingpong:function(e,t=1){return t-Math.abs(It(e,2*t)-t)},radToDeg:function(e){return e*Ot},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},seededRandom:function(e){void 0!==e&&(Ct=e);let t=Ct+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},setQuaternionFromProperEuler:function(e,t,i,r,n){const a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((t+r)/2),u=s((t+r)/2),h=a((t-r)/2),d=s((t-r)/2),f=a((r-t)/2),p=s((r-t)/2);switch(n){case"XYX":e.set(o*u,l*h,l*d,o*c);break;case"YZY":e.set(l*d,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*d,o*u,o*c);break;case"XZX":e.set(o*u,l*p,l*f,o*c);break;case"YXY":e.set(l*f,o*u,l*p,o*c);break;case"ZYZ":e.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)}});class zt{constructor(e=0,t=0){zt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*i-a*r+e.x,this.y=n*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ht{constructor(){Ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,n,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=n,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],f=i[8],p=r[0],m=r[3],g=r[6],b=r[1],v=r[4],_=r[7],y=r[2],A=r[5],E=r[8];return n[0]=a*p+s*b+o*y,n[3]=a*m+s*v+o*A,n[6]=a*g+s*_+o*E,n[1]=l*p+c*b+u*y,n[4]=l*m+c*v+u*A,n[7]=l*g+c*_+u*E,n[2]=h*p+d*b+f*y,n[5]=h*m+d*v+f*A,n[8]=h*g+d*_+f*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-i*n*c+i*s*o+r*n*l-r*a*o}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,h=s*o-c*n,d=l*n-a*o,f=t*u+i*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*i)*p,e[2]=(s*i-r*a)*p,e[3]=h*p,e[4]=(c*t-r*o)*p,e[5]=(r*n-s*t)*p,e[6]=d*p,e[7]=(i*o-l*t)*p,e[8]=(a*t-i*n)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,n,a,s){const o=Math.cos(n),l=Math.sin(n);return this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Wt.makeScale(e,t)),this}rotate(e){return this.premultiply(Wt.makeRotation(-e)),this}translate(e,t){return this.premultiply(Wt.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Wt=new Ht;function $t(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Yt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Xt(e,t){return new Yt[e](t)}function qt(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Zt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Jt(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Kt={[Et]:{[wt]:Zt},[wt]:{[Et]:Jt}},Qt={legacyMode:!0,get workingColorSpace(){return wt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(Kt[t]&&void 0!==Kt[t][i]){const r=Kt[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ti={r:0,g:0,b:0},ii={h:0,s:0,l:0},ri={h:0,s:0,l:0};function ni(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}function ai(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class si{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Et){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Qt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Qt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Qt.workingColorSpace){if(e=It(e,1),t=Nt(t,0,1),i=Nt(i,0,1),0===t)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,n=2*i-r;this.r=ni(n,r,e+1/3),this.g=ni(n,r,e),this.b=ni(n,r,e-1/3)}return Qt.toWorkingColorSpace(this,r),this}setStyle(e,t=Et){function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Qt.toWorkingColorSpace(this,t),i(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Qt.toWorkingColorSpace(this,t),i(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const r=parseFloat(e[1])/360,n=parseFloat(e[2])/100,a=parseFloat(e[3])/100;return i(e[4]),this.setHSL(r,n,a,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],i=e.length;if(3===i)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Qt.toWorkingColorSpace(this,t),this;if(6===i)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Qt.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Et){const i=ei[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zt(e.r),this.g=Zt(e.g),this.b=Zt(e.b),this}copyLinearToSRGB(e){return this.r=Jt(e.r),this.g=Jt(e.g),this.b=Jt(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Et){return Qt.fromWorkingColorSpace(ai(this,ti),e),Nt(255*ti.r,0,255)<<16^Nt(255*ti.g,0,255)<<8^Nt(255*ti.b,0,255)<<0}getHexString(e=Et){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qt.workingColorSpace){Qt.fromWorkingColorSpace(ai(this,ti),t);const i=ti.r,r=ti.g,n=ti.b,a=Math.max(i,r,n),s=Math.min(i,r,n);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case i:o=(r-n)/e+(r<n?6:0);break;case r:o=(n-i)/e+2;break;case n:o=(i-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Qt.workingColorSpace){return Qt.fromWorkingColorSpace(ai(this,ti),t),e.r=ti.r,e.g=ti.g,e.b=ti.b,e}getStyle(e=Et){return Qt.fromWorkingColorSpace(ai(this,ti),e),e!==Et?`color(${e} ${ti.r} ${ti.g} ${ti.b})`:`rgb(${255*ti.r|0},${255*ti.g|0},${255*ti.b|0})`}offsetHSL(e,t,i){return this.getHSL(ii),ii.h+=e,ii.s+=t,ii.l+=i,this.setHSL(ii.h,ii.s,ii.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ii),e.getHSL(ri);const i=Lt(ii.h,ri.h,t),r=Lt(ii.s,ri.s,t),n=Lt(ii.l,ri.l,t);return this.setHSL(i,r,n),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let oi;si.NAMES=ei;class li{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===oi&&(oi=qt("canvas")),oi.width=e.width,oi.height=e.height;const i=oi.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=oi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=qt("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),n=r.data;for(let e=0;e<n.length;e++)n[e]=255*Zt(n[e]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Zt(t[e]/255)):t[e]=Zt(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ci{constructor(e=null){this.isSource=!0,this.uuid=Dt(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,i=r.length;t<i;t++)r[t].isDataTexture?e.push(ui(r[t].image)):e.push(ui(r[t]))}else e=ui(r);i.url=e}return t||(e.images[this.uuid]=i),i}}function ui(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?li.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hi=0;class di extends Rt{constructor(e=di.DEFAULT_IMAGE,t=di.DEFAULT_MAPPING,i=ne,r=ne,n=ce,a=he,s=Se,o=de,l=di.DEFAULT_ANISOTROPY,c=bt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hi++}),this.uuid=Dt(),this.name="",this.source=new ci(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new zt(0,0),this.repeat=new zt(1,1),this.center=new zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==J)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case re:e.x=e.x-Math.floor(e.x);break;case ne:e.x=e.x<0?0:1;break;case ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case re:e.y=e.y-Math.floor(e.y);break;case ne:e.y=e.y<0?0:1;break;case ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}di.DEFAULT_IMAGE=null,di.DEFAULT_MAPPING=J,di.DEFAULT_ANISOTROPY=1;class fi{constructor(e=0,t=0,i=0,r=1){fi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*n,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*n,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*n,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,n;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,b=(g+1)/2,v=(c+h)/4,_=(u+p)/4,y=(f+m)/4;return e>o&&e>b?e<a?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(e),r=v/i,n=_/i):o>b?o<a?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(o),i=v/r,n=y/r):b<a?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(b),i=_/n,r=y/n),this.set(i,r,n,t),this}let b=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(b)<.001&&(b=1),this.x=(m-f)/b,this.y=(u-p)/b,this.z=(h-c)/b,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pi extends Rt{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new fi(0,0,e,t),this.scissorTest=!1,this.viewport=new fi(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new di(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ce,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ci(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class mi extends di{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=se,this.minFilter=se,this.wrapR=ne,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gi extends di{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=se,this.minFilter=se,this.wrapR=ne,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,n,a,s){let o=i[r+0],l=i[r+1],c=i[r+2],u=i[r+3];const h=n[a+0],d=n[a+1],f=n[a+2],p=n[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||o!==h||l!==d||c!==f){let e=1-s;const t=o*h+l*d+c*f+u*p,i=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const n=Math.sqrt(r),a=Math.atan2(n,t*i);e=Math.sin(e*a)/n,s=Math.sin(s*a)/n}const n=s*i;if(o=o*e+h*n,l=l*e+d*n,c=c*e+f*n,u=u*e+p*n,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,n,a){const s=i[r],o=i[r+1],l=i[r+2],c=i[r+3],u=n[a],h=n[a+1],d=n[a+2],f=n[a+3];return e[t]=s*f+c*u+o*d-l*h,e[t+1]=o*f+c*h+l*u-s*d,e[t+2]=l*f+c*d+s*h-o*u,e[t+3]=c*f-s*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,n=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(r/2),u=s(n/2),h=o(i/2),d=o(r/2),f=o(n/2);switch(a){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],n=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=i+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(n-l)*e,this._z=(a-r)*e}else if(i>s&&i>u){const e=2*Math.sqrt(1+i-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(n+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-i-u);this._w=(n-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-i-s);this._w=(a-r)/e,this._x=(n+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,n=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+a*s+r*l-n*o,this._y=r*c+a*o+n*s-i*l,this._z=n*c+a*l+i*o-r*s,this._w=a*c-i*s-r*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,n=this._z,a=this._w;let s=a*e._w+i*e._x+r*e._y+n*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=i,this._y=r,this._z=n,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*i+t*this._x,this._y=e*r+t*this._y,this._z=e*n+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=i*u+this._x*h,this._y=r*u+this._y*h,this._z=n*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(n),i*Math.cos(n),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class vi{constructor(e=0,t=0,i=0){vi.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yi.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yi.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,n=e.elements,a=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*a,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*a,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*r-s*i,c=o*i+s*t-n*r,u=o*r+n*i-a*t,h=-n*t-a*i-s*r;return this.x=l*o+h*-n+c*-s-u*-a,this.y=c*o+h*-a+u*-n-l*-s,this.z=u*o+h*-s+l*-a-c*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-n*s,this.y=n*a-i*o,this.z=i*s-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return _i.copy(this).projectOnVector(e),this.sub(_i)}reflect(e){return this.sub(_i.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Nt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _i=new vi,yi=new bi;class Ai{constructor(e=new vi(1/0,1/0,1/0),t=new vi(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<i&&(i=c),u<r&&(r=u),l>n&&(n=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,i,r),this.max.set(n,a,s),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<i&&(i=c),u<r&&(r=u),l>n&&(n=l),c>a&&(a=c),u>s&&(s=u)}return this.min.set(t,i,r),this.max.set(n,a,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=wi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i)if(t&&null!=i.attributes&&void 0!==i.attributes.position){const t=i.attributes.position;for(let i=0,r=t.count;i<r;i++)wi.fromBufferAttribute(t,i).applyMatrix4(e.matrixWorld),this.expandByPoint(wi)}else null===i.boundingBox&&i.computeBoundingBox(),Si.copy(i.boundingBox),Si.applyMatrix4(e.matrixWorld),this.union(Si);const r=e.children;for(let e=0,i=r.length;e<i;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,wi),wi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ki),Oi.subVectors(this.max,ki),Ti.subVectors(e.a,ki),xi.subVectors(e.b,ki),Mi.subVectors(e.c,ki),Ri.subVectors(xi,Ti),Pi.subVectors(Mi,xi),Ci.subVectors(Ti,Mi);let t=[0,-Ri.z,Ri.y,0,-Pi.z,Pi.y,0,-Ci.z,Ci.y,Ri.z,0,-Ri.x,Pi.z,0,-Pi.x,Ci.z,0,-Ci.x,-Ri.y,Ri.x,0,-Pi.y,Pi.x,0,-Ci.y,Ci.x,0];return!!Ii(t,Ti,xi,Mi,Oi)&&(t=[1,0,0,0,1,0,0,0,1],!!Ii(t,Ti,xi,Mi,Oi)&&(Di.crossVectors(Ri,Pi),t=[Di.x,Di.y,Di.z],Ii(t,Ti,xi,Mi,Oi)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wi.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(wi).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ei[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ei[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ei[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ei[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ei[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ei[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ei[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ei[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ei)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ei=[new vi,new vi,new vi,new vi,new vi,new vi,new vi,new vi],wi=new vi,Si=new Ai,Ti=new vi,xi=new vi,Mi=new vi,Ri=new vi,Pi=new vi,Ci=new vi,ki=new vi,Oi=new vi,Di=new vi,Ni=new vi;function Ii(e,t,i,r,n){for(let a=0,s=e.length-3;a<=s;a+=3){Ni.fromArray(e,a);const s=n.x*Math.abs(Ni.x)+n.y*Math.abs(Ni.y)+n.z*Math.abs(Ni.z),o=t.dot(Ni),l=i.dot(Ni),c=r.dot(Ni);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Li=new Ai,Ui=new vi,Vi=new vi;class Fi{constructor(e=new vi,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Li.setFromPoints(e).getCenter(i);let r=0;for(let t=0,n=e.length;t<n;t++)r=Math.max(r,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ui.subVectors(e,this.center);const t=Ui.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(Ui,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Vi.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ui.copy(e.center).add(Vi)),this.expandByPoint(Ui.copy(e.center).sub(Vi))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Gi=new vi,Bi=new vi,ji=new vi,zi=new vi,Hi=new vi,Wi=new vi,$i=new vi;class Yi{constructor(e=new vi,t=new vi(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Gi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Gi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Gi.copy(this.direction).multiplyScalar(t).add(this.origin),Gi.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Bi.copy(e).add(t).multiplyScalar(.5),ji.copy(t).sub(e).normalize(),zi.copy(this.origin).sub(Bi);const n=.5*e.distanceTo(t),a=-this.direction.dot(ji),s=zi.dot(this.direction),o=-zi.dot(ji),l=zi.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*o-s,h=a*s-o,f=n*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+a*h+2*s)+h*(a*u+h+2*o)+l}else h=n,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h=-n,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-a*n+s)),h=u>0?-n:Math.min(Math.max(-n,-o),n),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-n,-o),n),d=h*(h+2*o)+l):(u=Math.max(0,-(a*n+s)),h=u>0?n:Math.min(Math.max(-n,-o),n),d=-u*u+h*(h+2*o)+l);else h=a>0?-n:n,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(ji).multiplyScalar(h).add(Bi),d}intersectSphere(e,t){Gi.subVectors(e.center,this.origin);const i=Gi.dot(this.direction),r=Gi.dot(Gi)-i*i,n=e.radius*e.radius;if(r>n)return null;const a=Math.sqrt(n-r),s=i-a,o=i+a;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,n,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(n=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(n=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),i>a||n>r?null:((n>i||isNaN(i))&&(i=n),(a<r||isNaN(r))&&(r=a),u>=0?(s=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),i>o||s>r?null:((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(i>=0?i:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Gi)}intersectTriangle(e,t,i,r,n){Hi.subVectors(t,e),Wi.subVectors(i,e),$i.crossVectors(Hi,Wi);let a,s=this.direction.dot($i);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}zi.subVectors(this.origin,e);const o=a*this.direction.dot(Wi.crossVectors(zi,Wi));if(o<0)return null;const l=a*this.direction.dot(Hi.cross(zi));if(l<0)return null;if(o+l>s)return null;const c=-a*zi.dot($i);return c<0?null:this.at(c/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Xi{constructor(){Xi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,n,a,s,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Xi).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/qi.setFromMatrixColumn(e,0).length(),n=1/qi.setFromMatrixColumn(e,1).length(),a=1/qi.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,n=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(r),l=Math.sin(r),c=Math.cos(n),u=Math.sin(n);if("XYZ"===e.order){const e=a*c,i=a*u,r=s*c,n=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=i+r*l,t[5]=e-n*l,t[9]=-s*o,t[2]=n-e*l,t[6]=r+i*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,i=o*u,r=l*c,n=l*u;t[0]=e+n*s,t[4]=r*s-i,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=i*s-r,t[6]=n+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,i=o*u,r=l*c,n=l*u;t[0]=e-n*s,t[4]=-a*u,t[8]=r+i*s,t[1]=i+r*s,t[5]=a*c,t[9]=n-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,i=a*u,r=s*c,n=s*u;t[0]=o*c,t[4]=r*l-i,t[8]=e*l+n,t[1]=o*u,t[5]=n*l+e,t[9]=i*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,i=a*l,r=s*o,n=s*l;t[0]=o*c,t[4]=n-e*u,t[8]=r*u+i,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*u+r,t[10]=e-n*u}else if("XZY"===e.order){const e=a*o,i=a*l,r=s*o,n=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+n,t[5]=a*c,t[9]=i*u-r,t[2]=r*u-i,t[6]=s*c,t[10]=n*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ji,e,Ki)}lookAt(e,t,i){const r=this.elements;return tr.subVectors(e,t),0===tr.lengthSq()&&(tr.z=1),tr.normalize(),Qi.crossVectors(i,tr),0===Qi.lengthSq()&&(1===Math.abs(i.z)?tr.x+=1e-4:tr.z+=1e-4,tr.normalize(),Qi.crossVectors(i,tr)),Qi.normalize(),er.crossVectors(tr,Qi),r[0]=Qi.x,r[4]=er.x,r[8]=tr.x,r[1]=Qi.y,r[5]=er.y,r[9]=tr.y,r[2]=Qi.z,r[6]=er.z,r[10]=tr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],b=i[3],v=i[7],_=i[11],y=i[15],A=r[0],E=r[4],w=r[8],S=r[12],T=r[1],x=r[5],M=r[9],R=r[13],P=r[2],C=r[6],k=r[10],O=r[14],D=r[3],N=r[7],I=r[11],L=r[15];return n[0]=a*A+s*T+o*P+l*D,n[4]=a*E+s*x+o*C+l*N,n[8]=a*w+s*M+o*k+l*I,n[12]=a*S+s*R+o*O+l*L,n[1]=c*A+u*T+h*P+d*D,n[5]=c*E+u*x+h*C+d*N,n[9]=c*w+u*M+h*k+d*I,n[13]=c*S+u*R+h*O+d*L,n[2]=f*A+p*T+m*P+g*D,n[6]=f*E+p*x+m*C+g*N,n[10]=f*w+p*M+m*k+g*I,n[14]=f*S+p*R+m*O+g*L,n[3]=b*A+v*T+_*P+y*D,n[7]=b*E+v*x+_*C+y*N,n[11]=b*w+v*M+_*k+y*I,n[15]=b*S+v*R+_*O+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+n*o*u-r*l*u-n*s*h+i*l*h+r*s*d-i*o*d)+e[7]*(+t*o*d-t*l*h+n*a*h-r*a*d+r*l*c-n*o*c)+e[11]*(+t*l*u-t*s*d-n*a*u+i*a*d+n*s*c-i*l*c)+e[15]*(-r*s*c-t*o*u+t*s*h+r*a*u-i*a*h+i*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],b=u*m*l-p*h*l+p*o*d-s*m*d-u*o*g+s*h*g,v=f*h*l-c*m*l-f*o*d+a*m*d+c*o*g-a*h*g,_=c*p*l-f*u*l+f*s*d-a*p*d-c*s*g+a*u*g,y=f*u*o-c*p*o-f*s*h+a*p*h+c*s*m-a*u*m,A=t*b+i*v+r*_+n*y;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=b*E,e[1]=(p*h*n-u*m*n-p*r*d+i*m*d+u*r*g-i*h*g)*E,e[2]=(s*m*n-p*o*n+p*r*l-i*m*l-s*r*g+i*o*g)*E,e[3]=(u*o*n-s*h*n-u*r*l+i*h*l+s*r*d-i*o*d)*E,e[4]=v*E,e[5]=(c*m*n-f*h*n+f*r*d-t*m*d-c*r*g+t*h*g)*E,e[6]=(f*o*n-a*m*n-f*r*l+t*m*l+a*r*g-t*o*g)*E,e[7]=(a*h*n-c*o*n+c*r*l-t*h*l-a*r*d+t*o*d)*E,e[8]=_*E,e[9]=(f*u*n-c*p*n-f*i*d+t*p*d+c*i*g-t*u*g)*E,e[10]=(a*p*n-f*s*n+f*i*l-t*p*l-a*i*g+t*s*g)*E,e[11]=(c*s*n-a*u*n-c*i*l+t*u*l+a*i*d-t*s*d)*E,e[12]=y*E,e[13]=(c*p*r-f*u*r+f*i*h-t*p*h-c*i*m+t*u*m)*E,e[14]=(f*s*r-a*p*r-f*i*o+t*p*o+a*i*m-t*s*m)*E,e[15]=(a*u*r-c*s*r+c*i*o-t*u*o-a*i*h+t*s*h)*E,this}scale(e){const t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),n=1-i,a=e.x,s=e.y,o=e.z,l=n*a,c=n*s;return this.set(l*a+i,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+i,c*o-r*a,0,l*o-r*s,c*o+r*a,n*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,n,a){return this.set(1,i,n,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,n=t._x,a=t._y,s=t._z,o=t._w,l=n+n,c=a+a,u=s+s,h=n*l,d=n*c,f=n*u,p=a*c,m=a*u,g=s*u,b=o*l,v=o*c,_=o*u,y=i.x,A=i.y,E=i.z;return r[0]=(1-(p+g))*y,r[1]=(d+_)*y,r[2]=(f-v)*y,r[3]=0,r[4]=(d-_)*A,r[5]=(1-(h+g))*A,r[6]=(m+b)*A,r[7]=0,r[8]=(f+v)*E,r[9]=(m-b)*E,r[10]=(1-(h+p))*E,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let n=qi.set(r[0],r[1],r[2]).length();const a=qi.set(r[4],r[5],r[6]).length(),s=qi.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],Zi.copy(this);const o=1/n,l=1/a,c=1/s;return Zi.elements[0]*=o,Zi.elements[1]*=o,Zi.elements[2]*=o,Zi.elements[4]*=l,Zi.elements[5]*=l,Zi.elements[6]*=l,Zi.elements[8]*=c,Zi.elements[9]*=c,Zi.elements[10]*=c,t.setFromRotationMatrix(Zi),i.x=n,i.y=a,i.z=s,this}makePerspective(e,t,i,r,n,a){const s=this.elements,o=2*n/(t-e),l=2*n/(i-r),c=(t+e)/(t-e),u=(i+r)/(i-r),h=-(a+n)/(a-n),d=-2*a*n/(a-n);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,r,n,a){const s=this.elements,o=1/(t-e),l=1/(i-r),c=1/(a-n),u=(t+e)*o,h=(i+r)*l,d=(a+n)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const qi=new vi,Zi=new Xi,Ji=new vi(0,0,0),Ki=new vi(1,1,1),Qi=new vi,er=new vi,tr=new vi,ir=new Xi,rr=new bi;class nr{constructor(e=0,t=0,i=0,r=nr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,n=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Nt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Nt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,n),this._z=0);break;case"ZXY":this._x=Math.asin(Nt(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-Nt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Nt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,n)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Nt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ir.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ir,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rr.setFromEuler(this),this.setFromQuaternion(rr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}nr.DEFAULT_ORDER="XYZ";class ar{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let sr=0;const or=new vi,lr=new bi,cr=new Xi,ur=new vi,hr=new vi,dr=new vi,fr=new bi,pr=new vi(1,0,0),mr=new vi(0,1,0),gr=new vi(0,0,1),br={type:"added"},vr={type:"removed"};class _r extends Rt{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sr++}),this.uuid=Dt(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DEFAULT_UP.clone();const e=new vi,t=new nr,i=new bi,r=new vi(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Xi},normalMatrix:{value:new Ht}}),this.matrix=new Xi,this.matrixWorld=new Xi,this.matrixAutoUpdate=_r.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new ar,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lr.setFromAxisAngle(e,t),this.quaternion.multiply(lr),this}rotateOnWorldAxis(e,t){return lr.setFromAxisAngle(e,t),this.quaternion.premultiply(lr),this}rotateX(e){return this.rotateOnAxis(pr,e)}rotateY(e){return this.rotateOnAxis(mr,e)}rotateZ(e){return this.rotateOnAxis(gr,e)}translateOnAxis(e,t){return or.copy(e).applyQuaternion(this.quaternion),this.position.add(or.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(pr,e)}translateY(e){return this.translateOnAxis(mr,e)}translateZ(e){return this.translateOnAxis(gr,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(cr.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ur.copy(e):ur.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),hr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cr.lookAt(hr,ur,this.up):cr.lookAt(ur,hr,this.up),this.quaternion.setFromRotationMatrix(cr),r&&(cr.extractRotation(r.matrixWorld),lr.setFromRotationMatrix(cr),this.quaternion.premultiply(lr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(br)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vr)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(vr)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),cr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),cr.multiply(e.parent.matrixWorld)),e.applyMatrix4(cr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,n=this.children.length;r<n;r++){const n=this.children[r].getObjectsByProperty(e,t);n.length>0&&(i=i.concat(n))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hr,e,dr),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hr,fr,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const r=t[i];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++){const i=e[t];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function n(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,r=i.length;t<r;t++){const r=i[t];n(e.shapes,r)}else n(e.shapes,i)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,r=this.material.length;i<r;i++)t.push(n(e.materials,this.material[i]));r.material=t}else r.material=n(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];r.animations.push(n(e.animations,i))}}if(t){const t=a(e.geometries),r=a(e.materials),n=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(i.geometries=t),r.length>0&&(i.materials=r),n.length>0&&(i.textures=n),s.length>0&&(i.images=s),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),u.length>0&&(i.nodes=u)}return i.object=r,i;function a(e){const t=[];for(const i in e){const r=e[i];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}}_r.DEFAULT_UP=new vi(0,1,0),_r.DEFAULT_MATRIX_AUTO_UPDATE=!0,_r.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const yr=new vi,Ar=new vi,Er=new vi,wr=new vi,Sr=new vi,Tr=new vi,xr=new vi,Mr=new vi,Rr=new vi,Pr=new vi;class Cr{constructor(e=new vi,t=new vi,i=new vi){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),yr.subVectors(e,t),r.cross(yr);const n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(e,t,i,r,n){yr.subVectors(r,t),Ar.subVectors(i,t),Er.subVectors(e,t);const a=yr.dot(yr),s=yr.dot(Ar),o=yr.dot(Er),l=Ar.dot(Ar),c=Ar.dot(Er),u=a*l-s*s;if(0===u)return n.set(-2,-1,-1);const h=1/u,d=(l*o-s*c)*h,f=(a*c-s*o)*h;return n.set(1-d-f,f,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wr),wr.x>=0&&wr.y>=0&&wr.x+wr.y<=1}static getUV(e,t,i,r,n,a,s,o){return this.getBarycoord(e,t,i,r,wr),o.set(0,0),o.addScaledVector(n,wr.x),o.addScaledVector(a,wr.y),o.addScaledVector(s,wr.z),o}static isFrontFacing(e,t,i,r){return yr.subVectors(i,t),Ar.subVectors(e,t),yr.cross(Ar).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return yr.subVectors(this.c,this.b),Ar.subVectors(this.a,this.b),.5*yr.cross(Ar).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,n){return Cr.getUV(e,this.a,this.b,this.c,t,i,r,n)}containsPoint(e){return Cr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,n=this.c;let a,s;Sr.subVectors(r,i),Tr.subVectors(n,i),Mr.subVectors(e,i);const o=Sr.dot(Mr),l=Tr.dot(Mr);if(o<=0&&l<=0)return t.copy(i);Rr.subVectors(e,r);const c=Sr.dot(Rr),u=Tr.dot(Rr);if(c>=0&&u<=c)return t.copy(r);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(i).addScaledVector(Sr,a);Pr.subVectors(e,n);const d=Sr.dot(Pr),f=Tr.dot(Pr);if(f>=0&&d<=f)return t.copy(n);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(Tr,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return xr.subVectors(n,r),s=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(xr,s);const g=1/(m+p+h);return a=p*g,s=h*g,t.copy(i).addScaledVector(Sr,a).addScaledVector(Tr,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let kr=0;class Or extends Rt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kr++}),this.uuid=Dt(),this.name="",this.type="Material",this.blending=f,this.side=c,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=M,this.blendDst=R,this.blendEquation=v,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=U,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=St,this.stencilZFail=St,this.stencilZPass=St,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const i in e){const r=e[i];delete r.metadata,t.push(r)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==f&&(i.blending=this.blending),this.side!==c&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=r(e.textures),n=r(e.images);t.length>0&&(i.textures=t),n.length>0&&(i.images=n)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let r=0;r!==e;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Dr extends Or{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=j,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Nr=new vi,Ir=new zt;class Lr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=Tt,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Ir.fromBufferAttribute(this,t),Ir.applyMatrix3(e),this.setXY(t,Ir.x,Ir.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Nr.fromBufferAttribute(this,t),Nr.applyMatrix3(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Nr.fromBufferAttribute(this,t),Nr.applyMatrix4(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Nr.fromBufferAttribute(this,t),Nr.applyNormalMatrix(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Nr.fromBufferAttribute(this,t),Nr.transformDirection(e),this.setXYZ(t,Nr.x,Nr.y,Nr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Gt(t,this.array)),t}setX(e,t){return this.normalized&&(t=Bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Gt(t,this.array)),t}setY(e,t){return this.normalized&&(t=Bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Gt(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Gt(t,this.array)),t}setW(e,t){return this.normalized&&(t=Bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array),r=Bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e*=this.itemSize,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array),r=Bt(r,this.array),n=Bt(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Tt&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ur extends Lr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Vr extends Lr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Fr extends Lr{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Gr=0;const Br=new Xi,jr=new _r,zr=new vi,Hr=new Ai,Wr=new Ai,$r=new vi;class Yr extends Rt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Gr++}),this.uuid=Dt(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($t(e)?Vr:Ur)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Ht).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Br.makeRotationFromQuaternion(e),this.applyMatrix4(Br),this}rotateX(e){return Br.makeRotationX(e),this.applyMatrix4(Br),this}rotateY(e){return Br.makeRotationY(e),this.applyMatrix4(Br),this}rotateZ(e){return Br.makeRotationZ(e),this.applyMatrix4(Br),this}translate(e,t,i){return Br.makeTranslation(e,t,i),this.applyMatrix4(Br),this}scale(e,t,i){return Br.makeScale(e,t,i),this.applyMatrix4(Br),this}lookAt(e){return jr.lookAt(e),jr.updateMatrix(),this.applyMatrix4(jr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zr).negate(),this.translate(zr.x,zr.y,zr.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Fr(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Ai);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new vi(-1/0,-1/0,-1/0),new vi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Hr.setFromBufferAttribute(i),this.morphTargetsRelative?($r.addVectors(this.boundingBox.min,Hr.min),this.boundingBox.expandByPoint($r),$r.addVectors(this.boundingBox.max,Hr.max),this.boundingBox.expandByPoint($r)):(this.boundingBox.expandByPoint(Hr.min),this.boundingBox.expandByPoint(Hr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Fi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new vi,1/0);if(e){const i=this.boundingSphere.center;if(Hr.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];Wr.setFromBufferAttribute(i),this.morphTargetsRelative?($r.addVectors(Hr.min,Wr.min),Hr.expandByPoint($r),$r.addVectors(Hr.max,Wr.max),Hr.expandByPoint($r)):(Hr.expandByPoint(Wr.min),Hr.expandByPoint(Wr.max))}Hr.getCenter(i);let r=0;for(let t=0,n=e.count;t<n;t++)$r.fromBufferAttribute(e,t),r=Math.max(r,i.distanceToSquared($r));if(t)for(let n=0,a=t.length;n<a;n++){const a=t[n],s=this.morphTargetsRelative;for(let t=0,n=a.count;t<n;t++)$r.fromBufferAttribute(a,t),s&&(zr.fromBufferAttribute(e,t),$r.add(zr)),r=Math.max(r,i.distanceToSquared($r))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,n=t.normal.array,a=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Lr(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new vi,c[e]=new vi;const u=new vi,h=new vi,d=new vi,f=new zt,p=new zt,m=new zt,g=new vi,b=new vi;function v(e,t,i){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*i),f.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*i),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const n=1/(p.x*m.y-m.x*p.y);isFinite(n)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(n),b.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(n),l[e].add(g),l[t].add(g),l[i].add(g),c[e].add(b),c[t].add(b),c[i].add(b))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,n=r+t.count;e<n;e+=3)v(i[e+0],i[e+1],i[e+2])}const y=new vi,A=new vi,E=new vi,w=new vi;function S(e){E.fromArray(n,3*e),w.copy(E);const t=l[e];y.copy(t),y.sub(E.multiplyScalar(E.dot(t))).normalize(),A.crossVectors(w,t);const i=A.dot(c[e])<0?-1:1;o[4*e]=y.x,o[4*e+1]=y.y,o[4*e+2]=y.z,o[4*e+3]=i}for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,n=r+t.count;e<n;e+=3)S(i[e+0]),S(i[e+1]),S(i[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Lr(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const r=new vi,n=new vi,a=new vi,s=new vi,o=new vi,l=new vi,c=new vi,u=new vi;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),n.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,n),u.subVectors(r,n),c.cross(u),s.fromBufferAttribute(i,d),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,p),s.add(c),o.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)r.fromBufferAttribute(t,e+0),n.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,n),u.subVectors(r,n),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)$r.fromBufferAttribute(e,t),$r.normalize(),e.setXYZ(t,$r.x,$r.y,$r.z)}toNonIndexed(){function e(e,t){const i=e.array,r=e.itemSize,n=e.normalized,a=new i.constructor(t.length*r);let s=0,o=0;for(let n=0,l=t.length;n<l;n++){s=e.isInterleavedBufferAttribute?t[n]*e.data.stride+e.offset:t[n]*r;for(let e=0;e<r;e++)a[o++]=i[s++]}return new Lr(a,r,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Yr,i=this.index.array,r=this.attributes;for(const n in r){const a=e(r[n],i);t.setAttribute(n,a)}const n=this.morphAttributes;for(const r in n){const a=[],s=n[r];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],i);a.push(r)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,i=a.length;e<i;e++){const i=a[e];t.addGroup(i.start,i.count,i.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const t in i){const r=i[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let n=!1;for(const t in this.morphAttributes){const i=this.morphAttributes[t],a=[];for(let t=0,r=i.length;t<r;t++){const r=i[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,n=!0)}n&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const e in r){const i=r[e];this.setAttribute(e,i.clone(t))}const n=e.morphAttributes;for(const e in n){const i=[],r=n[e];for(let e=0,n=r.length;e<n;e++)i.push(r[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Xr=new Xi,qr=new Yi,Zr=new Fi,Jr=new vi,Kr=new vi,Qr=new vi,en=new vi,tn=new vi,rn=new zt,nn=new zt,an=new zt,sn=new vi,on=new vi;class ln extends _r{constructor(e=new Yr,t=new Dr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,n=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(n&&s){tn.set(0,0,0);for(let i=0,r=n.length;i<r;i++){const r=s[i],o=n[i];0!==r&&(en.fromBufferAttribute(o,e),a?tn.addScaledVector(en,r):tn.addScaledVector(en.sub(t),r))}t.add(tn)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0===r)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),Zr.copy(i.boundingSphere),Zr.applyMatrix4(n),!1===e.ray.intersectsSphere(Zr))return;if(Xr.copy(n).invert(),qr.copy(e.ray).applyMatrix4(Xr),null!==i.boundingBox&&!1===qr.intersectsBox(i.boundingBox))return;let a;const s=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv2,u=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(r))for(let i=0,n=u.length;i<n;i++){const n=u[i],o=r[n.materialIndex];for(let i=Math.max(n.start,h.start),r=Math.min(s.count,Math.min(n.start+n.count,h.start+h.count));i<r;i+=3){const r=s.getX(i),u=s.getX(i+1),h=s.getX(i+2);a=cn(this,o,e,qr,l,c,r,u,h),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=n.materialIndex,t.push(a))}}else for(let i=Math.max(0,h.start),n=Math.min(s.count,h.start+h.count);i<n;i+=3){const n=s.getX(i),o=s.getX(i+1),u=s.getX(i+2);a=cn(this,r,e,qr,l,c,n,o,u),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}else if(void 0!==o)if(Array.isArray(r))for(let i=0,n=u.length;i<n;i++){const n=u[i],s=r[n.materialIndex];for(let i=Math.max(n.start,h.start),r=Math.min(o.count,Math.min(n.start+n.count,h.start+h.count));i<r;i+=3)a=cn(this,s,e,qr,l,c,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=n.materialIndex,t.push(a))}else for(let i=Math.max(0,h.start),n=Math.min(o.count,h.start+h.count);i<n;i+=3)a=cn(this,r,e,qr,l,c,i,i+1,i+2),a&&(a.faceIndex=Math.floor(i/3),t.push(a))}}function cn(e,t,i,r,n,a,s,o,l){e.getVertexPosition(s,Jr),e.getVertexPosition(o,Kr),e.getVertexPosition(l,Qr);const h=function(e,t,i,r,n,a,s,o){let l;if(l=t.side===u?r.intersectTriangle(s,a,n,!0,o):r.intersectTriangle(n,a,s,t.side===c,o),null===l)return null;on.copy(o),on.applyMatrix4(e.matrixWorld);const h=i.ray.origin.distanceTo(on);return h<i.near||h>i.far?null:{distance:h,point:on.clone(),object:e}}(e,t,i,r,Jr,Kr,Qr,sn);if(h){n&&(rn.fromBufferAttribute(n,s),nn.fromBufferAttribute(n,o),an.fromBufferAttribute(n,l),h.uv=Cr.getUV(sn,Jr,Kr,Qr,rn,nn,an,new zt)),a&&(rn.fromBufferAttribute(a,s),nn.fromBufferAttribute(a,o),an.fromBufferAttribute(a,l),h.uv2=Cr.getUV(sn,Jr,Kr,Qr,rn,nn,an,new zt));const e={a:s,b:o,c:l,normal:new vi,materialIndex:0};Cr.getNormal(Jr,Kr,Qr,e.normal),h.face=e}return h}class un extends Yr{constructor(e=1,t=1,i=1,r=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};const s=this;r=Math.floor(r),n=Math.floor(n),a=Math.floor(a);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,i,r,n,a,f,p,m,g,b){const v=a/m,_=f/g,y=a/2,A=f/2,E=p/2,w=m+1,S=g+1;let T=0,x=0;const M=new vi;for(let a=0;a<S;a++){const s=a*_-A;for(let o=0;o<w;o++){const h=o*v-y;M[e]=h*r,M[t]=s*n,M[i]=E,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[i]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(o/m),u.push(1-a/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const i=h+t+w*e,r=h+t+w*(e+1),n=h+(t+1)+w*(e+1),a=h+(t+1)+w*e;o.push(i,r,a),o.push(r,n,a),x+=6}s.addGroup(d,x,b),d+=x,h+=T}f("z","y","x",-1,-1,i,t,e,a,n,0),f("z","y","x",1,-1,i,t,-e,a,n,1),f("x","z","y",1,1,e,i,t,r,a,2),f("x","z","y",1,-1,e,i,-t,r,a,3),f("x","y","z",1,-1,e,t,i,r,n,4),f("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(o),this.setAttribute("position",new Fr(l,3)),this.setAttribute("normal",new Fr(c,3)),this.setAttribute("uv",new Fr(u,2))}static fromJSON(e){return new un(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hn(e){const t={};for(const i in e){t[i]={};for(const r in e[i]){const n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function dn(e){const t={};for(let i=0;i<e.length;i++){const r=hn(e[i]);for(const e in r)t[e]=r[e]}return t}function fn(e){return null===e.getRenderTarget()&&e.outputEncoding===vt?Et:wt}const pn={clone:hn,merge:dn};class mn extends Or{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hn(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gn extends _r{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xi,this.projectionMatrix=new Xi,this.projectionMatrixInverse=new Xi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class bn extends gn{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ot*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*kt*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ot*Math.atan(Math.tan(.5*kt*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,n,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*kt*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;n+=a.offsetX*r/e,t-=a.offsetY*i/s,r*=a.width/e,i*=a.height/s}const s=this.filmOffset;0!==s&&(n+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vn=-90;class _n extends _r{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new bn(vn,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const n=new bn(vn,1,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);const a=new bn(vn,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const s=new bn(vn,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const o=new bn(vn,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new bn(vn,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[r,n,a,s,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=W,e.xr.enabled=!1;const d=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,n),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=d,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,i.texture.needsPMREMUpdate=!0}}class yn extends di{constructor(e,t,i,r,n,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:K,i,r,n,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class An extends pi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new yn(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ce}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new un(5,5,5),s=new mn({name:"CubemapFromEquirect",uniforms:hn(i),vertexShader:r,fragmentShader:n,side:u,blending:d});s.uniforms.tEquirect.value=t;const o=new ln(a,s),l=t.minFilter;return t.minFilter===he&&(t.minFilter=ce),new _n(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const n=e.getRenderTarget();for(let n=0;n<6;n++)e.setRenderTarget(this,n),e.clear(t,i,r);e.setRenderTarget(n)}}const En=new vi,wn=new vi,Sn=new Ht;class Tn{constructor(e=new vi(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=En.subVectors(i,t).cross(wn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(En),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:t.copy(i).multiplyScalar(n).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Sn.getNormalMatrix(e),r=this.coplanarPoint(En).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const xn=new Fi,Mn=new vi;class Rn{constructor(e=new Tn,t=new Tn,i=new Tn,r=new Tn,n=new Tn,a=new Tn){this.planes=[e,t,i,r,n,a]}set(e,t,i,r,n,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(r),s[4].copy(n),s[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],u=i[7],h=i[8],d=i[9],f=i[10],p=i[11],m=i[12],g=i[13],b=i[14],v=i[15];return t[0].setComponents(s-r,u-o,p-h,v-m).normalize(),t[1].setComponents(s+r,u+o,p+h,v+m).normalize(),t[2].setComponents(s+n,u+l,p+d,v+g).normalize(),t[3].setComponents(s-n,u-l,p-d,v-g).normalize(),t[4].setComponents(s-a,u-c,p-f,v-b).normalize(),t[5].setComponents(s+a,u+c,p+f,v+b).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),xn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(xn)}intersectsSprite(e){return xn.center.set(0,0,0),xn.radius=.7071067811865476,xn.applyMatrix4(e.matrixWorld),this.intersectsSphere(xn)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Mn.x=r.normal.x>0?e.max.x:e.min.x,Mn.y=r.normal.y>0?e.max.y:e.min.y,Mn.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Pn(){let e=null,t=!1,i=null,r=null;function n(t,a){i(t,a),r=e.requestAnimationFrame(n)}return{start:function(){!0!==t&&null!==i&&(r=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function Cn(e,t){const i=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=r.get(t);i&&(e.deleteBuffer(i.buffer),r.delete(t))},update:function(t,n){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const n=t.array,a=t.usage,s=e.createBuffer();let o;if(e.bindBuffer(r,s),e.bufferData(r,n,a),t.onUploadCallback(),n instanceof Float32Array)o=e.FLOAT;else if(n instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(n instanceof Int16Array)o=e.SHORT;else if(n instanceof Uint32Array)o=e.UNSIGNED_INT;else if(n instanceof Int32Array)o=e.INT;else if(n instanceof Int8Array)o=e.BYTE;else if(n instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(n instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,n)):a.version<t.version&&(function(t,r,n){const a=r.array,s=r.updateRange;e.bindBuffer(n,t),-1===s.count?e.bufferSubData(n,0,a):(i?e.bufferSubData(n,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(n,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(a.buffer,t,n),a.version=t.version)}}}class kn extends Yr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const n=e/2,a=t/2,s=Math.floor(i),o=Math.floor(r),l=s+1,c=o+1,u=e/s,h=t/o,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-a;for(let i=0;i<l;i++){const r=i*u-n;f.push(r,-t,0),p.push(0,0,1),m.push(i/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const i=t+l*e,r=t+l*(e+1),n=t+1+l*(e+1),a=t+1+l*e;d.push(i,r,a),d.push(r,n,a)}this.setIndex(d),this.setAttribute("position",new Fr(f,3)),this.setAttribute("normal",new Fr(p,3)),this.setAttribute("uv",new Fr(m,2))}static fromJSON(e){return new kn(e.width,e.height,e.widthSegments,e.heightSegments)}}const On={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Dn={common:{diffuse:{value:new si(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ht},uv2Transform:{value:new Ht},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ht}},sprite:{diffuse:{value:new si(16777215)},opacity:{value:1},center:{value:new zt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ht}}},Nn={basic:{uniforms:dn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:dn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,Dn.lights,{emissive:{value:new si(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:dn([Dn.common,Dn.specularmap,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,Dn.lights,{emissive:{value:new si(0)},specular:{value:new si(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:dn([Dn.common,Dn.envmap,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.roughnessmap,Dn.metalnessmap,Dn.fog,Dn.lights,{emissive:{value:new si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:dn([Dn.common,Dn.aomap,Dn.lightmap,Dn.emissivemap,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.gradientmap,Dn.fog,Dn.lights,{emissive:{value:new si(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:dn([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,Dn.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:dn([Dn.points,Dn.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:dn([Dn.common,Dn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:dn([Dn.common,Dn.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:dn([Dn.common,Dn.bumpmap,Dn.normalmap,Dn.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:dn([Dn.sprite,Dn.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new Ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distanceRGBA:{uniforms:dn([Dn.common,Dn.displacementmap,{referencePosition:{value:new vi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distanceRGBA_vert,fragmentShader:On.distanceRGBA_frag},shadow:{uniforms:dn([Dn.lights,Dn.fog,{color:{value:new si(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Nn.physical={uniforms:dn([Nn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new zt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new si(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new zt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new si(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new si(1,1,1)},specularColorMap:{value:null}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const In={r:0,b:0,g:0};function Ln(e,t,i,r,n,a,s){const o=new si(0);let l,h,d=!0===a?0:1,f=null,p=0,m=null;function g(t,i){t.getRGB(In,fn(e)),r.buffers.color.setClear(In.r,In.g,In.b,i,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),d=t,g(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,g(o,d)},render:function(r,a){let s=!1,b=!0===a.isScene?a.background:null;b&&b.isTexture&&(b=(a.backgroundBlurriness>0?i:t).get(b));const v=e.xr,_=v.getSession&&v.getSession();_&&"additive"===_.environmentBlendMode&&(b=null),null===b?g(o,d):b&&b.isColor&&(g(b,1),s=!0),(e.autoClear||s)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===ie)?(void 0===h&&(h=new ln(new un(1,1,1),new mn({name:"BackgroundCubeMaterial",uniforms:hn(Nn.backgroundCube.uniforms),vertexShader:Nn.backgroundCube.vertexShader,fragmentShader:Nn.backgroundCube.fragmentShader,side:u,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=a.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,h.material.toneMapped=b.encoding!==vt,f===b&&p===b.version&&m===e.toneMapping||(h.material.needsUpdate=!0,f=b,p=b.version,m=e.toneMapping),h.layers.enableAll(),r.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(void 0===l&&(l=new ln(new kn(2,2),new mn({name:"BackgroundMaterial",uniforms:hn(Nn.background.uniforms),vertexShader:Nn.background.vertexShader,fragmentShader:Nn.background.fragmentShader,side:c,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(l)),l.material.uniforms.t2D.value=b,l.material.uniforms.backgroundIntensity.value=a.backgroundIntensity,l.material.toneMapped=b.encoding!==vt,!0===b.matrixAutoUpdate&&b.updateMatrix(),l.material.uniforms.uvTransform.value.copy(b.matrix),f===b&&p===b.version&&m===e.toneMapping||(l.material.needsUpdate=!0,f=b,p=b.version,m=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function Un(e,t,i,r){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=f(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){const t=[],i=[],r=[];for(let e=0;e<n;e++)t[e]=0,i[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function m(e){g(e,0)}function g(i,n){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;a[i]=1,0===s[i]&&(e.enableVertexAttribArray(i),s[i]=1),o[i]!==n&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,n),o[i]=n)}function b(){const t=c.newAttributes,i=c.enabledAttributes;for(let r=0,n=i.length;r<n;r++)i[r]!==t[r]&&(e.disableVertexAttribArray(r),i[r]=0)}function v(t,i,n,a,s,o){!0!==r.isWebGL2||n!==e.INT&&n!==e.UNSIGNED_INT?e.vertexAttribPointer(t,i,n,a,s,o):e.vertexAttribIPointer(t,i,n,s,o)}function _(){y(),u=!0,c!==l&&(c=l,h(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(n,l,d,_,y){let A=!1;if(s){const t=function(t,i,n){const s=!0===n.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let u=c[s];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u),u}(_,d,l);c!==t&&(c=t,h(c.object)),A=function(e,t,i,r){const n=c.attributes,a=t.attributes;let s=0;const o=i.getAttributes();for(const t in o)if(o[t].location>=0){const i=n[t];let r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===i)return!0;if(i.attribute!==r)return!0;if(r&&i.data!==r.data)return!0;s++}return c.attributesNum!==s||c.index!==r}(n,_,d,y),A&&function(e,t,i,r){const n={},a=t.attributes;let s=0;const o=i.getAttributes();for(const t in o)if(o[t].location>=0){let i=a[t];void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor));const r={};r.attribute=i,i&&i.data&&(r.data=i.data),n[t]=r,s++}c.attributes=n,c.attributesNum=s,c.index=r}(n,_,d,y)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===d.id&&c.wireframe===e||(c.geometry=_.id,c.program=d.id,c.wireframe=e,A=!0)}null!==y&&i.update(y,e.ELEMENT_ARRAY_BUFFER),(A||u)&&(u=!1,function(n,a,s,o){if(!1===r.isWebGL2&&(n.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&n.instanceMatrix&&(a=n.instanceMatrix),"instanceColor"===t&&n.instanceColor&&(a=n.instanceColor)),void 0!==a){const t=a.normalized,s=a.itemSize,l=i.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,l=i.stride,d=a.offset;if(i.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,s/r.locationSize,u,t,l*h,(d+s/r.locationSize*e)*h)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,a.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)v(r.location+e,s/r.locationSize,u,t,s*h,s/r.locationSize*e*h)}}else if(void 0!==u){const i=u[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(r.location,i);break;case 3:e.vertexAttrib3fv(r.location,i);break;case 4:e.vertexAttrib4fv(r.location,i);break;default:e.vertexAttrib1fv(r.location,i)}}}}b()}(n,l,d,_),null!==y&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.get(y).buffer))},reset:_,resetDefaultState:y,dispose:function(){_();for(const e in o){const t=o[e];for(const e in t){const i=t[e];for(const e in i)d(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const i=t[e];for(const e in i)d(i[e].object),delete i[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const i=o[t];if(void 0===i[e.id])continue;const r=i[e.id];for(const e in r)d(r[e].object),delete r[e];delete i[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:b}}function Vn(e,t,i,r){const n=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),i.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(n)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,s,o),i.update(s,a,o)}}function Fn(e,t,i){let r;function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let s=void 0!==i.precision?i.precision:"highp";const o=n(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),b=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,_=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:n,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:b,vertexTextures:v,floatFragmentTextures:_,floatVertexTextures:v&&_,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function Gn(e){const t=this;let i=null,r=0,n=!1,a=!1;const s=new Tn,o=new Ht,l={value:null,needsUpdate:!1};function c(e,i,r,n){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==n||null===c){const t=r+4*a,n=i.matrixWorldInverse;o.getNormalMatrix(n),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,i=r;t!==a;++t,i+=4)s.copy(e[t]).applyMatrix4(n,o),s.normal.toArray(c,i),c[i+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==r||n;return n=t,r=e.length,i},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(s,o,u){const h=s.clippingPlanes,d=s.clipIntersection,f=s.clipShadows,p=e.get(s);if(!n||null===h||0===h.length||a&&!f)a?c(null):(l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=a?0:r,t=4*e;let n=p.clippingState||null;l.value=n,n=c(h,o,t,u);for(let e=0;e!==t;++e)n[e]=i[e];p.clippingState=n,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Bn(e){let t=new WeakMap;function i(e,t){return t===ee?e.mapping=K:t===te&&(e.mapping=Q),e}function r(e){const i=e.target;i.removeEventListener("dispose",r);const n=t.get(i);void 0!==n&&(t.delete(i),n.dispose())}return{get:function(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){const a=n.mapping;if(a===ee||a===te){if(t.has(n))return i(t.get(n).texture,n.mapping);{const a=n.image;if(a&&a.height>0){const s=new An(a.height/2);return s.fromEquirectangularTexture(e,n),t.set(n,s),n.addEventListener("dispose",r),i(s.texture,n.mapping)}return null}}}return n},dispose:function(){t=new WeakMap}}}class jn extends gn{constructor(e=-1,t=1,i=1,r=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let n=i-e,a=i+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=e*this.view.offsetX,a=n+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const zn=[.125,.215,.35,.446,.526,.582],Hn=new jn,Wn=new si;let $n=null;const Yn=(1+Math.sqrt(5))/2,Xn=1/Yn,qn=[new vi(1,1,1),new vi(-1,1,1),new vi(1,1,-1),new vi(-1,1,-1),new vi(0,Yn,Xn),new vi(0,Yn,-Xn),new vi(Xn,0,Yn),new vi(-Xn,0,Yn),new vi(Yn,Xn,0),new vi(-Yn,Xn,0)];class Zn{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){$n=this._renderer.getRenderTarget(),this._setSize(256);const n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,r,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ea(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Qn(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget($n),e.scissorTest=!1,Kn(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===K||e.mapping===Q?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),$n=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ce,minFilter:ce,generateMipmaps:!1,type:_e,format:Se,encoding:bt,depthBuffer:!1},r=Jn(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Jn(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],r=[];let n=e;const a=e-4+1+zn.length;for(let s=0;s<a;s++){const a=Math.pow(2,n);i.push(a);let o=1/a;s>e-4?o=zn[s-e+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,b=new Float32Array(p*f*d),v=new Float32Array(m*f*d),_=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,i=e>2?0:-1,r=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];b.set(r,p*f*e),v.set(h,m*f*e);const n=[e,e,e,e,e,e];_.set(n,g*f*e)}const y=new Yr;y.setAttribute("position",new Lr(b,p)),y.setAttribute("uv",new Lr(v,m)),y.setAttribute("faceIndex",new Lr(_,g)),t.push(y),n>4&&n--}return{lodPlanes:t,sizeLods:i,sigmas:r}}(r)),this._blurMaterial=function(e,t,i){const r=new Float32Array(20),n=new vi(0,1,0);return new mn({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:d,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new ln(this._lodPlanes[0],e);this._renderer.compile(t,Hn)}_sceneToCubeUV(e,t,i,r){const n=new bn(90,1,t,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Wn),o.toneMapping=W,o.autoClear=!1;const h=new Dr({name:"PMREM.Background",side:u,depthWrite:!1,depthTest:!1}),d=new ln(new un,h);let f=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,f=!0):(h.color.copy(Wn),f=!0);for(let t=0;t<6;t++){const i=t%3;0===i?(n.up.set(0,a[t],0),n.lookAt(s[t],0,0)):1===i?(n.up.set(0,0,a[t]),n.lookAt(0,s[t],0)):(n.up.set(0,a[t],0),n.lookAt(0,0,s[t]));const l=this._cubeSize;Kn(r,i*l,t>2?l:0,l,l),o.setRenderTarget(r),f&&o.render(d,n),o.render(e,n)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===K||e.mapping===Q;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ea()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Qn());const n=r?this._cubemapMaterial:this._equirectMaterial,a=new ln(this._lodPlanes[0],n);n.uniforms.envMap.value=e;const s=this._cubeSize;Kn(t,0,0,3*s,2*s),i.setRenderTarget(t),i.render(a,Hn)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const i=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=qn[(t-1)%qn.length];this._blur(e,t-1,t,i,r)}t.autoClear=i}_blur(e,t,i,r,n){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",n),this._halfBlur(a,e,i,i,r,"longitudinal",n)}_halfBlur(e,t,i,r,n,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new ln(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[i]-1,d=isFinite(n)?Math.PI/(2*h):2*Math.PI/39,f=n/d,p=isFinite(n)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,i=Math.exp(-t*t/2);m.push(i),0===e?g+=i:e<p&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:b}=this;u.dTheta.value=d,u.mipInt.value=b-i;const v=this._sizeLods[r];Kn(t,3*v*(r>b-4?r-b+4:0),4*(this._cubeSize-v),3*v,2*v),o.setRenderTarget(t),o.render(c,Hn)}}function Jn(e,t,i){const r=new pi(e,t,i);return r.texture.mapping=ie,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Kn(e,t,i,r,n){e.viewport.set(t,i,r,n),e.scissor.set(t,i,r,n)}function Qn(){return new mn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:d,depthTest:!1,depthWrite:!1})}function ea(){return new mn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:d,depthTest:!1,depthWrite:!1})}function ta(e){let t=new WeakMap,i=null;function r(e){const i=e.target;i.removeEventListener("dispose",r);const n=t.get(i);void 0!==n&&(t.delete(i),n.dispose())}return{get:function(n){if(n&&n.isTexture){const a=n.mapping,s=a===ee||a===te,o=a===K||a===Q;if(s||o){if(n.isRenderTargetTexture&&!0===n.needsPMREMUpdate){n.needsPMREMUpdate=!1;let r=t.get(n);return null===i&&(i=new Zn(e)),r=s?i.fromEquirectangular(n,r):i.fromCubemap(n,r),t.set(n,r),r.texture}if(t.has(n))return t.get(n).texture;{const a=n.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;for(let i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(a)){null===i&&(i=new Zn(e));const a=s?i.fromEquirectangular(n):i.fromCubemap(n);return t.set(n,a),n.addEventListener("dispose",r),a.texture}return null}}}return n},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function ia(e){const t={};function i(i){if(void 0!==t[i])return t[i];let r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return t[i]=r,r}return{has:function(e){return null!==i(e)},init:function(e){e.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(e){const t=i(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function ra(e,t,i,r){const n={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete n[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){const i=[],r=e.index,n=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],n=e[t+1],a=e[t+2];i.push(r,n,n,a,a,r)}}else{const e=n.array;s=n.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,n=t+2;i.push(e,r,r,n,n,e)}}const o=new($t(i)?Vr:Ur)(i,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===n[t.id]||(t.addEventListener("dispose",s),n[t.id]=!0,i.memory.geometries++),t},update:function(i){const r=i.attributes;for(const i in r)t.update(r[i],e.ARRAY_BUFFER);const n=i.morphAttributes;for(const i in n){const r=n[i];for(let i=0,n=r.length;i<n;i++)t.update(r[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return a.get(e)}}}function na(e,t,i,r){const n=r.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,s,t*o),i.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(n)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,s,r*o,c),i.update(l,a,c)}}function aa(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,r,n){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=n*(i/3);break;case e.LINES:t.lines+=n*(i/2);break;case e.LINE_STRIP:t.lines+=n*(i-1);break;case e.LINE_LOOP:t.lines+=n*i;break;case e.POINTS:t.points+=n*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function sa(e,t){return e[0]-t[0]}function oa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function la(e,t,i){const r={},n=new Float32Array(8),a=new WeakMap,s=new fi,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==f?f.length:0;let m=a.get(c);if(void 0===m||m.count!==p){void 0!==m&&m.texture.dispose();const v=void 0!==c.morphAttributes.position,_=void 0!==c.morphAttributes.normal,y=void 0!==c.morphAttributes.color,A=c.morphAttributes.position||[],E=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===_&&(S=2),!0===y&&(S=3);let T=c.attributes.position.count*S,x=1;T>t.maxTextureSize&&(x=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);const M=new Float32Array(T*x*4*p),R=new mi(M,T,x,p);R.type=ve,R.needsUpdate=!0;const P=4*S;for(let k=0;k<p;k++){const O=A[k],D=E[k],N=w[k],I=T*x*4*k;for(let L=0;L<O.count;L++){const U=L*P;!0===v&&(s.fromBufferAttribute(O,L),M[I+U+0]=s.x,M[I+U+1]=s.y,M[I+U+2]=s.z,M[I+U+3]=0),!0===_&&(s.fromBufferAttribute(D,L),M[I+U+4]=s.x,M[I+U+5]=s.y,M[I+U+6]=s.z,M[I+U+7]=0),!0===y&&(s.fromBufferAttribute(N,L),M[I+U+8]=s.x,M[I+U+9]=s.y,M[I+U+10]=s.z,M[I+U+11]=4===N.itemSize?s.w:1)}}function C(){R.dispose(),a.delete(c),c.removeEventListener("dispose",C)}m={count:p,texture:R,size:new zt(T,x)},a.set(c,m),c.addEventListener("dispose",C)}let g=0;for(let V=0;V<d.length;V++)g+=d[V];const b=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,i),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const F=void 0===d?0:d.length;let G=r[c.id];if(void 0===G||G.length!==F){G=[];for(let W=0;W<F;W++)G[W]=[W,0];r[c.id]=G}for(let $=0;$<F;$++){const Y=G[$];Y[0]=$,Y[1]=d[$]}G.sort(oa);for(let X=0;X<8;X++)X<F&&G[X][1]?(o[X][0]=G[X][0],o[X][1]=G[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(sa);const B=c.morphAttributes.position,j=c.morphAttributes.normal;let z=0;for(let q=0;q<8;q++){const Z=o[q],J=Z[0],K=Z[1];J!==Number.MAX_SAFE_INTEGER&&K?(B&&c.getAttribute("morphTarget"+q)!==B[J]&&c.setAttribute("morphTarget"+q,B[J]),j&&c.getAttribute("morphNormal"+q)!==j[J]&&c.setAttribute("morphNormal"+q,j[J]),n[q]=K,z+=K):(B&&!0===c.hasAttribute("morphTarget"+q)&&c.deleteAttribute("morphTarget"+q),j&&!0===c.hasAttribute("morphNormal"+q)&&c.deleteAttribute("morphNormal"+q),n[q]=0)}const H=c.morphTargetsRelative?1:1-z;h.getUniforms().setValue(e,"morphTargetBaseInfluence",H),h.getUniforms().setValue(e,"morphTargetInfluences",n)}}}}function ca(e,t,i,r){let n=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(s){const o=r.render.frame,l=s.geometry,c=t.get(s,l);return n.get(c)!==o&&(t.update(c),n.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&i.update(s.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){n=new WeakMap}}}const ua=new di,ha=new mi,da=new gi,fa=new yn,pa=[],ma=[],ga=new Float32Array(16),ba=new Float32Array(9),va=new Float32Array(4);function _a(e,t,i){const r=e[0];if(r<=0||r>0)return e;const n=t*i;let a=pa[n];if(void 0===a&&(a=new Float32Array(n),pa[n]=a),0!==t){r.toArray(a,0);for(let r=1,n=0;r!==t;++r)n+=i,e[r].toArray(a,n)}return a}function ya(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Aa(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function Ea(e,t){let i=ma[t];void 0===i&&(i=new Int32Array(t),ma[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function wa(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Sa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ya(i,t))return;e.uniform2fv(this.addr,t),Aa(i,t)}}function Ta(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(ya(i,t))return;e.uniform3fv(this.addr,t),Aa(i,t)}}function xa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ya(i,t))return;e.uniform4fv(this.addr,t),Aa(i,t)}}function Ma(e,t){const i=this.cache,r=t.elements;if(void 0===r){if(ya(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Aa(i,t)}else{if(ya(i,r))return;va.set(r),e.uniformMatrix2fv(this.addr,!1,va),Aa(i,r)}}function Ra(e,t){const i=this.cache,r=t.elements;if(void 0===r){if(ya(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Aa(i,t)}else{if(ya(i,r))return;ba.set(r),e.uniformMatrix3fv(this.addr,!1,ba),Aa(i,r)}}function Pa(e,t){const i=this.cache,r=t.elements;if(void 0===r){if(ya(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Aa(i,t)}else{if(ya(i,r))return;ga.set(r),e.uniformMatrix4fv(this.addr,!1,ga),Aa(i,r)}}function Ca(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function ka(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ya(i,t))return;e.uniform2iv(this.addr,t),Aa(i,t)}}function Oa(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ya(i,t))return;e.uniform3iv(this.addr,t),Aa(i,t)}}function Da(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ya(i,t))return;e.uniform4iv(this.addr,t),Aa(i,t)}}function Na(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Ia(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(ya(i,t))return;e.uniform2uiv(this.addr,t),Aa(i,t)}}function La(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(ya(i,t))return;e.uniform3uiv(this.addr,t),Aa(i,t)}}function Ua(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(ya(i,t))return;e.uniform4uiv(this.addr,t),Aa(i,t)}}function Va(e,t,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||ua,n)}function Fa(e,t,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||da,n)}function Ga(e,t,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||fa,n)}function Ba(e,t,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||ha,n)}function ja(e,t){e.uniform1fv(this.addr,t)}function za(e,t){const i=_a(t,this.size,2);e.uniform2fv(this.addr,i)}function Ha(e,t){const i=_a(t,this.size,3);e.uniform3fv(this.addr,i)}function Wa(e,t){const i=_a(t,this.size,4);e.uniform4fv(this.addr,i)}function $a(e,t){const i=_a(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function Ya(e,t){const i=_a(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function Xa(e,t){const i=_a(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function qa(e,t){e.uniform1iv(this.addr,t)}function Za(e,t){e.uniform2iv(this.addr,t)}function Ja(e,t){e.uniform3iv(this.addr,t)}function Ka(e,t){e.uniform4iv(this.addr,t)}function Qa(e,t){e.uniform1uiv(this.addr,t)}function es(e,t){e.uniform2uiv(this.addr,t)}function ts(e,t){e.uniform3uiv(this.addr,t)}function is(e,t){e.uniform4uiv(this.addr,t)}function rs(e,t,i){const r=this.cache,n=t.length,a=Ea(i,n);ya(r,a)||(e.uniform1iv(this.addr,a),Aa(r,a));for(let e=0;e!==n;++e)i.setTexture2D(t[e]||ua,a[e])}function ns(e,t,i){const r=this.cache,n=t.length,a=Ea(i,n);ya(r,a)||(e.uniform1iv(this.addr,a),Aa(r,a));for(let e=0;e!==n;++e)i.setTexture3D(t[e]||da,a[e])}function as(e,t,i){const r=this.cache,n=t.length,a=Ea(i,n);ya(r,a)||(e.uniform1iv(this.addr,a),Aa(r,a));for(let e=0;e!==n;++e)i.setTextureCube(t[e]||fa,a[e])}function ss(e,t,i){const r=this.cache,n=t.length,a=Ea(i,n);ya(r,a)||(e.uniform1iv(this.addr,a),Aa(r,a));for(let e=0;e!==n;++e)i.setTexture2DArray(t[e]||ha,a[e])}class os{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return wa;case 35664:return Sa;case 35665:return Ta;case 35666:return xa;case 35674:return Ma;case 35675:return Ra;case 35676:return Pa;case 5124:case 35670:return Ca;case 35667:case 35671:return ka;case 35668:case 35672:return Oa;case 35669:case 35673:return Da;case 5125:return Na;case 36294:return Ia;case 36295:return La;case 36296:return Ua;case 35678:case 36198:case 36298:case 36306:case 35682:return Va;case 35679:case 36299:case 36307:return Fa;case 35680:case 36300:case 36308:case 36293:return Ga;case 36289:case 36303:case 36311:case 36292:return Ba}}(t.type)}}class ls{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ja;case 35664:return za;case 35665:return Ha;case 35666:return Wa;case 35674:return $a;case 35675:return Ya;case 35676:return Xa;case 5124:case 35670:return qa;case 35667:case 35671:return Za;case 35668:case 35672:return Ja;case 35669:case 35673:return Ka;case 5125:return Qa;case 36294:return es;case 36295:return ts;case 36296:return is;case 35678:case 36198:case 36298:case 36306:case 35682:return rs;case 35679:case 36299:case 36307:return ns;case 35680:case 36300:case 36308:case 36293:return as;case 36289:case 36303:case 36311:case 36292:return ss}}(t.type)}}class cs{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let n=0,a=r.length;n!==a;++n){const a=r[n];a.setValue(e,t[a.id],i)}}}const us=/(\w+)(\])?(\[|\.)?/g;function hs(e,t){e.seq.push(t),e.map[t.id]=t}function ds(e,t,i){const r=e.name,n=r.length;for(us.lastIndex=0;;){const a=us.exec(r),s=us.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===n){hs(i,void 0===c?new os(o,e,t):new ls(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new cs(o),hs(i,e)),i=e}}}class fs{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const i=e.getActiveUniform(t,r);ds(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,r){const n=this.map[t];void 0!==n&&n.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let n=0,a=t.length;n!==a;++n){const a=t[n],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,n=e.length;r!==n;++r){const n=e[r];n.id in t&&i.push(n)}return i}}function ps(e,t,i){const r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}let ms=0;function gs(e,t,i){const r=e.getShaderParameter(t,e.COMPILE_STATUS),n=e.getShaderInfoLog(t).trim();if(r&&""===n)return"";const a=/ERROR: 0:(\d+)/.exec(n);if(a){const r=parseInt(a[1]);return i.toUpperCase()+"\n\n"+n+"\n\n"+function(e,t){const i=e.split("\n"),r=[],n=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let e=n;e<a;e++){const n=e+1;r.push(`${n===t?">":" "} ${n}: ${i[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return n}function bs(e,t){const i=function(e){switch(e){case bt:return["Linear","( value )"];case vt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function vs(e,t){let i;switch(t){case $:i="Linear";break;case Y:i="Reinhard";break;case X:i="OptimizedCineon";break;case q:i="ACESFilmic";break;case Z:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function _s(e){return""!==e}function ys(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function As(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Es=/^[ \t]*#include +<([\w\d./]+)>/gm;function ws(e){return e.replace(Es,Ss)}function Ss(e,t){const i=On[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return ws(i)}const Ts=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xs(e){return e.replace(Ts,Ms)}function Ms(e,t,i,r){let n="";for(let e=parseInt(t);e<parseInt(i);e++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function Rs(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ps(e,t,i,r){const n=e.getContext(),a=i.defines;let c=i.vertexShader,u=i.fragmentShader;const h=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===s?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===o?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===l&&(t="SHADOWMAP_TYPE_VSM"),t}(i),d=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case K:case Q:t="ENVMAP_TYPE_CUBE";break;case ie:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),f=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===Q&&(t="ENVMAP_MODE_REFRACTION"),t}(i),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case j:t="ENVMAP_BLENDING_MULTIPLY";break;case z:t="ENVMAP_BLENDING_MIX";break;case H:t="ENVMAP_BLENDING_ADD"}return t}(i),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:r,maxMip:i}}(i),g=i.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_s).join("\n")}(i),b=function(e){const t=[];for(const i in e){const r=e[i];!1!==r&&t.push("#define "+i+" "+r)}return t.join("\n")}(a),v=n.createProgram();let _,y,A=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(_=[b].filter(_s).join("\n"),_.length>0&&(_+="\n"),y=[g,b].filter(_s).join("\n"),y.length>0&&(y+="\n")):(_=[Rs(i),"#define SHADER_NAME "+i.shaderName,b,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_s).join("\n"),y=[g,Rs(i),"#define SHADER_NAME "+i.shaderName,b,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",i.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==W?"#define TONE_MAPPING":"",i.toneMapping!==W?On.tonemapping_pars_fragment:"",i.toneMapping!==W?vs("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",On.encodings_pars_fragment,bs("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(_s).join("\n")),c=ws(c),c=ys(c,i),c=As(c,i),u=ws(u),u=ys(u,i),u=As(u,i),c=xs(c),u=xs(u),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(A="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,y=["#define varying in",i.glslVersion===xt?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===xt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const E=A+_+c,w=A+y+u,S=ps(n,n.VERTEX_SHADER,E),T=ps(n,n.FRAGMENT_SHADER,w);if(n.attachShader(v,S),n.attachShader(v,T),void 0!==i.index0AttributeName?n.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),e.debug.checkShaderErrors){const e=n.getProgramInfoLog(v).trim(),t=n.getShaderInfoLog(S).trim(),i=n.getShaderInfoLog(T).trim();let r=!0,a=!0;if(!1===n.getProgramParameter(v,n.LINK_STATUS)){r=!1;const t=gs(n,S,"vertex"),i=gs(n,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,n.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==i||(a=!1);a&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:_},fragmentShader:{log:i,prefix:y}})}let x,M;return n.deleteShader(S),n.deleteShader(T),this.getUniforms=function(){return void 0===x&&(x=new fs(n,v)),x},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const r=e.getActiveAttrib(t,n),a=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),i[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return i}(n,v)),M},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=ms++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=T,this}let Cs=0;class ks{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),n=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(n)&&(a.add(n),n.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Os(e),t.set(e,i)),i}}class Os{constructor(e){this.id=Cs++,this.code=e,this.usedTimes=0}}function Ds(e,t,i,r,n,a,s){const o=new ar,l=new ks,c=[],d=n.isWebGL2,p=n.logarithmicDepthBuffer,m=n.vertexTextures;let g=n.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,o,c,v,_){const y=v.fog,A=_.geometry,E=a.isMeshStandardMaterial?v.environment:null,w=(a.isMeshStandardMaterial?i:t).get(a.envMap||E),S=w&&w.mapping===ie?w.image.height:null,T=b[a.type];null!==a.precision&&(g=n.getMaxPrecision(a.precision),g!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",g,"instead."));const x=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,M=void 0!==x?x.length:0;let R,P,C,k,O=0;if(void 0!==A.morphAttributes.position&&(O=1),void 0!==A.morphAttributes.normal&&(O=2),void 0!==A.morphAttributes.color&&(O=3),T){const e=Nn[T];R=e.vertexShader,P=e.fragmentShader}else R=a.vertexShader,P=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);const D=e.getRenderTarget(),N=a.alphaTest>0,I=a.clearcoat>0,L=a.iridescence>0;return{isWebGL2:d,shaderID:T,shaderName:a.type,vertexShader:R,fragmentShader:P,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:g,instancing:!0===_.isInstancedMesh,instancingColor:!0===_.isInstancedMesh&&null!==_.instanceColor,supportsVertexTextures:m,outputEncoding:null===D?e.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:bt,map:!!a.map,matcap:!!a.matcap,envMap:!!w,envMapMode:w&&w.mapping,envMapCubeUVHeight:S,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===At,tangentSpaceNormalMap:a.normalMapType===yt,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===vt,clearcoat:I,clearcoatMap:I&&!!a.clearcoatMap,clearcoatRoughnessMap:I&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!a.clearcoatNormalMap,iridescence:L,iridescenceMap:L&&!!a.iridescenceMap,iridescenceThicknessMap:L&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===f,alphaMap:!!a.alphaMap,alphaTest:N,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!A.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!y,useFog:!0===a.fog,fogExp2:y&&y.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:M,morphTextureStride:O,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:W,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===h,flipSided:a.side===u,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(i,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.map&&o.enable(4),t.matcap&&o.enable(5),t.envMap&&o.enable(6),t.lightMap&&o.enable(7),t.aoMap&&o.enable(8),t.emissiveMap&&o.enable(9),t.bumpMap&&o.enable(10),t.normalMap&&o.enable(11),t.objectSpaceNormalMap&&o.enable(12),t.tangentSpaceNormalMap&&o.enable(13),t.clearcoat&&o.enable(14),t.clearcoatMap&&o.enable(15),t.clearcoatRoughnessMap&&o.enable(16),t.clearcoatNormalMap&&o.enable(17),t.iridescence&&o.enable(18),t.iridescenceMap&&o.enable(19),t.iridescenceThicknessMap&&o.enable(20),t.displacementMap&&o.enable(21),t.specularMap&&o.enable(22),t.roughnessMap&&o.enable(23),t.metalnessMap&&o.enable(24),t.gradientMap&&o.enable(25),t.alphaMap&&o.enable(26),t.alphaTest&&o.enable(27),t.vertexColors&&o.enable(28),t.vertexAlphas&&o.enable(29),t.vertexUvs&&o.enable(30),t.vertexTangents&&o.enable(31),t.uvsVertexOnly&&o.enable(32),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.physicallyCorrectLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.specularIntensityMap&&o.enable(15),t.specularColorMap&&o.enable(16),t.transmission&&o.enable(17),t.transmissionMap&&o.enable(18),t.thicknessMap&&o.enable(19),t.sheen&&o.enable(20),t.sheenColorMap&&o.enable(21),t.sheenRoughnessMap&&o.enable(22),t.decodeVideoTexture&&o.enable(23),t.opaque&&o.enable(24),e.push(o.mask)}(i,t),i.push(e.outputEncoding)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=b[e.type];let i;if(t){const e=Nn[t];i=pn.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===i){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ps(e,i,t,a),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Ns(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,r){e.get(t)[i]=r},dispose:function(){e=new WeakMap}}}function Is(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ls(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Us(){const e=[];let t=0;const i=[],r=[],n=[];function a(i,r,n,a,s,o){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:r,material:n,groupOrder:a,renderOrder:i.renderOrder,z:s,group:o},e[t]=l):(l.id=i.id,l.object=i,l.geometry=r,l.material=n,l.groupOrder=a,l.renderOrder=i.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:i,transmissive:r,transparent:n,init:function(){t=0,i.length=0,r.length=0,n.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.push(u):!0===s.transparent?n.push(u):i.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?n.unshift(u):i.unshift(u)},finish:function(){for(let i=t,r=e.length;i<r;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Is),r.length>1&&r.sort(t||Ls),n.length>1&&n.sort(t||Ls)}}}function Vs(){let e=new WeakMap;return{get:function(t,i){const r=e.get(t);let n;return void 0===r?(n=new Us,e.set(t,[n])):i>=r.length?(n=new Us,r.push(n)):n=r[i],n},dispose:function(){e=new WeakMap}}}function Fs(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new vi,color:new si};break;case"SpotLight":i={position:new vi,direction:new vi,color:new si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new vi,color:new si,distance:0,decay:0};break;case"HemisphereLight":i={direction:new vi,skyColor:new si,groundColor:new si};break;case"RectAreaLight":i={color:new si,position:new vi,halfWidth:new vi,halfHeight:new vi}}return e[t.id]=i,i}}}let Gs=0;function Bs(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function js(e,t){const i=new Fs,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zt,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)n.probe.push(new vi);const a=new vi,s=new Xi,o=new Xi;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,b=0,v=0,_=0;a.sort(Bs);const y=!0!==s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,A=t.intensity,E=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*A*y,l+=s.g*A*y,c+=s.b*A*y;else if(t.isLightProbe)for(let e=0;e<9;e++)n.probe[e].addScaledVector(t.sh.coefficients[e],A);else if(t.isDirectionalLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,i=r.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,n.directionalShadow[u]=i,n.directionalShadowMap[u]=w,n.directionalShadowMatrix[u]=t.shadow.matrix,m++}n.directional[u]=e,u++}else if(t.isSpotLight){const e=i.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(A*y),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,n.spot[d]=e;const a=t.shadow;if(t.map&&(n.spotLightMap[v]=t.map,v++,a.updateMatrices(t),t.castShadow&&_++),n.spotLightMatrix[d]=a.matrix,t.castShadow){const e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,n.spotShadow[d]=e,n.spotShadowMap[d]=w,b++}d++}else if(t.isRectAreaLight){const e=i.get(t);e.color.copy(s).multiplyScalar(A),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),n.rectArea[f]=e,f++}else if(t.isPointLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,i=r.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,n.pointShadow[h]=i,n.pointShadowMap[h]=w,n.pointShadowMatrix[h]=t.shadow.matrix,g++}n.point[h]=e,h++}else if(t.isHemisphereLight){const e=i.get(t);e.skyColor.copy(t.color).multiplyScalar(A*y),e.groundColor.copy(t.groundColor).multiplyScalar(A*y),n.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(n.rectAreaLTC1=Dn.LTC_FLOAT_1,n.rectAreaLTC2=Dn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(n.rectAreaLTC1=Dn.LTC_HALF_1,n.rectAreaLTC2=Dn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=o,n.ambient[1]=l,n.ambient[2]=c;const A=n.hash;A.directionalLength===u&&A.pointLength===h&&A.spotLength===d&&A.rectAreaLength===f&&A.hemiLength===p&&A.numDirectionalShadows===m&&A.numPointShadows===g&&A.numSpotShadows===b&&A.numSpotMaps===v||(n.directional.length=u,n.spot.length=d,n.rectArea.length=f,n.point.length=h,n.hemi.length=p,n.directionalShadow.length=m,n.directionalShadowMap.length=m,n.pointShadow.length=g,n.pointShadowMap.length=g,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=m,n.pointShadowMatrix.length=g,n.spotLightMatrix.length=b+v-_,n.spotLightMap.length=v,n.numSpotLightShadowsWithMaps=_,A.directionalLength=u,A.pointLength=h,A.spotLength=d,A.rectAreaLength=f,A.hemiLength=p,A.numDirectionalShadows=m,A.numPointShadows=g,A.numSpotShadows=b,A.numSpotMaps=v,n.version=Gs++)},setupView:function(e,t){let i=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=n.directional[i];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),i++}else if(d.isSpotLight){const e=n.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=n.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=n.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=n.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:n}}function zs(e,t){const i=new js(e,t),r=[],n=[];return{init:function(){r.length=0,n.length=0},state:{lightsArray:r,shadowsArray:n,lights:i},setupLights:function(e){i.setup(r,e)},setupLightsView:function(e){i.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){n.push(e)}}}function Hs(e,t){let i=new WeakMap;return{get:function(r,n=0){const a=i.get(r);let s;return void 0===a?(s=new zs(e,t),i.set(r,[s])):n>=a.length?(s=new zs(e,t),a.push(s)):s=a[n],s},dispose:function(){i=new WeakMap}}}class Ws extends Or{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $s extends Or{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new vi,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Ys="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Xs="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function qs(e,t,i){let r=new Rn;const n=new zt,a=new zt,o=new fi,f=new Ws({depthPacking:_t}),p=new $s,m={},g=i.maxTextureSize,b={[c]:u,[u]:c,[h]:h},v=new mn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zt},radius:{value:4}},vertexShader:Ys,fragmentShader:Xs}),_=v.clone();_.defines.HORIZONTAL_PASS=1;const y=new Yr;y.setAttribute("position",new Lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new ln(y,v),E=this;function w(i,r){const a=t.update(A);v.defines.VSM_SAMPLES!==i.blurSamples&&(v.defines.VSM_SAMPLES=i.blurSamples,_.defines.VSM_SAMPLES=i.blurSamples,v.needsUpdate=!0,_.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new pi(n.x,n.y)),v.uniforms.shadow_pass.value=i.map.texture,v.uniforms.resolution.value=i.mapSize,v.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(r,null,a,v,A,null),_.uniforms.shadow_pass.value=i.mapPass.texture,_.uniforms.resolution.value=i.mapSize,_.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(r,null,a,_,A,null)}function S(t,i,r,n,a,s){let o=null;const c=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==c)o=c;else if(o=!0===r.isPointLight?p:f,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=o.uuid,t=i.uuid;let r=m[e];void 0===r&&(r={},m[e]=r);let n=r[t];void 0===n&&(n=o.clone(),r[t]=n),o=n}return o.visible=i.visible,o.wireframe=i.wireframe,o.side=s===l?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:b[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial&&(o.referencePosition.setFromMatrixPosition(r.matrixWorld),o.nearDistance=n,o.farDistance=a),o}function T(i,n,a,s,o){if(!1===i.visible)return;if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===l)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const r=t.update(i),n=i.material;if(Array.isArray(n)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=n[c.materialIndex];if(u&&u.visible){const t=S(i,u,s,a.near,a.far,o);e.renderBufferDirect(a,null,r,t,i,c)}}}else if(n.visible){const t=S(i,n,s,a.near,a.far,o);e.renderBufferDirect(a,null,r,t,i,null)}}const c=i.children;for(let e=0,t=c.length;e<t;e++)T(c[e],n,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=s,this.render=function(t,i,s){if(!1===E.enabled)return;if(!1===E.autoUpdate&&!1===E.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(d),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let c=0,u=t.length;c<u;c++){const u=t[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;n.copy(h.mapSize);const d=h.getFrameExtents();if(n.multiply(d),a.copy(h.mapSize),(n.x>g||n.y>g)&&(n.x>g&&(a.x=Math.floor(g/d.x),n.x=a.x*d.x,h.mapSize.x=a.x),n.y>g&&(a.y=Math.floor(g/d.y),n.y=a.y*d.y,h.mapSize.y=a.y)),null===h.map){const e=this.type!==l?{minFilter:se,magFilter:se}:{};h.map=new pi(n.x,n.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const p=h.getViewportCount();for(let e=0;e<p;e++){const t=h.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),f.viewport(o),h.updateMatrices(u,e),r=h.getFrustum(),T(i,s,h.camera,u,this.type)}!0!==h.isPointLightShadow&&this.type===l&&w(h,s),h.needsUpdate=!1}E.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function Zs(e,t,i){const s=i.isWebGL2,o=new function(){let t=!1;const i=new fi;let r=null;const n=new fi(0,0,0,0);return{setMask:function(i){r===i||t||(e.colorMask(i,i,i,i),r=i)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),i.set(t,r,a,s),!1===n.equals(i)&&(e.clearColor(t,r,a,s),n.copy(i))},reset:function(){t=!1,r=null,n.set(-1,0,0,0)}}},l=new function(){let t=!1,i=null,r=null,n=null;return{setTest:function(t){t?Ae(e.DEPTH_TEST):Ee(e.DEPTH_TEST)},setMask:function(r){i===r||t||(e.depthMask(r),i=r)},setFunc:function(t){if(r!==t){switch(t){case N:e.depthFunc(e.NEVER);break;case I:e.depthFunc(e.ALWAYS);break;case L:e.depthFunc(e.LESS);break;case U:e.depthFunc(e.LEQUAL);break;case V:e.depthFunc(e.EQUAL);break;case F:e.depthFunc(e.GEQUAL);break;case G:e.depthFunc(e.GREATER);break;case B:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,i=null,r=null,n=null}}},c=new function(){let t=!1,i=null,r=null,n=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(i){t||(i?Ae(e.STENCIL_TEST):Ee(e.STENCIL_TEST))},setMask:function(r){i===r||t||(e.stencilMask(r),i=r)},setFunc:function(t,i,s){r===t&&n===i&&a===s||(e.stencilFunc(t,i,s),r=t,n=i,a=s)},setOp:function(t,i,r){s===t&&o===i&&l===r||(e.stencilOp(t,i,r),s=t,o=i,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,r=null,n=null,a=null,s=null,o=null,l=null,c=null}}},j=new WeakMap,z=new WeakMap;let H={},W={},$=new WeakMap,Y=[],X=null,q=!1,Z=null,J=null,K=null,Q=null,ee=null,te=null,ie=null,re=!1,ne=null,ae=null,se=null,oe=null,le=null;const ce=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ue=!1,he=0;const de=e.getParameter(e.VERSION);-1!==de.indexOf("WebGL")?(he=parseFloat(/^WebGL (\d)/.exec(de)[1]),ue=he>=1):-1!==de.indexOf("OpenGL ES")&&(he=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),ue=he>=2);let fe=null,pe={};const me=e.getParameter(e.SCISSOR_BOX),ge=e.getParameter(e.VIEWPORT),be=(new fi).fromArray(me),ve=(new fi).fromArray(ge);function _e(t,i,r){const n=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let t=0;t<r;t++)e.texImage2D(i+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return a}const ye={};function Ae(t){!0!==H[t]&&(e.enable(t),H[t]=!0)}function Ee(t){!1!==H[t]&&(e.disable(t),H[t]=!1)}ye[e.TEXTURE_2D]=_e(e.TEXTURE_2D,e.TEXTURE_2D,1),ye[e.TEXTURE_CUBE_MAP]=_e(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ae(e.DEPTH_TEST),l.setFunc(U),xe(!1),Me(n),Ae(e.CULL_FACE),Te(d);const we={[v]:e.FUNC_ADD,[_]:e.FUNC_SUBTRACT,[y]:e.FUNC_REVERSE_SUBTRACT};if(s)we[A]=e.MIN,we[E]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(we[A]=e.MIN_EXT,we[E]=e.MAX_EXT)}const Se={[w]:e.ZERO,[S]:e.ONE,[T]:e.SRC_COLOR,[M]:e.SRC_ALPHA,[D]:e.SRC_ALPHA_SATURATE,[k]:e.DST_COLOR,[P]:e.DST_ALPHA,[x]:e.ONE_MINUS_SRC_COLOR,[R]:e.ONE_MINUS_SRC_ALPHA,[O]:e.ONE_MINUS_DST_COLOR,[C]:e.ONE_MINUS_DST_ALPHA};function Te(t,i,r,n,a,s,o,l){if(t!==d){if(!1===q&&(Ae(e.BLEND),q=!0),t===b)a=a||i,s=s||r,o=o||n,i===J&&a===ee||(e.blendEquationSeparate(we[i],we[a]),J=i,ee=a),r===K&&n===Q&&s===te&&o===ie||(e.blendFuncSeparate(Se[r],Se[n],Se[s],Se[o]),K=r,Q=n,te=s,ie=o),Z=t,re=!1;else if(t!==Z||l!==re){if(J===v&&ee===v||(e.blendEquation(e.FUNC_ADD),J=v,ee=v),l)switch(t){case f:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case p:e.blendFunc(e.ONE,e.ONE);break;case m:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case g:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case f:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case p:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case m:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case g:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}K=null,Q=null,te=null,ie=null,Z=t,re=l}}else!0===q&&(Ee(e.BLEND),q=!1)}function xe(t){ne!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ne=t)}function Me(t){t!==r?(Ae(e.CULL_FACE),t!==ae&&(t===n?e.cullFace(e.BACK):t===a?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Ee(e.CULL_FACE),ae=t}function Re(t,i,r){t?(Ae(e.POLYGON_OFFSET_FILL),oe===i&&le===r||(e.polygonOffset(i,r),oe=i,le=r)):Ee(e.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:l,stencil:c},enable:Ae,disable:Ee,bindFramebuffer:function(t,i){return W[t]!==i&&(e.bindFramebuffer(t,i),W[t]=i,s&&(t===e.DRAW_FRAMEBUFFER&&(W[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(W[e.DRAW_FRAMEBUFFER]=i)),!0)},drawBuffers:function(r,n){let a=Y,s=!1;if(r)if(a=$.get(n),void 0===a&&(a=[],$.set(n,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let i=0,r=t.length;i<r;i++)a[i]=e.COLOR_ATTACHMENT0+i;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(i.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return X!==t&&(e.useProgram(t),X=t,!0)},setBlending:Te,setMaterial:function(t,i){t.side===h?Ee(e.CULL_FACE):Ae(e.CULL_FACE);let r=t.side===u;i&&(r=!r),xe(r),t.blending===f&&!1===t.transparent?Te(d):Te(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),o.setMask(t.colorWrite);const n=t.stencilWrite;c.setTest(n),n&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Re(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?Ae(e.SAMPLE_ALPHA_TO_COVERAGE):Ee(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:xe,setCullFace:Me,setLineWidth:function(t){t!==se&&(ue&&e.lineWidth(t),se=t)},setPolygonOffset:Re,setScissorTest:function(t){t?Ae(e.SCISSOR_TEST):Ee(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+ce-1),fe!==t&&(e.activeTexture(t),fe=t)},bindTexture:function(t,i,r){void 0===r&&(r=null===fe?e.TEXTURE0+ce-1:fe);let n=pe[r];void 0===n&&(n={type:void 0,texture:void 0},pe[r]=n),n.type===t&&n.texture===i||(fe!==r&&(e.activeTexture(r),fe=r),e.bindTexture(t,i||ye[t]),n.type=t,n.texture=i)},unbindTexture:function(){const t=pe[fe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,i){let r=z.get(i);void 0===r&&(r=new WeakMap,z.set(i,r));let n=r.get(t);void 0===n&&(n=e.getUniformBlockIndex(i,t.name),r.set(t,n))},uniformBlockBinding:function(t,i){const r=z.get(i).get(t);j.get(i)!==r&&(e.uniformBlockBinding(i,r,t.__bindingPointIndex),j.set(i,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===be.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),be.copy(t))},viewport:function(t){!1===ve.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ve.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===s&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),H={},fe=null,pe={},W={},$=new WeakMap,Y=[],X=null,q=!1,Z=null,J=null,K=null,Q=null,ee=null,te=null,ie=null,re=!1,ne=null,ae=null,se=null,oe=null,le=null,be.set(0,0,e.canvas.width,e.canvas.height),ve.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),c.reset()}}}function Js(e,t,i,r,n,a,s){const o=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,h=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let b=!1;try{b="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function v(e,t){return b?new OffscreenCanvas(e,t):qt("canvas")}function _(e,t,i,r){let n=1;if((e.width>r||e.height>r)&&(n=r/Math.max(e.width,e.height)),n<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Ft:Math.floor,a=r(n*e.width),s=r(n*e.height);void 0===m&&(m=v(a,s));const o=i?v(a,s):m;return o.width=a,o.height=s,o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return Ut(e.width)&&Ut(e.height)}function A(e,t){return e.generateMipmaps&&t&&e.minFilter!==se&&e.minFilter!==ce}function E(t){e.generateMipmap(t)}function w(i,r,n,a,s=!1){if(!1===o)return r;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=r;return r===e.RED&&(n===e.FLOAT&&(l=e.R32F),n===e.HALF_FLOAT&&(l=e.R16F),n===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(n===e.FLOAT&&(l=e.RG32F),n===e.HALF_FLOAT&&(l=e.RG16F),n===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(n===e.FLOAT&&(l=e.RGBA32F),n===e.HALF_FLOAT&&(l=e.RGBA16F),n===e.UNSIGNED_BYTE&&(l=a===vt&&!1===s?e.SRGB8_ALPHA8:e.RGBA8),n===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),n===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function S(e,t,i){return!0===A(e,i)||e.isFramebufferTexture&&e.minFilter!==se&&e.minFilter!==ce?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(t){return t===se||t===oe||t===le?e.NEAREST:e.LINEAR}function x(e){const t=e.target;t.removeEventListener("dispose",x),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const i=e.source,n=g.get(i);if(n){const r=n[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&R(e),0===Object.keys(n).length&&g.delete(i)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function M(t){const i=t.target;i.removeEventListener("dispose",M),function(t){const i=t.texture,n=r.get(t),a=r.get(i);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),r.remove(i[t])}r.remove(i),r.remove(t)}(i)}function R(t){const i=r.get(t);e.deleteTexture(i.__webglTexture);const n=t.source;delete g.get(n)[i.__cacheKey],s.memory.textures--}let P=0;function C(t,n){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(a,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+n)}const k={[re]:e.REPEAT,[ne]:e.CLAMP_TO_EDGE,[ae]:e.MIRRORED_REPEAT},O={[se]:e.NEAREST,[oe]:e.NEAREST_MIPMAP_NEAREST,[le]:e.NEAREST_MIPMAP_LINEAR,[ce]:e.LINEAR,[ue]:e.LINEAR_MIPMAP_NEAREST,[he]:e.LINEAR_MIPMAP_LINEAR};function D(i,a,s){if(s?(e.texParameteri(i,e.TEXTURE_WRAP_S,k[a.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,k[a.wrapT]),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,k[a.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,O[a.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,O[a.minFilter])):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===ne&&a.wrapT===ne||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,e.TEXTURE_MAG_FILTER,T(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,T(a.minFilter)),a.minFilter!==se&&a.minFilter!==ce&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===se)return;if(a.minFilter!==le&&a.minFilter!==he)return;if(a.type===ve&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===_e&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,i){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",x));const n=i.source;let a=g.get(n);void 0===a&&(a={},g.set(n,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(i);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const n=a[t.__cacheKey];void 0!==n&&(a[t.__cacheKey].usedTimes--,0===n.usedTimes&&R(i)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function I(t,n,s){let l=e.TEXTURE_2D;(n.isDataArrayTexture||n.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),n.isData3DTexture&&(l=e.TEXTURE_3D);const c=N(t,n),h=n.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const d=r.get(h);if(h.version!==d.__version||!0===c){i.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!o&&(e.wrapS!==ne||e.wrapT!==ne||e.minFilter!==se&&e.minFilter!==ce)}(n)&&!1===y(n.image);let r=_(n.image,t,!1,u);r=B(n,r);const f=y(r)||o,p=a.convert(n.format,n.encoding);let m,g=a.convert(n.type),b=w(n.internalFormat,p,g,n.encoding,n.isVideoTexture);D(l,n,f);const v=n.mipmaps,T=o&&!0!==n.isVideoTexture,x=void 0===d.__version||!0===c,M=S(n,r,f);if(n.isDepthTexture)b=e.DEPTH_COMPONENT,o?b=n.type===ve?e.DEPTH_COMPONENT32F:n.type===be?e.DEPTH_COMPONENT24:n.type===Ee?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:n.type===ve&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===Me&&b===e.DEPTH_COMPONENT&&n.type!==me&&n.type!==be&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=be,g=a.convert(n.type)),n.format===Re&&b===e.DEPTH_COMPONENT&&(b=e.DEPTH_STENCIL,n.type!==Ee&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Ee,g=a.convert(n.type))),x&&(T?i.texStorage2D(e.TEXTURE_2D,1,b,r.width,r.height):i.texImage2D(e.TEXTURE_2D,0,b,r.width,r.height,0,p,g,null));else if(n.isDataTexture)if(v.length>0&&f){T&&x&&i.texStorage2D(e.TEXTURE_2D,M,b,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],T?i.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):i.texImage2D(e.TEXTURE_2D,t,b,m.width,m.height,0,p,g,m.data);n.generateMipmaps=!1}else T?(x&&i.texStorage2D(e.TEXTURE_2D,M,b,r.width,r.height),i.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,p,g,r.data)):i.texImage2D(e.TEXTURE_2D,0,b,r.width,r.height,0,p,g,r.data);else if(n.isCompressedTexture)if(n.isCompressedArrayTexture){T&&x&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,b,v[0].width,v[0].height,r.depth);for(let t=0,a=v.length;t<a;t++)m=v[t],n.format!==Se?null!==p?T?i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,p,m.data,0,0):i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,b,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,p,g,m.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,b,m.width,m.height,r.depth,0,p,g,m.data)}else{T&&x&&i.texStorage2D(e.TEXTURE_2D,M,b,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],n.format!==Se?null!==p?T?i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,m.data):i.compressedTexImage2D(e.TEXTURE_2D,t,b,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?i.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):i.texImage2D(e.TEXTURE_2D,t,b,m.width,m.height,0,p,g,m.data)}else if(n.isDataArrayTexture)T?(x&&i.texStorage3D(e.TEXTURE_2D_ARRAY,M,b,r.width,r.height,r.depth),i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):i.texImage3D(e.TEXTURE_2D_ARRAY,0,b,r.width,r.height,r.depth,0,p,g,r.data);else if(n.isData3DTexture)T?(x&&i.texStorage3D(e.TEXTURE_3D,M,b,r.width,r.height,r.depth),i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,p,g,r.data)):i.texImage3D(e.TEXTURE_3D,0,b,r.width,r.height,r.depth,0,p,g,r.data);else if(n.isFramebufferTexture){if(x)if(T)i.texStorage2D(e.TEXTURE_2D,M,b,r.width,r.height);else{let t=r.width,n=r.height;for(let r=0;r<M;r++)i.texImage2D(e.TEXTURE_2D,r,b,t,n,0,p,g,null),t>>=1,n>>=1}}else if(v.length>0&&f){T&&x&&i.texStorage2D(e.TEXTURE_2D,M,b,v[0].width,v[0].height);for(let t=0,r=v.length;t<r;t++)m=v[t],T?i.texSubImage2D(e.TEXTURE_2D,t,0,0,p,g,m):i.texImage2D(e.TEXTURE_2D,t,b,p,g,m);n.generateMipmaps=!1}else T?(x&&i.texStorage2D(e.TEXTURE_2D,M,b,r.width,r.height),i.texSubImage2D(e.TEXTURE_2D,0,0,0,p,g,r)):i.texImage2D(e.TEXTURE_2D,0,b,p,g,r);A(n,f)&&E(l),d.__version=h.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}function L(t,n,s,o,l){const c=a.convert(s.format,s.encoding),u=a.convert(s.type),h=w(s.internalFormat,c,u,s.encoding);r.get(n).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?i.texImage3D(l,0,h,n.width,n.height,n.depth,0,c,u,null):i.texImage2D(l,0,h,n.width,n.height,0,c,u,null)),i.bindFramebuffer(e.FRAMEBUFFER,t),G(n)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,r.get(s).__webglTexture,0,F(n)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,r.get(s).__webglTexture,0),i.bindFramebuffer(e.FRAMEBUFFER,null)}function U(t,i,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer){let n=e.DEPTH_COMPONENT16;if(r||G(i)){const t=i.depthTexture;t&&t.isDepthTexture&&(t.type===ve?n=e.DEPTH_COMPONENT32F:t.type===be&&(n=e.DEPTH_COMPONENT24));const r=F(i);G(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,n,i.width,i.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,n,i.width,i.height)}else e.renderbufferStorage(e.RENDERBUFFER,n,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(i.depthBuffer&&i.stencilBuffer){const n=F(i);r&&!1===G(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,n,e.DEPTH24_STENCIL8,i.width,i.height):G(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,n,e.DEPTH24_STENCIL8,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let n=0;n<t.length;n++){const s=t[n],o=a.convert(s.format,s.encoding),l=a.convert(s.type),c=w(s.internalFormat,o,l,s.encoding),u=F(i);r&&!1===G(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,i.width,i.height):G(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,c,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function V(t){const n=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),C(n.depthTexture,0);const a=r.get(n.depthTexture).__webglTexture,s=F(n);if(n.depthTexture.format===Me)G(n)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(n.depthTexture.format!==Re)throw new Error("Unknown depthTexture format");G(n)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(n.__webglFramebuffer,t)}else if(a){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)i.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),U(n.__webglDepthbuffer[r],t,!1)}else i.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),U(n.__webglDepthbuffer,t,!1);i.bindFramebuffer(e.FRAMEBUFFER,null)}function F(e){return Math.min(h,e.samples)}function G(e){const i=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function B(e,i){const r=e.encoding,n=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Mt||r!==bt&&(r===vt?!1===o?!0===t.has("EXT_sRGB")&&n===Se?(e.format=Mt,e.minFilter=ce,e.generateMipmaps=!1):i=li.sRGBToLinear(i):n===Se&&a===de||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),i}this.allocateTextureUnit=function(){const e=P;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=C,this.setTexture2DArray=function(t,n){const a=r.get(t);t.version>0&&a.__version!==t.version?I(a,t,n):i.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+n)},this.setTexture3D=function(t,n){const a=r.get(t);t.version>0&&a.__version!==t.version?I(a,t,n):i.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+n)},this.setTextureCube=function(t,n){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,n,s){if(6!==n.image.length)return;const l=N(t,n),u=n.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===l){i.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=n.isCompressedTexture||n.image[0].isCompressedTexture,r=n.image[0]&&n.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||r?r?n.image[e].image:n.image[e]:_(n.image[e],!1,!0,c),d[e]=B(n,d[e]);const f=d[0],p=y(f)||o,m=a.convert(n.format,n.encoding),g=a.convert(n.type),b=w(n.internalFormat,m,g,n.encoding),v=o&&!0!==n.isVideoTexture,T=void 0===h.__version||!0===l;let x,M=S(n,f,p);if(D(e.TEXTURE_CUBE_MAP,n,p),t){v&&T&&i.texStorage2D(e.TEXTURE_CUBE_MAP,M,b,f.width,f.height);for(let t=0;t<6;t++){x=d[t].mipmaps;for(let r=0;r<x.length;r++){const a=x[r];n.format!==Se?null!==m?v?i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,m,a.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,b,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,m,g,a.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,b,a.width,a.height,0,m,g,a.data)}}}else{x=n.mipmaps,v&&T&&(x.length>0&&M++,i.texStorage2D(e.TEXTURE_CUBE_MAP,M,b,d[0].width,d[0].height));for(let t=0;t<6;t++)if(r){v?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,b,d[t].width,d[t].height,0,m,g,d[t].data);for(let r=0;r<x.length;r++){const n=x[r].image[t].image;v?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,n.width,n.height,m,g,n.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,b,n.width,n.height,0,m,g,n.data)}}else{v?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,g,d[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,b,m,g,d[t]);for(let r=0;r<x.length;r++){const n=x[r];v?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,m,g,n.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,b,m,g,n.image[t])}}}A(n,p)&&E(e.TEXTURE_CUBE_MAP),h.__version=u.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}(s,t,n):i.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+n)},this.rebindTextures=function(t,i,n){const a=r.get(t);void 0!==i&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==n&&V(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=y(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(n.drawBuffers){const i=t.texture;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===G(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let i=0;i<r.length;i++){const n=r[i];c.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[i]);const s=a.convert(n.format,n.encoding),o=a.convert(n.type),l=w(n.internalFormat,s,o,n.encoding,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,c.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),U(c.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){i.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),D(e.TEXTURE_CUBE_MAP,l,f);for(let i=0;i<6;i++)L(c.__webglFramebuffer[i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i);A(l,f)&&E(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(d){const n=t.texture;for(let a=0,s=n.length;a<s;a++){const s=n[a],o=r.get(s);i.bindTexture(e.TEXTURE_2D,o.__webglTexture),D(e.TEXTURE_2D,s,f),L(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D),A(s,f)&&E(e.TEXTURE_2D)}i.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(r,u.__webglTexture),D(r,l,f),L(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),A(l,f)&&E(r),i.unbindTexture()}t.depthBuffer&&V(t)},this.updateRenderTargetMipmap=function(t){const n=y(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(A(o,n)){const n=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(o).__webglTexture;i.bindTexture(n,a),E(n),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===G(t)){const n=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<n.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let i=0;i<n.length;i++){l.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[i]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),h){const t=r.get(n[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),f&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<n.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(n[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=V,this.setupFrameBufferTexture=L,this.useMultisampledRTT=G}function Ks(e,t,i){const r=i.isWebGL2;return{convert:function(i,n=null){let a;if(i===de)return e.UNSIGNED_BYTE;if(i===ye)return e.UNSIGNED_SHORT_4_4_4_4;if(i===Ae)return e.UNSIGNED_SHORT_5_5_5_1;if(i===fe)return e.BYTE;if(i===pe)return e.SHORT;if(i===me)return e.UNSIGNED_SHORT;if(i===ge)return e.INT;if(i===be)return e.UNSIGNED_INT;if(i===ve)return e.FLOAT;if(i===_e)return r?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(i===we)return e.ALPHA;if(i===Se)return e.RGBA;if(i===Te)return e.LUMINANCE;if(i===xe)return e.LUMINANCE_ALPHA;if(i===Me)return e.DEPTH_COMPONENT;if(i===Re)return e.DEPTH_STENCIL;if(i===Mt)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(i===Pe)return e.RED;if(i===Ce)return e.RED_INTEGER;if(i===ke)return e.RG;if(i===Oe)return e.RG_INTEGER;if(i===De)return e.RGBA_INTEGER;if(i===Ne||i===Ie||i===Le||i===Ue)if(n===vt){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(i===Ne)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ie)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Le)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Ue)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(i===Ne)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ie)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Le)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Ue)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===Ve||i===Fe||i===Ge||i===Be){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(i===Ve)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Fe)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Ge)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Be)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===je)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===ze||i===He){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(i===ze)return n===vt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===He)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(i===We||i===$e||i===Ye||i===Xe||i===qe||i===Ze||i===Je||i===Ke||i===Qe||i===et||i===tt||i===it||i===rt||i===nt){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(i===We)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$e)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Ye)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Xe)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===qe)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Ze)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Je)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ke)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Qe)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===et)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===tt)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===it)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===rt)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===nt)return n===vt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===at){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(i===at)return n===vt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(i===st||i===ot||i===lt||i===ct){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(i===at)return a.COMPRESSED_RED_RGTC1_EXT;if(i===ot)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===lt)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===ct)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Ee?r?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[i]?e[i]:null}}}class Qs extends bn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class eo extends _r{constructor(){super(),this.isGroup=!0,this.type="Group"}}const to={type:"move"};class io{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new eo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new eo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new vi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new vi),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new eo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new vi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new vi),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,n=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,i),n=this._getHandJoint(l,r);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.jointRadius=e.radius),n.visible=null!==e}const r=l.joints["index-finger-tip"],n=l.joints["thumb-tip"],s=r.position.distanceTo(n.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==n&&(r=n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(to)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==n),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new eo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class ro extends di{constructor(e,t,i,r,n,a,s,o,l,c){if((c=void 0!==c?c:Me)!==Me&&c!==Re)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Me&&(i=be),void 0===i&&c===Re&&(i=Ee),super(null,r,n,a,s,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:se,this.minFilter=void 0!==o?o:se,this.flipY=!1,this.generateMipmaps=!1}}class no extends Rt{constructor(e,t){super();const i=this;let r=null,n=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const b=[],v=[],_=new Set,y=new Map,A=new bn;A.layers.enable(1),A.viewport=new fi;const E=new bn;E.layers.enable(2),E.viewport=new fi;const w=[A,E],S=new Qs;S.layers.enable(1),S.layers.enable(2);let T=null,x=null;function M(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const i=b[t];void 0!==i&&i.dispatchEvent({type:e.type,data:e.inputSource})}function R(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",R),r.removeEventListener("inputsourceschange",P);for(let e=0;e<b.length;e++){const t=v[e];null!==t&&(v[e]=null,b[e].disconnect(t))}T=null,x=null,e.setRenderTarget(m),d=null,h=null,u=null,r=null,g=null,N.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],r=v.indexOf(i);r>=0&&(v[r]=null,b[r].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let r=v.indexOf(i);if(-1===r){for(let e=0;e<b.length;e++){if(e>=v.length){v.push(i),r=e;break}if(null===v[e]){v[e]=i,r=e;break}}if(-1===r)break}const n=b[r];n&&n.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new io,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new io,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new io,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){n=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",R),r.addEventListener("inputsourceschange",P),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const i={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(r,t,i),r.updateRenderState({baseLayer:d}),g=new pi(d.framebufferWidth,d.framebufferHeight,{format:Se,type:de,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let i=null,a=null,s=null;p.depth&&(s=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=p.stencil?Re:Me,a=p.stencil?Ee:be);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:n};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(o),r.updateRenderState({layers:[h]}),g=new pi(h.textureWidth,h.textureHeight,{format:Se,type:de,depthTexture:new ro(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),N.setContext(r),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};const C=new vi,k=new vi;function O(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;S.near=E.near=A.near=e.near,S.far=E.far=A.far=e.far,T===S.near&&x===S.far||(r.updateRenderState({depthNear:S.near,depthFar:S.far}),T=S.near,x=S.far);const t=e.parent,i=S.cameras;O(S,t);for(let e=0;e<i.length;e++)O(i[e],t);S.matrixWorld.decompose(S.position,S.quaternion,S.scale),e.matrix.copy(S.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const n=e.children;for(let e=0,t=n.length;e<t;e++)n[e].updateMatrixWorld(!0);2===i.length?function(e,t,i){C.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(i.matrixWorld);const r=C.distanceTo(k),n=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=n[14]/(n[10]-1),o=n[14]/(n[10]+1),l=(n[9]+1)/n[5],c=(n[9]-1)/n[5],u=(n[8]-1)/n[0],h=(a[8]+1)/a[0],d=s*u,f=s*h,p=r/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+p,b=o+p,v=d-m,_=f+(r-m),y=l*o/b*g,A=c*o/b*g;e.projectionMatrix.makePerspective(v,_,y,A,g,b)}(S,A,E):S.projectionMatrix.copy(A.projectionMatrix)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return _};let D=null;const N=new Pn;N.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||a),f=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let i=!1;t.length!==S.cameras.length&&(S.cameras.length=0,i=!0);for(let r=0;r<t.length;r++){const n=t[r];let a=null;if(null!==d)a=d.getViewport(n);else{const t=u.getViewSubImage(h,n);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=w[r];void 0===s&&(s=new bn,s.layers.enable(r),s.viewport=new fi,w[r]=s),s.matrix.fromArray(n.transform.matrix),s.projectionMatrix.fromArray(n.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&S.matrix.copy(s.matrix),!0===i&&S.cameras.push(s)}}for(let e=0;e<b.length;e++){const t=v[e],i=b[e];null!==t&&void 0!==i&&i.update(t,r,l||a)}if(D&&D(t,r),r.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let e=null;for(const t of _)r.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)_.delete(t),y.delete(t),i.dispatchEvent({type:"planeremoved",data:t});for(const e of r.detectedPlanes)if(_.has(e)){const t=y.get(e);e.lastChangedTime>t&&(y.set(e,e.lastChangedTime),i.dispatchEvent({type:"planechanged",data:e}))}else _.add(e),y.set(e,r.lastChangedTime),i.dispatchEvent({type:"planeadded",data:e})}f=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}function ao(e,t){function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map),r.alphaMap&&(i.alphaMap.value=r.alphaMap),r.bumpMap&&(i.bumpMap.value=r.bumpMap,i.bumpScale.value=r.bumpScale,r.side===u&&(i.bumpScale.value*=-1)),r.displacementMap&&(i.displacementMap.value=r.displacementMap,i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap),r.normalMap&&(i.normalMap.value=r.normalMap,i.normalScale.value.copy(r.normalScale),r.side===u&&i.normalScale.value.negate()),r.specularMap&&(i.specularMap.value=r.specularMap),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const n=t.get(r).envMap;if(n&&(i.envMap.value=n,i.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t}let a,s;r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity),r.map?a=r.map:r.specularMap?a=r.specularMap:r.displacementMap?a=r.displacementMap:r.normalMap?a=r.normalMap:r.bumpMap?a=r.bumpMap:r.roughnessMap?a=r.roughnessMap:r.metalnessMap?a=r.metalnessMap:r.alphaMap?a=r.alphaMap:r.emissiveMap?a=r.emissiveMap:r.clearcoatMap?a=r.clearcoatMap:r.clearcoatNormalMap?a=r.clearcoatNormalMap:r.clearcoatRoughnessMap?a=r.clearcoatRoughnessMap:r.iridescenceMap?a=r.iridescenceMap:r.iridescenceThicknessMap?a=r.iridescenceThicknessMap:r.specularIntensityMap?a=r.specularIntensityMap:r.specularColorMap?a=r.specularColorMap:r.transmissionMap?a=r.transmissionMap:r.thicknessMap?a=r.thicknessMap:r.sheenColorMap?a=r.sheenColorMap:r.sheenRoughnessMap&&(a=r.sheenRoughnessMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),i.uvTransform.value.copy(a.matrix)),r.aoMap?s=r.aoMap:r.lightMap&&(s=r.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),i.uv2Transform.value.copy(s.matrix))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,fn(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,r,n,a,s){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap);t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===u&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap)),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,s)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r,n,a):r.isSpriteMaterial?function(e,t){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function so(e,t,i,r){let n={},a={},s=[];const o=i.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,i){const r=e.value;if(void 0===i[t]){if("number"==typeof r)i[t]=r;else{const e=Array.isArray(r)?r:[r],n=[];for(let t=0;t<e.length;t++)n.push(e[t].clone());i[t]=n}return!0}if("number"==typeof r){if(i[t]!==r)return i[t]=r,!0}else{const e=Array.isArray(i[t])?i[t]:[i[t]],n=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const i=e[t];if(!1===i.equals(n[t]))return i.copy(n[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const i=t.target;i.removeEventListener("dispose",u);const r=s.indexOf(i.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(n[i.id]),delete n[i.id],delete a[i.id]}return{bind:function(e,t){const i=t.program;r.uniformBlockBinding(e,i)},update:function(i,h){let d=n[i.id];void 0===d&&(function(e){const t=e.uniforms;let i=0;let r=0;for(let e=0,n=t.length;e<n;e++){const n=t[e],a={boundary:0,storage:0},s=Array.isArray(n.value)?n.value:[n.value];for(let e=0,t=s.length;e<t;e++){const t=c(s[e]);a.boundary+=t.boundary,a.storage+=t.storage}n.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),n.__offset=i,e>0&&(r=i%16,0!==r&&16-r-a.boundary<0&&(i+=16-r,n.__offset=i)),i+=a.storage}r=i%16,r>0&&(i+=16-r),e.__size=i,e.__cache={}}(i),d=function(t){const i=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const r=e.createBuffer(),n=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,n,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,i,r),r}(i),n[i.id]=d,i.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(i,f);const p=t.render.frame;a[i.id]!==p&&(function(t){const i=n[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let t=0,i=r.length;t<i;t++){const i=r[t];if(!0===l(i,t,a)){const t=i.__offset,r=Array.isArray(i.value)?i.value:[i.value];let n=0;for(let a=0;a<r.length;a++){const s=r[a],o=c(s);"number"==typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+n,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=s.elements[0],i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=s.elements[0],i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=s.elements[0]):(s.toArray(i.__data,n),n+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),a[i.id]=p)},dispose:function(){for(const t in n)e.deleteBuffer(n[t]);s=[],n={},a={}}}}function oo(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=qt("canvas");return e.style.display="block",e}(),r=void 0!==e.context?e.context:null,n=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,d=void 0!==e.powerPreference?e.powerPreference:"default",f=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let p;p=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let m=null,g=null;const b=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=bt,this.physicallyCorrectLights=!1,this.toneMapping=W,this.toneMappingExposure=1;const _=this;let y=!1,A=0,E=0,w=null,S=-1,T=null;const x=new fi,M=new fi;let R=null,P=t.width,C=t.height,k=1,O=null,D=null;const N=new fi(0,0,P,C),I=new fi(0,0,P,C);let L=!1;const U=new Rn;let V=!1,F=!1,G=null;const B=new Xi,j=new zt,z=new vi,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $(){return null===w?k:1}let Y,X,q,Z,J,K,Q,ee,te,ie,re,ne,ae,se,oe,le,ce,ue,fe,pe,me,ge,be,ye,Ae=r;function Ee(e,i){for(let r=0;r<e.length;r++){const n=e[r],a=t.getContext(n,i);if(null!==a)return a}return null}try{const e={alpha:!0,depth:n,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i}`),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Re,!1),null===Ae){const t=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&t.shift(),Ae=Ee(t,e),null===Ae)throw Ee(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ae.getShaderPrecisionFormat&&(Ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function we(){Y=new ia(Ae),X=new Fn(Ae,Y,e),Y.init(X),ge=new Ks(Ae,Y,X),q=new Zs(Ae,Y,X),Z=new aa(Ae),J=new Ns,K=new Js(Ae,Y,q,J,X,ge,Z),Q=new Bn(_),ee=new ta(_),te=new Cn(Ae,X),be=new Un(Ae,Y,te,X),ie=new ra(Ae,te,Z,be),re=new ca(Ae,ie,te,Z),fe=new la(Ae,X,K),le=new Gn(J),ne=new Ds(_,Q,ee,Y,X,be,le),ae=new ao(_,J),se=new Vs,oe=new Hs(Y,X),ue=new Ln(_,Q,ee,q,re,p,o),ce=new qs(_,re,X),ye=new so(Ae,Z,X,q),pe=new Vn(Ae,Y,Z,X),me=new na(Ae,Y,Z,X),Z.programs=ne.programs,_.capabilities=X,_.extensions=Y,_.properties=J,_.renderLists=se,_.shadowMap=ce,_.state=q,_.info=Z}we();const Te=new no(_,Ae);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=Z.autoReset,t=ce.enabled,i=ce.autoUpdate,r=ce.needsUpdate,n=ce.type;we(),Z.autoReset=e,ce.enabled=t,ce.autoUpdate=i,ce.needsUpdate=r,ce.type=n}function Re(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Pe(e){const t=e.target;t.removeEventListener("dispose",Pe),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){ne.releaseProgram(e)})),e.isShaderMaterial&&ne.releaseShaderCache(e))})(e),J.remove(e)}(t)}this.xr=Te,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(P,C,!1))},this.getSize=function(e){return e.set(P,C)},this.setSize=function(e,i,r){Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=e,C=i,t.width=Math.floor(e*k),t.height=Math.floor(i*k),!1!==r&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(P*k,C*k).floor()},this.setDrawingBufferSize=function(e,i,r){P=e,C=i,k=r,t.width=Math.floor(e*r),t.height=Math.floor(i*r),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(x)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,i,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,i,r),q.viewport(x.copy(N).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,i,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,i,r),q.scissor(M.copy(I).multiplyScalar(k).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){q.setScissorTest(L=e)},this.setOpaqueSort=function(e){O=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,i=!0){let r=0;e&&(r|=Ae.COLOR_BUFFER_BIT),t&&(r|=Ae.DEPTH_BUFFER_BIT),i&&(r|=Ae.STENCIL_BUFFER_BIT),Ae.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Re,!1),se.dispose(),oe.dispose(),J.dispose(),Q.dispose(),ee.dispose(),re.dispose(),be.dispose(),ye.dispose(),ne.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",ke),Te.removeEventListener("sessionend",Oe),G&&(G.dispose(),G=null),De.stop()},this.renderBufferDirect=function(e,t,i,r,n,a){null===t&&(t=H);const s=n.isMesh&&n.matrixWorld.determinant()<0,o=function(e,t,i,r,n){!0!==t.isScene&&(t=H),K.resetTextureUnits();const a=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===w?_.outputEncoding:!0===w.isXRRenderTarget?w.texture.encoding:bt,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||s),c=!0===r.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,u=!!r.normalMap&&!!i.attributes.tangent,h=!!i.morphAttributes.position,d=!!i.morphAttributes.normal,f=!!i.morphAttributes.color,p=r.toneMapped?_.toneMapping:W,m=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,b=void 0!==m?m.length:0,v=J.get(r),y=g.state.lights;if(!0===V&&(!0===F||e!==T)){const t=e===T&&r.id===S;le.setState(r,e,t)}let A=!1;r.version===v.__version?v.needsLights&&v.lightsStateVersion!==y.state.version||v.outputEncoding!==o||n.isInstancedMesh&&!1===v.instancing?A=!0:n.isInstancedMesh||!0!==v.instancing?n.isSkinnedMesh&&!1===v.skinning?A=!0:n.isSkinnedMesh||!0!==v.skinning?v.envMap!==l||!0===r.fog&&v.fog!==a?A=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===le.numPlanes&&v.numIntersection===le.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||v.morphColors!==f||v.toneMapping!==p||!0===X.isWebGL2&&v.morphTargetsCount!==b)&&(A=!0):A=!0:A=!0:A=!0:(A=!0,v.__version=r.version);let E=v.currentProgram;!0===A&&(E=Ve(r,t,n));let x=!1,M=!1,R=!1;const P=E.getUniforms(),O=v.uniforms;if(q.useProgram(E.program)&&(x=!0,M=!0,R=!0),r.id!==S&&(S=r.id,M=!0),x||T!==e){if(P.setValue(Ae,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&P.setValue(Ae,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),T!==e&&(T=e,M=!0,R=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=P.map.cameraPosition;void 0!==t&&t.setValue(Ae,z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&P.setValue(Ae,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||n.isSkinnedMesh)&&P.setValue(Ae,"viewMatrix",e.matrixWorldInverse)}if(n.isSkinnedMesh){P.setOptional(Ae,n,"bindMatrix"),P.setOptional(Ae,n,"bindMatrixInverse");const e=n.skeleton;e&&(X.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(Ae,"boneTexture",e.boneTexture,K),P.setValue(Ae,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const D=i.morphAttributes;var N,I;if((void 0!==D.position||void 0!==D.normal||void 0!==D.color&&!0===X.isWebGL2)&&fe.update(n,i,r,E),(M||v.receiveShadow!==n.receiveShadow)&&(v.receiveShadow=n.receiveShadow,P.setValue(Ae,"receiveShadow",n.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),M&&(P.setValue(Ae,"toneMappingExposure",_.toneMappingExposure),v.needsLights&&(I=R,(N=O).ambientLightColor.needsUpdate=I,N.lightProbe.needsUpdate=I,N.directionalLights.needsUpdate=I,N.directionalLightShadows.needsUpdate=I,N.pointLights.needsUpdate=I,N.pointLightShadows.needsUpdate=I,N.spotLights.needsUpdate=I,N.spotLightShadows.needsUpdate=I,N.rectAreaLights.needsUpdate=I,N.hemisphereLights.needsUpdate=I),a&&!0===r.fog&&ae.refreshFogUniforms(O,a),ae.refreshMaterialUniforms(O,r,k,C,G),fs.upload(Ae,v.uniformsList,O,K)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(fs.upload(Ae,v.uniformsList,O,K),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&P.setValue(Ae,"center",n.center),P.setValue(Ae,"modelViewMatrix",n.modelViewMatrix),P.setValue(Ae,"normalMatrix",n.normalMatrix),P.setValue(Ae,"modelMatrix",n.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,i=e.length;t<i;t++)if(X.isWebGL2){const i=e[t];ye.update(i,E),ye.bind(i,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,i,r,n);q.setMaterial(r,s);let l=i.index,c=1;!0===r.wireframe&&(l=ie.getWireframeAttribute(i),c=2);const u=i.drawRange,h=i.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==a&&(d=Math.max(d,a.start*c),f=Math.min(f,(a.start+a.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let m;be.setup(n,r,o,i,l);let b=pe;if(null!==l&&(m=te.get(l),b=me,b.setIndex(m)),n.isMesh)!0===r.wireframe?(q.setLineWidth(r.wireframeLinewidth*$()),b.setMode(Ae.LINES)):b.setMode(Ae.TRIANGLES);else if(n.isLine){let e=r.linewidth;void 0===e&&(e=1),q.setLineWidth(e*$()),n.isLineSegments?b.setMode(Ae.LINES):n.isLineLoop?b.setMode(Ae.LINE_LOOP):b.setMode(Ae.LINE_STRIP)}else n.isPoints?b.setMode(Ae.POINTS):n.isSprite&&b.setMode(Ae.TRIANGLES);if(n.isInstancedMesh)b.renderInstances(d,p,n.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);b.renderInstances(d,p,t)}else b.render(d,p)},this.compile=function(e,t){function i(e,t,i){!0===e.transparent&&e.side===h&&!1===e.forceSinglePass?(e.side=u,e.needsUpdate=!0,Ve(e,t,i),e.side=c,e.needsUpdate=!0,Ve(e,t,i),e.side=h):Ve(e,t,i)}g=oe.get(e),g.init(),v.push(g),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights(_.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let n=0;n<r.length;n++)i(r[n],e,t);else i(r,e,t)})),v.pop(),g=null};let Ce=null;function ke(){De.stop()}function Oe(){De.start()}const De=new Pn;function Ne(e,t,i,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||U.intersectsSprite(e)){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);const t=re.update(e),n=e.material;n.visible&&m.push(e,t,n,i,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||U.intersectsObject(e))){r&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);const t=re.update(e),n=e.material;if(Array.isArray(n)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=n[s.materialIndex];o&&o.visible&&m.push(e,t,o,i,z.z,s)}}else n.visible&&m.push(e,t,n,i,z.z,null)}const n=e.children;for(let e=0,a=n.length;e<a;e++)Ne(n[e],t,i,r)}function Ie(e,t,i,r){const n=e.opaque,a=e.transmissive,o=e.transparent;g.setupLightsView(i),!0===V&&le.setGlobalState(_.clippingPlanes,i),a.length>0&&function(e,t,i){const r=X.isWebGL2;null===G&&(G=new pi(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?_e:de,minFilter:he,samples:r&&!0===s?4:0})),_.getDrawingBufferSize(j),r?G.setSize(j.x,j.y):G.setSize(Ft(j.x),Ft(j.y));const n=_.getRenderTarget();_.setRenderTarget(G),_.clear();const a=_.toneMapping;_.toneMapping=W,Le(e,t,i),_.toneMapping=a,K.updateMultisampleRenderTarget(G),K.updateRenderTargetMipmap(G),_.setRenderTarget(n)}(n,t,i),r&&q.viewport(x.copy(r)),n.length>0&&Le(n,t,i),a.length>0&&Le(a,t,i),o.length>0&&Le(o,t,i),q.buffers.depth.setTest(!0),q.buffers.depth.setMask(!0),q.buffers.color.setMask(!0),q.setPolygonOffset(!1)}function Le(e,t,i){const r=!0===t.isScene?t.overrideMaterial:null;for(let n=0,a=e.length;n<a;n++){const a=e[n],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(i.layers)&&Ue(s,t,i,o,l,c)}}function Ue(e,t,i,r,n,a){e.onBeforeRender(_,t,i,r,n,a),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),n.onBeforeRender(_,t,i,r,e,a),!0===n.transparent&&n.side===h&&!1===n.forceSinglePass?(n.side=u,n.needsUpdate=!0,_.renderBufferDirect(i,t,r,n,e,a),n.side=c,n.needsUpdate=!0,_.renderBufferDirect(i,t,r,n,e,a),n.side=h):_.renderBufferDirect(i,t,r,n,e,a),e.onAfterRender(_,t,i,r,n,a)}function Ve(e,t,i){!0!==t.isScene&&(t=H);const r=J.get(e),n=g.state.lights,a=g.state.shadowsArray,s=n.state.version,o=ne.getParameters(e,n.state,a,t,i),l=ne.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Pe),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Fe(e,o),u}else o.uniforms=ne.getUniforms(e),e.onBuild(i,o,_),e.onBeforeCompile(o,_),u=ne.acquireProgram(o,l),c.set(l,u),r.uniforms=o.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=le.uniform),Fe(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=n.state.ambient,h.lightProbe.value=n.state.probe,h.directionalLights.value=n.state.directional,h.directionalLightShadows.value=n.state.directionalShadow,h.spotLights.value=n.state.spot,h.spotLightShadows.value=n.state.spotShadow,h.rectAreaLights.value=n.state.rectArea,h.ltc_1.value=n.state.rectAreaLTC1,h.ltc_2.value=n.state.rectAreaLTC2,h.pointLights.value=n.state.point,h.pointLightShadows.value=n.state.pointShadow,h.hemisphereLights.value=n.state.hemi,h.directionalShadowMap.value=n.state.directionalShadowMap,h.directionalShadowMatrix.value=n.state.directionalShadowMatrix,h.spotShadowMap.value=n.state.spotShadowMap,h.spotLightMatrix.value=n.state.spotLightMatrix,h.spotLightMap.value=n.state.spotLightMap,h.pointShadowMap.value=n.state.pointShadowMap,h.pointShadowMatrix.value=n.state.pointShadowMatrix);const d=u.getUniforms(),f=fs.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function Fe(e,t){const i=J.get(e);i.outputEncoding=t.outputEncoding,i.instancing=t.instancing,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}De.setAnimationLoop((function(e){Ce&&Ce(e)})),"undefined"!=typeof self&&De.setContext(self),this.setAnimationLoop=function(e){Ce=e,Te.setAnimationLoop(e),null===e?De.stop():De.start()},Te.addEventListener("sessionstart",ke),Te.addEventListener("sessionend",Oe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(t),t=Te.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,w),g=oe.get(e,v.length),g.init(),v.push(g),B.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),U.setFromProjectionMatrix(B),F=this.localClippingEnabled,V=le.init(this.clippingPlanes,F),m=se.get(e,b.length),m.init(),b.push(m),Ne(e,t,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort(O,D),!0===V&&le.beginShadows();const i=g.state.shadowsArray;if(ce.render(i,e,t),!0===V&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(m,e),g.setupLights(_.physicallyCorrectLights),t.isArrayCamera){const i=t.cameras;for(let t=0,r=i.length;t<r;t++){const r=i[t];Ie(m,e,r,r.viewport)}}else Ie(m,e,t);null!==w&&(K.updateMultisampleRenderTarget(w),K.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(_,e,t),be.resetDefaultState(),S=-1,T=null,v.pop(),g=v.length>0?v[v.length-1]:null,b.pop(),m=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,i){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=i;const r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===i,r.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const i=J.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,i=0){w=e,A=t,E=i;let r=!0,n=null,a=!1,s=!1;if(e){const i=J.get(e);void 0!==i.__useDefaultFramebuffer?(q.bindFramebuffer(Ae.FRAMEBUFFER,null),r=!1):void 0===i.__webglFramebuffer?K.setupRenderTarget(e):i.__hasExternalTextures&&K.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);const l=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=l[t],a=!0):n=X.isWebGL2&&e.samples>0&&!1===K.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:l,x.copy(e.viewport),M.copy(e.scissor),R=e.scissorTest}else x.copy(N).multiplyScalar(k).floor(),M.copy(I).multiplyScalar(k).floor(),R=L;if(q.bindFramebuffer(Ae.FRAMEBUFFER,n)&&X.drawBuffers&&r&&q.drawBuffers(e,n),q.viewport(x),q.scissor(M),q.setScissorTest(R),a){const r=J.get(e.texture);Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,i)}else if(s){const r=J.get(e.texture),n=t||0;Ae.framebufferTextureLayer(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,r.__webglTexture,i||0,n)}S=-1},this.readRenderTargetPixels=function(e,t,i,r,n,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){q.bindFramebuffer(Ae.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==Se&&ge.convert(o)!==Ae.getParameter(Ae.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===_e&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(l===de||ge.convert(l)===Ae.getParameter(Ae.IMPLEMENTATION_COLOR_READ_TYPE)||l===ve&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&i>=0&&i<=e.height-n&&Ae.readPixels(t,i,r,n,ge.convert(o),ge.convert(l),a)}finally{const e=null!==w?J.get(w).__webglFramebuffer:null;q.bindFramebuffer(Ae.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,i=0){const r=Math.pow(2,-i),n=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);K.setTexture2D(t,0),Ae.copyTexSubImage2D(Ae.TEXTURE_2D,i,0,0,e.x,e.y,n,a),q.unbindTexture()},this.copyTextureToTexture=function(e,t,i,r=0){const n=t.image.width,a=t.image.height,s=ge.convert(i.format),o=ge.convert(i.type);K.setTexture2D(i,0),Ae.pixelStorei(Ae.UNPACK_FLIP_Y_WEBGL,i.flipY),Ae.pixelStorei(Ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),Ae.pixelStorei(Ae.UNPACK_ALIGNMENT,i.unpackAlignment),t.isDataTexture?Ae.texSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,n,a,s,o,t.image.data):t.isCompressedTexture?Ae.compressedTexSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):Ae.texSubImage2D(Ae.TEXTURE_2D,r,e.x,e.y,s,o,t.image),0===r&&i.generateMipmaps&&Ae.generateMipmap(Ae.TEXTURE_2D),q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,r,n=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ge.convert(r.format),c=ge.convert(r.type);let u;if(r.isData3DTexture)K.setTexture3D(r,0),u=Ae.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");K.setTexture2DArray(r,0),u=Ae.TEXTURE_2D_ARRAY}Ae.pixelStorei(Ae.UNPACK_FLIP_Y_WEBGL,r.flipY),Ae.pixelStorei(Ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Ae.pixelStorei(Ae.UNPACK_ALIGNMENT,r.unpackAlignment);const h=Ae.getParameter(Ae.UNPACK_ROW_LENGTH),d=Ae.getParameter(Ae.UNPACK_IMAGE_HEIGHT),f=Ae.getParameter(Ae.UNPACK_SKIP_PIXELS),p=Ae.getParameter(Ae.UNPACK_SKIP_ROWS),m=Ae.getParameter(Ae.UNPACK_SKIP_IMAGES),g=i.isCompressedTexture?i.mipmaps[0]:i.image;Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,g.width),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,g.height),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,e.min.x),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,e.min.y),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,e.min.z),i.isDataTexture||i.isData3DTexture?Ae.texSubImage3D(u,n,t.x,t.y,t.z,a,s,o,l,c,g.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ae.compressedTexSubImage3D(u,n,t.x,t.y,t.z,a,s,o,l,g.data)):Ae.texSubImage3D(u,n,t.x,t.y,t.z,a,s,o,l,c,g),Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,h),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,d),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,f),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,p),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,m),0===n&&r.generateMipmaps&&Ae.generateMipmap(u),q.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?K.setTextureCube(e,0):e.isData3DTexture?K.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?K.setTexture2DArray(e,0):K.setTexture2D(e,0),q.unbindTexture()},this.resetState=function(){A=0,E=0,w=null,q.reset(),be.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class lo extends oo{}lo.prototype.isWebGL1Renderer=!0;class co{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new si(e),this.density=t}clone(){return new co(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class uo{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new si(e),this.near=t,this.far=i}clone(){return new uo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ho extends _r{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class fo{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Tt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dt()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dt()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const po=new vi;class mo{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)po.fromBufferAttribute(this,t),po.applyMatrix4(e),this.setXYZ(t,po.x,po.y,po.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)po.fromBufferAttribute(this,t),po.applyNormalMatrix(e),this.setXYZ(t,po.x,po.y,po.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)po.fromBufferAttribute(this,t),po.transformDirection(e),this.setXYZ(t,po.x,po.y,po.z);return this}setX(e,t){return this.normalized&&(t=Bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Gt(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Gt(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Gt(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Gt(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array),r=Bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Bt(t,this.array),i=Bt(i,this.array),r=Bt(r,this.array),n=Bt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new Lr(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new mo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class go extends Or{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let bo;const vo=new vi,_o=new vi,yo=new vi,Ao=new zt,Eo=new zt,wo=new Xi,So=new vi,To=new vi,xo=new vi,Mo=new zt,Ro=new zt,Po=new zt;class Co extends _r{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===bo){bo=new Yr;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new fo(e,5);bo.setIndex([0,1,2,0,2,3]),bo.setAttribute("position",new mo(t,3,0,!1)),bo.setAttribute("uv",new mo(t,2,3,!1))}this.geometry=bo,this.material=void 0!==e?e:new go,this.center=new zt(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_o.setFromMatrixScale(this.matrixWorld),wo.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&_o.multiplyScalar(-yo.z);const i=this.material.rotation;let r,n;0!==i&&(n=Math.cos(i),r=Math.sin(i));const a=this.center;ko(So.set(-.5,-.5,0),yo,a,_o,r,n),ko(To.set(.5,-.5,0),yo,a,_o,r,n),ko(xo.set(.5,.5,0),yo,a,_o,r,n),Mo.set(0,0),Ro.set(1,0),Po.set(1,1);let s=e.ray.intersectTriangle(So,To,xo,!1,vo);if(null===s&&(ko(To.set(-.5,.5,0),yo,a,_o,r,n),Ro.set(0,1),s=e.ray.intersectTriangle(So,xo,To,!1,vo),null===s))return;const o=e.ray.origin.distanceTo(vo);o<e.near||o>e.far||t.push({distance:o,point:vo.clone(),uv:Cr.getUV(vo,So,To,xo,Mo,Ro,Po,new zt),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function ko(e,t,i,r,n,a){Ao.subVectors(e,i).addScalar(.5).multiply(r),void 0!==n?(Eo.x=a*Ao.x-n*Ao.y,Eo.y=n*Ao.x+a*Ao.y):Eo.copy(Ao),e.copy(t),e.x+=Eo.x,e.y+=Eo.y,e.applyMatrix4(wo)}const Oo=new vi,Do=new vi;class No extends _r{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,i=t.length;e<i;e++){const i=t[e];this.addLevel(i.object.clone(),i.distance,i.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let n;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Oo.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Oo);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Oo.setFromMatrixPosition(e.matrixWorld),Do.setFromMatrixPosition(this.matrixWorld);const i=Oo.distanceTo(Do)/e.zoom;let r,n;for(t[0].object.visible=!0,r=1,n=t.length;r<n;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(i>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<n;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let e=0,r=i.length;e<r;e++){const r=i[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const Io=new vi,Lo=new fi,Uo=new fi,Vo=new vi,Fo=new Xi;class Go extends ln{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xi,this.bindMatrixInverse=new Xi}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fi,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Lo.fromBufferAttribute(r.attributes.skinIndex,e),Uo.fromBufferAttribute(r.attributes.skinWeight,e),Io.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Uo.getComponent(e);if(0!==r){const n=Lo.getComponent(e);Fo.multiplyMatrices(i.bones[n].matrixWorld,i.boneInverses[n]),t.addScaledVector(Vo.copy(Io).applyMatrix4(Fo),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Bo extends _r{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jo extends di{constructor(e=null,t=1,i=1,r,n,a,s,o,l=se,c=se,u,h){super(null,a,s,o,l,c,r,n,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zo=new Xi,Ho=new Xi;class Wo{constructor(e=[],t=[]){this.uuid=Dt(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Xi)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Xi;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let r=0,n=e.length;r<n;r++){const n=e[r]?e[r].matrixWorld:Ho;zo.multiplyMatrices(n,t[r]),zo.toArray(i,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Wo(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Vt(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new jo(t,e,e,Se,ve);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const r=e.bones[i];let n=t[r];void 0===n&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),n=new Bo),this.bones.push(n),this.boneInverses.push((new Xi).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,n=t.length;r<n;r++){const n=t[r];e.bones.push(n.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class $o extends Lr{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Yo=new Xi,Xo=new Xi,qo=[],Zo=new Xi,Jo=new ln;class Ko extends ln{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $o(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let e=0;e<i;e++)this.setMatrixAt(e,Zo)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Jo.geometry=this.geometry,Jo.material=this.material,void 0!==Jo.material)for(let n=0;n<r;n++){this.getMatrixAt(n,Yo),Xo.multiplyMatrices(i,Yo),Jo.matrixWorld=Xo,Jo.raycast(e,qo);for(let e=0,i=qo.length;e<i;e++){const i=qo[e];i.instanceId=n,i.object=this,t.push(i)}qo.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new $o(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Qo extends Or{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new si(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const el=new vi,tl=new vi,il=new Xi,rl=new Yi,nl=new Fi;class al extends _r{constructor(e=new Yr,t=new Qo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,r=t.count;e<r;e++)el.fromBufferAttribute(t,e-1),tl.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=el.distanceTo(tl);e.setAttribute("lineDistance",new Fr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,n=e.params.Line.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),nl.copy(i.boundingSphere),nl.applyMatrix4(r),nl.radius+=n,!1===e.ray.intersectsSphere(nl))return;il.copy(r).invert(),rl.copy(e.ray).applyMatrix4(il);const s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new vi,c=new vi,u=new vi,h=new vi,d=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(null!==f)for(let i=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;i<r;i+=d){const r=f.getX(i),n=f.getX(i+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,n),rl.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(h);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}else for(let i=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;i<r;i+=d){if(l.fromBufferAttribute(p,i),c.fromBufferAttribute(p,i+1),rl.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const sl=new vi,ol=new vi;class ll extends al{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,r=t.count;e<r;e+=2)sl.fromBufferAttribute(t,e),ol.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+sl.distanceTo(ol);e.setAttribute("lineDistance",new Fr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class cl extends al{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ul extends Or{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new si(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const hl=new Xi,dl=new Yi,fl=new Fi,pl=new vi;class ml extends _r{constructor(e=new Yr,t=new ul){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,n=e.params.Points.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),fl.copy(i.boundingSphere),fl.applyMatrix4(r),fl.radius+=n,!1===e.ray.intersectsSphere(fl))return;hl.copy(r).invert(),dl.copy(e.ray).applyMatrix4(hl);const s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=i.index,c=i.attributes.position;if(null!==l)for(let i=Math.max(0,a.start),n=Math.min(l.count,a.start+a.count);i<n;i++){const n=l.getX(i);pl.fromBufferAttribute(c,n),gl(pl,n,o,r,e,t,this)}else for(let i=Math.max(0,a.start),n=Math.min(c.count,a.start+a.count);i<n;i++)pl.fromBufferAttribute(c,i),gl(pl,i,o,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function gl(e,t,i,r,n,a,s){const o=dl.distanceSqToPoint(e);if(o<i){const i=new vi;dl.closestPointToPoint(e,i),i.applyMatrix4(r);const l=n.ray.origin.distanceTo(i);if(l<n.near||l>n.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:s})}}class bl extends di{constructor(e,t,i,r,n,a,s,o,l,c,u,h){super(null,a,s,o,l,c,r,n,u,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class vl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),n+=i.distanceTo(r),t.push(n),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const n=i.length;let a;a=t||e*i[n-1];let s,o=0,l=n-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=i[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,i[r]===a)return r/(n-1);const c=i[r];return(r+(a-c)/(i[r+1]-c))/(n-1)}getTangent(e,t){const i=1e-4;let r=e-i,n=e+i;r<0&&(r=0),n>1&&(n=1);const a=this.getPoint(r),s=this.getPoint(n),o=t||(a.isVector2?new zt:new vi);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new vi,r=[],n=[],a=[],s=new vi,o=new Xi;for(let t=0;t<=e;t++){const i=t/e;r[t]=this.getTangentAt(i,new vi)}n[0]=new vi,a[0]=new vi;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],s),a[0].crossVectors(r[0],n[0]);for(let t=1;t<=e;t++){if(n[t]=n[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(r[t-1],r[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Nt(r[t-1].dot(r[t]),-1,1));n[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(r[t],n[t])}if(!0===t){let t=Math.acos(Nt(n[0].dot(n[e]),-1,1));t/=e,r[0].dot(s.crossVectors(n[0],n[e]))>0&&(t=-t);for(let i=1;i<=e;i++)n[i].applyMatrix4(o.makeRotationAxis(r[i],t*i)),a[i].crossVectors(r[i],n[i])}return{tangents:r,normals:n,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _l extends vl{constructor(e=0,t=0,i=1,r=1,n=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const i=t||new zt,r=2*Math.PI;let n=this.aEndAngle-this.aStartAngle;const a=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(n=a?0:r),!0!==this.aClockwise||a||(n===r?n=-r:n-=r);const s=this.aStartAngle+e*n;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,r=l-this.aY;o=i*e-r*t+this.aX,l=i*t+r*e+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class yl extends _l{constructor(e,t,i,r,n,a){super(e,t,i,i,r,n,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Al(){let e=0,t=0,i=0,r=0;function n(n,a,s,o){e=n,t=s,i=-3*n+3*a-2*s-o,r=2*n-2*a+s+o}return{initCatmullRom:function(e,t,i,r,a){n(t,i,a*(i-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,i,r,a,s,o){let l=(t-e)/a-(i-e)/(a+s)+(i-t)/s,c=(i-t)/s-(r-t)/(s+o)+(r-i)/o;l*=s,c*=s,n(t,i,l,c)},calc:function(n){const a=n*n;return e+t*n+i*a+r*(a*n)}}}const El=new vi,wl=new Al,Sl=new Al,Tl=new Al;class xl extends vl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new vi){const i=t,r=this.points,n=r.length,a=(n-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/n)+1)*n:0===c&&l===n-1&&(l=n-2,c=1),this.closed||l>0?s=r[(l-1)%n]:(El.subVectors(r[0],r[1]).add(r[0]),s=El);const u=r[l%n],h=r[(l+1)%n];if(this.closed||l+2<n?o=r[(l+2)%n]:(El.subVectors(r[n-1],r[n-2]).add(r[n-1]),o=El),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),r<1e-4&&(r=i),wl.initNonuniformCatmullRom(s.x,u.x,h.x,o.x,t,i,r),Sl.initNonuniformCatmullRom(s.y,u.y,h.y,o.y,t,i,r),Tl.initNonuniformCatmullRom(s.z,u.z,h.z,o.z,t,i,r)}else"catmullrom"===this.curveType&&(wl.initCatmullRom(s.x,u.x,h.x,o.x,this.tension),Sl.initCatmullRom(s.y,u.y,h.y,o.y,this.tension),Tl.initCatmullRom(s.z,u.z,h.z,o.z,this.tension));return i.set(wl.calc(c),Sl.calc(c),Tl.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new vi).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ml(e,t,i,r,n){const a=.5*(r-t),s=.5*(n-i),o=e*e;return(2*i-2*r+a+s)*(e*o)+(-3*i+3*r-2*a-s)*o+a*e+i}function Rl(e,t,i,r){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,r)}function Pl(e,t,i,r,n){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,n)}class Cl extends vl{constructor(e=new zt,t=new zt,i=new zt,r=new zt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new zt){const i=t,r=this.v0,n=this.v1,a=this.v2,s=this.v3;return i.set(Pl(e,r.x,n.x,a.x,s.x),Pl(e,r.y,n.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kl extends vl{constructor(e=new vi,t=new vi,i=new vi,r=new vi){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new vi){const i=t,r=this.v0,n=this.v1,a=this.v2,s=this.v3;return i.set(Pl(e,r.x,n.x,a.x,s.x),Pl(e,r.y,n.y,a.y,s.y),Pl(e,r.z,n.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ol extends vl{constructor(e=new zt,t=new zt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new zt){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new zt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dl extends vl{constructor(e=new vi,t=new vi){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new vi){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nl extends vl{constructor(e=new zt,t=new zt,i=new zt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new zt){const i=t,r=this.v0,n=this.v1,a=this.v2;return i.set(Rl(e,r.x,n.x,a.x),Rl(e,r.y,n.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Il extends vl{constructor(e=new vi,t=new vi,i=new vi){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new vi){const i=t,r=this.v0,n=this.v1,a=this.v2;return i.set(Rl(e,r.x,n.x,a.x),Rl(e,r.y,n.y,a.y),Rl(e,r.z,n.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ll extends vl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new zt){const i=t,r=this.points,n=(r.length-1)*e,a=Math.floor(n),s=n-a,o=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return i.set(Ml(s,o.x,l.x,c.x,u.x),Ml(s,o.y,l.y,c.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new zt).fromArray(i))}return this}}var Ul=Object.freeze({__proto__:null,ArcCurve:yl,CatmullRomCurve3:xl,CubicBezierCurve:Cl,CubicBezierCurve3:kl,EllipseCurve:_l,LineCurve:Ol,LineCurve3:Dl,QuadraticBezierCurve:Nl,QuadraticBezierCurve3:Il,SplineCurve:Ll});class Vl extends vl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ol(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let n=0;for(;n<r.length;){if(r[n]>=i){const e=r[n]-i,a=this.curves[n],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}n++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,n=this.curves;r<n.length;r++){const a=n[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const r=o[e];i&&i.equals(r)||(t.push(r),i=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new Ul[i.type]).fromJSON(i))}return this}}class Fl extends Vl{constructor(e){super(),this.type="Path",this.currentPoint=new zt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ol(this.currentPoint.clone(),new zt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const n=new Nl(this.currentPoint.clone(),new zt(e,t),new zt(i,r));return this.curves.push(n),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,n,a){const s=new Cl(this.currentPoint.clone(),new zt(e,t),new zt(i,r),new zt(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Ll(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,n,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,r,n,a),this}absarc(e,t,i,r,n,a){return this.absellipse(e,t,i,i,r,n,a),this}ellipse(e,t,i,r,n,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,r,n,a,s,o),this}absellipse(e,t,i,r,n,a,s,o){const l=new _l(e,t,i,r,n,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gl extends Yr{constructor(e=[new zt(0,-.5),new zt(.5,0),new zt(0,.5)],t=12,i=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Nt(r,0,2*Math.PI);const n=[],a=[],s=[],o=[],l=[],c=1/t,u=new vi,h=new zt,d=new vi,f=new vi,p=new vi;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let n=0;n<=t;n++){const d=i+n*c*r,f=Math.sin(d),p=Math.cos(d);for(let i=0;i<=e.length-1;i++){u.x=e[i].x*f,u.y=e[i].y,u.z=e[i].x*p,a.push(u.x,u.y,u.z),h.x=n/t,h.y=i/(e.length-1),s.push(h.x,h.y);const r=o[3*i+0]*f,c=o[3*i+1],d=o[3*i+0]*p;l.push(r,c,d)}}for(let i=0;i<t;i++)for(let t=0;t<e.length-1;t++){const r=t+i*e.length,a=r,s=r+e.length,o=r+e.length+1,l=r+1;n.push(a,s,l),n.push(o,l,s)}this.setIndex(n),this.setAttribute("position",new Fr(a,3)),this.setAttribute("uv",new Fr(s,2)),this.setAttribute("normal",new Fr(l,3))}static fromJSON(e){return new Gl(e.points,e.segments,e.phiStart,e.phiLength)}}class Bl extends Gl{constructor(e=1,t=1,i=4,r=8){const n=new Fl;n.absarc(0,-t/2,e,1.5*Math.PI,0),n.absarc(0,t/2,e,0,.5*Math.PI),super(n.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Bl(e.radius,e.length,e.capSegments,e.radialSegments)}}class jl extends Yr{constructor(e=1,t=32,i=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const n=[],a=[],s=[],o=[],l=new vi,c=new zt;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let n=0,u=3;n<=t;n++,u+=3){const h=i+n/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)n.push(e,e+1,0);this.setIndex(n),this.setAttribute("position",new Fr(a,3)),this.setAttribute("normal",new Fr(s,3)),this.setAttribute("uv",new Fr(o,2))}static fromJSON(e){return new jl(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zl extends Yr{constructor(e=1,t=1,i=1,r=32,n=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};const l=this;r=Math.floor(r),n=Math.floor(n);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=i/2;let g=0;function b(i){const n=f,a=new zt,p=new vi;let b=0;const v=!0===i?e:t,_=!0===i?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),f++;const y=f;for(let e=0;e<=r;e++){const t=e/r*o+s,i=Math.cos(t),n=Math.sin(t);p.x=v*n,p.y=m*_,p.z=v*i,u.push(p.x,p.y,p.z),h.push(0,_,0),a.x=.5*i+.5,a.y=.5*n*_+.5,d.push(a.x,a.y),f++}for(let e=0;e<r;e++){const t=n+e,r=y+e;!0===i?c.push(r,r+1,t):c.push(r+1,r,t),b+=3}l.addGroup(g,b,!0===i?1:2),g+=b}!function(){const a=new vi,b=new vi;let v=0;const _=(t-e)/i;for(let l=0;l<=n;l++){const c=[],g=l/n,v=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,n=t*o+s,l=Math.sin(n),p=Math.cos(n);b.x=v*l,b.y=-g*i+m,b.z=v*p,u.push(b.x,b.y,b.z),a.set(l,_,p).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<n;t++){const i=p[t][e],r=p[t+1][e],n=p[t+1][e+1],a=p[t][e+1];c.push(i,r,a),c.push(r,n,a),v+=6}l.addGroup(g,v,0),g+=v}(),!1===a&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(c),this.setAttribute("position",new Fr(u,3)),this.setAttribute("normal",new Fr(h,3)),this.setAttribute("uv",new Fr(d,2))}static fromJSON(e){return new zl(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hl extends zl{constructor(e=1,t=1,i=32,r=1,n=!1,a=0,s=2*Math.PI){super(0,e,t,i,r,n,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}static fromJSON(e){return new Hl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wl extends Yr{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const n=[],a=[];function s(e,t,i,r){const n=r+1,a=[];for(let r=0;r<=n;r++){a[r]=[];const s=e.clone().lerp(i,r/n),o=t.clone().lerp(i,r/n),l=n-r;for(let e=0;e<=l;e++)a[r][e]=0===e&&r===n?s:s.clone().lerp(o,e/l)}for(let e=0;e<n;e++)for(let t=0;t<2*(n-e)-1;t++){const i=Math.floor(t/2);t%2==0?(o(a[e][i+1]),o(a[e+1][i]),o(a[e][i])):(o(a[e][i+1]),o(a[e+1][i+1]),o(a[e+1][i]))}}function o(e){n.push(e.x,e.y,e.z)}function l(t,i){const r=3*t;i.x=e[r+0],i.y=e[r+1],i.z=e[r+2]}function c(e,t,i,r){r<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new vi,r=new vi,n=new vi;for(let a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],r),l(t[a+2],n),s(i,r,n,e)}(r),function(e){const t=new vi;for(let i=0;i<n.length;i+=3)t.x=n[i+0],t.y=n[i+1],t.z=n[i+2],t.normalize().multiplyScalar(e),n[i+0]=t.x,n[i+1]=t.y,n[i+2]=t.z}(i),function(){const e=new vi;for(let i=0;i<n.length;i+=3){e.x=n[i+0],e.y=n[i+1],e.z=n[i+2];const r=u(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(r,1-s)}var t;(function(){const e=new vi,t=new vi,i=new vi,r=new vi,s=new zt,o=new zt,l=new zt;for(let h=0,d=0;h<n.length;h+=9,d+=6){e.set(n[h+0],n[h+1],n[h+2]),t.set(n[h+3],n[h+4],n[h+5]),i.set(n[h+6],n[h+7],n[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),r.copy(e).add(t).add(i).divideScalar(3);const f=u(r);c(s,d+0,e,f),c(o,d+2,t,f),c(l,d+4,i,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],i=a[e+2],r=a[e+4],n=Math.max(t,i,r),s=Math.min(t,i,r);n>.9&&s<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Fr(n,3)),this.setAttribute("normal",new Fr(n.slice(),3)),this.setAttribute("uv",new Fr(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Wl(e.vertices,e.indices,e.radius,e.details)}}class $l extends Wl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $l(e.radius,e.detail)}}const Yl=new vi,Xl=new vi,ql=new vi,Zl=new Cr;class Jl extends Yr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const i=4,r=Math.pow(10,i),n=Math.cos(kt*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:i,c:o}=Zl;if(t.fromBufferAttribute(s,l[0]),i.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),Zl.getNormal(ql),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(i.x*r)},${Math.round(i.y*r)},${Math.round(i.z*r)}`,u[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=u[e],r=u[t],a=Zl[c[e]],s=Zl[c[t]],o=`${i}_${r}`,f=`${r}_${i}`;f in h&&h[f]?(ql.dot(h[f].normal)<=n&&(d.push(a.x,a.y,a.z),d.push(s.x,s.y,s.z)),h[f]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:ql.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:i}=h[e];Yl.fromBufferAttribute(s,t),Xl.fromBufferAttribute(s,i),d.push(Yl.x,Yl.y,Yl.z),d.push(Xl.x,Xl.y,Xl.z)}this.setAttribute("position",new Fr(d,3))}}}class Kl extends Fl{constructor(e){super(e),this.uuid=Dt(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new Fl).fromJSON(i))}return this}}function Ql(e,t,i,r,n){let a,s;if(n===function(e,t,i,r){let n=0;for(let a=t,s=i-r;a<i;a+=r)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}(e,t,i,r)>0)for(a=t;a<i;a+=r)s=yc(a,e[a],e[a+1],s);else for(a=i-r;a>=t;a-=r)s=yc(a,e[a],e[a+1],s);return s&&pc(s,s.next)&&(Ac(s),s=s.next),s}function ec(e,t){if(!e)return e;t||(t=e);let i,r=e;do{if(i=!1,r.steiner||!pc(r,r.next)&&0!==fc(r.prev,r,r.next))r=r.next;else{if(Ac(r),r=t=r.prev,r===r.next)break;i=!0}}while(i||r!==t);return t}function tc(e,t,i,r,n,a,s){if(!e)return;!s&&a&&function(e,t,i,r){let n=e;do{0===n.z&&(n.z=cc(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,i,r,n,a,s,o,l,c=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,r=i,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,c*=2}while(s>1)}(n)}(e,r,n,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?rc(e,r,n,a):ic(e))t.push(o.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),Ac(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?tc(e=nc(ec(e),t,i),t,i,r,n,a,2):2===s&&ac(e,t,i,r,n,a):tc(ec(e),t,i,r,n,a,1);break}}function ic(e){const t=e.prev,i=e,r=e.next;if(fc(t,i,r)>=0)return!1;const n=t.x,a=i.x,s=r.x,o=t.y,l=i.y,c=r.y,u=n<a?n<s?n:s:a<s?a:s,h=o<l?o<c?o:c:l<c?l:c,d=n>a?n>s?n:s:a>s?a:s,f=o>l?o>c?o:c:l>c?l:c;let p=r.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&hc(n,o,a,l,s,c,p.x,p.y)&&fc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function rc(e,t,i,r){const n=e.prev,a=e,s=e.next;if(fc(n,a,s)>=0)return!1;const o=n.x,l=a.x,c=s.x,u=n.y,h=a.y,d=s.y,f=o<l?o<c?o:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,b=cc(f,p,t,i,r),v=cc(m,g,t,i,r);let _=e.prevZ,y=e.nextZ;for(;_&&_.z>=b&&y&&y.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==s&&hc(o,u,l,h,c,d,_.x,_.y)&&fc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==n&&y!==s&&hc(o,u,l,h,c,d,y.x,y.y)&&fc(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;_&&_.z>=b;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==n&&_!==s&&hc(o,u,l,h,c,d,_.x,_.y)&&fc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=v;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==n&&y!==s&&hc(o,u,l,h,c,d,y.x,y.y)&&fc(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function nc(e,t,i){let r=e;do{const n=r.prev,a=r.next.next;!pc(n,a)&&mc(n,r,r.next,a)&&vc(n,a)&&vc(a,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(a.i/i|0),Ac(r),Ac(r.next),r=e=a),r=r.next}while(r!==e);return ec(r)}function ac(e,t,i,r,n,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&dc(s,e)){let o=_c(s,e);return s=ec(s,s.next),o=ec(o,o.next),tc(s,t,i,r,n,a,0),void tc(o,t,i,r,n,a,0)}e=e.next}s=s.next}while(s!==e)}function sc(e,t){return e.x-t.x}function oc(e,t){const i=function(e,t){let i,r=t,n=-1/0;const a=e.x,s=e.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const e=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=a&&e>n&&(n=e,i=r.x<r.next.x?r:r.next,e===a))return i}r=r.next}while(r!==t);if(!i)return null;const o=i,l=i.x,c=i.y;let u,h=1/0;r=i;do{a>=r.x&&r.x>=l&&a!==r.x&&hc(s<c?a:n,s,l,c,s<c?n:a,s,r.x,r.y)&&(u=Math.abs(s-r.y)/(a-r.x),vc(r,e)&&(u<h||u===h&&(r.x>i.x||r.x===i.x&&lc(i,r)))&&(i=r,h=u)),r=r.next}while(r!==o);return i}(e,t);if(!i)return t;const r=_c(i,e);return ec(r,r.next),ec(i,i.next)}function lc(e,t){return fc(e.prev,e,t.prev)<0&&fc(t.next,e,e.next)<0}function cc(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function uc(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function hc(e,t,i,r,n,a,s,o){return(n-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(i-s)*(t-o)&&(i-s)*(a-o)>=(n-s)*(r-o)}function dc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&mc(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(vc(e,t)&&vc(t,e)&&function(e,t){let i=e,r=!1;const n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(fc(e.prev,e,t.prev)||fc(e,t.prev,t))||pc(e,t)&&fc(e.prev,e,e.next)>0&&fc(t.prev,t,t.next)>0)}function fc(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function pc(e,t){return e.x===t.x&&e.y===t.y}function mc(e,t,i,r){const n=bc(fc(e,t,i)),a=bc(fc(e,t,r)),s=bc(fc(i,r,e)),o=bc(fc(i,r,t));return n!==a&&s!==o||!(0!==n||!gc(e,i,t))||!(0!==a||!gc(e,r,t))||!(0!==s||!gc(i,e,r))||!(0!==o||!gc(i,t,r))}function gc(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function bc(e){return e>0?1:e<0?-1:0}function vc(e,t){return fc(e.prev,e,e.next)<0?fc(e,t,e.next)>=0&&fc(e,e.prev,t)>=0:fc(e,t,e.prev)<0||fc(e,e.next,t)<0}function _c(e,t){const i=new Ec(e.i,e.x,e.y),r=new Ec(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function yc(e,t,i,r){const n=new Ec(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Ac(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ec(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class wc{static area(e){const t=e.length;let i=0;for(let r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i}static isClockWise(e){return wc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],n=[];Sc(e),Tc(i,e);let a=e.length;t.forEach(Sc);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,Tc(i,t[e]);const s=function(e,t,i=2){const r=t&&t.length,n=r?t[0]*i:e.length;let a=Ql(e,0,n,i,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,h,d,f;if(r&&(a=function(e,t,i,r){const n=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=Ql(e,o,l,r,!1),c===c.next&&(c.steiner=!0),n.push(uc(c));for(n.sort(sc),a=0;a<n.length;a++)i=oc(n[a],i);return i}(e,t,a,i)),e.length>80*i){o=c=e[0],l=u=e[1];for(let t=i;t<n;t+=i)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=0!==f?32767/f:0}return tc(a,s,i,o,l,f,0),s}(i,r);for(let e=0;e<s.length;e+=3)n.push(s.slice(e,e+3));return n}}function Sc(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Tc(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class xc extends Yr{constructor(e=new Kl([new zt(.5,.5),new zt(-.5,.5),new zt(-.5,-.5),new zt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],n=[];for(let t=0,i=e.length;t<i;t++)a(e[t]);function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Mc;let g,b,v,_,y,A=!1;p&&(g=p.getSpacedPoints(o),A=!0,c=!1,b=p.computeFrenetFrames(o,!1),v=new vi,_=new vi,y=new vi),c||(f=0,u=0,h=0,d=0);const E=e.extractPoints(s);let w=E.shape;const S=E.holes;if(!wc.isClockWise(w)){w=w.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];wc.isClockWise(t)&&(S[e]=t.reverse())}}const T=wc.triangulateShape(w,S),x=w;for(let e=0,t=S.length;e<t;e++){const t=S[e];w=w.concat(t)}function M(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}const R=w.length,P=T.length;function C(e,t,i){let r,n,a;const s=e.x-t.x,o=e.y-t.y,l=i.x-e.x,c=i.y-e.y,u=s*s+o*o,h=s*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-o/h,p=t.y+s/h,m=((i.x-c/d-f)*c-(i.y+l/d-p)*l)/(s*c-o*l);r=f+s*m-e.x,n=p+o*m-e.y;const g=r*r+n*n;if(g<=2)return new zt(r,n);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,n=s,a=Math.sqrt(u)):(r=s,n=o,a=Math.sqrt(u/2))}return new zt(r/a,n/a)}const k=[];for(let e=0,t=x.length,i=t-1,r=e+1;e<t;e++,i++,r++)i===t&&(i=0),r===t&&(r=0),k[e]=C(x[e],x[i],x[r]);const O=[];let D,N=k.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];D=[];for(let e=0,i=t.length,r=i-1,n=e+1;e<i;e++,r++,n++)r===i&&(r=0),n===i&&(n=0),D[e]=C(t[e],t[r],t[n]);O.push(D),N=N.concat(D)}for(let e=0;e<f;e++){const t=e/f,i=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=x.length;e<t;e++){const t=M(x[e],k[e],r);U(t.x,t.y,-i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=O[e];for(let e=0,n=t.length;e<n;e++){const n=M(t[e],D[e],r);U(n.x,n.y,-i)}}}const I=h+d;for(let e=0;e<R;e++){const t=c?M(w[e],N[e],I):w[e];A?(_.copy(b.normals[0]).multiplyScalar(t.x),v.copy(b.binormals[0]).multiplyScalar(t.y),y.copy(g[0]).add(_).add(v),U(y.x,y.y,y.z)):U(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<R;t++){const i=c?M(w[t],N[t],I):w[t];A?(_.copy(b.normals[e]).multiplyScalar(i.x),v.copy(b.binormals[e]).multiplyScalar(i.y),y.copy(g[e]).add(_).add(v),U(y.x,y.y,y.z)):U(i.x,i.y,l/o*e)}for(let e=f-1;e>=0;e--){const t=e/f,i=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=x.length;e<t;e++){const t=M(x[e],k[e],r);U(t.x,t.y,l+i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];D=O[e];for(let e=0,n=t.length;e<n;e++){const n=M(t[e],D[e],r);A?U(n.x,n.y+g[o-1].y,g[o-1].x+i):U(n.x,n.y,l+i)}}}function L(e,t){let i=e.length;for(;--i>=0;){const r=i;let n=i-1;n<0&&(n=e.length-1);for(let e=0,i=o+2*f;e<i;e++){const i=R*e,a=R*(e+1);F(t+r+i,t+n+i,t+n+a,t+r+a)}}}function U(e,t,i){a.push(e),a.push(t),a.push(i)}function V(e,t,n){G(e),G(t),G(n);const a=r.length/3,s=m.generateTopUV(i,r,a-3,a-2,a-1);B(s[0]),B(s[1]),B(s[2])}function F(e,t,n,a){G(e),G(t),G(a),G(t),G(n),G(a);const s=r.length/3,o=m.generateSideWallUV(i,r,s-6,s-3,s-2,s-1);B(o[0]),B(o[1]),B(o[3]),B(o[1]),B(o[2]),B(o[3])}function G(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function B(e){n.push(e.x),n.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=R*e;for(let e=0;e<P;e++){const i=T[e];V(i[2]+t,i[1]+t,i[0]+t)}e=o+2*f,t=R*e;for(let e=0;e<P;e++){const i=T[e];V(i[0]+t,i[1]+t,i[2]+t)}}else{for(let e=0;e<P;e++){const t=T[e];V(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=T[e];V(t[0]+R*o,t[1]+R*o,t[2]+R*o)}}i.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;L(x,t),t+=x.length;for(let e=0,i=S.length;e<i;e++){const i=S[e];L(i,t),t+=i.length}i.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Fr(r,3)),this.setAttribute("uv",new Fr(n,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];i.shapes.push(r.uuid)}else i.shapes.push(e.uuid);return i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let r=0,n=e.shapes.length;r<n;r++){const n=t[e.shapes[r]];i.push(n)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Ul[r.type]).fromJSON(r)),new xc(i,e.options)}}const Mc={generateTopUV:function(e,t,i,r,n){const a=t[3*i],s=t[3*i+1],o=t[3*r],l=t[3*r+1],c=t[3*n],u=t[3*n+1];return[new zt(a,s),new zt(o,l),new zt(c,u)]},generateSideWallUV:function(e,t,i,r,n,a){const s=t[3*i],o=t[3*i+1],l=t[3*i+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*n],f=t[3*n+1],p=t[3*n+2],m=t[3*a],g=t[3*a+1],b=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new zt(s,1-l),new zt(c,1-h),new zt(d,1-p),new zt(m,1-b)]:[new zt(o,1-l),new zt(u,1-h),new zt(f,1-p),new zt(g,1-b)]}};class Rc extends Wl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rc(e.radius,e.detail)}}class Pc extends Wl{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pc(e.radius,e.detail)}}class Cc extends Yr{constructor(e=.5,t=1,i=32,r=1,n=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},i=Math.max(3,i);const s=[],o=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new vi,f=new zt;for(let e=0;e<=r;e++){for(let e=0;e<=i;e++){const r=n+e/i*a;d.x=u*Math.cos(r),d.y=u*Math.sin(r),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let e=0;e<r;e++){const t=e*(i+1);for(let e=0;e<i;e++){const r=e+t,n=r,a=r+i+1,o=r+i+2,l=r+1;s.push(n,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Fr(o,3)),this.setAttribute("normal",new Fr(l,3)),this.setAttribute("uv",new Fr(c,2))}static fromJSON(e){return new Cc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class kc extends Yr{constructor(e=new Kl([new zt(0,.5),new zt(-.5,-.5),new zt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],n=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===wc.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===wc.isClockWise(t)&&(u[e]=t.reverse())}const h=wc.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),n.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+s,n=t[1]+s,a=t[2]+s;i.push(r,n,a),o+=3}}this.setIndex(i),this.setAttribute("position",new Fr(r,3)),this.setAttribute("normal",new Fr(n,3)),this.setAttribute("uv",new Fr(a,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const r=e[i];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let r=0,n=e.shapes.length;r<n;r++){const n=t[e.shapes[r]];i.push(n)}return new kc(i,e.curveSegments)}}class Oc extends Yr{constructor(e=1,t=32,i=16,r=0,n=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new vi,h=new vi,d=[],f=[],p=[],m=[];for(let d=0;d<=i;d++){const g=[],b=d/i;let v=0;0==d&&0==a?v=.5/t:d==i&&o==Math.PI&&(v=-.5/t);for(let i=0;i<=t;i++){const o=i/t;u.x=-e*Math.cos(r+o*n)*Math.sin(a+b*s),u.y=e*Math.cos(a+b*s),u.z=e*Math.sin(r+o*n)*Math.sin(a+b*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+v,1-b),g.push(l++)}c.push(g)}for(let e=0;e<i;e++)for(let r=0;r<t;r++){const t=c[e][r+1],n=c[e][r],s=c[e+1][r],l=c[e+1][r+1];(0!==e||a>0)&&d.push(t,n,l),(e!==i-1||o<Math.PI)&&d.push(n,s,l)}this.setIndex(d),this.setAttribute("position",new Fr(f,3)),this.setAttribute("normal",new Fr(p,3)),this.setAttribute("uv",new Fr(m,2))}static fromJSON(e){return new Oc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Dc extends Wl{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Dc(e.radius,e.detail)}}class Nc extends Yr{constructor(e=1,t=.4,i=12,r=48,n=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},i=Math.floor(i),r=Math.floor(r);const a=[],s=[],o=[],l=[],c=new vi,u=new vi,h=new vi;for(let a=0;a<=i;a++)for(let d=0;d<=r;d++){const f=d/r*n,p=a/i*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),s.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(d/r),l.push(a/i)}for(let e=1;e<=i;e++)for(let t=1;t<=r;t++){const i=(r+1)*e+t-1,n=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,o=(r+1)*e+t;a.push(i,n,o),a.push(n,s,o)}this.setIndex(a),this.setAttribute("position",new Fr(s,3)),this.setAttribute("normal",new Fr(o,3)),this.setAttribute("uv",new Fr(l,2))}static fromJSON(e){return new Nc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ic extends Yr{constructor(e=1,t=.4,i=64,r=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},i=Math.floor(i),r=Math.floor(r);const s=[],o=[],l=[],c=[],u=new vi,h=new vi,d=new vi,f=new vi,p=new vi,m=new vi,g=new vi;for(let s=0;s<=i;++s){const v=s/i*n*Math.PI*2;b(v,n,a,e,d),b(v+.01,n,a,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const n=e/r*Math.PI*2,a=-t*Math.cos(n),f=t*Math.sin(n);u.x=d.x+(a*g.x+f*p.x),u.y=d.y+(a*g.y+f*p.y),u.z=d.z+(a*g.z+f*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(s/i),c.push(e/r)}}for(let e=1;e<=i;e++)for(let t=1;t<=r;t++){const i=(r+1)*(e-1)+(t-1),n=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;s.push(i,n,o),s.push(n,a,o)}function b(e,t,i,r,n){const a=Math.cos(e),s=Math.sin(e),o=i/t*e,l=Math.cos(o);n.x=r*(2+l)*.5*a,n.y=r*(2+l)*s*.5,n.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Fr(o,3)),this.setAttribute("normal",new Fr(l,3)),this.setAttribute("uv",new Fr(c,2))}static fromJSON(e){return new Ic(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Lc extends Yr{constructor(e=new Il(new vi(-1,-1,0),new vi(-1,1,0),new vi(1,1,0)),t=64,i=1,r=8,n=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n};const a=e.computeFrenetFrames(t,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new vi,o=new vi,l=new zt;let c=new vi;const u=[],h=[],d=[],f=[];function p(n){c=e.getPointAt(n/t,c);const l=a.normals[n],d=a.binormals[n];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,n=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+n*d.x,o.y=a*l.y+n*d.y,o.z=a*l.z+n*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=c.x+i*o.x,s.y=c.y+i*o.y,s.z=c.z+i*o.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===n?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=r;i++)l.x=e/t,l.y=i/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const i=(r+1)*(e-1)+(t-1),n=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;f.push(i,n,s),f.push(n,a,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Fr(u,3)),this.setAttribute("normal",new Fr(h,3)),this.setAttribute("uv",new Fr(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Lc((new Ul[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Uc extends Yr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],i=new Set,r=new vi,n=new vi;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=s.getX(e+o),c=s.getX(e+(o+1)%3);r.fromBufferAttribute(a,l),n.fromBufferAttribute(a,c),!0===Vc(r,n,i)&&(t.push(r.x,r.y,r.z),t.push(n.x,n.y,n.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let s=0;s<3;s++){const o=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(a,o),n.fromBufferAttribute(a,l),!0===Vc(r,n,i)&&(t.push(r.x,r.y,r.z),t.push(n.x,n.y,n.z))}}this.setAttribute("position",new Fr(t,3))}}}function Vc(e,t,i){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,n=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==i.has(r)&&!0!==i.has(n)&&(i.add(r),i.add(n),!0)}var Fc=Object.freeze({__proto__:null,BoxGeometry:un,CapsuleGeometry:Bl,CircleGeometry:jl,ConeGeometry:Hl,CylinderGeometry:zl,DodecahedronGeometry:$l,EdgesGeometry:Jl,ExtrudeGeometry:xc,IcosahedronGeometry:Rc,LatheGeometry:Gl,OctahedronGeometry:Pc,PlaneGeometry:kn,PolyhedronGeometry:Wl,RingGeometry:Cc,ShapeGeometry:kc,SphereGeometry:Oc,TetrahedronGeometry:Dc,TorusGeometry:Nc,TorusKnotGeometry:Ic,TubeGeometry:Lc,WireframeGeometry:Uc});class Gc extends Or{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new si(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Bc extends mn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class jc extends Or{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new si(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zc extends jc{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Nt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new si(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new si(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new si(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Hc extends Or{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new si(16777215),this.specular=new si(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=j,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wc extends Or{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new si(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class $c extends Or{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Yc extends Or{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new si(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=j,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xc extends Or{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new si(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qc extends Qo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zc(e,t,i){return Kc(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)}function Jc(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Kc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Qc(e){const t=e.length,i=new Array(t);for(let e=0;e!==t;++e)i[e]=e;return i.sort((function(t,i){return e[t]-e[i]})),i}function eu(e,t,i){const r=e.length,n=new e.constructor(r);for(let a=0,s=0;s!==r;++a){const r=i[a]*t;for(let i=0;i!==t;++i)n[s++]=e[r+i]}return n}function tu(e,t,i,r){let n=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[n++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(t.push(a.time),i.push.apply(i,s)),a=e[n++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(t.push(a.time),s.toArray(i,i.length)),a=e[n++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(t.push(a.time),i.push(s)),a=e[n++]}while(void 0!==a)}var iu=Object.freeze({__proto__:null,arraySlice:Zc,convertArray:Jc,flattenJSON:tu,getKeyframeOrder:Qc,isTypedArray:Kc,makeClipAdditive:function(e,t=0,i=e,r=30){r<=0&&(r=30);const n=i.tracks.length,a=t/r;for(let t=0;t<n;++t){const r=i.tracks[t],n=r.ValueTypeName;if("bool"===n||"string"===n)continue;const s=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===n}));if(void 0===s)continue;let o=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=r.times.length-1;let d;if(a<=r.times[0]){const e=o,t=l-o;d=Zc(r.values,e,t)}else if(a>=r.times[h]){const e=h*l+o,t=e+l-o;d=Zc(r.values,e,t)}else{const e=r.createInterpolant(),t=o,i=l-o;e.evaluate(a),d=Zc(e.resultBuffer,t,i)}"quaternion"===n&&(new bi).fromArray(d).normalize().conjugate().toArray(d);const f=s.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===n)bi.multiplyQuaternionsFlat(s.values,t,d,0,s.values,t);else{const e=u-2*c;for(let i=0;i<e;++i)s.values[t+i]-=d[i]}}}return e.blendMode=gt,e},sortedArray:eu,subclip:function(e,t,i,r,n=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*n;if(!(a<i||a>=r)){l.push(t.times[e]);for(let i=0;i<o;++i)c.push(t.values[e*o+i])}}0!==l.length&&(t.times=Jc(l,t.times.constructor),t.values=Jc(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a}});class ru{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{let a;i:{r:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(n=r,r=t[++i],e<r)break t}a=t.length;break i}if(e>=n)break e;{const s=t[1];e<s&&(i=2,n=s);for(let a=i-2;;){if(void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(i===a)break;if(r=n,n=t[--i-1],e>=n)break t}a=i,i=0}}for(;i<a;){const r=i+a>>>1;e<t[r]?a=r:i=r+1}if(r=t[i],n=t[i-1],void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r;for(let e=0;e!==r;++e)t[e]=i[n+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class nu extends ru{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ft,endingEnd:ft}}intervalChanged_(e,t,i){const r=this.parameterPositions;let n=e-2,a=e+1,s=r[n],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case pt:n=e,s=2*t-i;break;case mt:n=r.length-2,s=t+r[n]-r[n+1];break;default:n=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case pt:a=e,o=2*i-t;break;case mt:a=1,o=i+r[1]-r[0];break;default:a=e-1,o=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=n*c,this._offsetNext=a*c}interpolate_(e,t,i,r){const n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(i-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,b=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,v=(-1-d)*m+(1.5+d)*p+.5*f,_=d*m-d*p;for(let e=0;e!==s;++e)n[e]=g*a[c+e]+b*a[l+e]+v*a[o+e]+_*a[u+e];return n}}class au extends ru{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(i-t)/(r-t),u=1-c;for(let e=0;e!==s;++e)n[e]=a[l+e]*u+a[o+e]*c;return n}}class su extends ru{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ou{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jc(t,this.TimeBufferType),this.values=Jc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Jc(e.times,Array),values:Jc(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new su(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new au(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nu(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ut:t=this.InterpolantFactoryMethodDiscrete;break;case ht:t=this.InterpolantFactoryMethodLinear;break;case dt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ut;case this.InterpolantFactoryMethodLinear:return ht;case this.InterpolantFactoryMethodSmooth:return dt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let n=0,a=r-1;for(;n!==r&&i[n]<e;)++n;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==n||a!==r){n>=a&&(a=Math.max(a,1),n=a-1);const e=this.getValueSize();this.times=Zc(i,n,a),this.values=Zc(this.values,n*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==n;t++){const r=i[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&Kc(r))for(let t=0,i=r.length;t!==i;++t){const i=r[t];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,i),e=!1;break}}return e}optimize(){const e=Zc(this.times),t=Zc(this.values),i=this.getValueSize(),r=this.getInterpolation()===dt,n=e.length-1;let a=1;for(let s=1;s<n;++s){let n=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)n=!0;else{const e=s*i,r=e-i,a=e+i;for(let s=0;s!==i;++s){const i=t[e+s];if(i!==t[r+s]||i!==t[a+s]){n=!0;break}}}if(n){if(s!==a){e[a]=e[s];const r=s*i,n=a*i;for(let e=0;e!==i;++e)t[n+e]=t[r+e]}++a}}if(n>0){e[a]=e[n];for(let e=n*i,r=a*i,s=0;s!==i;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=Zc(e,0,a),this.values=Zc(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=Zc(this.times,0),t=Zc(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ou.prototype.TimeBufferType=Float32Array,ou.prototype.ValueBufferType=Float32Array,ou.prototype.DefaultInterpolation=ht;class lu extends ou{}lu.prototype.ValueTypeName="bool",lu.prototype.ValueBufferType=Array,lu.prototype.DefaultInterpolation=ut,lu.prototype.InterpolantFactoryMethodLinear=void 0,lu.prototype.InterpolantFactoryMethodSmooth=void 0;class cu extends ou{}cu.prototype.ValueTypeName="color";class uu extends ou{}uu.prototype.ValueTypeName="number";class hu extends ru{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(r-t);let l=e*s;for(let e=l+s;l!==e;l+=4)bi.slerpFlat(n,0,a,l-s,a,l,o);return n}}class du extends ou{InterpolantFactoryMethodLinear(e){return new hu(this.times,this.values,this.getValueSize(),e)}}du.prototype.ValueTypeName="quaternion",du.prototype.DefaultInterpolation=ht,du.prototype.InterpolantFactoryMethodSmooth=void 0;class fu extends ou{}fu.prototype.ValueTypeName="string",fu.prototype.ValueBufferType=Array,fu.prototype.DefaultInterpolation=ut,fu.prototype.InterpolantFactoryMethodLinear=void 0,fu.prototype.InterpolantFactoryMethodSmooth=void 0;class pu extends ou{}pu.prototype.ValueTypeName="vector";class mu{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Dt(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let e=0,n=i.length;e!==n;++e)t.push(gu(i[e]).scale(r));const n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=i.length;e!==r;++e)t.push(ou.toJSON(i[e]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const n=t.length,a=[];for(let e=0;e<n;e++){let s=[],o=[];s.push((e+n-1)%n,e,(e+1)%n),o.push(0,1,0);const l=Qc(s);s=eu(s,1,l),o=eu(o,1,l),r||0!==s[0]||(s.push(n),o.push(o[0])),a.push(new uu(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},n=/^([\w-]*?)([\d]+)$/;for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.name.match(n);if(a&&a.length>1){const e=a[1];let t=r[e];t||(r[e]=t=[]),t.push(i)}}const a=[];for(const e in r)a.push(this.CreateFromMorphTargetSequence(e,r[e],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,r,n){if(0!==i.length){const a=[],s=[];tu(i,a,s,r),0!==a.length&&n.push(new e(t,a,s))}},r=[],n=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const n=l[e].keys;if(n&&0!==n.length)if(n[0].morphTargets){const e={};let t;for(t=0;t<n.length;t++)if(n[t].morphTargets)for(let i=0;i<n[t].morphTargets.length;i++)e[n[t].morphTargets[i]]=-1;for(const i in e){const e=[],a=[];for(let r=0;r!==n[t].morphTargets.length;++r){const r=n[t];e.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new uu(".morphTargetInfluence["+i+"]",e,a))}o=e.length*a}else{const a=".bones["+t[e].name+"]";i(pu,a+".position",n,"pos",r),i(du,a+".quaternion",n,"rot",r),i(pu,a+".scale",n,"scl",r)}}return 0===r.length?null:new this(n,o,r,s)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function gu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return uu;case"vector":case"vector2":case"vector3":case"vector4":return pu;case"color":return cu;case"quaternion":return du;case"bool":case"boolean":return lu;case"string":return fu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];tu(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const bu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class vu{constructor(e,t,i){const r=this;let n,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return n?n(e):e},this.setURLModifier=function(e){return n=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],r=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}}}const _u=new vu;class yu{constructor(e){this.manager=void 0!==e?e:_u,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(r,n){i.load(e,r,t,n)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Au={};class Eu extends Error{constructor(e,t){super(e),this.response=t}}class wu extends yu{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const n=bu.get(e);if(void 0!==n)return this.manager.itemStart(e),setTimeout((()=>{t&&t(n),this.manager.itemEnd(e)}),0),n;if(void 0!==Au[e])return void Au[e].push({onLoad:t,onProgress:i,onError:r});Au[e]=[],Au[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=Au[e],r=t.body.getReader(),n=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=n?parseInt(n):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:n})=>{if(r)e.close();else{o+=n.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(r)}e.enqueue(n),t()}}))}()}});return new Response(l)}throw new Eu(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),i=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(i);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{bu.add(e,t);const i=Au[e];delete Au[e];for(let e=0,r=i.length;e<r;e++){const r=i[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const i=Au[e];if(void 0===i)throw this.manager.itemError(e),t;delete Au[e];for(let e=0,r=i.length;e<r;e++){const r=i[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Su extends yu{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const n=this,a=bu.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout((function(){t&&t(a),n.manager.itemEnd(e)}),0),a;const s=qt("img");function o(){c(),bu.add(e,this),t&&t(this),n.manager.itemEnd(e)}function l(t){c(),r&&r(t),n.manager.itemError(e),n.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),n.manager.itemStart(e),s.src=e,s}}class Tu extends _r{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new si(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class xu extends Tu{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_r.DEFAULT_UP),this.updateMatrix(),this.groundColor=new si(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Mu=new Xi,Ru=new vi,Pu=new vi;class Cu{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zt(512,512),this.map=null,this.mapPass=null,this.matrix=new Xi,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rn,this._frameExtents=new zt(1,1),this._viewportCount=1,this._viewports=[new fi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Ru.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ru),Pu.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Pu),t.updateMatrixWorld(),Mu.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mu),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Mu)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ku extends Cu{constructor(){super(new bn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ot*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;i===t.fov&&r===t.aspect&&n===t.far||(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Ou extends Tu{constructor(e,t,i=0,r=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_r.DEFAULT_UP),this.updateMatrix(),this.target=new _r,this.distance=i,this.angle=r,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new ku}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Du=new Xi,Nu=new vi,Iu=new vi;class Lu extends Cu{constructor(){super(new bn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zt(4,2),this._viewportCount=6,this._viewports=[new fi(2,1,1,1),new fi(0,1,1,1),new fi(3,1,1,1),new fi(1,1,1,1),new fi(3,0,1,1),new fi(1,0,1,1)],this._cubeDirections=[new vi(1,0,0),new vi(-1,0,0),new vi(0,0,1),new vi(0,0,-1),new vi(0,1,0),new vi(0,-1,0)],this._cubeUps=[new vi(0,1,0),new vi(0,1,0),new vi(0,1,0),new vi(0,1,0),new vi(0,0,1),new vi(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),Nu.setFromMatrixPosition(e.matrixWorld),i.position.copy(Nu),Iu.copy(i.position),Iu.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Iu),i.updateMatrixWorld(),r.makeTranslation(-Nu.x,-Nu.y,-Nu.z),Du.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Du)}}class Uu extends Tu{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Lu}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Vu extends Cu{constructor(){super(new jn(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fu extends Tu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_r.DEFAULT_UP),this.updateMatrix(),this.target=new _r,this.shadow=new Vu}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Gu extends Tu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Bu extends Tu{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ju{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new vi)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,n=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*n),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],i*r*1.092548),t.addScaledVector(a[5],r*n*1.092548),t.addScaledVector(a[6],.315392*(3*n*n-1)),t.addScaledVector(a[7],i*n*1.092548),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,n=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*n),t.addScaledVector(a[3],1.023328*i),t.addScaledVector(a[4],.858086*i*r),t.addScaledVector(a[5],.858086*r*n),t.addScaledVector(a[6],.743125*n*n-.247708),t.addScaledVector(a[7],.858086*i*n),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const i=e.x,r=e.y,n=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*n,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*n,t[6]=.315392*(3*n*n-1),t[7]=1.092548*i*n,t[8]=.546274*(i*i-r*r)}}class zu extends Tu{constructor(e=new ju,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Hu extends yu{constructor(e){super(e),this.textures={}}load(e,t,i,r){const n=this,a=new wu(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,(function(i){try{t(n.parse(JSON.parse(i)))}catch(t){r?r(t):console.error(t),n.manager.itemError(e)}}),i,r)}parse(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=Hu.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new si).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const n=e.uniforms[t];switch(r.uniforms[t]={},n.type){case"t":r.uniforms[t].value=i(n.value);break;case"c":r.uniforms[t].value=(new si).setHex(n.value);break;case"v2":r.uniforms[t].value=(new zt).fromArray(n.value);break;case"v3":r.uniforms[t].value=(new vi).fromArray(n.value);break;case"v4":r.uniforms[t].value=(new fi).fromArray(n.value);break;case"m3":r.uniforms[t].value=(new Ht).fromArray(n.value);break;case"m4":r.uniforms[t].value=(new Xi).fromArray(n.value);break;default:r.uniforms[t].value=n.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new zt).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new zt).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Gc,SpriteMaterial:go,RawShaderMaterial:Bc,ShaderMaterial:mn,PointsMaterial:ul,MeshPhysicalMaterial:zc,MeshStandardMaterial:jc,MeshPhongMaterial:Hc,MeshToonMaterial:Wc,MeshNormalMaterial:$c,MeshLambertMaterial:Yc,MeshDepthMaterial:Ws,MeshDistanceMaterial:$s,MeshBasicMaterial:Dr,MeshMatcapMaterial:Xc,LineDashedMaterial:qc,LineBasicMaterial:Qo,Material:Or}[e]}}class Wu{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $u extends Yr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Yu extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=new wu(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,(function(i){try{t(n.parse(JSON.parse(i)))}catch(t){r?r(t):console.error(t),n.manager.itemError(e)}}),i,r)}parse(e){const t={},i={};function r(e,r){if(void 0!==t[r])return t[r];const n=e.interleavedBuffers[r],a=function(e,t){if(void 0!==i[t])return i[t];const r=e.arrayBuffers[t],n=new Uint32Array(r).buffer;return i[t]=n,n}(e,n.buffer),s=Xt(n.type,a),o=new fo(s,n.stride);return o.uuid=n.uuid,t[r]=o,o}const n=e.isInstancedBufferGeometry?new $u:new Yr,a=e.data.index;if(void 0!==a){const e=Xt(a.type,a.array);n.setIndex(new Lr(e,1))}const s=e.data.attributes;for(const t in s){const i=s[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new mo(t,i.itemSize,i.offset,i.normalized)}else{const e=Xt(i.type,i.array);a=new(i.isInstancedBufferAttribute?$o:Lr)(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),void 0!==i.usage&&a.setUsage(i.usage),void 0!==i.updateRange&&(a.updateRange.offset=i.updateRange.offset,a.updateRange.count=i.updateRange.count),n.setAttribute(t,a)}const o=e.data.morphAttributes;if(o)for(const t in o){const i=o[t],a=[];for(let t=0,n=i.length;t<n;t++){const n=i[t];let s;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);s=new mo(t,n.itemSize,n.offset,n.normalized)}else{const e=Xt(n.type,n.array);s=new Lr(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),a.push(s)}n.morphAttributes[t]=a}e.data.morphTargetsRelative&&(n.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];n.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new vi;void 0!==c.center&&e.fromArray(c.center),n.boundingSphere=new Fi(e,c.radius)}return e.name&&(n.name=e.name),e.userData&&(n.userData=e.userData),n}}const Xu={UVMapping:J,CubeReflectionMapping:K,CubeRefractionMapping:Q,EquirectangularReflectionMapping:ee,EquirectangularRefractionMapping:te,CubeUVReflectionMapping:ie},qu={RepeatWrapping:re,ClampToEdgeWrapping:ne,MirroredRepeatWrapping:ae},Zu={NearestFilter:se,NearestMipmapNearestFilter:oe,NearestMipmapLinearFilter:le,LinearFilter:ce,LinearMipmapNearestFilter:ue,LinearMipmapLinearFilter:he};let Ju;class Ku{static getContext(){return void 0===Ju&&(Ju=new(window.AudioContext||window.webkitAudioContext)),Ju}static setContext(e){Ju=e}}const Qu=new Xi,eh=new Xi,th=new Xi;class ih{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rh();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rh(){return("undefined"==typeof performance?Date:performance).now()}const nh=new vi,ah=new bi,sh=new vi,oh=new vi;class lh extends _r{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ch=new vi,uh=new bi,hh=new vi,dh=new vi;class fh{constructor(e,t,i){let r,n,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":r=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,n=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)i[n+e]=i[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(i,n,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){const e=t*this._origIndex;this._mixBufferRegion(i,r,e,1-n,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let e=t,n=t+t;e!==n;++e)if(i[e]!==i[e+t]){s.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let e=i,n=r;e!==n;++e)t[e]=t[r+e%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,n){if(r>=.5)for(let r=0;r!==n;++r)e[t+r]=e[i+r]}_slerp(e,t,i,r){bi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,n){const a=this._workIndex*n;bi.multiplyQuaternionsFlat(e,a,e,t,e,i),bi.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,n){const a=1-r;for(let s=0;s!==n;++s){const n=t+s;e[n]=e[n]*a+e[i+s]*r}}_lerpAdditive(e,t,i,r,n){for(let a=0;a!==n;++a){const n=t+a;e[n]=e[n]+e[i+a]*r}}}const ph="\\[\\]\\.:\\/",mh=new RegExp("["+ph+"]","g"),gh="[^"+ph+"]",bh="[^"+ph.replace("\\.","")+"]",vh=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",gh)+/(WCOD+)?/.source.replace("WCOD",bh)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gh)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gh)+"$"),_h=["material","materials","bones","map"];class yh{constructor(e,t,i){this.path=t,this.parsedPath=i||yh.parseTrackName(t),this.node=yh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new yh.Composite(e,t,i):new yh(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mh,"")}static parseTrackName(e){const t=vh.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=i.nodeName.substring(r+1);-1!==_h.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let r=0;r<e.length;r++){const n=e[r];if(n.name===t||n.uuid===t)return n;const a=i(n.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let n=t.propertyIndex;if(e||(e=yh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let r=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[n]&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yh.Composite=class{constructor(e,t,i){const r=i||yh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},yh.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},yh.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},yh.prototype.GetterByBindingType=[yh.prototype._getValue_direct,yh.prototype._getValue_array,yh.prototype._getValue_arrayElement,yh.prototype._getValue_toArray],yh.prototype.SetterByBindingTypeAndVersioning=[[yh.prototype._setValue_direct,yh.prototype._setValue_direct_setNeedsUpdate,yh.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yh.prototype._setValue_array,yh.prototype._setValue_array_setNeedsUpdate,yh.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yh.prototype._setValue_arrayElement,yh.prototype._setValue_arrayElement_setNeedsUpdate,yh.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yh.prototype._setValue_fromArray,yh.prototype._setValue_fromArray_setNeedsUpdate,yh.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ah{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const n=t.tracks,a=n.length,s=new Array(a),o={endingStart:ft,endingEnd:ft};for(let e=0;e!==a;++e){const t=n[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,r=e._clip.duration,n=r/i,a=i/r;e.warp(1,n,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,n=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=n,o[1]=n+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled)return void this._updateWeight(e);const n=this._startTime;if(null!==n){const r=(e-n)*i;r<0||0===i?t=0:(this._startTime=null,t=i*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===gt)for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(a),t[i].accumulateAdditive(s);else for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(a),t[i].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,n=this._loopCount;const a=2202===i;if(0===e)return-1===n?r:a&&1==(1&n)?t-r:r;if(2200===i){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const i=Math.floor(r/t);r-=t*i,n+=Math.abs(i);const s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=r;if(a&&1==(1&n))return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=pt,r.endingEnd=pt):(r.endingStart=e?this.zeroSlopeAtStart?pt:ft:mt,r.endingEnd=t?this.zeroSlopeAtEnd?pt:ft:mt)}_scheduleFading(e,t,i){const r=this._mixer,n=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=n,o[0]=t,s[1]=n+e,o[1]=i,this}}const Eh=new Float32Array(1);class wh{constructor(e){this.value=e}clone(){return new wh(void 0===this.value.clone?this.value:this.value.clone())}}let Sh=0;function Th(e,t){return e.distance-t.distance}function xh(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===r){const r=e.children;for(let e=0,n=r.length;e<n;e++)xh(r[e],t,i,!0)}}const Mh=new zt,Rh=new vi,Ph=new vi,Ch=new vi,kh=new vi,Oh=new Xi,Dh=new Xi;function Nh(e){const t=[];!0===e.isBone&&t.push(e);for(let i=0;i<e.children.length;i++)t.push.apply(t,Nh(e.children[i]));return t}const Ih=new vi,Lh=new si,Uh=new si,Vh=new vi,Fh=new vi,Gh=new vi,Bh=new vi,jh=new gn;function zh(e,t,i,r,n,a,s){Bh.set(n,a,s).unproject(r);const o=t[e];if(void 0!==o){const e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],Bh.x,Bh.y,Bh.z)}}const Hh=new Ai,Wh=new vi;let $h,Yh;const Xh=qh();function qh(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),n=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,n[e]=24,n[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,n[e]=-t-1,n[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,n[e]=13,n[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,n[e]=24,n[256|e]=24):(r[e]=31744,r[256|e]=64512,n[e]=13,n[256|e]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;0==(8388608&t);)t<<=1,i-=8388608;t&=-8388609,i+=947912704,a[e]=t|i}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=1199570944,s[32]=2147483648;for(let e=33;e<63;++e)s[e]=2147483648+(e-32<<23);s[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:n,mantissaTable:a,exponentTable:s,offsetTable:o}}var Zh=Object.freeze({__proto__:null,fromHalfFloat:function(e){const t=e>>10;return Xh.uint32View[0]=Xh.mantissaTable[Xh.offsetTable[t]+(1023&e)]+Xh.exponentTable[t],Xh.floatView[0]},toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Nt(e,-65504,65504),Xh.floatView[0]=e;const t=Xh.uint32View[0],i=t>>23&511;return Xh.baseTable[i]+((8388607&t)>>Xh.shiftTable[i])}});"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i),t.ACESFilmicToneMapping=q,t.AddEquation=v,t.AddOperation=H,t.AdditiveAnimationBlendMode=gt,t.AdditiveBlending=p,t.AlphaFormat=we,t.AlwaysDepth=I,t.AlwaysStencilFunc=519,t.AmbientLight=Gu,t.AmbientLightProbe=class extends zu{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=(new si).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}},t.AnimationClip=mu,t.AnimationLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=new wu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{t(n.parse(JSON.parse(i)))}catch(t){r?r(t):console.error(t),n.manager.itemError(e)}}),i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=mu.parse(e[i]);t.push(r)}return t}},t.AnimationMixer=class extends Rt{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==n;++e){const n=r[e],l=n.name;let u=c[l];if(void 0!==u)++u.referenceCount,a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new fh(yh.create(i,l,r),n.ValueTypeName,n.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),a[e]=u}s[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,n=this._actionsByClip;let a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,n=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[i]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[n],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new au(new Float32Array(2),new Float32Array(2),1,Eh),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r,t[r]=e,n.__cacheIndex=i,t[i]=n}clipAction(e,t,i){const r=t||this._root,n=r.uuid;let a="string"==typeof e?mu.findByName(r,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:2500),void 0!==o){const e=o.actionByRoot[n];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Ah(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,n),c}existingAction(e,t){const i=t||this._root,r=i.uuid,n="string"==typeof e?mu.findByName(i,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==i;++s)t[s]._update(r,e,n,a);const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(void 0!==n){const e=n.knownActions;for(let i=0,r=e.length;i!==r;++i){const r=e[i];this._deactivateAction(r);const n=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=n,t[n]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const e in i){const r=i[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}},t.AnimationObjectGroup=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Dt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,n=this._bindings,a=n.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)n[e].push(new yh(u,i[e],r[e]))}else if(d<l){s=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=n[e],a=t[o];let s=t[d];t[d]=a,void 0===s&&(s=new yh(u,i[e],r[e])),t[o]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let n=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=n){const a=n++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=r;e!==t;++e){const t=i[e],r=t[a],n=t[l];t[l]=r,t[a]=n}}}this.nCachedObjects_=n}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let n=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<n){const s=--n,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=i[e],r=t[s],n=t[c];t[l]=r,t[s]=n,t.pop()}}else{const n=--a,s=e[n];n>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=i[e];t[l]=t[n],t.pop()}}}this.nCachedObjects_=n}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const n=this._bindings;if(void 0!==r)return n[r];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);r=n.length,i[e]=r,a.push(e),s.push(t),n.push(u);for(let i=c,r=o.length;i!==r;++i){const r=o[i];u[i]=new yh(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const r=this._paths,n=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=i,a[i]=o,a.pop(),n[i]=n[s],n.pop(),r[i]=r[s],r.pop()}}},t.AnimationUtils=iu,t.ArcCurve=yl,t.ArrayCamera=Qs,t.ArrowHelper=class extends _r{constructor(e=new vi(0,0,1),t=new vi(0,0,0),i=1,r=16776960,n=.2*i,a=.2*n){super(),this.type="ArrowHelper",void 0===$h&&($h=new Yr,$h.setAttribute("position",new Fr([0,0,0,0,1,0],3)),Yh=new zl(0,.5,1,5,1),Yh.translate(0,-.5,0)),this.position.copy(t),this.line=new al($h,new Qo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ln(Yh,new Dr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Wh.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Wh,t)}}setLength(e,t=.2*e,i=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},t.Audio=lh,t.AudioAnalyser=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}},t.AudioContext=Ku,t.AudioListener=class extends _r{constructor(){super(),this.type="AudioListener",this.context=Ku.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ih}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nh,ah,sh),oh.set(0,0,-1).applyQuaternion(ah),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(nh.x,e),t.positionY.linearRampToValueAtTime(nh.y,e),t.positionZ.linearRampToValueAtTime(nh.z,e),t.forwardX.linearRampToValueAtTime(oh.x,e),t.forwardY.linearRampToValueAtTime(oh.y,e),t.forwardZ.linearRampToValueAtTime(oh.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(nh.x,nh.y,nh.z),t.setOrientation(oh.x,oh.y,oh.z,i.x,i.y,i.z)}},t.AudioLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=new wu(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{const e=i.slice(0);Ku.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),n.manager.itemError(e)}}),i,r)}},t.AxesHelper=class extends ll{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Yr;i.setAttribute("position",new Fr(t,3)),i.setAttribute("color",new Fr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new Qo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new si,n=this.geometry.attributes.color.array;return r.set(e),r.toArray(n,0),r.toArray(n,3),r.set(t),r.toArray(n,6),r.toArray(n,9),r.set(i),r.toArray(n,12),r.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BackSide=u,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.Bone=Bo,t.BooleanKeyframeTrack=lu,t.Box2=class{constructor(e=new zt(1/0,1/0),t=new zt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Mh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Mh.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},t.Box3=Ai,t.Box3Helper=class extends ll{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Yr;r.setIndex(new Lr(i,1)),r.setAttribute("position",new Fr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Qo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BoxBufferGeometry=class extends un{constructor(e,t,i,r,n,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,n,a)}},t.BoxGeometry=un,t.BoxHelper=class extends ll{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new Yr;n.setIndex(new Lr(i,1)),n.setAttribute("position",new Lr(r,3)),super(n,new Qo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Hh.setFromObject(this.object),Hh.isEmpty())return;const t=Hh.min,i=Hh.max,r=this.geometry.attributes.position,n=r.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=t.x,n[4]=i.y,n[5]=i.z,n[6]=t.x,n[7]=t.y,n[8]=i.z,n[9]=i.x,n[10]=t.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=t.z,n[15]=t.x,n[16]=i.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=i.x,n[22]=t.y,n[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BufferAttribute=Lr,t.BufferGeometry=Yr,t.BufferGeometryLoader=Yu,t.ByteType=fe,t.Cache=bu,t.Camera=gn,t.CameraHelper=class extends ll{constructor(e){const t=new Yr,i=new Qo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],a={};function s(e,t){o(e),o(t)}function o(e){r.push(0,0,0),n.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Fr(r,3)),t.setAttribute("color",new Fr(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new si(16755200),c=new si(16711680),u=new si(43775),h=new si(16777215),d=new si(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,i,r,n){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;jh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),zh("c",t,e,jh,0,0,-1),zh("t",t,e,jh,0,0,1),zh("n1",t,e,jh,-1,-1,-1),zh("n2",t,e,jh,1,-1,-1),zh("n3",t,e,jh,-1,1,-1),zh("n4",t,e,jh,1,1,-1),zh("f1",t,e,jh,-1,-1,1),zh("f2",t,e,jh,1,-1,1),zh("f3",t,e,jh,-1,1,1),zh("f4",t,e,jh,1,1,1),zh("u1",t,e,jh,.7,1.1,-1),zh("u2",t,e,jh,-.7,1.1,-1),zh("u3",t,e,jh,0,2,-1),zh("cf1",t,e,jh,-1,0,1),zh("cf2",t,e,jh,1,0,1),zh("cf3",t,e,jh,0,-1,1),zh("cf4",t,e,jh,0,1,1),zh("cn1",t,e,jh,-1,0,-1),zh("cn2",t,e,jh,1,0,-1),zh("cn3",t,e,jh,0,-1,-1),zh("cn4",t,e,jh,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},t.CanvasTexture=class extends di{constructor(e,t,i,r,n,a,s,o,l){super(e,t,i,r,n,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},t.CapsuleBufferGeometry=class extends Bl{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}},t.CapsuleGeometry=Bl,t.CatmullRomCurve3=xl,t.CineonToneMapping=X,t.CircleBufferGeometry=class extends jl{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}},t.CircleGeometry=jl,t.ClampToEdgeWrapping=ne,t.Clock=ih,t.Color=si,t.ColorKeyframeTrack=cu,t.ColorManagement=Qt,t.CompressedArrayTexture=class extends bl{constructor(e,t,i,r,n,a){super(e,t,i,n,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ne}},t.CompressedTexture=bl,t.CompressedTextureLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=[],s=new bl,o=new wu(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(n.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const i=n.parse(e,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(s.minFilter=ce),s.image=a,s.format=i.format,s.needsUpdate=!0,t&&t(s))}),i,r)}if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)c(t);else o.load(e,(function(e){const i=n.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)a[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),a[t].format=i.format,a[t].width=i.width,a[t].height=i.height}s.image=a}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=ce),s.format=i.format,s.needsUpdate=!0,t&&t(s)}),i,r);return s}},t.ConeBufferGeometry=class extends Hl{constructor(e,t,i,r,n,a,s){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,n,a,s)}},t.ConeGeometry=Hl,t.CubeCamera=_n,t.CubeReflectionMapping=K,t.CubeRefractionMapping=Q,t.CubeTexture=yn,t.CubeTextureLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=new yn,a=new Su(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(i){a.load(e[i],(function(e){n.images[i]=e,s++,6===s&&(n.needsUpdate=!0,t&&t(n))}),void 0,r)}for(let t=0;t<e.length;++t)o(t);return n}},t.CubeUVReflectionMapping=ie,t.CubicBezierCurve=Cl,t.CubicBezierCurve3=kl,t.CubicInterpolant=nu,t.CullFaceBack=n,t.CullFaceFront=a,t.CullFaceFrontBack=3,t.CullFaceNone=r,t.Curve=vl,t.CurvePath=Vl,t.CustomBlending=b,t.CustomToneMapping=Z,t.CylinderBufferGeometry=class extends zl{constructor(e,t,i,r,n,a,s,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,n,a,s,o)}},t.CylinderGeometry=zl,t.Cylindrical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}},t.Data3DTexture=gi,t.DataArrayTexture=mi,t.DataTexture=jo,t.DataTextureLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=new jo,s=new wu(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(n.withCredentials),s.load(e,(function(e){const i=n.parse(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:ne,a.wrapT=void 0!==i.wrapT?i.wrapT:ne,a.magFilter=void 0!==i.magFilter?i.magFilter:ce,a.minFilter=void 0!==i.minFilter?i.minFilter:ce,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.encoding&&(a.encoding=i.encoding),void 0!==i.flipY&&(a.flipY=i.flipY),void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=he),1===i.mipmapCount&&(a.minFilter=ce),void 0!==i.generateMipmaps&&(a.generateMipmaps=i.generateMipmaps),a.needsUpdate=!0,t&&t(a,i))}),i,r),a}},t.DataUtils=Zh,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=_u,t.DepthFormat=Me,t.DepthStencilFormat=Re,t.DepthTexture=ro,t.DirectionalLight=Fu,t.DirectionalLightHelper=class extends _r{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Yr;r.setAttribute("position",new Fr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const n=new Qo({fog:!1,toneMapped:!1});this.lightPlane=new al(r,n),this.add(this.lightPlane),r=new Yr,r.setAttribute("position",new Fr([0,0,0,0,0,1],3)),this.targetLine=new al(r,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Vh.setFromMatrixPosition(this.light.matrixWorld),Fh.setFromMatrixPosition(this.light.target.matrixWorld),Gh.subVectors(Fh,Vh),this.lightPlane.lookAt(Fh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fh),this.targetLine.scale.z=Gh.length()}},t.DiscreteInterpolant=su,t.DodecahedronBufferGeometry=class extends $l{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}},t.DodecahedronGeometry=$l,t.DoubleSide=h,t.DstAlphaFactor=P,t.DstColorFactor=k,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=Jl,t.EllipseCurve=_l,t.EqualDepth=V,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=ee,t.EquirectangularRefractionMapping=te,t.Euler=nr,t.EventDispatcher=Rt,t.ExtrudeBufferGeometry=class extends xc{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}},t.ExtrudeGeometry=xc,t.FileLoader=wu,t.Float16BufferAttribute=class extends Lr{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}},t.Float32BufferAttribute=Fr,t.Float64BufferAttribute=class extends Lr{constructor(e,t,i){super(new Float64Array(e),t,i)}},t.FloatType=ve,t.Fog=uo,t.FogExp2=co,t.FramebufferTexture=class extends di{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=se,this.minFilter=se,this.generateMipmaps=!1,this.needsUpdate=!0}},t.FrontSide=c,t.Frustum=Rn,t.GLBufferAttribute=class{constructor(e,t,i,r,n){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=n,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},t.GLSL1="100",t.GLSL3=xt,t.GreaterDepth=G,t.GreaterEqualDepth=F,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=class extends ll{constructor(e=10,t=10,i=4473924,r=8947848){i=new si(i),r=new si(r);const n=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,u=-s;e<=t;e++,u+=a){o.push(-s,0,u,s,0,u),o.push(u,0,-s,u,0,s);const t=e===n?i:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Yr;c.setAttribute("position",new Fr(o,3)),c.setAttribute("color",new Fr(l,3)),super(c,new Qo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},t.Group=eo,t.HalfFloatType=_e,t.HemisphereLight=xu,t.HemisphereLightHelper=class extends _r{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Pc(t);r.rotateY(.5*Math.PI),this.material=new Dr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const n=r.getAttribute("position"),a=new Float32Array(3*n.count);r.setAttribute("color",new Lr(a,3)),this.add(new ln(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Lh.copy(this.light.color),Uh.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const r=e<i/2?Lh:Uh;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Ih.setFromMatrixPosition(this.light.matrixWorld).negate())}},t.HemisphereLightProbe=class extends zu{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=(new si).set(e),n=(new si).set(t),a=new vi(r.r,r.g,r.b),s=new vi(n.r,n.g,n.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}},t.IcosahedronBufferGeometry=class extends Rc{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}},t.IcosahedronGeometry=Rc,t.ImageBitmapLoader=class extends yu{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const n=this,a=bu.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout((function(){t&&t(a),n.manager.itemEnd(e)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(n.options,{colorSpaceConversion:"none"}))})).then((function(i){bu.add(e,i),t&&t(i),n.manager.itemEnd(e)})).catch((function(t){r&&r(t),n.manager.itemError(e),n.manager.itemEnd(e)})),n.manager.itemStart(e)}},t.ImageLoader=Su,t.ImageUtils=li,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=$o,t.InstancedBufferGeometry=$u,t.InstancedInterleavedBuffer=class extends fo{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},t.InstancedMesh=Ko,t.Int16BufferAttribute=class extends Lr{constructor(e,t,i){super(new Int16Array(e),t,i)}},t.Int32BufferAttribute=class extends Lr{constructor(e,t,i){super(new Int32Array(e),t,i)}},t.Int8BufferAttribute=class extends Lr{constructor(e,t,i){super(new Int8Array(e),t,i)}},t.IntType=ge,t.InterleavedBuffer=fo,t.InterleavedBufferAttribute=mo,t.Interpolant=ru,t.InterpolateDiscrete=ut,t.InterpolateLinear=ht,t.InterpolateSmooth=dt,t.InvertStencilOp=5386,t.KeepStencilOp=St,t.KeyframeTrack=ou,t.LOD=No,t.LatheBufferGeometry=class extends Gl{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}},t.LatheGeometry=Gl,t.Layers=ar,t.LessDepth=L,t.LessEqualDepth=U,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=Tu,t.LightProbe=zu,t.Line=al,t.Line3=class{constructor(e=new vi,t=new vi){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Rh.subVectors(e,this.start),Ph.subVectors(this.end,this.start);const i=Ph.dot(Ph);let r=Ph.dot(Rh)/i;return t&&(r=Nt(r,0,1)),r}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},t.LineBasicMaterial=Qo,t.LineCurve=Ol,t.LineCurve3=Dl,t.LineDashedMaterial=qc,t.LineLoop=cl,t.LineSegments=ll,t.LinearEncoding=bt,t.LinearFilter=ce,t.LinearInterpolant=au,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=he,t.LinearMipmapNearestFilter=ue,t.LinearSRGBColorSpace=wt,t.LinearToneMapping=$,t.Loader=yu,t.LoaderUtils=Wu,t.LoadingManager=vu,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=xe,t.LuminanceFormat=Te,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=Or,t.MaterialLoader=Hu,t.MathUtils=jt,t.Matrix3=Ht,t.Matrix4=Xi,t.MaxEquation=E,t.Mesh=ln,t.MeshBasicMaterial=Dr,t.MeshDepthMaterial=Ws,t.MeshDistanceMaterial=$s,t.MeshLambertMaterial=Yc,t.MeshMatcapMaterial=Xc,t.MeshNormalMaterial=$c,t.MeshPhongMaterial=Hc,t.MeshPhysicalMaterial=zc,t.MeshStandardMaterial=jc,t.MeshToonMaterial=Wc,t.MinEquation=A,t.MirroredRepeatWrapping=ae,t.MixOperation=z,t.MultiplyBlending=g,t.MultiplyOperation=j,t.NearestFilter=se,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=le,t.NearestMipmapNearestFilter=oe,t.NeverDepth=N,t.NeverStencilFunc=512,t.NoBlending=d,t.NoColorSpace="",t.NoToneMapping=W,t.NormalAnimationBlendMode=2500,t.NormalBlending=f,t.NotEqualDepth=B,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=uu,t.Object3D=_r,t.ObjectLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=this,a=""===this.path?Wu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new wu(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){let a=null;try{a=JSON.parse(i)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);n.parse(a,t)}),i,r)}async loadAsync(e,t){const i=""===this.path?Wu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const r=new wu(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const n=await r.loadAsync(e,t),a=JSON.parse(n),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,n,o,s,i),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),n=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,n),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let i=0,r=e.length;i<r;i++){const r=(new Kl).fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,n=e.length;t<n;t++){const n=(new Wo).fromJSON(e[t],r);i[n.uuid]=n}return i}parseGeometries(e,t){const i={};if(void 0!==e){const r=new Yu;for(let n=0,a=e.length;n<a;n++){let a;const s=e[n];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in Fc?a=Fc[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),i[s.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(void 0!==e){const n=new Hu;n.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===i[a.uuid]&&(i[a.uuid]=n.parse(a)),r[a.uuid]=i[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const r=e[i],n=mu.parse(r);t[n.uuid]=n}return t}parseImages(e,t){const i=this,r={};let n;function a(e){if("string"==typeof e){const t=e;return function(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Xt(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const i=new vu(t);n=new Su(i),n.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],n=i.url;if(Array.isArray(n)){const e=[];for(let t=0,i=n.length;t<i;t++){const i=a(n[t]);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new jo(i.data,i.width,i.height)))}r[i.uuid]=new ci(e)}else{const e=a(i.url);r[i.uuid]=new ci(e)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function n(e){if("string"==typeof e){const i=e,n=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:t.resourcePath+i;return await r.loadAsync(n)}return e.data?{data:Xt(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Su(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,i=a.length;t<i;t++){const i=a[t],r=await n(i);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new jo(r.data,r.width,r.height)))}i[r.uuid]=new ci(e)}else{const e=await n(r.url);i[r.uuid]=new ci(e)}}}return i}parseTextures(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let n=0,a=e.length;n<a;n++){const a=e[n];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new yn,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new jo:new di,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=i(a.mapping,Xu)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=i(a.wrap[0],qu),l.wrapT=i(a.wrap[1],qu)),void 0!==a.format&&(l.format=a.format),void 0!==a.type&&(l.type=a.type),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=i(a.minFilter,Zu)),void 0!==a.magFilter&&(l.magFilter=i(a.magFilter,Zu)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,i,r,n){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];void 0===i[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),t.push(i[n])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new ho,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new si(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new uo(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new co(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new bn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new jn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Gu(e.color,e.intensity);break;case"DirectionalLight":a=new Fu(e.color,e.intensity);break;case"PointLight":a=new Uu(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Bu(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Ou(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new xu(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new zu).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new Go(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new ln(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,i=e.instanceMatrix,r=e.instanceColor;a=new Ko(s,o,t),a.instanceMatrix=new $o(new Float32Array(i.array),16),void 0!==r&&(a.instanceColor=new $o(new Float32Array(r.array),r.itemSize));break;case"LOD":a=new No;break;case"Line":a=new al(l(e.geometry),c(e.material));break;case"LineLoop":a=new cl(l(e.geometry),c(e.material));break;case"LineSegments":a=new ll(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new ml(l(e.geometry),c(e.material));break;case"Sprite":a=new Co(c(e.material));break;case"Group":a=new eo;break;case"Bone":a=new Bo;break;default:a=new _r}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,i,r,n))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];a.animations.push(n[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],r=a.getObjectByProperty("uuid",i.object);void 0!==r&&a.addLevel(r,i.distance,i.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}},t.ObjectSpaceNormalMap=At,t.OctahedronBufferGeometry=class extends Pc{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}},t.OctahedronGeometry=Pc,t.OneFactor=S,t.OneMinusDstAlphaFactor=C,t.OneMinusDstColorFactor=O,t.OneMinusSrcAlphaFactor=R,t.OneMinusSrcColorFactor=x,t.OrthographicCamera=jn,t.PCFShadowMap=s,t.PCFSoftShadowMap=o,t.PMREMGenerator=Zn,t.Path=Fl,t.PerspectiveCamera=bn,t.Plane=Tn,t.PlaneBufferGeometry=class extends kn{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}},t.PlaneGeometry=kn,t.PlaneHelper=class extends al{constructor(e,t=1,i=16776960){const r=i,n=new Yr;n.setAttribute("position",new Fr([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere(),super(n,new Qo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new Yr;a.setAttribute("position",new Fr([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new ln(a,new Dr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},t.PointLight=Uu,t.PointLightHelper=class extends ln{constructor(e,t,i){super(new Oc(t,4,2),new Dr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},t.Points=ml,t.PointsMaterial=ul,t.PolarGridHelper=class extends ll{constructor(e=10,t=16,i=8,r=64,n=4473924,a=8947848){n=new si(n),a=new si(a);const s=[],o=[];if(t>1)for(let i=0;i<t;i++){const r=i/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;s.push(0,0,0),s.push(l,0,c);const u=1&i?n:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let t=0;t<i;t++){const l=1&t?n:a,c=e-e/i*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),i=Math.sin(t)*c,n=Math.cos(t)*c;s.push(i,0,n),o.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),i=Math.sin(t)*c,n=Math.cos(t)*c,s.push(i,0,n),o.push(l.r,l.g,l.b)}}const l=new Yr;l.setAttribute("position",new Fr(s,3)),l.setAttribute("color",new Fr(o,3)),super(l,new Qo({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},t.PolyhedronBufferGeometry=class extends Wl{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}},t.PolyhedronGeometry=Wl,t.PositionalAudio=class extends lh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ch,uh,hh),dh.set(0,0,1).applyQuaternion(uh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ch.x,e),t.positionY.linearRampToValueAtTime(ch.y,e),t.positionZ.linearRampToValueAtTime(ch.z,e),t.orientationX.linearRampToValueAtTime(dh.x,e),t.orientationY.linearRampToValueAtTime(dh.y,e),t.orientationZ.linearRampToValueAtTime(dh.z,e)}else t.setPosition(ch.x,ch.y,ch.z),t.setOrientation(dh.x,dh.y,dh.z)}},t.PropertyBinding=yh,t.PropertyMixer=fh,t.QuadraticBezierCurve=Nl,t.QuadraticBezierCurve3=Il,t.Quaternion=bi,t.QuaternionKeyframeTrack=du,t.QuaternionLinearInterpolant=hu,t.RED_GREEN_RGTC2_Format=lt,t.RED_RGTC1_Format=st,t.REVISION=i,t.RGBADepthPacking=_t,t.RGBAFormat=Se,t.RGBAIntegerFormat=De,t.RGBA_ASTC_10x10_Format=it,t.RGBA_ASTC_10x5_Format=Qe,t.RGBA_ASTC_10x6_Format=et,t.RGBA_ASTC_10x8_Format=tt,t.RGBA_ASTC_12x10_Format=rt,t.RGBA_ASTC_12x12_Format=nt,t.RGBA_ASTC_4x4_Format=We,t.RGBA_ASTC_5x4_Format=$e,t.RGBA_ASTC_5x5_Format=Ye,t.RGBA_ASTC_6x5_Format=Xe,t.RGBA_ASTC_6x6_Format=qe,t.RGBA_ASTC_8x5_Format=Ze,t.RGBA_ASTC_8x6_Format=Je,t.RGBA_ASTC_8x8_Format=Ke,t.RGBA_BPTC_Format=at,t.RGBA_ETC2_EAC_Format=He,t.RGBA_PVRTC_2BPPV1_Format=Be,t.RGBA_PVRTC_4BPPV1_Format=Ge,t.RGBA_S3TC_DXT1_Format=Ie,t.RGBA_S3TC_DXT3_Format=Le,t.RGBA_S3TC_DXT5_Format=Ue,t.RGB_ETC1_Format=je,t.RGB_ETC2_Format=ze,t.RGB_PVRTC_2BPPV1_Format=Fe,t.RGB_PVRTC_4BPPV1_Format=Ve,t.RGB_S3TC_DXT1_Format=Ne,t.RGFormat=ke,t.RGIntegerFormat=Oe,t.RawShaderMaterial=Bc,t.Ray=Yi,t.Raycaster=class{constructor(e,t,i=0,r=1/0){this.ray=new Yi(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new ar,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return xh(e,this,i,t),i.sort(Th),i}intersectObjects(e,t=!0,i=[]){for(let r=0,n=e.length;r<n;r++)xh(e[r],this,i,t);return i.sort(Th),i}},t.RectAreaLight=Bu,t.RedFormat=Pe,t.RedIntegerFormat=Ce,t.ReinhardToneMapping=Y,t.RepeatWrapping=re,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=y,t.RingBufferGeometry=class extends Cc{constructor(e,t,i,r,n,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,n,a)}},t.RingGeometry=Cc,t.SIGNED_RED_GREEN_RGTC2_Format=ct,t.SIGNED_RED_RGTC1_Format=ot,t.SRGBColorSpace=Et,t.Scene=ho,t.ShaderChunk=On,t.ShaderLib=Nn,t.ShaderMaterial=mn,t.ShadowMaterial=Gc,t.Shape=Kl,t.ShapeBufferGeometry=class extends kc{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}},t.ShapeGeometry=kc,t.ShapePath=class{constructor(){this.type="ShapePath",this.color=new si,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Fl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,n,a){return this.currentPath.bezierCurveTo(e,t,i,r,n,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const i=t.length;let r=!1;for(let n=i-1,a=0;a<i;n=a++){let i=t[n],s=t[a],o=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[a],o=-o,s=t[n],l=-l),e.y<i.y||e.y>s.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-o*(e.y-i.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return r}const i=wc.isClockWise,r=this.subPaths;if(0===r.length)return[];let n,a,s;const o=[];if(1===r.length)return a=r[0],s=new Kl,s.curves=a.curves,o.push(s),o;let l=!i(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let t=0,s=r.length;t<s;t++)a=r[t],h=a.getPoints(),n=i(h),n=e?!n:n,n?(!l&&u[p]&&p++,u[p]={s:new Kl,p:h},u[p].s.curves=a.curves,l&&p++,f[p]=[]):f[p].push({h:a,p:h[0]});if(!u[0])return function(e){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i],n=new Kl;n.curves=r.curves,t.push(n)}return t}(r);if(u.length>1){let e=!1,i=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,n=u.length;r<n;r++){const n=f[r];for(let a=0;a<n.length;a++){const s=n[a];let o=!0;for(let n=0;n<u.length;n++)t(s.p,u[n].p)&&(r!==n&&i++,o?(o=!1,c[n].push(s)):e=!0);o&&c[r].push(s)}}i>0&&!1===e&&(f=c)}for(let e=0,t=u.length;e<t;e++){s=u[e].s,o.push(s),d=f[e];for(let e=0,t=d.length;e<t;e++)s.holes.push(d[e].h)}return o}},t.ShapeUtils=wc,t.ShortType=pe,t.Skeleton=Wo,t.SkeletonHelper=class extends ll{constructor(e){const t=Nh(e),i=new Yr,r=[],n=[],a=new si(0,0,1),s=new si(0,1,0);for(let e=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(a.r,a.g,a.b),n.push(s.r,s.g,s.b))}i.setAttribute("position",new Fr(r,3)),i.setAttribute("color",new Fr(n,3)),super(i,new Qo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Dh.copy(this.root.matrixWorld).invert();for(let e=0,i=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(Oh.multiplyMatrices(Dh,n.matrixWorld),kh.setFromMatrixPosition(Oh),r.setXYZ(i,kh.x,kh.y,kh.z),Oh.multiplyMatrices(Dh,n.parent.matrixWorld),kh.setFromMatrixPosition(Oh),r.setXYZ(i+1,kh.x,kh.y,kh.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}},t.SkinnedMesh=Go,t.Source=ci,t.Sphere=Fi,t.SphereBufferGeometry=class extends Oc{constructor(e,t,i,r,n,a,s){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,n,a,s)}},t.SphereGeometry=Oc,t.Spherical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Nt(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},t.SphericalHarmonics3=ju,t.SplineCurve=Ll,t.SpotLight=Ou,t.SpotLightHelper=class extends _r{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Yr,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,i=32;e<i;e++,t++){const n=e/i*Math.PI*2,a=t/i*Math.PI*2;r.push(Math.cos(n),Math.sin(n),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Fr(r,3));const n=new Qo({fog:!1,toneMapped:!1});this.cone=new ll(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ch.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ch),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},t.Sprite=Co,t.SpriteMaterial=go,t.SrcAlphaFactor=M,t.SrcAlphaSaturateFactor=D,t.SrcColorFactor=T,t.StaticCopyUsage=35046,t.StaticDrawUsage=Tt,t.StaticReadUsage=35045,t.StereoCamera=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new bn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new bn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,th.copy(e.projectionMatrix);const i=t.eyeSep/2,r=i*t.near/t.focus,n=t.near*Math.tan(kt*t.fov*.5)/t.zoom;let a,s;eh.elements[12]=-i,Qu.elements[12]=i,a=-n*t.aspect+r,s=n*t.aspect+r,th.elements[0]=2*t.near/(s-a),th.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(th),a=-n*t.aspect-r,s=n*t.aspect-r,th.elements[0]=2*t.near/(s-a),th.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(th)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qu)}},t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=fu,t.SubtractEquation=_,t.SubtractiveBlending=m,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=yt,t.TetrahedronBufferGeometry=class extends Dc{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}},t.TetrahedronGeometry=Dc,t.Texture=di,t.TextureLoader=class extends yu{constructor(e){super(e)}load(e,t,i,r){const n=new di,a=new Su(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){n.image=e,n.needsUpdate=!0,void 0!==t&&t(n)}),i,r),n}},t.TorusBufferGeometry=class extends Nc{constructor(e,t,i,r,n){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,n)}},t.TorusGeometry=Nc,t.TorusKnotBufferGeometry=class extends Ic{constructor(e,t,i,r,n,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,n,a)}},t.TorusKnotGeometry=Ic,t.Triangle=Cr,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=class extends Lc{constructor(e,t,i,r,n){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,n)}},t.TubeGeometry=Lc,t.TwoPassDoubleSide=2,t.UVMapping=J,t.Uint16BufferAttribute=Ur,t.Uint32BufferAttribute=Vr,t.Uint8BufferAttribute=class extends Lr{constructor(e,t,i){super(new Uint8Array(e),t,i)}},t.Uint8ClampedBufferAttribute=class extends Lr{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}},t.Uniform=wh,t.UniformsGroup=class extends Rt{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Sh++}),this.name="",this.usage=Tt,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,i=t.length;e<i;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}},t.UniformsLib=Dn,t.UniformsUtils=pn,t.UnsignedByteType=de,t.UnsignedInt248Type=Ee,t.UnsignedIntType=be,t.UnsignedShort4444Type=ye,t.UnsignedShort5551Type=Ae,t.UnsignedShortType=me,t.VSMShadowMap=l,t.Vector2=zt,t.Vector3=vi,t.Vector4=fi,t.VectorKeyframeTrack=pu,t.VideoTexture=class extends di{constructor(e,t,i,r,n,a,s,o,l){super(e,t,i,r,n,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:ce,this.magFilter=void 0!==n?n:ce,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},t.WebGL1Renderer=lo,t.WebGL3DRenderTarget=class extends pi{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new gi(null,e,t,i),this.texture.isRenderTargetTexture=!0}},t.WebGLArrayRenderTarget=class extends pi{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new mi(null,e,t,i),this.texture.isRenderTargetTexture=!0}},t.WebGLCubeRenderTarget=An,t.WebGLMultipleRenderTargets=class extends pi{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const n=this.texture;this.texture=[];for(let e=0;e<i;e++)this.texture[e]=n.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,n=this.texture.length;r<n;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},t.WebGLRenderTarget=pi,t.WebGLRenderer=oo,t.WebGLUtils=Ks,t.WireframeGeometry=Uc,t.WrapAroundEnding=mt,t.ZeroCurvatureEnding=ft,t.ZeroFactor=w,t.ZeroSlopeEnding=pt,t.ZeroStencilOp=0,t._SRGBAFormat=Mt,t.sRGBEncoding=vt}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,i),a.exports}i.amdO={},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";i.d(r,{E:()=>vt}),i(8660);var e,t=i(3256);!function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(e||(e={}));const n=e;var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},a(e,t)};function s(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}function u(e){return!!e.useClass}function h(e){return!!e.useFactory}var d=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,i=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(i.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(i){t[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[0]=e(),Reflect[i].apply(void 0,c(t))}})),t},e}();function f(e){return"string"==typeof e||"symbol"==typeof e}function p(e){return"object"==typeof e&&"token"in e&&"transform"in e}function m(e){return!!e.useToken}function g(e){return null!=e.useValue}const b=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(b),_=function(){this.scopedResolutions=new Map};var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(b),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(b);const E=function(){this.preResolution=new y,this.postResolution=new A};var w=new Map,S=function(){function e(e){this.parent=e,this._registry=new v,this.interceptors=new E,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,i){var r;if(void 0===i&&(i={lifecycle:n.Transient}),this.ensureNotDisposed(),r=function(e){return u(e)||g(e)||m(e)||h(e)}(t)?t:{useClass:t},m(r))for(var a=[e],s=r;null!=s;){var o=s.useToken;if(a.includes(o))throw new Error("Token registration cycle detected! "+c(a,[o]).join(" -> "));a.push(o);var l=this._registry.get(o);s=l&&m(l.provider)?l.provider:null}if((i.lifecycle===n.Singleton||i.lifecycle==n.ContainerScoped||i.lifecycle==n.ResolutionScoped)&&(g(r)||h(r)))throw new Error('Cannot use lifecycle "'+n[i.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:i}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),f(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),f(e)){if(f(t))return this.register(e,{useToken:t},{lifecycle:n.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:n.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var i=e;return t&&!f(t)&&(i=t),this.register(e,{useClass:i},{lifecycle:n.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new _),this.ensureNotDisposed();var i=this.getRegistration(e);if(!i&&f(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),i){var r=this.resolveRegistration(i,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof d}(e))return r=this.construct(e,t),this.executePostResolutionInterceptor(e,r,"Single"),r;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var i,r;if(this.interceptors.preResolution.has(e)){var n=[];try{for(var a=o(this.interceptors.preResolution.getAll(e)),s=a.next();!s.done;s=a.next()){var l=s.value;"Once"!=l.options.frequency&&n.push(l),l.callback(e,t)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}this.interceptors.preResolution.setAll(e,n)}},e.prototype.executePostResolutionInterceptor=function(e,t,i){var r,n;if(this.interceptors.postResolution.has(e)){var a=[];try{for(var s=o(this.interceptors.postResolution.getAll(e)),l=s.next();!l.done;l=s.next()){var c=l.value;"Once"!=c.options.frequency&&a.push(c),c.callback(e,t,i)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,a)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===n.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var i,r=e.options.lifecycle===n.Singleton,a=e.options.lifecycle===n.ContainerScoped,s=r||a;return i=g(e.provider)?e.provider.useValue:m(e.provider)?s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):u(e.provider)?s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):h(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===n.ResolutionScoped&&t.scopedResolutions.set(e,i),i},e.prototype.resolveAll=function(e,t){var i=this;void 0===t&&(t=new _),this.ensureNotDisposed();var r=this.getAllRegistrations(e);if(!r&&f(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var n=r.map((function(e){return i.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,n,"All"),n}var a=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,a,"All"),a},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var i=o(this._registry.entries()),r=i.next();!r.done;r=i.next()){var n=l(r.value,2),a=n[0],s=n[1];this._registry.setAll(a,s.filter((function(e){return!g(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,i;this.ensureNotDisposed();var r=new e(this);try{for(var a=o(this._registry.entries()),s=a.next();!s.done;s=a.next()){var c=l(s.value,2),u=c[0],h=c[1];h.some((function(e){return e.options.lifecycle===n.ContainerScoped}))&&r._registry.setAll(u,h.map((function(e){return e.options.lifecycle===n.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(e,t,i){void 0===i&&(i={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:i})},e.prototype.afterResolution=function(e,t,i){void 0===i&&(i={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:i})},e.prototype.dispose=function(){return e=this,t=void 0,r=function(){var e;return function(e,t){var i,r,n,a,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(this,(function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach((function(t){var i=t.dispose();i&&e.push(i)})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,i,r},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var i=this;if(e instanceof d)return e.createProxy((function(e){return i.resolve(e,t)}));var r,n=function(){var r=w.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var n=r.map(i.resolveParams(t,e));return new(e.bind.apply(e,c([void 0],n)))}();return"function"!=typeof(r=n).dispose||r.dispose.length>0||this.disposables.add(n),n},e.prototype.resolveParams=function(e,t){var i=this;return function(r,n){var a,s,o,u;try{return"object"==typeof(u=r)&&"token"in u&&"multiple"in u?p(r)?r.multiple?(a=i.resolve(r.transform)).transform.apply(a,c([i.resolveAll(r.token)],r.transformArgs)):(s=i.resolve(r.transform)).transform.apply(s,c([i.resolve(r.token,e)],r.transformArgs)):r.multiple?i.resolveAll(r.token):i.resolve(r.token,e):p(r)?(o=i.resolve(r.transform,e)).transform.apply(o,c([i.resolve(r.token,e)],r.transformArgs)):i.resolve(r,e)}catch(e){throw new Error(function(e,t,i){var r,n,a,s,o=l(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return r="Cannot inject the dependency "+(s=t,(null===(a=void 0===o?null:o)?"at position #"+s:'"'+a.split(",")[s].trim()+'" at position #'+s)+' of "')+e.name+'" constructor. Reason:',void 0===n&&(n="    "),c([r],i.message.split("\n").map((function(e){return n+e}))).join("\n")}(t,n,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),T=new S;if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");const x={Diamond:{properties:{refractionIndex:2.4,impurityMap:void 0,impurityScale:0,colorTransferBegin:"#ffffff",colorTransferEnd:"#ffffff",gamma:1,contrast:2,brightness:0,dispersion:.3,tracingDepth:8,tracingOpacity:.8},parameters:{"03c5b85a-4424-42a5-b9ee-173cb093d700":"0"}},"Blue Diamond":{properties:{refractionIndex:2.4,impurityMap:void 0,impurityScale:0,colorTransferBegin:"#4444ff",colorTransferEnd:"#0088cc",gamma:1,contrast:1.2,brightness:0,dispersion:.3,tracingDepth:8,tracingOpacity:.9},parameters:{"03c5b85a-4424-42a5-b9ee-173cb093d700":"0"}},Ruby:{properties:{refractionIndex:1.76,impurityMap:void 0,impurityScale:0,colorTransferBegin:"#880000",colorTransferEnd:"#880022",gamma:.65,contrast:2,brightness:.25,dispersion:0,tracingDepth:8,tracingOpacity:.9},parameters:{"03c5b85a-4424-42a5-b9ee-173cb093d700":"2"}},Emerald:{properties:{refractionIndex:1.57,impurityMap:"https://shapediverviewer.s3.amazonaws.com/v3/images/impurity.jpg",impurityScale:.15,colorTransferBegin:"#00aa44",colorTransferEnd:"#002201",gamma:1,contrast:1.1,brightness:0,dispersion:0,tracingDepth:8,tracingOpacity:.8},parameters:{"03c5b85a-4424-42a5-b9ee-173cb093d700":"1"}},Sapphire:{properties:{refractionIndex:1.76,impurityMap:void 0,impurityScale:0,colorTransferBegin:"#1111cc",colorTransferEnd:"#112266",gamma:1,contrast:1.2,brightness:0,dispersion:.3,tracingDepth:8,tracingOpacity:.9},parameters:{"03c5b85a-4424-42a5-b9ee-173cb093d700":"0"}}};let M={environmentMap:t.ENVIRONMENT_MAP.PHOTO_STUDIO,refractionIndex:2.4,impurityMap:void 0,impurityScale:1,colorTransferBegin:"#ffffff",colorTransferEnd:"#ffffff",gamma:1,contrast:1,brightness:0,dispersion:.15,tracingDepth:8,tracingOpacity:.25};const R=(e,i)=>{for(let r=0;r<e.length;r++){const n=e[r],a=document.createElement("div");n.tooltip&&a.setAttribute("title",n.tooltip),n.key&&a.setAttribute("name",n.key),a.setAttribute("type",n.type);const s=document.createElement("label"),o=document.createElement("label");o.setAttribute("name","valueLabel"),s.innerHTML=n.name;let l=null;if("slider"===n.type){const e=document.createElement("div");e.style.justifyContent="space-between",e.style.display="flex";const t=n;l=document.createElement("input"),l.setAttribute("name","inputElement"),l.setAttribute("type","range"),l.setAttribute("min",t.min+""),l.setAttribute("max",t.max+""),l.setAttribute("step",t.step+"");const i=n.key?M[n.key]:t.value;l.setAttribute("value",i+""),o.innerHTML=i+"",l.classList.value="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",s.classList.value="mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",o.classList.value="mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",e.appendChild(s),e.appendChild(o),a.appendChild(e),a.appendChild(l),l.onchange=()=>{o.innerHTML=l.value+"",n.key&&(M[n.key]=+l.value),vt(M),n.callback&&n.callback(l.value)},l.oninput=()=>{o.innerHTML=l.value+""}}else if("dropdown"===n.type){const e=n;l=document.createElement("select"),l.setAttribute("name","inputElement");const i=Object.values(t.ENVIRONMENT_MAP).indexOf(e.value);for(let t=0;t<e.choices.length;t++){let r=document.createElement("option");r.setAttribute("value",t+""),r.setAttribute("name",e.choices[t]),r.innerHTML=e.choices[t],r.classList.value="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-gray-300",i==t&&r.setAttribute("selected",""),l.appendChild(r)}l.classList.value="w-full mb-2 mt-2 right-5 text-gray-300 bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-1 py-0.5 text-center inline-flex items-center dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800",s.classList.value="block mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",a.appendChild(s),a.appendChild(l),l.onchange=()=>{n.callback&&n.callback(l.value)}}else if("string"===n.type){l=document.createElement("input"),l.setAttribute("name","inputElement"),l.setAttribute("type","text");const e=n.key?M[n.key]:n.value;l.setAttribute("value",void 0===e?"":e),l.classList.value="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-gray-500 focus:border-gray-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-300 dark:focus:ring-gray-500 dark:focus:border-gray-500",s.classList.value="block mb-2 mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",a.appendChild(s),a.appendChild(l),l.onchange=()=>{n.key&&(M[n.key]=l.value),vt(M),n.callback&&n.callback(l.value)}}l&&(i.classList.value="code-preview rounded-xl bg-gradient-to-r bg-white border border-gray-900 dark:border-gray-700 p-2 sm:p-6 dark:bg-gray-500",i.appendChild(a))}vt(M)};function P(e,t){return function(){return e.apply(t,arguments)}}const{toString:C}=Object.prototype,{getPrototypeOf:k}=Object,O=(D=Object.create(null),e=>{const t=C.call(e);return D[t]||(D[t]=t.slice(8,-1).toLowerCase())});var D;const N=e=>(e=e.toLowerCase(),t=>O(t)===e),I=e=>t=>typeof t===e,{isArray:L}=Array,U=I("undefined"),V=N("ArrayBuffer"),F=I("string"),G=I("function"),B=I("number"),j=e=>null!==e&&"object"==typeof e,z=e=>{if("object"!==O(e))return!1;const t=k(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},H=N("Date"),W=N("File"),$=N("Blob"),Y=N("FileList"),X=N("URLSearchParams");function q(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let r,n;if("object"!=typeof e&&(e=[e]),L(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let s;for(r=0;r<a;r++)s=n[r],t.call(null,e[s],s,e)}}function Z(e,t){t=t.toLowerCase();const i=Object.keys(e);let r,n=i.length;for(;n-- >0;)if(r=i[n],t===r.toLowerCase())return r;return null}const J="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,K=e=>!U(e)&&e!==J,Q=(ee="undefined"!=typeof Uint8Array&&k(Uint8Array),e=>ee&&e instanceof ee);var ee;const te=N("HTMLFormElement"),ie=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),re=N("RegExp"),ne=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),r={};q(i,((i,n)=>{!1!==t(i,n,e)&&(r[n]=i)})),Object.defineProperties(e,r)},ae="abcdefghijklmnopqrstuvwxyz",se="0123456789",oe={DIGIT:se,ALPHA:ae,ALPHA_DIGIT:ae+ae.toUpperCase()+se},le=N("AsyncFunction"),ce={isArray:L,isArrayBuffer:V,isBuffer:function(e){return null!==e&&!U(e)&&null!==e.constructor&&!U(e.constructor)&&G(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||G(e.append)&&("formdata"===(t=O(e))||"object"===t&&G(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&V(e.buffer),t},isString:F,isNumber:B,isBoolean:e=>!0===e||!1===e,isObject:j,isPlainObject:z,isUndefined:U,isDate:H,isFile:W,isBlob:$,isRegExp:re,isFunction:G,isStream:e=>j(e)&&G(e.pipe),isURLSearchParams:X,isTypedArray:Q,isFileList:Y,forEach:q,merge:function e(){const{caseless:t}=K(this)&&this||{},i={},r=(r,n)=>{const a=t&&Z(i,n)||n;z(i[a])&&z(r)?i[a]=e(i[a],r):z(r)?i[a]=e({},r):L(r)?i[a]=r.slice():i[a]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&q(arguments[e],r);return i},extend:(e,t,i,{allOwnKeys:r}={})=>(q(t,((t,r)=>{i&&G(t)?e[r]=P(t,i):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,r)=>{let n,a,s;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)s=n[a],r&&!r(s,e,t)||o[s]||(t[s]=e[s],o[s]=!0);e=!1!==i&&k(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:O,kindOfTest:N,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const r=e.indexOf(t,i);return-1!==r&&r===i},toArray:e=>{if(!e)return null;if(L(e))return e;let t=e.length;if(!B(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const r=[];for(;null!==(i=e.exec(t));)r.push(i);return r},isHTMLForm:te,hasOwnProperty:ie,hasOwnProp:ie,reduceDescriptors:ne,freezeMethods:e=>{ne(e,((t,i)=>{if(G(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const r=e[i];G(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},r=e=>{e.forEach((e=>{i[e]=!0}))};return L(e)?r(e):r(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Z,global:J,isContextDefined:K,ALPHABET:oe,generateString:(e=16,t=oe.ALPHA_DIGIT)=>{let i="";const{length:r}=t;for(;e--;)i+=t[Math.random()*r|0];return i},isSpecCompliantForm:function(e){return!!(e&&G(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,r)=>{if(j(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const n=L(e)?[]:{};return q(e,((e,t)=>{const a=i(e,r+1);!U(a)&&(n[t]=a)})),t[r]=void 0,n}}return e};return i(e,0)},isAsyncFn:le,isThenable:e=>e&&(j(e)||G(e))&&G(e.then)&&G(e.catch)};function ue(e,t,i,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),r&&(this.request=r),n&&(this.response=n)}ce.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const he=ue.prototype,de={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{de[e]={value:e}})),Object.defineProperties(ue,de),Object.defineProperty(he,"isAxiosError",{value:!0}),ue.from=(e,t,i,r,n,a)=>{const s=Object.create(he);return ce.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ue.call(s,e.message,t,i,r,n),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const fe=ue;function pe(e){return ce.isPlainObject(e)||ce.isArray(e)}function me(e){return ce.endsWith(e,"[]")?e.slice(0,-2):e}function ge(e,t,i){return e?e.concat(t).map((function(e,t){return e=me(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}const be=ce.toFlatObject(ce,{},null,(function(e){return/^is[A-Z]/.test(e)})),ve=function(e,t,i){if(!ce.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(i=ce.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ce.isUndefined(t[e])}))).metaTokens,n=i.visitor||c,a=i.dots,s=i.indexes,o=(i.Blob||"undefined"!=typeof Blob&&Blob)&&ce.isSpecCompliantForm(t);if(!ce.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ce.isDate(e))return e.toISOString();if(!o&&ce.isBlob(e))throw new fe("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(e)||ce.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,n){let o=e;if(e&&!n&&"object"==typeof e)if(ce.endsWith(i,"{}"))i=r?i:i.slice(0,-2),e=JSON.stringify(e);else if(ce.isArray(e)&&function(e){return ce.isArray(e)&&!e.some(pe)}(e)||(ce.isFileList(e)||ce.endsWith(i,"[]"))&&(o=ce.toArray(e)))return i=me(i),o.forEach((function(e,r){!ce.isUndefined(e)&&null!==e&&t.append(!0===s?ge([i],r,a):null===s?i:i+"[]",l(e))})),!1;return!!pe(e)||(t.append(ge(n,i,a),l(e)),!1)}const u=[],h=Object.assign(be,{defaultVisitor:c,convertValue:l,isVisitable:pe});if(!ce.isObject(e))throw new TypeError("data must be an object");return function e(i,r){if(!ce.isUndefined(i)){if(-1!==u.indexOf(i))throw Error("Circular reference detected in "+r.join("."));u.push(i),ce.forEach(i,(function(i,a){!0===(!(ce.isUndefined(i)||null===i)&&n.call(t,i,ce.isString(a)?a.trim():a,r,h))&&e(i,r?r.concat(a):[a])})),u.pop()}}(e),t};function _e(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ye(e,t){this._pairs=[],e&&ve(e,this,t)}const Ae=ye.prototype;Ae.append=function(e,t){this._pairs.push([e,t])},Ae.toString=function(e){const t=e?function(t){return e.call(this,t,_e)}:_e;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Ee=ye;function we(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Se(e,t,i){if(!t)return e;const r=i&&i.encode||we,n=i&&i.serialize;let a;if(a=n?n(t,i):ce.isURLSearchParams(t)?t.toString():new Ee(t,i).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Te=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ce.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Me={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ee,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]},Re=function(e){function t(e,i,r,n){let a=e[n++];const s=Number.isFinite(+a),o=n>=e.length;return a=!a&&ce.isArray(r)?r.length:a,o?(ce.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!s):(r[a]&&ce.isObject(r[a])||(r[a]=[]),t(e,i,r[a],n)&&ce.isArray(r[a])&&(r[a]=function(e){const t={},i=Object.keys(e);let r;const n=i.length;let a;for(r=0;r<n;r++)a=i[r],t[a]=e[a];return t}(r[a])),!s)}if(ce.isFormData(e)&&ce.isFunction(e.entries)){const i={};return ce.forEachEntry(e,((e,r)=>{t(function(e){return ce.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,i,0)})),i}return null},Pe={"Content-Type":void 0},Ce={transitional:xe,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,n=ce.isObject(e);if(n&&ce.isHTMLForm(e)&&(e=new FormData(e)),ce.isFormData(e))return r&&r?JSON.stringify(Re(e)):e;if(ce.isArrayBuffer(e)||ce.isBuffer(e)||ce.isStream(e)||ce.isFile(e)||ce.isBlob(e))return e;if(ce.isArrayBufferView(e))return e.buffer;if(ce.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ve(e,new Me.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,r){return Me.isNode&&ce.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=ce.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ve(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,i){if(ce.isString(e))try{return(0,JSON.parse)(e),ce.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ce.transitional,i=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&ce.isString(e)&&(i&&!this.responseType||r)){const i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw fe.from(e,fe.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Me.classes.FormData,Blob:Me.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ce.forEach(["delete","get","head"],(function(e){Ce.headers[e]={}})),ce.forEach(["post","put","patch"],(function(e){Ce.headers[e]=ce.merge(Pe)}));const ke=Ce,Oe=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),De=Symbol("internals");function Ne(e){return e&&String(e).trim().toLowerCase()}function Ie(e){return!1===e||null==e?e:ce.isArray(e)?e.map(Ie):String(e)}function Le(e,t,i,r,n){return ce.isFunction(r)?r.call(this,t,i):(n&&(t=i),ce.isString(t)?ce.isString(r)?-1!==t.indexOf(r):ce.isRegExp(r)?r.test(t):void 0:void 0)}class Ue{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function n(e,t,i){const n=Ne(t);if(!n)throw new Error("header name must be a non-empty string");const a=ce.findKey(r,n);(!a||void 0===r[a]||!0===i||void 0===i&&!1!==r[a])&&(r[a||t]=Ie(e))}const a=(e,t)=>ce.forEach(e,((e,i)=>n(e,i,t)));return ce.isPlainObject(e)||e instanceof this.constructor?a(e,t):ce.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let i,r,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!i||t[i]&&Oe[i]||("set-cookie"===i?t[i]?t[i].push(r):t[i]=[r]:t[i]=t[i]?t[i]+", "+r:r)})),t})(e),t):null!=e&&n(t,e,i),this}get(e,t){if(e=Ne(e)){const i=ce.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(e);)t[r[1]]=r[2];return t}(e);if(ce.isFunction(t))return t.call(this,e,i);if(ce.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ne(e)){const i=ce.findKey(this,e);return!(!i||void 0===this[i]||t&&!Le(0,this[i],i,t))}return!1}delete(e,t){const i=this;let r=!1;function n(e){if(e=Ne(e)){const n=ce.findKey(i,e);!n||t&&!Le(0,i[n],n,t)||(delete i[n],r=!0)}}return ce.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const n=t[i];e&&!Le(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,i={};return ce.forEach(this,((r,n)=>{const a=ce.findKey(i,n);if(a)return t[a]=Ie(r),void delete t[n];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(n):String(n).trim();s!==n&&delete t[n],t[s]=Ie(r),i[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ce.forEach(this,((i,r)=>{null!=i&&!1!==i&&(t[r]=e&&ce.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach((e=>i.set(e))),i}static accessor(e){const t=(this[De]=this[De]={accessors:{}}).accessors,i=this.prototype;function r(e){const r=Ne(e);t[r]||(function(e,t){const i=ce.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+i,{value:function(e,i,n){return this[r].call(this,t,e,i,n)},configurable:!0})}))}(i,e),t[r]=!0)}return ce.isArray(e)?e.forEach(r):r(e),this}}Ue.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ce.freezeMethods(Ue.prototype),ce.freezeMethods(Ue);const Ve=Ue;function Fe(e,t){const i=this||ke,r=t||i,n=Ve.from(r.headers);let a=r.data;return ce.forEach(e,(function(e){a=e.call(i,a,n.normalize(),t?t.status:void 0)})),n.normalize(),a}function Ge(e){return!(!e||!e.__CANCEL__)}function Be(e,t,i){fe.call(this,null==e?"canceled":e,fe.ERR_CANCELED,t,i),this.name="CanceledError"}ce.inherits(Be,fe,{__CANCEL__:!0});const je=Be,ze=Me.isStandardBrowserEnv?{write:function(e,t,i,r,n,a){const s=[];s.push(e+"="+encodeURIComponent(t)),ce.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),ce.isString(r)&&s.push("path="+r),ce.isString(n)&&s.push("domain="+n),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function He(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const We=Me.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(i){let r=i;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(e){const t=ce.isString(e)?r(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function(){return!0};function $e(e,t){let i=0;const r=function(e,t){e=e||10;const i=new Array(e),r=new Array(e);let n,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[s];n||(n=l),i[a]=o,r[a]=l;let u=s,h=0;for(;u!==a;)h+=i[u++],u%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-n<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}(50,250);return n=>{const a=n.loaded,s=n.lengthComputable?n.total:void 0,o=a-i,l=r(o);i=a;const c={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:n};c[t?"download":"upload"]=!0,e(c)}}const Ye={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){let r=e.data;const n=Ve.from(e.headers).normalize(),a=e.responseType;let s;function o(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}ce.isFormData(r)&&(Me.isStandardBrowserEnv||Me.isStandardBrowserWebWorkerEnv?n.setContentType(!1):n.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.set("Authorization","Basic "+btoa(t+":"+i))}const c=He(e.baseURL,e.url);function u(){if(!l)return;const r=Ve.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,i){const r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(new fe("Request failed with status code "+i.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}((function(e){t(e),o()}),(function(e){i(e),o()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),Se(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(i(new fe("Request aborted",fe.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new fe("Network Error",fe.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||xe;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new fe(t,r.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,e,l)),l=null},Me.isStandardBrowserEnv){const t=(e.withCredentials||We(c))&&e.xsrfCookieName&&ze.read(e.xsrfCookieName);t&&n.set(e.xsrfHeaderName,t)}void 0===r&&n.setContentType(null),"setRequestHeader"in l&&ce.forEach(n.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),ce.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",$e(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",$e(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{l&&(i(!t||t.type?new je(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);h&&-1===Me.protocols.indexOf(h)?i(new fe("Unsupported protocol "+h+":",fe.ERR_BAD_REQUEST,e)):l.send(r||null)}))}};ce.forEach(Ye,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function Xe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new je(null,e)}function qe(e){return Xe(e),e.headers=Ve.from(e.headers),e.data=Fe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=ce.isArray(e)?e:[e];const{length:t}=e;let i,r;for(let n=0;n<t&&(i=e[n],!(r=ce.isString(i)?Ye[i.toLowerCase()]:i));n++);if(!r){if(!1===r)throw new fe(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(ce.hasOwnProp(Ye,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`)}if(!ce.isFunction(r))throw new TypeError("adapter is not a function");return r})(e.adapter||ke.adapter)(e).then((function(t){return Xe(e),t.data=Fe.call(e,e.transformResponse,t),t.headers=Ve.from(t.headers),t}),(function(t){return Ge(t)||(Xe(e),t&&t.response&&(t.response.data=Fe.call(e,e.transformResponse,t.response),t.response.headers=Ve.from(t.response.headers))),Promise.reject(t)}))}const Ze=e=>e instanceof Ve?e.toJSON():e;function Je(e,t){t=t||{};const i={};function r(e,t,i){return ce.isPlainObject(e)&&ce.isPlainObject(t)?ce.merge.call({caseless:i},e,t):ce.isPlainObject(t)?ce.merge({},t):ce.isArray(t)?t.slice():t}function n(e,t,i){return ce.isUndefined(t)?ce.isUndefined(e)?void 0:r(void 0,e,i):r(e,t,i)}function a(e,t){if(!ce.isUndefined(t))return r(void 0,t)}function s(e,t){return ce.isUndefined(t)?ce.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(i,n,a){return a in t?r(i,n):a in e?r(void 0,i):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t)=>n(Ze(e),Ze(t),!0)};return ce.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||n,s=a(e[r],t[r],r);ce.isUndefined(s)&&a!==o||(i[r]=s)})),i}const Ke={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ke[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const Qe={};Ke.transitional=function(e,t,i){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,a)=>{if(!1===e)throw new fe(r(n," has been removed"+(t?" in "+t:"")),fe.ERR_DEPRECATED);return t&&!Qe[n]&&(Qe[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,a)}};const et={assertOptions:function(e,t,i){if("object"!=typeof e)throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const a=r[n],s=t[a];if(s){const t=e[a],i=void 0===t||s(t,a,e);if(!0!==i)throw new fe("option "+a+" must be "+i,fe.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new fe("Unknown option "+a,fe.ERR_BAD_OPTION)}},validators:Ke},tt=et.validators;class it{constructor(e){this.defaults=e,this.interceptors={request:new Te,response:new Te}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Je(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:n}=t;let a;void 0!==i&&et.assertOptions(i,{silentJSONParsing:tt.transitional(tt.boolean),forcedJSONParsing:tt.transitional(tt.boolean),clarifyTimeoutError:tt.transitional(tt.boolean)},!1),null!=r&&(ce.isFunction(r)?t.paramsSerializer={serialize:r}:et.assertOptions(r,{encode:tt.function,serialize:tt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),a=n&&ce.merge(n.common,n[t.method]),a&&ce.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=Ve.concat(a,n);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!o){const e=[qe.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=s.length;let d=t;for(h=0;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{c=qe.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Se(He((e=Je(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ce.forEach(["delete","get","head","options"],(function(e){it.prototype[e]=function(t,i){return this.request(Je(i||{},{method:e,url:t,data:(i||{}).data}))}})),ce.forEach(["post","put","patch"],(function(e){function t(t){return function(i,r,n){return this.request(Je(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}it.prototype[e]=t(),it.prototype[e+"Form"]=t(!0)}));const rt=it;class nt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{i.subscribe(e),t=e})).then(e);return r.cancel=function(){i.unsubscribe(t)},r},e((function(e,r,n){i.reason||(i.reason=new je(e,r,n),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new nt((function(t){e=t})),cancel:e}}}const at=nt,st={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(st).forEach((([e,t])=>{st[t]=e}));const ot=st,lt=function e(t){const i=new rt(t),r=P(rt.prototype.request,i);return ce.extend(r,rt.prototype,i,{allOwnKeys:!0}),ce.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return e(Je(t,i))},r}(ke);lt.Axios=rt,lt.CanceledError=je,lt.CancelToken=at,lt.isCancel=Ge,lt.VERSION="1.4.0",lt.toFormData=ve,lt.AxiosError=fe,lt.Cancel=lt.CanceledError,lt.all=function(e){return Promise.all(e)},lt.spread=function(e){return function(t){return e.apply(null,t)}},lt.isAxiosError=function(e){return ce.isObject(e)&&!0===e.isAxiosError},lt.mergeConfig=Je,lt.AxiosHeaders=Ve,lt.formToJSON=e=>Re(ce.isHTMLForm(e)?new FormData(e):e),lt.HttpStatusCode=ot,lt.default=lt;const ct=lt;var ut=function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function o(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}))};window.SDV=t;const ht=document.getElementById("menu-left"),dt=document.getElementById("menu-right");let ft,pt,mt=[],gt=0;const bt=T.resolve(t.MaterialEngine),vt=e=>ut(void 0,void 0,void 0,(function*(){var i;const r={};for(let t in e)"impurityMap"===t&&e.impurityMap?r.impurityMap=(yield bt.loadMap(e.impurityMap))||void 0:r[t]=e[t];const n=["SmallSideDiamonds","BigSideDiamonds","BigDiamond","Gem"];for(let e=0;e<n.length;e++){const e=ft.getOutputByName("gemsAll").find((e=>!e.format.includes("material")));e&&(e.node.traverse((i=>{console.log(e);for(let e=0;e<i.data.length;e++)i.data[e]instanceof t.GeometryData&&(i.data[e].material=new t.MaterialGemData(r))})),null===(i=e.node)||void 0===i||i.updateVersion())}pt.update()})),_t=e=>{((e,i)=>{for(let r in e){M[r]=e[r];const n=i.querySelector("[name="+r+"]"),a=n.getAttribute("type");if("slider"===a){const t=n.querySelector('[name="inputElement"]'),i=n.querySelector('[name="valueLabel"]');t.value=e[r]+"",i.innerHTML=e[r]+""}else if("dropdown"===a){const e=n.querySelector('[name="inputElement"]'),i=Object.values(t.ENVIRONMENT_MAP).indexOf(M[r]);e.childNodes[i].setAttribute("selected",""),e.onchange(new Event("custom"))}else"string"===a&&(n.querySelector('[name="inputElement"]').value=void 0===e[r]?"":e[r]+"")}vt(e)})(e.properties,ht),((e,i)=>{for(let r in e){const n=i.querySelector('[name="'+r+'"]'),a=n.getAttribute("type");if(a===t.PARAMETER_TYPE.INT||a===t.PARAMETER_TYPE.FLOAT||a===t.PARAMETER_TYPE.EVEN||a===t.PARAMETER_TYPE.ODD){const t=n.querySelector('[name="inputElement"]');t.value=e[r]+"",t.onchange(new Event("custom"))}else if(a===t.PARAMETER_TYPE.BOOL){const t=n.querySelector('[name="inputElement"]');"true"===e[r]&&t.setAttribute("checked",""),t.onchange(new Event("custom"))}else if(a===t.PARAMETER_TYPE.STRING||a===t.PARAMETER_TYPE.COLOR){const t=n.querySelector('[name="inputElement"]');t.value=e[r]+"",t.onchange(new Event("custom"))}else if(a===t.PARAMETER_TYPE.STRINGLIST){const t=n.querySelector('[name="inputElement"]');t.value=e[r],t.childNodes[+e[r]].setAttribute("selected",""),t.onchange(new Event("custom"))}}})(e.parameters,dt)},yt="http://localhost:1337/api/shape-diver-configs";ut(void 0,void 0,void 0,(function*(){yield ct.get(yt),pt=yield t.createViewport({id:"myViewport",canvas:document.getElementById("canvas"),branding:{backgroundColor:"#374151"}}),At()}));const At=()=>ut(void 0,void 0,void 0,(function*(){try{const e=yield ct.get(yt);200===e.status&&(mt=e.data.data,console.log(mt[gt].attributes.ticket),Et({containerId:"canvas",modelViewUrl:"https://sdeuc1.eu-central-1.shapediver.com",ticket:mt[gt].attributes.ticket,waitForOutputs:!0}))}catch(e){console.error("Failed to fetch models",e)}})),Et=e=>ut(void 0,void 0,void 0,(function*(){ft&&ft.close(),ft=yield t.createSession(e),R([{tooltip:'The environment map plays a huge role in the rendering of the gemstones. Not only does it provide additional color input, it also adds illumination. This illumination can vary depending on the map that is chosen. Therefore, it might be necessary to adapt other properties when changing the environment map (like gamma, contrast or brightness). The presets are adjusted to the "photo_studio_broadway_hall" map.',key:"environmentMap",name:"Environment Map",type:"dropdown",callback:e=>{let i,r,n,a;i=t.addListener(t.EVENTTYPE.TASK.TASK_START,(e=>{const r=e;r.type===t.TASK_TYPE.ENVIRONMENT_MAP_LOADING&&(a=r.id,t.removeListener(i))}));const s=e=>{const i=e;i.type===t.TASK_TYPE.ENVIRONMENT_MAP_LOADING&&a===i.id&&(pt.update(),t.removeListener(r),t.removeListener(n))};r=t.addListener(t.EVENTTYPE.TASK.TASK_END,s),n=t.addListener(t.EVENTTYPE.TASK.TASK_CANCEL,s),pt.environmentMap=Object.values(t.ENVIRONMENT_MAP)[+e]},choices:Object.values(t.ENVIRONMENT_MAP),value:pt.environmentMap},{tooltip:"The refraction index (or refractive index) provides information about the bending of light within the medium.",key:"refractionIndex",name:"Refraction Index",type:"slider",min:1,max:4,step:.01},{tooltip:"The impurity map is used to simulate small imperfections. See the emerald example to see this property in use.",key:"impurityMap",name:"Impurity Map",type:"string"},{tooltip:"The impurity scale is a range that is used to control the effect of the impurity map.",key:"impurityScale",name:"Impurity Scale",type:"slider",min:0,max:1,step:.01},{tooltip:"To simulate the color depth of gemstones, we use to color values that are interpolated depending on the depth of the tracing.",key:"colorTransferBegin",name:"Color Transfer Begin",type:"string"},{tooltip:"To simulate the color depth of gemstones, we use to color values that are interpolated depending on the depth of the tracing.",key:"colorTransferEnd",name:"Color Transfer End",type:"string"},{tooltip:"Adjusts the gamma value of the gem rendering.",key:"gamma",name:"Gamma",type:"slider",min:0,max:2,step:.01},{tooltip:"Adjusts the contrast value of the gem rendering.",key:"contrast",name:"Contrast",type:"slider",min:0,max:5,step:.01},{tooltip:"Adjusts the brightness value of the gem rendering.",key:"brightness",name:"Brightness",type:"slider",min:-1,max:1,step:.01},{tooltip:"Dispersion is a phenomenon that splits light rays into their separate color components. To simulate this, we have an approximation of dispersion. This value can be used to adjust the impact of the dispersion effect.",key:"dispersion",name:"Dispersion",type:"slider",min:0,max:1,step:.01},{tooltip:"In the real world, the light bounces through gem stones an infinite amount of times and splits into infinete separate rays. As this is not possible for us we have a fixed tracing depth that can be adjusted.",key:"tracingDepth",name:"Tracing Depth",type:"slider",min:1,max:10,step:1},{tooltip:"To adjust the opacity of the stone, this value can be used. The overall opacity is still affected by the probability of the incident refraction, but this value can be used to have influence on it.",key:"tracingOpacity",name:"Tracing Opacity",type:"slider",min:0,max:1,step:.01}],ht),console.log("i`m here?"),R([{name:"Presets",type:"dropdown",callback:e=>{_t(Object.values(x)[+e])},choices:Object.keys(x),value:"Diamond"}],dt),((e,i)=>{for(let r in e.parameters){if(e.parameters[r].hidden)continue;const n=e.parameters[r],a=document.createElement("div");a.setAttribute("name",r),a.setAttribute("type",n.type);const s=document.createElement("label");s.innerHTML=n.name;const o=document.createElement("label");o.setAttribute("name","valueLabel");let l=null;if(n.type===t.PARAMETER_TYPE.INT||n.type===t.PARAMETER_TYPE.FLOAT||n.type===t.PARAMETER_TYPE.EVEN||n.type===t.PARAMETER_TYPE.ODD){const e=document.createElement("div");e.style.justifyContent="space-between",e.style.display="flex",l=document.createElement("input"),l.setAttribute("name","inputElement"),l.setAttribute("id",n.id),l.setAttribute("type","range"),l.setAttribute("min",(n.min,n.min+"")),l.setAttribute("max",(n.max,n.max+"")),o.innerHTML=n.value,l.setAttribute("value",n.value),l.classList.value="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",s.classList.value="mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",o.classList.value="mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",e.appendChild(s),e.appendChild(o),a.appendChild(e),n.type===t.PARAMETER_TYPE.INT?l.setAttribute("step","1"):n.type===t.PARAMETER_TYPE.EVEN||n.type===t.PARAMETER_TYPE.ODD?l.setAttribute("step","2"):l.setAttribute("step",1/Math.pow(10,n.decimalplaces)+"")}else if(n.type===t.PARAMETER_TYPE.BOOL)l=document.createElement("input"),l.setAttribute("name","inputElement"),l.setAttribute("id",n.id),l.setAttribute("type","checkbox"),n.value&&l.setAttribute("checked",""),a.classList.value="flex items-center",a.style.justifyContent="space-between",l.classList.value="ml-2 mb-2 mt-2 w-4 h-4 text-gray-600 bg-gray-100 rounded border-gray-300 focus:ring-gray-500 dark:focus:ring-gray-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600",s.classList.value="mb-2 mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",a.appendChild(s),a.appendChild(l);else if(n.type===t.PARAMETER_TYPE.STRING||n.type===t.PARAMETER_TYPE.COLOR)l=document.createElement("input"),l.setAttribute("name","inputElement"),l.setAttribute("id",n.id),l.setAttribute("type","text"),l.setAttribute("value",n.value),l.classList.value="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-gray-500 focus:border-gray-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-gray-300 dark:focus:ring-gray-500 dark:focus:border-gray-500",s.classList.value="block mb-2 mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",a.appendChild(s),a.appendChild(l);else if(n.type===t.PARAMETER_TYPE.STRINGLIST){l=document.createElement("select"),l.setAttribute("name","inputElement"),l.setAttribute("id",n.id);for(let e=0;e<n.choices.length;e++){let t=document.createElement("option");t.setAttribute("value",e+""),t.setAttribute("name",n.choices[e]),t.innerHTML=n.choices[e],t.classList.value="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-gray-300",+n.value==e&&t.setAttribute("selected",""),l.appendChild(t)}l.classList.value="w-full mb-2 mt-2 right-5 text-gray-300 bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-1 py-0.5 text-center inline-flex items-center dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800",s.classList.value="block mt-2 text-sm font-medium text-gray-900 dark:text-gray-300",a.appendChild(s),a.appendChild(l)}l&&(l.onchange=()=>{return i=void 0,r=void 0,s=function*(){n.value=n.type===t.PARAMETER_TYPE.BOOL?l.checked:l.value,yield e.customize(),t.viewports.myViewport.update(),vt(M)},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{l(s.next(e))}catch(e){t(e)}}function o(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,o)}l((s=s.apply(i,r||[])).next())}));var i,r,a,s},n.hidden&&a.setAttribute("hidden",""),i.classList.value="code-preview rounded-xl bg-gradient-to-r bg-white border border-gray-900 dark:border-gray-700 p-2 sm:p-6 dark:bg-gray-500",i.appendChild(a))}})(ft,dt),_t(x.Diamond),pt.update()}));document.getElementById("prevButton").addEventListener("click",(()=>{gt=(gt-1+mt.length)%mt.length,Et({containerId:"canvas",modelViewUrl:"https://sdeuc1.eu-central-1.shapediver.com",ticket:mt[gt].attributes.ticket,waitForOutputs:!0})})),document.getElementById("nextButton").addEventListener("click",(()=>{gt=(gt+1)%mt.length,Et({containerId:"canvas",modelViewUrl:"https://sdeuc1.eu-central-1.shapediver.com",ticket:mt[gt].attributes.ticket,waitForOutputs:!0})}))})()})();